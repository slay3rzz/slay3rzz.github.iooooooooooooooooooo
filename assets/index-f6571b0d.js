var to=Object.defineProperty;var ro=(lt,ft,dt)=>ft in lt?to(lt,ft,{enumerable:!0,configurable:!0,writable:!0,value:dt}):lt[ft]=dt;var Yr=(lt,ft,dt)=>(ro(lt,typeof ft!="symbol"?ft+"":ft,dt),dt);(function(){const ft=document.createElement("link").relList;if(ft&&ft.supports&&ft.supports("modulepreload"))return;for(const Et of document.querySelectorAll('link[rel="modulepreload"]'))vt(Et);new MutationObserver(Et=>{for(const St of Et)if(St.type==="childList")for(const Tt of St.addedNodes)Tt.tagName==="LINK"&&Tt.rel==="modulepreload"&&vt(Tt)}).observe(document,{childList:!0,subtree:!0});function dt(Et){const St={};return Et.integrity&&(St.integrity=Et.integrity),Et.referrerPolicy&&(St.referrerPolicy=Et.referrerPolicy),Et.crossOrigin==="use-credentials"?St.credentials="include":Et.crossOrigin==="anonymous"?St.credentials="omit":St.credentials="same-origin",St}function vt(Et){if(Et.ep)return;Et.ep=!0;const St=dt(Et);fetch(Et.href,St)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(lt){return lt&&lt.__esModule&&Object.prototype.hasOwnProperty.call(lt,"default")?lt.default:lt}function getAugmentedNamespace(lt){if(lt.__esModule)return lt;var ft=lt.default;if(typeof ft=="function"){var dt=function vt(){if(this instanceof vt){var Et=[null];Et.push.apply(Et,arguments);var St=Function.bind.apply(ft,Et);return new St}return ft.apply(this,arguments)};dt.prototype=ft.prototype}else dt={};return Object.defineProperty(dt,"__esModule",{value:!0}),Object.keys(lt).forEach(function(vt){var Et=Object.getOwnPropertyDescriptor(lt,vt);Object.defineProperty(dt,vt,Et.get?Et:{enumerable:!0,get:function(){return lt[vt]}})}),dt}var jsxRuntimeExports={},jsxRuntime={get exports(){return jsxRuntimeExports},set exports(lt){jsxRuntimeExports=lt}},reactJsxRuntime_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$c=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject$u(lt){if(lt==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(lt)}function shouldUseNative(){try{if(!Object.assign)return!1;var lt=new String("abc");if(lt[5]="de",Object.getOwnPropertyNames(lt)[0]==="5")return!1;for(var ft={},dt=0;dt<10;dt++)ft["_"+String.fromCharCode(dt)]=dt;var vt=Object.getOwnPropertyNames(ft).map(function(St){return ft[St]});if(vt.join("")!=="0123456789")return!1;var Et={};return"abcdefghijklmnopqrst".split("").forEach(function(St){Et[St]=St}),Object.keys(Object.assign({},Et)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign$1=shouldUseNative()?Object.assign:function(lt,ft){for(var dt,vt=toObject$u(lt),Et,St=1;St<arguments.length;St++){dt=Object(arguments[St]);for(var Tt in dt)hasOwnProperty$c.call(dt,Tt)&&(vt[Tt]=dt[Tt]);if(getOwnPropertySymbols){Et=getOwnPropertySymbols(dt);for(var At=0;At<Et.length;At++)propIsEnumerable.call(dt,Et[At])&&(vt[Et[At]]=dt[Et[At]])}}return vt},reactExports={},react={get exports(){return reactExports},set exports(lt){reactExports=lt}},react_production_min={};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$7=objectAssign$1,n$5=60103,p$5=60106;react_production_min.Fragment=60107;react_production_min.StrictMode=60108;react_production_min.Profiler=60114;var q$5=60109,r$5=60110,t$3=60112;react_production_min.Suspense=60113;var u$5=60115,v$5=60116;if(typeof Symbol=="function"&&Symbol.for){var w$3=Symbol.for;n$5=w$3("react.element"),p$5=w$3("react.portal"),react_production_min.Fragment=w$3("react.fragment"),react_production_min.StrictMode=w$3("react.strict_mode"),react_production_min.Profiler=w$3("react.profiler"),q$5=w$3("react.provider"),r$5=w$3("react.context"),t$3=w$3("react.forward_ref"),react_production_min.Suspense=w$3("react.suspense"),u$5=w$3("react.memo"),v$5=w$3("react.lazy")}var x$4=typeof Symbol=="function"&&Symbol.iterator;function y$8(lt){return lt===null||typeof lt!="object"?null:(lt=x$4&&lt[x$4]||lt["@@iterator"],typeof lt=="function"?lt:null)}function z$3(lt){for(var ft="https://reactjs.org/docs/error-decoder.html?invariant="+lt,dt=1;dt<arguments.length;dt++)ft+="&args[]="+encodeURIComponent(arguments[dt]);return"Minified React error #"+lt+"; visit "+ft+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B$2={};function C$3(lt,ft,dt){this.props=lt,this.context=ft,this.refs=B$2,this.updater=dt||A$3}C$3.prototype.isReactComponent={};C$3.prototype.setState=function(lt,ft){if(typeof lt!="object"&&typeof lt!="function"&&lt!=null)throw Error(z$3(85));this.updater.enqueueSetState(this,lt,ft,"setState")};C$3.prototype.forceUpdate=function(lt){this.updater.enqueueForceUpdate(this,lt,"forceUpdate")};function D$5(){}D$5.prototype=C$3.prototype;function E$5(lt,ft,dt){this.props=lt,this.context=ft,this.refs=B$2,this.updater=dt||A$3}var F$4=E$5.prototype=new D$5;F$4.constructor=E$5;l$7(F$4,C$3.prototype);F$4.isPureReactComponent=!0;var G$2={current:null},H$3=Object.prototype.hasOwnProperty,I$5={key:!0,ref:!0,__self:!0,__source:!0};function J$2(lt,ft,dt){var vt,Et={},St=null,Tt=null;if(ft!=null)for(vt in ft.ref!==void 0&&(Tt=ft.ref),ft.key!==void 0&&(St=""+ft.key),ft)H$3.call(ft,vt)&&!I$5.hasOwnProperty(vt)&&(Et[vt]=ft[vt]);var At=arguments.length-2;if(At===1)Et.children=dt;else if(1<At){for(var Ct=Array(At),Rt=0;Rt<At;Rt++)Ct[Rt]=arguments[Rt+2];Et.children=Ct}if(lt&&lt.defaultProps)for(vt in At=lt.defaultProps,At)Et[vt]===void 0&&(Et[vt]=At[vt]);return{$$typeof:n$5,type:lt,key:St,ref:Tt,props:Et,_owner:G$2.current}}function K$1(lt,ft){return{$$typeof:n$5,type:lt.type,key:ft,ref:lt.ref,props:lt.props,_owner:lt._owner}}function L$3(lt){return typeof lt=="object"&&lt!==null&&lt.$$typeof===n$5}function escape$2(lt){var ft={"=":"=0",":":"=2"};return"$"+lt.replace(/[=:]/g,function(dt){return ft[dt]})}var M$3=/\/+/g;function N$2(lt,ft){return typeof lt=="object"&&lt!==null&&lt.key!=null?escape$2(""+lt.key):ft.toString(36)}function O$3(lt,ft,dt,vt,Et){var St=typeof lt;(St==="undefined"||St==="boolean")&&(lt=null);var Tt=!1;if(lt===null)Tt=!0;else switch(St){case"string":case"number":Tt=!0;break;case"object":switch(lt.$$typeof){case n$5:case p$5:Tt=!0}}if(Tt)return Tt=lt,Et=Et(Tt),lt=vt===""?"."+N$2(Tt,0):vt,Array.isArray(Et)?(dt="",lt!=null&&(dt=lt.replace(M$3,"$&/")+"/"),O$3(Et,ft,dt,"",function(Rt){return Rt})):Et!=null&&(L$3(Et)&&(Et=K$1(Et,dt+(!Et.key||Tt&&Tt.key===Et.key?"":(""+Et.key).replace(M$3,"$&/")+"/")+lt)),ft.push(Et)),1;if(Tt=0,vt=vt===""?".":vt+":",Array.isArray(lt))for(var At=0;At<lt.length;At++){St=lt[At];var Ct=vt+N$2(St,At);Tt+=O$3(St,ft,dt,Ct,Et)}else if(Ct=y$8(lt),typeof Ct=="function")for(lt=Ct.call(lt),At=0;!(St=lt.next()).done;)St=St.value,Ct=vt+N$2(St,At++),Tt+=O$3(St,ft,dt,Ct,Et);else if(St==="object")throw ft=""+lt,Error(z$3(31,ft==="[object Object]"?"object with keys {"+Object.keys(lt).join(", ")+"}":ft));return Tt}function P$3(lt,ft,dt){if(lt==null)return lt;var vt=[],Et=0;return O$3(lt,vt,"","",function(St){return ft.call(dt,St,Et++)}),vt}function Q$3(lt){if(lt._status===-1){var ft=lt._result;ft=ft(),lt._status=0,lt._result=ft,ft.then(function(dt){lt._status===0&&(dt=dt.default,lt._status=1,lt._result=dt)},function(dt){lt._status===0&&(lt._status=2,lt._result=dt)})}if(lt._status===1)return lt._result;throw lt._result}var R$2={current:null};function S$3(){var lt=R$2.current;if(lt===null)throw Error(z$3(321));return lt}var T$2={ReactCurrentDispatcher:R$2,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G$2,IsSomeRendererActing:{current:!1},assign:l$7};react_production_min.Children={map:P$3,forEach:function(lt,ft,dt){P$3(lt,function(){ft.apply(this,arguments)},dt)},count:function(lt){var ft=0;return P$3(lt,function(){ft++}),ft},toArray:function(lt){return P$3(lt,function(ft){return ft})||[]},only:function(lt){if(!L$3(lt))throw Error(z$3(143));return lt}};react_production_min.Component=C$3;react_production_min.PureComponent=E$5;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T$2;react_production_min.cloneElement=function(lt,ft,dt){if(lt==null)throw Error(z$3(267,lt));var vt=l$7({},lt.props),Et=lt.key,St=lt.ref,Tt=lt._owner;if(ft!=null){if(ft.ref!==void 0&&(St=ft.ref,Tt=G$2.current),ft.key!==void 0&&(Et=""+ft.key),lt.type&&lt.type.defaultProps)var At=lt.type.defaultProps;for(Ct in ft)H$3.call(ft,Ct)&&!I$5.hasOwnProperty(Ct)&&(vt[Ct]=ft[Ct]===void 0&&At!==void 0?At[Ct]:ft[Ct])}var Ct=arguments.length-2;if(Ct===1)vt.children=dt;else if(1<Ct){At=Array(Ct);for(var Rt=0;Rt<Ct;Rt++)At[Rt]=arguments[Rt+2];vt.children=At}return{$$typeof:n$5,type:lt.type,key:Et,ref:St,props:vt,_owner:Tt}};react_production_min.createContext=function(lt,ft){return ft===void 0&&(ft=null),lt={$$typeof:r$5,_calculateChangedBits:ft,_currentValue:lt,_currentValue2:lt,_threadCount:0,Provider:null,Consumer:null},lt.Provider={$$typeof:q$5,_context:lt},lt.Consumer=lt};react_production_min.createElement=J$2;react_production_min.createFactory=function(lt){var ft=J$2.bind(null,lt);return ft.type=lt,ft};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(lt){return{$$typeof:t$3,render:lt}};react_production_min.isValidElement=L$3;react_production_min.lazy=function(lt){return{$$typeof:v$5,_payload:{_status:-1,_result:lt},_init:Q$3}};react_production_min.memo=function(lt,ft){return{$$typeof:u$5,type:lt,compare:ft===void 0?null:ft}};react_production_min.useCallback=function(lt,ft){return S$3().useCallback(lt,ft)};react_production_min.useContext=function(lt,ft){return S$3().useContext(lt,ft)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(lt,ft){return S$3().useEffect(lt,ft)};react_production_min.useImperativeHandle=function(lt,ft,dt){return S$3().useImperativeHandle(lt,ft,dt)};react_production_min.useLayoutEffect=function(lt,ft){return S$3().useLayoutEffect(lt,ft)};react_production_min.useMemo=function(lt,ft){return S$3().useMemo(lt,ft)};react_production_min.useReducer=function(lt,ft,dt){return S$3().useReducer(lt,ft,dt)};react_production_min.useRef=function(lt){return S$3().useRef(lt)};react_production_min.useState=function(lt){return S$3().useState(lt)};react_production_min.version="17.0.2";(function(lt){lt.exports=react_production_min})(react);const React$1=getDefaultExportFromCjs(reactExports);/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$4=reactExports,g$4=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h$6=Symbol.for;g$4=h$6("react.element"),reactJsxRuntime_production_min.Fragment=h$6("react.fragment")}var m$5=f$4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$4=Object.prototype.hasOwnProperty,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$4(lt,ft,dt){var vt,Et={},St=null,Tt=null;dt!==void 0&&(St=""+dt),ft.key!==void 0&&(St=""+ft.key),ft.ref!==void 0&&(Tt=ft.ref);for(vt in ft)n$4.call(ft,vt)&&!p$4.hasOwnProperty(vt)&&(Et[vt]=ft[vt]);if(lt&&lt.defaultProps)for(vt in ft=lt.defaultProps,ft)Et[vt]===void 0&&(Et[vt]=ft[vt]);return{$$typeof:g$4,type:lt,key:St,ref:Tt,props:Et,_owner:m$5.current}}reactJsxRuntime_production_min.jsx=q$4;reactJsxRuntime_production_min.jsxs=q$4;(function(lt){lt.exports=reactJsxRuntime_production_min})(jsxRuntime);const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var stableExports={},stable={get exports(){return stableExports},set exports(lt){stableExports=lt}},check=function(lt){return lt&&lt.Math==Math&&lt},global$_=check(typeof globalThis=="object"&&globalThis)||check(typeof window=="object"&&window)||check(typeof self=="object"&&self)||check(typeof commonjsGlobal$1=="object"&&commonjsGlobal$1)||function(){return this}()||Function("return this")(),objectGetOwnPropertyDescriptor={},fails$1m=function(lt){try{return!!lt()}catch{return!0}},fails$1l=fails$1m,descriptors=!fails$1l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),fails$1k=fails$1m,functionBindNative=!fails$1k(function(){var lt=function(){}.bind();return typeof lt!="function"||lt.hasOwnProperty("prototype")}),NATIVE_BIND$4=functionBindNative,call$F=Function.prototype.call,functionCall=NATIVE_BIND$4?call$F.bind(call$F):function(){return call$F.apply(call$F,arguments)},objectPropertyIsEnumerable={},$propertyIsEnumerable$2={}.propertyIsEnumerable,getOwnPropertyDescriptor$b=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$b&&!$propertyIsEnumerable$2.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function(ft){var dt=getOwnPropertyDescriptor$b(this,ft);return!!dt&&dt.enumerable}:$propertyIsEnumerable$2;var createPropertyDescriptor$c=function(lt,ft){return{enumerable:!(lt&1),configurable:!(lt&2),writable:!(lt&4),value:ft}},NATIVE_BIND$3=functionBindNative,FunctionPrototype$4=Function.prototype,call$E=FunctionPrototype$4.call,uncurryThisWithBind=NATIVE_BIND$3&&FunctionPrototype$4.bind.bind(call$E,call$E),functionUncurryThis=NATIVE_BIND$3?uncurryThisWithBind:function(lt){return function(){return call$E.apply(lt,arguments)}},uncurryThis$1j=functionUncurryThis,toString$B=uncurryThis$1j({}.toString),stringSlice$i=uncurryThis$1j("".slice),classofRaw$2=function(lt){return stringSlice$i(toString$B(lt),8,-1)},uncurryThis$1i=functionUncurryThis,fails$1j=fails$1m,classof$n=classofRaw$2,$Object$5=Object,split$3=uncurryThis$1i("".split),indexedObject=fails$1j(function(){return!$Object$5("z").propertyIsEnumerable(0)})?function(lt){return classof$n(lt)=="String"?split$3(lt,""):$Object$5(lt)}:$Object$5,isNullOrUndefined$e=function(lt){return lt==null},isNullOrUndefined$d=isNullOrUndefined$e,$TypeError$p=TypeError,requireObjectCoercible$j=function(lt){if(isNullOrUndefined$d(lt))throw $TypeError$p("Can't call method on "+lt);return lt},IndexedObject$5=indexedObject,requireObjectCoercible$i=requireObjectCoercible$j,toIndexedObject$j=function(lt){return IndexedObject$5(requireObjectCoercible$i(lt))},documentAll$2=typeof document=="object"&&document.all,IS_HTMLDDA=typeof documentAll$2>"u"&&documentAll$2!==void 0,documentAll_1={all:documentAll$2,IS_HTMLDDA},$documentAll$1=documentAll_1,documentAll$1=$documentAll$1.all,isCallable$z=$documentAll$1.IS_HTMLDDA?function(lt){return typeof lt=="function"||lt===documentAll$1}:function(lt){return typeof lt=="function"},isCallable$y=isCallable$z,$documentAll=documentAll_1,documentAll=$documentAll.all,isObject$K=$documentAll.IS_HTMLDDA?function(lt){return typeof lt=="object"?lt!==null:isCallable$y(lt)||lt===documentAll}:function(lt){return typeof lt=="object"?lt!==null:isCallable$y(lt)},global$Z=global$_,isCallable$x=isCallable$z,aFunction=function(lt){return isCallable$x(lt)?lt:void 0},getBuiltIn$m=function(lt,ft){return arguments.length<2?aFunction(global$Z[lt]):global$Z[lt]&&global$Z[lt][ft]},uncurryThis$1h=functionUncurryThis,objectIsPrototypeOf=uncurryThis$1h({}.isPrototypeOf),engineUserAgent=typeof navigator<"u"&&String(navigator.userAgent)||"",global$Y=global$_,userAgent$6=engineUserAgent,process$5=global$Y.process,Deno$1=global$Y.Deno,versions=process$5&&process$5.versions||Deno$1&&Deno$1.version,v8=versions&&versions.v8,match,version;v8&&(match=v8.split("."),version=match[0]>0&&match[0]<4?1:+(match[0]+match[1]));!version&&userAgent$6&&(match=userAgent$6.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent$6.match(/Chrome\/(\d+)/),match&&(version=+match[1])));var engineV8Version=version,V8_VERSION$3=engineV8Version,fails$1i=fails$1m,symbolConstructorDetection=!!Object.getOwnPropertySymbols&&!fails$1i(function(){var lt=Symbol();return!String(lt)||!(Object(lt)instanceof Symbol)||!Symbol.sham&&V8_VERSION$3&&V8_VERSION$3<41}),NATIVE_SYMBOL$6=symbolConstructorDetection,useSymbolAsUid=NATIVE_SYMBOL$6&&!Symbol.sham&&typeof Symbol.iterator=="symbol",getBuiltIn$l=getBuiltIn$m,isCallable$w=isCallable$z,isPrototypeOf$b=objectIsPrototypeOf,USE_SYMBOL_AS_UID$1=useSymbolAsUid,$Object$4=Object,isSymbol$a=USE_SYMBOL_AS_UID$1?function(lt){return typeof lt=="symbol"}:function(lt){var ft=getBuiltIn$l("Symbol");return isCallable$w(ft)&&isPrototypeOf$b(ft.prototype,$Object$4(lt))},$String$7=String,tryToString$7=function(lt){try{return $String$7(lt)}catch{return"Object"}},isCallable$v=isCallable$z,tryToString$6=tryToString$7,$TypeError$o=TypeError,aCallable$l=function(lt){if(isCallable$v(lt))return lt;throw $TypeError$o(tryToString$6(lt)+" is not a function")},aCallable$k=aCallable$l,isNullOrUndefined$c=isNullOrUndefined$e,getMethod$9=function(lt,ft){var dt=lt[ft];return isNullOrUndefined$c(dt)?void 0:aCallable$k(dt)},call$D=functionCall,isCallable$u=isCallable$z,isObject$J=isObject$K,$TypeError$n=TypeError,ordinaryToPrimitive$2=function(lt,ft){var dt,vt;if(ft==="string"&&isCallable$u(dt=lt.toString)&&!isObject$J(vt=call$D(dt,lt))||isCallable$u(dt=lt.valueOf)&&!isObject$J(vt=call$D(dt,lt))||ft!=="string"&&isCallable$u(dt=lt.toString)&&!isObject$J(vt=call$D(dt,lt)))return vt;throw $TypeError$n("Can't convert object to primitive value")},sharedExports={},shared$7={get exports(){return sharedExports},set exports(lt){sharedExports=lt}},isPure=!1,global$X=global$_,defineProperty$h=Object.defineProperty,defineGlobalProperty$3=function(lt,ft){try{defineProperty$h(global$X,lt,{value:ft,configurable:!0,writable:!0})}catch{global$X[lt]=ft}return ft},global$W=global$_,defineGlobalProperty$2=defineGlobalProperty$3,SHARED="__core-js_shared__",store$3=global$W[SHARED]||defineGlobalProperty$2(SHARED,{}),sharedStore=store$3,store$2=sharedStore;(shared$7.exports=function(lt,ft){return store$2[lt]||(store$2[lt]=ft!==void 0?ft:{})})("versions",[]).push({version:"3.29.1",mode:"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"});var requireObjectCoercible$h=requireObjectCoercible$j,$Object$3=Object,toObject$t=function(lt){return $Object$3(requireObjectCoercible$h(lt))},uncurryThis$1g=functionUncurryThis,toObject$s=toObject$t,hasOwnProperty$b=uncurryThis$1g({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function(ft,dt){return hasOwnProperty$b(toObject$s(ft),dt)},uncurryThis$1f=functionUncurryThis,id$4=0,postfix=Math.random(),toString$A=uncurryThis$1f(1 .toString),uid$6=function(lt){return"Symbol("+(lt===void 0?"":lt)+")_"+toString$A(++id$4+postfix,36)},global$V=global$_,shared$6=sharedExports,hasOwn$w=hasOwnProperty_1,uid$5=uid$6,NATIVE_SYMBOL$5=symbolConstructorDetection,USE_SYMBOL_AS_UID=useSymbolAsUid,Symbol$7=global$V.Symbol,WellKnownSymbolsStore$1=shared$6("wks"),createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol$7.for||Symbol$7:Symbol$7&&Symbol$7.withoutSetter||uid$5,wellKnownSymbol$z=function(lt){return hasOwn$w(WellKnownSymbolsStore$1,lt)||(WellKnownSymbolsStore$1[lt]=NATIVE_SYMBOL$5&&hasOwn$w(Symbol$7,lt)?Symbol$7[lt]:createWellKnownSymbol("Symbol."+lt)),WellKnownSymbolsStore$1[lt]},call$C=functionCall,isObject$I=isObject$K,isSymbol$9=isSymbol$a,getMethod$8=getMethod$9,ordinaryToPrimitive$1=ordinaryToPrimitive$2,wellKnownSymbol$y=wellKnownSymbol$z,$TypeError$m=TypeError,TO_PRIMITIVE$1=wellKnownSymbol$y("toPrimitive"),toPrimitive$4=function(lt,ft){if(!isObject$I(lt)||isSymbol$9(lt))return lt;var dt=getMethod$8(lt,TO_PRIMITIVE$1),vt;if(dt){if(ft===void 0&&(ft="default"),vt=call$C(dt,lt,ft),!isObject$I(vt)||isSymbol$9(vt))return vt;throw $TypeError$m("Can't convert object to primitive value")}return ft===void 0&&(ft="number"),ordinaryToPrimitive$1(lt,ft)},toPrimitive$3=toPrimitive$4,isSymbol$8=isSymbol$a,toPropertyKey$8=function(lt){var ft=toPrimitive$3(lt,"string");return isSymbol$8(ft)?ft:ft+""},global$U=global$_,isObject$H=isObject$K,document$4=global$U.document,EXISTS$1=isObject$H(document$4)&&isObject$H(document$4.createElement),documentCreateElement$2=function(lt){return EXISTS$1?document$4.createElement(lt):{}},DESCRIPTORS$J=descriptors,fails$1h=fails$1m,createElement$1=documentCreateElement$2,ie8DomDefine=!DESCRIPTORS$J&&!fails$1h(function(){return Object.defineProperty(createElement$1("div"),"a",{get:function(){return 7}}).a!=7}),DESCRIPTORS$I=descriptors,call$B=functionCall,propertyIsEnumerableModule$2=objectPropertyIsEnumerable,createPropertyDescriptor$b=createPropertyDescriptor$c,toIndexedObject$i=toIndexedObject$j,toPropertyKey$7=toPropertyKey$8,hasOwn$v=hasOwnProperty_1,IE8_DOM_DEFINE$1=ie8DomDefine,$getOwnPropertyDescriptor$2=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$I?$getOwnPropertyDescriptor$2:function(ft,dt){if(ft=toIndexedObject$i(ft),dt=toPropertyKey$7(dt),IE8_DOM_DEFINE$1)try{return $getOwnPropertyDescriptor$2(ft,dt)}catch{}if(hasOwn$v(ft,dt))return createPropertyDescriptor$b(!call$B(propertyIsEnumerableModule$2.f,ft,dt),ft[dt])};var objectDefineProperty={},DESCRIPTORS$H=descriptors,fails$1g=fails$1m,v8PrototypeDefineBug=DESCRIPTORS$H&&fails$1g(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),isObject$G=isObject$K,$String$6=String,$TypeError$l=TypeError,anObject$D=function(lt){if(isObject$G(lt))return lt;throw $TypeError$l($String$6(lt)+" is not an object")},DESCRIPTORS$G=descriptors,IE8_DOM_DEFINE=ie8DomDefine,V8_PROTOTYPE_DEFINE_BUG$1=v8PrototypeDefineBug,anObject$C=anObject$D,toPropertyKey$6=toPropertyKey$8,$TypeError$k=TypeError,$defineProperty$1=Object.defineProperty,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable";objectDefineProperty.f=DESCRIPTORS$G?V8_PROTOTYPE_DEFINE_BUG$1?function(ft,dt,vt){if(anObject$C(ft),dt=toPropertyKey$6(dt),anObject$C(vt),typeof ft=="function"&&dt==="prototype"&&"value"in vt&&WRITABLE in vt&&!vt[WRITABLE]){var Et=$getOwnPropertyDescriptor$1(ft,dt);Et&&Et[WRITABLE]&&(ft[dt]=vt.value,vt={configurable:CONFIGURABLE$1 in vt?vt[CONFIGURABLE$1]:Et[CONFIGURABLE$1],enumerable:ENUMERABLE in vt?vt[ENUMERABLE]:Et[ENUMERABLE],writable:!1})}return $defineProperty$1(ft,dt,vt)}:$defineProperty$1:function(ft,dt,vt){if(anObject$C(ft),dt=toPropertyKey$6(dt),anObject$C(vt),IE8_DOM_DEFINE)try{return $defineProperty$1(ft,dt,vt)}catch{}if("get"in vt||"set"in vt)throw $TypeError$k("Accessors not supported");return"value"in vt&&(ft[dt]=vt.value),ft};var DESCRIPTORS$F=descriptors,definePropertyModule$b=objectDefineProperty,createPropertyDescriptor$a=createPropertyDescriptor$c,createNonEnumerableProperty$f=DESCRIPTORS$F?function(lt,ft,dt){return definePropertyModule$b.f(lt,ft,createPropertyDescriptor$a(1,dt))}:function(lt,ft,dt){return lt[ft]=dt,lt},makeBuiltInExports={},makeBuiltIn$4={get exports(){return makeBuiltInExports},set exports(lt){makeBuiltInExports=lt}},DESCRIPTORS$E=descriptors,hasOwn$u=hasOwnProperty_1,FunctionPrototype$3=Function.prototype,getDescriptor=DESCRIPTORS$E&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$u(FunctionPrototype$3,"name"),PROPER=EXISTS&&function(){}.name==="something",CONFIGURABLE=EXISTS&&(!DESCRIPTORS$E||DESCRIPTORS$E&&getDescriptor(FunctionPrototype$3,"name").configurable),functionName={EXISTS,PROPER,CONFIGURABLE},uncurryThis$1e=functionUncurryThis,isCallable$t=isCallable$z,store$1=sharedStore,functionToString$1=uncurryThis$1e(Function.toString);isCallable$t(store$1.inspectSource)||(store$1.inspectSource=function(lt){return functionToString$1(lt)});var inspectSource$3=store$1.inspectSource,global$T=global$_,isCallable$s=isCallable$z,WeakMap$4=global$T.WeakMap,weakMapBasicDetection=isCallable$s(WeakMap$4)&&/native code/.test(String(WeakMap$4)),shared$5=sharedExports,uid$4=uid$6,keys$7=shared$5("keys"),sharedKey$4=function(lt){return keys$7[lt]||(keys$7[lt]=uid$4(lt))},hiddenKeys$6={},NATIVE_WEAK_MAP$1=weakMapBasicDetection,global$S=global$_,isObject$F=isObject$K,createNonEnumerableProperty$e=createNonEnumerableProperty$f,hasOwn$t=hasOwnProperty_1,shared$4=sharedStore,sharedKey$3=sharedKey$4,hiddenKeys$5=hiddenKeys$6,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$8=global$S.TypeError,WeakMap$3=global$S.WeakMap,set$3,get$4,has,enforce=function(lt){return has(lt)?get$4(lt):set$3(lt,{})},getterFor$1=function(lt){return function(ft){var dt;if(!isObject$F(ft)||(dt=get$4(ft)).type!==lt)throw TypeError$8("Incompatible receiver, "+lt+" required");return dt}};if(NATIVE_WEAK_MAP$1||shared$4.state){var store=shared$4.state||(shared$4.state=new WeakMap$3);store.get=store.get,store.has=store.has,store.set=store.set,set$3=function(lt,ft){if(store.has(lt))throw TypeError$8(OBJECT_ALREADY_INITIALIZED);return ft.facade=lt,store.set(lt,ft),ft},get$4=function(lt){return store.get(lt)||{}},has=function(lt){return store.has(lt)}}else{var STATE=sharedKey$3("state");hiddenKeys$5[STATE]=!0,set$3=function(lt,ft){if(hasOwn$t(lt,STATE))throw TypeError$8(OBJECT_ALREADY_INITIALIZED);return ft.facade=lt,createNonEnumerableProperty$e(lt,STATE,ft),ft},get$4=function(lt){return hasOwn$t(lt,STATE)?lt[STATE]:{}},has=function(lt){return hasOwn$t(lt,STATE)}}var internalState={set:set$3,get:get$4,has,enforce,getterFor:getterFor$1},uncurryThis$1d=functionUncurryThis,fails$1f=fails$1m,isCallable$r=isCallable$z,hasOwn$s=hasOwnProperty_1,DESCRIPTORS$D=descriptors,CONFIGURABLE_FUNCTION_NAME$2=functionName.CONFIGURABLE,inspectSource$2=inspectSource$3,InternalStateModule$d=internalState,enforceInternalState$4=InternalStateModule$d.enforce,getInternalState$a=InternalStateModule$d.get,$String$5=String,defineProperty$g=Object.defineProperty,stringSlice$h=uncurryThis$1d("".slice),replace$c=uncurryThis$1d("".replace),join$7=uncurryThis$1d([].join),CONFIGURABLE_LENGTH=DESCRIPTORS$D&&!fails$1f(function(){return defineProperty$g(function(){},"length",{value:8}).length!==8}),TEMPLATE=String(String).split("String"),makeBuiltIn$3=makeBuiltIn$4.exports=function(lt,ft,dt){stringSlice$h($String$5(ft),0,7)==="Symbol("&&(ft="["+replace$c($String$5(ft),/^Symbol\(([^)]*)\)/,"$1")+"]"),dt&&dt.getter&&(ft="get "+ft),dt&&dt.setter&&(ft="set "+ft),(!hasOwn$s(lt,"name")||CONFIGURABLE_FUNCTION_NAME$2&&lt.name!==ft)&&(DESCRIPTORS$D?defineProperty$g(lt,"name",{value:ft,configurable:!0}):lt.name=ft),CONFIGURABLE_LENGTH&&dt&&hasOwn$s(dt,"arity")&&lt.length!==dt.arity&&defineProperty$g(lt,"length",{value:dt.arity});try{dt&&hasOwn$s(dt,"constructor")&&dt.constructor?DESCRIPTORS$D&&defineProperty$g(lt,"prototype",{writable:!1}):lt.prototype&&(lt.prototype=void 0)}catch{}var vt=enforceInternalState$4(lt);return hasOwn$s(vt,"source")||(vt.source=join$7(TEMPLATE,typeof ft=="string"?ft:"")),lt};Function.prototype.toString=makeBuiltIn$3(function(){return isCallable$r(this)&&getInternalState$a(this).source||inspectSource$2(this)},"toString");var isCallable$q=isCallable$z,definePropertyModule$a=objectDefineProperty,makeBuiltIn$2=makeBuiltInExports,defineGlobalProperty$1=defineGlobalProperty$3,defineBuiltIn$m=function(lt,ft,dt,vt){vt||(vt={});var Et=vt.enumerable,St=vt.name!==void 0?vt.name:ft;if(isCallable$q(dt)&&makeBuiltIn$2(dt,St,vt),vt.global)Et?lt[ft]=dt:defineGlobalProperty$1(ft,dt);else{try{vt.unsafe?lt[ft]&&(Et=!0):delete lt[ft]}catch{}Et?lt[ft]=dt:definePropertyModule$a.f(lt,ft,{value:dt,enumerable:!1,configurable:!vt.nonConfigurable,writable:!vt.nonWritable})}return lt},objectGetOwnPropertyNames={},ceil$1=Math.ceil,floor$a=Math.floor,mathTrunc=Math.trunc||function(ft){var dt=+ft;return(dt>0?floor$a:ceil$1)(dt)},trunc$1=mathTrunc,toIntegerOrInfinity$l=function(lt){var ft=+lt;return ft!==ft||ft===0?0:trunc$1(ft)},toIntegerOrInfinity$k=toIntegerOrInfinity$l,max$7=Math.max,min$a=Math.min,toAbsoluteIndex$a=function(lt,ft){var dt=toIntegerOrInfinity$k(lt);return dt<0?max$7(dt+ft,0):min$a(dt,ft)},toIntegerOrInfinity$j=toIntegerOrInfinity$l,min$9=Math.min,toLength$d=function(lt){return lt>0?min$9(toIntegerOrInfinity$j(lt),9007199254740991):0},toLength$c=toLength$d,lengthOfArrayLike$t=function(lt){return toLength$c(lt.length)},toIndexedObject$h=toIndexedObject$j,toAbsoluteIndex$9=toAbsoluteIndex$a,lengthOfArrayLike$s=lengthOfArrayLike$t,createMethod$7=function(lt){return function(ft,dt,vt){var Et=toIndexedObject$h(ft),St=lengthOfArrayLike$s(Et),Tt=toAbsoluteIndex$9(vt,St),At;if(lt&&dt!=dt){for(;St>Tt;)if(At=Et[Tt++],At!=At)return!0}else for(;St>Tt;Tt++)if((lt||Tt in Et)&&Et[Tt]===dt)return lt||Tt||0;return!lt&&-1}},arrayIncludes={includes:createMethod$7(!0),indexOf:createMethod$7(!1)},uncurryThis$1c=functionUncurryThis,hasOwn$r=hasOwnProperty_1,toIndexedObject$g=toIndexedObject$j,indexOf$2=arrayIncludes.indexOf,hiddenKeys$4=hiddenKeys$6,push$e=uncurryThis$1c([].push),objectKeysInternal=function(lt,ft){var dt=toIndexedObject$g(lt),vt=0,Et=[],St;for(St in dt)!hasOwn$r(hiddenKeys$4,St)&&hasOwn$r(dt,St)&&push$e(Et,St);for(;ft.length>vt;)hasOwn$r(dt,St=ft[vt++])&&(~indexOf$2(Et,St)||push$e(Et,St));return Et},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$3=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function(ft){return internalObjectKeys$1(ft,hiddenKeys$3)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$k=getBuiltIn$m,uncurryThis$1b=functionUncurryThis,getOwnPropertyNamesModule$2=objectGetOwnPropertyNames,getOwnPropertySymbolsModule$3=objectGetOwnPropertySymbols,anObject$B=anObject$D,concat$3=uncurryThis$1b([].concat),ownKeys$f=getBuiltIn$k("Reflect","ownKeys")||function(ft){var dt=getOwnPropertyNamesModule$2.f(anObject$B(ft)),vt=getOwnPropertySymbolsModule$3.f;return vt?concat$3(dt,vt(ft)):dt},hasOwn$q=hasOwnProperty_1,ownKeys$e=ownKeys$f,getOwnPropertyDescriptorModule$6=objectGetOwnPropertyDescriptor,definePropertyModule$9=objectDefineProperty,copyConstructorProperties$5=function(lt,ft,dt){for(var vt=ownKeys$e(ft),Et=definePropertyModule$9.f,St=getOwnPropertyDescriptorModule$6.f,Tt=0;Tt<vt.length;Tt++){var At=vt[Tt];!hasOwn$q(lt,At)&&!(dt&&hasOwn$q(dt,At))&&Et(lt,At,St(ft,At))}},fails$1e=fails$1m,isCallable$p=isCallable$z,replacement=/#|\.prototype\./,isForced$5=function(lt,ft){var dt=data[normalize(lt)];return dt==POLYFILL?!0:dt==NATIVE?!1:isCallable$p(ft)?fails$1e(ft):!!ft},normalize=isForced$5.normalize=function(lt){return String(lt).replace(replacement,".").toLowerCase()},data=isForced$5.data={},NATIVE=isForced$5.NATIVE="N",POLYFILL=isForced$5.POLYFILL="P",isForced_1=isForced$5,global$R=global$_,getOwnPropertyDescriptor$a=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$d=createNonEnumerableProperty$f,defineBuiltIn$l=defineBuiltIn$m,defineGlobalProperty=defineGlobalProperty$3,copyConstructorProperties$4=copyConstructorProperties$5,isForced$4=isForced_1,_export=function(lt,ft){var dt=lt.target,vt=lt.global,Et=lt.stat,St,Tt,At,Ct,Rt,Dt;if(vt?Tt=global$R:Et?Tt=global$R[dt]||defineGlobalProperty(dt,{}):Tt=(global$R[dt]||{}).prototype,Tt)for(At in ft){if(Rt=ft[At],lt.dontCallGetSet?(Dt=getOwnPropertyDescriptor$a(Tt,At),Ct=Dt&&Dt.value):Ct=Tt[At],St=isForced$4(vt?At:dt+(Et?".":"#")+At,lt.forced),!St&&Ct!==void 0){if(typeof Rt==typeof Ct)continue;copyConstructorProperties$4(Rt,Ct)}(lt.sham||Ct&&Ct.sham)&&createNonEnumerableProperty$d(Rt,"sham",!0),defineBuiltIn$l(Tt,At,Rt,lt)}},wellKnownSymbol$x=wellKnownSymbol$z,TO_STRING_TAG$5=wellKnownSymbol$x("toStringTag"),test$2={};test$2[TO_STRING_TAG$5]="z";var toStringTagSupport=String(test$2)==="[object z]",TO_STRING_TAG_SUPPORT$2=toStringTagSupport,isCallable$o=isCallable$z,classofRaw$1=classofRaw$2,wellKnownSymbol$w=wellKnownSymbol$z,TO_STRING_TAG$4=wellKnownSymbol$w("toStringTag"),$Object$2=Object,CORRECT_ARGUMENTS=classofRaw$1(function(){return arguments}())=="Arguments",tryGet=function(lt,ft){try{return lt[ft]}catch{}},classof$m=TO_STRING_TAG_SUPPORT$2?classofRaw$1:function(lt){var ft,dt,vt;return lt===void 0?"Undefined":lt===null?"Null":typeof(dt=tryGet(ft=$Object$2(lt),TO_STRING_TAG$4))=="string"?dt:CORRECT_ARGUMENTS?classofRaw$1(ft):(vt=classofRaw$1(ft))=="Object"&&isCallable$o(ft.callee)?"Arguments":vt},classof$l=classof$m,$String$4=String,toString$z=function(lt){if(classof$l(lt)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return $String$4(lt)},objectDefineProperties={},internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$3,objectKeys$5=Object.keys||function(ft){return internalObjectKeys(ft,enumBugKeys$1)},DESCRIPTORS$C=descriptors,V8_PROTOTYPE_DEFINE_BUG=v8PrototypeDefineBug,definePropertyModule$8=objectDefineProperty,anObject$A=anObject$D,toIndexedObject$f=toIndexedObject$j,objectKeys$4=objectKeys$5;objectDefineProperties.f=DESCRIPTORS$C&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function(ft,dt){anObject$A(ft);for(var vt=toIndexedObject$f(dt),Et=objectKeys$4(dt),St=Et.length,Tt=0,At;St>Tt;)definePropertyModule$8.f(ft,At=Et[Tt++],vt[At]);return ft};var getBuiltIn$j=getBuiltIn$m,html$4=getBuiltIn$j("document","documentElement"),anObject$z=anObject$D,definePropertiesModule$1=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys$2=hiddenKeys$6,html$3=html$4,documentCreateElement$1=documentCreateElement$2,sharedKey$2=sharedKey$4,GT=">",LT="<",PROTOTYPE$2="prototype",SCRIPT="script",IE_PROTO$1=sharedKey$2("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(lt){return LT+SCRIPT+GT+lt+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(lt){lt.write(scriptTag("")),lt.close();var ft=lt.parentWindow.Object;return lt=null,ft},NullProtoObjectViaIFrame=function(){var lt=documentCreateElement$1("iframe"),ft="java"+SCRIPT+":",dt;return lt.style.display="none",html$3.appendChild(lt),lt.src=String(ft),dt=lt.contentWindow.document,dt.open(),dt.write(scriptTag("document.F=Object")),dt.close(),dt.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch{}NullProtoObject=typeof document<"u"?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var lt=enumBugKeys.length;lt--;)delete NullProtoObject[PROTOTYPE$2][enumBugKeys[lt]];return NullProtoObject()};hiddenKeys$2[IE_PROTO$1]=!0;var objectCreate$1=Object.create||function(ft,dt){var vt;return ft!==null?(EmptyConstructor[PROTOTYPE$2]=anObject$z(ft),vt=new EmptyConstructor,EmptyConstructor[PROTOTYPE$2]=null,vt[IE_PROTO$1]=ft):vt=NullProtoObject(),dt===void 0?vt:definePropertiesModule$1.f(vt,dt)},objectGetOwnPropertyNamesExternal={},toPropertyKey$5=toPropertyKey$8,definePropertyModule$7=objectDefineProperty,createPropertyDescriptor$9=createPropertyDescriptor$c,createProperty$9=function(lt,ft,dt){var vt=toPropertyKey$5(ft);vt in lt?definePropertyModule$7.f(lt,vt,createPropertyDescriptor$9(0,dt)):lt[vt]=dt},toAbsoluteIndex$8=toAbsoluteIndex$a,lengthOfArrayLike$r=lengthOfArrayLike$t,createProperty$8=createProperty$9,$Array$9=Array,max$6=Math.max,arraySliceSimple=function(lt,ft,dt){for(var vt=lengthOfArrayLike$r(lt),Et=toAbsoluteIndex$8(ft,vt),St=toAbsoluteIndex$8(dt===void 0?vt:dt,vt),Tt=$Array$9(max$6(St-Et,0)),At=0;Et<St;Et++,At++)createProperty$8(Tt,At,lt[Et]);return Tt.length=At,Tt},classof$k=classofRaw$2,toIndexedObject$e=toIndexedObject$j,$getOwnPropertyNames$1=objectGetOwnPropertyNames.f,arraySlice$b=arraySliceSimple,windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(lt){try{return $getOwnPropertyNames$1(lt)}catch{return arraySlice$b(windowNames)}};objectGetOwnPropertyNamesExternal.f=function(ft){return windowNames&&classof$k(ft)=="Window"?getWindowNames(ft):$getOwnPropertyNames$1(toIndexedObject$e(ft))};var makeBuiltIn$1=makeBuiltInExports,defineProperty$f=objectDefineProperty,defineBuiltInAccessor$h=function(lt,ft,dt){return dt.get&&makeBuiltIn$1(dt.get,ft,{getter:!0}),dt.set&&makeBuiltIn$1(dt.set,ft,{setter:!0}),defineProperty$f.f(lt,ft,dt)},wellKnownSymbolWrapped={},wellKnownSymbol$v=wellKnownSymbol$z;wellKnownSymbolWrapped.f=wellKnownSymbol$v;var global$Q=global$_,path$3=global$Q,path$2=path$3,hasOwn$p=hasOwnProperty_1,wrappedWellKnownSymbolModule$1=wellKnownSymbolWrapped,defineProperty$e=objectDefineProperty.f,wellKnownSymbolDefine=function(lt){var ft=path$2.Symbol||(path$2.Symbol={});hasOwn$p(ft,lt)||defineProperty$e(ft,lt,{value:wrappedWellKnownSymbolModule$1.f(lt)})},call$A=functionCall,getBuiltIn$i=getBuiltIn$m,wellKnownSymbol$u=wellKnownSymbol$z,defineBuiltIn$k=defineBuiltIn$m,symbolDefineToPrimitive=function(){var lt=getBuiltIn$i("Symbol"),ft=lt&&lt.prototype,dt=ft&&ft.valueOf,vt=wellKnownSymbol$u("toPrimitive");ft&&!ft[vt]&&defineBuiltIn$k(ft,vt,function(Et){return call$A(dt,this)},{arity:1})},defineProperty$d=objectDefineProperty.f,hasOwn$o=hasOwnProperty_1,wellKnownSymbol$t=wellKnownSymbol$z,TO_STRING_TAG$3=wellKnownSymbol$t("toStringTag"),setToStringTag$d=function(lt,ft,dt){lt&&!dt&&(lt=lt.prototype),lt&&!hasOwn$o(lt,TO_STRING_TAG$3)&&defineProperty$d(lt,TO_STRING_TAG$3,{configurable:!0,value:ft})},classofRaw=classofRaw$2,uncurryThis$1a=functionUncurryThis,functionUncurryThisClause=function(lt){if(classofRaw(lt)==="Function")return uncurryThis$1a(lt)},uncurryThis$19=functionUncurryThisClause,aCallable$j=aCallable$l,NATIVE_BIND$2=functionBindNative,bind$e=uncurryThis$19(uncurryThis$19.bind),functionBindContext=function(lt,ft){return aCallable$j(lt),ft===void 0?lt:NATIVE_BIND$2?bind$e(lt,ft):function(){return lt.apply(ft,arguments)}},classof$j=classofRaw$2,isArray$d=Array.isArray||function(ft){return classof$j(ft)=="Array"},uncurryThis$18=functionUncurryThis,fails$1d=fails$1m,isCallable$n=isCallable$z,classof$i=classof$m,getBuiltIn$h=getBuiltIn$m,inspectSource$1=inspectSource$3,noop$5=function(){},empty=[],construct$2=getBuiltIn$h("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec$a=uncurryThis$18(constructorRegExp.exec),INCORRECT_TO_STRING$2=!constructorRegExp.exec(noop$5),isConstructorModern=function(ft){if(!isCallable$n(ft))return!1;try{return construct$2(noop$5,empty,ft),!0}catch{return!1}},isConstructorLegacy=function(ft){if(!isCallable$n(ft))return!1;switch(classof$i(ft)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING$2||!!exec$a(constructorRegExp,inspectSource$1(ft))}catch{return!0}};isConstructorLegacy.sham=!0;var isConstructor$6=!construct$2||fails$1d(function(){var lt;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern(function(){lt=!0})||lt})?isConstructorLegacy:isConstructorModern,isArray$c=isArray$d,isConstructor$5=isConstructor$6,isObject$E=isObject$K,wellKnownSymbol$s=wellKnownSymbol$z,SPECIES$6=wellKnownSymbol$s("species"),$Array$8=Array,arraySpeciesConstructor$1=function(lt){var ft;return isArray$c(lt)&&(ft=lt.constructor,isConstructor$5(ft)&&(ft===$Array$8||isArray$c(ft.prototype))?ft=void 0:isObject$E(ft)&&(ft=ft[SPECIES$6],ft===null&&(ft=void 0))),ft===void 0?$Array$8:ft},arraySpeciesConstructor=arraySpeciesConstructor$1,arraySpeciesCreate$5=function(lt,ft){return new(arraySpeciesConstructor(lt))(ft===0?0:ft)},bind$d=functionBindContext,uncurryThis$17=functionUncurryThis,IndexedObject$4=indexedObject,toObject$r=toObject$t,lengthOfArrayLike$q=lengthOfArrayLike$t,arraySpeciesCreate$4=arraySpeciesCreate$5,push$d=uncurryThis$17([].push),createMethod$6=function(lt){var ft=lt==1,dt=lt==2,vt=lt==3,Et=lt==4,St=lt==6,Tt=lt==7,At=lt==5||St;return function(Ct,Rt,Dt,kt){for(var Nt=toObject$r(Ct),zt=IndexedObject$4(Nt),Wt=bind$d(Rt,Dt),nr=lengthOfArrayLike$q(zt),Ut=0,Ht=kt||arraySpeciesCreate$4,Bt=ft?Ht(Ct,nr):dt||Tt?Ht(Ct,0):void 0,Ft,tr;nr>Ut;Ut++)if((At||Ut in zt)&&(Ft=zt[Ut],tr=Wt(Ft,Ut,Nt),lt))if(ft)Bt[Ut]=tr;else if(tr)switch(lt){case 3:return!0;case 5:return Ft;case 6:return Ut;case 2:push$d(Bt,Ft)}else switch(lt){case 4:return!1;case 7:push$d(Bt,Ft)}return St?-1:vt||Et?Et:Bt}},arrayIteration={forEach:createMethod$6(0),map:createMethod$6(1),filter:createMethod$6(2),some:createMethod$6(3),every:createMethod$6(4),find:createMethod$6(5),findIndex:createMethod$6(6),filterReject:createMethod$6(7)},$$2Y=_export,global$P=global$_,call$z=functionCall,uncurryThis$16=functionUncurryThis,DESCRIPTORS$B=descriptors,NATIVE_SYMBOL$4=symbolConstructorDetection,fails$1c=fails$1m,hasOwn$n=hasOwnProperty_1,isPrototypeOf$a=objectIsPrototypeOf,anObject$y=anObject$D,toIndexedObject$d=toIndexedObject$j,toPropertyKey$4=toPropertyKey$8,$toString$3=toString$z,createPropertyDescriptor$8=createPropertyDescriptor$c,nativeObjectCreate=objectCreate$1,objectKeys$3=objectKeys$5,getOwnPropertyNamesModule$1=objectGetOwnPropertyNames,getOwnPropertyNamesExternal=objectGetOwnPropertyNamesExternal,getOwnPropertySymbolsModule$2=objectGetOwnPropertySymbols,getOwnPropertyDescriptorModule$5=objectGetOwnPropertyDescriptor,definePropertyModule$6=objectDefineProperty,definePropertiesModule=objectDefineProperties,propertyIsEnumerableModule$1=objectPropertyIsEnumerable,defineBuiltIn$j=defineBuiltIn$m,defineBuiltInAccessor$g=defineBuiltInAccessor$h,shared$3=sharedExports,sharedKey$1=sharedKey$4,hiddenKeys$1=hiddenKeys$6,uid$3=uid$6,wellKnownSymbol$r=wellKnownSymbol$z,wrappedWellKnownSymbolModule=wellKnownSymbolWrapped,defineWellKnownSymbol$d=wellKnownSymbolDefine,defineSymbolToPrimitive$1=symbolDefineToPrimitive,setToStringTag$c=setToStringTag$d,InternalStateModule$c=internalState,$forEach$2=arrayIteration.forEach,HIDDEN=sharedKey$1("hidden"),SYMBOL="Symbol",PROTOTYPE$1="prototype",setInternalState$b=InternalStateModule$c.set,getInternalState$9=InternalStateModule$c.getterFor(SYMBOL),ObjectPrototype$5=Object[PROTOTYPE$1],$Symbol=global$P.Symbol,SymbolPrototype$1=$Symbol&&$Symbol[PROTOTYPE$1],TypeError$7=global$P.TypeError,QObject=global$P.QObject,nativeGetOwnPropertyDescriptor$2=getOwnPropertyDescriptorModule$5.f,nativeDefineProperty$1=definePropertyModule$6.f,nativeGetOwnPropertyNames=getOwnPropertyNamesExternal.f,nativePropertyIsEnumerable=propertyIsEnumerableModule$1.f,push$c=uncurryThis$16([].push),AllSymbols=shared$3("symbols"),ObjectPrototypeSymbols=shared$3("op-symbols"),WellKnownSymbolsStore=shared$3("wks"),USE_SETTER=!QObject||!QObject[PROTOTYPE$1]||!QObject[PROTOTYPE$1].findChild,setSymbolDescriptor=DESCRIPTORS$B&&fails$1c(function(){return nativeObjectCreate(nativeDefineProperty$1({},"a",{get:function(){return nativeDefineProperty$1(this,"a",{value:7}).a}})).a!=7})?function(lt,ft,dt){var vt=nativeGetOwnPropertyDescriptor$2(ObjectPrototype$5,ft);vt&&delete ObjectPrototype$5[ft],nativeDefineProperty$1(lt,ft,dt),vt&&lt!==ObjectPrototype$5&&nativeDefineProperty$1(ObjectPrototype$5,ft,vt)}:nativeDefineProperty$1,wrap=function(lt,ft){var dt=AllSymbols[lt]=nativeObjectCreate(SymbolPrototype$1);return setInternalState$b(dt,{type:SYMBOL,tag:lt,description:ft}),DESCRIPTORS$B||(dt.description=ft),dt},$defineProperty=function(ft,dt,vt){ft===ObjectPrototype$5&&$defineProperty(ObjectPrototypeSymbols,dt,vt),anObject$y(ft);var Et=toPropertyKey$4(dt);return anObject$y(vt),hasOwn$n(AllSymbols,Et)?(vt.enumerable?(hasOwn$n(ft,HIDDEN)&&ft[HIDDEN][Et]&&(ft[HIDDEN][Et]=!1),vt=nativeObjectCreate(vt,{enumerable:createPropertyDescriptor$8(0,!1)})):(hasOwn$n(ft,HIDDEN)||nativeDefineProperty$1(ft,HIDDEN,createPropertyDescriptor$8(1,{})),ft[HIDDEN][Et]=!0),setSymbolDescriptor(ft,Et,vt)):nativeDefineProperty$1(ft,Et,vt)},$defineProperties=function(ft,dt){anObject$y(ft);var vt=toIndexedObject$d(dt),Et=objectKeys$3(vt).concat($getOwnPropertySymbols(vt));return $forEach$2(Et,function(St){(!DESCRIPTORS$B||call$z($propertyIsEnumerable$1,vt,St))&&$defineProperty(ft,St,vt[St])}),ft},$create=function(ft,dt){return dt===void 0?nativeObjectCreate(ft):$defineProperties(nativeObjectCreate(ft),dt)},$propertyIsEnumerable$1=function(ft){var dt=toPropertyKey$4(ft),vt=call$z(nativePropertyIsEnumerable,this,dt);return this===ObjectPrototype$5&&hasOwn$n(AllSymbols,dt)&&!hasOwn$n(ObjectPrototypeSymbols,dt)?!1:vt||!hasOwn$n(this,dt)||!hasOwn$n(AllSymbols,dt)||hasOwn$n(this,HIDDEN)&&this[HIDDEN][dt]?vt:!0},$getOwnPropertyDescriptor=function(ft,dt){var vt=toIndexedObject$d(ft),Et=toPropertyKey$4(dt);if(!(vt===ObjectPrototype$5&&hasOwn$n(AllSymbols,Et)&&!hasOwn$n(ObjectPrototypeSymbols,Et))){var St=nativeGetOwnPropertyDescriptor$2(vt,Et);return St&&hasOwn$n(AllSymbols,Et)&&!(hasOwn$n(vt,HIDDEN)&&vt[HIDDEN][Et])&&(St.enumerable=!0),St}},$getOwnPropertyNames=function(ft){var dt=nativeGetOwnPropertyNames(toIndexedObject$d(ft)),vt=[];return $forEach$2(dt,function(Et){!hasOwn$n(AllSymbols,Et)&&!hasOwn$n(hiddenKeys$1,Et)&&push$c(vt,Et)}),vt},$getOwnPropertySymbols=function(lt){var ft=lt===ObjectPrototype$5,dt=nativeGetOwnPropertyNames(ft?ObjectPrototypeSymbols:toIndexedObject$d(lt)),vt=[];return $forEach$2(dt,function(Et){hasOwn$n(AllSymbols,Et)&&(!ft||hasOwn$n(ObjectPrototype$5,Et))&&push$c(vt,AllSymbols[Et])}),vt};NATIVE_SYMBOL$4||($Symbol=function(){if(isPrototypeOf$a(SymbolPrototype$1,this))throw TypeError$7("Symbol is not a constructor");var ft=!arguments.length||arguments[0]===void 0?void 0:$toString$3(arguments[0]),dt=uid$3(ft),vt=function(Et){this===ObjectPrototype$5&&call$z(vt,ObjectPrototypeSymbols,Et),hasOwn$n(this,HIDDEN)&&hasOwn$n(this[HIDDEN],dt)&&(this[HIDDEN][dt]=!1),setSymbolDescriptor(this,dt,createPropertyDescriptor$8(1,Et))};return DESCRIPTORS$B&&USE_SETTER&&setSymbolDescriptor(ObjectPrototype$5,dt,{configurable:!0,set:vt}),wrap(dt,ft)},SymbolPrototype$1=$Symbol[PROTOTYPE$1],defineBuiltIn$j(SymbolPrototype$1,"toString",function(){return getInternalState$9(this).tag}),defineBuiltIn$j($Symbol,"withoutSetter",function(lt){return wrap(uid$3(lt),lt)}),propertyIsEnumerableModule$1.f=$propertyIsEnumerable$1,definePropertyModule$6.f=$defineProperty,definePropertiesModule.f=$defineProperties,getOwnPropertyDescriptorModule$5.f=$getOwnPropertyDescriptor,getOwnPropertyNamesModule$1.f=getOwnPropertyNamesExternal.f=$getOwnPropertyNames,getOwnPropertySymbolsModule$2.f=$getOwnPropertySymbols,wrappedWellKnownSymbolModule.f=function(lt){return wrap(wellKnownSymbol$r(lt),lt)},DESCRIPTORS$B&&(defineBuiltInAccessor$g(SymbolPrototype$1,"description",{configurable:!0,get:function(){return getInternalState$9(this).description}}),defineBuiltIn$j(ObjectPrototype$5,"propertyIsEnumerable",$propertyIsEnumerable$1,{unsafe:!0})));$$2Y({global:!0,constructor:!0,wrap:!0,forced:!NATIVE_SYMBOL$4,sham:!NATIVE_SYMBOL$4},{Symbol:$Symbol});$forEach$2(objectKeys$3(WellKnownSymbolsStore),function(lt){defineWellKnownSymbol$d(lt)});$$2Y({target:SYMBOL,stat:!0,forced:!NATIVE_SYMBOL$4},{useSetter:function(){USE_SETTER=!0},useSimple:function(){USE_SETTER=!1}});$$2Y({target:"Object",stat:!0,forced:!NATIVE_SYMBOL$4,sham:!DESCRIPTORS$B},{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor});$$2Y({target:"Object",stat:!0,forced:!NATIVE_SYMBOL$4},{getOwnPropertyNames:$getOwnPropertyNames});defineSymbolToPrimitive$1();setToStringTag$c($Symbol,SYMBOL);hiddenKeys$1[HIDDEN]=!0;var NATIVE_SYMBOL$3=symbolConstructorDetection,symbolRegistryDetection=NATIVE_SYMBOL$3&&!!Symbol.for&&!!Symbol.keyFor,$$2X=_export,getBuiltIn$g=getBuiltIn$m,hasOwn$m=hasOwnProperty_1,toString$y=toString$z,shared$2=sharedExports,NATIVE_SYMBOL_REGISTRY$1=symbolRegistryDetection,StringToSymbolRegistry=shared$2("string-to-symbol-registry"),SymbolToStringRegistry$1=shared$2("symbol-to-string-registry");$$2X({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL_REGISTRY$1},{for:function(lt){var ft=toString$y(lt);if(hasOwn$m(StringToSymbolRegistry,ft))return StringToSymbolRegistry[ft];var dt=getBuiltIn$g("Symbol")(ft);return StringToSymbolRegistry[ft]=dt,SymbolToStringRegistry$1[dt]=ft,dt}});var $$2W=_export,hasOwn$l=hasOwnProperty_1,isSymbol$7=isSymbol$a,tryToString$5=tryToString$7,shared$1=sharedExports,NATIVE_SYMBOL_REGISTRY=symbolRegistryDetection,SymbolToStringRegistry=shared$1("symbol-to-string-registry");$$2W({target:"Symbol",stat:!0,forced:!NATIVE_SYMBOL_REGISTRY},{keyFor:function(ft){if(!isSymbol$7(ft))throw TypeError(tryToString$5(ft)+" is not a symbol");if(hasOwn$l(SymbolToStringRegistry,ft))return SymbolToStringRegistry[ft]}});var NATIVE_BIND$1=functionBindNative,FunctionPrototype$2=Function.prototype,apply$e=FunctionPrototype$2.apply,call$y=FunctionPrototype$2.call,functionApply$1=typeof Reflect=="object"&&Reflect.apply||(NATIVE_BIND$1?call$y.bind(apply$e):function(){return call$y.apply(apply$e,arguments)}),uncurryThis$15=functionUncurryThis,arraySlice$a=uncurryThis$15([].slice),uncurryThis$14=functionUncurryThis,isArray$b=isArray$d,isCallable$m=isCallable$z,classof$h=classofRaw$2,toString$x=toString$z,push$b=uncurryThis$14([].push),getJsonReplacerFunction=function(lt){if(isCallable$m(lt))return lt;if(isArray$b(lt)){for(var ft=lt.length,dt=[],vt=0;vt<ft;vt++){var Et=lt[vt];typeof Et=="string"?push$b(dt,Et):(typeof Et=="number"||classof$h(Et)=="Number"||classof$h(Et)=="String")&&push$b(dt,toString$x(Et))}var St=dt.length,Tt=!0;return function(At,Ct){if(Tt)return Tt=!1,Ct;if(isArray$b(this))return Ct;for(var Rt=0;Rt<St;Rt++)if(dt[Rt]===At)return Ct}}},$$2V=_export,getBuiltIn$f=getBuiltIn$m,apply$d=functionApply$1,call$x=functionCall,uncurryThis$13=functionUncurryThis,fails$1b=fails$1m,isCallable$l=isCallable$z,isSymbol$6=isSymbol$a,arraySlice$9=arraySlice$a,getReplacerFunction=getJsonReplacerFunction,NATIVE_SYMBOL$2=symbolConstructorDetection,$String$3=String,$stringify=getBuiltIn$f("JSON","stringify"),exec$9=uncurryThis$13(/./.exec),charAt$e=uncurryThis$13("".charAt),charCodeAt$5=uncurryThis$13("".charCodeAt),replace$b=uncurryThis$13("".replace),numberToString$2=uncurryThis$13(1 .toString),tester=/[\uD800-\uDFFF]/g,low=/^[\uD800-\uDBFF]$/,hi$1=/^[\uDC00-\uDFFF]$/,WRONG_SYMBOLS_CONVERSION=!NATIVE_SYMBOL$2||fails$1b(function(){var lt=getBuiltIn$f("Symbol")();return $stringify([lt])!="[null]"||$stringify({a:lt})!="{}"||$stringify(Object(lt))!="{}"}),ILL_FORMED_UNICODE=fails$1b(function(){return $stringify("\uDF06\uD834")!=='"\\udf06\\ud834"'||$stringify("\uDEAD")!=='"\\udead"'}),stringifyWithSymbolsFix=function(lt,ft){var dt=arraySlice$9(arguments),vt=getReplacerFunction(ft);if(!(!isCallable$l(vt)&&(lt===void 0||isSymbol$6(lt))))return dt[1]=function(Et,St){if(isCallable$l(vt)&&(St=call$x(vt,this,$String$3(Et),St)),!isSymbol$6(St))return St},apply$d($stringify,null,dt)},fixIllFormed=function(lt,ft,dt){var vt=charAt$e(dt,ft-1),Et=charAt$e(dt,ft+1);return exec$9(low,lt)&&!exec$9(hi$1,Et)||exec$9(hi$1,lt)&&!exec$9(low,vt)?"\\u"+numberToString$2(charCodeAt$5(lt,0),16):lt};$stringify&&$$2V({target:"JSON",stat:!0,arity:3,forced:WRONG_SYMBOLS_CONVERSION||ILL_FORMED_UNICODE},{stringify:function(ft,dt,vt){var Et=arraySlice$9(arguments),St=apply$d(WRONG_SYMBOLS_CONVERSION?stringifyWithSymbolsFix:$stringify,null,Et);return ILL_FORMED_UNICODE&&typeof St=="string"?replace$b(St,tester,fixIllFormed):St}});var $$2U=_export,NATIVE_SYMBOL$1=symbolConstructorDetection,fails$1a=fails$1m,getOwnPropertySymbolsModule$1=objectGetOwnPropertySymbols,toObject$q=toObject$t,FORCED$D=!NATIVE_SYMBOL$1||fails$1a(function(){getOwnPropertySymbolsModule$1.f(1)});$$2U({target:"Object",stat:!0,forced:FORCED$D},{getOwnPropertySymbols:function(ft){var dt=getOwnPropertySymbolsModule$1.f;return dt?dt(toObject$q(ft)):[]}});var $$2T=_export,DESCRIPTORS$A=descriptors,global$O=global$_,uncurryThis$12=functionUncurryThis,hasOwn$k=hasOwnProperty_1,isCallable$k=isCallable$z,isPrototypeOf$9=objectIsPrototypeOf,toString$w=toString$z,defineBuiltInAccessor$f=defineBuiltInAccessor$h,copyConstructorProperties$3=copyConstructorProperties$5,NativeSymbol=global$O.Symbol,SymbolPrototype=NativeSymbol&&NativeSymbol.prototype;if(DESCRIPTORS$A&&isCallable$k(NativeSymbol)&&(!("description"in SymbolPrototype)||NativeSymbol().description!==void 0)){var EmptyStringDescriptionStore={},SymbolWrapper=function(){var ft=arguments.length<1||arguments[0]===void 0?void 0:toString$w(arguments[0]),dt=isPrototypeOf$9(SymbolPrototype,this)?new NativeSymbol(ft):ft===void 0?NativeSymbol():NativeSymbol(ft);return ft===""&&(EmptyStringDescriptionStore[dt]=!0),dt};copyConstructorProperties$3(SymbolWrapper,NativeSymbol),SymbolWrapper.prototype=SymbolPrototype,SymbolPrototype.constructor=SymbolWrapper;var NATIVE_SYMBOL=String(NativeSymbol("test"))=="Symbol(test)",thisSymbolValue=uncurryThis$12(SymbolPrototype.valueOf),symbolDescriptiveString=uncurryThis$12(SymbolPrototype.toString),regexp=/^Symbol\((.*)\)[^)]+$/,replace$a=uncurryThis$12("".replace),stringSlice$g=uncurryThis$12("".slice);defineBuiltInAccessor$f(SymbolPrototype,"description",{configurable:!0,get:function(){var ft=thisSymbolValue(this);if(hasOwn$k(EmptyStringDescriptionStore,ft))return"";var dt=symbolDescriptiveString(ft),vt=NATIVE_SYMBOL?stringSlice$g(dt,7,-1):replace$a(dt,regexp,"$1");return vt===""?void 0:vt}}),$$2T({global:!0,constructor:!0,forced:!0},{Symbol:SymbolWrapper})}var defineWellKnownSymbol$c=wellKnownSymbolDefine;defineWellKnownSymbol$c("asyncIterator");var defineWellKnownSymbol$b=wellKnownSymbolDefine;defineWellKnownSymbol$b("hasInstance");var defineWellKnownSymbol$a=wellKnownSymbolDefine;defineWellKnownSymbol$a("isConcatSpreadable");var defineWellKnownSymbol$9=wellKnownSymbolDefine;defineWellKnownSymbol$9("iterator");var defineWellKnownSymbol$8=wellKnownSymbolDefine;defineWellKnownSymbol$8("match");var defineWellKnownSymbol$7=wellKnownSymbolDefine;defineWellKnownSymbol$7("matchAll");var defineWellKnownSymbol$6=wellKnownSymbolDefine;defineWellKnownSymbol$6("replace");var defineWellKnownSymbol$5=wellKnownSymbolDefine;defineWellKnownSymbol$5("search");var defineWellKnownSymbol$4=wellKnownSymbolDefine;defineWellKnownSymbol$4("species");var defineWellKnownSymbol$3=wellKnownSymbolDefine;defineWellKnownSymbol$3("split");var defineWellKnownSymbol$2=wellKnownSymbolDefine,defineSymbolToPrimitive=symbolDefineToPrimitive;defineWellKnownSymbol$2("toPrimitive");defineSymbolToPrimitive();var getBuiltIn$e=getBuiltIn$m,defineWellKnownSymbol$1=wellKnownSymbolDefine,setToStringTag$b=setToStringTag$d;defineWellKnownSymbol$1("toStringTag");setToStringTag$b(getBuiltIn$e("Symbol"),"Symbol");var defineWellKnownSymbol=wellKnownSymbolDefine;defineWellKnownSymbol("unscopables");var uncurryThis$11=functionUncurryThis,aCallable$i=aCallable$l,functionUncurryThisAccessor=function(lt,ft,dt){try{return uncurryThis$11(aCallable$i(Object.getOwnPropertyDescriptor(lt,ft)[dt]))}catch{}},isCallable$j=isCallable$z,$String$2=String,$TypeError$j=TypeError,aPossiblePrototype$2=function(lt){if(typeof lt=="object"||isCallable$j(lt))return lt;throw $TypeError$j("Can't set "+$String$2(lt)+" as a prototype")},uncurryThisAccessor=functionUncurryThisAccessor,anObject$x=anObject$D,aPossiblePrototype$1=aPossiblePrototype$2,objectSetPrototypeOf$1=Object.setPrototypeOf||("__proto__"in{}?function(){var lt=!1,ft={},dt;try{dt=uncurryThisAccessor(Object.prototype,"__proto__","set"),dt(ft,[]),lt=ft instanceof Array}catch{}return function(Et,St){return anObject$x(Et),aPossiblePrototype$1(St),lt?dt(Et,St):Et.__proto__=St,Et}}():void 0),defineProperty$c=objectDefineProperty.f,proxyAccessor$2=function(lt,ft,dt){dt in lt||defineProperty$c(lt,dt,{configurable:!0,get:function(){return ft[dt]},set:function(vt){ft[dt]=vt}})},isCallable$i=isCallable$z,isObject$D=isObject$K,setPrototypeOf$a=objectSetPrototypeOf$1,inheritIfRequired$6=function(lt,ft,dt){var vt,Et;return setPrototypeOf$a&&isCallable$i(vt=ft.constructor)&&vt!==dt&&isObject$D(Et=vt.prototype)&&Et!==dt.prototype&&setPrototypeOf$a(lt,Et),lt},toString$v=toString$z,normalizeStringArgument$5=function(lt,ft){return lt===void 0?arguments.length<2?"":ft:toString$v(lt)},isObject$C=isObject$K,createNonEnumerableProperty$c=createNonEnumerableProperty$f,installErrorCause$2=function(lt,ft){isObject$C(ft)&&"cause"in ft&&createNonEnumerableProperty$c(lt,"cause",ft.cause)},uncurryThis$10=functionUncurryThis,$Error$1=Error,replace$9=uncurryThis$10("".replace),TEST=function(lt){return String($Error$1(lt).stack)}("zxcasd"),V8_OR_CHAKRA_STACK_ENTRY=/\n\s*at [^:]*:[^\n]*/,IS_V8_OR_CHAKRA_STACK=V8_OR_CHAKRA_STACK_ENTRY.test(TEST),errorStackClear=function(lt,ft){if(IS_V8_OR_CHAKRA_STACK&&typeof lt=="string"&&!$Error$1.prepareStackTrace)for(;ft--;)lt=replace$9(lt,V8_OR_CHAKRA_STACK_ENTRY,"");return lt},fails$19=fails$1m,createPropertyDescriptor$7=createPropertyDescriptor$c,errorStackInstallable=!fails$19(function(){var lt=Error("a");return"stack"in lt?(Object.defineProperty(lt,"stack",createPropertyDescriptor$7(1,7)),lt.stack!==7):!0}),createNonEnumerableProperty$b=createNonEnumerableProperty$f,clearErrorStack$2=errorStackClear,ERROR_STACK_INSTALLABLE$1=errorStackInstallable,captureStackTrace=Error.captureStackTrace,errorStackInstall=function(lt,ft,dt,vt){ERROR_STACK_INSTALLABLE$1&&(captureStackTrace?captureStackTrace(lt,ft):createNonEnumerableProperty$b(lt,"stack",clearErrorStack$2(dt,vt)))},getBuiltIn$d=getBuiltIn$m,hasOwn$j=hasOwnProperty_1,createNonEnumerableProperty$a=createNonEnumerableProperty$f,isPrototypeOf$8=objectIsPrototypeOf,setPrototypeOf$9=objectSetPrototypeOf$1,copyConstructorProperties$2=copyConstructorProperties$5,proxyAccessor$1=proxyAccessor$2,inheritIfRequired$5=inheritIfRequired$6,normalizeStringArgument$4=normalizeStringArgument$5,installErrorCause$1=installErrorCause$2,installErrorStack$1=errorStackInstall,DESCRIPTORS$z=descriptors,wrapErrorConstructorWithCause$2=function(lt,ft,dt,vt){var Et="stackTraceLimit",St=vt?2:1,Tt=lt.split("."),At=Tt[Tt.length-1],Ct=getBuiltIn$d.apply(null,Tt);if(Ct){var Rt=Ct.prototype;if(hasOwn$j(Rt,"cause")&&delete Rt.cause,!dt)return Ct;var Dt=getBuiltIn$d("Error"),kt=ft(function(Nt,zt){var Wt=normalizeStringArgument$4(vt?zt:Nt,void 0),nr=vt?new Ct(Nt):new Ct;return Wt!==void 0&&createNonEnumerableProperty$a(nr,"message",Wt),installErrorStack$1(nr,kt,nr.stack,2),this&&isPrototypeOf$8(Rt,this)&&inheritIfRequired$5(nr,this,kt),arguments.length>St&&installErrorCause$1(nr,arguments[St]),nr});kt.prototype=Rt,At!=="Error"?setPrototypeOf$9?setPrototypeOf$9(kt,Dt):copyConstructorProperties$2(kt,Dt,{name:!0}):DESCRIPTORS$z&&Et in Ct&&(proxyAccessor$1(kt,Ct,Et),proxyAccessor$1(kt,Ct,"prepareStackTrace")),copyConstructorProperties$2(kt,Ct);try{Rt.name!==At&&createNonEnumerableProperty$a(Rt,"name",At),Rt.constructor=kt}catch{}return kt}},$$2S=_export,global$N=global$_,apply$c=functionApply$1,wrapErrorConstructorWithCause$1=wrapErrorConstructorWithCause$2,WEB_ASSEMBLY="WebAssembly",WebAssembly$1=global$N[WEB_ASSEMBLY],FORCED$C=Error("e",{cause:7}).cause!==7,exportGlobalErrorCauseWrapper=function(lt,ft){var dt={};dt[lt]=wrapErrorConstructorWithCause$1(lt,ft,FORCED$C),$$2S({global:!0,constructor:!0,arity:1,forced:FORCED$C},dt)},exportWebAssemblyErrorCauseWrapper=function(lt,ft){if(WebAssembly$1&&WebAssembly$1[lt]){var dt={};dt[lt]=wrapErrorConstructorWithCause$1(WEB_ASSEMBLY+"."+lt,ft,FORCED$C),$$2S({target:WEB_ASSEMBLY,stat:!0,constructor:!0,arity:1,forced:FORCED$C},dt)}};exportGlobalErrorCauseWrapper("Error",function(lt){return function(dt){return apply$c(lt,this,arguments)}});exportGlobalErrorCauseWrapper("EvalError",function(lt){return function(dt){return apply$c(lt,this,arguments)}});exportGlobalErrorCauseWrapper("RangeError",function(lt){return function(dt){return apply$c(lt,this,arguments)}});exportGlobalErrorCauseWrapper("ReferenceError",function(lt){return function(dt){return apply$c(lt,this,arguments)}});exportGlobalErrorCauseWrapper("SyntaxError",function(lt){return function(dt){return apply$c(lt,this,arguments)}});exportGlobalErrorCauseWrapper("TypeError",function(lt){return function(dt){return apply$c(lt,this,arguments)}});exportGlobalErrorCauseWrapper("URIError",function(lt){return function(dt){return apply$c(lt,this,arguments)}});exportWebAssemblyErrorCauseWrapper("CompileError",function(lt){return function(dt){return apply$c(lt,this,arguments)}});exportWebAssemblyErrorCauseWrapper("LinkError",function(lt){return function(dt){return apply$c(lt,this,arguments)}});exportWebAssemblyErrorCauseWrapper("RuntimeError",function(lt){return function(dt){return apply$c(lt,this,arguments)}});var DESCRIPTORS$y=descriptors,fails$18=fails$1m,anObject$w=anObject$D,create$b=objectCreate$1,normalizeStringArgument$3=normalizeStringArgument$5,nativeErrorToString=Error.prototype.toString,INCORRECT_TO_STRING$1=fails$18(function(){if(DESCRIPTORS$y){var lt=create$b(Object.defineProperty({},"name",{get:function(){return this===lt}}));if(nativeErrorToString.call(lt)!=="true")return!0}return nativeErrorToString.call({message:1,name:2})!=="2: 1"||nativeErrorToString.call({})!=="Error"}),errorToString$2=INCORRECT_TO_STRING$1?function(){var ft=anObject$w(this),dt=normalizeStringArgument$3(ft.name,"Error"),vt=normalizeStringArgument$3(ft.message);return dt?vt?dt+": "+vt:dt:vt}:nativeErrorToString,defineBuiltIn$i=defineBuiltIn$m,errorToString$1=errorToString$2,ErrorPrototype$1=Error.prototype;ErrorPrototype$1.toString!==errorToString$1&&defineBuiltIn$i(ErrorPrototype$1,"toString",errorToString$1);var fails$17=fails$1m,correctPrototypeGetter=!fails$17(function(){function lt(){}return lt.prototype.constructor=null,Object.getPrototypeOf(new lt)!==lt.prototype}),hasOwn$i=hasOwnProperty_1,isCallable$h=isCallable$z,toObject$p=toObject$t,sharedKey=sharedKey$4,CORRECT_PROTOTYPE_GETTER$2=correctPrototypeGetter,IE_PROTO=sharedKey("IE_PROTO"),$Object$1=Object,ObjectPrototype$4=$Object$1.prototype,objectGetPrototypeOf$1=CORRECT_PROTOTYPE_GETTER$2?$Object$1.getPrototypeOf:function(lt){var ft=toObject$p(lt);if(hasOwn$i(ft,IE_PROTO))return ft[IE_PROTO];var dt=ft.constructor;return isCallable$h(dt)&&ft instanceof dt?dt.prototype:ft instanceof $Object$1?ObjectPrototype$4:null},iterators={},wellKnownSymbol$q=wellKnownSymbol$z,Iterators$4=iterators,ITERATOR$a=wellKnownSymbol$q("iterator"),ArrayPrototype$1=Array.prototype,isArrayIteratorMethod$3=function(lt){return lt!==void 0&&(Iterators$4.Array===lt||ArrayPrototype$1[ITERATOR$a]===lt)},classof$g=classof$m,getMethod$7=getMethod$9,isNullOrUndefined$b=isNullOrUndefined$e,Iterators$3=iterators,wellKnownSymbol$p=wellKnownSymbol$z,ITERATOR$9=wellKnownSymbol$p("iterator"),getIteratorMethod$5=function(lt){if(!isNullOrUndefined$b(lt))return getMethod$7(lt,ITERATOR$9)||getMethod$7(lt,"@@iterator")||Iterators$3[classof$g(lt)]},call$w=functionCall,aCallable$h=aCallable$l,anObject$v=anObject$D,tryToString$4=tryToString$7,getIteratorMethod$4=getIteratorMethod$5,$TypeError$i=TypeError,getIterator$4=function(lt,ft){var dt=arguments.length<2?getIteratorMethod$4(lt):ft;if(aCallable$h(dt))return anObject$v(call$w(dt,lt));throw $TypeError$i(tryToString$4(lt)+" is not iterable")},call$v=functionCall,anObject$u=anObject$D,getMethod$6=getMethod$9,iteratorClose$2=function(lt,ft,dt){var vt,Et;anObject$u(lt);try{if(vt=getMethod$6(lt,"return"),!vt){if(ft==="throw")throw dt;return dt}vt=call$v(vt,lt)}catch(St){Et=!0,vt=St}if(ft==="throw")throw dt;if(Et)throw vt;return anObject$u(vt),dt},bind$c=functionBindContext,call$u=functionCall,anObject$t=anObject$D,tryToString$3=tryToString$7,isArrayIteratorMethod$2=isArrayIteratorMethod$3,lengthOfArrayLike$p=lengthOfArrayLike$t,isPrototypeOf$7=objectIsPrototypeOf,getIterator$3=getIterator$4,getIteratorMethod$3=getIteratorMethod$5,iteratorClose$1=iteratorClose$2,$TypeError$h=TypeError,Result=function(lt,ft){this.stopped=lt,this.result=ft},ResultPrototype=Result.prototype,iterate$a=function(lt,ft,dt){var vt=dt&&dt.that,Et=!!(dt&&dt.AS_ENTRIES),St=!!(dt&&dt.IS_RECORD),Tt=!!(dt&&dt.IS_ITERATOR),At=!!(dt&&dt.INTERRUPTED),Ct=bind$c(ft,vt),Rt,Dt,kt,Nt,zt,Wt,nr,Ut=function(Bt){return Rt&&iteratorClose$1(Rt,"normal",Bt),new Result(!0,Bt)},Ht=function(Bt){return Et?(anObject$t(Bt),At?Ct(Bt[0],Bt[1],Ut):Ct(Bt[0],Bt[1])):At?Ct(Bt,Ut):Ct(Bt)};if(St)Rt=lt.iterator;else if(Tt)Rt=lt;else{if(Dt=getIteratorMethod$3(lt),!Dt)throw $TypeError$h(tryToString$3(lt)+" is not iterable");if(isArrayIteratorMethod$2(Dt)){for(kt=0,Nt=lengthOfArrayLike$p(lt);Nt>kt;kt++)if(zt=Ht(lt[kt]),zt&&isPrototypeOf$7(ResultPrototype,zt))return zt;return new Result(!1)}Rt=getIterator$3(lt,Dt)}for(Wt=St?lt.next:Rt.next;!(nr=call$u(Wt,Rt)).done;){try{zt=Ht(nr.value)}catch(Bt){iteratorClose$1(Rt,"throw",Bt)}if(typeof zt=="object"&&zt&&isPrototypeOf$7(ResultPrototype,zt))return zt}return new Result(!1)},$$2R=_export,isPrototypeOf$6=objectIsPrototypeOf,getPrototypeOf$b=objectGetPrototypeOf$1,setPrototypeOf$8=objectSetPrototypeOf$1,copyConstructorProperties$1=copyConstructorProperties$5,create$a=objectCreate$1,createNonEnumerableProperty$9=createNonEnumerableProperty$f,createPropertyDescriptor$6=createPropertyDescriptor$c,installErrorCause=installErrorCause$2,installErrorStack=errorStackInstall,iterate$9=iterate$a,normalizeStringArgument$2=normalizeStringArgument$5,wellKnownSymbol$o=wellKnownSymbol$z,TO_STRING_TAG$2=wellKnownSymbol$o("toStringTag"),$Error=Error,push$a=[].push,$AggregateError$1=function(ft,dt){var vt=isPrototypeOf$6(AggregateErrorPrototype,this),Et;setPrototypeOf$8?Et=setPrototypeOf$8($Error(),vt?getPrototypeOf$b(this):AggregateErrorPrototype):(Et=vt?this:create$a(AggregateErrorPrototype),createNonEnumerableProperty$9(Et,TO_STRING_TAG$2,"Error")),dt!==void 0&&createNonEnumerableProperty$9(Et,"message",normalizeStringArgument$2(dt)),installErrorStack(Et,$AggregateError$1,Et.stack,1),arguments.length>2&&installErrorCause(Et,arguments[2]);var St=[];return iterate$9(ft,push$a,{that:St}),createNonEnumerableProperty$9(Et,"errors",St),Et};setPrototypeOf$8?setPrototypeOf$8($AggregateError$1,$Error):copyConstructorProperties$1($AggregateError$1,$Error,{name:!0});var AggregateErrorPrototype=$AggregateError$1.prototype=create$a($Error.prototype,{constructor:createPropertyDescriptor$6(1,$AggregateError$1),message:createPropertyDescriptor$6(1,""),name:createPropertyDescriptor$6(1,"AggregateError")});$$2R({global:!0,constructor:!0,arity:2},{AggregateError:$AggregateError$1});var $$2Q=_export,getBuiltIn$c=getBuiltIn$m,apply$b=functionApply$1,fails$16=fails$1m,wrapErrorConstructorWithCause=wrapErrorConstructorWithCause$2,AGGREGATE_ERROR="AggregateError",$AggregateError=getBuiltIn$c(AGGREGATE_ERROR),FORCED$B=!fails$16(function(){return $AggregateError([1]).errors[0]!==1})&&fails$16(function(){return $AggregateError([1],AGGREGATE_ERROR,{cause:7}).cause!==7});$$2Q({global:!0,constructor:!0,arity:2,forced:FORCED$B},{AggregateError:wrapErrorConstructorWithCause(AGGREGATE_ERROR,function(lt){return function(dt,vt){return apply$b(lt,this,arguments)}},FORCED$B,!0)});var wellKnownSymbol$n=wellKnownSymbol$z,create$9=objectCreate$1,defineProperty$b=objectDefineProperty.f,UNSCOPABLES=wellKnownSymbol$n("unscopables"),ArrayPrototype=Array.prototype;ArrayPrototype[UNSCOPABLES]==null&&defineProperty$b(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create$9(null)});var addToUnscopables$e=function(lt){ArrayPrototype[UNSCOPABLES][lt]=!0},$$2P=_export,toObject$o=toObject$t,lengthOfArrayLike$o=lengthOfArrayLike$t,toIntegerOrInfinity$i=toIntegerOrInfinity$l,addToUnscopables$d=addToUnscopables$e;$$2P({target:"Array",proto:!0},{at:function(ft){var dt=toObject$o(this),vt=lengthOfArrayLike$o(dt),Et=toIntegerOrInfinity$i(ft),St=Et>=0?Et:vt+Et;return St<0||St>=vt?void 0:dt[St]}});addToUnscopables$d("at");var $TypeError$g=TypeError,MAX_SAFE_INTEGER$2=9007199254740991,doesNotExceedSafeInteger$6=function(lt){if(lt>MAX_SAFE_INTEGER$2)throw $TypeError$g("Maximum allowed index exceeded");return lt},fails$15=fails$1m,wellKnownSymbol$m=wellKnownSymbol$z,V8_VERSION$2=engineV8Version,SPECIES$5=wellKnownSymbol$m("species"),arrayMethodHasSpeciesSupport$5=function(lt){return V8_VERSION$2>=51||!fails$15(function(){var ft=[],dt=ft.constructor={};return dt[SPECIES$5]=function(){return{foo:1}},ft[lt](Boolean).foo!==1})},$$2O=_export,fails$14=fails$1m,isArray$a=isArray$d,isObject$B=isObject$K,toObject$n=toObject$t,lengthOfArrayLike$n=lengthOfArrayLike$t,doesNotExceedSafeInteger$5=doesNotExceedSafeInteger$6,createProperty$7=createProperty$9,arraySpeciesCreate$3=arraySpeciesCreate$5,arrayMethodHasSpeciesSupport$4=arrayMethodHasSpeciesSupport$5,wellKnownSymbol$l=wellKnownSymbol$z,V8_VERSION$1=engineV8Version,IS_CONCAT_SPREADABLE=wellKnownSymbol$l("isConcatSpreadable"),IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION$1>=51||!fails$14(function(){var lt=[];return lt[IS_CONCAT_SPREADABLE]=!1,lt.concat()[0]!==lt}),isConcatSpreadable=function(lt){if(!isObject$B(lt))return!1;var ft=lt[IS_CONCAT_SPREADABLE];return ft!==void 0?!!ft:isArray$a(lt)},FORCED$A=!IS_CONCAT_SPREADABLE_SUPPORT||!arrayMethodHasSpeciesSupport$4("concat");$$2O({target:"Array",proto:!0,arity:1,forced:FORCED$A},{concat:function(ft){var dt=toObject$n(this),vt=arraySpeciesCreate$3(dt,0),Et=0,St,Tt,At,Ct,Rt;for(St=-1,At=arguments.length;St<At;St++)if(Rt=St===-1?dt:arguments[St],isConcatSpreadable(Rt))for(Ct=lengthOfArrayLike$n(Rt),doesNotExceedSafeInteger$5(Et+Ct),Tt=0;Tt<Ct;Tt++,Et++)Tt in Rt&&createProperty$7(vt,Et,Rt[Tt]);else doesNotExceedSafeInteger$5(Et+1),createProperty$7(vt,Et++,Rt);return vt.length=Et,vt}});var tryToString$2=tryToString$7,$TypeError$f=TypeError,deletePropertyOrThrow$4=function(lt,ft){if(!delete lt[ft])throw $TypeError$f("Cannot delete property "+tryToString$2(ft)+" of "+tryToString$2(lt))},toObject$m=toObject$t,toAbsoluteIndex$7=toAbsoluteIndex$a,lengthOfArrayLike$m=lengthOfArrayLike$t,deletePropertyOrThrow$3=deletePropertyOrThrow$4,min$8=Math.min,arrayCopyWithin=[].copyWithin||function(ft,dt){var vt=toObject$m(this),Et=lengthOfArrayLike$m(vt),St=toAbsoluteIndex$7(ft,Et),Tt=toAbsoluteIndex$7(dt,Et),At=arguments.length>2?arguments[2]:void 0,Ct=min$8((At===void 0?Et:toAbsoluteIndex$7(At,Et))-Tt,Et-St),Rt=1;for(Tt<St&&St<Tt+Ct&&(Rt=-1,Tt+=Ct-1,St+=Ct-1);Ct-- >0;)Tt in vt?vt[St]=vt[Tt]:deletePropertyOrThrow$3(vt,St),St+=Rt,Tt+=Rt;return vt},$$2N=_export,copyWithin=arrayCopyWithin,addToUnscopables$c=addToUnscopables$e;$$2N({target:"Array",proto:!0},{copyWithin});addToUnscopables$c("copyWithin");var fails$13=fails$1m,arrayMethodIsStrict$9=function(lt,ft){var dt=[][lt];return!!dt&&fails$13(function(){dt.call(null,ft||function(){return 1},1)})},$$2M=_export,$every$1=arrayIteration.every,arrayMethodIsStrict$8=arrayMethodIsStrict$9,STRICT_METHOD$4=arrayMethodIsStrict$8("every");$$2M({target:"Array",proto:!0,forced:!STRICT_METHOD$4},{every:function(ft){return $every$1(this,ft,arguments.length>1?arguments[1]:void 0)}});var toObject$l=toObject$t,toAbsoluteIndex$6=toAbsoluteIndex$a,lengthOfArrayLike$l=lengthOfArrayLike$t,arrayFill$1=function(ft){for(var dt=toObject$l(this),vt=lengthOfArrayLike$l(dt),Et=arguments.length,St=toAbsoluteIndex$6(Et>1?arguments[1]:void 0,vt),Tt=Et>2?arguments[2]:void 0,At=Tt===void 0?vt:toAbsoluteIndex$6(Tt,vt);At>St;)dt[St++]=ft;return dt},$$2L=_export,fill$1=arrayFill$1,addToUnscopables$b=addToUnscopables$e;$$2L({target:"Array",proto:!0},{fill:fill$1});addToUnscopables$b("fill");var $$2K=_export,$filter$1=arrayIteration.filter,arrayMethodHasSpeciesSupport$3=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT$3=arrayMethodHasSpeciesSupport$3("filter");$$2K({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$3},{filter:function(ft){return $filter$1(this,ft,arguments.length>1?arguments[1]:void 0)}});var $$2J=_export,$find$1=arrayIteration.find,addToUnscopables$a=addToUnscopables$e,FIND="find",SKIPS_HOLES$1=!0;FIND in[]&&Array(1)[FIND](function(){SKIPS_HOLES$1=!1});$$2J({target:"Array",proto:!0,forced:SKIPS_HOLES$1},{find:function(ft){return $find$1(this,ft,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$a(FIND);var $$2I=_export,$findIndex$1=arrayIteration.findIndex,addToUnscopables$9=addToUnscopables$e,FIND_INDEX="findIndex",SKIPS_HOLES=!0;FIND_INDEX in[]&&Array(1)[FIND_INDEX](function(){SKIPS_HOLES=!1});$$2I({target:"Array",proto:!0,forced:SKIPS_HOLES},{findIndex:function(ft){return $findIndex$1(this,ft,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$9(FIND_INDEX);var bind$b=functionBindContext,IndexedObject$3=indexedObject,toObject$k=toObject$t,lengthOfArrayLike$k=lengthOfArrayLike$t,createMethod$5=function(lt){var ft=lt==1;return function(dt,vt,Et){for(var St=toObject$k(dt),Tt=IndexedObject$3(St),At=bind$b(vt,Et),Ct=lengthOfArrayLike$k(Tt),Rt,Dt;Ct-- >0;)if(Rt=Tt[Ct],Dt=At(Rt,Ct,St),Dt)switch(lt){case 0:return Rt;case 1:return Ct}return ft?-1:void 0}},arrayIterationFromLast={findLast:createMethod$5(0),findLastIndex:createMethod$5(1)},$$2H=_export,$findLast$1=arrayIterationFromLast.findLast,addToUnscopables$8=addToUnscopables$e;$$2H({target:"Array",proto:!0},{findLast:function(ft){return $findLast$1(this,ft,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$8("findLast");var $$2G=_export,$findLastIndex$1=arrayIterationFromLast.findLastIndex,addToUnscopables$7=addToUnscopables$e;$$2G({target:"Array",proto:!0},{findLastIndex:function(ft){return $findLastIndex$1(this,ft,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$7("findLastIndex");var isArray$9=isArray$d,lengthOfArrayLike$j=lengthOfArrayLike$t,doesNotExceedSafeInteger$4=doesNotExceedSafeInteger$6,bind$a=functionBindContext,flattenIntoArray$2=function(lt,ft,dt,vt,Et,St,Tt,At){for(var Ct=Et,Rt=0,Dt=Tt?bind$a(Tt,At):!1,kt,Nt;Rt<vt;)Rt in dt&&(kt=Dt?Dt(dt[Rt],Rt,ft):dt[Rt],St>0&&isArray$9(kt)?(Nt=lengthOfArrayLike$j(kt),Ct=flattenIntoArray$2(lt,ft,kt,Nt,Ct,St-1)-1):(doesNotExceedSafeInteger$4(Ct+1),lt[Ct]=kt),Ct++),Rt++;return Ct},flattenIntoArray_1=flattenIntoArray$2,$$2F=_export,flattenIntoArray$1=flattenIntoArray_1,toObject$j=toObject$t,lengthOfArrayLike$i=lengthOfArrayLike$t,toIntegerOrInfinity$h=toIntegerOrInfinity$l,arraySpeciesCreate$2=arraySpeciesCreate$5;$$2F({target:"Array",proto:!0},{flat:function(){var ft=arguments.length?arguments[0]:void 0,dt=toObject$j(this),vt=lengthOfArrayLike$i(dt),Et=arraySpeciesCreate$2(dt,0);return Et.length=flattenIntoArray$1(Et,dt,dt,vt,0,ft===void 0?1:toIntegerOrInfinity$h(ft)),Et}});var $$2E=_export,flattenIntoArray=flattenIntoArray_1,aCallable$g=aCallable$l,toObject$i=toObject$t,lengthOfArrayLike$h=lengthOfArrayLike$t,arraySpeciesCreate$1=arraySpeciesCreate$5;$$2E({target:"Array",proto:!0},{flatMap:function(ft){var dt=toObject$i(this),vt=lengthOfArrayLike$h(dt),Et;return aCallable$g(ft),Et=arraySpeciesCreate$1(dt,0),Et.length=flattenIntoArray(Et,dt,dt,vt,0,1,ft,arguments.length>1?arguments[1]:void 0),Et}});var $forEach$1=arrayIteration.forEach,arrayMethodIsStrict$7=arrayMethodIsStrict$9,STRICT_METHOD$3=arrayMethodIsStrict$7("forEach"),arrayForEach$1=STRICT_METHOD$3?[].forEach:function(ft){return $forEach$1(this,ft,arguments.length>1?arguments[1]:void 0)},$$2D=_export,forEach$4=arrayForEach$1;$$2D({target:"Array",proto:!0,forced:[].forEach!=forEach$4},{forEach:forEach$4});var anObject$s=anObject$D,iteratorClose=iteratorClose$2,callWithSafeIterationClosing$1=function(lt,ft,dt,vt){try{return vt?ft(anObject$s(dt)[0],dt[1]):ft(dt)}catch(Et){iteratorClose(lt,"throw",Et)}},bind$9=functionBindContext,call$t=functionCall,toObject$h=toObject$t,callWithSafeIterationClosing=callWithSafeIterationClosing$1,isArrayIteratorMethod$1=isArrayIteratorMethod$3,isConstructor$4=isConstructor$6,lengthOfArrayLike$g=lengthOfArrayLike$t,createProperty$6=createProperty$9,getIterator$2=getIterator$4,getIteratorMethod$2=getIteratorMethod$5,$Array$7=Array,arrayFrom$1=function(ft){var dt=toObject$h(ft),vt=isConstructor$4(this),Et=arguments.length,St=Et>1?arguments[1]:void 0,Tt=St!==void 0;Tt&&(St=bind$9(St,Et>2?arguments[2]:void 0));var At=getIteratorMethod$2(dt),Ct=0,Rt,Dt,kt,Nt,zt,Wt;if(At&&!(this===$Array$7&&isArrayIteratorMethod$1(At)))for(Nt=getIterator$2(dt,At),zt=Nt.next,Dt=vt?new this:[];!(kt=call$t(zt,Nt)).done;Ct++)Wt=Tt?callWithSafeIterationClosing(Nt,St,[kt.value,Ct],!0):kt.value,createProperty$6(Dt,Ct,Wt);else for(Rt=lengthOfArrayLike$g(dt),Dt=vt?new this(Rt):$Array$7(Rt);Rt>Ct;Ct++)Wt=Tt?St(dt[Ct],Ct):dt[Ct],createProperty$6(Dt,Ct,Wt);return Dt.length=Ct,Dt},wellKnownSymbol$k=wellKnownSymbol$z,ITERATOR$8=wellKnownSymbol$k("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$8]=function(){return this},Array.from(iteratorWithReturn,function(){throw 2})}catch{}var checkCorrectnessOfIteration$4=function(lt,ft){if(!ft&&!SAFE_CLOSING)return!1;var dt=!1;try{var vt={};vt[ITERATOR$8]=function(){return{next:function(){return{done:dt=!0}}}},lt(vt)}catch{}return dt},$$2C=_export,from=arrayFrom$1,checkCorrectnessOfIteration$3=checkCorrectnessOfIteration$4,INCORRECT_ITERATION=!checkCorrectnessOfIteration$3(function(lt){Array.from(lt)});$$2C({target:"Array",stat:!0,forced:INCORRECT_ITERATION},{from});var $$2B=_export,$includes$1=arrayIncludes.includes,fails$12=fails$1m,addToUnscopables$6=addToUnscopables$e,BROKEN_ON_SPARSE=fails$12(function(){return!Array(1).includes()});$$2B({target:"Array",proto:!0,forced:BROKEN_ON_SPARSE},{includes:function(ft){return $includes$1(this,ft,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$6("includes");var $$2A=_export,uncurryThis$$=functionUncurryThisClause,$indexOf$1=arrayIncludes.indexOf,arrayMethodIsStrict$6=arrayMethodIsStrict$9,nativeIndexOf=uncurryThis$$([].indexOf),NEGATIVE_ZERO$1=!!nativeIndexOf&&1/nativeIndexOf([1],1,-0)<0,FORCED$z=NEGATIVE_ZERO$1||!arrayMethodIsStrict$6("indexOf");$$2A({target:"Array",proto:!0,forced:FORCED$z},{indexOf:function(ft){var dt=arguments.length>1?arguments[1]:void 0;return NEGATIVE_ZERO$1?nativeIndexOf(this,ft,dt)||0:$indexOf$1(this,ft,dt)}});var $$2z=_export,isArray$8=isArray$d;$$2z({target:"Array",stat:!0},{isArray:isArray$8});var fails$11=fails$1m,isCallable$g=isCallable$z,isObject$A=isObject$K,getPrototypeOf$a=objectGetPrototypeOf$1,defineBuiltIn$h=defineBuiltIn$m,wellKnownSymbol$j=wellKnownSymbol$z,ITERATOR$7=wellKnownSymbol$j("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator;[].keys&&(arrayIterator=[].keys(),"next"in arrayIterator?(PrototypeOfArrayIteratorPrototype=getPrototypeOf$a(getPrototypeOf$a(arrayIterator)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0);var NEW_ITERATOR_PROTOTYPE=!isObject$A(IteratorPrototype$2)||fails$11(function(){var lt={};return IteratorPrototype$2[ITERATOR$7].call(lt)!==lt});NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={});isCallable$g(IteratorPrototype$2[ITERATOR$7])||defineBuiltIn$h(IteratorPrototype$2,ITERATOR$7,function(){return this});var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},IteratorPrototype$1=iteratorsCore.IteratorPrototype,create$8=objectCreate$1,createPropertyDescriptor$5=createPropertyDescriptor$c,setToStringTag$a=setToStringTag$d,Iterators$2=iterators,returnThis$1=function(){return this},iteratorCreateConstructor=function(lt,ft,dt,vt){var Et=ft+" Iterator";return lt.prototype=create$8(IteratorPrototype$1,{next:createPropertyDescriptor$5(+!vt,dt)}),setToStringTag$a(lt,Et,!1),Iterators$2[Et]=returnThis$1,lt},$$2y=_export,call$s=functionCall,FunctionName$1=functionName,isCallable$f=isCallable$z,createIteratorConstructor$2=iteratorCreateConstructor,getPrototypeOf$9=objectGetPrototypeOf$1,setPrototypeOf$7=objectSetPrototypeOf$1,setToStringTag$9=setToStringTag$d,createNonEnumerableProperty$8=createNonEnumerableProperty$f,defineBuiltIn$g=defineBuiltIn$m,wellKnownSymbol$i=wellKnownSymbol$z,Iterators$1=iterators,IteratorsCore=iteratorsCore,PROPER_FUNCTION_NAME$3=FunctionName$1.PROPER,CONFIGURABLE_FUNCTION_NAME$1=FunctionName$1.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$6=wellKnownSymbol$i("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},iteratorDefine=function(lt,ft,dt,vt,Et,St,Tt){createIteratorConstructor$2(dt,ft,vt);var At=function(Ht){if(Ht===Et&&Nt)return Nt;if(!BUGGY_SAFARI_ITERATORS&&Ht in Dt)return Dt[Ht];switch(Ht){case KEYS:return function(){return new dt(this,Ht)};case VALUES:return function(){return new dt(this,Ht)};case ENTRIES:return function(){return new dt(this,Ht)}}return function(){return new dt(this)}},Ct=ft+" Iterator",Rt=!1,Dt=lt.prototype,kt=Dt[ITERATOR$6]||Dt["@@iterator"]||Et&&Dt[Et],Nt=!BUGGY_SAFARI_ITERATORS&&kt||At(Et),zt=ft=="Array"&&Dt.entries||kt,Wt,nr,Ut;if(zt&&(Wt=getPrototypeOf$9(zt.call(new lt)),Wt!==Object.prototype&&Wt.next&&(getPrototypeOf$9(Wt)!==IteratorPrototype&&(setPrototypeOf$7?setPrototypeOf$7(Wt,IteratorPrototype):isCallable$f(Wt[ITERATOR$6])||defineBuiltIn$g(Wt,ITERATOR$6,returnThis)),setToStringTag$9(Wt,Ct,!0))),PROPER_FUNCTION_NAME$3&&Et==VALUES&&kt&&kt.name!==VALUES&&(CONFIGURABLE_FUNCTION_NAME$1?createNonEnumerableProperty$8(Dt,"name",VALUES):(Rt=!0,Nt=function(){return call$s(kt,this)})),Et)if(nr={values:At(VALUES),keys:St?Nt:At(KEYS),entries:At(ENTRIES)},Tt)for(Ut in nr)(BUGGY_SAFARI_ITERATORS||Rt||!(Ut in Dt))&&defineBuiltIn$g(Dt,Ut,nr[Ut]);else $$2y({target:ft,proto:!0,forced:BUGGY_SAFARI_ITERATORS||Rt},nr);return Dt[ITERATOR$6]!==Nt&&defineBuiltIn$g(Dt,ITERATOR$6,Nt,{name:Et}),Iterators$1[ft]=Nt,nr},createIterResultObject$4=function(lt,ft){return{value:lt,done:ft}},toIndexedObject$c=toIndexedObject$j,addToUnscopables$5=addToUnscopables$e,Iterators=iterators,InternalStateModule$b=internalState,defineProperty$a=objectDefineProperty.f,defineIterator$2=iteratorDefine,createIterResultObject$3=createIterResultObject$4,DESCRIPTORS$x=descriptors,ARRAY_ITERATOR="Array Iterator",setInternalState$a=InternalStateModule$b.set,getInternalState$8=InternalStateModule$b.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator$2(Array,"Array",function(lt,ft){setInternalState$a(this,{type:ARRAY_ITERATOR,target:toIndexedObject$c(lt),index:0,kind:ft})},function(){var lt=getInternalState$8(this),ft=lt.target,dt=lt.kind,vt=lt.index++;return!ft||vt>=ft.length?(lt.target=void 0,createIterResultObject$3(void 0,!0)):dt=="keys"?createIterResultObject$3(vt,!1):dt=="values"?createIterResultObject$3(ft[vt],!1):createIterResultObject$3([vt,ft[vt]],!1)},"values"),values=Iterators.Arguments=Iterators.Array;addToUnscopables$5("keys");addToUnscopables$5("values");addToUnscopables$5("entries");if(DESCRIPTORS$x&&values.name!=="values")try{defineProperty$a(values,"name",{value:"values"})}catch{}var $$2x=_export,uncurryThis$_=functionUncurryThis,IndexedObject$2=indexedObject,toIndexedObject$b=toIndexedObject$j,arrayMethodIsStrict$5=arrayMethodIsStrict$9,nativeJoin=uncurryThis$_([].join),ES3_STRINGS=IndexedObject$2!=Object,FORCED$y=ES3_STRINGS||!arrayMethodIsStrict$5("join",",");$$2x({target:"Array",proto:!0,forced:FORCED$y},{join:function(ft){return nativeJoin(toIndexedObject$b(this),ft===void 0?",":ft)}});var apply$a=functionApply$1,toIndexedObject$a=toIndexedObject$j,toIntegerOrInfinity$g=toIntegerOrInfinity$l,lengthOfArrayLike$f=lengthOfArrayLike$t,arrayMethodIsStrict$4=arrayMethodIsStrict$9,min$7=Math.min,$lastIndexOf$1=[].lastIndexOf,NEGATIVE_ZERO=!!$lastIndexOf$1&&1/[1].lastIndexOf(1,-0)<0,STRICT_METHOD$2=arrayMethodIsStrict$4("lastIndexOf"),FORCED$x=NEGATIVE_ZERO||!STRICT_METHOD$2,arrayLastIndexOf=FORCED$x?function(ft){if(NEGATIVE_ZERO)return apply$a($lastIndexOf$1,this,arguments)||0;var dt=toIndexedObject$a(this),vt=lengthOfArrayLike$f(dt),Et=vt-1;for(arguments.length>1&&(Et=min$7(Et,toIntegerOrInfinity$g(arguments[1]))),Et<0&&(Et=vt+Et);Et>=0;Et--)if(Et in dt&&dt[Et]===ft)return Et||0;return-1}:$lastIndexOf$1,$$2w=_export,lastIndexOf=arrayLastIndexOf;$$2w({target:"Array",proto:!0,forced:lastIndexOf!==[].lastIndexOf},{lastIndexOf});var $$2v=_export,$map$1=arrayIteration.map,arrayMethodHasSpeciesSupport$2=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT$2=arrayMethodHasSpeciesSupport$2("map");$$2v({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$2},{map:function(ft){return $map$1(this,ft,arguments.length>1?arguments[1]:void 0)}});var $$2u=_export,fails$10=fails$1m,isConstructor$3=isConstructor$6,createProperty$5=createProperty$9,$Array$6=Array,ISNT_GENERIC=fails$10(function(){function lt(){}return!($Array$6.of.call(lt)instanceof lt)});$$2u({target:"Array",stat:!0,forced:ISNT_GENERIC},{of:function(){for(var ft=0,dt=arguments.length,vt=new(isConstructor$3(this)?this:$Array$6)(dt);dt>ft;)createProperty$5(vt,ft,arguments[ft++]);return vt.length=dt,vt}});var DESCRIPTORS$w=descriptors,isArray$7=isArray$d,$TypeError$e=TypeError,getOwnPropertyDescriptor$9=Object.getOwnPropertyDescriptor,SILENT_ON_NON_WRITABLE_LENGTH_SET=DESCRIPTORS$w&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(lt){return lt instanceof TypeError}}(),arraySetLength=SILENT_ON_NON_WRITABLE_LENGTH_SET?function(lt,ft){if(isArray$7(lt)&&!getOwnPropertyDescriptor$9(lt,"length").writable)throw $TypeError$e("Cannot set read only .length");return lt.length=ft}:function(lt,ft){return lt.length=ft},$$2t=_export,toObject$g=toObject$t,lengthOfArrayLike$e=lengthOfArrayLike$t,setArrayLength$2=arraySetLength,doesNotExceedSafeInteger$3=doesNotExceedSafeInteger$6,fails$$=fails$1m,INCORRECT_TO_LENGTH=fails$$(function(){return[].push.call({length:4294967296},1)!==4294967297}),properErrorOnNonWritableLength$1=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(lt){return lt instanceof TypeError}},FORCED$w=INCORRECT_TO_LENGTH||!properErrorOnNonWritableLength$1();$$2t({target:"Array",proto:!0,arity:1,forced:FORCED$w},{push:function(ft){var dt=toObject$g(this),vt=lengthOfArrayLike$e(dt),Et=arguments.length;doesNotExceedSafeInteger$3(vt+Et);for(var St=0;St<Et;St++)dt[vt]=arguments[St],vt++;return setArrayLength$2(dt,vt),vt}});var aCallable$f=aCallable$l,toObject$f=toObject$t,IndexedObject$1=indexedObject,lengthOfArrayLike$d=lengthOfArrayLike$t,$TypeError$d=TypeError,createMethod$4=function(lt){return function(ft,dt,vt,Et){aCallable$f(dt);var St=toObject$f(ft),Tt=IndexedObject$1(St),At=lengthOfArrayLike$d(St),Ct=lt?At-1:0,Rt=lt?-1:1;if(vt<2)for(;;){if(Ct in Tt){Et=Tt[Ct],Ct+=Rt;break}if(Ct+=Rt,lt?Ct<0:At<=Ct)throw $TypeError$d("Reduce of empty array with no initial value")}for(;lt?Ct>=0:At>Ct;Ct+=Rt)Ct in Tt&&(Et=dt(Et,Tt[Ct],Ct,St));return Et}},arrayReduce={left:createMethod$4(!1),right:createMethod$4(!0)},classof$f=classofRaw$2,engineIsNode=typeof process<"u"&&classof$f(process)=="process",$$2s=_export,$reduce$1=arrayReduce.left,arrayMethodIsStrict$3=arrayMethodIsStrict$9,CHROME_VERSION$1=engineV8Version,IS_NODE$8=engineIsNode,CHROME_BUG$1=!IS_NODE$8&&CHROME_VERSION$1>79&&CHROME_VERSION$1<83,FORCED$v=CHROME_BUG$1||!arrayMethodIsStrict$3("reduce");$$2s({target:"Array",proto:!0,forced:FORCED$v},{reduce:function(ft){var dt=arguments.length;return $reduce$1(this,ft,dt,dt>1?arguments[1]:void 0)}});var $$2r=_export,$reduceRight$1=arrayReduce.right,arrayMethodIsStrict$2=arrayMethodIsStrict$9,CHROME_VERSION=engineV8Version,IS_NODE$7=engineIsNode,CHROME_BUG=!IS_NODE$7&&CHROME_VERSION>79&&CHROME_VERSION<83,FORCED$u=CHROME_BUG||!arrayMethodIsStrict$2("reduceRight");$$2r({target:"Array",proto:!0,forced:FORCED$u},{reduceRight:function(ft){return $reduceRight$1(this,ft,arguments.length,arguments.length>1?arguments[1]:void 0)}});var $$2q=_export,uncurryThis$Z=functionUncurryThis,isArray$6=isArray$d,nativeReverse=uncurryThis$Z([].reverse),test$1=[1,2];$$2q({target:"Array",proto:!0,forced:String(test$1)===String(test$1.reverse())},{reverse:function(){return isArray$6(this)&&(this.length=this.length),nativeReverse(this)}});var $$2p=_export,isArray$5=isArray$d,isConstructor$2=isConstructor$6,isObject$z=isObject$K,toAbsoluteIndex$5=toAbsoluteIndex$a,lengthOfArrayLike$c=lengthOfArrayLike$t,toIndexedObject$9=toIndexedObject$j,createProperty$4=createProperty$9,wellKnownSymbol$h=wellKnownSymbol$z,arrayMethodHasSpeciesSupport$1=arrayMethodHasSpeciesSupport$5,nativeSlice=arraySlice$a,HAS_SPECIES_SUPPORT$1=arrayMethodHasSpeciesSupport$1("slice"),SPECIES$4=wellKnownSymbol$h("species"),$Array$5=Array,max$5=Math.max;$$2p({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$1},{slice:function(ft,dt){var vt=toIndexedObject$9(this),Et=lengthOfArrayLike$c(vt),St=toAbsoluteIndex$5(ft,Et),Tt=toAbsoluteIndex$5(dt===void 0?Et:dt,Et),At,Ct,Rt;if(isArray$5(vt)&&(At=vt.constructor,isConstructor$2(At)&&(At===$Array$5||isArray$5(At.prototype))?At=void 0:isObject$z(At)&&(At=At[SPECIES$4],At===null&&(At=void 0)),At===$Array$5||At===void 0))return nativeSlice(vt,St,Tt);for(Ct=new(At===void 0?$Array$5:At)(max$5(Tt-St,0)),Rt=0;St<Tt;St++,Rt++)St in vt&&createProperty$4(Ct,Rt,vt[St]);return Ct.length=Rt,Ct}});var $$2o=_export,$some$1=arrayIteration.some,arrayMethodIsStrict$1=arrayMethodIsStrict$9,STRICT_METHOD$1=arrayMethodIsStrict$1("some");$$2o({target:"Array",proto:!0,forced:!STRICT_METHOD$1},{some:function(ft){return $some$1(this,ft,arguments.length>1?arguments[1]:void 0)}});var arraySlice$8=arraySliceSimple,floor$9=Math.floor,mergeSort=function(lt,ft){var dt=lt.length,vt=floor$9(dt/2);return dt<8?insertionSort(lt,ft):merge(lt,mergeSort(arraySlice$8(lt,0,vt),ft),mergeSort(arraySlice$8(lt,vt),ft),ft)},insertionSort=function(lt,ft){for(var dt=lt.length,vt=1,Et,St;vt<dt;){for(St=vt,Et=lt[vt];St&&ft(lt[St-1],Et)>0;)lt[St]=lt[--St];St!==vt++&&(lt[St]=Et)}return lt},merge=function(lt,ft,dt,vt){for(var Et=ft.length,St=dt.length,Tt=0,At=0;Tt<Et||At<St;)lt[Tt+At]=Tt<Et&&At<St?vt(ft[Tt],dt[At])<=0?ft[Tt++]:dt[At++]:Tt<Et?ft[Tt++]:dt[At++];return lt},arraySort$1=mergeSort,userAgent$5=engineUserAgent,firefox=userAgent$5.match(/firefox\/(\d+)/i),engineFfVersion=!!firefox&&+firefox[1],UA=engineUserAgent,engineIsIeOrEdge=/MSIE|Trident/.test(UA),userAgent$4=engineUserAgent,webkit$1=userAgent$4.match(/AppleWebKit\/(\d+)\./),engineWebkitVersion=!!webkit$1&&+webkit$1[1],$$2n=_export,uncurryThis$Y=functionUncurryThis,aCallable$e=aCallable$l,toObject$e=toObject$t,lengthOfArrayLike$b=lengthOfArrayLike$t,deletePropertyOrThrow$2=deletePropertyOrThrow$4,toString$u=toString$z,fails$_=fails$1m,internalSort$1=arraySort$1,arrayMethodIsStrict=arrayMethodIsStrict$9,FF$1=engineFfVersion,IE_OR_EDGE$1=engineIsIeOrEdge,V8$2=engineV8Version,WEBKIT$2=engineWebkitVersion,test=[],nativeSort$1=uncurryThis$Y(test.sort),push$9=uncurryThis$Y(test.push),FAILS_ON_UNDEFINED=fails$_(function(){test.sort(void 0)}),FAILS_ON_NULL=fails$_(function(){test.sort(null)}),STRICT_METHOD=arrayMethodIsStrict("sort"),STABLE_SORT$1=!fails$_(function(){if(V8$2)return V8$2<70;if(!(FF$1&&FF$1>3)){if(IE_OR_EDGE$1)return!0;if(WEBKIT$2)return WEBKIT$2<603;var lt="",ft,dt,vt,Et;for(ft=65;ft<76;ft++){switch(dt=String.fromCharCode(ft),ft){case 66:case 69:case 70:case 72:vt=3;break;case 68:case 71:vt=4;break;default:vt=2}for(Et=0;Et<47;Et++)test.push({k:dt+Et,v:vt})}for(test.sort(function(St,Tt){return Tt.v-St.v}),Et=0;Et<test.length;Et++)dt=test[Et].k.charAt(0),lt.charAt(lt.length-1)!==dt&&(lt+=dt);return lt!=="DGBEFHACIJK"}}),FORCED$t=FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD||!STABLE_SORT$1,getSortCompare$1=function(lt){return function(ft,dt){return dt===void 0?-1:ft===void 0?1:lt!==void 0?+lt(ft,dt)||0:toString$u(ft)>toString$u(dt)?1:-1}};$$2n({target:"Array",proto:!0,forced:FORCED$t},{sort:function(ft){ft!==void 0&&aCallable$e(ft);var dt=toObject$e(this);if(STABLE_SORT$1)return ft===void 0?nativeSort$1(dt):nativeSort$1(dt,ft);var vt=[],Et=lengthOfArrayLike$b(dt),St,Tt;for(Tt=0;Tt<Et;Tt++)Tt in dt&&push$9(vt,dt[Tt]);for(internalSort$1(vt,getSortCompare$1(ft)),St=lengthOfArrayLike$b(vt),Tt=0;Tt<St;)dt[Tt]=vt[Tt++];for(;Tt<Et;)deletePropertyOrThrow$2(dt,Tt++);return dt}});var getBuiltIn$b=getBuiltIn$m,defineBuiltInAccessor$e=defineBuiltInAccessor$h,wellKnownSymbol$g=wellKnownSymbol$z,DESCRIPTORS$v=descriptors,SPECIES$3=wellKnownSymbol$g("species"),setSpecies$6=function(lt){var ft=getBuiltIn$b(lt);DESCRIPTORS$v&&ft&&!ft[SPECIES$3]&&defineBuiltInAccessor$e(ft,SPECIES$3,{configurable:!0,get:function(){return this}})},setSpecies$5=setSpecies$6;setSpecies$5("Array");var $$2m=_export,toObject$d=toObject$t,toAbsoluteIndex$4=toAbsoluteIndex$a,toIntegerOrInfinity$f=toIntegerOrInfinity$l,lengthOfArrayLike$a=lengthOfArrayLike$t,setArrayLength$1=arraySetLength,doesNotExceedSafeInteger$2=doesNotExceedSafeInteger$6,arraySpeciesCreate=arraySpeciesCreate$5,createProperty$3=createProperty$9,deletePropertyOrThrow$1=deletePropertyOrThrow$4,arrayMethodHasSpeciesSupport=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("splice"),max$4=Math.max,min$6=Math.min;$$2m({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT},{splice:function(ft,dt){var vt=toObject$d(this),Et=lengthOfArrayLike$a(vt),St=toAbsoluteIndex$4(ft,Et),Tt=arguments.length,At,Ct,Rt,Dt,kt,Nt;for(Tt===0?At=Ct=0:Tt===1?(At=0,Ct=Et-St):(At=Tt-2,Ct=min$6(max$4(toIntegerOrInfinity$f(dt),0),Et-St)),doesNotExceedSafeInteger$2(Et+At-Ct),Rt=arraySpeciesCreate(vt,Ct),Dt=0;Dt<Ct;Dt++)kt=St+Dt,kt in vt&&createProperty$3(Rt,Dt,vt[kt]);if(Rt.length=Ct,At<Ct){for(Dt=St;Dt<Et-Ct;Dt++)kt=Dt+Ct,Nt=Dt+At,kt in vt?vt[Nt]=vt[kt]:deletePropertyOrThrow$1(vt,Nt);for(Dt=Et;Dt>Et-Ct+At;Dt--)deletePropertyOrThrow$1(vt,Dt-1)}else if(At>Ct)for(Dt=Et-Ct;Dt>St;Dt--)kt=Dt+Ct-1,Nt=Dt+At-1,kt in vt?vt[Nt]=vt[kt]:deletePropertyOrThrow$1(vt,Nt);for(Dt=0;Dt<At;Dt++)vt[Dt+St]=arguments[Dt+2];return setArrayLength$1(vt,Et-Ct+At),Rt}});var lengthOfArrayLike$9=lengthOfArrayLike$t,arrayToReversed$2=function(lt,ft){for(var dt=lengthOfArrayLike$9(lt),vt=new ft(dt),Et=0;Et<dt;Et++)vt[Et]=lt[dt-Et-1];return vt},$$2l=_export,arrayToReversed$1=arrayToReversed$2,toIndexedObject$8=toIndexedObject$j,addToUnscopables$4=addToUnscopables$e,$Array$4=Array;$$2l({target:"Array",proto:!0},{toReversed:function(){return arrayToReversed$1(toIndexedObject$8(this),$Array$4)}});addToUnscopables$4("toReversed");var lengthOfArrayLike$8=lengthOfArrayLike$t,arrayFromConstructorAndList$3=function(lt,ft){for(var dt=0,vt=lengthOfArrayLike$8(ft),Et=new lt(vt);vt>dt;)Et[dt]=ft[dt++];return Et},global$M=global$_,entryVirtual=function(lt){return global$M[lt].prototype},$$2k=_export,uncurryThis$X=functionUncurryThis,aCallable$d=aCallable$l,toIndexedObject$7=toIndexedObject$j,arrayFromConstructorAndList$2=arrayFromConstructorAndList$3,getVirtual=entryVirtual,addToUnscopables$3=addToUnscopables$e,$Array$3=Array,sort$1=uncurryThis$X(getVirtual("Array").sort);$$2k({target:"Array",proto:!0},{toSorted:function(ft){ft!==void 0&&aCallable$d(ft);var dt=toIndexedObject$7(this),vt=arrayFromConstructorAndList$2($Array$3,dt);return sort$1(vt,ft)}});addToUnscopables$3("toSorted");var $$2j=_export,addToUnscopables$2=addToUnscopables$e,doesNotExceedSafeInteger$1=doesNotExceedSafeInteger$6,lengthOfArrayLike$7=lengthOfArrayLike$t,toAbsoluteIndex$3=toAbsoluteIndex$a,toIndexedObject$6=toIndexedObject$j,toIntegerOrInfinity$e=toIntegerOrInfinity$l,$Array$2=Array,max$3=Math.max,min$5=Math.min;$$2j({target:"Array",proto:!0},{toSpliced:function(ft,dt){var vt=toIndexedObject$6(this),Et=lengthOfArrayLike$7(vt),St=toAbsoluteIndex$3(ft,Et),Tt=arguments.length,At=0,Ct,Rt,Dt,kt;for(Tt===0?Ct=Rt=0:Tt===1?(Ct=0,Rt=Et-St):(Ct=Tt-2,Rt=min$5(max$3(toIntegerOrInfinity$e(dt),0),Et-St)),Dt=doesNotExceedSafeInteger$1(Et+Ct-Rt),kt=$Array$2(Dt);At<St;At++)kt[At]=vt[At];for(;At<St+Ct;At++)kt[At]=arguments[At-St+2];for(;At<Dt;At++)kt[At]=vt[At+Rt-Ct];return kt}});addToUnscopables$2("toSpliced");var addToUnscopables$1=addToUnscopables$e;addToUnscopables$1("flat");var addToUnscopables=addToUnscopables$e;addToUnscopables("flatMap");var $$2i=_export,toObject$c=toObject$t,lengthOfArrayLike$6=lengthOfArrayLike$t,setArrayLength=arraySetLength,deletePropertyOrThrow=deletePropertyOrThrow$4,doesNotExceedSafeInteger=doesNotExceedSafeInteger$6,INCORRECT_RESULT=[].unshift(0)!==1,properErrorOnNonWritableLength=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(lt){return lt instanceof TypeError}},FORCED$s=INCORRECT_RESULT||!properErrorOnNonWritableLength();$$2i({target:"Array",proto:!0,arity:1,forced:FORCED$s},{unshift:function(ft){var dt=toObject$c(this),vt=lengthOfArrayLike$6(dt),Et=arguments.length;if(Et){doesNotExceedSafeInteger(vt+Et);for(var St=vt;St--;){var Tt=St+Et;St in dt?dt[Tt]=dt[St]:deletePropertyOrThrow(dt,Tt)}for(var At=0;At<Et;At++)dt[At]=arguments[At]}return setArrayLength(dt,vt+Et)}});var lengthOfArrayLike$5=lengthOfArrayLike$t,toIntegerOrInfinity$d=toIntegerOrInfinity$l,$RangeError$9=RangeError,arrayWith$2=function(lt,ft,dt,vt){var Et=lengthOfArrayLike$5(lt),St=toIntegerOrInfinity$d(dt),Tt=St<0?Et+St:St;if(Tt>=Et||Tt<0)throw $RangeError$9("Incorrect index");for(var At=new ft(Et),Ct=0;Ct<Et;Ct++)At[Ct]=Ct===Tt?vt:lt[Ct];return At},$$2h=_export,arrayWith$1=arrayWith$2,toIndexedObject$5=toIndexedObject$j,$Array$1=Array;$$2h({target:"Array",proto:!0},{with:function(lt,ft){return arrayWith$1(toIndexedObject$5(this),$Array$1,lt,ft)}});var arrayBufferBasicDetection=typeof ArrayBuffer<"u"&&typeof DataView<"u",defineBuiltIn$f=defineBuiltIn$m,defineBuiltIns$5=function(lt,ft,dt){for(var vt in ft)defineBuiltIn$f(lt,vt,ft[vt],dt);return lt},isPrototypeOf$5=objectIsPrototypeOf,$TypeError$c=TypeError,anInstance$a=function(lt,ft){if(isPrototypeOf$5(ft,lt))return lt;throw $TypeError$c("Incorrect invocation")},toIntegerOrInfinity$c=toIntegerOrInfinity$l,toLength$b=toLength$d,$RangeError$8=RangeError,toIndex$2=function(lt){if(lt===void 0)return 0;var ft=toIntegerOrInfinity$c(lt),dt=toLength$b(ft);if(ft!==dt)throw $RangeError$8("Wrong length or index");return dt},$Array=Array,abs$8=Math.abs,pow$5=Math.pow,floor$8=Math.floor,log$8=Math.log,LN2$2=Math.LN2,pack=function(lt,ft,dt){var vt=$Array(dt),Et=dt*8-ft-1,St=(1<<Et)-1,Tt=St>>1,At=ft===23?pow$5(2,-24)-pow$5(2,-77):0,Ct=lt<0||lt===0&&1/lt<0?1:0,Rt=0,Dt,kt,Nt;for(lt=abs$8(lt),lt!=lt||lt===1/0?(kt=lt!=lt?1:0,Dt=St):(Dt=floor$8(log$8(lt)/LN2$2),Nt=pow$5(2,-Dt),lt*Nt<1&&(Dt--,Nt*=2),Dt+Tt>=1?lt+=At/Nt:lt+=At*pow$5(2,1-Tt),lt*Nt>=2&&(Dt++,Nt/=2),Dt+Tt>=St?(kt=0,Dt=St):Dt+Tt>=1?(kt=(lt*Nt-1)*pow$5(2,ft),Dt=Dt+Tt):(kt=lt*pow$5(2,Tt-1)*pow$5(2,ft),Dt=0));ft>=8;)vt[Rt++]=kt&255,kt/=256,ft-=8;for(Dt=Dt<<ft|kt,Et+=ft;Et>0;)vt[Rt++]=Dt&255,Dt/=256,Et-=8;return vt[--Rt]|=Ct*128,vt},unpack$1=function(lt,ft){var dt=lt.length,vt=dt*8-ft-1,Et=(1<<vt)-1,St=Et>>1,Tt=vt-7,At=dt-1,Ct=lt[At--],Rt=Ct&127,Dt;for(Ct>>=7;Tt>0;)Rt=Rt*256+lt[At--],Tt-=8;for(Dt=Rt&(1<<-Tt)-1,Rt>>=-Tt,Tt+=ft;Tt>0;)Dt=Dt*256+lt[At--],Tt-=8;if(Rt===0)Rt=1-St;else{if(Rt===Et)return Dt?NaN:Ct?-1/0:1/0;Dt=Dt+pow$5(2,ft),Rt=Rt-St}return(Ct?-1:1)*Dt*pow$5(2,Rt-ft)},ieee754={pack,unpack:unpack$1},global$L=global$_,uncurryThis$W=functionUncurryThis,DESCRIPTORS$u=descriptors,NATIVE_ARRAY_BUFFER$2=arrayBufferBasicDetection,FunctionName=functionName,createNonEnumerableProperty$7=createNonEnumerableProperty$f,defineBuiltInAccessor$d=defineBuiltInAccessor$h,defineBuiltIns$4=defineBuiltIns$5,fails$Z=fails$1m,anInstance$9=anInstance$a,toIntegerOrInfinity$b=toIntegerOrInfinity$l,toLength$a=toLength$d,toIndex$1=toIndex$2,IEEE754=ieee754,getPrototypeOf$8=objectGetPrototypeOf$1,setPrototypeOf$6=objectSetPrototypeOf$1,getOwnPropertyNames$4=objectGetOwnPropertyNames.f,arrayFill=arrayFill$1,arraySlice$7=arraySliceSimple,setToStringTag$8=setToStringTag$d,InternalStateModule$a=internalState,PROPER_FUNCTION_NAME$2=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,ARRAY_BUFFER$1="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH$1="Wrong length",WRONG_INDEX="Wrong index",getInternalArrayBufferState=InternalStateModule$a.getterFor(ARRAY_BUFFER$1),getInternalDataViewState=InternalStateModule$a.getterFor(DATA_VIEW),setInternalState$9=InternalStateModule$a.set,NativeArrayBuffer$1=global$L[ARRAY_BUFFER$1],$ArrayBuffer=NativeArrayBuffer$1,ArrayBufferPrototype$1=$ArrayBuffer&&$ArrayBuffer[PROTOTYPE],$DataView=global$L[DATA_VIEW],DataViewPrototype$1=$DataView&&$DataView[PROTOTYPE],ObjectPrototype$3=Object.prototype,Array$2=global$L.Array,RangeError$4=global$L.RangeError,fill=uncurryThis$W(arrayFill),reverse=uncurryThis$W([].reverse),packIEEE754=IEEE754.pack,unpackIEEE754=IEEE754.unpack,packInt8=function(lt){return[lt&255]},packInt16=function(lt){return[lt&255,lt>>8&255]},packInt32=function(lt){return[lt&255,lt>>8&255,lt>>16&255,lt>>24&255]},unpackInt32=function(lt){return lt[3]<<24|lt[2]<<16|lt[1]<<8|lt[0]},packFloat32=function(lt){return packIEEE754(lt,23,4)},packFloat64=function(lt){return packIEEE754(lt,52,8)},addGetter$1=function(lt,ft,dt){defineBuiltInAccessor$d(lt[PROTOTYPE],ft,{configurable:!0,get:function(){return dt(this)[ft]}})},get$3=function(lt,ft,dt,vt){var Et=toIndex$1(dt),St=getInternalDataViewState(lt);if(Et+ft>St.byteLength)throw RangeError$4(WRONG_INDEX);var Tt=St.bytes,At=Et+St.byteOffset,Ct=arraySlice$7(Tt,At,At+ft);return vt?Ct:reverse(Ct)},set$2=function(lt,ft,dt,vt,Et,St){var Tt=toIndex$1(dt),At=getInternalDataViewState(lt);if(Tt+ft>At.byteLength)throw RangeError$4(WRONG_INDEX);for(var Ct=At.bytes,Rt=Tt+At.byteOffset,Dt=vt(+Et),kt=0;kt<ft;kt++)Ct[Rt+kt]=Dt[St?kt:ft-kt-1]};if(!NATIVE_ARRAY_BUFFER$2)$ArrayBuffer=function(ft){anInstance$9(this,ArrayBufferPrototype$1);var dt=toIndex$1(ft);setInternalState$9(this,{type:ARRAY_BUFFER$1,bytes:fill(Array$2(dt),0),byteLength:dt}),DESCRIPTORS$u||(this.byteLength=dt,this.detached=!1)},ArrayBufferPrototype$1=$ArrayBuffer[PROTOTYPE],$DataView=function(ft,dt,vt){anInstance$9(this,DataViewPrototype$1),anInstance$9(ft,ArrayBufferPrototype$1);var Et=getInternalArrayBufferState(ft),St=Et.byteLength,Tt=toIntegerOrInfinity$b(dt);if(Tt<0||Tt>St)throw RangeError$4("Wrong offset");if(vt=vt===void 0?St-Tt:toLength$a(vt),Tt+vt>St)throw RangeError$4(WRONG_LENGTH$1);setInternalState$9(this,{type:DATA_VIEW,buffer:ft,byteLength:vt,byteOffset:Tt,bytes:Et.bytes}),DESCRIPTORS$u||(this.buffer=ft,this.byteLength=vt,this.byteOffset=Tt)},DataViewPrototype$1=$DataView[PROTOTYPE],DESCRIPTORS$u&&(addGetter$1($ArrayBuffer,"byteLength",getInternalArrayBufferState),addGetter$1($DataView,"buffer",getInternalDataViewState),addGetter$1($DataView,"byteLength",getInternalDataViewState),addGetter$1($DataView,"byteOffset",getInternalDataViewState)),defineBuiltIns$4(DataViewPrototype$1,{getInt8:function(ft){return get$3(this,1,ft)[0]<<24>>24},getUint8:function(ft){return get$3(this,1,ft)[0]},getInt16:function(ft){var dt=get$3(this,2,ft,arguments.length>1?arguments[1]:void 0);return(dt[1]<<8|dt[0])<<16>>16},getUint16:function(ft){var dt=get$3(this,2,ft,arguments.length>1?arguments[1]:void 0);return dt[1]<<8|dt[0]},getInt32:function(ft){return unpackInt32(get$3(this,4,ft,arguments.length>1?arguments[1]:void 0))},getUint32:function(ft){return unpackInt32(get$3(this,4,ft,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(ft){return unpackIEEE754(get$3(this,4,ft,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(ft){return unpackIEEE754(get$3(this,8,ft,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(ft,dt){set$2(this,1,ft,packInt8,dt)},setUint8:function(ft,dt){set$2(this,1,ft,packInt8,dt)},setInt16:function(ft,dt){set$2(this,2,ft,packInt16,dt,arguments.length>2?arguments[2]:void 0)},setUint16:function(ft,dt){set$2(this,2,ft,packInt16,dt,arguments.length>2?arguments[2]:void 0)},setInt32:function(ft,dt){set$2(this,4,ft,packInt32,dt,arguments.length>2?arguments[2]:void 0)},setUint32:function(ft,dt){set$2(this,4,ft,packInt32,dt,arguments.length>2?arguments[2]:void 0)},setFloat32:function(ft,dt){set$2(this,4,ft,packFloat32,dt,arguments.length>2?arguments[2]:void 0)},setFloat64:function(ft,dt){set$2(this,8,ft,packFloat64,dt,arguments.length>2?arguments[2]:void 0)}});else{var INCORRECT_ARRAY_BUFFER_NAME=PROPER_FUNCTION_NAME$2&&NativeArrayBuffer$1.name!==ARRAY_BUFFER$1;if(!fails$Z(function(){NativeArrayBuffer$1(1)})||!fails$Z(function(){new NativeArrayBuffer$1(-1)})||fails$Z(function(){return new NativeArrayBuffer$1,new NativeArrayBuffer$1(1.5),new NativeArrayBuffer$1(NaN),NativeArrayBuffer$1.length!=1||INCORRECT_ARRAY_BUFFER_NAME&&!CONFIGURABLE_FUNCTION_NAME})){$ArrayBuffer=function(ft){return anInstance$9(this,ArrayBufferPrototype$1),new NativeArrayBuffer$1(toIndex$1(ft))},$ArrayBuffer[PROTOTYPE]=ArrayBufferPrototype$1;for(var keys$6=getOwnPropertyNames$4(NativeArrayBuffer$1),j$3=0,key$5;keys$6.length>j$3;)(key$5=keys$6[j$3++])in $ArrayBuffer||createNonEnumerableProperty$7($ArrayBuffer,key$5,NativeArrayBuffer$1[key$5]);ArrayBufferPrototype$1.constructor=$ArrayBuffer}else INCORRECT_ARRAY_BUFFER_NAME&&CONFIGURABLE_FUNCTION_NAME&&createNonEnumerableProperty$7(NativeArrayBuffer$1,"name",ARRAY_BUFFER$1);setPrototypeOf$6&&getPrototypeOf$8(DataViewPrototype$1)!==ObjectPrototype$3&&setPrototypeOf$6(DataViewPrototype$1,ObjectPrototype$3);var testView=new $DataView(new $ArrayBuffer(2)),$setInt8=uncurryThis$W(DataViewPrototype$1.setInt8);testView.setInt8(0,2147483648),testView.setInt8(1,2147483649),(testView.getInt8(0)||!testView.getInt8(1))&&defineBuiltIns$4(DataViewPrototype$1,{setInt8:function(ft,dt){$setInt8(this,ft,dt<<24>>24)},setUint8:function(ft,dt){$setInt8(this,ft,dt<<24>>24)}},{unsafe:!0})}setToStringTag$8($ArrayBuffer,ARRAY_BUFFER$1);setToStringTag$8($DataView,DATA_VIEW);var arrayBuffer={ArrayBuffer:$ArrayBuffer,DataView:$DataView},$$2g=_export,global$K=global$_,arrayBufferModule=arrayBuffer,setSpecies$4=setSpecies$6,ARRAY_BUFFER="ArrayBuffer",ArrayBuffer$4=arrayBufferModule[ARRAY_BUFFER],NativeArrayBuffer=global$K[ARRAY_BUFFER];$$2g({global:!0,constructor:!0,forced:NativeArrayBuffer!==ArrayBuffer$4},{ArrayBuffer:ArrayBuffer$4});setSpecies$4(ARRAY_BUFFER);var NATIVE_ARRAY_BUFFER$1=arrayBufferBasicDetection,DESCRIPTORS$t=descriptors,global$J=global$_,isCallable$e=isCallable$z,isObject$y=isObject$K,hasOwn$h=hasOwnProperty_1,classof$e=classof$m,tryToString$1=tryToString$7,createNonEnumerableProperty$6=createNonEnumerableProperty$f,defineBuiltIn$e=defineBuiltIn$m,defineBuiltInAccessor$c=defineBuiltInAccessor$h,isPrototypeOf$4=objectIsPrototypeOf,getPrototypeOf$7=objectGetPrototypeOf$1,setPrototypeOf$5=objectSetPrototypeOf$1,wellKnownSymbol$f=wellKnownSymbol$z,uid$2=uid$6,InternalStateModule$9=internalState,enforceInternalState$3=InternalStateModule$9.enforce,getInternalState$7=InternalStateModule$9.get,Int8Array$4=global$J.Int8Array,Int8ArrayPrototype$1=Int8Array$4&&Int8Array$4.prototype,Uint8ClampedArray$1=global$J.Uint8ClampedArray,Uint8ClampedArrayPrototype=Uint8ClampedArray$1&&Uint8ClampedArray$1.prototype,TypedArray$1=Int8Array$4&&getPrototypeOf$7(Int8Array$4),TypedArrayPrototype$2=Int8ArrayPrototype$1&&getPrototypeOf$7(Int8ArrayPrototype$1),ObjectPrototype$2=Object.prototype,TypeError$6=global$J.TypeError,TO_STRING_TAG$1=wellKnownSymbol$f("toStringTag"),TYPED_ARRAY_TAG$1=uid$2("TYPED_ARRAY_TAG"),TYPED_ARRAY_CONSTRUCTOR="TypedArrayConstructor",NATIVE_ARRAY_BUFFER_VIEWS$3=NATIVE_ARRAY_BUFFER$1&&!!setPrototypeOf$5&&classof$e(global$J.opera)!=="Opera",TYPED_ARRAY_TAG_REQUIRED=!1,NAME$2,Constructor,Prototype,TypedArrayConstructorsList={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BigIntArrayConstructorsList={BigInt64Array:8,BigUint64Array:8},isView=function(ft){if(!isObject$y(ft))return!1;var dt=classof$e(ft);return dt==="DataView"||hasOwn$h(TypedArrayConstructorsList,dt)||hasOwn$h(BigIntArrayConstructorsList,dt)},getTypedArrayConstructor$4=function(lt){var ft=getPrototypeOf$7(lt);if(isObject$y(ft)){var dt=getInternalState$7(ft);return dt&&hasOwn$h(dt,TYPED_ARRAY_CONSTRUCTOR)?dt[TYPED_ARRAY_CONSTRUCTOR]:getTypedArrayConstructor$4(ft)}},isTypedArray$3=function(lt){if(!isObject$y(lt))return!1;var ft=classof$e(lt);return hasOwn$h(TypedArrayConstructorsList,ft)||hasOwn$h(BigIntArrayConstructorsList,ft)},aTypedArray$s=function(lt){if(isTypedArray$3(lt))return lt;throw TypeError$6("Target is not a typed array")},aTypedArrayConstructor$4=function(lt){if(isCallable$e(lt)&&(!setPrototypeOf$5||isPrototypeOf$4(TypedArray$1,lt)))return lt;throw TypeError$6(tryToString$1(lt)+" is not a typed array constructor")},exportTypedArrayMethod$t=function(lt,ft,dt,vt){if(DESCRIPTORS$t){if(dt)for(var Et in TypedArrayConstructorsList){var St=global$J[Et];if(St&&hasOwn$h(St.prototype,lt))try{delete St.prototype[lt]}catch{try{St.prototype[lt]=ft}catch{}}}(!TypedArrayPrototype$2[lt]||dt)&&defineBuiltIn$e(TypedArrayPrototype$2,lt,dt?ft:NATIVE_ARRAY_BUFFER_VIEWS$3&&Int8ArrayPrototype$1[lt]||ft,vt)}},exportTypedArrayStaticMethod$2=function(lt,ft,dt){var vt,Et;if(DESCRIPTORS$t){if(setPrototypeOf$5){if(dt){for(vt in TypedArrayConstructorsList)if(Et=global$J[vt],Et&&hasOwn$h(Et,lt))try{delete Et[lt]}catch{}}if(!TypedArray$1[lt]||dt)try{return defineBuiltIn$e(TypedArray$1,lt,dt?ft:NATIVE_ARRAY_BUFFER_VIEWS$3&&TypedArray$1[lt]||ft)}catch{}else return}for(vt in TypedArrayConstructorsList)Et=global$J[vt],Et&&(!Et[lt]||dt)&&defineBuiltIn$e(Et,lt,ft)}};for(NAME$2 in TypedArrayConstructorsList)Constructor=global$J[NAME$2],Prototype=Constructor&&Constructor.prototype,Prototype?enforceInternalState$3(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor:NATIVE_ARRAY_BUFFER_VIEWS$3=!1;for(NAME$2 in BigIntArrayConstructorsList)Constructor=global$J[NAME$2],Prototype=Constructor&&Constructor.prototype,Prototype&&(enforceInternalState$3(Prototype)[TYPED_ARRAY_CONSTRUCTOR]=Constructor);if((!NATIVE_ARRAY_BUFFER_VIEWS$3||!isCallable$e(TypedArray$1)||TypedArray$1===Function.prototype)&&(TypedArray$1=function(){throw TypeError$6("Incorrect invocation")},NATIVE_ARRAY_BUFFER_VIEWS$3))for(NAME$2 in TypedArrayConstructorsList)global$J[NAME$2]&&setPrototypeOf$5(global$J[NAME$2],TypedArray$1);if((!NATIVE_ARRAY_BUFFER_VIEWS$3||!TypedArrayPrototype$2||TypedArrayPrototype$2===ObjectPrototype$2)&&(TypedArrayPrototype$2=TypedArray$1.prototype,NATIVE_ARRAY_BUFFER_VIEWS$3))for(NAME$2 in TypedArrayConstructorsList)global$J[NAME$2]&&setPrototypeOf$5(global$J[NAME$2].prototype,TypedArrayPrototype$2);NATIVE_ARRAY_BUFFER_VIEWS$3&&getPrototypeOf$7(Uint8ClampedArrayPrototype)!==TypedArrayPrototype$2&&setPrototypeOf$5(Uint8ClampedArrayPrototype,TypedArrayPrototype$2);if(DESCRIPTORS$t&&!hasOwn$h(TypedArrayPrototype$2,TO_STRING_TAG$1)){TYPED_ARRAY_TAG_REQUIRED=!0,defineBuiltInAccessor$c(TypedArrayPrototype$2,TO_STRING_TAG$1,{configurable:!0,get:function(){return isObject$y(this)?this[TYPED_ARRAY_TAG$1]:void 0}});for(NAME$2 in TypedArrayConstructorsList)global$J[NAME$2]&&createNonEnumerableProperty$6(global$J[NAME$2],TYPED_ARRAY_TAG$1,NAME$2)}var arrayBufferViewCore={NATIVE_ARRAY_BUFFER_VIEWS:NATIVE_ARRAY_BUFFER_VIEWS$3,TYPED_ARRAY_TAG:TYPED_ARRAY_TAG_REQUIRED&&TYPED_ARRAY_TAG$1,aTypedArray:aTypedArray$s,aTypedArrayConstructor:aTypedArrayConstructor$4,exportTypedArrayMethod:exportTypedArrayMethod$t,exportTypedArrayStaticMethod:exportTypedArrayStaticMethod$2,getTypedArrayConstructor:getTypedArrayConstructor$4,isView,isTypedArray:isTypedArray$3,TypedArray:TypedArray$1,TypedArrayPrototype:TypedArrayPrototype$2},$$2f=_export,ArrayBufferViewCore$v=arrayBufferViewCore,NATIVE_ARRAY_BUFFER_VIEWS$2=ArrayBufferViewCore$v.NATIVE_ARRAY_BUFFER_VIEWS;$$2f({target:"ArrayBuffer",stat:!0,forced:!NATIVE_ARRAY_BUFFER_VIEWS$2},{isView:ArrayBufferViewCore$v.isView});var isConstructor$1=isConstructor$6,tryToString=tryToString$7,$TypeError$b=TypeError,aConstructor$3=function(lt){if(isConstructor$1(lt))return lt;throw $TypeError$b(tryToString(lt)+" is not a constructor")},anObject$r=anObject$D,aConstructor$2=aConstructor$3,isNullOrUndefined$a=isNullOrUndefined$e,wellKnownSymbol$e=wellKnownSymbol$z,SPECIES$2=wellKnownSymbol$e("species"),speciesConstructor$6=function(lt,ft){var dt=anObject$r(lt).constructor,vt;return dt===void 0||isNullOrUndefined$a(vt=anObject$r(dt)[SPECIES$2])?ft:aConstructor$2(vt)},$$2e=_export,uncurryThis$V=functionUncurryThisClause,fails$Y=fails$1m,ArrayBufferModule$2=arrayBuffer,anObject$q=anObject$D,toAbsoluteIndex$2=toAbsoluteIndex$a,toLength$9=toLength$d,speciesConstructor$5=speciesConstructor$6,ArrayBuffer$3=ArrayBufferModule$2.ArrayBuffer,DataView$4=ArrayBufferModule$2.DataView,DataViewPrototype=DataView$4.prototype,nativeArrayBufferSlice=uncurryThis$V(ArrayBuffer$3.prototype.slice),getUint8=uncurryThis$V(DataViewPrototype.getUint8),setUint8=uncurryThis$V(DataViewPrototype.setUint8),INCORRECT_SLICE=fails$Y(function(){return!new ArrayBuffer$3(2).slice(1,void 0).byteLength});$$2e({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:INCORRECT_SLICE},{slice:function(ft,dt){if(nativeArrayBufferSlice&&dt===void 0)return nativeArrayBufferSlice(anObject$q(this),ft);for(var vt=anObject$q(this).byteLength,Et=toAbsoluteIndex$2(ft,vt),St=toAbsoluteIndex$2(dt===void 0?vt:dt,vt),Tt=new(speciesConstructor$5(this,ArrayBuffer$3))(toLength$9(St-Et)),At=new DataView$4(this),Ct=new DataView$4(Tt),Rt=0;Et<St;)setUint8(Ct,Rt++,getUint8(At,Et++));return Tt}});var $$2d=_export,ArrayBufferModule$1=arrayBuffer,NATIVE_ARRAY_BUFFER=arrayBufferBasicDetection;$$2d({global:!0,constructor:!0,forced:!NATIVE_ARRAY_BUFFER},{DataView:ArrayBufferModule$1.DataView});var $$2c=_export,uncurryThis$U=functionUncurryThis,fails$X=fails$1m,FORCED$r=fails$X(function(){return new Date(16e11).getYear()!==120}),getFullYear=uncurryThis$U(Date.prototype.getFullYear);$$2c({target:"Date",proto:!0,forced:FORCED$r},{getYear:function(){return getFullYear(this)-1900}});var $$2b=_export,uncurryThis$T=functionUncurryThis,$Date=Date,thisTimeValue$4=uncurryThis$T($Date.prototype.getTime);$$2b({target:"Date",stat:!0},{now:function(){return thisTimeValue$4(new $Date)}});var $$2a=_export,uncurryThis$S=functionUncurryThis,toIntegerOrInfinity$a=toIntegerOrInfinity$l,DatePrototype$3=Date.prototype,thisTimeValue$3=uncurryThis$S(DatePrototype$3.getTime),setFullYear=uncurryThis$S(DatePrototype$3.setFullYear);$$2a({target:"Date",proto:!0},{setYear:function(ft){thisTimeValue$3(this);var dt=toIntegerOrInfinity$a(ft),vt=0<=dt&&dt<=99?dt+1900:dt;return setFullYear(this,vt)}});var $$29=_export;$$29({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString});var toIntegerOrInfinity$9=toIntegerOrInfinity$l,toString$t=toString$z,requireObjectCoercible$g=requireObjectCoercible$j,$RangeError$7=RangeError,stringRepeat=function(ft){var dt=toString$t(requireObjectCoercible$g(this)),vt="",Et=toIntegerOrInfinity$9(ft);if(Et<0||Et==1/0)throw $RangeError$7("Wrong number of repetitions");for(;Et>0;(Et>>>=1)&&(dt+=dt))Et&1&&(vt+=dt);return vt},uncurryThis$R=functionUncurryThis,toLength$8=toLength$d,toString$s=toString$z,$repeat$2=stringRepeat,requireObjectCoercible$f=requireObjectCoercible$j,repeat$3=uncurryThis$R($repeat$2),stringSlice$f=uncurryThis$R("".slice),ceil=Math.ceil,createMethod$3=function(lt){return function(ft,dt,vt){var Et=toString$s(requireObjectCoercible$f(ft)),St=toLength$8(dt),Tt=Et.length,At=vt===void 0?" ":toString$s(vt),Ct,Rt;return St<=Tt||At==""?Et:(Ct=St-Tt,Rt=repeat$3(At,ceil(Ct/At.length)),Rt.length>Ct&&(Rt=stringSlice$f(Rt,0,Ct)),lt?Et+Rt:Rt+Et)}},stringPad={start:createMethod$3(!1),end:createMethod$3(!0)},uncurryThis$Q=functionUncurryThis,fails$W=fails$1m,padStart=stringPad.start,$RangeError$6=RangeError,$isFinite$1=isFinite,abs$7=Math.abs,DatePrototype$2=Date.prototype,nativeDateToISOString=DatePrototype$2.toISOString,thisTimeValue$2=uncurryThis$Q(DatePrototype$2.getTime),getUTCDate=uncurryThis$Q(DatePrototype$2.getUTCDate),getUTCFullYear=uncurryThis$Q(DatePrototype$2.getUTCFullYear),getUTCHours=uncurryThis$Q(DatePrototype$2.getUTCHours),getUTCMilliseconds=uncurryThis$Q(DatePrototype$2.getUTCMilliseconds),getUTCMinutes=uncurryThis$Q(DatePrototype$2.getUTCMinutes),getUTCMonth=uncurryThis$Q(DatePrototype$2.getUTCMonth),getUTCSeconds=uncurryThis$Q(DatePrototype$2.getUTCSeconds),dateToIsoString=fails$W(function(){return nativeDateToISOString.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!fails$W(function(){nativeDateToISOString.call(new Date(NaN))})?function(){if(!$isFinite$1(thisTimeValue$2(this)))throw $RangeError$6("Invalid time value");var ft=this,dt=getUTCFullYear(ft),vt=getUTCMilliseconds(ft),Et=dt<0?"-":dt>9999?"+":"";return Et+padStart(abs$7(dt),Et?6:4,0)+"-"+padStart(getUTCMonth(ft)+1,2,0)+"-"+padStart(getUTCDate(ft),2,0)+"T"+padStart(getUTCHours(ft),2,0)+":"+padStart(getUTCMinutes(ft),2,0)+":"+padStart(getUTCSeconds(ft),2,0)+"."+padStart(vt,3,0)+"Z"}:nativeDateToISOString,$$28=_export,toISOString=dateToIsoString;$$28({target:"Date",proto:!0,forced:Date.prototype.toISOString!==toISOString},{toISOString});var $$27=_export,fails$V=fails$1m,toObject$b=toObject$t,toPrimitive$2=toPrimitive$4,FORCED$q=fails$V(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});$$27({target:"Date",proto:!0,arity:1,forced:FORCED$q},{toJSON:function(ft){var dt=toObject$b(this),vt=toPrimitive$2(dt,"number");return typeof vt=="number"&&!isFinite(vt)?null:dt.toISOString()}});var anObject$p=anObject$D,ordinaryToPrimitive=ordinaryToPrimitive$2,$TypeError$a=TypeError,dateToPrimitive$1=function(lt){if(anObject$p(this),lt==="string"||lt==="default")lt="string";else if(lt!=="number")throw $TypeError$a("Incorrect hint");return ordinaryToPrimitive(this,lt)},hasOwn$g=hasOwnProperty_1,defineBuiltIn$d=defineBuiltIn$m,dateToPrimitive=dateToPrimitive$1,wellKnownSymbol$d=wellKnownSymbol$z,TO_PRIMITIVE=wellKnownSymbol$d("toPrimitive"),DatePrototype$1=Date.prototype;hasOwn$g(DatePrototype$1,TO_PRIMITIVE)||defineBuiltIn$d(DatePrototype$1,TO_PRIMITIVE,dateToPrimitive);var uncurryThis$P=functionUncurryThis,defineBuiltIn$c=defineBuiltIn$m,DatePrototype=Date.prototype,INVALID_DATE="Invalid Date",TO_STRING$1="toString",nativeDateToString=uncurryThis$P(DatePrototype[TO_STRING$1]),thisTimeValue$1=uncurryThis$P(DatePrototype.getTime);String(new Date(NaN))!=INVALID_DATE&&defineBuiltIn$c(DatePrototype,TO_STRING$1,function(){var ft=thisTimeValue$1(this);return ft===ft?nativeDateToString(this):INVALID_DATE});var $$26=_export,uncurryThis$O=functionUncurryThis,toString$r=toString$z,charAt$d=uncurryThis$O("".charAt),charCodeAt$4=uncurryThis$O("".charCodeAt),exec$8=uncurryThis$O(/./.exec),numberToString$1=uncurryThis$O(1 .toString),toUpperCase=uncurryThis$O("".toUpperCase),raw$1=/[\w*+\-./@]/,hex$1=function(lt,ft){for(var dt=numberToString$1(lt,16);dt.length<ft;)dt="0"+dt;return dt};$$26({global:!0},{escape:function(ft){for(var dt=toString$r(ft),vt="",Et=dt.length,St=0,Tt,At;St<Et;)Tt=charAt$d(dt,St++),exec$8(raw$1,Tt)?vt+=Tt:(At=charCodeAt$4(Tt,0),At<256?vt+="%"+hex$1(At,2):vt+="%u"+toUpperCase(hex$1(At,4)));return vt}});var uncurryThis$N=functionUncurryThis,aCallable$c=aCallable$l,isObject$x=isObject$K,hasOwn$f=hasOwnProperty_1,arraySlice$6=arraySlice$a,NATIVE_BIND=functionBindNative,$Function=Function,concat$2=uncurryThis$N([].concat),join$6=uncurryThis$N([].join),factories={},construct$1=function(lt,ft,dt){if(!hasOwn$f(factories,ft)){for(var vt=[],Et=0;Et<ft;Et++)vt[Et]="a["+Et+"]";factories[ft]=$Function("C,a","return new C("+join$6(vt,",")+")")}return factories[ft](lt,dt)},functionBind=NATIVE_BIND?$Function.bind:function(ft){var dt=aCallable$c(this),vt=dt.prototype,Et=arraySlice$6(arguments,1),St=function(){var At=concat$2(Et,arraySlice$6(arguments));return this instanceof St?construct$1(dt,At.length,At):dt.apply(ft,At)};return isObject$x(vt)&&(St.prototype=vt),St},$$25=_export,bind$8=functionBind;$$25({target:"Function",proto:!0,forced:Function.bind!==bind$8},{bind:bind$8});var isCallable$d=isCallable$z,isObject$w=isObject$K,definePropertyModule$5=objectDefineProperty,getPrototypeOf$6=objectGetPrototypeOf$1,wellKnownSymbol$c=wellKnownSymbol$z,makeBuiltIn=makeBuiltInExports,HAS_INSTANCE=wellKnownSymbol$c("hasInstance"),FunctionPrototype$1=Function.prototype;HAS_INSTANCE in FunctionPrototype$1||definePropertyModule$5.f(FunctionPrototype$1,HAS_INSTANCE,{value:makeBuiltIn(function(lt){if(!isCallable$d(this)||!isObject$w(lt))return!1;var ft=this.prototype;if(!isObject$w(ft))return lt instanceof this;for(;lt=getPrototypeOf$6(lt);)if(ft===lt)return!0;return!1},HAS_INSTANCE)});var DESCRIPTORS$s=descriptors,FUNCTION_NAME_EXISTS=functionName.EXISTS,uncurryThis$M=functionUncurryThis,defineBuiltInAccessor$b=defineBuiltInAccessor$h,FunctionPrototype=Function.prototype,functionToString=uncurryThis$M(FunctionPrototype.toString),nameRE=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,regExpExec$4=uncurryThis$M(nameRE.exec),NAME$1="name";DESCRIPTORS$s&&!FUNCTION_NAME_EXISTS&&defineBuiltInAccessor$b(FunctionPrototype,NAME$1,{configurable:!0,get:function(){try{return regExpExec$4(nameRE,functionToString(this))[1]}catch{return""}}});var $$24=_export,global$I=global$_;$$24({global:!0,forced:global$I.globalThis!==global$I},{globalThis:global$I});var global$H=global$_,setToStringTag$7=setToStringTag$d;setToStringTag$7(global$H.JSON,"JSON",!0);var internalMetadataExports={},internalMetadata={get exports(){return internalMetadataExports},set exports(lt){internalMetadataExports=lt}},fails$U=fails$1m,arrayBufferNonExtensible=fails$U(function(){if(typeof ArrayBuffer=="function"){var lt=new ArrayBuffer(8);Object.isExtensible(lt)&&Object.defineProperty(lt,"a",{value:8})}}),fails$T=fails$1m,isObject$v=isObject$K,classof$d=classofRaw$2,ARRAY_BUFFER_NON_EXTENSIBLE$2=arrayBufferNonExtensible,$isExtensible$2=Object.isExtensible,FAILS_ON_PRIMITIVES$6=fails$T(function(){$isExtensible$2(1)}),objectIsExtensible=FAILS_ON_PRIMITIVES$6||ARRAY_BUFFER_NON_EXTENSIBLE$2?function(ft){return!isObject$v(ft)||ARRAY_BUFFER_NON_EXTENSIBLE$2&&classof$d(ft)=="ArrayBuffer"?!1:$isExtensible$2?$isExtensible$2(ft):!0}:$isExtensible$2,fails$S=fails$1m,freezing=!fails$S(function(){return Object.isExtensible(Object.preventExtensions({}))}),$$23=_export,uncurryThis$L=functionUncurryThis,hiddenKeys=hiddenKeys$6,isObject$u=isObject$K,hasOwn$e=hasOwnProperty_1,defineProperty$9=objectDefineProperty.f,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertyNamesExternalModule=objectGetOwnPropertyNamesExternal,isExtensible$1=objectIsExtensible,uid$1=uid$6,FREEZING$5=freezing,REQUIRED=!1,METADATA=uid$1("meta"),id$3=0,setMetadata=function(lt){defineProperty$9(lt,METADATA,{value:{objectID:"O"+id$3++,weakData:{}}})},fastKey$1=function(lt,ft){if(!isObject$u(lt))return typeof lt=="symbol"?lt:(typeof lt=="string"?"S":"P")+lt;if(!hasOwn$e(lt,METADATA)){if(!isExtensible$1(lt))return"F";if(!ft)return"E";setMetadata(lt)}return lt[METADATA].objectID},getWeakData$1=function(lt,ft){if(!hasOwn$e(lt,METADATA)){if(!isExtensible$1(lt))return!0;if(!ft)return!1;setMetadata(lt)}return lt[METADATA].weakData},onFreeze$3=function(lt){return FREEZING$5&&REQUIRED&&isExtensible$1(lt)&&!hasOwn$e(lt,METADATA)&&setMetadata(lt),lt},enable=function(){meta.enable=function(){},REQUIRED=!0;var lt=getOwnPropertyNamesModule.f,ft=uncurryThis$L([].splice),dt={};dt[METADATA]=1,lt(dt).length&&(getOwnPropertyNamesModule.f=function(vt){for(var Et=lt(vt),St=0,Tt=Et.length;St<Tt;St++)if(Et[St]===METADATA){ft(Et,St,1);break}return Et},$$23({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:getOwnPropertyNamesExternalModule.f}))},meta=internalMetadata.exports={enable,fastKey:fastKey$1,getWeakData:getWeakData$1,onFreeze:onFreeze$3};hiddenKeys[METADATA]=!0;var $$22=_export,global$G=global$_,uncurryThis$K=functionUncurryThis,isForced$3=isForced_1,defineBuiltIn$b=defineBuiltIn$m,InternalMetadataModule$1=internalMetadataExports,iterate$8=iterate$a,anInstance$8=anInstance$a,isCallable$c=isCallable$z,isNullOrUndefined$9=isNullOrUndefined$e,isObject$t=isObject$K,fails$R=fails$1m,checkCorrectnessOfIteration$2=checkCorrectnessOfIteration$4,setToStringTag$6=setToStringTag$d,inheritIfRequired$4=inheritIfRequired$6,collection$4=function(lt,ft,dt){var vt=lt.indexOf("Map")!==-1,Et=lt.indexOf("Weak")!==-1,St=vt?"set":"add",Tt=global$G[lt],At=Tt&&Tt.prototype,Ct=Tt,Rt={},Dt=function(Ht){var Bt=uncurryThis$K(At[Ht]);defineBuiltIn$b(At,Ht,Ht=="add"?function(tr){return Bt(this,tr===0?0:tr),this}:Ht=="delete"?function(Ft){return Et&&!isObject$t(Ft)?!1:Bt(this,Ft===0?0:Ft)}:Ht=="get"?function(tr){return Et&&!isObject$t(tr)?void 0:Bt(this,tr===0?0:tr)}:Ht=="has"?function(tr){return Et&&!isObject$t(tr)?!1:Bt(this,tr===0?0:tr)}:function(tr,cr){return Bt(this,tr===0?0:tr,cr),this})},kt=isForced$3(lt,!isCallable$c(Tt)||!(Et||At.forEach&&!fails$R(function(){new Tt().entries().next()})));if(kt)Ct=dt.getConstructor(ft,lt,vt,St),InternalMetadataModule$1.enable();else if(isForced$3(lt,!0)){var Nt=new Ct,zt=Nt[St](Et?{}:-0,1)!=Nt,Wt=fails$R(function(){Nt.has(1)}),nr=checkCorrectnessOfIteration$2(function(Ht){new Tt(Ht)}),Ut=!Et&&fails$R(function(){for(var Ht=new Tt,Bt=5;Bt--;)Ht[St](Bt,Bt);return!Ht.has(-0)});nr||(Ct=ft(function(Ht,Bt){anInstance$8(Ht,At);var Ft=inheritIfRequired$4(new Tt,Ht,Ct);return isNullOrUndefined$9(Bt)||iterate$8(Bt,Ft[St],{that:Ft,AS_ENTRIES:vt}),Ft}),Ct.prototype=At,At.constructor=Ct),(Wt||Ut)&&(Dt("delete"),Dt("has"),vt&&Dt("get")),(Ut||zt)&&Dt(St),Et&&At.clear&&delete At.clear}return Rt[lt]=Ct,$$22({global:!0,constructor:!0,forced:Ct!=Tt},Rt),setToStringTag$6(Ct,lt),Et||dt.setStrong(Ct,lt,vt),Ct},create$7=objectCreate$1,defineBuiltInAccessor$a=defineBuiltInAccessor$h,defineBuiltIns$3=defineBuiltIns$5,bind$7=functionBindContext,anInstance$7=anInstance$a,isNullOrUndefined$8=isNullOrUndefined$e,iterate$7=iterate$a,defineIterator$1=iteratorDefine,createIterResultObject$2=createIterResultObject$4,setSpecies$3=setSpecies$6,DESCRIPTORS$r=descriptors,fastKey=internalMetadataExports.fastKey,InternalStateModule$8=internalState,setInternalState$8=InternalStateModule$8.set,internalStateGetterFor$1=InternalStateModule$8.getterFor,collectionStrong$2={getConstructor:function(lt,ft,dt,vt){var Et=lt(function(Rt,Dt){anInstance$7(Rt,St),setInternalState$8(Rt,{type:ft,index:create$7(null),first:void 0,last:void 0,size:0}),DESCRIPTORS$r||(Rt.size=0),isNullOrUndefined$8(Dt)||iterate$7(Dt,Rt[vt],{that:Rt,AS_ENTRIES:dt})}),St=Et.prototype,Tt=internalStateGetterFor$1(ft),At=function(Rt,Dt,kt){var Nt=Tt(Rt),zt=Ct(Rt,Dt),Wt,nr;return zt?zt.value=kt:(Nt.last=zt={index:nr=fastKey(Dt,!0),key:Dt,value:kt,previous:Wt=Nt.last,next:void 0,removed:!1},Nt.first||(Nt.first=zt),Wt&&(Wt.next=zt),DESCRIPTORS$r?Nt.size++:Rt.size++,nr!=="F"&&(Nt.index[nr]=zt)),Rt},Ct=function(Rt,Dt){var kt=Tt(Rt),Nt=fastKey(Dt),zt;if(Nt!=="F")return kt.index[Nt];for(zt=kt.first;zt;zt=zt.next)if(zt.key==Dt)return zt};return defineBuiltIns$3(St,{clear:function(){for(var Dt=this,kt=Tt(Dt),Nt=kt.index,zt=kt.first;zt;)zt.removed=!0,zt.previous&&(zt.previous=zt.previous.next=void 0),delete Nt[zt.index],zt=zt.next;kt.first=kt.last=void 0,DESCRIPTORS$r?kt.size=0:Dt.size=0},delete:function(Rt){var Dt=this,kt=Tt(Dt),Nt=Ct(Dt,Rt);if(Nt){var zt=Nt.next,Wt=Nt.previous;delete kt.index[Nt.index],Nt.removed=!0,Wt&&(Wt.next=zt),zt&&(zt.previous=Wt),kt.first==Nt&&(kt.first=zt),kt.last==Nt&&(kt.last=Wt),DESCRIPTORS$r?kt.size--:Dt.size--}return!!Nt},forEach:function(Dt){for(var kt=Tt(this),Nt=bind$7(Dt,arguments.length>1?arguments[1]:void 0),zt;zt=zt?zt.next:kt.first;)for(Nt(zt.value,zt.key,this);zt&&zt.removed;)zt=zt.previous},has:function(Dt){return!!Ct(this,Dt)}}),defineBuiltIns$3(St,dt?{get:function(Dt){var kt=Ct(this,Dt);return kt&&kt.value},set:function(Dt,kt){return At(this,Dt===0?0:Dt,kt)}}:{add:function(Dt){return At(this,Dt=Dt===0?0:Dt,Dt)}}),DESCRIPTORS$r&&defineBuiltInAccessor$a(St,"size",{configurable:!0,get:function(){return Tt(this).size}}),Et},setStrong:function(lt,ft,dt){var vt=ft+" Iterator",Et=internalStateGetterFor$1(ft),St=internalStateGetterFor$1(vt);defineIterator$1(lt,ft,function(Tt,At){setInternalState$8(this,{type:vt,target:Tt,state:Et(Tt),kind:At,last:void 0})},function(){for(var Tt=St(this),At=Tt.kind,Ct=Tt.last;Ct&&Ct.removed;)Ct=Ct.previous;return!Tt.target||!(Tt.last=Ct=Ct?Ct.next:Tt.state.first)?(Tt.target=void 0,createIterResultObject$2(void 0,!0)):At=="keys"?createIterResultObject$2(Ct.key,!1):At=="values"?createIterResultObject$2(Ct.value,!1):createIterResultObject$2([Ct.key,Ct.value],!1)},dt?"entries":"values",!dt,!0),setSpecies$3(ft)}},collection$3=collection$4,collectionStrong$1=collectionStrong$2;collection$3("Map",function(lt){return function(){return lt(this,arguments.length?arguments[0]:void 0)}},collectionStrong$1);var log$7=Math.log,mathLog1p=Math.log1p||function(ft){var dt=+ft;return dt>-1e-8&&dt<1e-8?dt-dt*dt/2:log$7(1+dt)},$$21=_export,log1p$1=mathLog1p,$acosh=Math.acosh,log$6=Math.log,sqrt$2=Math.sqrt,LN2$1=Math.LN2,FORCED$p=!$acosh||Math.floor($acosh(Number.MAX_VALUE))!=710||$acosh(1/0)!=1/0;$$21({target:"Math",stat:!0,forced:FORCED$p},{acosh:function(ft){var dt=+ft;return dt<1?NaN:dt>9490626562425156e-8?log$6(dt)+LN2$1:log1p$1(dt-1+sqrt$2(dt-1)*sqrt$2(dt+1))}});var $$20=_export,$asinh=Math.asinh,log$5=Math.log,sqrt$1=Math.sqrt;function asinh(lt){var ft=+lt;return!isFinite(ft)||ft==0?ft:ft<0?-asinh(-ft):log$5(ft+sqrt$1(ft*ft+1))}var FORCED$o=!($asinh&&1/$asinh(0)>0);$$20({target:"Math",stat:!0,forced:FORCED$o},{asinh});var $$1$=_export,$atanh=Math.atanh,log$4=Math.log,FORCED$n=!($atanh&&1/$atanh(-0)<0);$$1$({target:"Math",stat:!0,forced:FORCED$n},{atanh:function(ft){var dt=+ft;return dt==0?dt:log$4((1+dt)/(1-dt))/2}});var mathSign=Math.sign||function(ft){var dt=+ft;return dt==0||dt!=dt?dt:dt<0?-1:1},$$1_=_export,sign$2=mathSign,abs$6=Math.abs,pow$4=Math.pow;$$1_({target:"Math",stat:!0},{cbrt:function(ft){var dt=+ft;return sign$2(dt)*pow$4(abs$6(dt),1/3)}});var $$1Z=_export,floor$7=Math.floor,log$3=Math.log,LOG2E=Math.LOG2E;$$1Z({target:"Math",stat:!0},{clz32:function(ft){var dt=ft>>>0;return dt?31-floor$7(log$3(dt+.5)*LOG2E):32}});var $expm1=Math.expm1,exp$2=Math.exp,mathExpm1=!$expm1||$expm1(10)>22025.465794806718||$expm1(10)<22025.465794806718||$expm1(-2e-17)!=-2e-17?function(ft){var dt=+ft;return dt==0?dt:dt>-1e-6&&dt<1e-6?dt+dt*dt/2:exp$2(dt)-1}:$expm1,$$1Y=_export,expm1$3=mathExpm1,$cosh=Math.cosh,abs$5=Math.abs,E$4=Math.E,FORCED$m=!$cosh||$cosh(710)===1/0;$$1Y({target:"Math",stat:!0,forced:FORCED$m},{cosh:function(ft){var dt=expm1$3(abs$5(ft)-1)+1;return(dt+1/(dt*E$4*E$4))*(E$4/2)}});var $$1X=_export,expm1$2=mathExpm1;$$1X({target:"Math",stat:!0,forced:expm1$2!=Math.expm1},{expm1:expm1$2});var sign$1=mathSign,abs$4=Math.abs,pow$3=Math.pow,EPSILON=pow$3(2,-52),EPSILON32=pow$3(2,-23),MAX32=pow$3(2,127)*(2-EPSILON32),MIN32=pow$3(2,-126),roundTiesToEven=function(lt){return lt+1/EPSILON-1/EPSILON},mathFround=Math.fround||function(ft){var dt=+ft,vt=abs$4(dt),Et=sign$1(dt),St,Tt;return vt<MIN32?Et*roundTiesToEven(vt/MIN32/EPSILON32)*MIN32*EPSILON32:(St=(1+EPSILON32/EPSILON)*vt,Tt=St-(St-vt),Tt>MAX32||Tt!=Tt?Et*(1/0):Et*Tt)},$$1W=_export,fround=mathFround;$$1W({target:"Math",stat:!0},{fround});var $$1V=_export,$hypot=Math.hypot,abs$3=Math.abs,sqrt=Math.sqrt,FORCED$l=!!$hypot&&$hypot(1/0,NaN)!==1/0;$$1V({target:"Math",stat:!0,arity:2,forced:FORCED$l},{hypot:function(ft,dt){for(var vt=0,Et=0,St=arguments.length,Tt=0,At,Ct;Et<St;)At=abs$3(arguments[Et++]),Tt<At?(Ct=Tt/At,vt=vt*Ct*Ct+1,Tt=At):At>0?(Ct=At/Tt,vt+=Ct*Ct):vt+=At;return Tt===1/0?1/0:Tt*sqrt(vt)}});var $$1U=_export,fails$Q=fails$1m,$imul=Math.imul,FORCED$k=fails$Q(function(){return $imul(4294967295,5)!=-5||$imul.length!=2});$$1U({target:"Math",stat:!0,forced:FORCED$k},{imul:function(ft,dt){var vt=65535,Et=+ft,St=+dt,Tt=vt&Et,At=vt&St;return 0|Tt*At+((vt&Et>>>16)*At+Tt*(vt&St>>>16)<<16>>>0)}});var log$2=Math.log,LOG10E=Math.LOG10E,mathLog10=Math.log10||function(ft){return log$2(ft)*LOG10E},$$1T=_export,log10$1=mathLog10;$$1T({target:"Math",stat:!0},{log10:log10$1});var $$1S=_export,log1p=mathLog1p;$$1S({target:"Math",stat:!0},{log1p});var $$1R=_export,log$1=Math.log,LN2=Math.LN2;$$1R({target:"Math",stat:!0},{log2:function(ft){return log$1(ft)/LN2}});var $$1Q=_export,sign=mathSign;$$1Q({target:"Math",stat:!0},{sign});var $$1P=_export,fails$P=fails$1m,expm1$1=mathExpm1,abs$2=Math.abs,exp$1=Math.exp,E$3=Math.E,FORCED$j=fails$P(function(){return Math.sinh(-2e-17)!=-2e-17});$$1P({target:"Math",stat:!0,forced:FORCED$j},{sinh:function(ft){var dt=+ft;return abs$2(dt)<1?(expm1$1(dt)-expm1$1(-dt))/2:(exp$1(dt-1)-exp$1(-dt-1))*(E$3/2)}});var $$1O=_export,expm1=mathExpm1,exp=Math.exp;$$1O({target:"Math",stat:!0},{tanh:function(ft){var dt=+ft,vt=expm1(dt),Et=expm1(-dt);return vt==1/0?1:Et==1/0?-1:(vt-Et)/(exp(dt)+exp(-dt))}});var setToStringTag$5=setToStringTag$d;setToStringTag$5(Math,"Math",!0);var $$1N=_export,trunc=mathTrunc;$$1N({target:"Math",stat:!0},{trunc});var uncurryThis$J=functionUncurryThis,thisNumberValue$5=uncurryThis$J(1 .valueOf),whitespaces$5=`	
\v\f\r                　\u2028\u2029\uFEFF`,uncurryThis$I=functionUncurryThis,requireObjectCoercible$e=requireObjectCoercible$j,toString$q=toString$z,whitespaces$4=whitespaces$5,replace$8=uncurryThis$I("".replace),ltrim=RegExp("^["+whitespaces$4+"]+"),rtrim=RegExp("(^|[^"+whitespaces$4+"])["+whitespaces$4+"]+$"),createMethod$2=function(lt){return function(ft){var dt=toString$q(requireObjectCoercible$e(ft));return lt&1&&(dt=replace$8(dt,ltrim,"")),lt&2&&(dt=replace$8(dt,rtrim,"$1")),dt}},stringTrim$1={start:createMethod$2(1),end:createMethod$2(2),trim:createMethod$2(3)},$$1M=_export,IS_PURE$2=isPure,DESCRIPTORS$q=descriptors,global$F=global$_,path$1=path$3,uncurryThis$H=functionUncurryThis,isForced$2=isForced_1,hasOwn$d=hasOwnProperty_1,inheritIfRequired$3=inheritIfRequired$6,isPrototypeOf$3=objectIsPrototypeOf,isSymbol$5=isSymbol$a,toPrimitive$1=toPrimitive$4,fails$O=fails$1m,getOwnPropertyNames$3=objectGetOwnPropertyNames.f,getOwnPropertyDescriptor$8=objectGetOwnPropertyDescriptor.f,defineProperty$8=objectDefineProperty.f,thisNumberValue$4=thisNumberValue$5,trim$2=stringTrim$1.trim,NUMBER="Number",NativeNumber=global$F[NUMBER];path$1[NUMBER];var NumberPrototype=NativeNumber.prototype,TypeError$5=global$F.TypeError,stringSlice$e=uncurryThis$H("".slice),charCodeAt$3=uncurryThis$H("".charCodeAt),toNumeric=function(lt){var ft=toPrimitive$1(lt,"number");return typeof ft=="bigint"?ft:toNumber$3(ft)},toNumber$3=function(lt){var ft=toPrimitive$1(lt,"number"),dt,vt,Et,St,Tt,At,Ct,Rt;if(isSymbol$5(ft))throw TypeError$5("Cannot convert a Symbol value to a number");if(typeof ft=="string"&&ft.length>2){if(ft=trim$2(ft),dt=charCodeAt$3(ft,0),dt===43||dt===45){if(vt=charCodeAt$3(ft,2),vt===88||vt===120)return NaN}else if(dt===48){switch(charCodeAt$3(ft,1)){case 66:case 98:Et=2,St=49;break;case 79:case 111:Et=8,St=55;break;default:return+ft}for(Tt=stringSlice$e(ft,2),At=Tt.length,Ct=0;Ct<At;Ct++)if(Rt=charCodeAt$3(Tt,Ct),Rt<48||Rt>St)return NaN;return parseInt(Tt,Et)}}return+ft},FORCED$i=isForced$2(NUMBER,!NativeNumber(" 0o1")||!NativeNumber("0b1")||NativeNumber("+0x1")),calledWithNew=function(lt){return isPrototypeOf$3(NumberPrototype,lt)&&fails$O(function(){thisNumberValue$4(lt)})},NumberWrapper=function(ft){var dt=arguments.length<1?0:NativeNumber(toNumeric(ft));return calledWithNew(this)?inheritIfRequired$3(Object(dt),this,NumberWrapper):dt};NumberWrapper.prototype=NumberPrototype;FORCED$i&&!IS_PURE$2&&(NumberPrototype.constructor=NumberWrapper);$$1M({global:!0,constructor:!0,wrap:!0,forced:FORCED$i},{Number:NumberWrapper});var copyConstructorProperties=function(lt,ft){for(var dt=DESCRIPTORS$q?getOwnPropertyNames$3(ft):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),vt=0,Et;dt.length>vt;vt++)hasOwn$d(ft,Et=dt[vt])&&!hasOwn$d(lt,Et)&&defineProperty$8(lt,Et,getOwnPropertyDescriptor$8(ft,Et))};(FORCED$i||IS_PURE$2)&&copyConstructorProperties(path$1[NUMBER],NativeNumber);var $$1L=_export;$$1L({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)});var global$E=global$_,globalIsFinite=global$E.isFinite,numberIsFinite$1=Number.isFinite||function(ft){return typeof ft=="number"&&globalIsFinite(ft)},$$1K=_export,numberIsFinite=numberIsFinite$1;$$1K({target:"Number",stat:!0},{isFinite:numberIsFinite});var isObject$s=isObject$K,floor$6=Math.floor,isIntegralNumber$3=Number.isInteger||function(ft){return!isObject$s(ft)&&isFinite(ft)&&floor$6(ft)===ft},$$1J=_export,isIntegralNumber$2=isIntegralNumber$3;$$1J({target:"Number",stat:!0},{isInteger:isIntegralNumber$2});var $$1I=_export;$$1I({target:"Number",stat:!0},{isNaN:function(ft){return ft!=ft}});var $$1H=_export,isIntegralNumber$1=isIntegralNumber$3,abs$1=Math.abs;$$1H({target:"Number",stat:!0},{isSafeInteger:function(ft){return isIntegralNumber$1(ft)&&abs$1(ft)<=9007199254740991}});var $$1G=_export;$$1G({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991});var $$1F=_export;$$1F({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991});var global$D=global$_,fails$N=fails$1m,uncurryThis$G=functionUncurryThis,toString$p=toString$z,trim$1=stringTrim$1.trim,whitespaces$3=whitespaces$5,charAt$c=uncurryThis$G("".charAt),$parseFloat$1=global$D.parseFloat,Symbol$6=global$D.Symbol,ITERATOR$5=Symbol$6&&Symbol$6.iterator,FORCED$h=1/$parseFloat$1(whitespaces$3+"-0")!==-1/0||ITERATOR$5&&!fails$N(function(){$parseFloat$1(Object(ITERATOR$5))}),numberParseFloat=FORCED$h?function(ft){var dt=trim$1(toString$p(ft)),vt=$parseFloat$1(dt);return vt===0&&charAt$c(dt,0)=="-"?-0:vt}:$parseFloat$1,$$1E=_export,parseFloat$1=numberParseFloat;$$1E({target:"Number",stat:!0,forced:Number.parseFloat!=parseFloat$1},{parseFloat:parseFloat$1});var global$C=global$_,fails$M=fails$1m,uncurryThis$F=functionUncurryThis,toString$o=toString$z,trim=stringTrim$1.trim,whitespaces$2=whitespaces$5,$parseInt$1=global$C.parseInt,Symbol$5=global$C.Symbol,ITERATOR$4=Symbol$5&&Symbol$5.iterator,hex=/^[+-]?0x/i,exec$7=uncurryThis$F(hex.exec),FORCED$g=$parseInt$1(whitespaces$2+"08")!==8||$parseInt$1(whitespaces$2+"0x16")!==22||ITERATOR$4&&!fails$M(function(){$parseInt$1(Object(ITERATOR$4))}),numberParseInt=FORCED$g?function(ft,dt){var vt=trim(toString$o(ft));return $parseInt$1(vt,dt>>>0||(exec$7(hex,vt)?16:10))}:$parseInt$1,$$1D=_export,parseInt$2=numberParseInt;$$1D({target:"Number",stat:!0,forced:Number.parseInt!=parseInt$2},{parseInt:parseInt$2});var $$1C=_export,uncurryThis$E=functionUncurryThis,toIntegerOrInfinity$8=toIntegerOrInfinity$l,thisNumberValue$3=thisNumberValue$5,$repeat$1=stringRepeat,log10=mathLog10,fails$L=fails$1m,$RangeError$5=RangeError,$String$1=String,$isFinite=isFinite,abs=Math.abs,floor$5=Math.floor,pow$2=Math.pow,round$1=Math.round,nativeToExponential=uncurryThis$E(1 .toExponential),repeat$2=uncurryThis$E($repeat$1),stringSlice$d=uncurryThis$E("".slice),ROUNDS_PROPERLY=nativeToExponential(-69e-12,4)==="-6.9000e-11"&&nativeToExponential(1.255,2)==="1.25e+0"&&nativeToExponential(12345,3)==="1.235e+4"&&nativeToExponential(25,0)==="3e+1",throwsOnInfinityFraction=function(){return fails$L(function(){nativeToExponential(1,1/0)})&&fails$L(function(){nativeToExponential(1,-1/0)})},properNonFiniteThisCheck=function(){return!fails$L(function(){nativeToExponential(1/0,1/0),nativeToExponential(NaN,1/0)})},FORCED$f=!ROUNDS_PROPERLY||!throwsOnInfinityFraction()||!properNonFiniteThisCheck();$$1C({target:"Number",proto:!0,forced:FORCED$f},{toExponential:function(ft){var dt=thisNumberValue$3(this);if(ft===void 0)return nativeToExponential(dt);var vt=toIntegerOrInfinity$8(ft);if(!$isFinite(dt))return String(dt);if(vt<0||vt>20)throw $RangeError$5("Incorrect fraction digits");if(ROUNDS_PROPERLY)return nativeToExponential(dt,vt);var Et="",St="",Tt=0,At="",Ct="";if(dt<0&&(Et="-",dt=-dt),dt===0)Tt=0,St=repeat$2("0",vt+1);else{var Rt=log10(dt);Tt=floor$5(Rt);var Dt=0,kt=pow$2(10,Tt-vt);Dt=round$1(dt/kt),2*dt>=(2*Dt+1)*kt&&(Dt+=1),Dt>=pow$2(10,vt+1)&&(Dt/=10,Tt+=1),St=$String$1(Dt)}return vt!==0&&(St=stringSlice$d(St,0,1)+"."+stringSlice$d(St,1)),Tt===0?(At="+",Ct="0"):(At=Tt>0?"+":"-",Ct=$String$1(abs(Tt))),St+="e"+At+Ct,Et+St}});var $$1B=_export,uncurryThis$D=functionUncurryThis,toIntegerOrInfinity$7=toIntegerOrInfinity$l,thisNumberValue$2=thisNumberValue$5,$repeat=stringRepeat,fails$K=fails$1m,$RangeError$4=RangeError,$String=String,floor$4=Math.floor,repeat$1=uncurryThis$D($repeat),stringSlice$c=uncurryThis$D("".slice),nativeToFixed=uncurryThis$D(1 .toFixed),pow$1=function(lt,ft,dt){return ft===0?dt:ft%2===1?pow$1(lt,ft-1,dt*lt):pow$1(lt*lt,ft/2,dt)},log=function(lt){for(var ft=0,dt=lt;dt>=4096;)ft+=12,dt/=4096;for(;dt>=2;)ft+=1,dt/=2;return ft},multiply=function(lt,ft,dt){for(var vt=-1,Et=dt;++vt<6;)Et+=ft*lt[vt],lt[vt]=Et%1e7,Et=floor$4(Et/1e7)},divide=function(lt,ft){for(var dt=6,vt=0;--dt>=0;)vt+=lt[dt],lt[dt]=floor$4(vt/ft),vt=vt%ft*1e7},dataToString=function(lt){for(var ft=6,dt="";--ft>=0;)if(dt!==""||ft===0||lt[ft]!==0){var vt=$String(lt[ft]);dt=dt===""?vt:dt+repeat$1("0",7-vt.length)+vt}return dt},FORCED$e=fails$K(function(){return nativeToFixed(8e-5,3)!=="0.000"||nativeToFixed(.9,0)!=="1"||nativeToFixed(1.255,2)!=="1.25"||nativeToFixed(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!fails$K(function(){nativeToFixed({})});$$1B({target:"Number",proto:!0,forced:FORCED$e},{toFixed:function(ft){var dt=thisNumberValue$2(this),vt=toIntegerOrInfinity$7(ft),Et=[0,0,0,0,0,0],St="",Tt="0",At,Ct,Rt,Dt;if(vt<0||vt>20)throw $RangeError$4("Incorrect fraction digits");if(dt!=dt)return"NaN";if(dt<=-1e21||dt>=1e21)return $String(dt);if(dt<0&&(St="-",dt=-dt),dt>1e-21)if(At=log(dt*pow$1(2,69,1))-69,Ct=At<0?dt*pow$1(2,-At,1):dt/pow$1(2,At,1),Ct*=4503599627370496,At=52-At,At>0){for(multiply(Et,0,Ct),Rt=vt;Rt>=7;)multiply(Et,1e7,0),Rt-=7;for(multiply(Et,pow$1(10,Rt,1),0),Rt=At-1;Rt>=23;)divide(Et,1<<23),Rt-=23;divide(Et,1<<Rt),multiply(Et,1,1),divide(Et,2),Tt=dataToString(Et)}else multiply(Et,0,Ct),multiply(Et,1<<-At,0),Tt=dataToString(Et)+repeat$1("0",vt);return vt>0?(Dt=Tt.length,Tt=St+(Dt<=vt?"0."+repeat$1("0",vt-Dt)+Tt:stringSlice$c(Tt,0,Dt-vt)+"."+stringSlice$c(Tt,Dt-vt))):Tt=St+Tt,Tt}});var $$1A=_export,uncurryThis$C=functionUncurryThis,fails$J=fails$1m,thisNumberValue$1=thisNumberValue$5,nativeToPrecision=uncurryThis$C(1 .toPrecision),FORCED$d=fails$J(function(){return nativeToPrecision(1,void 0)!=="1"})||!fails$J(function(){nativeToPrecision({})});$$1A({target:"Number",proto:!0,forced:FORCED$d},{toPrecision:function(ft){return ft===void 0?nativeToPrecision(thisNumberValue$1(this)):nativeToPrecision(thisNumberValue$1(this),ft)}});var DESCRIPTORS$p=descriptors,uncurryThis$B=functionUncurryThis,call$r=functionCall,fails$I=fails$1m,objectKeys$2=objectKeys$5,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,propertyIsEnumerableModule=objectPropertyIsEnumerable,toObject$a=toObject$t,IndexedObject=indexedObject,$assign=Object.assign,defineProperty$7=Object.defineProperty,concat$1=uncurryThis$B([].concat),objectAssign=!$assign||fails$I(function(){if(DESCRIPTORS$p&&$assign({b:1},$assign(defineProperty$7({},"a",{enumerable:!0,get:function(){defineProperty$7(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var lt={},ft={},dt=Symbol(),vt="abcdefghijklmnopqrst";return lt[dt]=7,vt.split("").forEach(function(Et){ft[Et]=Et}),$assign({},lt)[dt]!=7||objectKeys$2($assign({},ft)).join("")!=vt})?function(ft,dt){for(var vt=toObject$a(ft),Et=arguments.length,St=1,Tt=getOwnPropertySymbolsModule.f,At=propertyIsEnumerableModule.f;Et>St;)for(var Ct=IndexedObject(arguments[St++]),Rt=Tt?concat$1(objectKeys$2(Ct),Tt(Ct)):objectKeys$2(Ct),Dt=Rt.length,kt=0,Nt;Dt>kt;)Nt=Rt[kt++],(!DESCRIPTORS$p||call$r(At,Ct,Nt))&&(vt[Nt]=Ct[Nt]);return vt}:$assign,$$1z=_export,assign$3=objectAssign;$$1z({target:"Object",stat:!0,arity:2,forced:Object.assign!==assign$3},{assign:assign$3});var $$1y=_export,DESCRIPTORS$o=descriptors,create$6=objectCreate$1;$$1y({target:"Object",stat:!0,sham:!DESCRIPTORS$o},{create:create$6});var global$B=global$_,fails$H=fails$1m,WEBKIT$1=engineWebkitVersion,objectPrototypeAccessorsForced=!fails$H(function(){if(!(WEBKIT$1&&WEBKIT$1<535)){var lt=Math.random();__defineSetter__.call(null,lt,function(){}),delete global$B[lt]}}),$$1x=_export,DESCRIPTORS$n=descriptors,FORCED$c=objectPrototypeAccessorsForced,aCallable$b=aCallable$l,toObject$9=toObject$t,definePropertyModule$4=objectDefineProperty;DESCRIPTORS$n&&$$1x({target:"Object",proto:!0,forced:FORCED$c},{__defineGetter__:function(ft,dt){definePropertyModule$4.f(toObject$9(this),ft,{get:aCallable$b(dt),enumerable:!0,configurable:!0})}});var $$1w=_export,DESCRIPTORS$m=descriptors,defineProperties=objectDefineProperties.f;$$1w({target:"Object",stat:!0,forced:Object.defineProperties!==defineProperties,sham:!DESCRIPTORS$m},{defineProperties});var $$1v=_export,DESCRIPTORS$l=descriptors,defineProperty$6=objectDefineProperty.f;$$1v({target:"Object",stat:!0,forced:Object.defineProperty!==defineProperty$6,sham:!DESCRIPTORS$l},{defineProperty:defineProperty$6});var $$1u=_export,DESCRIPTORS$k=descriptors,FORCED$b=objectPrototypeAccessorsForced,aCallable$a=aCallable$l,toObject$8=toObject$t,definePropertyModule$3=objectDefineProperty;DESCRIPTORS$k&&$$1u({target:"Object",proto:!0,forced:FORCED$b},{__defineSetter__:function(ft,dt){definePropertyModule$3.f(toObject$8(this),ft,{set:aCallable$a(dt),enumerable:!0,configurable:!0})}});var DESCRIPTORS$j=descriptors,uncurryThis$A=functionUncurryThis,objectKeys$1=objectKeys$5,toIndexedObject$4=toIndexedObject$j,$propertyIsEnumerable=objectPropertyIsEnumerable.f,propertyIsEnumerable$2=uncurryThis$A($propertyIsEnumerable),push$8=uncurryThis$A([].push),createMethod$1=function(lt){return function(ft){for(var dt=toIndexedObject$4(ft),vt=objectKeys$1(dt),Et=vt.length,St=0,Tt=[],At;Et>St;)At=vt[St++],(!DESCRIPTORS$j||propertyIsEnumerable$2(dt,At))&&push$8(Tt,lt?[At,dt[At]]:dt[At]);return Tt}},objectToArray={entries:createMethod$1(!0),values:createMethod$1(!1)},$$1t=_export,$entries=objectToArray.entries;$$1t({target:"Object",stat:!0},{entries:function(ft){return $entries(ft)}});var $$1s=_export,FREEZING$4=freezing,fails$G=fails$1m,isObject$r=isObject$K,onFreeze$2=internalMetadataExports.onFreeze,$freeze=Object.freeze,FAILS_ON_PRIMITIVES$5=fails$G(function(){$freeze(1)});$$1s({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$5,sham:!FREEZING$4},{freeze:function(ft){return $freeze&&isObject$r(ft)?$freeze(onFreeze$2(ft)):ft}});var $$1r=_export,iterate$6=iterate$a,createProperty$2=createProperty$9;$$1r({target:"Object",stat:!0},{fromEntries:function(ft){var dt={};return iterate$6(ft,function(vt,Et){createProperty$2(dt,vt,Et)},{AS_ENTRIES:!0}),dt}});var $$1q=_export,fails$F=fails$1m,toIndexedObject$3=toIndexedObject$j,nativeGetOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,DESCRIPTORS$i=descriptors,FORCED$a=!DESCRIPTORS$i||fails$F(function(){nativeGetOwnPropertyDescriptor$1(1)});$$1q({target:"Object",stat:!0,forced:FORCED$a,sham:!DESCRIPTORS$i},{getOwnPropertyDescriptor:function(ft,dt){return nativeGetOwnPropertyDescriptor$1(toIndexedObject$3(ft),dt)}});var $$1p=_export,DESCRIPTORS$h=descriptors,ownKeys$d=ownKeys$f,toIndexedObject$2=toIndexedObject$j,getOwnPropertyDescriptorModule$4=objectGetOwnPropertyDescriptor,createProperty$1=createProperty$9;$$1p({target:"Object",stat:!0,sham:!DESCRIPTORS$h},{getOwnPropertyDescriptors:function(ft){for(var dt=toIndexedObject$2(ft),vt=getOwnPropertyDescriptorModule$4.f,Et=ownKeys$d(dt),St={},Tt=0,At,Ct;Et.length>Tt;)Ct=vt(dt,At=Et[Tt++]),Ct!==void 0&&createProperty$1(St,At,Ct);return St}});var $$1o=_export,fails$E=fails$1m,getOwnPropertyNames$2=objectGetOwnPropertyNamesExternal.f,FAILS_ON_PRIMITIVES$4=fails$E(function(){return!Object.getOwnPropertyNames(1)});$$1o({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$4},{getOwnPropertyNames:getOwnPropertyNames$2});var $$1n=_export,fails$D=fails$1m,toObject$7=toObject$t,nativeGetPrototypeOf=objectGetPrototypeOf$1,CORRECT_PROTOTYPE_GETTER$1=correctPrototypeGetter,FAILS_ON_PRIMITIVES$3=fails$D(function(){nativeGetPrototypeOf(1)});$$1n({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$3,sham:!CORRECT_PROTOTYPE_GETTER$1},{getPrototypeOf:function(ft){return nativeGetPrototypeOf(toObject$7(ft))}});var $$1m=_export,hasOwn$c=hasOwnProperty_1;$$1m({target:"Object",stat:!0},{hasOwn:hasOwn$c});var sameValue$1=Object.is||function(ft,dt){return ft===dt?ft!==0||1/ft===1/dt:ft!=ft&&dt!=dt},$$1l=_export,is=sameValue$1;$$1l({target:"Object",stat:!0},{is});var $$1k=_export,$isExtensible$1=objectIsExtensible;$$1k({target:"Object",stat:!0,forced:Object.isExtensible!==$isExtensible$1},{isExtensible:$isExtensible$1});var $$1j=_export,fails$C=fails$1m,isObject$q=isObject$K,classof$c=classofRaw$2,ARRAY_BUFFER_NON_EXTENSIBLE$1=arrayBufferNonExtensible,$isFrozen=Object.isFrozen,FORCED$9=ARRAY_BUFFER_NON_EXTENSIBLE$1||fails$C(function(){$isFrozen(1)});$$1j({target:"Object",stat:!0,forced:FORCED$9},{isFrozen:function(ft){return!isObject$q(ft)||ARRAY_BUFFER_NON_EXTENSIBLE$1&&classof$c(ft)=="ArrayBuffer"?!0:$isFrozen?$isFrozen(ft):!1}});var $$1i=_export,fails$B=fails$1m,isObject$p=isObject$K,classof$b=classofRaw$2,ARRAY_BUFFER_NON_EXTENSIBLE=arrayBufferNonExtensible,$isSealed=Object.isSealed,FORCED$8=ARRAY_BUFFER_NON_EXTENSIBLE||fails$B(function(){$isSealed(1)});$$1i({target:"Object",stat:!0,forced:FORCED$8},{isSealed:function(ft){return!isObject$p(ft)||ARRAY_BUFFER_NON_EXTENSIBLE&&classof$b(ft)=="ArrayBuffer"?!0:$isSealed?$isSealed(ft):!1}});var $$1h=_export,toObject$6=toObject$t,nativeKeys$2=objectKeys$5,fails$A=fails$1m,FAILS_ON_PRIMITIVES$2=fails$A(function(){nativeKeys$2(1)});$$1h({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$2},{keys:function(ft){return nativeKeys$2(toObject$6(ft))}});var $$1g=_export,DESCRIPTORS$g=descriptors,FORCED$7=objectPrototypeAccessorsForced,toObject$5=toObject$t,toPropertyKey$3=toPropertyKey$8,getPrototypeOf$5=objectGetPrototypeOf$1,getOwnPropertyDescriptor$7=objectGetOwnPropertyDescriptor.f;DESCRIPTORS$g&&$$1g({target:"Object",proto:!0,forced:FORCED$7},{__lookupGetter__:function(ft){var dt=toObject$5(this),vt=toPropertyKey$3(ft),Et;do if(Et=getOwnPropertyDescriptor$7(dt,vt))return Et.get;while(dt=getPrototypeOf$5(dt))}});var $$1f=_export,DESCRIPTORS$f=descriptors,FORCED$6=objectPrototypeAccessorsForced,toObject$4=toObject$t,toPropertyKey$2=toPropertyKey$8,getPrototypeOf$4=objectGetPrototypeOf$1,getOwnPropertyDescriptor$6=objectGetOwnPropertyDescriptor.f;DESCRIPTORS$f&&$$1f({target:"Object",proto:!0,forced:FORCED$6},{__lookupSetter__:function(ft){var dt=toObject$4(this),vt=toPropertyKey$2(ft),Et;do if(Et=getOwnPropertyDescriptor$6(dt,vt))return Et.set;while(dt=getPrototypeOf$4(dt))}});var $$1e=_export,isObject$o=isObject$K,onFreeze$1=internalMetadataExports.onFreeze,FREEZING$3=freezing,fails$z=fails$1m,$preventExtensions=Object.preventExtensions,FAILS_ON_PRIMITIVES$1=fails$z(function(){$preventExtensions(1)});$$1e({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES$1,sham:!FREEZING$3},{preventExtensions:function(ft){return $preventExtensions&&isObject$o(ft)?$preventExtensions(onFreeze$1(ft)):ft}});var DESCRIPTORS$e=descriptors,defineBuiltInAccessor$9=defineBuiltInAccessor$h,isObject$n=isObject$K,toObject$3=toObject$t,requireObjectCoercible$d=requireObjectCoercible$j,getPrototypeOf$3=Object.getPrototypeOf,setPrototypeOf$4=Object.setPrototypeOf,ObjectPrototype$1=Object.prototype,PROTO="__proto__";if(DESCRIPTORS$e&&getPrototypeOf$3&&setPrototypeOf$4&&!(PROTO in ObjectPrototype$1))try{defineBuiltInAccessor$9(ObjectPrototype$1,PROTO,{configurable:!0,get:function(){return getPrototypeOf$3(toObject$3(this))},set:function(ft){var dt=requireObjectCoercible$d(this);!isObject$n(ft)&&ft!==null||!isObject$n(dt)||setPrototypeOf$4(dt,ft)}})}catch{}var $$1d=_export,isObject$m=isObject$K,onFreeze=internalMetadataExports.onFreeze,FREEZING$2=freezing,fails$y=fails$1m,$seal=Object.seal,FAILS_ON_PRIMITIVES=fails$y(function(){$seal(1)});$$1d({target:"Object",stat:!0,forced:FAILS_ON_PRIMITIVES,sham:!FREEZING$2},{seal:function(ft){return $seal&&isObject$m(ft)?$seal(onFreeze(ft)):ft}});var $$1c=_export,setPrototypeOf$3=objectSetPrototypeOf$1;$$1c({target:"Object",stat:!0},{setPrototypeOf:setPrototypeOf$3});var TO_STRING_TAG_SUPPORT$1=toStringTagSupport,classof$a=classof$m,objectToString$3=TO_STRING_TAG_SUPPORT$1?{}.toString:function(){return"[object "+classof$a(this)+"]"},TO_STRING_TAG_SUPPORT=toStringTagSupport,defineBuiltIn$a=defineBuiltIn$m,toString$n=objectToString$3;TO_STRING_TAG_SUPPORT||defineBuiltIn$a(Object.prototype,"toString",toString$n,{unsafe:!0});var $$1b=_export,$values=objectToArray.values;$$1b({target:"Object",stat:!0},{values:function(ft){return $values(ft)}});var $$1a=_export,$parseFloat=numberParseFloat;$$1a({global:!0,forced:parseFloat!=$parseFloat},{parseFloat:$parseFloat});var $$19=_export,$parseInt=numberParseInt;$$19({global:!0,forced:parseInt!=$parseInt},{parseInt:$parseInt});var $TypeError$9=TypeError,validateArgumentsLength$8=function(lt,ft){if(lt<ft)throw $TypeError$9("Not enough arguments");return lt},userAgent$3=engineUserAgent,engineIsIos=/(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent$3),global$A=global$_,apply$9=functionApply$1,bind$6=functionBindContext,isCallable$b=isCallable$z,hasOwn$b=hasOwnProperty_1,fails$x=fails$1m,html$2=html$4,arraySlice$5=arraySlice$a,createElement=documentCreateElement$2,validateArgumentsLength$7=validateArgumentsLength$8,IS_IOS$1=engineIsIos,IS_NODE$6=engineIsNode,set$1=global$A.setImmediate,clear=global$A.clearImmediate,process$4=global$A.process,Dispatch=global$A.Dispatch,Function$2=global$A.Function,MessageChannel$1=global$A.MessageChannel,String$1=global$A.String,counter=0,queue$3={},ONREADYSTATECHANGE="onreadystatechange",$location,defer$1,channel,port;fails$x(function(){$location=global$A.location});var run=function(lt){if(hasOwn$b(queue$3,lt)){var ft=queue$3[lt];delete queue$3[lt],ft()}},runner=function(lt){return function(){run(lt)}},eventListener=function(lt){run(lt.data)},globalPostMessageDefer=function(lt){global$A.postMessage(String$1(lt),$location.protocol+"//"+$location.host)};(!set$1||!clear)&&(set$1=function(ft){validateArgumentsLength$7(arguments.length,1);var dt=isCallable$b(ft)?ft:Function$2(ft),vt=arraySlice$5(arguments,1);return queue$3[++counter]=function(){apply$9(dt,void 0,vt)},defer$1(counter),counter},clear=function(ft){delete queue$3[ft]},IS_NODE$6?defer$1=function(lt){process$4.nextTick(runner(lt))}:Dispatch&&Dispatch.now?defer$1=function(lt){Dispatch.now(runner(lt))}:MessageChannel$1&&!IS_IOS$1?(channel=new MessageChannel$1,port=channel.port2,channel.port1.onmessage=eventListener,defer$1=bind$6(port.postMessage,port)):global$A.addEventListener&&isCallable$b(global$A.postMessage)&&!global$A.importScripts&&$location&&$location.protocol!=="file:"&&!fails$x(globalPostMessageDefer)?(defer$1=globalPostMessageDefer,global$A.addEventListener("message",eventListener,!1)):ONREADYSTATECHANGE in createElement("script")?defer$1=function(lt){html$2.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html$2.removeChild(this),run(lt)}}:defer$1=function(lt){setTimeout(runner(lt),0)});var task$1={set:set$1,clear},Queue$2=function(){this.head=null,this.tail=null};Queue$2.prototype={add:function(lt){var ft={item:lt,next:null},dt=this.tail;dt?dt.next=ft:this.head=ft,this.tail=ft},get:function(){var lt=this.head;if(lt){var ft=this.head=lt.next;return ft===null&&(this.tail=null),lt.item}}};var queue$2=Queue$2,userAgent$2=engineUserAgent,engineIsIosPebble=/ipad|iphone|ipod/i.test(userAgent$2)&&typeof Pebble<"u",userAgent$1=engineUserAgent,engineIsWebosWebkit=/web0s(?!.*chrome)/i.test(userAgent$1),global$z=global$_,bind$5=functionBindContext,getOwnPropertyDescriptor$5=objectGetOwnPropertyDescriptor.f,macrotask=task$1.set,Queue$1=queue$2,IS_IOS=engineIsIos,IS_IOS_PEBBLE=engineIsIosPebble,IS_WEBOS_WEBKIT=engineIsWebosWebkit,IS_NODE$5=engineIsNode,MutationObserver$1=global$z.MutationObserver||global$z.WebKitMutationObserver,document$3=global$z.document,process$3=global$z.process,Promise$3=global$z.Promise,queueMicrotaskDescriptor=getOwnPropertyDescriptor$5(global$z,"queueMicrotask"),microtask$2=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,notify$1,toggle,node,promise,then;if(!microtask$2){var queue$1=new Queue$1,flush=function(){var lt,ft;for(IS_NODE$5&&(lt=process$3.domain)&&lt.exit();ft=queue$1.get();)try{ft()}catch(dt){throw queue$1.head&&notify$1(),dt}lt&&lt.enter()};!IS_IOS&&!IS_NODE$5&&!IS_WEBOS_WEBKIT&&MutationObserver$1&&document$3?(toggle=!0,node=document$3.createTextNode(""),new MutationObserver$1(flush).observe(node,{characterData:!0}),notify$1=function(){node.data=toggle=!toggle}):!IS_IOS_PEBBLE&&Promise$3&&Promise$3.resolve?(promise=Promise$3.resolve(void 0),promise.constructor=Promise$3,then=bind$5(promise.then,promise),notify$1=function(){then(flush)}):IS_NODE$5?notify$1=function(){process$3.nextTick(flush)}:(macrotask=bind$5(macrotask,global$z),notify$1=function(){macrotask(flush)}),microtask$2=function(lt){queue$1.head||notify$1(),queue$1.add(lt)}}var microtask_1=microtask$2,hostReportErrors$1=function(lt,ft){try{arguments.length==1?console.error(lt):console.error(lt,ft)}catch{}},perform$5=function(lt){try{return{error:!1,value:lt()}}catch(ft){return{error:!0,value:ft}}},global$y=global$_,promiseNativeConstructor=global$y.Promise,engineIsDeno=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",IS_DENO$2=engineIsDeno,IS_NODE$4=engineIsNode,engineIsBrowser=!IS_DENO$2&&!IS_NODE$4&&typeof window=="object"&&typeof document=="object",global$x=global$_,NativePromiseConstructor$4=promiseNativeConstructor,isCallable$a=isCallable$z,isForced$1=isForced_1,inspectSource=inspectSource$3,wellKnownSymbol$b=wellKnownSymbol$z,IS_BROWSER$1=engineIsBrowser,IS_DENO$1=engineIsDeno,V8_VERSION=engineV8Version;NativePromiseConstructor$4&&NativePromiseConstructor$4.prototype;var SPECIES$1=wellKnownSymbol$b("species"),SUBCLASSING=!1,NATIVE_PROMISE_REJECTION_EVENT$1=isCallable$a(global$x.PromiseRejectionEvent),FORCED_PROMISE_CONSTRUCTOR$5=isForced$1("Promise",function(){var lt=inspectSource(NativePromiseConstructor$4),ft=lt!==String(NativePromiseConstructor$4);if(!ft&&V8_VERSION===66)return!0;if(!V8_VERSION||V8_VERSION<51||!/native code/.test(lt)){var dt=new NativePromiseConstructor$4(function(St){St(1)}),vt=function(St){St(function(){},function(){})},Et=dt.constructor={};if(Et[SPECIES$1]=vt,SUBCLASSING=dt.then(function(){})instanceof vt,!SUBCLASSING)return!0}return!ft&&(IS_BROWSER$1||IS_DENO$1)&&!NATIVE_PROMISE_REJECTION_EVENT$1}),promiseConstructorDetection={CONSTRUCTOR:FORCED_PROMISE_CONSTRUCTOR$5,REJECTION_EVENT:NATIVE_PROMISE_REJECTION_EVENT$1,SUBCLASSING},newPromiseCapability$2={},aCallable$9=aCallable$l,$TypeError$8=TypeError,PromiseCapability=function(lt){var ft,dt;this.promise=new lt(function(vt,Et){if(ft!==void 0||dt!==void 0)throw $TypeError$8("Bad Promise constructor");ft=vt,dt=Et}),this.resolve=aCallable$9(ft),this.reject=aCallable$9(dt)};newPromiseCapability$2.f=function(lt){return new PromiseCapability(lt)};var $$18=_export,IS_NODE$3=engineIsNode,global$w=global$_,call$q=functionCall,defineBuiltIn$9=defineBuiltIn$m,setPrototypeOf$2=objectSetPrototypeOf$1,setToStringTag$4=setToStringTag$d,setSpecies$2=setSpecies$6,aCallable$8=aCallable$l,isCallable$9=isCallable$z,isObject$l=isObject$K,anInstance$6=anInstance$a,speciesConstructor$4=speciesConstructor$6,task=task$1.set,microtask$1=microtask_1,hostReportErrors=hostReportErrors$1,perform$4=perform$5,Queue=queue$2,InternalStateModule$7=internalState,NativePromiseConstructor$3=promiseNativeConstructor,PromiseConstructorDetection=promiseConstructorDetection,newPromiseCapabilityModule$5=newPromiseCapability$2,PROMISE="Promise",FORCED_PROMISE_CONSTRUCTOR$4=PromiseConstructorDetection.CONSTRUCTOR,NATIVE_PROMISE_REJECTION_EVENT=PromiseConstructorDetection.REJECTION_EVENT,NATIVE_PROMISE_SUBCLASSING=PromiseConstructorDetection.SUBCLASSING,getInternalPromiseState=InternalStateModule$7.getterFor(PROMISE),setInternalState$7=InternalStateModule$7.set,NativePromisePrototype$2=NativePromiseConstructor$3&&NativePromiseConstructor$3.prototype,PromiseConstructor=NativePromiseConstructor$3,PromisePrototype=NativePromisePrototype$2,TypeError$4=global$w.TypeError,document$2=global$w.document,process$2=global$w.process,newPromiseCapability$1=newPromiseCapabilityModule$5.f,newGenericPromiseCapability=newPromiseCapability$1,DISPATCH_EVENT=!!(document$2&&document$2.createEvent&&global$w.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,isThenable=function(lt){var ft;return isObject$l(lt)&&isCallable$9(ft=lt.then)?ft:!1},callReaction=function(lt,ft){var dt=ft.value,vt=ft.state==FULFILLED,Et=vt?lt.ok:lt.fail,St=lt.resolve,Tt=lt.reject,At=lt.domain,Ct,Rt,Dt;try{Et?(vt||(ft.rejection===UNHANDLED&&onHandleUnhandled(ft),ft.rejection=HANDLED),Et===!0?Ct=dt:(At&&At.enter(),Ct=Et(dt),At&&(At.exit(),Dt=!0)),Ct===lt.promise?Tt(TypeError$4("Promise-chain cycle")):(Rt=isThenable(Ct))?call$q(Rt,Ct,St,Tt):St(Ct)):Tt(dt)}catch(kt){At&&!Dt&&At.exit(),Tt(kt)}},notify=function(lt,ft){lt.notified||(lt.notified=!0,microtask$1(function(){for(var dt=lt.reactions,vt;vt=dt.get();)callReaction(vt,lt);lt.notified=!1,ft&&!lt.rejection&&onUnhandled(lt)}))},dispatchEvent=function(lt,ft,dt){var vt,Et;DISPATCH_EVENT?(vt=document$2.createEvent("Event"),vt.promise=ft,vt.reason=dt,vt.initEvent(lt,!1,!0),global$w.dispatchEvent(vt)):vt={promise:ft,reason:dt},!NATIVE_PROMISE_REJECTION_EVENT&&(Et=global$w["on"+lt])?Et(vt):lt===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",dt)},onUnhandled=function(lt){call$q(task,global$w,function(){var ft=lt.facade,dt=lt.value,vt=isUnhandled(lt),Et;if(vt&&(Et=perform$4(function(){IS_NODE$3?process$2.emit("unhandledRejection",dt,ft):dispatchEvent(UNHANDLED_REJECTION,ft,dt)}),lt.rejection=IS_NODE$3||isUnhandled(lt)?UNHANDLED:HANDLED,Et.error))throw Et.value})},isUnhandled=function(lt){return lt.rejection!==HANDLED&&!lt.parent},onHandleUnhandled=function(lt){call$q(task,global$w,function(){var ft=lt.facade;IS_NODE$3?process$2.emit("rejectionHandled",ft):dispatchEvent(REJECTION_HANDLED,ft,lt.value)})},bind$4=function(lt,ft,dt){return function(vt){lt(ft,vt,dt)}},internalReject=function(lt,ft,dt){lt.done||(lt.done=!0,dt&&(lt=dt),lt.value=ft,lt.state=REJECTED,notify(lt,!0))},internalResolve=function(lt,ft,dt){if(!lt.done){lt.done=!0,dt&&(lt=dt);try{if(lt.facade===ft)throw TypeError$4("Promise can't be resolved itself");var vt=isThenable(ft);vt?microtask$1(function(){var Et={done:!1};try{call$q(vt,ft,bind$4(internalResolve,Et,lt),bind$4(internalReject,Et,lt))}catch(St){internalReject(Et,St,lt)}}):(lt.value=ft,lt.state=FULFILLED,notify(lt,!1))}catch(Et){internalReject({done:!1},Et,lt)}}};if(FORCED_PROMISE_CONSTRUCTOR$4&&(PromiseConstructor=function(ft){anInstance$6(this,PromisePrototype),aCallable$8(ft),call$q(Internal,this);var dt=getInternalPromiseState(this);try{ft(bind$4(internalResolve,dt),bind$4(internalReject,dt))}catch(vt){internalReject(dt,vt)}},PromisePrototype=PromiseConstructor.prototype,Internal=function(ft){setInternalState$7(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:new Queue,rejection:!1,state:PENDING,value:void 0})},Internal.prototype=defineBuiltIn$9(PromisePrototype,"then",function(ft,dt){var vt=getInternalPromiseState(this),Et=newPromiseCapability$1(speciesConstructor$4(this,PromiseConstructor));return vt.parent=!0,Et.ok=isCallable$9(ft)?ft:!0,Et.fail=isCallable$9(dt)&&dt,Et.domain=IS_NODE$3?process$2.domain:void 0,vt.state==PENDING?vt.reactions.add(Et):microtask$1(function(){callReaction(Et,vt)}),Et.promise}),OwnPromiseCapability=function(){var lt=new Internal,ft=getInternalPromiseState(lt);this.promise=lt,this.resolve=bind$4(internalResolve,ft),this.reject=bind$4(internalReject,ft)},newPromiseCapabilityModule$5.f=newPromiseCapability$1=function(lt){return lt===PromiseConstructor||lt===PromiseWrapper?new OwnPromiseCapability(lt):newGenericPromiseCapability(lt)},isCallable$9(NativePromiseConstructor$3)&&NativePromisePrototype$2!==Object.prototype)){nativeThen=NativePromisePrototype$2.then,NATIVE_PROMISE_SUBCLASSING||defineBuiltIn$9(NativePromisePrototype$2,"then",function(ft,dt){var vt=this;return new PromiseConstructor(function(Et,St){call$q(nativeThen,vt,Et,St)}).then(ft,dt)},{unsafe:!0});try{delete NativePromisePrototype$2.constructor}catch{}setPrototypeOf$2&&setPrototypeOf$2(NativePromisePrototype$2,PromisePrototype)}$$18({global:!0,constructor:!0,wrap:!0,forced:FORCED_PROMISE_CONSTRUCTOR$4},{Promise:PromiseConstructor});setToStringTag$4(PromiseConstructor,PROMISE,!1);setSpecies$2(PROMISE);var NativePromiseConstructor$2=promiseNativeConstructor,checkCorrectnessOfIteration$1=checkCorrectnessOfIteration$4,FORCED_PROMISE_CONSTRUCTOR$3=promiseConstructorDetection.CONSTRUCTOR,promiseStaticsIncorrectIteration=FORCED_PROMISE_CONSTRUCTOR$3||!checkCorrectnessOfIteration$1(function(lt){NativePromiseConstructor$2.all(lt).then(void 0,function(){})}),$$17=_export,call$p=functionCall,aCallable$7=aCallable$l,newPromiseCapabilityModule$4=newPromiseCapability$2,perform$3=perform$5,iterate$5=iterate$a,PROMISE_STATICS_INCORRECT_ITERATION$3=promiseStaticsIncorrectIteration;$$17({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION$3},{all:function(ft){var dt=this,vt=newPromiseCapabilityModule$4.f(dt),Et=vt.resolve,St=vt.reject,Tt=perform$3(function(){var At=aCallable$7(dt.resolve),Ct=[],Rt=0,Dt=1;iterate$5(ft,function(kt){var Nt=Rt++,zt=!1;Dt++,call$p(At,dt,kt).then(function(Wt){zt||(zt=!0,Ct[Nt]=Wt,--Dt||Et(Ct))},St)}),--Dt||Et(Ct)});return Tt.error&&St(Tt.value),vt.promise}});var $$16=_export,FORCED_PROMISE_CONSTRUCTOR$2=promiseConstructorDetection.CONSTRUCTOR,NativePromiseConstructor$1=promiseNativeConstructor,getBuiltIn$a=getBuiltIn$m,isCallable$8=isCallable$z,defineBuiltIn$8=defineBuiltIn$m,NativePromisePrototype$1=NativePromiseConstructor$1&&NativePromiseConstructor$1.prototype;$$16({target:"Promise",proto:!0,forced:FORCED_PROMISE_CONSTRUCTOR$2,real:!0},{catch:function(lt){return this.then(void 0,lt)}});if(isCallable$8(NativePromiseConstructor$1)){var method$1=getBuiltIn$a("Promise").prototype.catch;NativePromisePrototype$1.catch!==method$1&&defineBuiltIn$8(NativePromisePrototype$1,"catch",method$1,{unsafe:!0})}var $$15=_export,call$o=functionCall,aCallable$6=aCallable$l,newPromiseCapabilityModule$3=newPromiseCapability$2,perform$2=perform$5,iterate$4=iterate$a,PROMISE_STATICS_INCORRECT_ITERATION$2=promiseStaticsIncorrectIteration;$$15({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION$2},{race:function(ft){var dt=this,vt=newPromiseCapabilityModule$3.f(dt),Et=vt.reject,St=perform$2(function(){var Tt=aCallable$6(dt.resolve);iterate$4(ft,function(At){call$o(Tt,dt,At).then(vt.resolve,Et)})});return St.error&&Et(St.value),vt.promise}});var $$14=_export,call$n=functionCall,newPromiseCapabilityModule$2=newPromiseCapability$2,FORCED_PROMISE_CONSTRUCTOR$1=promiseConstructorDetection.CONSTRUCTOR;$$14({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR$1},{reject:function(ft){var dt=newPromiseCapabilityModule$2.f(this);return call$n(dt.reject,void 0,ft),dt.promise}});var anObject$o=anObject$D,isObject$k=isObject$K,newPromiseCapability=newPromiseCapability$2,promiseResolve$2=function(lt,ft){if(anObject$o(lt),isObject$k(ft)&&ft.constructor===lt)return ft;var dt=newPromiseCapability.f(lt),vt=dt.resolve;return vt(ft),dt.promise},$$13=_export,getBuiltIn$9=getBuiltIn$m,FORCED_PROMISE_CONSTRUCTOR=promiseConstructorDetection.CONSTRUCTOR,promiseResolve$1=promiseResolve$2;getBuiltIn$9("Promise");$$13({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR},{resolve:function(ft){return promiseResolve$1(this,ft)}});var $$12=_export,call$m=functionCall,aCallable$5=aCallable$l,newPromiseCapabilityModule$1=newPromiseCapability$2,perform$1=perform$5,iterate$3=iterate$a,PROMISE_STATICS_INCORRECT_ITERATION$1=promiseStaticsIncorrectIteration;$$12({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION$1},{allSettled:function(ft){var dt=this,vt=newPromiseCapabilityModule$1.f(dt),Et=vt.resolve,St=vt.reject,Tt=perform$1(function(){var At=aCallable$5(dt.resolve),Ct=[],Rt=0,Dt=1;iterate$3(ft,function(kt){var Nt=Rt++,zt=!1;Dt++,call$m(At,dt,kt).then(function(Wt){zt||(zt=!0,Ct[Nt]={status:"fulfilled",value:Wt},--Dt||Et(Ct))},function(Wt){zt||(zt=!0,Ct[Nt]={status:"rejected",reason:Wt},--Dt||Et(Ct))})}),--Dt||Et(Ct)});return Tt.error&&St(Tt.value),vt.promise}});var $$11=_export,call$l=functionCall,aCallable$4=aCallable$l,getBuiltIn$8=getBuiltIn$m,newPromiseCapabilityModule=newPromiseCapability$2,perform=perform$5,iterate$2=iterate$a,PROMISE_STATICS_INCORRECT_ITERATION=promiseStaticsIncorrectIteration,PROMISE_ANY_ERROR="No one promise resolved";$$11({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION},{any:function(ft){var dt=this,vt=getBuiltIn$8("AggregateError"),Et=newPromiseCapabilityModule.f(dt),St=Et.resolve,Tt=Et.reject,At=perform(function(){var Ct=aCallable$4(dt.resolve),Rt=[],Dt=0,kt=1,Nt=!1;iterate$2(ft,function(zt){var Wt=Dt++,nr=!1;kt++,call$l(Ct,dt,zt).then(function(Ut){nr||Nt||(Nt=!0,St(Ut))},function(Ut){nr||Nt||(nr=!0,Rt[Wt]=Ut,--kt||Tt(new vt(Rt,PROMISE_ANY_ERROR)))})}),--kt||Tt(new vt(Rt,PROMISE_ANY_ERROR))});return At.error&&Tt(At.value),Et.promise}});var $$10=_export,NativePromiseConstructor=promiseNativeConstructor,fails$w=fails$1m,getBuiltIn$7=getBuiltIn$m,isCallable$7=isCallable$z,speciesConstructor$3=speciesConstructor$6,promiseResolve=promiseResolve$2,defineBuiltIn$7=defineBuiltIn$m,NativePromisePrototype=NativePromiseConstructor&&NativePromiseConstructor.prototype,NON_GENERIC=!!NativePromiseConstructor&&fails$w(function(){NativePromisePrototype.finally.call({then:function(){}},function(){})});$$10({target:"Promise",proto:!0,real:!0,forced:NON_GENERIC},{finally:function(lt){var ft=speciesConstructor$3(this,getBuiltIn$7("Promise")),dt=isCallable$7(lt);return this.then(dt?function(vt){return promiseResolve(ft,lt()).then(function(){return vt})}:lt,dt?function(vt){return promiseResolve(ft,lt()).then(function(){throw vt})}:lt)}});if(isCallable$7(NativePromiseConstructor)){var method=getBuiltIn$7("Promise").prototype.finally;NativePromisePrototype.finally!==method&&defineBuiltIn$7(NativePromisePrototype,"finally",method,{unsafe:!0})}var $$$=_export,functionApply=functionApply$1,aCallable$3=aCallable$l,anObject$n=anObject$D,fails$v=fails$1m,OPTIONAL_ARGUMENTS_LIST=!fails$v(function(){Reflect.apply(function(){})});$$$({target:"Reflect",stat:!0,forced:OPTIONAL_ARGUMENTS_LIST},{apply:function(ft,dt,vt){return functionApply(aCallable$3(ft),dt,anObject$n(vt))}});var $$_=_export,getBuiltIn$6=getBuiltIn$m,apply$8=functionApply$1,bind$3=functionBind,aConstructor$1=aConstructor$3,anObject$m=anObject$D,isObject$j=isObject$K,create$5=objectCreate$1,fails$u=fails$1m,nativeConstruct=getBuiltIn$6("Reflect","construct"),ObjectPrototype=Object.prototype,push$7=[].push,NEW_TARGET_BUG=fails$u(function(){function lt(){}return!(nativeConstruct(function(){},[],lt)instanceof lt)}),ARGS_BUG=!fails$u(function(){nativeConstruct(function(){})}),FORCED$5=NEW_TARGET_BUG||ARGS_BUG;$$_({target:"Reflect",stat:!0,forced:FORCED$5,sham:FORCED$5},{construct:function(ft,dt){aConstructor$1(ft),anObject$m(dt);var vt=arguments.length<3?ft:aConstructor$1(arguments[2]);if(ARGS_BUG&&!NEW_TARGET_BUG)return nativeConstruct(ft,dt,vt);if(ft==vt){switch(dt.length){case 0:return new ft;case 1:return new ft(dt[0]);case 2:return new ft(dt[0],dt[1]);case 3:return new ft(dt[0],dt[1],dt[2]);case 4:return new ft(dt[0],dt[1],dt[2],dt[3])}var Et=[null];return apply$8(push$7,Et,dt),new(apply$8(bind$3,ft,Et))}var St=vt.prototype,Tt=create$5(isObject$j(St)?St:ObjectPrototype),At=apply$8(ft,Tt,dt);return isObject$j(At)?At:Tt}});var $$Z=_export,DESCRIPTORS$d=descriptors,anObject$l=anObject$D,toPropertyKey$1=toPropertyKey$8,definePropertyModule$2=objectDefineProperty,fails$t=fails$1m,ERROR_INSTEAD_OF_FALSE=fails$t(function(){Reflect.defineProperty(definePropertyModule$2.f({},1,{value:1}),1,{value:2})});$$Z({target:"Reflect",stat:!0,forced:ERROR_INSTEAD_OF_FALSE,sham:!DESCRIPTORS$d},{defineProperty:function(ft,dt,vt){anObject$l(ft);var Et=toPropertyKey$1(dt);anObject$l(vt);try{return definePropertyModule$2.f(ft,Et,vt),!0}catch{return!1}}});var $$Y=_export,anObject$k=anObject$D,getOwnPropertyDescriptor$4=objectGetOwnPropertyDescriptor.f;$$Y({target:"Reflect",stat:!0},{deleteProperty:function(ft,dt){var vt=getOwnPropertyDescriptor$4(anObject$k(ft),dt);return vt&&!vt.configurable?!1:delete ft[dt]}});var hasOwn$a=hasOwnProperty_1,isDataDescriptor$2=function(lt){return lt!==void 0&&(hasOwn$a(lt,"value")||hasOwn$a(lt,"writable"))},$$X=_export,call$k=functionCall,isObject$i=isObject$K,anObject$j=anObject$D,isDataDescriptor$1=isDataDescriptor$2,getOwnPropertyDescriptorModule$3=objectGetOwnPropertyDescriptor,getPrototypeOf$2=objectGetPrototypeOf$1;function get$2(lt,ft){var dt=arguments.length<3?lt:arguments[2],vt,Et;if(anObject$j(lt)===dt)return lt[ft];if(vt=getOwnPropertyDescriptorModule$3.f(lt,ft),vt)return isDataDescriptor$1(vt)?vt.value:vt.get===void 0?void 0:call$k(vt.get,dt);if(isObject$i(Et=getPrototypeOf$2(lt)))return get$2(Et,ft,dt)}$$X({target:"Reflect",stat:!0},{get:get$2});var $$W=_export,DESCRIPTORS$c=descriptors,anObject$i=anObject$D,getOwnPropertyDescriptorModule$2=objectGetOwnPropertyDescriptor;$$W({target:"Reflect",stat:!0,sham:!DESCRIPTORS$c},{getOwnPropertyDescriptor:function(ft,dt){return getOwnPropertyDescriptorModule$2.f(anObject$i(ft),dt)}});var $$V=_export,anObject$h=anObject$D,objectGetPrototypeOf=objectGetPrototypeOf$1,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter;$$V({target:"Reflect",stat:!0,sham:!CORRECT_PROTOTYPE_GETTER},{getPrototypeOf:function(ft){return objectGetPrototypeOf(anObject$h(ft))}});var $$U=_export;$$U({target:"Reflect",stat:!0},{has:function(ft,dt){return dt in ft}});var $$T=_export,anObject$g=anObject$D,$isExtensible=objectIsExtensible;$$T({target:"Reflect",stat:!0},{isExtensible:function(ft){return anObject$g(ft),$isExtensible(ft)}});var $$S=_export,ownKeys$c=ownKeys$f;$$S({target:"Reflect",stat:!0},{ownKeys:ownKeys$c});var $$R=_export,getBuiltIn$5=getBuiltIn$m,anObject$f=anObject$D,FREEZING$1=freezing;$$R({target:"Reflect",stat:!0,sham:!FREEZING$1},{preventExtensions:function(ft){anObject$f(ft);try{var dt=getBuiltIn$5("Object","preventExtensions");return dt&&dt(ft),!0}catch{return!1}}});var $$Q=_export,call$j=functionCall,anObject$e=anObject$D,isObject$h=isObject$K,isDataDescriptor=isDataDescriptor$2,fails$s=fails$1m,definePropertyModule$1=objectDefineProperty,getOwnPropertyDescriptorModule$1=objectGetOwnPropertyDescriptor,getPrototypeOf$1=objectGetPrototypeOf$1,createPropertyDescriptor$4=createPropertyDescriptor$c;function set(lt,ft,dt){var vt=arguments.length<4?lt:arguments[3],Et=getOwnPropertyDescriptorModule$1.f(anObject$e(lt),ft),St,Tt,At;if(!Et){if(isObject$h(Tt=getPrototypeOf$1(lt)))return set(Tt,ft,dt,vt);Et=createPropertyDescriptor$4(0)}if(isDataDescriptor(Et)){if(Et.writable===!1||!isObject$h(vt))return!1;if(St=getOwnPropertyDescriptorModule$1.f(vt,ft)){if(St.get||St.set||St.writable===!1)return!1;St.value=dt,definePropertyModule$1.f(vt,ft,St)}else definePropertyModule$1.f(vt,ft,createPropertyDescriptor$4(0,dt))}else{if(At=Et.set,At===void 0)return!1;call$j(At,vt,dt)}return!0}var MS_EDGE_BUG=fails$s(function(){var lt=function(){},ft=definePropertyModule$1.f(new lt,"a",{configurable:!0});return Reflect.set(lt.prototype,"a",1,ft)!==!1});$$Q({target:"Reflect",stat:!0,forced:MS_EDGE_BUG},{set});var $$P=_export,anObject$d=anObject$D,aPossiblePrototype=aPossiblePrototype$2,objectSetPrototypeOf=objectSetPrototypeOf$1;objectSetPrototypeOf&&$$P({target:"Reflect",stat:!0},{setPrototypeOf:function(ft,dt){anObject$d(ft),aPossiblePrototype(dt);try{return objectSetPrototypeOf(ft,dt),!0}catch{return!1}}});var $$O=_export,global$v=global$_,setToStringTag$3=setToStringTag$d;$$O({global:!0},{Reflect:{}});setToStringTag$3(global$v.Reflect,"Reflect",!0);var isObject$g=isObject$K,classof$9=classofRaw$2,wellKnownSymbol$a=wellKnownSymbol$z,MATCH$3=wellKnownSymbol$a("match"),isRegexp=function(lt){var ft;return isObject$g(lt)&&((ft=lt[MATCH$3])!==void 0?!!ft:classof$9(lt)=="RegExp")},anObject$c=anObject$D,regexpFlags$1=function(){var lt=anObject$c(this),ft="";return lt.hasIndices&&(ft+="d"),lt.global&&(ft+="g"),lt.ignoreCase&&(ft+="i"),lt.multiline&&(ft+="m"),lt.dotAll&&(ft+="s"),lt.unicode&&(ft+="u"),lt.unicodeSets&&(ft+="v"),lt.sticky&&(ft+="y"),ft},call$i=functionCall,hasOwn$9=hasOwnProperty_1,isPrototypeOf$2=objectIsPrototypeOf,regExpFlags$1=regexpFlags$1,RegExpPrototype$7=RegExp.prototype,regexpGetFlags=function(lt){var ft=lt.flags;return ft===void 0&&!("flags"in RegExpPrototype$7)&&!hasOwn$9(lt,"flags")&&isPrototypeOf$2(RegExpPrototype$7,lt)?call$i(regExpFlags$1,lt):ft},fails$r=fails$1m,global$u=global$_,$RegExp$2=global$u.RegExp,UNSUPPORTED_Y$3=fails$r(function(){var lt=$RegExp$2("a","y");return lt.lastIndex=2,lt.exec("abcd")!=null}),MISSED_STICKY$2=UNSUPPORTED_Y$3||fails$r(function(){return!$RegExp$2("a","y").sticky}),BROKEN_CARET=UNSUPPORTED_Y$3||fails$r(function(){var lt=$RegExp$2("^r","gy");return lt.lastIndex=2,lt.exec("str")!=null}),regexpStickyHelpers={BROKEN_CARET,MISSED_STICKY:MISSED_STICKY$2,UNSUPPORTED_Y:UNSUPPORTED_Y$3},fails$q=fails$1m,global$t=global$_,$RegExp$1=global$t.RegExp,regexpUnsupportedDotAll=fails$q(function(){var lt=$RegExp$1(".","s");return!(lt.dotAll&&lt.exec(`
`)&&lt.flags==="s")}),fails$p=fails$1m,global$s=global$_,$RegExp=global$s.RegExp,regexpUnsupportedNcg=fails$p(function(){var lt=$RegExp("(?<a>b)","g");return lt.exec("b").groups.a!=="b"||"b".replace(lt,"$<a>c")!=="bc"}),DESCRIPTORS$b=descriptors,global$r=global$_,uncurryThis$z=functionUncurryThis,isForced=isForced_1,inheritIfRequired$2=inheritIfRequired$6,createNonEnumerableProperty$5=createNonEnumerableProperty$f,getOwnPropertyNames$1=objectGetOwnPropertyNames.f,isPrototypeOf$1=objectIsPrototypeOf,isRegExp$4=isRegexp,toString$m=toString$z,getRegExpFlags$4=regexpGetFlags,stickyHelpers$2=regexpStickyHelpers,proxyAccessor=proxyAccessor$2,defineBuiltIn$6=defineBuiltIn$m,fails$o=fails$1m,hasOwn$8=hasOwnProperty_1,enforceInternalState$2=internalState.enforce,setSpecies$1=setSpecies$6,wellKnownSymbol$9=wellKnownSymbol$z,UNSUPPORTED_DOT_ALL$2=regexpUnsupportedDotAll,UNSUPPORTED_NCG$1=regexpUnsupportedNcg,MATCH$2=wellKnownSymbol$9("match"),NativeRegExp=global$r.RegExp,RegExpPrototype$6=NativeRegExp.prototype,SyntaxError$2=global$r.SyntaxError,exec$6=uncurryThis$z(RegExpPrototype$6.exec),charAt$b=uncurryThis$z("".charAt),replace$7=uncurryThis$z("".replace),stringIndexOf$5=uncurryThis$z("".indexOf),stringSlice$b=uncurryThis$z("".slice),IS_NCG=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,re1=/a/g,re2=/a/g,CORRECT_NEW=new NativeRegExp(re1)!==re1,MISSED_STICKY$1=stickyHelpers$2.MISSED_STICKY,UNSUPPORTED_Y$2=stickyHelpers$2.UNSUPPORTED_Y,BASE_FORCED=DESCRIPTORS$b&&(!CORRECT_NEW||MISSED_STICKY$1||UNSUPPORTED_DOT_ALL$2||UNSUPPORTED_NCG$1||fails$o(function(){return re2[MATCH$2]=!1,NativeRegExp(re1)!=re1||NativeRegExp(re2)==re2||NativeRegExp(re1,"i")!="/a/i"})),handleDotAll=function(lt){for(var ft=lt.length,dt=0,vt="",Et=!1,St;dt<=ft;dt++){if(St=charAt$b(lt,dt),St==="\\"){vt+=St+charAt$b(lt,++dt);continue}!Et&&St==="."?vt+="[\\s\\S]":(St==="["?Et=!0:St==="]"&&(Et=!1),vt+=St)}return vt},handleNCG=function(lt){for(var ft=lt.length,dt=0,vt="",Et=[],St={},Tt=!1,At=!1,Ct=0,Rt="",Dt;dt<=ft;dt++){if(Dt=charAt$b(lt,dt),Dt==="\\")Dt=Dt+charAt$b(lt,++dt);else if(Dt==="]")Tt=!1;else if(!Tt)switch(!0){case Dt==="[":Tt=!0;break;case Dt==="(":exec$6(IS_NCG,stringSlice$b(lt,dt+1))&&(dt+=2,At=!0),vt+=Dt,Ct++;continue;case(Dt===">"&&At):if(Rt===""||hasOwn$8(St,Rt))throw new SyntaxError$2("Invalid capture group name");St[Rt]=!0,Et[Et.length]=[Rt,Ct],At=!1,Rt="";continue}At?Rt+=Dt:vt+=Dt}return[vt,Et]};if(isForced("RegExp",BASE_FORCED)){for(var RegExpWrapper=function(ft,dt){var vt=isPrototypeOf$1(RegExpPrototype$6,this),Et=isRegExp$4(ft),St=dt===void 0,Tt=[],At=ft,Ct,Rt,Dt,kt,Nt,zt;if(!vt&&Et&&St&&ft.constructor===RegExpWrapper)return ft;if((Et||isPrototypeOf$1(RegExpPrototype$6,ft))&&(ft=ft.source,St&&(dt=getRegExpFlags$4(At))),ft=ft===void 0?"":toString$m(ft),dt=dt===void 0?"":toString$m(dt),At=ft,UNSUPPORTED_DOT_ALL$2&&"dotAll"in re1&&(Rt=!!dt&&stringIndexOf$5(dt,"s")>-1,Rt&&(dt=replace$7(dt,/s/g,""))),Ct=dt,MISSED_STICKY$1&&"sticky"in re1&&(Dt=!!dt&&stringIndexOf$5(dt,"y")>-1,Dt&&UNSUPPORTED_Y$2&&(dt=replace$7(dt,/y/g,""))),UNSUPPORTED_NCG$1&&(kt=handleNCG(ft),ft=kt[0],Tt=kt[1]),Nt=inheritIfRequired$2(NativeRegExp(ft,dt),vt?this:RegExpPrototype$6,RegExpWrapper),(Rt||Dt||Tt.length)&&(zt=enforceInternalState$2(Nt),Rt&&(zt.dotAll=!0,zt.raw=RegExpWrapper(handleDotAll(ft),Ct)),Dt&&(zt.sticky=!0),Tt.length&&(zt.groups=Tt)),ft!==At)try{createNonEnumerableProperty$5(Nt,"source",At===""?"(?:)":At)}catch{}return Nt},keys$5=getOwnPropertyNames$1(NativeRegExp),index$2=0;keys$5.length>index$2;)proxyAccessor(RegExpWrapper,NativeRegExp,keys$5[index$2++]);RegExpPrototype$6.constructor=RegExpWrapper,RegExpWrapper.prototype=RegExpPrototype$6,defineBuiltIn$6(global$r,"RegExp",RegExpWrapper,{constructor:!0})}setSpecies$1("RegExp");var DESCRIPTORS$a=descriptors,UNSUPPORTED_DOT_ALL$1=regexpUnsupportedDotAll,classof$8=classofRaw$2,defineBuiltInAccessor$8=defineBuiltInAccessor$h,getInternalState$6=internalState.get,RegExpPrototype$5=RegExp.prototype,$TypeError$7=TypeError;DESCRIPTORS$a&&UNSUPPORTED_DOT_ALL$1&&defineBuiltInAccessor$8(RegExpPrototype$5,"dotAll",{configurable:!0,get:function(){if(this!==RegExpPrototype$5){if(classof$8(this)==="RegExp")return!!getInternalState$6(this).dotAll;throw $TypeError$7("Incompatible receiver, RegExp required")}}});var call$h=functionCall,uncurryThis$y=functionUncurryThis,toString$l=toString$z,regexpFlags=regexpFlags$1,stickyHelpers$1=regexpStickyHelpers,shared=sharedExports,create$4=objectCreate$1,getInternalState$5=internalState.get,UNSUPPORTED_DOT_ALL=regexpUnsupportedDotAll,UNSUPPORTED_NCG=regexpUnsupportedNcg,nativeReplace=shared("native-string-replace",String.prototype.replace),nativeExec=RegExp.prototype.exec,patchedExec=nativeExec,charAt$a=uncurryThis$y("".charAt),indexOf$1=uncurryThis$y("".indexOf),replace$6=uncurryThis$y("".replace),stringSlice$a=uncurryThis$y("".slice),UPDATES_LAST_INDEX_WRONG=function(){var lt=/a/,ft=/b*/g;return call$h(nativeExec,lt,"a"),call$h(nativeExec,ft,"a"),lt.lastIndex!==0||ft.lastIndex!==0}(),UNSUPPORTED_Y$1=stickyHelpers$1.BROKEN_CARET,NPCG_INCLUDED=/()??/.exec("")[1]!==void 0,PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED||UNSUPPORTED_Y$1||UNSUPPORTED_DOT_ALL||UNSUPPORTED_NCG;PATCH&&(patchedExec=function(ft){var dt=this,vt=getInternalState$5(dt),Et=toString$l(ft),St=vt.raw,Tt,At,Ct,Rt,Dt,kt,Nt;if(St)return St.lastIndex=dt.lastIndex,Tt=call$h(patchedExec,St,Et),dt.lastIndex=St.lastIndex,Tt;var zt=vt.groups,Wt=UNSUPPORTED_Y$1&&dt.sticky,nr=call$h(regexpFlags,dt),Ut=dt.source,Ht=0,Bt=Et;if(Wt&&(nr=replace$6(nr,"y",""),indexOf$1(nr,"g")===-1&&(nr+="g"),Bt=stringSlice$a(Et,dt.lastIndex),dt.lastIndex>0&&(!dt.multiline||dt.multiline&&charAt$a(Et,dt.lastIndex-1)!==`
`)&&(Ut="(?: "+Ut+")",Bt=" "+Bt,Ht++),At=new RegExp("^(?:"+Ut+")",nr)),NPCG_INCLUDED&&(At=new RegExp("^"+Ut+"$(?!\\s)",nr)),UPDATES_LAST_INDEX_WRONG&&(Ct=dt.lastIndex),Rt=call$h(nativeExec,Wt?At:dt,Bt),Wt?Rt?(Rt.input=stringSlice$a(Rt.input,Ht),Rt[0]=stringSlice$a(Rt[0],Ht),Rt.index=dt.lastIndex,dt.lastIndex+=Rt[0].length):dt.lastIndex=0:UPDATES_LAST_INDEX_WRONG&&Rt&&(dt.lastIndex=dt.global?Rt.index+Rt[0].length:Ct),NPCG_INCLUDED&&Rt&&Rt.length>1&&call$h(nativeReplace,Rt[0],At,function(){for(Dt=1;Dt<arguments.length-2;Dt++)arguments[Dt]===void 0&&(Rt[Dt]=void 0)}),Rt&&zt)for(Rt.groups=kt=create$4(null),Dt=0;Dt<zt.length;Dt++)Nt=zt[Dt],kt[Nt[0]]=Rt[Nt[1]];return Rt});var regexpExec$3=patchedExec,$$N=_export,exec$5=regexpExec$3;$$N({target:"RegExp",proto:!0,forced:/./.exec!==exec$5},{exec:exec$5});var global$q=global$_,DESCRIPTORS$9=descriptors,defineBuiltInAccessor$7=defineBuiltInAccessor$h,regExpFlags=regexpFlags$1,fails$n=fails$1m,RegExp$2=global$q.RegExp,RegExpPrototype$4=RegExp$2.prototype,FORCED$4=DESCRIPTORS$9&&fails$n(function(){var lt=!0;try{RegExp$2(".","d")}catch{lt=!1}var ft={},dt="",vt=lt?"dgimsy":"gimsy",Et=function(Ct,Rt){Object.defineProperty(ft,Ct,{get:function(){return dt+=Rt,!0}})},St={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};lt&&(St.hasIndices="d");for(var Tt in St)Et(Tt,St[Tt]);var At=Object.getOwnPropertyDescriptor(RegExpPrototype$4,"flags").get.call(ft);return At!==vt||dt!==vt});FORCED$4&&defineBuiltInAccessor$7(RegExpPrototype$4,"flags",{configurable:!0,get:regExpFlags});var DESCRIPTORS$8=descriptors,MISSED_STICKY=regexpStickyHelpers.MISSED_STICKY,classof$7=classofRaw$2,defineBuiltInAccessor$6=defineBuiltInAccessor$h,getInternalState$4=internalState.get,RegExpPrototype$3=RegExp.prototype,$TypeError$6=TypeError;DESCRIPTORS$8&&MISSED_STICKY&&defineBuiltInAccessor$6(RegExpPrototype$3,"sticky",{configurable:!0,get:function(){if(this!==RegExpPrototype$3){if(classof$7(this)==="RegExp")return!!getInternalState$4(this).sticky;throw $TypeError$6("Incompatible receiver, RegExp required")}}});var $$M=_export,call$g=functionCall,isCallable$6=isCallable$z,anObject$b=anObject$D,toString$k=toString$z,DELEGATES_TO_EXEC=function(){var lt=!1,ft=/[ac]/;return ft.exec=function(){return lt=!0,/./.exec.apply(this,arguments)},ft.test("abc")===!0&&lt}(),nativeTest=/./.test;$$M({target:"RegExp",proto:!0,forced:!DELEGATES_TO_EXEC},{test:function(lt){var ft=anObject$b(this),dt=toString$k(lt),vt=ft.exec;if(!isCallable$6(vt))return call$g(nativeTest,ft,dt);var Et=call$g(vt,ft,dt);return Et===null?!1:(anObject$b(Et),!0)}});var PROPER_FUNCTION_NAME$1=functionName.PROPER,defineBuiltIn$5=defineBuiltIn$m,anObject$a=anObject$D,$toString$2=toString$z,fails$m=fails$1m,getRegExpFlags$3=regexpGetFlags,TO_STRING="toString",RegExpPrototype$2=RegExp.prototype,nativeToString=RegExpPrototype$2[TO_STRING],NOT_GENERIC=fails$m(function(){return nativeToString.call({source:"a",flags:"b"})!="/a/b"}),INCORRECT_NAME=PROPER_FUNCTION_NAME$1&&nativeToString.name!=TO_STRING;(NOT_GENERIC||INCORRECT_NAME)&&defineBuiltIn$5(RegExp.prototype,TO_STRING,function(){var ft=anObject$a(this),dt=$toString$2(ft.source),vt=$toString$2(getRegExpFlags$3(ft));return"/"+dt+"/"+vt},{unsafe:!0});var collection$2=collection$4,collectionStrong=collectionStrong$2;collection$2("Set",function(lt){return function(){return lt(this,arguments.length?arguments[0]:void 0)}},collectionStrong);var $$L=_export,uncurryThis$x=functionUncurryThis,requireObjectCoercible$c=requireObjectCoercible$j,toIntegerOrInfinity$6=toIntegerOrInfinity$l,toString$j=toString$z,fails$l=fails$1m,charAt$9=uncurryThis$x("".charAt),FORCED$3=fails$l(function(){return"𠮷".at(-2)!=="\uD842"});$$L({target:"String",proto:!0,forced:FORCED$3},{at:function(ft){var dt=toString$j(requireObjectCoercible$c(this)),vt=dt.length,Et=toIntegerOrInfinity$6(ft),St=Et>=0?Et:vt+Et;return St<0||St>=vt?void 0:charAt$9(dt,St)}});var uncurryThis$w=functionUncurryThis,toIntegerOrInfinity$5=toIntegerOrInfinity$l,toString$i=toString$z,requireObjectCoercible$b=requireObjectCoercible$j,charAt$8=uncurryThis$w("".charAt),charCodeAt$2=uncurryThis$w("".charCodeAt),stringSlice$9=uncurryThis$w("".slice),createMethod=function(lt){return function(ft,dt){var vt=toString$i(requireObjectCoercible$b(ft)),Et=toIntegerOrInfinity$5(dt),St=vt.length,Tt,At;return Et<0||Et>=St?lt?"":void 0:(Tt=charCodeAt$2(vt,Et),Tt<55296||Tt>56319||Et+1===St||(At=charCodeAt$2(vt,Et+1))<56320||At>57343?lt?charAt$8(vt,Et):Tt:lt?stringSlice$9(vt,Et,Et+2):(Tt-55296<<10)+(At-56320)+65536)}},stringMultibyte={codeAt:createMethod(!1),charAt:createMethod(!0)},$$K=_export,codeAt$1=stringMultibyte.codeAt;$$K({target:"String",proto:!0},{codePointAt:function(ft){return codeAt$1(this,ft)}});var isRegExp$3=isRegexp,$TypeError$5=TypeError,notARegexp=function(lt){if(isRegExp$3(lt))throw $TypeError$5("The method doesn't accept regular expressions");return lt},wellKnownSymbol$8=wellKnownSymbol$z,MATCH$1=wellKnownSymbol$8("match"),correctIsRegexpLogic=function(lt){var ft=/./;try{"/./"[lt](ft)}catch{try{return ft[MATCH$1]=!1,"/./"[lt](ft)}catch{}}return!1},$$J=_export,uncurryThis$v=functionUncurryThisClause,getOwnPropertyDescriptor$3=objectGetOwnPropertyDescriptor.f,toLength$7=toLength$d,toString$h=toString$z,notARegExp$2=notARegexp,requireObjectCoercible$a=requireObjectCoercible$j,correctIsRegExpLogic$2=correctIsRegexpLogic,nativeEndsWith=uncurryThis$v("".endsWith),slice$2=uncurryThis$v("".slice),min$4=Math.min,CORRECT_IS_REGEXP_LOGIC$1=correctIsRegExpLogic$2("endsWith"),MDN_POLYFILL_BUG$1=!CORRECT_IS_REGEXP_LOGIC$1&&!!function(){var lt=getOwnPropertyDescriptor$3(String.prototype,"endsWith");return lt&&!lt.writable}();$$J({target:"String",proto:!0,forced:!MDN_POLYFILL_BUG$1&&!CORRECT_IS_REGEXP_LOGIC$1},{endsWith:function(ft){var dt=toString$h(requireObjectCoercible$a(this));notARegExp$2(ft);var vt=arguments.length>1?arguments[1]:void 0,Et=dt.length,St=vt===void 0?Et:min$4(toLength$7(vt),Et),Tt=toString$h(ft);return nativeEndsWith?nativeEndsWith(dt,Tt,St):slice$2(dt,St-Tt.length,St)===Tt}});var $$I=_export,uncurryThis$u=functionUncurryThis,toAbsoluteIndex$1=toAbsoluteIndex$a,$RangeError$3=RangeError,fromCharCode$3=String.fromCharCode,$fromCodePoint=String.fromCodePoint,join$5=uncurryThis$u([].join),INCORRECT_LENGTH=!!$fromCodePoint&&$fromCodePoint.length!=1;$$I({target:"String",stat:!0,arity:1,forced:INCORRECT_LENGTH},{fromCodePoint:function(ft){for(var dt=[],vt=arguments.length,Et=0,St;vt>Et;){if(St=+arguments[Et++],toAbsoluteIndex$1(St,1114111)!==St)throw $RangeError$3(St+" is not a valid code point");dt[Et]=St<65536?fromCharCode$3(St):fromCharCode$3(((St-=65536)>>10)+55296,St%1024+56320)}return join$5(dt,"")}});var $$H=_export,uncurryThis$t=functionUncurryThis,notARegExp$1=notARegexp,requireObjectCoercible$9=requireObjectCoercible$j,toString$g=toString$z,correctIsRegExpLogic$1=correctIsRegexpLogic,stringIndexOf$4=uncurryThis$t("".indexOf);$$H({target:"String",proto:!0,forced:!correctIsRegExpLogic$1("includes")},{includes:function(ft){return!!~stringIndexOf$4(toString$g(requireObjectCoercible$9(this)),toString$g(notARegExp$1(ft)),arguments.length>1?arguments[1]:void 0)}});var charAt$7=stringMultibyte.charAt,toString$f=toString$z,InternalStateModule$6=internalState,defineIterator=iteratorDefine,createIterResultObject$1=createIterResultObject$4,STRING_ITERATOR="String Iterator",setInternalState$6=InternalStateModule$6.set,getInternalState$3=InternalStateModule$6.getterFor(STRING_ITERATOR);defineIterator(String,"String",function(lt){setInternalState$6(this,{type:STRING_ITERATOR,string:toString$f(lt),index:0})},function(){var ft=getInternalState$3(this),dt=ft.string,vt=ft.index,Et;return vt>=dt.length?createIterResultObject$1(void 0,!0):(Et=charAt$7(dt,vt),ft.index+=Et.length,createIterResultObject$1(Et,!1))});var uncurryThis$s=functionUncurryThisClause,defineBuiltIn$4=defineBuiltIn$m,regexpExec$2=regexpExec$3,fails$k=fails$1m,wellKnownSymbol$7=wellKnownSymbol$z,createNonEnumerableProperty$4=createNonEnumerableProperty$f,SPECIES=wellKnownSymbol$7("species"),RegExpPrototype$1=RegExp.prototype,fixRegexpWellKnownSymbolLogic=function(lt,ft,dt,vt){var Et=wellKnownSymbol$7(lt),St=!fails$k(function(){var Rt={};return Rt[Et]=function(){return 7},""[lt](Rt)!=7}),Tt=St&&!fails$k(function(){var Rt=!1,Dt=/a/;return lt==="split"&&(Dt={},Dt.constructor={},Dt.constructor[SPECIES]=function(){return Dt},Dt.flags="",Dt[Et]=/./[Et]),Dt.exec=function(){return Rt=!0,null},Dt[Et](""),!Rt});if(!St||!Tt||dt){var At=uncurryThis$s(/./[Et]),Ct=ft(Et,""[lt],function(Rt,Dt,kt,Nt,zt){var Wt=uncurryThis$s(Rt),nr=Dt.exec;return nr===regexpExec$2||nr===RegExpPrototype$1.exec?St&&!zt?{done:!0,value:At(Dt,kt,Nt)}:{done:!0,value:Wt(kt,Dt,Nt)}:{done:!1}});defineBuiltIn$4(String.prototype,lt,Ct[0]),defineBuiltIn$4(RegExpPrototype$1,Et,Ct[1])}vt&&createNonEnumerableProperty$4(RegExpPrototype$1[Et],"sham",!0)},charAt$6=stringMultibyte.charAt,advanceStringIndex$4=function(lt,ft,dt){return ft+(dt?charAt$6(lt,ft).length:1)},call$f=functionCall,anObject$9=anObject$D,isCallable$5=isCallable$z,classof$6=classofRaw$2,regexpExec$1=regexpExec$3,$TypeError$4=TypeError,regexpExecAbstract=function(lt,ft){var dt=lt.exec;if(isCallable$5(dt)){var vt=call$f(dt,lt,ft);return vt!==null&&anObject$9(vt),vt}if(classof$6(lt)==="RegExp")return call$f(regexpExec$1,lt,ft);throw $TypeError$4("RegExp#exec called on incompatible receiver")},call$e=functionCall,fixRegExpWellKnownSymbolLogic$3=fixRegexpWellKnownSymbolLogic,anObject$8=anObject$D,isNullOrUndefined$7=isNullOrUndefined$e,toLength$6=toLength$d,toString$e=toString$z,requireObjectCoercible$8=requireObjectCoercible$j,getMethod$5=getMethod$9,advanceStringIndex$3=advanceStringIndex$4,regExpExec$3=regexpExecAbstract;fixRegExpWellKnownSymbolLogic$3("match",function(lt,ft,dt){return[function(Et){var St=requireObjectCoercible$8(this),Tt=isNullOrUndefined$7(Et)?void 0:getMethod$5(Et,lt);return Tt?call$e(Tt,Et,St):new RegExp(Et)[lt](toString$e(St))},function(vt){var Et=anObject$8(this),St=toString$e(vt),Tt=dt(ft,Et,St);if(Tt.done)return Tt.value;if(!Et.global)return regExpExec$3(Et,St);var At=Et.unicode;Et.lastIndex=0;for(var Ct=[],Rt=0,Dt;(Dt=regExpExec$3(Et,St))!==null;){var kt=toString$e(Dt[0]);Ct[Rt]=kt,kt===""&&(Et.lastIndex=advanceStringIndex$3(St,toLength$6(Et.lastIndex),At)),Rt++}return Rt===0?null:Ct}]});var $$G=_export,call$d=functionCall,uncurryThis$r=functionUncurryThisClause,createIteratorConstructor$1=iteratorCreateConstructor,createIterResultObject=createIterResultObject$4,requireObjectCoercible$7=requireObjectCoercible$j,toLength$5=toLength$d,toString$d=toString$z,anObject$7=anObject$D,isNullOrUndefined$6=isNullOrUndefined$e,classof$5=classofRaw$2,isRegExp$2=isRegexp,getRegExpFlags$2=regexpGetFlags,getMethod$4=getMethod$9,defineBuiltIn$3=defineBuiltIn$m,fails$j=fails$1m,wellKnownSymbol$6=wellKnownSymbol$z,speciesConstructor$2=speciesConstructor$6,advanceStringIndex$2=advanceStringIndex$4,regExpExec$2=regexpExecAbstract,InternalStateModule$5=internalState,IS_PURE$1=isPure,MATCH_ALL=wellKnownSymbol$6("matchAll"),REGEXP_STRING="RegExp String",REGEXP_STRING_ITERATOR=REGEXP_STRING+" Iterator",setInternalState$5=InternalStateModule$5.set,getInternalState$2=InternalStateModule$5.getterFor(REGEXP_STRING_ITERATOR),RegExpPrototype=RegExp.prototype,$TypeError$3=TypeError,stringIndexOf$3=uncurryThis$r("".indexOf),nativeMatchAll=uncurryThis$r("".matchAll),WORKS_WITH_NON_GLOBAL_REGEX=!!nativeMatchAll&&!fails$j(function(){nativeMatchAll("a",/./)}),$RegExpStringIterator=createIteratorConstructor$1(function(ft,dt,vt,Et){setInternalState$5(this,{type:REGEXP_STRING_ITERATOR,regexp:ft,string:dt,global:vt,unicode:Et,done:!1})},REGEXP_STRING,function(){var ft=getInternalState$2(this);if(ft.done)return createIterResultObject(void 0,!0);var dt=ft.regexp,vt=ft.string,Et=regExpExec$2(dt,vt);return Et===null?(ft.done=!0,createIterResultObject(void 0,!0)):ft.global?(toString$d(Et[0])===""&&(dt.lastIndex=advanceStringIndex$2(vt,toLength$5(dt.lastIndex),ft.unicode)),createIterResultObject(Et,!1)):(ft.done=!0,createIterResultObject(Et,!1))}),$matchAll=function(lt){var ft=anObject$7(this),dt=toString$d(lt),vt=speciesConstructor$2(ft,RegExp),Et=toString$d(getRegExpFlags$2(ft)),St,Tt,At;return St=new vt(vt===RegExp?ft.source:ft,Et),Tt=!!~stringIndexOf$3(Et,"g"),At=!!~stringIndexOf$3(Et,"u"),St.lastIndex=toLength$5(ft.lastIndex),new $RegExpStringIterator(St,dt,Tt,At)};$$G({target:"String",proto:!0,forced:WORKS_WITH_NON_GLOBAL_REGEX},{matchAll:function(ft){var dt=requireObjectCoercible$7(this),vt,Et,St,Tt;if(isNullOrUndefined$6(ft)){if(WORKS_WITH_NON_GLOBAL_REGEX)return nativeMatchAll(dt,ft)}else{if(isRegExp$2(ft)&&(vt=toString$d(requireObjectCoercible$7(getRegExpFlags$2(ft))),!~stringIndexOf$3(vt,"g")))throw $TypeError$3("`.matchAll` does not allow non-global regexes");if(WORKS_WITH_NON_GLOBAL_REGEX)return nativeMatchAll(dt,ft);if(St=getMethod$4(ft,MATCH_ALL),St===void 0&&IS_PURE$1&&classof$5(ft)=="RegExp"&&(St=$matchAll),St)return call$d(St,ft,dt)}return Et=toString$d(dt),Tt=new RegExp(ft,"g"),Tt[MATCH_ALL](Et)}});MATCH_ALL in RegExpPrototype||defineBuiltIn$3(RegExpPrototype,MATCH_ALL,$matchAll);var userAgent=engineUserAgent,stringPadWebkitBug=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(userAgent),$$F=_export,$padEnd=stringPad.end,WEBKIT_BUG$1=stringPadWebkitBug;$$F({target:"String",proto:!0,forced:WEBKIT_BUG$1},{padEnd:function(ft){return $padEnd(this,ft,arguments.length>1?arguments[1]:void 0)}});var $$E=_export,$padStart=stringPad.start,WEBKIT_BUG=stringPadWebkitBug;$$E({target:"String",proto:!0,forced:WEBKIT_BUG},{padStart:function(ft){return $padStart(this,ft,arguments.length>1?arguments[1]:void 0)}});var $$D=_export,uncurryThis$q=functionUncurryThis,toIndexedObject$1=toIndexedObject$j,toObject$2=toObject$t,toString$c=toString$z,lengthOfArrayLike$4=lengthOfArrayLike$t,push$6=uncurryThis$q([].push),join$4=uncurryThis$q([].join);$$D({target:"String",stat:!0},{raw:function(ft){var dt=toIndexedObject$1(toObject$2(ft).raw),vt=lengthOfArrayLike$4(dt);if(!vt)return"";for(var Et=arguments.length,St=[],Tt=0;;){if(push$6(St,toString$c(dt[Tt++])),Tt===vt)return join$4(St,"");Tt<Et&&push$6(St,toString$c(arguments[Tt]))}}});var $$C=_export,repeat=stringRepeat;$$C({target:"String",proto:!0},{repeat});var uncurryThis$p=functionUncurryThis,toObject$1=toObject$t,floor$3=Math.floor,charAt$5=uncurryThis$p("".charAt),replace$5=uncurryThis$p("".replace),stringSlice$8=uncurryThis$p("".slice),SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d{1,2})/g,getSubstitution$2=function(lt,ft,dt,vt,Et,St){var Tt=dt+lt.length,At=vt.length,Ct=SUBSTITUTION_SYMBOLS_NO_NAMED;return Et!==void 0&&(Et=toObject$1(Et),Ct=SUBSTITUTION_SYMBOLS),replace$5(St,Ct,function(Rt,Dt){var kt;switch(charAt$5(Dt,0)){case"$":return"$";case"&":return lt;case"`":return stringSlice$8(ft,0,dt);case"'":return stringSlice$8(ft,Tt);case"<":kt=Et[stringSlice$8(Dt,1,-1)];break;default:var Nt=+Dt;if(Nt===0)return Rt;if(Nt>At){var zt=floor$3(Nt/10);return zt===0?Rt:zt<=At?vt[zt-1]===void 0?charAt$5(Dt,1):vt[zt-1]+charAt$5(Dt,1):Rt}kt=vt[Nt-1]}return kt===void 0?"":kt})},apply$7=functionApply$1,call$c=functionCall,uncurryThis$o=functionUncurryThis,fixRegExpWellKnownSymbolLogic$2=fixRegexpWellKnownSymbolLogic,fails$i=fails$1m,anObject$6=anObject$D,isCallable$4=isCallable$z,isNullOrUndefined$5=isNullOrUndefined$e,toIntegerOrInfinity$4=toIntegerOrInfinity$l,toLength$4=toLength$d,toString$b=toString$z,requireObjectCoercible$6=requireObjectCoercible$j,advanceStringIndex$1=advanceStringIndex$4,getMethod$3=getMethod$9,getSubstitution$1=getSubstitution$2,regExpExec$1=regexpExecAbstract,wellKnownSymbol$5=wellKnownSymbol$z,REPLACE$1=wellKnownSymbol$5("replace"),max$2=Math.max,min$3=Math.min,concat=uncurryThis$o([].concat),push$5=uncurryThis$o([].push),stringIndexOf$2=uncurryThis$o("".indexOf),stringSlice$7=uncurryThis$o("".slice),maybeToString=function(lt){return lt===void 0?lt:String(lt)},REPLACE_KEEPS_$0=function(){return"a".replace(/./,"$0")==="$0"}(),REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE=function(){return/./[REPLACE$1]?/./[REPLACE$1]("a","$0")==="":!1}(),REPLACE_SUPPORTS_NAMED_GROUPS=!fails$i(function(){var lt=/./;return lt.exec=function(){var ft=[];return ft.groups={a:"7"},ft},"".replace(lt,"$<a>")!=="7"});fixRegExpWellKnownSymbolLogic$2("replace",function(lt,ft,dt){var vt=REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE?"$":"$0";return[function(St,Tt){var At=requireObjectCoercible$6(this),Ct=isNullOrUndefined$5(St)?void 0:getMethod$3(St,REPLACE$1);return Ct?call$c(Ct,St,At,Tt):call$c(ft,toString$b(At),St,Tt)},function(Et,St){var Tt=anObject$6(this),At=toString$b(Et);if(typeof St=="string"&&stringIndexOf$2(St,vt)===-1&&stringIndexOf$2(St,"$<")===-1){var Ct=dt(ft,Tt,At,St);if(Ct.done)return Ct.value}var Rt=isCallable$4(St);Rt||(St=toString$b(St));var Dt=Tt.global;if(Dt){var kt=Tt.unicode;Tt.lastIndex=0}for(var Nt=[];;){var zt=regExpExec$1(Tt,At);if(zt===null||(push$5(Nt,zt),!Dt))break;var Wt=toString$b(zt[0]);Wt===""&&(Tt.lastIndex=advanceStringIndex$1(At,toLength$4(Tt.lastIndex),kt))}for(var nr="",Ut=0,Ht=0;Ht<Nt.length;Ht++){zt=Nt[Ht];for(var Bt=toString$b(zt[0]),Ft=max$2(min$3(toIntegerOrInfinity$4(zt.index),At.length),0),tr=[],cr=1;cr<zt.length;cr++)push$5(tr,maybeToString(zt[cr]));var Kt=zt.groups;if(Rt){var Zt=concat([Bt],tr,Ft,At);Kt!==void 0&&push$5(Zt,Kt);var rr=toString$b(apply$7(St,void 0,Zt))}else rr=getSubstitution$1(Bt,At,Ft,tr,Kt,St);Ft>=Ut&&(nr+=stringSlice$7(At,Ut,Ft)+rr,Ut=Ft+Bt.length)}return nr+stringSlice$7(At,Ut)}]},!REPLACE_SUPPORTS_NAMED_GROUPS||!REPLACE_KEEPS_$0||REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);var $$B=_export,call$b=functionCall,uncurryThis$n=functionUncurryThis,requireObjectCoercible$5=requireObjectCoercible$j,isCallable$3=isCallable$z,isNullOrUndefined$4=isNullOrUndefined$e,isRegExp$1=isRegexp,toString$a=toString$z,getMethod$2=getMethod$9,getRegExpFlags$1=regexpGetFlags,getSubstitution=getSubstitution$2,wellKnownSymbol$4=wellKnownSymbol$z,REPLACE=wellKnownSymbol$4("replace"),$TypeError$2=TypeError,indexOf=uncurryThis$n("".indexOf);uncurryThis$n("".replace);var stringSlice$6=uncurryThis$n("".slice),max$1=Math.max,stringIndexOf$1=function(lt,ft,dt){return dt>lt.length?-1:ft===""?dt:indexOf(lt,ft,dt)};$$B({target:"String",proto:!0},{replaceAll:function(ft,dt){var vt=requireObjectCoercible$5(this),Et,St,Tt,At,Ct,Rt,Dt,kt,Nt,zt=0,Wt=0,nr="";if(!isNullOrUndefined$4(ft)){if(Et=isRegExp$1(ft),Et&&(St=toString$a(requireObjectCoercible$5(getRegExpFlags$1(ft))),!~indexOf(St,"g")))throw $TypeError$2("`.replaceAll` does not allow non-global regexes");if(Tt=getMethod$2(ft,REPLACE),Tt)return call$b(Tt,ft,vt,dt)}for(At=toString$a(vt),Ct=toString$a(ft),Rt=isCallable$3(dt),Rt||(dt=toString$a(dt)),Dt=Ct.length,kt=max$1(1,Dt),zt=stringIndexOf$1(At,Ct,0);zt!==-1;)Nt=Rt?toString$a(dt(Ct,zt,At)):getSubstitution(Ct,At,zt,[],void 0,dt),nr+=stringSlice$6(At,Wt,zt)+Nt,Wt=zt+Dt,zt=stringIndexOf$1(At,Ct,zt+kt);return Wt<At.length&&(nr+=stringSlice$6(At,Wt)),nr}});var call$a=functionCall,fixRegExpWellKnownSymbolLogic$1=fixRegexpWellKnownSymbolLogic,anObject$5=anObject$D,isNullOrUndefined$3=isNullOrUndefined$e,requireObjectCoercible$4=requireObjectCoercible$j,sameValue=sameValue$1,toString$9=toString$z,getMethod$1=getMethod$9,regExpExec=regexpExecAbstract;fixRegExpWellKnownSymbolLogic$1("search",function(lt,ft,dt){return[function(Et){var St=requireObjectCoercible$4(this),Tt=isNullOrUndefined$3(Et)?void 0:getMethod$1(Et,lt);return Tt?call$a(Tt,Et,St):new RegExp(Et)[lt](toString$9(St))},function(vt){var Et=anObject$5(this),St=toString$9(vt),Tt=dt(ft,Et,St);if(Tt.done)return Tt.value;var At=Et.lastIndex;sameValue(At,0)||(Et.lastIndex=0);var Ct=regExpExec(Et,St);return sameValue(Et.lastIndex,At)||(Et.lastIndex=At),Ct===null?-1:Ct.index}]});var apply$6=functionApply$1,call$9=functionCall,uncurryThis$m=functionUncurryThis,fixRegExpWellKnownSymbolLogic=fixRegexpWellKnownSymbolLogic,anObject$4=anObject$D,isNullOrUndefined$2=isNullOrUndefined$e,isRegExp=isRegexp,requireObjectCoercible$3=requireObjectCoercible$j,speciesConstructor$1=speciesConstructor$6,advanceStringIndex=advanceStringIndex$4,toLength$3=toLength$d,toString$8=toString$z,getMethod=getMethod$9,arraySlice$4=arraySliceSimple,callRegExpExec=regexpExecAbstract,regexpExec=regexpExec$3,stickyHelpers=regexpStickyHelpers,fails$h=fails$1m,UNSUPPORTED_Y=stickyHelpers.UNSUPPORTED_Y,MAX_UINT32=4294967295,min$2=Math.min,$push=[].push,exec$4=uncurryThis$m(/./.exec),push$4=uncurryThis$m($push),stringSlice$5=uncurryThis$m("".slice),SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails$h(function(){var lt=/(?:)/,ft=lt.exec;lt.exec=function(){return ft.apply(this,arguments)};var dt="ab".split(lt);return dt.length!==2||dt[0]!=="a"||dt[1]!=="b"});fixRegExpWellKnownSymbolLogic("split",function(lt,ft,dt){var vt;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?vt=function(Et,St){var Tt=toString$8(requireObjectCoercible$3(this)),At=St===void 0?MAX_UINT32:St>>>0;if(At===0)return[];if(Et===void 0)return[Tt];if(!isRegExp(Et))return call$9(ft,Tt,Et,At);for(var Ct=[],Rt=(Et.ignoreCase?"i":"")+(Et.multiline?"m":"")+(Et.unicode?"u":"")+(Et.sticky?"y":""),Dt=0,kt=new RegExp(Et.source,Rt+"g"),Nt,zt,Wt;(Nt=call$9(regexpExec,kt,Tt))&&(zt=kt.lastIndex,!(zt>Dt&&(push$4(Ct,stringSlice$5(Tt,Dt,Nt.index)),Nt.length>1&&Nt.index<Tt.length&&apply$6($push,Ct,arraySlice$4(Nt,1)),Wt=Nt[0].length,Dt=zt,Ct.length>=At)));)kt.lastIndex===Nt.index&&kt.lastIndex++;return Dt===Tt.length?(Wt||!exec$4(kt,""))&&push$4(Ct,""):push$4(Ct,stringSlice$5(Tt,Dt)),Ct.length>At?arraySlice$4(Ct,0,At):Ct}:"0".split(void 0,0).length?vt=function(Et,St){return Et===void 0&&St===0?[]:call$9(ft,this,Et,St)}:vt=ft,[function(St,Tt){var At=requireObjectCoercible$3(this),Ct=isNullOrUndefined$2(St)?void 0:getMethod(St,lt);return Ct?call$9(Ct,St,At,Tt):call$9(vt,toString$8(At),St,Tt)},function(Et,St){var Tt=anObject$4(this),At=toString$8(Et),Ct=dt(vt,Tt,At,St,vt!==ft);if(Ct.done)return Ct.value;var Rt=speciesConstructor$1(Tt,RegExp),Dt=Tt.unicode,kt=(Tt.ignoreCase?"i":"")+(Tt.multiline?"m":"")+(Tt.unicode?"u":"")+(UNSUPPORTED_Y?"g":"y"),Nt=new Rt(UNSUPPORTED_Y?"^(?:"+Tt.source+")":Tt,kt),zt=St===void 0?MAX_UINT32:St>>>0;if(zt===0)return[];if(At.length===0)return callRegExpExec(Nt,At)===null?[At]:[];for(var Wt=0,nr=0,Ut=[];nr<At.length;){Nt.lastIndex=UNSUPPORTED_Y?0:nr;var Ht=callRegExpExec(Nt,UNSUPPORTED_Y?stringSlice$5(At,nr):At),Bt;if(Ht===null||(Bt=min$2(toLength$3(Nt.lastIndex+(UNSUPPORTED_Y?nr:0)),At.length))===Wt)nr=advanceStringIndex(At,nr,Dt);else{if(push$4(Ut,stringSlice$5(At,Wt,nr)),Ut.length===zt)return Ut;for(var Ft=1;Ft<=Ht.length-1;Ft++)if(push$4(Ut,Ht[Ft]),Ut.length===zt)return Ut;nr=Wt=Bt}}return push$4(Ut,stringSlice$5(At,Wt)),Ut}]},!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC,UNSUPPORTED_Y);var $$A=_export,uncurryThis$l=functionUncurryThisClause,getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f,toLength$2=toLength$d,toString$7=toString$z,notARegExp=notARegexp,requireObjectCoercible$2=requireObjectCoercible$j,correctIsRegExpLogic=correctIsRegexpLogic,nativeStartsWith=uncurryThis$l("".startsWith),stringSlice$4=uncurryThis$l("".slice),min$1=Math.min,CORRECT_IS_REGEXP_LOGIC=correctIsRegExpLogic("startsWith"),MDN_POLYFILL_BUG=!CORRECT_IS_REGEXP_LOGIC&&!!function(){var lt=getOwnPropertyDescriptor$2(String.prototype,"startsWith");return lt&&!lt.writable}();$$A({target:"String",proto:!0,forced:!MDN_POLYFILL_BUG&&!CORRECT_IS_REGEXP_LOGIC},{startsWith:function(ft){var dt=toString$7(requireObjectCoercible$2(this));notARegExp(ft);var vt=toLength$2(min$1(arguments.length>1?arguments[1]:void 0,dt.length)),Et=toString$7(ft);return nativeStartsWith?nativeStartsWith(dt,Et,vt):stringSlice$4(dt,vt,vt+Et.length)===Et}});var $$z=_export,uncurryThis$k=functionUncurryThis,requireObjectCoercible$1=requireObjectCoercible$j,toIntegerOrInfinity$3=toIntegerOrInfinity$l,toString$6=toString$z,stringSlice$3=uncurryThis$k("".slice),max=Math.max,min=Math.min,FORCED$2=!"".substr||"ab".substr(-1)!=="b";$$z({target:"String",proto:!0,forced:FORCED$2},{substr:function(ft,dt){var vt=toString$6(requireObjectCoercible$1(this)),Et=vt.length,St=toIntegerOrInfinity$3(ft),Tt,At;return St===1/0&&(St=0),St<0&&(St=max(Et+St,0)),Tt=dt===void 0?Et:toIntegerOrInfinity$3(dt),Tt<=0||Tt===1/0?"":(At=min(St+Tt,Et),St>=At?"":stringSlice$3(vt,St,At))}});var PROPER_FUNCTION_NAME=functionName.PROPER,fails$g=fails$1m,whitespaces$1=whitespaces$5,non="​᠎",stringTrimForced=function(lt){return fails$g(function(){return!!whitespaces$1[lt]()||non[lt]()!==non||PROPER_FUNCTION_NAME&&whitespaces$1[lt].name!==lt})},$$y=_export,$trim=stringTrim$1.trim,forcedStringTrimMethod$2=stringTrimForced;$$y({target:"String",proto:!0,forced:forcedStringTrimMethod$2("trim")},{trim:function(){return $trim(this)}});var $trimEnd=stringTrim$1.end,forcedStringTrimMethod$1=stringTrimForced,stringTrimEnd=forcedStringTrimMethod$1("trimEnd")?function(){return $trimEnd(this)}:"".trimEnd,$$x=_export,trimEnd$1=stringTrimEnd;$$x({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==trimEnd$1},{trimRight:trimEnd$1});var $$w=_export,trimEnd=stringTrimEnd;$$w({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==trimEnd},{trimEnd});var $trimStart=stringTrim$1.start,forcedStringTrimMethod=stringTrimForced,stringTrimStart=forcedStringTrimMethod("trimStart")?function(){return $trimStart(this)}:"".trimStart,$$v=_export,trimStart$1=stringTrimStart;$$v({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==trimStart$1},{trimLeft:trimStart$1});var $$u=_export,trimStart=stringTrimStart;$$u({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==trimStart},{trimStart});var uncurryThis$j=functionUncurryThis,requireObjectCoercible=requireObjectCoercible$j,toString$5=toString$z,quot=/"/g,replace$4=uncurryThis$j("".replace),createHtml=function(lt,ft,dt,vt){var Et=toString$5(requireObjectCoercible(lt)),St="<"+ft;return dt!==""&&(St+=" "+dt+'="'+replace$4(toString$5(vt),quot,"&quot;")+'"'),St+">"+Et+"</"+ft+">"},fails$f=fails$1m,stringHtmlForced=function(lt){return fails$f(function(){var ft=""[lt]('"');return ft!==ft.toLowerCase()||ft.split('"').length>3})},$$t=_export,createHTML$c=createHtml,forcedStringHTMLMethod$c=stringHtmlForced;$$t({target:"String",proto:!0,forced:forcedStringHTMLMethod$c("anchor")},{anchor:function(ft){return createHTML$c(this,"a","name",ft)}});var $$s=_export,createHTML$b=createHtml,forcedStringHTMLMethod$b=stringHtmlForced;$$s({target:"String",proto:!0,forced:forcedStringHTMLMethod$b("big")},{big:function(){return createHTML$b(this,"big","","")}});var $$r=_export,createHTML$a=createHtml,forcedStringHTMLMethod$a=stringHtmlForced;$$r({target:"String",proto:!0,forced:forcedStringHTMLMethod$a("blink")},{blink:function(){return createHTML$a(this,"blink","","")}});var $$q=_export,createHTML$9=createHtml,forcedStringHTMLMethod$9=stringHtmlForced;$$q({target:"String",proto:!0,forced:forcedStringHTMLMethod$9("bold")},{bold:function(){return createHTML$9(this,"b","","")}});var $$p=_export,createHTML$8=createHtml,forcedStringHTMLMethod$8=stringHtmlForced;$$p({target:"String",proto:!0,forced:forcedStringHTMLMethod$8("fixed")},{fixed:function(){return createHTML$8(this,"tt","","")}});var $$o=_export,createHTML$7=createHtml,forcedStringHTMLMethod$7=stringHtmlForced;$$o({target:"String",proto:!0,forced:forcedStringHTMLMethod$7("fontcolor")},{fontcolor:function(ft){return createHTML$7(this,"font","color",ft)}});var $$n=_export,createHTML$6=createHtml,forcedStringHTMLMethod$6=stringHtmlForced;$$n({target:"String",proto:!0,forced:forcedStringHTMLMethod$6("fontsize")},{fontsize:function(ft){return createHTML$6(this,"font","size",ft)}});var $$m=_export,createHTML$5=createHtml,forcedStringHTMLMethod$5=stringHtmlForced;$$m({target:"String",proto:!0,forced:forcedStringHTMLMethod$5("italics")},{italics:function(){return createHTML$5(this,"i","","")}});var $$l=_export,createHTML$4=createHtml,forcedStringHTMLMethod$4=stringHtmlForced;$$l({target:"String",proto:!0,forced:forcedStringHTMLMethod$4("link")},{link:function(ft){return createHTML$4(this,"a","href",ft)}});var $$k=_export,createHTML$3=createHtml,forcedStringHTMLMethod$3=stringHtmlForced;$$k({target:"String",proto:!0,forced:forcedStringHTMLMethod$3("small")},{small:function(){return createHTML$3(this,"small","","")}});var $$j=_export,createHTML$2=createHtml,forcedStringHTMLMethod$2=stringHtmlForced;$$j({target:"String",proto:!0,forced:forcedStringHTMLMethod$2("strike")},{strike:function(){return createHTML$2(this,"strike","","")}});var $$i=_export,createHTML$1=createHtml,forcedStringHTMLMethod$1=stringHtmlForced;$$i({target:"String",proto:!0,forced:forcedStringHTMLMethod$1("sub")},{sub:function(){return createHTML$1(this,"sub","","")}});var $$h=_export,createHTML=createHtml,forcedStringHTMLMethod=stringHtmlForced;$$h({target:"String",proto:!0,forced:forcedStringHTMLMethod("sup")},{sup:function(){return createHTML(this,"sup","","")}});var typedArrayConstructorExports={},typedArrayConstructor={get exports(){return typedArrayConstructorExports},set exports(lt){typedArrayConstructorExports=lt}},global$p=global$_,fails$e=fails$1m,checkCorrectnessOfIteration=checkCorrectnessOfIteration$4,NATIVE_ARRAY_BUFFER_VIEWS$1=arrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS,ArrayBuffer$2=global$p.ArrayBuffer,Int8Array$3=global$p.Int8Array,typedArrayConstructorsRequireWrappers=!NATIVE_ARRAY_BUFFER_VIEWS$1||!fails$e(function(){Int8Array$3(1)})||!fails$e(function(){new Int8Array$3(-1)})||!checkCorrectnessOfIteration(function(lt){new Int8Array$3,new Int8Array$3(null),new Int8Array$3(1.5),new Int8Array$3(lt)},!0)||fails$e(function(){return new Int8Array$3(new ArrayBuffer$2(2),1,void 0).length!==1}),toIntegerOrInfinity$2=toIntegerOrInfinity$l,$RangeError$2=RangeError,toPositiveInteger$1=function(lt){var ft=toIntegerOrInfinity$2(lt);if(ft<0)throw $RangeError$2("The argument can't be less than 0");return ft},toPositiveInteger=toPositiveInteger$1,$RangeError$1=RangeError,toOffset$2=function(lt,ft){var dt=toPositiveInteger(lt);if(dt%ft)throw $RangeError$1("Wrong offset");return dt},classof$4=classof$m,isBigIntArray$2=function(lt){var ft=classof$4(lt);return ft=="BigInt64Array"||ft=="BigUint64Array"},toPrimitive=toPrimitive$4,$TypeError$1=TypeError,toBigInt$3=function(lt){var ft=toPrimitive(lt,"number");if(typeof ft=="number")throw $TypeError$1("Can't convert number to bigint");return BigInt(ft)},bind$2=functionBindContext,call$8=functionCall,aConstructor=aConstructor$3,toObject=toObject$t,lengthOfArrayLike$3=lengthOfArrayLike$t,getIterator$1=getIterator$4,getIteratorMethod$1=getIteratorMethod$5,isArrayIteratorMethod=isArrayIteratorMethod$3,isBigIntArray$1=isBigIntArray$2,aTypedArrayConstructor$3=arrayBufferViewCore.aTypedArrayConstructor,toBigInt$2=toBigInt$3,typedArrayFrom$2=function(ft){var dt=aConstructor(this),vt=toObject(ft),Et=arguments.length,St=Et>1?arguments[1]:void 0,Tt=St!==void 0,At=getIteratorMethod$1(vt),Ct,Rt,Dt,kt,Nt,zt,Wt,nr;if(At&&!isArrayIteratorMethod(At))for(Wt=getIterator$1(vt,At),nr=Wt.next,vt=[];!(zt=call$8(nr,Wt)).done;)vt.push(zt.value);for(Tt&&Et>2&&(St=bind$2(St,arguments[2])),Rt=lengthOfArrayLike$3(vt),Dt=new(aTypedArrayConstructor$3(dt))(Rt),kt=isBigIntArray$1(Dt),Ct=0;Rt>Ct;Ct++)Nt=Tt?St(vt[Ct],Ct):vt[Ct],Dt[Ct]=kt?toBigInt$2(Nt):+Nt;return Dt},$$g=_export,global$o=global$_,call$7=functionCall,DESCRIPTORS$7=descriptors,TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS$2=typedArrayConstructorsRequireWrappers,ArrayBufferViewCore$u=arrayBufferViewCore,ArrayBufferModule=arrayBuffer,anInstance$5=anInstance$a,createPropertyDescriptor$3=createPropertyDescriptor$c,createNonEnumerableProperty$3=createNonEnumerableProperty$f,isIntegralNumber=isIntegralNumber$3,toLength$1=toLength$d,toIndex=toIndex$2,toOffset$1=toOffset$2,toPropertyKey=toPropertyKey$8,hasOwn$7=hasOwnProperty_1,classof$3=classof$m,isObject$f=isObject$K,isSymbol$4=isSymbol$a,create$3=objectCreate$1,isPrototypeOf=objectIsPrototypeOf,setPrototypeOf$1=objectSetPrototypeOf$1,getOwnPropertyNames=objectGetOwnPropertyNames.f,typedArrayFrom$1=typedArrayFrom$2,forEach$3=arrayIteration.forEach,setSpecies=setSpecies$6,defineBuiltInAccessor$5=defineBuiltInAccessor$h,definePropertyModule=objectDefineProperty,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,InternalStateModule$4=internalState,inheritIfRequired$1=inheritIfRequired$6,getInternalState$1=InternalStateModule$4.get,setInternalState$4=InternalStateModule$4.set,enforceInternalState$1=InternalStateModule$4.enforce,nativeDefineProperty=definePropertyModule.f,nativeGetOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f,round=Math.round,RangeError$3=global$o.RangeError,ArrayBuffer$1=ArrayBufferModule.ArrayBuffer,ArrayBufferPrototype=ArrayBuffer$1.prototype,DataView$3=ArrayBufferModule.DataView,NATIVE_ARRAY_BUFFER_VIEWS=ArrayBufferViewCore$u.NATIVE_ARRAY_BUFFER_VIEWS,TYPED_ARRAY_TAG=ArrayBufferViewCore$u.TYPED_ARRAY_TAG,TypedArray=ArrayBufferViewCore$u.TypedArray,TypedArrayPrototype$1=ArrayBufferViewCore$u.TypedArrayPrototype,aTypedArrayConstructor$2=ArrayBufferViewCore$u.aTypedArrayConstructor,isTypedArray$2=ArrayBufferViewCore$u.isTypedArray,BYTES_PER_ELEMENT="BYTES_PER_ELEMENT",WRONG_LENGTH="Wrong length",fromList=function(lt,ft){aTypedArrayConstructor$2(lt);for(var dt=0,vt=ft.length,Et=new lt(vt);vt>dt;)Et[dt]=ft[dt++];return Et},addGetter=function(lt,ft){defineBuiltInAccessor$5(lt,ft,{configurable:!0,get:function(){return getInternalState$1(this)[ft]}})},isArrayBuffer=function(lt){var ft;return isPrototypeOf(ArrayBufferPrototype,lt)||(ft=classof$3(lt))=="ArrayBuffer"||ft=="SharedArrayBuffer"},isTypedArrayIndex=function(lt,ft){return isTypedArray$2(lt)&&!isSymbol$4(ft)&&ft in lt&&isIntegralNumber(+ft)&&ft>=0},wrappedGetOwnPropertyDescriptor=function(ft,dt){return dt=toPropertyKey(dt),isTypedArrayIndex(ft,dt)?createPropertyDescriptor$3(2,ft[dt]):nativeGetOwnPropertyDescriptor(ft,dt)},wrappedDefineProperty=function(ft,dt,vt){return dt=toPropertyKey(dt),isTypedArrayIndex(ft,dt)&&isObject$f(vt)&&hasOwn$7(vt,"value")&&!hasOwn$7(vt,"get")&&!hasOwn$7(vt,"set")&&!vt.configurable&&(!hasOwn$7(vt,"writable")||vt.writable)&&(!hasOwn$7(vt,"enumerable")||vt.enumerable)?(ft[dt]=vt.value,ft):nativeDefineProperty(ft,dt,vt)};DESCRIPTORS$7?(NATIVE_ARRAY_BUFFER_VIEWS||(getOwnPropertyDescriptorModule.f=wrappedGetOwnPropertyDescriptor,definePropertyModule.f=wrappedDefineProperty,addGetter(TypedArrayPrototype$1,"buffer"),addGetter(TypedArrayPrototype$1,"byteOffset"),addGetter(TypedArrayPrototype$1,"byteLength"),addGetter(TypedArrayPrototype$1,"length")),$$g({target:"Object",stat:!0,forced:!NATIVE_ARRAY_BUFFER_VIEWS},{getOwnPropertyDescriptor:wrappedGetOwnPropertyDescriptor,defineProperty:wrappedDefineProperty}),typedArrayConstructor.exports=function(lt,ft,dt){var vt=lt.match(/\d+/)[0]/8,Et=lt+(dt?"Clamped":"")+"Array",St="get"+lt,Tt="set"+lt,At=global$o[Et],Ct=At,Rt=Ct&&Ct.prototype,Dt={},kt=function(nr,Ut){var Ht=getInternalState$1(nr);return Ht.view[St](Ut*vt+Ht.byteOffset,!0)},Nt=function(nr,Ut,Ht){var Bt=getInternalState$1(nr);dt&&(Ht=(Ht=round(Ht))<0?0:Ht>255?255:Ht&255),Bt.view[Tt](Ut*vt+Bt.byteOffset,Ht,!0)},zt=function(nr,Ut){nativeDefineProperty(nr,Ut,{get:function(){return kt(this,Ut)},set:function(Ht){return Nt(this,Ut,Ht)},enumerable:!0})};NATIVE_ARRAY_BUFFER_VIEWS?TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS$2&&(Ct=ft(function(nr,Ut,Ht,Bt){return anInstance$5(nr,Rt),inheritIfRequired$1(function(){return isObject$f(Ut)?isArrayBuffer(Ut)?Bt!==void 0?new At(Ut,toOffset$1(Ht,vt),Bt):Ht!==void 0?new At(Ut,toOffset$1(Ht,vt)):new At(Ut):isTypedArray$2(Ut)?fromList(Ct,Ut):call$7(typedArrayFrom$1,Ct,Ut):new At(toIndex(Ut))}(),nr,Ct)}),setPrototypeOf$1&&setPrototypeOf$1(Ct,TypedArray),forEach$3(getOwnPropertyNames(At),function(nr){nr in Ct||createNonEnumerableProperty$3(Ct,nr,At[nr])}),Ct.prototype=Rt):(Ct=ft(function(nr,Ut,Ht,Bt){anInstance$5(nr,Rt);var Ft=0,tr=0,cr,Kt,Zt;if(!isObject$f(Ut))Zt=toIndex(Ut),Kt=Zt*vt,cr=new ArrayBuffer$1(Kt);else if(isArrayBuffer(Ut)){cr=Ut,tr=toOffset$1(Ht,vt);var rr=Ut.byteLength;if(Bt===void 0){if(rr%vt||(Kt=rr-tr,Kt<0))throw RangeError$3(WRONG_LENGTH)}else if(Kt=toLength$1(Bt)*vt,Kt+tr>rr)throw RangeError$3(WRONG_LENGTH);Zt=Kt/vt}else return isTypedArray$2(Ut)?fromList(Ct,Ut):call$7(typedArrayFrom$1,Ct,Ut);for(setInternalState$4(nr,{buffer:cr,byteOffset:tr,byteLength:Kt,length:Zt,view:new DataView$3(cr)});Ft<Zt;)zt(nr,Ft++)}),setPrototypeOf$1&&setPrototypeOf$1(Ct,TypedArray),Rt=Ct.prototype=create$3(TypedArrayPrototype$1)),Rt.constructor!==Ct&&createNonEnumerableProperty$3(Rt,"constructor",Ct),enforceInternalState$1(Rt).TypedArrayConstructor=Ct,TYPED_ARRAY_TAG&&createNonEnumerableProperty$3(Rt,TYPED_ARRAY_TAG,Et);var Wt=Ct!=At;Dt[Et]=Ct,$$g({global:!0,constructor:!0,forced:Wt,sham:!NATIVE_ARRAY_BUFFER_VIEWS},Dt),BYTES_PER_ELEMENT in Ct||createNonEnumerableProperty$3(Ct,BYTES_PER_ELEMENT,vt),BYTES_PER_ELEMENT in Rt||createNonEnumerableProperty$3(Rt,BYTES_PER_ELEMENT,vt),setSpecies(Et)}):typedArrayConstructor.exports=function(){};var createTypedArrayConstructor$8=typedArrayConstructorExports;createTypedArrayConstructor$8("Float32",function(lt){return function(dt,vt,Et){return lt(this,dt,vt,Et)}});var createTypedArrayConstructor$7=typedArrayConstructorExports;createTypedArrayConstructor$7("Float64",function(lt){return function(dt,vt,Et){return lt(this,dt,vt,Et)}});var createTypedArrayConstructor$6=typedArrayConstructorExports;createTypedArrayConstructor$6("Int8",function(lt){return function(dt,vt,Et){return lt(this,dt,vt,Et)}});var createTypedArrayConstructor$5=typedArrayConstructorExports;createTypedArrayConstructor$5("Int16",function(lt){return function(dt,vt,Et){return lt(this,dt,vt,Et)}});var createTypedArrayConstructor$4=typedArrayConstructorExports;createTypedArrayConstructor$4("Int32",function(lt){return function(dt,vt,Et){return lt(this,dt,vt,Et)}});var createTypedArrayConstructor$3=typedArrayConstructorExports;createTypedArrayConstructor$3("Uint8",function(lt){return function(dt,vt,Et){return lt(this,dt,vt,Et)}});var createTypedArrayConstructor$2=typedArrayConstructorExports;createTypedArrayConstructor$2("Uint8",function(lt){return function(dt,vt,Et){return lt(this,dt,vt,Et)}},!0);var createTypedArrayConstructor$1=typedArrayConstructorExports;createTypedArrayConstructor$1("Uint16",function(lt){return function(dt,vt,Et){return lt(this,dt,vt,Et)}});var createTypedArrayConstructor=typedArrayConstructorExports;createTypedArrayConstructor("Uint32",function(lt){return function(dt,vt,Et){return lt(this,dt,vt,Et)}});var ArrayBufferViewCore$t=arrayBufferViewCore,lengthOfArrayLike$2=lengthOfArrayLike$t,toIntegerOrInfinity$1=toIntegerOrInfinity$l,aTypedArray$r=ArrayBufferViewCore$t.aTypedArray,exportTypedArrayMethod$s=ArrayBufferViewCore$t.exportTypedArrayMethod;exportTypedArrayMethod$s("at",function(ft){var dt=aTypedArray$r(this),vt=lengthOfArrayLike$2(dt),Et=toIntegerOrInfinity$1(ft),St=Et>=0?Et:vt+Et;return St<0||St>=vt?void 0:dt[St]});var uncurryThis$i=functionUncurryThis,ArrayBufferViewCore$s=arrayBufferViewCore,$ArrayCopyWithin=arrayCopyWithin,u$ArrayCopyWithin=uncurryThis$i($ArrayCopyWithin),aTypedArray$q=ArrayBufferViewCore$s.aTypedArray,exportTypedArrayMethod$r=ArrayBufferViewCore$s.exportTypedArrayMethod;exportTypedArrayMethod$r("copyWithin",function(ft,dt){return u$ArrayCopyWithin(aTypedArray$q(this),ft,dt,arguments.length>2?arguments[2]:void 0)});var ArrayBufferViewCore$r=arrayBufferViewCore,$every=arrayIteration.every,aTypedArray$p=ArrayBufferViewCore$r.aTypedArray,exportTypedArrayMethod$q=ArrayBufferViewCore$r.exportTypedArrayMethod;exportTypedArrayMethod$q("every",function(ft){return $every(aTypedArray$p(this),ft,arguments.length>1?arguments[1]:void 0)});var ArrayBufferViewCore$q=arrayBufferViewCore,$fill=arrayFill$1,toBigInt$1=toBigInt$3,classof$2=classof$m,call$6=functionCall,uncurryThis$h=functionUncurryThis,fails$d=fails$1m,aTypedArray$o=ArrayBufferViewCore$q.aTypedArray,exportTypedArrayMethod$p=ArrayBufferViewCore$q.exportTypedArrayMethod,slice$1=uncurryThis$h("".slice),CONVERSION_BUG=fails$d(function(){var lt=0;return new Int8Array(2).fill({valueOf:function(){return lt++}}),lt!==1});exportTypedArrayMethod$p("fill",function(ft){var dt=arguments.length;aTypedArray$o(this);var vt=slice$1(classof$2(this),0,3)==="Big"?toBigInt$1(ft):+ft;return call$6($fill,this,vt,dt>1?arguments[1]:void 0,dt>2?arguments[2]:void 0)},CONVERSION_BUG);var ArrayBufferViewCore$p=arrayBufferViewCore,speciesConstructor=speciesConstructor$6,aTypedArrayConstructor$1=ArrayBufferViewCore$p.aTypedArrayConstructor,getTypedArrayConstructor$3=ArrayBufferViewCore$p.getTypedArrayConstructor,typedArraySpeciesConstructor$4=function(lt){return aTypedArrayConstructor$1(speciesConstructor(lt,getTypedArrayConstructor$3(lt)))},arrayFromConstructorAndList$1=arrayFromConstructorAndList$3,typedArraySpeciesConstructor$3=typedArraySpeciesConstructor$4,typedArrayFromSpeciesAndList=function(lt,ft){return arrayFromConstructorAndList$1(typedArraySpeciesConstructor$3(lt),ft)},ArrayBufferViewCore$o=arrayBufferViewCore,$filter=arrayIteration.filter,fromSpeciesAndList=typedArrayFromSpeciesAndList,aTypedArray$n=ArrayBufferViewCore$o.aTypedArray,exportTypedArrayMethod$o=ArrayBufferViewCore$o.exportTypedArrayMethod;exportTypedArrayMethod$o("filter",function(ft){var dt=$filter(aTypedArray$n(this),ft,arguments.length>1?arguments[1]:void 0);return fromSpeciesAndList(this,dt)});var ArrayBufferViewCore$n=arrayBufferViewCore,$find=arrayIteration.find,aTypedArray$m=ArrayBufferViewCore$n.aTypedArray,exportTypedArrayMethod$n=ArrayBufferViewCore$n.exportTypedArrayMethod;exportTypedArrayMethod$n("find",function(ft){return $find(aTypedArray$m(this),ft,arguments.length>1?arguments[1]:void 0)});var ArrayBufferViewCore$m=arrayBufferViewCore,$findIndex=arrayIteration.findIndex,aTypedArray$l=ArrayBufferViewCore$m.aTypedArray,exportTypedArrayMethod$m=ArrayBufferViewCore$m.exportTypedArrayMethod;exportTypedArrayMethod$m("findIndex",function(ft){return $findIndex(aTypedArray$l(this),ft,arguments.length>1?arguments[1]:void 0)});var ArrayBufferViewCore$l=arrayBufferViewCore,$findLast=arrayIterationFromLast.findLast,aTypedArray$k=ArrayBufferViewCore$l.aTypedArray,exportTypedArrayMethod$l=ArrayBufferViewCore$l.exportTypedArrayMethod;exportTypedArrayMethod$l("findLast",function(ft){return $findLast(aTypedArray$k(this),ft,arguments.length>1?arguments[1]:void 0)});var ArrayBufferViewCore$k=arrayBufferViewCore,$findLastIndex=arrayIterationFromLast.findLastIndex,aTypedArray$j=ArrayBufferViewCore$k.aTypedArray,exportTypedArrayMethod$k=ArrayBufferViewCore$k.exportTypedArrayMethod;exportTypedArrayMethod$k("findLastIndex",function(ft){return $findLastIndex(aTypedArray$j(this),ft,arguments.length>1?arguments[1]:void 0)});var ArrayBufferViewCore$j=arrayBufferViewCore,$forEach=arrayIteration.forEach,aTypedArray$i=ArrayBufferViewCore$j.aTypedArray,exportTypedArrayMethod$j=ArrayBufferViewCore$j.exportTypedArrayMethod;exportTypedArrayMethod$j("forEach",function(ft){$forEach(aTypedArray$i(this),ft,arguments.length>1?arguments[1]:void 0)});var TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS$1=typedArrayConstructorsRequireWrappers,exportTypedArrayStaticMethod$1=arrayBufferViewCore.exportTypedArrayStaticMethod,typedArrayFrom=typedArrayFrom$2;exportTypedArrayStaticMethod$1("from",typedArrayFrom,TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS$1);var ArrayBufferViewCore$i=arrayBufferViewCore,$includes=arrayIncludes.includes,aTypedArray$h=ArrayBufferViewCore$i.aTypedArray,exportTypedArrayMethod$i=ArrayBufferViewCore$i.exportTypedArrayMethod;exportTypedArrayMethod$i("includes",function(ft){return $includes(aTypedArray$h(this),ft,arguments.length>1?arguments[1]:void 0)});var ArrayBufferViewCore$h=arrayBufferViewCore,$indexOf=arrayIncludes.indexOf,aTypedArray$g=ArrayBufferViewCore$h.aTypedArray,exportTypedArrayMethod$h=ArrayBufferViewCore$h.exportTypedArrayMethod;exportTypedArrayMethod$h("indexOf",function(ft){return $indexOf(aTypedArray$g(this),ft,arguments.length>1?arguments[1]:void 0)});var global$n=global$_,fails$c=fails$1m,uncurryThis$g=functionUncurryThis,ArrayBufferViewCore$g=arrayBufferViewCore,ArrayIterators=es_array_iterator,wellKnownSymbol$3=wellKnownSymbol$z,ITERATOR$3=wellKnownSymbol$3("iterator"),Uint8Array$4=global$n.Uint8Array,arrayValues=uncurryThis$g(ArrayIterators.values),arrayKeys=uncurryThis$g(ArrayIterators.keys),arrayEntries=uncurryThis$g(ArrayIterators.entries),aTypedArray$f=ArrayBufferViewCore$g.aTypedArray,exportTypedArrayMethod$g=ArrayBufferViewCore$g.exportTypedArrayMethod,TypedArrayPrototype=Uint8Array$4&&Uint8Array$4.prototype,GENERIC=!fails$c(function(){TypedArrayPrototype[ITERATOR$3].call([1])}),ITERATOR_IS_VALUES=!!TypedArrayPrototype&&TypedArrayPrototype.values&&TypedArrayPrototype[ITERATOR$3]===TypedArrayPrototype.values&&TypedArrayPrototype.values.name==="values",typedArrayValues=function(){return arrayValues(aTypedArray$f(this))};exportTypedArrayMethod$g("entries",function(){return arrayEntries(aTypedArray$f(this))},GENERIC);exportTypedArrayMethod$g("keys",function(){return arrayKeys(aTypedArray$f(this))},GENERIC);exportTypedArrayMethod$g("values",typedArrayValues,GENERIC||!ITERATOR_IS_VALUES,{name:"values"});exportTypedArrayMethod$g(ITERATOR$3,typedArrayValues,GENERIC||!ITERATOR_IS_VALUES,{name:"values"});var ArrayBufferViewCore$f=arrayBufferViewCore,uncurryThis$f=functionUncurryThis,aTypedArray$e=ArrayBufferViewCore$f.aTypedArray,exportTypedArrayMethod$f=ArrayBufferViewCore$f.exportTypedArrayMethod,$join=uncurryThis$f([].join);exportTypedArrayMethod$f("join",function(ft){return $join(aTypedArray$e(this),ft)});var ArrayBufferViewCore$e=arrayBufferViewCore,apply$5=functionApply$1,$lastIndexOf=arrayLastIndexOf,aTypedArray$d=ArrayBufferViewCore$e.aTypedArray,exportTypedArrayMethod$e=ArrayBufferViewCore$e.exportTypedArrayMethod;exportTypedArrayMethod$e("lastIndexOf",function(ft){var dt=arguments.length;return apply$5($lastIndexOf,aTypedArray$d(this),dt>1?[ft,arguments[1]]:[ft])});var ArrayBufferViewCore$d=arrayBufferViewCore,$map=arrayIteration.map,typedArraySpeciesConstructor$2=typedArraySpeciesConstructor$4,aTypedArray$c=ArrayBufferViewCore$d.aTypedArray,exportTypedArrayMethod$d=ArrayBufferViewCore$d.exportTypedArrayMethod;exportTypedArrayMethod$d("map",function(ft){return $map(aTypedArray$c(this),ft,arguments.length>1?arguments[1]:void 0,function(dt,vt){return new(typedArraySpeciesConstructor$2(dt))(vt)})});var ArrayBufferViewCore$c=arrayBufferViewCore,TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS=typedArrayConstructorsRequireWrappers,aTypedArrayConstructor=ArrayBufferViewCore$c.aTypedArrayConstructor,exportTypedArrayStaticMethod=ArrayBufferViewCore$c.exportTypedArrayStaticMethod;exportTypedArrayStaticMethod("of",function(){for(var ft=0,dt=arguments.length,vt=new(aTypedArrayConstructor(this))(dt);dt>ft;)vt[ft]=arguments[ft++];return vt},TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS);var ArrayBufferViewCore$b=arrayBufferViewCore,$reduce=arrayReduce.left,aTypedArray$b=ArrayBufferViewCore$b.aTypedArray,exportTypedArrayMethod$c=ArrayBufferViewCore$b.exportTypedArrayMethod;exportTypedArrayMethod$c("reduce",function(ft){var dt=arguments.length;return $reduce(aTypedArray$b(this),ft,dt,dt>1?arguments[1]:void 0)});var ArrayBufferViewCore$a=arrayBufferViewCore,$reduceRight=arrayReduce.right,aTypedArray$a=ArrayBufferViewCore$a.aTypedArray,exportTypedArrayMethod$b=ArrayBufferViewCore$a.exportTypedArrayMethod;exportTypedArrayMethod$b("reduceRight",function(ft){var dt=arguments.length;return $reduceRight(aTypedArray$a(this),ft,dt,dt>1?arguments[1]:void 0)});var ArrayBufferViewCore$9=arrayBufferViewCore,aTypedArray$9=ArrayBufferViewCore$9.aTypedArray,exportTypedArrayMethod$a=ArrayBufferViewCore$9.exportTypedArrayMethod,floor$2=Math.floor;exportTypedArrayMethod$a("reverse",function(){for(var ft=this,dt=aTypedArray$9(ft).length,vt=floor$2(dt/2),Et=0,St;Et<vt;)St=ft[Et],ft[Et++]=ft[--dt],ft[dt]=St;return ft});var global$m=global$_,call$5=functionCall,ArrayBufferViewCore$8=arrayBufferViewCore,lengthOfArrayLike$1=lengthOfArrayLike$t,toOffset=toOffset$2,toIndexedObject=toObject$t,fails$b=fails$1m,RangeError$2=global$m.RangeError,Int8Array$2=global$m.Int8Array,Int8ArrayPrototype=Int8Array$2&&Int8Array$2.prototype,$set=Int8ArrayPrototype&&Int8ArrayPrototype.set,aTypedArray$8=ArrayBufferViewCore$8.aTypedArray,exportTypedArrayMethod$9=ArrayBufferViewCore$8.exportTypedArrayMethod,WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS=!fails$b(function(){var lt=new Uint8ClampedArray(2);return call$5($set,lt,{length:1,0:3},1),lt[1]!==3}),TO_OBJECT_BUG=WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS&&ArrayBufferViewCore$8.NATIVE_ARRAY_BUFFER_VIEWS&&fails$b(function(){var lt=new Int8Array$2(2);return lt.set(1),lt.set("2",1),lt[0]!==0||lt[1]!==2});exportTypedArrayMethod$9("set",function(ft){aTypedArray$8(this);var dt=toOffset(arguments.length>1?arguments[1]:void 0,1),vt=toIndexedObject(ft);if(WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS)return call$5($set,this,vt,dt);var Et=this.length,St=lengthOfArrayLike$1(vt),Tt=0;if(St+dt>Et)throw RangeError$2("Wrong length");for(;Tt<St;)this[dt+Tt]=vt[Tt++]},!WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS||TO_OBJECT_BUG);var ArrayBufferViewCore$7=arrayBufferViewCore,typedArraySpeciesConstructor$1=typedArraySpeciesConstructor$4,fails$a=fails$1m,arraySlice$3=arraySlice$a,aTypedArray$7=ArrayBufferViewCore$7.aTypedArray,exportTypedArrayMethod$8=ArrayBufferViewCore$7.exportTypedArrayMethod,FORCED$1=fails$a(function(){new Int8Array(1).slice()});exportTypedArrayMethod$8("slice",function(ft,dt){for(var vt=arraySlice$3(aTypedArray$7(this),ft,dt),Et=typedArraySpeciesConstructor$1(this),St=0,Tt=vt.length,At=new Et(Tt);Tt>St;)At[St]=vt[St++];return At},FORCED$1);var ArrayBufferViewCore$6=arrayBufferViewCore,$some=arrayIteration.some,aTypedArray$6=ArrayBufferViewCore$6.aTypedArray,exportTypedArrayMethod$7=ArrayBufferViewCore$6.exportTypedArrayMethod;exportTypedArrayMethod$7("some",function(ft){return $some(aTypedArray$6(this),ft,arguments.length>1?arguments[1]:void 0)});var global$l=global$_,uncurryThis$e=functionUncurryThisClause,fails$9=fails$1m,aCallable$2=aCallable$l,internalSort=arraySort$1,ArrayBufferViewCore$5=arrayBufferViewCore,FF=engineFfVersion,IE_OR_EDGE=engineIsIeOrEdge,V8$1=engineV8Version,WEBKIT=engineWebkitVersion,aTypedArray$5=ArrayBufferViewCore$5.aTypedArray,exportTypedArrayMethod$6=ArrayBufferViewCore$5.exportTypedArrayMethod,Uint16Array$1=global$l.Uint16Array,nativeSort=Uint16Array$1&&uncurryThis$e(Uint16Array$1.prototype.sort),ACCEPT_INCORRECT_ARGUMENTS=!!nativeSort&&!(fails$9(function(){nativeSort(new Uint16Array$1(2),null)})&&fails$9(function(){nativeSort(new Uint16Array$1(2),{})})),STABLE_SORT=!!nativeSort&&!fails$9(function(){if(V8$1)return V8$1<74;if(FF)return FF<67;if(IE_OR_EDGE)return!0;if(WEBKIT)return WEBKIT<602;var lt=new Uint16Array$1(516),ft=Array(516),dt,vt;for(dt=0;dt<516;dt++)vt=dt%4,lt[dt]=515-dt,ft[dt]=dt-2*vt+3;for(nativeSort(lt,function(Et,St){return(Et/4|0)-(St/4|0)}),dt=0;dt<516;dt++)if(lt[dt]!==ft[dt])return!0}),getSortCompare=function(lt){return function(ft,dt){return lt!==void 0?+lt(ft,dt)||0:dt!==dt?-1:ft!==ft?1:ft===0&&dt===0?1/ft>0&&1/dt<0?1:-1:ft>dt}};exportTypedArrayMethod$6("sort",function(ft){return ft!==void 0&&aCallable$2(ft),STABLE_SORT?nativeSort(this,ft):internalSort(aTypedArray$5(this),getSortCompare(ft))},!STABLE_SORT||ACCEPT_INCORRECT_ARGUMENTS);var ArrayBufferViewCore$4=arrayBufferViewCore,toLength=toLength$d,toAbsoluteIndex=toAbsoluteIndex$a,typedArraySpeciesConstructor=typedArraySpeciesConstructor$4,aTypedArray$4=ArrayBufferViewCore$4.aTypedArray,exportTypedArrayMethod$5=ArrayBufferViewCore$4.exportTypedArrayMethod;exportTypedArrayMethod$5("subarray",function(ft,dt){var vt=aTypedArray$4(this),Et=vt.length,St=toAbsoluteIndex(ft,Et),Tt=typedArraySpeciesConstructor(vt);return new Tt(vt.buffer,vt.byteOffset+St*vt.BYTES_PER_ELEMENT,toLength((dt===void 0?Et:toAbsoluteIndex(dt,Et))-St))});var global$k=global$_,apply$4=functionApply$1,ArrayBufferViewCore$3=arrayBufferViewCore,fails$8=fails$1m,arraySlice$2=arraySlice$a,Int8Array$1=global$k.Int8Array,aTypedArray$3=ArrayBufferViewCore$3.aTypedArray,exportTypedArrayMethod$4=ArrayBufferViewCore$3.exportTypedArrayMethod,$toLocaleString=[].toLocaleString,TO_LOCALE_STRING_BUG=!!Int8Array$1&&fails$8(function(){$toLocaleString.call(new Int8Array$1(1))}),FORCED=fails$8(function(){return[1,2].toLocaleString()!=new Int8Array$1([1,2]).toLocaleString()})||!fails$8(function(){Int8Array$1.prototype.toLocaleString.call([1,2])});exportTypedArrayMethod$4("toLocaleString",function(){return apply$4($toLocaleString,TO_LOCALE_STRING_BUG?arraySlice$2(aTypedArray$3(this)):aTypedArray$3(this),arraySlice$2(arguments))},FORCED);var arrayToReversed=arrayToReversed$2,ArrayBufferViewCore$2=arrayBufferViewCore,aTypedArray$2=ArrayBufferViewCore$2.aTypedArray,exportTypedArrayMethod$3=ArrayBufferViewCore$2.exportTypedArrayMethod,getTypedArrayConstructor$2=ArrayBufferViewCore$2.getTypedArrayConstructor;exportTypedArrayMethod$3("toReversed",function(){return arrayToReversed(aTypedArray$2(this),getTypedArrayConstructor$2(this))});var ArrayBufferViewCore$1=arrayBufferViewCore,uncurryThis$d=functionUncurryThis,aCallable$1=aCallable$l,arrayFromConstructorAndList=arrayFromConstructorAndList$3,aTypedArray$1=ArrayBufferViewCore$1.aTypedArray,getTypedArrayConstructor$1=ArrayBufferViewCore$1.getTypedArrayConstructor,exportTypedArrayMethod$2=ArrayBufferViewCore$1.exportTypedArrayMethod,sort=uncurryThis$d(ArrayBufferViewCore$1.TypedArrayPrototype.sort);exportTypedArrayMethod$2("toSorted",function(ft){ft!==void 0&&aCallable$1(ft);var dt=aTypedArray$1(this),vt=arrayFromConstructorAndList(getTypedArrayConstructor$1(dt),dt);return sort(vt,ft)});var exportTypedArrayMethod$1=arrayBufferViewCore.exportTypedArrayMethod,fails$7=fails$1m,global$j=global$_,uncurryThis$c=functionUncurryThis,Uint8Array$3=global$j.Uint8Array,Uint8ArrayPrototype=Uint8Array$3&&Uint8Array$3.prototype||{},arrayToString=[].toString,join$3=uncurryThis$c([].join);fails$7(function(){arrayToString.call({})})&&(arrayToString=function(){return join$3(this)});var IS_NOT_ARRAY_METHOD=Uint8ArrayPrototype.toString!=arrayToString;exportTypedArrayMethod$1("toString",arrayToString,IS_NOT_ARRAY_METHOD);var arrayWith=arrayWith$2,ArrayBufferViewCore=arrayBufferViewCore,isBigIntArray=isBigIntArray$2,toIntegerOrInfinity=toIntegerOrInfinity$l,toBigInt=toBigInt$3,aTypedArray=ArrayBufferViewCore.aTypedArray,getTypedArrayConstructor=ArrayBufferViewCore.getTypedArrayConstructor,exportTypedArrayMethod=ArrayBufferViewCore.exportTypedArrayMethod,PROPER_ORDER=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(lt){return lt===8}}();exportTypedArrayMethod("with",function(lt,ft){var dt=aTypedArray(this),vt=toIntegerOrInfinity(lt),Et=isBigIntArray(dt)?toBigInt(ft):+ft;return arrayWith(dt,getTypedArrayConstructor(dt),vt,Et)},!PROPER_ORDER);var $$f=_export,uncurryThis$b=functionUncurryThis,toString$4=toString$z,fromCharCode$2=String.fromCharCode,charAt$4=uncurryThis$b("".charAt),exec$3=uncurryThis$b(/./.exec),stringSlice$2=uncurryThis$b("".slice),hex2=/^[\da-f]{2}$/i,hex4=/^[\da-f]{4}$/i;$$f({global:!0},{unescape:function(ft){for(var dt=toString$4(ft),vt="",Et=dt.length,St=0,Tt,At;St<Et;){if(Tt=charAt$4(dt,St++),Tt==="%"){if(charAt$4(dt,St)==="u"){if(At=stringSlice$2(dt,St+1,St+5),exec$3(hex4,At)){vt+=fromCharCode$2(parseInt(At,16)),St+=5;continue}}else if(At=stringSlice$2(dt,St,St+2),exec$3(hex2,At)){vt+=fromCharCode$2(parseInt(At,16)),St+=2;continue}}vt+=Tt}return vt}});var uncurryThis$a=functionUncurryThis,defineBuiltIns$2=defineBuiltIns$5,getWeakData=internalMetadataExports.getWeakData,anInstance$4=anInstance$a,anObject$3=anObject$D,isNullOrUndefined$1=isNullOrUndefined$e,isObject$e=isObject$K,iterate$1=iterate$a,ArrayIterationModule=arrayIteration,hasOwn$6=hasOwnProperty_1,InternalStateModule$3=internalState,setInternalState$3=InternalStateModule$3.set,internalStateGetterFor=InternalStateModule$3.getterFor,find$1=ArrayIterationModule.find,findIndex=ArrayIterationModule.findIndex,splice$2=uncurryThis$a([].splice),id$2=0,uncaughtFrozenStore=function(lt){return lt.frozen||(lt.frozen=new UncaughtFrozenStore)},UncaughtFrozenStore=function(){this.entries=[]},findUncaughtFrozen=function(lt,ft){return find$1(lt.entries,function(dt){return dt[0]===ft})};UncaughtFrozenStore.prototype={get:function(lt){var ft=findUncaughtFrozen(this,lt);if(ft)return ft[1]},has:function(lt){return!!findUncaughtFrozen(this,lt)},set:function(lt,ft){var dt=findUncaughtFrozen(this,lt);dt?dt[1]=ft:this.entries.push([lt,ft])},delete:function(lt){var ft=findIndex(this.entries,function(dt){return dt[0]===lt});return~ft&&splice$2(this.entries,ft,1),!!~ft}};var collectionWeak$2={getConstructor:function(lt,ft,dt,vt){var Et=lt(function(Ct,Rt){anInstance$4(Ct,St),setInternalState$3(Ct,{type:ft,id:id$2++,frozen:void 0}),isNullOrUndefined$1(Rt)||iterate$1(Rt,Ct[vt],{that:Ct,AS_ENTRIES:dt})}),St=Et.prototype,Tt=internalStateGetterFor(ft),At=function(Ct,Rt,Dt){var kt=Tt(Ct),Nt=getWeakData(anObject$3(Rt),!0);return Nt===!0?uncaughtFrozenStore(kt).set(Rt,Dt):Nt[kt.id]=Dt,Ct};return defineBuiltIns$2(St,{delete:function(Ct){var Rt=Tt(this);if(!isObject$e(Ct))return!1;var Dt=getWeakData(Ct);return Dt===!0?uncaughtFrozenStore(Rt).delete(Ct):Dt&&hasOwn$6(Dt,Rt.id)&&delete Dt[Rt.id]},has:function(Rt){var Dt=Tt(this);if(!isObject$e(Rt))return!1;var kt=getWeakData(Rt);return kt===!0?uncaughtFrozenStore(Dt).has(Rt):kt&&hasOwn$6(kt,Dt.id)}}),defineBuiltIns$2(St,dt?{get:function(Rt){var Dt=Tt(this);if(isObject$e(Rt)){var kt=getWeakData(Rt);return kt===!0?uncaughtFrozenStore(Dt).get(Rt):kt?kt[Dt.id]:void 0}},set:function(Rt,Dt){return At(this,Rt,Dt)}}:{add:function(Rt){return At(this,Rt,!0)}}),Et}},FREEZING=freezing,global$i=global$_,uncurryThis$9=functionUncurryThis,defineBuiltIns$1=defineBuiltIns$5,InternalMetadataModule=internalMetadataExports,collection$1=collection$4,collectionWeak$1=collectionWeak$2,isObject$d=isObject$K,enforceInternalState=internalState.enforce,fails$6=fails$1m,NATIVE_WEAK_MAP=weakMapBasicDetection,$Object=Object,isArray$4=Array.isArray,isExtensible=$Object.isExtensible,isFrozen$1=$Object.isFrozen,isSealed=$Object.isSealed,freeze$1=$Object.freeze,seal$1=$Object.seal,FROZEN={},SEALED={},IS_IE11=!global$i.ActiveXObject&&"ActiveXObject"in global$i,InternalWeakMap,wrapper=function(lt){return function(){return lt(this,arguments.length?arguments[0]:void 0)}},$WeakMap=collection$1("WeakMap",wrapper,collectionWeak$1),WeakMapPrototype=$WeakMap.prototype,nativeSet=uncurryThis$9(WeakMapPrototype.set),hasMSEdgeFreezingBug=function(){return FREEZING&&fails$6(function(){var lt=freeze$1([]);return nativeSet(new $WeakMap,lt,1),!isFrozen$1(lt)})};if(NATIVE_WEAK_MAP)if(IS_IE11){InternalWeakMap=collectionWeak$1.getConstructor(wrapper,"WeakMap",!0),InternalMetadataModule.enable();var nativeDelete=uncurryThis$9(WeakMapPrototype.delete),nativeHas=uncurryThis$9(WeakMapPrototype.has),nativeGet=uncurryThis$9(WeakMapPrototype.get);defineBuiltIns$1(WeakMapPrototype,{delete:function(lt){if(isObject$d(lt)&&!isExtensible(lt)){var ft=enforceInternalState(this);return ft.frozen||(ft.frozen=new InternalWeakMap),nativeDelete(this,lt)||ft.frozen.delete(lt)}return nativeDelete(this,lt)},has:function(ft){if(isObject$d(ft)&&!isExtensible(ft)){var dt=enforceInternalState(this);return dt.frozen||(dt.frozen=new InternalWeakMap),nativeHas(this,ft)||dt.frozen.has(ft)}return nativeHas(this,ft)},get:function(ft){if(isObject$d(ft)&&!isExtensible(ft)){var dt=enforceInternalState(this);return dt.frozen||(dt.frozen=new InternalWeakMap),nativeHas(this,ft)?nativeGet(this,ft):dt.frozen.get(ft)}return nativeGet(this,ft)},set:function(ft,dt){if(isObject$d(ft)&&!isExtensible(ft)){var vt=enforceInternalState(this);vt.frozen||(vt.frozen=new InternalWeakMap),nativeHas(this,ft)?nativeSet(this,ft,dt):vt.frozen.set(ft,dt)}else nativeSet(this,ft,dt);return this}})}else hasMSEdgeFreezingBug()&&defineBuiltIns$1(WeakMapPrototype,{set:function(ft,dt){var vt;return isArray$4(ft)&&(isFrozen$1(ft)?vt=FROZEN:isSealed(ft)&&(vt=SEALED)),nativeSet(this,ft,dt),vt==FROZEN&&freeze$1(ft),vt==SEALED&&seal$1(ft),this}});var collection=collection$4,collectionWeak=collectionWeak$2;collection("WeakSet",function(lt){return function(){return lt(this,arguments.length?arguments[0]:void 0)}},collectionWeak);var itoc$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ctoi$1={};for(var index$1=0;index$1<66;index$1++)ctoi$1[itoc$1.charAt(index$1)]=index$1;var base64Map={itoc:itoc$1,ctoi:ctoi$1},$$e=_export,global$h=global$_,getBuiltIn$4=getBuiltIn$m,uncurryThis$8=functionUncurryThis,call$4=functionCall,fails$5=fails$1m,toString$3=toString$z,hasOwn$5=hasOwnProperty_1,validateArgumentsLength$6=validateArgumentsLength$8,ctoi=base64Map.ctoi,disallowed=/[^\d+/a-z]/i,whitespaces=/[\t\n\f\r ]+/g,finalEq=/[=]{1,2}$/,$atob=getBuiltIn$4("atob"),fromCharCode$1=String.fromCharCode,charAt$3=uncurryThis$8("".charAt),replace$3=uncurryThis$8("".replace),exec$2=uncurryThis$8(disallowed.exec),NO_SPACES_IGNORE=fails$5(function(){return $atob(" ")!==""}),NO_ENCODING_CHECK=!fails$5(function(){$atob("a")}),NO_ARG_RECEIVING_CHECK$1=!NO_SPACES_IGNORE&&!NO_ENCODING_CHECK&&!fails$5(function(){$atob()}),WRONG_ARITY$1=!NO_SPACES_IGNORE&&!NO_ENCODING_CHECK&&$atob.length!==1;$$e({global:!0,bind:!0,enumerable:!0,forced:NO_SPACES_IGNORE||NO_ENCODING_CHECK||NO_ARG_RECEIVING_CHECK$1||WRONG_ARITY$1},{atob:function(ft){if(validateArgumentsLength$6(arguments.length,1),NO_ARG_RECEIVING_CHECK$1||WRONG_ARITY$1)return call$4($atob,global$h,ft);var dt=replace$3(toString$3(ft),whitespaces,""),vt="",Et=0,St=0,Tt,At;if(dt.length%4==0&&(dt=replace$3(dt,finalEq,"")),dt.length%4==1||exec$2(disallowed,dt))throw new(getBuiltIn$4("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;Tt=charAt$3(dt,Et++);)hasOwn$5(ctoi,Tt)&&(At=St%4?At*64+ctoi[Tt]:ctoi[Tt],St++%4&&(vt+=fromCharCode$1(255&At>>(-2*St&6))));return vt}});var $$d=_export,global$g=global$_,getBuiltIn$3=getBuiltIn$m,uncurryThis$7=functionUncurryThis,call$3=functionCall,fails$4=fails$1m,toString$2=toString$z,validateArgumentsLength$5=validateArgumentsLength$8,itoc=base64Map.itoc,$btoa=getBuiltIn$3("btoa"),charAt$2=uncurryThis$7("".charAt),charCodeAt$1=uncurryThis$7("".charCodeAt),NO_ARG_RECEIVING_CHECK=!!$btoa&&!fails$4(function(){$btoa()}),WRONG_ARG_CONVERSION=!!$btoa&&fails$4(function(){return $btoa(null)!=="bnVsbA=="}),WRONG_ARITY=!!$btoa&&$btoa.length!==1;$$d({global:!0,bind:!0,enumerable:!0,forced:NO_ARG_RECEIVING_CHECK||WRONG_ARG_CONVERSION||WRONG_ARITY},{btoa:function(ft){if(validateArgumentsLength$5(arguments.length,1),NO_ARG_RECEIVING_CHECK||WRONG_ARG_CONVERSION||WRONG_ARITY)return call$3($btoa,global$g,toString$2(ft));for(var dt=toString$2(ft),vt="",Et=0,St=itoc,Tt,At;charAt$2(dt,Et)||(St="=",Et%1);){if(At=charCodeAt$1(dt,Et+=3/4),At>255)throw new(getBuiltIn$3("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");Tt=Tt<<8|At,vt+=charAt$2(St,63&Tt>>8-Et%1*8)}return vt}});var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},documentCreateElement=documentCreateElement$2,classList=documentCreateElement("span").classList,DOMTokenListPrototype$2=classList&&classList.constructor&&classList.constructor.prototype,domTokenListPrototype=DOMTokenListPrototype$2===Object.prototype?void 0:DOMTokenListPrototype$2,global$f=global$_,DOMIterables$1=domIterables,DOMTokenListPrototype$1=domTokenListPrototype,forEach$2=arrayForEach$1,createNonEnumerableProperty$2=createNonEnumerableProperty$f,handlePrototype$1=function(lt){if(lt&&lt.forEach!==forEach$2)try{createNonEnumerableProperty$2(lt,"forEach",forEach$2)}catch{lt.forEach=forEach$2}};for(var COLLECTION_NAME$1 in DOMIterables$1)DOMIterables$1[COLLECTION_NAME$1]&&handlePrototype$1(global$f[COLLECTION_NAME$1]&&global$f[COLLECTION_NAME$1].prototype);handlePrototype$1(DOMTokenListPrototype$1);var global$e=global$_,DOMIterables=domIterables,DOMTokenListPrototype=domTokenListPrototype,ArrayIteratorMethods=es_array_iterator,createNonEnumerableProperty$1=createNonEnumerableProperty$f,wellKnownSymbol$2=wellKnownSymbol$z,ITERATOR$2=wellKnownSymbol$2("iterator"),TO_STRING_TAG=wellKnownSymbol$2("toStringTag"),ArrayValues=ArrayIteratorMethods.values,handlePrototype=function(lt,ft){if(lt){if(lt[ITERATOR$2]!==ArrayValues)try{createNonEnumerableProperty$1(lt,ITERATOR$2,ArrayValues)}catch{lt[ITERATOR$2]=ArrayValues}if(lt[TO_STRING_TAG]||createNonEnumerableProperty$1(lt,TO_STRING_TAG,ft),DOMIterables[ft]){for(var dt in ArrayIteratorMethods)if(lt[dt]!==ArrayIteratorMethods[dt])try{createNonEnumerableProperty$1(lt,dt,ArrayIteratorMethods[dt])}catch{lt[dt]=ArrayIteratorMethods[dt]}}}};for(var COLLECTION_NAME in DOMIterables)handlePrototype(global$e[COLLECTION_NAME]&&global$e[COLLECTION_NAME].prototype,COLLECTION_NAME);handlePrototype(DOMTokenListPrototype,"DOMTokenList");var IS_NODE$2=engineIsNode,tryNodeRequire$1=function(lt){try{if(IS_NODE$2)return Function('return require("'+lt+'")')()}catch{}},domExceptionConstants={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},$$c=_export,tryNodeRequire=tryNodeRequire$1,getBuiltIn$2=getBuiltIn$m,fails$3=fails$1m,create$2=objectCreate$1,createPropertyDescriptor$2=createPropertyDescriptor$c,defineProperty$5=objectDefineProperty.f,defineBuiltIn$2=defineBuiltIn$m,defineBuiltInAccessor$4=defineBuiltInAccessor$h,hasOwn$4=hasOwnProperty_1,anInstance$3=anInstance$a,anObject$2=anObject$D,errorToString=errorToString$2,normalizeStringArgument$1=normalizeStringArgument$5,DOMExceptionConstants$1=domExceptionConstants,clearErrorStack$1=errorStackClear,InternalStateModule$2=internalState,DESCRIPTORS$6=descriptors,DOM_EXCEPTION$2="DOMException",DATA_CLONE_ERR="DATA_CLONE_ERR",Error$3=getBuiltIn$2("Error"),NativeDOMException$1=getBuiltIn$2(DOM_EXCEPTION$2)||function(){try{var lt=getBuiltIn$2("MessageChannel")||tryNodeRequire("worker_threads").MessageChannel;new lt().port1.postMessage(new WeakMap)}catch(ft){if(ft.name==DATA_CLONE_ERR&&ft.code==25)return ft.constructor}}(),NativeDOMExceptionPrototype=NativeDOMException$1&&NativeDOMException$1.prototype,ErrorPrototype=Error$3.prototype,setInternalState$2=InternalStateModule$2.set,getInternalState=InternalStateModule$2.getterFor(DOM_EXCEPTION$2),HAS_STACK="stack"in Error$3(DOM_EXCEPTION$2),codeFor=function(lt){return hasOwn$4(DOMExceptionConstants$1,lt)&&DOMExceptionConstants$1[lt].m?DOMExceptionConstants$1[lt].c:0},$DOMException$1=function(){anInstance$3(this,DOMExceptionPrototype$1);var ft=arguments.length,dt=normalizeStringArgument$1(ft<1?void 0:arguments[0]),vt=normalizeStringArgument$1(ft<2?void 0:arguments[1],"Error"),Et=codeFor(vt);if(setInternalState$2(this,{type:DOM_EXCEPTION$2,name:vt,message:dt,code:Et}),DESCRIPTORS$6||(this.name=vt,this.message=dt,this.code=Et),HAS_STACK){var St=Error$3(dt);St.name=DOM_EXCEPTION$2,defineProperty$5(this,"stack",createPropertyDescriptor$2(1,clearErrorStack$1(St.stack,1)))}},DOMExceptionPrototype$1=$DOMException$1.prototype=create$2(ErrorPrototype),createGetterDescriptor=function(lt){return{enumerable:!0,configurable:!0,get:lt}},getterFor=function(lt){return createGetterDescriptor(function(){return getInternalState(this)[lt]})};DESCRIPTORS$6&&(defineBuiltInAccessor$4(DOMExceptionPrototype$1,"code",getterFor("code")),defineBuiltInAccessor$4(DOMExceptionPrototype$1,"message",getterFor("message")),defineBuiltInAccessor$4(DOMExceptionPrototype$1,"name",getterFor("name")));defineProperty$5(DOMExceptionPrototype$1,"constructor",createPropertyDescriptor$2(1,$DOMException$1));var INCORRECT_CONSTRUCTOR=fails$3(function(){return!(new NativeDOMException$1 instanceof Error$3)}),INCORRECT_TO_STRING=INCORRECT_CONSTRUCTOR||fails$3(function(){return ErrorPrototype.toString!==errorToString||String(new NativeDOMException$1(1,2))!=="2: 1"}),INCORRECT_CODE=INCORRECT_CONSTRUCTOR||fails$3(function(){return new NativeDOMException$1(1,"DataCloneError").code!==25});INCORRECT_CONSTRUCTOR||NativeDOMException$1[DATA_CLONE_ERR]!==25||NativeDOMExceptionPrototype[DATA_CLONE_ERR];var FORCED_CONSTRUCTOR$1=INCORRECT_CONSTRUCTOR;$$c({global:!0,constructor:!0,forced:FORCED_CONSTRUCTOR$1},{DOMException:FORCED_CONSTRUCTOR$1?$DOMException$1:NativeDOMException$1});var PolyfilledDOMException$1=getBuiltIn$2(DOM_EXCEPTION$2),PolyfilledDOMExceptionPrototype$1=PolyfilledDOMException$1.prototype;INCORRECT_TO_STRING&&NativeDOMException$1===PolyfilledDOMException$1&&defineBuiltIn$2(PolyfilledDOMExceptionPrototype$1,"toString",errorToString);INCORRECT_CODE&&DESCRIPTORS$6&&NativeDOMException$1===PolyfilledDOMException$1&&defineBuiltInAccessor$4(PolyfilledDOMExceptionPrototype$1,"code",createGetterDescriptor(function(){return codeFor(anObject$2(this).name)}));for(var key$4 in DOMExceptionConstants$1)if(hasOwn$4(DOMExceptionConstants$1,key$4)){var constant$3=DOMExceptionConstants$1[key$4],constantName$1=constant$3.s,descriptor$2=createPropertyDescriptor$2(6,constant$3.c);hasOwn$4(PolyfilledDOMException$1,constantName$1)||defineProperty$5(PolyfilledDOMException$1,constantName$1,descriptor$2),hasOwn$4(PolyfilledDOMExceptionPrototype$1,constantName$1)||defineProperty$5(PolyfilledDOMExceptionPrototype$1,constantName$1,descriptor$2)}var $$b=_export,global$d=global$_,getBuiltIn$1=getBuiltIn$m,createPropertyDescriptor$1=createPropertyDescriptor$c,defineProperty$4=objectDefineProperty.f,hasOwn$3=hasOwnProperty_1,anInstance$2=anInstance$a,inheritIfRequired=inheritIfRequired$6,normalizeStringArgument=normalizeStringArgument$5,DOMExceptionConstants=domExceptionConstants,clearErrorStack=errorStackClear,DESCRIPTORS$5=descriptors,DOM_EXCEPTION$1="DOMException",Error$2=getBuiltIn$1("Error"),NativeDOMException=getBuiltIn$1(DOM_EXCEPTION$1),$DOMException=function(){anInstance$2(this,DOMExceptionPrototype);var ft=arguments.length,dt=normalizeStringArgument(ft<1?void 0:arguments[0]),vt=normalizeStringArgument(ft<2?void 0:arguments[1],"Error"),Et=new NativeDOMException(dt,vt),St=Error$2(dt);return St.name=DOM_EXCEPTION$1,defineProperty$4(Et,"stack",createPropertyDescriptor$1(1,clearErrorStack(St.stack,1))),inheritIfRequired(Et,this,$DOMException),Et},DOMExceptionPrototype=$DOMException.prototype=NativeDOMException.prototype,ERROR_HAS_STACK="stack"in Error$2(DOM_EXCEPTION$1),DOM_EXCEPTION_HAS_STACK="stack"in new NativeDOMException(1,2),descriptor$1=NativeDOMException&&DESCRIPTORS$5&&Object.getOwnPropertyDescriptor(global$d,DOM_EXCEPTION$1),BUGGY_DESCRIPTOR=!!descriptor$1&&!(descriptor$1.writable&&descriptor$1.configurable),FORCED_CONSTRUCTOR=ERROR_HAS_STACK&&!BUGGY_DESCRIPTOR&&!DOM_EXCEPTION_HAS_STACK;$$b({global:!0,constructor:!0,forced:FORCED_CONSTRUCTOR},{DOMException:FORCED_CONSTRUCTOR?$DOMException:NativeDOMException});var PolyfilledDOMException=getBuiltIn$1(DOM_EXCEPTION$1),PolyfilledDOMExceptionPrototype=PolyfilledDOMException.prototype;if(PolyfilledDOMExceptionPrototype.constructor!==PolyfilledDOMException){defineProperty$4(PolyfilledDOMExceptionPrototype,"constructor",createPropertyDescriptor$1(1,PolyfilledDOMException));for(var key$3 in DOMExceptionConstants)if(hasOwn$3(DOMExceptionConstants,key$3)){var constant$2=DOMExceptionConstants[key$3],constantName=constant$2.s;hasOwn$3(PolyfilledDOMException,constantName)||defineProperty$4(PolyfilledDOMException,constantName,createPropertyDescriptor$1(6,constant$2.c))}}var getBuiltIn=getBuiltIn$m,setToStringTag$2=setToStringTag$d,DOM_EXCEPTION="DOMException";setToStringTag$2(getBuiltIn(DOM_EXCEPTION),DOM_EXCEPTION);var $$a=_export,global$c=global$_,clearImmediate=task$1.clear;$$a({global:!0,bind:!0,enumerable:!0,forced:global$c.clearImmediate!==clearImmediate},{clearImmediate});var engineIsBun=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",global$b=global$_,apply$3=functionApply$1,isCallable$2=isCallable$z,ENGINE_IS_BUN=engineIsBun,USER_AGENT=engineUserAgent,arraySlice$1=arraySlice$a,validateArgumentsLength$4=validateArgumentsLength$8,Function$1=global$b.Function,WRAP=/MSIE .\./.test(USER_AGENT)||ENGINE_IS_BUN&&function(){var lt=global$b.Bun.version.split(".");return lt.length<3||lt[0]==0&&(lt[1]<3||lt[1]==3&&lt[2]==0)}(),schedulersFix$3=function(lt,ft){var dt=ft?2:1;return WRAP?function(vt,Et){var St=validateArgumentsLength$4(arguments.length,1)>dt,Tt=isCallable$2(vt)?vt:Function$1(vt),At=St?arraySlice$1(arguments,dt):[],Ct=St?function(){apply$3(Tt,this,At)}:Tt;return ft?lt(Ct,Et):lt(Ct)}:lt},$$9=_export,global$a=global$_,setTask=task$1.set,schedulersFix$2=schedulersFix$3,setImmediate=global$a.setImmediate?schedulersFix$2(setTask,!1):setTask;$$9({global:!0,bind:!0,enumerable:!0,forced:global$a.setImmediate!==setImmediate},{setImmediate});var $$8=_export,global$9=global$_,microtask=microtask_1,aCallable=aCallable$l,validateArgumentsLength$3=validateArgumentsLength$8,IS_NODE$1=engineIsNode,process$1=global$9.process;$$8({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(ft){validateArgumentsLength$3(arguments.length,1),aCallable(ft);var dt=IS_NODE$1&&process$1.domain;microtask(dt?dt.bind(ft):ft)}});var $$7=_export,global$8=global$_,defineBuiltInAccessor$3=defineBuiltInAccessor$h,DESCRIPTORS$4=descriptors,$TypeError=TypeError,defineProperty$3=Object.defineProperty,INCORRECT_VALUE=global$8.self!==global$8;try{if(DESCRIPTORS$4){var descriptor=Object.getOwnPropertyDescriptor(global$8,"self");(INCORRECT_VALUE||!descriptor||!descriptor.get||!descriptor.enumerable)&&defineBuiltInAccessor$3(global$8,"self",{get:function(){return global$8},set:function(ft){if(this!==global$8)throw $TypeError("Illegal invocation");defineProperty$3(global$8,"self",{value:ft,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else $$7({global:!0,simple:!0,forced:INCORRECT_VALUE},{self:global$8})}catch{}var uncurryThis$6=functionUncurryThis,MapPrototype=Map.prototype,mapHelpers={Map,set:uncurryThis$6(MapPrototype.set),get:uncurryThis$6(MapPrototype.get),has:uncurryThis$6(MapPrototype.has),remove:uncurryThis$6(MapPrototype.delete),proto:MapPrototype},uncurryThis$5=functionUncurryThis,SetPrototype=Set.prototype,setHelpers={Set,add:uncurryThis$5(SetPrototype.add),has:uncurryThis$5(SetPrototype.has),remove:uncurryThis$5(SetPrototype.delete),proto:SetPrototype,$has:SetPrototype.has,$keys:SetPrototype.keys},global$7=global$_,fails$2=fails$1m,V8=engineV8Version,IS_BROWSER=engineIsBrowser,IS_DENO=engineIsDeno,IS_NODE=engineIsNode,structuredClone=global$7.structuredClone,structuredCloneProperTransfer=!!structuredClone&&!fails$2(function(){if(IS_DENO&&V8>92||IS_NODE&&V8>94||IS_BROWSER&&V8>97)return!1;var lt=new ArrayBuffer(8),ft=structuredClone(lt,{transfer:[lt]});return lt.byteLength!=0||ft.byteLength!=8}),$$6=_export,global$6=global$_,getBuiltin=getBuiltIn$m,uncurryThis$4=functionUncurryThis,fails$1=fails$1m,uid=uid$6,isCallable$1=isCallable$z,isConstructor=isConstructor$6,isNullOrUndefined=isNullOrUndefined$e,isObject$c=isObject$K,isSymbol$3=isSymbol$a,iterate=iterate$a,anObject$1=anObject$D,classof$1=classof$m,hasOwn$2=hasOwnProperty_1,createProperty=createProperty$9,createNonEnumerableProperty=createNonEnumerableProperty$f,lengthOfArrayLike=lengthOfArrayLike$t,validateArgumentsLength$2=validateArgumentsLength$8,getRegExpFlags=regexpGetFlags,MapHelpers=mapHelpers,SetHelpers=setHelpers,ERROR_STACK_INSTALLABLE=errorStackInstallable,PROPER_TRANSFER=structuredCloneProperTransfer,Object$1=global$6.Object,Array$1=global$6.Array,Date$1=global$6.Date,Error$1=global$6.Error,EvalError=global$6.EvalError,RangeError$1=global$6.RangeError,ReferenceError$1=global$6.ReferenceError,SyntaxError$1=global$6.SyntaxError,TypeError$3=global$6.TypeError,URIError$1=global$6.URIError,PerformanceMark=global$6.PerformanceMark,WebAssembly=global$6.WebAssembly,CompileError=WebAssembly&&WebAssembly.CompileError||Error$1,LinkError=WebAssembly&&WebAssembly.LinkError||Error$1,RuntimeError=WebAssembly&&WebAssembly.RuntimeError||Error$1,DOMException$1=getBuiltin("DOMException"),Map$5=MapHelpers.Map,mapHas=MapHelpers.has,mapGet=MapHelpers.get,mapSet=MapHelpers.set,Set$3=SetHelpers.Set,setAdd=SetHelpers.add,objectKeys=getBuiltin("Object","keys"),push$3=uncurryThis$4([].push),thisBooleanValue=uncurryThis$4((!0).valueOf),thisNumberValue=uncurryThis$4(1 .valueOf),thisStringValue=uncurryThis$4("".valueOf),thisTimeValue=uncurryThis$4(Date$1.prototype.getTime),PERFORMANCE_MARK=uid("structuredClone"),DATA_CLONE_ERROR="DataCloneError",TRANSFERRING="Transferring",checkBasicSemantic=function(lt){return!fails$1(function(){var ft=new global$6.Set([7]),dt=lt(ft),vt=lt(Object$1(7));return dt==ft||!dt.has(7)||typeof vt!="object"||vt!=7})&&lt},checkErrorsCloning=function(lt,ft){return!fails$1(function(){var dt=new ft,vt=lt({a:dt,b:dt});return!(vt&&vt.a===vt.b&&vt.a instanceof ft&&vt.a.stack===dt.stack)})},checkNewErrorsCloningSemantic=function(lt){return!fails$1(function(){var ft=lt(new global$6.AggregateError([1],PERFORMANCE_MARK,{cause:3}));return ft.name!="AggregateError"||ft.errors[0]!=1||ft.message!=PERFORMANCE_MARK||ft.cause!=3})},nativeStructuredClone=global$6.structuredClone,FORCED_REPLACEMENT=!checkErrorsCloning(nativeStructuredClone,Error$1)||!checkErrorsCloning(nativeStructuredClone,DOMException$1)||!checkNewErrorsCloningSemantic(nativeStructuredClone),structuredCloneFromMark=!nativeStructuredClone&&checkBasicSemantic(function(lt){return new PerformanceMark(PERFORMANCE_MARK,{detail:lt}).detail}),nativeRestrictedStructuredClone=checkBasicSemantic(nativeStructuredClone)||structuredCloneFromMark,throwUncloneable=function(lt){throw new DOMException$1("Uncloneable type: "+lt,DATA_CLONE_ERROR)},throwUnpolyfillable=function(lt,ft){throw new DOMException$1((ft||"Cloning")+" of "+lt+" cannot be properly polyfilled in this engine",DATA_CLONE_ERROR)},createDataTransfer=function(){var lt;try{lt=new global$6.DataTransfer}catch{try{lt=new global$6.ClipboardEvent("").clipboardData}catch{}}return lt&&lt.items&&lt.files?lt:null},structuredCloneInternal=function(lt,ft){if(isSymbol$3(lt)&&throwUncloneable("Symbol"),!isObject$c(lt))return lt;if(ft){if(mapHas(ft,lt))return mapGet(ft,lt)}else ft=new Map$5;var dt=classof$1(lt),vt=!1,Et,St,Tt,At,Ct,Rt,Dt,kt,Nt,zt,Wt;switch(dt){case"Array":Tt=Array$1(lengthOfArrayLike(lt)),vt=!0;break;case"Object":Tt={},vt=!0;break;case"Map":Tt=new Map$5,vt=!0;break;case"Set":Tt=new Set$3,vt=!0;break;case"RegExp":Tt=new RegExp(lt.source,getRegExpFlags(lt));break;case"Error":switch(St=lt.name,St){case"AggregateError":Tt=getBuiltin("AggregateError")([]);break;case"EvalError":Tt=EvalError();break;case"RangeError":Tt=RangeError$1();break;case"ReferenceError":Tt=ReferenceError$1();break;case"SyntaxError":Tt=SyntaxError$1();break;case"TypeError":Tt=TypeError$3();break;case"URIError":Tt=URIError$1();break;case"CompileError":Tt=CompileError();break;case"LinkError":Tt=LinkError();break;case"RuntimeError":Tt=RuntimeError();break;default:Tt=Error$1()}vt=!0;break;case"DOMException":Tt=new DOMException$1(lt.message,lt.name),vt=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":Et=global$6[dt],isObject$c(Et)||throwUnpolyfillable(dt),Tt=new Et(structuredCloneInternal(lt.buffer,ft),lt.byteOffset,dt==="DataView"?lt.byteLength:lt.length);break;case"DOMQuad":try{Tt=new DOMQuad(structuredCloneInternal(lt.p1,ft),structuredCloneInternal(lt.p2,ft),structuredCloneInternal(lt.p3,ft),structuredCloneInternal(lt.p4,ft))}catch{nativeRestrictedStructuredClone?Tt=nativeRestrictedStructuredClone(lt):throwUnpolyfillable(dt)}break;case"FileList":if(At=createDataTransfer(),At){for(Ct=0,Rt=lengthOfArrayLike(lt);Ct<Rt;Ct++)At.items.add(structuredCloneInternal(lt[Ct],ft));Tt=At.files}else nativeRestrictedStructuredClone?Tt=nativeRestrictedStructuredClone(lt):throwUnpolyfillable(dt);break;case"ImageData":try{Tt=new ImageData(structuredCloneInternal(lt.data,ft),lt.width,lt.height,{colorSpace:lt.colorSpace})}catch{nativeRestrictedStructuredClone?Tt=nativeRestrictedStructuredClone(lt):throwUnpolyfillable(dt)}break;default:if(nativeRestrictedStructuredClone)Tt=nativeRestrictedStructuredClone(lt);else switch(dt){case"BigInt":Tt=Object$1(lt.valueOf());break;case"Boolean":Tt=Object$1(thisBooleanValue(lt));break;case"Number":Tt=Object$1(thisNumberValue(lt));break;case"String":Tt=Object$1(thisStringValue(lt));break;case"Date":Tt=new Date$1(thisTimeValue(lt));break;case"ArrayBuffer":Et=global$6.DataView,!Et&&typeof lt.slice!="function"&&throwUnpolyfillable(dt);try{if(typeof lt.slice=="function"&&!lt.resizable)Tt=lt.slice(0);else for(Rt=lt.byteLength,Wt=("maxByteLength"in lt)?{maxByteLength:lt.maxByteLength}:void 0,Tt=new ArrayBuffer(Rt,Wt),Nt=new Et(lt),zt=new Et(Tt),Ct=0;Ct<Rt;Ct++)zt.setUint8(Ct,Nt.getUint8(Ct))}catch{throw new DOMException$1("ArrayBuffer is detached",DATA_CLONE_ERROR)}break;case"SharedArrayBuffer":Tt=lt;break;case"Blob":try{Tt=lt.slice(0,lt.size,lt.type)}catch{throwUnpolyfillable(dt)}break;case"DOMPoint":case"DOMPointReadOnly":Et=global$6[dt];try{Tt=Et.fromPoint?Et.fromPoint(lt):new Et(lt.x,lt.y,lt.z,lt.w)}catch{throwUnpolyfillable(dt)}break;case"DOMRect":case"DOMRectReadOnly":Et=global$6[dt];try{Tt=Et.fromRect?Et.fromRect(lt):new Et(lt.x,lt.y,lt.width,lt.height)}catch{throwUnpolyfillable(dt)}break;case"DOMMatrix":case"DOMMatrixReadOnly":Et=global$6[dt];try{Tt=Et.fromMatrix?Et.fromMatrix(lt):new Et(lt)}catch{throwUnpolyfillable(dt)}break;case"AudioData":case"VideoFrame":isCallable$1(lt.clone)||throwUnpolyfillable(dt);try{Tt=lt.clone()}catch{throwUncloneable(dt)}break;case"File":try{Tt=new File([lt],lt.name,lt)}catch{throwUnpolyfillable(dt)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(dt);default:throwUncloneable(dt)}}if(mapSet(ft,lt,Tt),vt)switch(dt){case"Array":case"Object":for(Dt=objectKeys(lt),Ct=0,Rt=lengthOfArrayLike(Dt);Ct<Rt;Ct++)kt=Dt[Ct],createProperty(Tt,kt,structuredCloneInternal(lt[kt],ft));break;case"Map":lt.forEach(function(nr,Ut){mapSet(Tt,structuredCloneInternal(Ut,ft),structuredCloneInternal(nr,ft))});break;case"Set":lt.forEach(function(nr){setAdd(Tt,structuredCloneInternal(nr,ft))});break;case"Error":createNonEnumerableProperty(Tt,"message",structuredCloneInternal(lt.message,ft)),hasOwn$2(lt,"cause")&&createNonEnumerableProperty(Tt,"cause",structuredCloneInternal(lt.cause,ft)),St=="AggregateError"&&(Tt.errors=structuredCloneInternal(lt.errors,ft));case"DOMException":ERROR_STACK_INSTALLABLE&&createNonEnumerableProperty(Tt,"stack",structuredCloneInternal(lt.stack,ft))}return Tt},tryToTransfer=function(lt,ft){if(!isObject$c(lt))throw TypeError$3("Transfer option cannot be converted to a sequence");var dt=[];iterate(lt,function(Nt){push$3(dt,anObject$1(Nt))});var vt=0,Et=lengthOfArrayLike(dt),St,Tt,At,Ct,Rt,Dt,kt;if(PROPER_TRANSFER)for(Ct=nativeStructuredClone(dt,{transfer:dt});vt<Et;)mapSet(ft,dt[vt],Ct[vt++]);else for(;vt<Et;){if(St=dt[vt++],mapHas(ft,St))throw new DOMException$1("Duplicate transferable",DATA_CLONE_ERROR);switch(Tt=classof$1(St),Tt){case"ImageBitmap":At=global$6.OffscreenCanvas,isConstructor(At)||throwUnpolyfillable(Tt,TRANSFERRING);try{Dt=new At(St.width,St.height),kt=Dt.getContext("bitmaprenderer"),kt.transferFromImageBitmap(St),Rt=Dt.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!isCallable$1(St.clone)||!isCallable$1(St.close))&&throwUnpolyfillable(Tt,TRANSFERRING);try{Rt=St.clone(),St.close()}catch{}break;case"ArrayBuffer":isCallable$1(St.transfer)||throwUnpolyfillable(Tt,TRANSFERRING),Rt=St.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":throwUnpolyfillable(Tt,TRANSFERRING)}if(Rt===void 0)throw new DOMException$1("This object cannot be transferred: "+Tt,DATA_CLONE_ERROR);mapSet(ft,St,Rt)}};$$6({global:!0,enumerable:!0,sham:!PROPER_TRANSFER,forced:FORCED_REPLACEMENT},{structuredClone:function(ft){var dt=validateArgumentsLength$2(arguments.length,1)>1&&!isNullOrUndefined(arguments[1])?anObject$1(arguments[1]):void 0,vt=dt?dt.transfer:void 0,Et;return vt!==void 0&&(Et=new Map$5,tryToTransfer(vt,Et)),structuredCloneInternal(ft,Et)}});var $$5=_export,global$5=global$_,schedulersFix$1=schedulersFix$3,setInterval$1=schedulersFix$1(global$5.setInterval,!0);$$5({global:!0,bind:!0,forced:global$5.setInterval!==setInterval$1},{setInterval:setInterval$1});var $$4=_export,global$4=global$_,schedulersFix=schedulersFix$3,setTimeout$1=schedulersFix(global$4.setTimeout,!0);$$4({global:!0,bind:!0,forced:global$4.setTimeout!==setTimeout$1},{setTimeout:setTimeout$1});var fails=fails$1m,wellKnownSymbol$1=wellKnownSymbol$z,DESCRIPTORS$3=descriptors,IS_PURE=isPure,ITERATOR$1=wellKnownSymbol$1("iterator"),urlConstructorDetection=!fails(function(){var lt=new URL("b?a=1&b=2&c=3","http://a"),ft=lt.searchParams,dt="";return lt.pathname="c%20d",ft.forEach(function(vt,Et){ft.delete("b"),dt+=Et+vt}),IS_PURE&&!lt.toJSON||!ft.size&&(IS_PURE||!DESCRIPTORS$3)||!ft.sort||lt.href!=="http://a/c%20d?a=1&c=3"||ft.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!ft[ITERATOR$1]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||dt!=="a1c3"||new URL("http://x",void 0).host!=="x"}),uncurryThis$3=functionUncurryThis,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexNonASCII=/[^\0-\u007E]/,regexSeparators=/[.\u3002\uFF0E\uFF61]/g,OVERFLOW_ERROR="Overflow: input needs wider integers to process",baseMinusTMin=base-tMin,$RangeError=RangeError,exec$1=uncurryThis$3(regexSeparators.exec),floor$1=Math.floor,fromCharCode=String.fromCharCode,charCodeAt=uncurryThis$3("".charCodeAt),join$2=uncurryThis$3([].join),push$2=uncurryThis$3([].push),replace$2=uncurryThis$3("".replace),split$2=uncurryThis$3("".split),toLowerCase$1=uncurryThis$3("".toLowerCase),ucs2decode=function(lt){for(var ft=[],dt=0,vt=lt.length;dt<vt;){var Et=charCodeAt(lt,dt++);if(Et>=55296&&Et<=56319&&dt<vt){var St=charCodeAt(lt,dt++);(St&64512)==56320?push$2(ft,((Et&1023)<<10)+(St&1023)+65536):(push$2(ft,Et),dt--)}else push$2(ft,Et)}return ft},digitToBasic=function(lt){return lt+22+75*(lt<26)},adapt=function(lt,ft,dt){var vt=0;for(lt=dt?floor$1(lt/damp):lt>>1,lt+=floor$1(lt/ft);lt>baseMinusTMin*tMax>>1;)lt=floor$1(lt/baseMinusTMin),vt+=base;return floor$1(vt+(baseMinusTMin+1)*lt/(lt+skew))},encode$1=function(lt){var ft=[];lt=ucs2decode(lt);var dt=lt.length,vt=initialN,Et=0,St=initialBias,Tt,At;for(Tt=0;Tt<lt.length;Tt++)At=lt[Tt],At<128&&push$2(ft,fromCharCode(At));var Ct=ft.length,Rt=Ct;for(Ct&&push$2(ft,delimiter);Rt<dt;){var Dt=maxInt;for(Tt=0;Tt<lt.length;Tt++)At=lt[Tt],At>=vt&&At<Dt&&(Dt=At);var kt=Rt+1;if(Dt-vt>floor$1((maxInt-Et)/kt))throw $RangeError(OVERFLOW_ERROR);for(Et+=(Dt-vt)*kt,vt=Dt,Tt=0;Tt<lt.length;Tt++){if(At=lt[Tt],At<vt&&++Et>maxInt)throw $RangeError(OVERFLOW_ERROR);if(At==vt){for(var Nt=Et,zt=base;;){var Wt=zt<=St?tMin:zt>=St+tMax?tMax:zt-St;if(Nt<Wt)break;var nr=Nt-Wt,Ut=base-Wt;push$2(ft,fromCharCode(digitToBasic(Wt+nr%Ut))),Nt=floor$1(nr/Ut),zt+=base}push$2(ft,fromCharCode(digitToBasic(Nt))),St=adapt(Et,kt,Rt==Ct),Et=0,Rt++}}Et++,vt++}return join$2(ft,"")},stringPunycodeToAscii=function(lt){var ft=[],dt=split$2(replace$2(toLowerCase$1(lt),regexSeparators,"."),"."),vt,Et;for(vt=0;vt<dt.length;vt++)Et=dt[vt],push$2(ft,exec$1(regexNonASCII,Et)?"xn--"+encode$1(Et):Et);return join$2(ft,".")},$$3=_export,global$3=global$_,call$2=functionCall,uncurryThis$2=functionUncurryThis,DESCRIPTORS$2=descriptors,USE_NATIVE_URL$1=urlConstructorDetection,defineBuiltIn$1=defineBuiltIn$m,defineBuiltInAccessor$2=defineBuiltInAccessor$h,defineBuiltIns=defineBuiltIns$5,setToStringTag$1=setToStringTag$d,createIteratorConstructor=iteratorCreateConstructor,InternalStateModule$1=internalState,anInstance$1=anInstance$a,isCallable=isCallable$z,hasOwn$1=hasOwnProperty_1,bind$1=functionBindContext,classof=classof$m,anObject=anObject$D,isObject$b=isObject$K,$toString$1=toString$z,create$1=objectCreate$1,createPropertyDescriptor=createPropertyDescriptor$c,getIterator=getIterator$4,getIteratorMethod=getIteratorMethod$5,validateArgumentsLength$1=validateArgumentsLength$8,wellKnownSymbol=wellKnownSymbol$z,arraySort=arraySort$1,ITERATOR=wellKnownSymbol("iterator"),URL_SEARCH_PARAMS="URLSearchParams",URL_SEARCH_PARAMS_ITERATOR=URL_SEARCH_PARAMS+"Iterator",setInternalState$1=InternalStateModule$1.set,getInternalParamsState=InternalStateModule$1.getterFor(URL_SEARCH_PARAMS),getInternalIteratorState=InternalStateModule$1.getterFor(URL_SEARCH_PARAMS_ITERATOR),getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor,safeGetBuiltIn=function(lt){if(!DESCRIPTORS$2)return global$3[lt];var ft=getOwnPropertyDescriptor$1(global$3,lt);return ft&&ft.value},nativeFetch=safeGetBuiltIn("fetch"),NativeRequest=safeGetBuiltIn("Request"),Headers$1=safeGetBuiltIn("Headers"),RequestPrototype=NativeRequest&&NativeRequest.prototype,HeadersPrototype=Headers$1&&Headers$1.prototype,RegExp$1=global$3.RegExp,TypeError$2=global$3.TypeError,decodeURIComponent$1=global$3.decodeURIComponent,encodeURIComponent$1=global$3.encodeURIComponent,charAt$1=uncurryThis$2("".charAt),join$1=uncurryThis$2([].join),push$1=uncurryThis$2([].push),replace$1=uncurryThis$2("".replace),shift$1=uncurryThis$2([].shift),splice$1=uncurryThis$2([].splice),split$1=uncurryThis$2("".split),stringSlice$1=uncurryThis$2("".slice),plus=/\+/g,sequences=Array(4),percentSequence=function(lt){return sequences[lt-1]||(sequences[lt-1]=RegExp$1("((?:%[\\da-f]{2}){"+lt+"})","gi"))},percentDecode=function(lt){try{return decodeURIComponent$1(lt)}catch{return lt}},deserialize=function(lt){var ft=replace$1(lt,plus," "),dt=4;try{return decodeURIComponent$1(ft)}catch{for(;dt;)ft=replace$1(ft,percentSequence(dt--),percentDecode);return ft}},find=/[!'()~]|%20/g,replacements={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(lt){return replacements[lt]},serialize=function(lt){return replace$1(encodeURIComponent$1(lt),find,replacer)},URLSearchParamsIterator=createIteratorConstructor(function(ft,dt){setInternalState$1(this,{type:URL_SEARCH_PARAMS_ITERATOR,iterator:getIterator(getInternalParamsState(ft).entries),kind:dt})},"Iterator",function(){var ft=getInternalIteratorState(this),dt=ft.kind,vt=ft.iterator.next(),Et=vt.value;return vt.done||(vt.value=dt==="keys"?Et.key:dt==="values"?Et.value:[Et.key,Et.value]),vt},!0),URLSearchParamsState=function(lt){this.entries=[],this.url=null,lt!==void 0&&(isObject$b(lt)?this.parseObject(lt):this.parseQuery(typeof lt=="string"?charAt$1(lt,0)==="?"?stringSlice$1(lt,1):lt:$toString$1(lt)))};URLSearchParamsState.prototype={type:URL_SEARCH_PARAMS,bindURL:function(lt){this.url=lt,this.update()},parseObject:function(lt){var ft=getIteratorMethod(lt),dt,vt,Et,St,Tt,At,Ct;if(ft)for(dt=getIterator(lt,ft),vt=dt.next;!(Et=call$2(vt,dt)).done;){if(St=getIterator(anObject(Et.value)),Tt=St.next,(At=call$2(Tt,St)).done||(Ct=call$2(Tt,St)).done||!call$2(Tt,St).done)throw TypeError$2("Expected sequence with length 2");push$1(this.entries,{key:$toString$1(At.value),value:$toString$1(Ct.value)})}else for(var Rt in lt)hasOwn$1(lt,Rt)&&push$1(this.entries,{key:Rt,value:$toString$1(lt[Rt])})},parseQuery:function(lt){if(lt)for(var ft=split$1(lt,"&"),dt=0,vt,Et;dt<ft.length;)vt=ft[dt++],vt.length&&(Et=split$1(vt,"="),push$1(this.entries,{key:deserialize(shift$1(Et)),value:deserialize(join$1(Et,"="))}))},serialize:function(){for(var lt=this.entries,ft=[],dt=0,vt;dt<lt.length;)vt=lt[dt++],push$1(ft,serialize(vt.key)+"="+serialize(vt.value));return join$1(ft,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var URLSearchParamsConstructor=function(){anInstance$1(this,URLSearchParamsPrototype$1);var ft=arguments.length>0?arguments[0]:void 0,dt=setInternalState$1(this,new URLSearchParamsState(ft));DESCRIPTORS$2||(this.length=dt.entries.length)},URLSearchParamsPrototype$1=URLSearchParamsConstructor.prototype;defineBuiltIns(URLSearchParamsPrototype$1,{append:function(ft,dt){validateArgumentsLength$1(arguments.length,2);var vt=getInternalParamsState(this);push$1(vt.entries,{key:$toString$1(ft),value:$toString$1(dt)}),DESCRIPTORS$2||this.length++,vt.updateURL()},delete:function(lt){validateArgumentsLength$1(arguments.length,1);for(var ft=getInternalParamsState(this),dt=ft.entries,vt=$toString$1(lt),Et=0;Et<dt.length;)dt[Et].key===vt?splice$1(dt,Et,1):Et++;DESCRIPTORS$2||(this.length=dt.length),ft.updateURL()},get:function(ft){validateArgumentsLength$1(arguments.length,1);for(var dt=getInternalParamsState(this).entries,vt=$toString$1(ft),Et=0;Et<dt.length;Et++)if(dt[Et].key===vt)return dt[Et].value;return null},getAll:function(ft){validateArgumentsLength$1(arguments.length,1);for(var dt=getInternalParamsState(this).entries,vt=$toString$1(ft),Et=[],St=0;St<dt.length;St++)dt[St].key===vt&&push$1(Et,dt[St].value);return Et},has:function(ft){validateArgumentsLength$1(arguments.length,1);for(var dt=getInternalParamsState(this).entries,vt=$toString$1(ft),Et=0;Et<dt.length;)if(dt[Et++].key===vt)return!0;return!1},set:function(ft,dt){validateArgumentsLength$1(arguments.length,1);for(var vt=getInternalParamsState(this),Et=vt.entries,St=!1,Tt=$toString$1(ft),At=$toString$1(dt),Ct=0,Rt;Ct<Et.length;Ct++)Rt=Et[Ct],Rt.key===Tt&&(St?splice$1(Et,Ct--,1):(St=!0,Rt.value=At));St||push$1(Et,{key:Tt,value:At}),DESCRIPTORS$2||(this.length=Et.length),vt.updateURL()},sort:function(){var ft=getInternalParamsState(this);arraySort(ft.entries,function(dt,vt){return dt.key>vt.key?1:-1}),ft.updateURL()},forEach:function(ft){for(var dt=getInternalParamsState(this).entries,vt=bind$1(ft,arguments.length>1?arguments[1]:void 0),Et=0,St;Et<dt.length;)St=dt[Et++],vt(St.value,St.key,this)},keys:function(){return new URLSearchParamsIterator(this,"keys")},values:function(){return new URLSearchParamsIterator(this,"values")},entries:function(){return new URLSearchParamsIterator(this,"entries")}},{enumerable:!0});defineBuiltIn$1(URLSearchParamsPrototype$1,ITERATOR,URLSearchParamsPrototype$1.entries,{name:"entries"});defineBuiltIn$1(URLSearchParamsPrototype$1,"toString",function(){return getInternalParamsState(this).serialize()},{enumerable:!0});DESCRIPTORS$2&&defineBuiltInAccessor$2(URLSearchParamsPrototype$1,"size",{get:function(){return getInternalParamsState(this).entries.length},configurable:!0,enumerable:!0});setToStringTag$1(URLSearchParamsConstructor,URL_SEARCH_PARAMS);$$3({global:!0,constructor:!0,forced:!USE_NATIVE_URL$1},{URLSearchParams:URLSearchParamsConstructor});if(!USE_NATIVE_URL$1&&isCallable(Headers$1)){var headersHas=uncurryThis$2(HeadersPrototype.has),headersSet=uncurryThis$2(HeadersPrototype.set),wrapRequestOptions=function(lt){if(isObject$b(lt)){var ft=lt.body,dt;if(classof(ft)===URL_SEARCH_PARAMS)return dt=lt.headers?new Headers$1(lt.headers):new Headers$1,headersHas(dt,"content-type")||headersSet(dt,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),create$1(lt,{body:createPropertyDescriptor(0,$toString$1(ft)),headers:createPropertyDescriptor(0,dt)})}return lt};if(isCallable(nativeFetch)&&$$3({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(ft){return nativeFetch(ft,arguments.length>1?wrapRequestOptions(arguments[1]):{})}}),isCallable(NativeRequest)){var RequestConstructor=function(ft){return anInstance$1(this,RequestPrototype),new NativeRequest(ft,arguments.length>1?wrapRequestOptions(arguments[1]):{})};RequestPrototype.constructor=RequestConstructor,RequestConstructor.prototype=RequestPrototype,$$3({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:RequestConstructor})}}var web_urlSearchParams_constructor={URLSearchParams:URLSearchParamsConstructor,getState:getInternalParamsState},$$2=_export,DESCRIPTORS$1=descriptors,USE_NATIVE_URL=urlConstructorDetection,global$2=global$_,bind=functionBindContext,uncurryThis$1=functionUncurryThis,defineBuiltIn=defineBuiltIn$m,defineBuiltInAccessor$1=defineBuiltInAccessor$h,anInstance=anInstance$a,hasOwn=hasOwnProperty_1,assign$2=objectAssign,arrayFrom=arrayFrom$1,arraySlice=arraySliceSimple,codeAt=stringMultibyte.codeAt,toASCII=stringPunycodeToAscii,$toString=toString$z,setToStringTag=setToStringTag$d,validateArgumentsLength=validateArgumentsLength$8,URLSearchParamsModule=web_urlSearchParams_constructor,InternalStateModule=internalState,setInternalState=InternalStateModule.set,getInternalURLState=InternalStateModule.getterFor("URL"),URLSearchParams$1=URLSearchParamsModule.URLSearchParams,getInternalSearchParamsState=URLSearchParamsModule.getState,NativeURL=global$2.URL,TypeError$1=global$2.TypeError,parseInt$1=global$2.parseInt,floor=Math.floor,pow=Math.pow,charAt=uncurryThis$1("".charAt),exec=uncurryThis$1(/./.exec),join=uncurryThis$1([].join),numberToString=uncurryThis$1(1 .toString),pop=uncurryThis$1([].pop),push=uncurryThis$1([].push),replace=uncurryThis$1("".replace),shift=uncurryThis$1([].shift),split=uncurryThis$1("".split),stringSlice=uncurryThis$1("".slice),toLowerCase=uncurryThis$1("".toLowerCase),unshift=uncurryThis$1([].unshift),INVALID_AUTHORITY="Invalid authority",INVALID_SCHEME="Invalid scheme",INVALID_HOST="Invalid host",INVALID_PORT="Invalid port",ALPHA=/[a-z]/i,ALPHANUMERIC=/[\d+-.a-z]/i,DIGIT=/\d/,HEX_START=/^0x/i,OCT=/^[0-7]+$/,DEC=/^\d+$/,HEX=/^[\da-f]+$/i,FORBIDDEN_HOST_CODE_POINT=/[\0\t\n\r #%/:<>?@[\\\]^|]/,FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT=/[\0\t\n\r #/:<>?@[\\\]^|]/,LEADING_C0_CONTROL_OR_SPACE=/^[\u0000-\u0020]+/,TRAILING_C0_CONTROL_OR_SPACE=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,TAB_AND_NEW_LINE=/[\t\n\r]/g,EOF,parseIPv4=function(lt){var ft=split(lt,"."),dt,vt,Et,St,Tt,At,Ct;if(ft.length&&ft[ft.length-1]==""&&ft.length--,dt=ft.length,dt>4)return lt;for(vt=[],Et=0;Et<dt;Et++){if(St=ft[Et],St=="")return lt;if(Tt=10,St.length>1&&charAt(St,0)=="0"&&(Tt=exec(HEX_START,St)?16:8,St=stringSlice(St,Tt==8?1:2)),St==="")At=0;else{if(!exec(Tt==10?DEC:Tt==8?OCT:HEX,St))return lt;At=parseInt$1(St,Tt)}push(vt,At)}for(Et=0;Et<dt;Et++)if(At=vt[Et],Et==dt-1){if(At>=pow(256,5-dt))return null}else if(At>255)return null;for(Ct=pop(vt),Et=0;Et<vt.length;Et++)Ct+=vt[Et]*pow(256,3-Et);return Ct},parseIPv6=function(lt){var ft=[0,0,0,0,0,0,0,0],dt=0,vt=null,Et=0,St,Tt,At,Ct,Rt,Dt,kt,Nt=function(){return charAt(lt,Et)};if(Nt()==":"){if(charAt(lt,1)!=":")return;Et+=2,dt++,vt=dt}for(;Nt();){if(dt==8)return;if(Nt()==":"){if(vt!==null)return;Et++,dt++,vt=dt;continue}for(St=Tt=0;Tt<4&&exec(HEX,Nt());)St=St*16+parseInt$1(Nt(),16),Et++,Tt++;if(Nt()=="."){if(Tt==0||(Et-=Tt,dt>6))return;for(At=0;Nt();){if(Ct=null,At>0)if(Nt()=="."&&At<4)Et++;else return;if(!exec(DIGIT,Nt()))return;for(;exec(DIGIT,Nt());){if(Rt=parseInt$1(Nt(),10),Ct===null)Ct=Rt;else{if(Ct==0)return;Ct=Ct*10+Rt}if(Ct>255)return;Et++}ft[dt]=ft[dt]*256+Ct,At++,(At==2||At==4)&&dt++}if(At!=4)return;break}else if(Nt()==":"){if(Et++,!Nt())return}else if(Nt())return;ft[dt++]=St}if(vt!==null)for(Dt=dt-vt,dt=7;dt!=0&&Dt>0;)kt=ft[dt],ft[dt--]=ft[vt+Dt-1],ft[vt+--Dt]=kt;else if(dt!=8)return;return ft},findLongestZeroSequence=function(lt){for(var ft=null,dt=1,vt=null,Et=0,St=0;St<8;St++)lt[St]!==0?(Et>dt&&(ft=vt,dt=Et),vt=null,Et=0):(vt===null&&(vt=St),++Et);return Et>dt&&(ft=vt,dt=Et),ft},serializeHost=function(lt){var ft,dt,vt,Et;if(typeof lt=="number"){for(ft=[],dt=0;dt<4;dt++)unshift(ft,lt%256),lt=floor(lt/256);return join(ft,".")}else if(typeof lt=="object"){for(ft="",vt=findLongestZeroSequence(lt),dt=0;dt<8;dt++)Et&&lt[dt]===0||(Et&&(Et=!1),vt===dt?(ft+=dt?":":"::",Et=!0):(ft+=numberToString(lt[dt],16),dt<7&&(ft+=":")));return"["+ft+"]"}return lt},C0ControlPercentEncodeSet={},fragmentPercentEncodeSet=assign$2({},C0ControlPercentEncodeSet,{" ":1,'"':1,"<":1,">":1,"`":1}),pathPercentEncodeSet=assign$2({},fragmentPercentEncodeSet,{"#":1,"?":1,"{":1,"}":1}),userinfoPercentEncodeSet=assign$2({},pathPercentEncodeSet,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(lt,ft){var dt=codeAt(lt,0);return dt>32&&dt<127&&!hasOwn(ft,lt)?lt:encodeURIComponent(lt)},specialSchemes={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isWindowsDriveLetter=function(lt,ft){var dt;return lt.length==2&&exec(ALPHA,charAt(lt,0))&&((dt=charAt(lt,1))==":"||!ft&&dt=="|")},startsWithWindowsDriveLetter=function(lt){var ft;return lt.length>1&&isWindowsDriveLetter(stringSlice(lt,0,2))&&(lt.length==2||(ft=charAt(lt,2))==="/"||ft==="\\"||ft==="?"||ft==="#")},isSingleDot=function(lt){return lt==="."||toLowerCase(lt)==="%2e"},isDoubleDot=function(lt){return lt=toLowerCase(lt),lt===".."||lt==="%2e."||lt===".%2e"||lt==="%2e%2e"},SCHEME_START={},SCHEME={},NO_SCHEME={},SPECIAL_RELATIVE_OR_AUTHORITY={},PATH_OR_AUTHORITY={},RELATIVE={},RELATIVE_SLASH={},SPECIAL_AUTHORITY_SLASHES={},SPECIAL_AUTHORITY_IGNORE_SLASHES={},AUTHORITY={},HOST$2={},HOSTNAME={},PORT={},FILE={},FILE_SLASH={},FILE_HOST={},PATH_START={},PATH={},CANNOT_BE_A_BASE_URL_PATH={},QUERY={},FRAGMENT={},URLState=function(lt,ft,dt){var vt=$toString(lt),Et,St,Tt;if(ft){if(St=this.parse(vt),St)throw TypeError$1(St);this.searchParams=null}else{if(dt!==void 0&&(Et=new URLState(dt,!0)),St=this.parse(vt,null,Et),St)throw TypeError$1(St);Tt=getInternalSearchParamsState(new URLSearchParams$1),Tt.bindURL(this),this.searchParams=Tt}};URLState.prototype={type:"URL",parse:function(lt,ft,dt){var vt=this,Et=ft||SCHEME_START,St=0,Tt="",At=!1,Ct=!1,Rt=!1,Dt,kt,Nt,zt;for(lt=$toString(lt),ft||(vt.scheme="",vt.username="",vt.password="",vt.host=null,vt.port=null,vt.path=[],vt.query=null,vt.fragment=null,vt.cannotBeABaseURL=!1,lt=replace(lt,LEADING_C0_CONTROL_OR_SPACE,""),lt=replace(lt,TRAILING_C0_CONTROL_OR_SPACE,"$1")),lt=replace(lt,TAB_AND_NEW_LINE,""),Dt=arrayFrom(lt);St<=Dt.length;){switch(kt=Dt[St],Et){case SCHEME_START:if(kt&&exec(ALPHA,kt))Tt+=toLowerCase(kt),Et=SCHEME;else{if(ft)return INVALID_SCHEME;Et=NO_SCHEME;continue}break;case SCHEME:if(kt&&(exec(ALPHANUMERIC,kt)||kt=="+"||kt=="-"||kt=="."))Tt+=toLowerCase(kt);else if(kt==":"){if(ft&&(vt.isSpecial()!=hasOwn(specialSchemes,Tt)||Tt=="file"&&(vt.includesCredentials()||vt.port!==null)||vt.scheme=="file"&&!vt.host))return;if(vt.scheme=Tt,ft){vt.isSpecial()&&specialSchemes[vt.scheme]==vt.port&&(vt.port=null);return}Tt="",vt.scheme=="file"?Et=FILE:vt.isSpecial()&&dt&&dt.scheme==vt.scheme?Et=SPECIAL_RELATIVE_OR_AUTHORITY:vt.isSpecial()?Et=SPECIAL_AUTHORITY_SLASHES:Dt[St+1]=="/"?(Et=PATH_OR_AUTHORITY,St++):(vt.cannotBeABaseURL=!0,push(vt.path,""),Et=CANNOT_BE_A_BASE_URL_PATH)}else{if(ft)return INVALID_SCHEME;Tt="",Et=NO_SCHEME,St=0;continue}break;case NO_SCHEME:if(!dt||dt.cannotBeABaseURL&&kt!="#")return INVALID_SCHEME;if(dt.cannotBeABaseURL&&kt=="#"){vt.scheme=dt.scheme,vt.path=arraySlice(dt.path),vt.query=dt.query,vt.fragment="",vt.cannotBeABaseURL=!0,Et=FRAGMENT;break}Et=dt.scheme=="file"?FILE:RELATIVE;continue;case SPECIAL_RELATIVE_OR_AUTHORITY:if(kt=="/"&&Dt[St+1]=="/")Et=SPECIAL_AUTHORITY_IGNORE_SLASHES,St++;else{Et=RELATIVE;continue}break;case PATH_OR_AUTHORITY:if(kt=="/"){Et=AUTHORITY;break}else{Et=PATH;continue}case RELATIVE:if(vt.scheme=dt.scheme,kt==EOF)vt.username=dt.username,vt.password=dt.password,vt.host=dt.host,vt.port=dt.port,vt.path=arraySlice(dt.path),vt.query=dt.query;else if(kt=="/"||kt=="\\"&&vt.isSpecial())Et=RELATIVE_SLASH;else if(kt=="?")vt.username=dt.username,vt.password=dt.password,vt.host=dt.host,vt.port=dt.port,vt.path=arraySlice(dt.path),vt.query="",Et=QUERY;else if(kt=="#")vt.username=dt.username,vt.password=dt.password,vt.host=dt.host,vt.port=dt.port,vt.path=arraySlice(dt.path),vt.query=dt.query,vt.fragment="",Et=FRAGMENT;else{vt.username=dt.username,vt.password=dt.password,vt.host=dt.host,vt.port=dt.port,vt.path=arraySlice(dt.path),vt.path.length--,Et=PATH;continue}break;case RELATIVE_SLASH:if(vt.isSpecial()&&(kt=="/"||kt=="\\"))Et=SPECIAL_AUTHORITY_IGNORE_SLASHES;else if(kt=="/")Et=AUTHORITY;else{vt.username=dt.username,vt.password=dt.password,vt.host=dt.host,vt.port=dt.port,Et=PATH;continue}break;case SPECIAL_AUTHORITY_SLASHES:if(Et=SPECIAL_AUTHORITY_IGNORE_SLASHES,kt!="/"||charAt(Tt,St+1)!="/")continue;St++;break;case SPECIAL_AUTHORITY_IGNORE_SLASHES:if(kt!="/"&&kt!="\\"){Et=AUTHORITY;continue}break;case AUTHORITY:if(kt=="@"){At&&(Tt="%40"+Tt),At=!0,Nt=arrayFrom(Tt);for(var Wt=0;Wt<Nt.length;Wt++){var nr=Nt[Wt];if(nr==":"&&!Rt){Rt=!0;continue}var Ut=percentEncode(nr,userinfoPercentEncodeSet);Rt?vt.password+=Ut:vt.username+=Ut}Tt=""}else if(kt==EOF||kt=="/"||kt=="?"||kt=="#"||kt=="\\"&&vt.isSpecial()){if(At&&Tt=="")return INVALID_AUTHORITY;St-=arrayFrom(Tt).length+1,Tt="",Et=HOST$2}else Tt+=kt;break;case HOST$2:case HOSTNAME:if(ft&&vt.scheme=="file"){Et=FILE_HOST;continue}else if(kt==":"&&!Ct){if(Tt=="")return INVALID_HOST;if(zt=vt.parseHost(Tt),zt)return zt;if(Tt="",Et=PORT,ft==HOSTNAME)return}else if(kt==EOF||kt=="/"||kt=="?"||kt=="#"||kt=="\\"&&vt.isSpecial()){if(vt.isSpecial()&&Tt=="")return INVALID_HOST;if(ft&&Tt==""&&(vt.includesCredentials()||vt.port!==null))return;if(zt=vt.parseHost(Tt),zt)return zt;if(Tt="",Et=PATH_START,ft)return;continue}else kt=="["?Ct=!0:kt=="]"&&(Ct=!1),Tt+=kt;break;case PORT:if(exec(DIGIT,kt))Tt+=kt;else if(kt==EOF||kt=="/"||kt=="?"||kt=="#"||kt=="\\"&&vt.isSpecial()||ft){if(Tt!=""){var Ht=parseInt$1(Tt,10);if(Ht>65535)return INVALID_PORT;vt.port=vt.isSpecial()&&Ht===specialSchemes[vt.scheme]?null:Ht,Tt=""}if(ft)return;Et=PATH_START;continue}else return INVALID_PORT;break;case FILE:if(vt.scheme="file",kt=="/"||kt=="\\")Et=FILE_SLASH;else if(dt&&dt.scheme=="file")if(kt==EOF)vt.host=dt.host,vt.path=arraySlice(dt.path),vt.query=dt.query;else if(kt=="?")vt.host=dt.host,vt.path=arraySlice(dt.path),vt.query="",Et=QUERY;else if(kt=="#")vt.host=dt.host,vt.path=arraySlice(dt.path),vt.query=dt.query,vt.fragment="",Et=FRAGMENT;else{startsWithWindowsDriveLetter(join(arraySlice(Dt,St),""))||(vt.host=dt.host,vt.path=arraySlice(dt.path),vt.shortenPath()),Et=PATH;continue}else{Et=PATH;continue}break;case FILE_SLASH:if(kt=="/"||kt=="\\"){Et=FILE_HOST;break}dt&&dt.scheme=="file"&&!startsWithWindowsDriveLetter(join(arraySlice(Dt,St),""))&&(isWindowsDriveLetter(dt.path[0],!0)?push(vt.path,dt.path[0]):vt.host=dt.host),Et=PATH;continue;case FILE_HOST:if(kt==EOF||kt=="/"||kt=="\\"||kt=="?"||kt=="#"){if(!ft&&isWindowsDriveLetter(Tt))Et=PATH;else if(Tt==""){if(vt.host="",ft)return;Et=PATH_START}else{if(zt=vt.parseHost(Tt),zt)return zt;if(vt.host=="localhost"&&(vt.host=""),ft)return;Tt="",Et=PATH_START}continue}else Tt+=kt;break;case PATH_START:if(vt.isSpecial()){if(Et=PATH,kt!="/"&&kt!="\\")continue}else if(!ft&&kt=="?")vt.query="",Et=QUERY;else if(!ft&&kt=="#")vt.fragment="",Et=FRAGMENT;else if(kt!=EOF&&(Et=PATH,kt!="/"))continue;break;case PATH:if(kt==EOF||kt=="/"||kt=="\\"&&vt.isSpecial()||!ft&&(kt=="?"||kt=="#")){if(isDoubleDot(Tt)?(vt.shortenPath(),kt!="/"&&!(kt=="\\"&&vt.isSpecial())&&push(vt.path,"")):isSingleDot(Tt)?kt!="/"&&!(kt=="\\"&&vt.isSpecial())&&push(vt.path,""):(vt.scheme=="file"&&!vt.path.length&&isWindowsDriveLetter(Tt)&&(vt.host&&(vt.host=""),Tt=charAt(Tt,0)+":"),push(vt.path,Tt)),Tt="",vt.scheme=="file"&&(kt==EOF||kt=="?"||kt=="#"))for(;vt.path.length>1&&vt.path[0]==="";)shift(vt.path);kt=="?"?(vt.query="",Et=QUERY):kt=="#"&&(vt.fragment="",Et=FRAGMENT)}else Tt+=percentEncode(kt,pathPercentEncodeSet);break;case CANNOT_BE_A_BASE_URL_PATH:kt=="?"?(vt.query="",Et=QUERY):kt=="#"?(vt.fragment="",Et=FRAGMENT):kt!=EOF&&(vt.path[0]+=percentEncode(kt,C0ControlPercentEncodeSet));break;case QUERY:!ft&&kt=="#"?(vt.fragment="",Et=FRAGMENT):kt!=EOF&&(kt=="'"&&vt.isSpecial()?vt.query+="%27":kt=="#"?vt.query+="%23":vt.query+=percentEncode(kt,C0ControlPercentEncodeSet));break;case FRAGMENT:kt!=EOF&&(vt.fragment+=percentEncode(kt,fragmentPercentEncodeSet));break}St++}},parseHost:function(lt){var ft,dt,vt;if(charAt(lt,0)=="["){if(charAt(lt,lt.length-1)!="]"||(ft=parseIPv6(stringSlice(lt,1,-1)),!ft))return INVALID_HOST;this.host=ft}else if(this.isSpecial()){if(lt=toASCII(lt),exec(FORBIDDEN_HOST_CODE_POINT,lt)||(ft=parseIPv4(lt),ft===null))return INVALID_HOST;this.host=ft}else{if(exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT,lt))return INVALID_HOST;for(ft="",dt=arrayFrom(lt),vt=0;vt<dt.length;vt++)ft+=percentEncode(dt[vt],C0ControlPercentEncodeSet);this.host=ft}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme=="file"},includesCredentials:function(){return this.username!=""||this.password!=""},isSpecial:function(){return hasOwn(specialSchemes,this.scheme)},shortenPath:function(){var lt=this.path,ft=lt.length;ft&&(this.scheme!="file"||ft!=1||!isWindowsDriveLetter(lt[0],!0))&&lt.length--},serialize:function(){var lt=this,ft=lt.scheme,dt=lt.username,vt=lt.password,Et=lt.host,St=lt.port,Tt=lt.path,At=lt.query,Ct=lt.fragment,Rt=ft+":";return Et!==null?(Rt+="//",lt.includesCredentials()&&(Rt+=dt+(vt?":"+vt:"")+"@"),Rt+=serializeHost(Et),St!==null&&(Rt+=":"+St)):ft=="file"&&(Rt+="//"),Rt+=lt.cannotBeABaseURL?Tt[0]:Tt.length?"/"+join(Tt,"/"):"",At!==null&&(Rt+="?"+At),Ct!==null&&(Rt+="#"+Ct),Rt},setHref:function(lt){var ft=this.parse(lt);if(ft)throw TypeError$1(ft);this.searchParams.update()},getOrigin:function(){var lt=this.scheme,ft=this.port;if(lt=="blob")try{return new URLConstructor(lt.path[0]).origin}catch{return"null"}return lt=="file"||!this.isSpecial()?"null":lt+"://"+serializeHost(this.host)+(ft!==null?":"+ft:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(lt){this.parse($toString(lt)+":",SCHEME_START)},getUsername:function(){return this.username},setUsername:function(lt){var ft=arrayFrom($toString(lt));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var dt=0;dt<ft.length;dt++)this.username+=percentEncode(ft[dt],userinfoPercentEncodeSet)}},getPassword:function(){return this.password},setPassword:function(lt){var ft=arrayFrom($toString(lt));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var dt=0;dt<ft.length;dt++)this.password+=percentEncode(ft[dt],userinfoPercentEncodeSet)}},getHost:function(){var lt=this.host,ft=this.port;return lt===null?"":ft===null?serializeHost(lt):serializeHost(lt)+":"+ft},setHost:function(lt){this.cannotBeABaseURL||this.parse(lt,HOST$2)},getHostname:function(){var lt=this.host;return lt===null?"":serializeHost(lt)},setHostname:function(lt){this.cannotBeABaseURL||this.parse(lt,HOSTNAME)},getPort:function(){var lt=this.port;return lt===null?"":$toString(lt)},setPort:function(lt){this.cannotHaveUsernamePasswordPort()||(lt=$toString(lt),lt==""?this.port=null:this.parse(lt,PORT))},getPathname:function(){var lt=this.path;return this.cannotBeABaseURL?lt[0]:lt.length?"/"+join(lt,"/"):""},setPathname:function(lt){this.cannotBeABaseURL||(this.path=[],this.parse(lt,PATH_START))},getSearch:function(){var lt=this.query;return lt?"?"+lt:""},setSearch:function(lt){lt=$toString(lt),lt==""?this.query=null:(charAt(lt,0)=="?"&&(lt=stringSlice(lt,1)),this.query="",this.parse(lt,QUERY)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var lt=this.fragment;return lt?"#"+lt:""},setHash:function(lt){if(lt=$toString(lt),lt==""){this.fragment=null;return}charAt(lt,0)=="#"&&(lt=stringSlice(lt,1)),this.fragment="",this.parse(lt,FRAGMENT)},update:function(){this.query=this.searchParams.serialize()||null}};var URLConstructor=function(ft){var dt=anInstance(this,URLPrototype),vt=validateArgumentsLength(arguments.length,1)>1?arguments[1]:void 0,Et=setInternalState(dt,new URLState(ft,!1,vt));DESCRIPTORS$1||(dt.href=Et.serialize(),dt.origin=Et.getOrigin(),dt.protocol=Et.getProtocol(),dt.username=Et.getUsername(),dt.password=Et.getPassword(),dt.host=Et.getHost(),dt.hostname=Et.getHostname(),dt.port=Et.getPort(),dt.pathname=Et.getPathname(),dt.search=Et.getSearch(),dt.searchParams=Et.getSearchParams(),dt.hash=Et.getHash())},URLPrototype=URLConstructor.prototype,accessorDescriptor=function(lt,ft){return{get:function(){return getInternalURLState(this)[lt]()},set:ft&&function(dt){return getInternalURLState(this)[ft](dt)},configurable:!0,enumerable:!0}};DESCRIPTORS$1&&(defineBuiltInAccessor$1(URLPrototype,"href",accessorDescriptor("serialize","setHref")),defineBuiltInAccessor$1(URLPrototype,"origin",accessorDescriptor("getOrigin")),defineBuiltInAccessor$1(URLPrototype,"protocol",accessorDescriptor("getProtocol","setProtocol")),defineBuiltInAccessor$1(URLPrototype,"username",accessorDescriptor("getUsername","setUsername")),defineBuiltInAccessor$1(URLPrototype,"password",accessorDescriptor("getPassword","setPassword")),defineBuiltInAccessor$1(URLPrototype,"host",accessorDescriptor("getHost","setHost")),defineBuiltInAccessor$1(URLPrototype,"hostname",accessorDescriptor("getHostname","setHostname")),defineBuiltInAccessor$1(URLPrototype,"port",accessorDescriptor("getPort","setPort")),defineBuiltInAccessor$1(URLPrototype,"pathname",accessorDescriptor("getPathname","setPathname")),defineBuiltInAccessor$1(URLPrototype,"search",accessorDescriptor("getSearch","setSearch")),defineBuiltInAccessor$1(URLPrototype,"searchParams",accessorDescriptor("getSearchParams")),defineBuiltInAccessor$1(URLPrototype,"hash",accessorDescriptor("getHash","setHash")));defineBuiltIn(URLPrototype,"toJSON",function(){return getInternalURLState(this).serialize()},{enumerable:!0});defineBuiltIn(URLPrototype,"toString",function(){return getInternalURLState(this).serialize()},{enumerable:!0});if(NativeURL){var nativeCreateObjectURL=NativeURL.createObjectURL,nativeRevokeObjectURL=NativeURL.revokeObjectURL;nativeCreateObjectURL&&defineBuiltIn(URLConstructor,"createObjectURL",bind(nativeCreateObjectURL,NativeURL)),nativeRevokeObjectURL&&defineBuiltIn(URLConstructor,"revokeObjectURL",bind(nativeRevokeObjectURL,NativeURL))}setToStringTag(URLConstructor,"URL");$$2({global:!0,constructor:!0,forced:!USE_NATIVE_URL,sham:!DESCRIPTORS$1},{URL:URLConstructor});var $$1=_export,call$1=functionCall;$$1({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return call$1(URL.prototype.toString,this)}});var DESCRIPTORS=descriptors,uncurryThis=functionUncurryThis,defineBuiltInAccessor=defineBuiltInAccessor$h,URLSearchParamsPrototype=URLSearchParams.prototype,forEach$1=uncurryThis(URLSearchParamsPrototype.forEach);DESCRIPTORS&&!("size"in URLSearchParamsPrototype)&&defineBuiltInAccessor(URLSearchParamsPrototype,"size",{get:function(){var ft=0;return forEach$1(this,function(){ft++}),ft},configurable:!0,enumerable:!0});(function(lt){lt.exports=path$3})(stable);var reactDomExports={},reactDom={get exports(){return reactDomExports},set exports(lt){reactDomExports=lt}},reactDom_production_min={},schedulerExports={},scheduler={get exports(){return schedulerExports},set exports(lt){schedulerExports=lt}},scheduler_production_min={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(lt){var ft,dt,vt,Et;if(typeof performance=="object"&&typeof performance.now=="function"){var St=performance;lt.unstable_now=function(){return St.now()}}else{var Tt=Date,At=Tt.now();lt.unstable_now=function(){return Tt.now()-At}}if(typeof window>"u"||typeof MessageChannel!="function"){var Ct=null,Rt=null,Dt=function(){if(Ct!==null)try{var yr=lt.unstable_now();Ct(!0,yr),Ct=null}catch(gr){throw setTimeout(Dt,0),gr}};ft=function(yr){Ct!==null?setTimeout(ft,0,yr):(Ct=yr,setTimeout(Dt,0))},dt=function(yr,gr){Rt=setTimeout(yr,gr)},vt=function(){clearTimeout(Rt)},lt.unstable_shouldYield=function(){return!1},Et=lt.unstable_forceFrameRate=function(){}}else{var kt=window.setTimeout,Nt=window.clearTimeout;if(typeof console<"u"){var zt=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof zt!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var Wt=!1,nr=null,Ut=-1,Ht=5,Bt=0;lt.unstable_shouldYield=function(){return lt.unstable_now()>=Bt},Et=function(){},lt.unstable_forceFrameRate=function(yr){0>yr||125<yr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ht=0<yr?Math.floor(1e3/yr):5};var Ft=new MessageChannel,tr=Ft.port2;Ft.port1.onmessage=function(){if(nr!==null){var yr=lt.unstable_now();Bt=yr+Ht;try{nr(!0,yr)?tr.postMessage(null):(Wt=!1,nr=null)}catch(gr){throw tr.postMessage(null),gr}}else Wt=!1},ft=function(yr){nr=yr,Wt||(Wt=!0,tr.postMessage(null))},dt=function(yr,gr){Ut=kt(function(){yr(lt.unstable_now())},gr)},vt=function(){Nt(Ut),Ut=-1}}function cr(yr,gr){var Sr=yr.length;yr.push(gr);e:for(;;){var Tr=Sr-1>>>1,br=yr[Tr];if(br!==void 0&&0<rr(br,gr))yr[Tr]=gr,yr[Sr]=br,Sr=Tr;else break e}}function Kt(yr){return yr=yr[0],yr===void 0?null:yr}function Zt(yr){var gr=yr[0];if(gr!==void 0){var Sr=yr.pop();if(Sr!==gr){yr[0]=Sr;e:for(var Tr=0,br=yr.length;Tr<br;){var Ar=2*(Tr+1)-1,Or=yr[Ar],Ir=Ar+1,Cr=yr[Ir];if(Or!==void 0&&0>rr(Or,Sr))Cr!==void 0&&0>rr(Cr,Or)?(yr[Tr]=Cr,yr[Ir]=Sr,Tr=Ir):(yr[Tr]=Or,yr[Ar]=Sr,Tr=Ar);else if(Cr!==void 0&&0>rr(Cr,Sr))yr[Tr]=Cr,yr[Ir]=Sr,Tr=Ir;else break e}}return gr}return null}function rr(yr,gr){var Sr=yr.sortIndex-gr.sortIndex;return Sr!==0?Sr:yr.id-gr.id}var ar=[],sr=[],dr=1,fr=null,pr=3,xr=!1,lr=!1,hr=!1;function ur(yr){for(var gr=Kt(sr);gr!==null;){if(gr.callback===null)Zt(sr);else if(gr.startTime<=yr)Zt(sr),gr.sortIndex=gr.expirationTime,cr(ar,gr);else break;gr=Kt(sr)}}function mr(yr){if(hr=!1,ur(yr),!lr)if(Kt(ar)!==null)lr=!0,ft(ir);else{var gr=Kt(sr);gr!==null&&dt(mr,gr.startTime-yr)}}function ir(yr,gr){lr=!1,hr&&(hr=!1,vt()),xr=!0;var Sr=pr;try{for(ur(gr),fr=Kt(ar);fr!==null&&(!(fr.expirationTime>gr)||yr&&!lt.unstable_shouldYield());){var Tr=fr.callback;if(typeof Tr=="function"){fr.callback=null,pr=fr.priorityLevel;var br=Tr(fr.expirationTime<=gr);gr=lt.unstable_now(),typeof br=="function"?fr.callback=br:fr===Kt(ar)&&Zt(ar),ur(gr)}else Zt(ar);fr=Kt(ar)}if(fr!==null)var Ar=!0;else{var Or=Kt(sr);Or!==null&&dt(mr,Or.startTime-gr),Ar=!1}return Ar}finally{fr=null,pr=Sr,xr=!1}}var _r=Et;lt.unstable_IdlePriority=5,lt.unstable_ImmediatePriority=1,lt.unstable_LowPriority=4,lt.unstable_NormalPriority=3,lt.unstable_Profiling=null,lt.unstable_UserBlockingPriority=2,lt.unstable_cancelCallback=function(yr){yr.callback=null},lt.unstable_continueExecution=function(){lr||xr||(lr=!0,ft(ir))},lt.unstable_getCurrentPriorityLevel=function(){return pr},lt.unstable_getFirstCallbackNode=function(){return Kt(ar)},lt.unstable_next=function(yr){switch(pr){case 1:case 2:case 3:var gr=3;break;default:gr=pr}var Sr=pr;pr=gr;try{return yr()}finally{pr=Sr}},lt.unstable_pauseExecution=function(){},lt.unstable_requestPaint=_r,lt.unstable_runWithPriority=function(yr,gr){switch(yr){case 1:case 2:case 3:case 4:case 5:break;default:yr=3}var Sr=pr;pr=yr;try{return gr()}finally{pr=Sr}},lt.unstable_scheduleCallback=function(yr,gr,Sr){var Tr=lt.unstable_now();switch(typeof Sr=="object"&&Sr!==null?(Sr=Sr.delay,Sr=typeof Sr=="number"&&0<Sr?Tr+Sr:Tr):Sr=Tr,yr){case 1:var br=-1;break;case 2:br=250;break;case 5:br=1073741823;break;case 4:br=1e4;break;default:br=5e3}return br=Sr+br,yr={id:dr++,callback:gr,priorityLevel:yr,startTime:Sr,expirationTime:br,sortIndex:-1},Sr>Tr?(yr.sortIndex=Sr,cr(sr,yr),Kt(ar)===null&&yr===Kt(sr)&&(hr?vt():hr=!0,dt(mr,Sr-Tr))):(yr.sortIndex=br,cr(ar,yr),lr||xr||(lr=!0,ft(ir))),yr},lt.unstable_wrapCallback=function(yr){var gr=pr;return function(){var Sr=pr;pr=gr;try{return yr.apply(this,arguments)}finally{pr=Sr}}}})(scheduler_production_min);(function(lt){lt.exports=scheduler_production_min})(scheduler);/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,m$4=objectAssign$1,r$4=schedulerExports;function y$7(lt){for(var ft="https://reactjs.org/docs/error-decoder.html?invariant="+lt,dt=1;dt<arguments.length;dt++)ft+="&args[]="+encodeURIComponent(arguments[dt]);return"Minified React error #"+lt+"; visit "+ft+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(y$7(227));var ba=new Set,ca={};function da(lt,ft){ea(lt,ft),ea(lt+"Capture",ft)}function ea(lt,ft){for(ca[lt]=ft,lt=0;lt<ft.length;lt++)ba.add(ft[lt])}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia=Object.prototype.hasOwnProperty,ja={},ka={};function la(lt){return ia.call(ka,lt)?!0:ia.call(ja,lt)?!1:ha.test(lt)?ka[lt]=!0:(ja[lt]=!0,!1)}function ma(lt,ft,dt,vt){if(dt!==null&&dt.type===0)return!1;switch(typeof ft){case"function":case"symbol":return!0;case"boolean":return vt?!1:dt!==null?!dt.acceptsBooleans:(lt=lt.toLowerCase().slice(0,5),lt!=="data-"&&lt!=="aria-");default:return!1}}function na(lt,ft,dt,vt){if(ft===null||typeof ft>"u"||ma(lt,ft,dt,vt))return!0;if(vt)return!1;if(dt!==null)switch(dt.type){case 3:return!ft;case 4:return ft===!1;case 5:return isNaN(ft);case 6:return isNaN(ft)||1>ft}return!1}function B$1(lt,ft,dt,vt,Et,St,Tt){this.acceptsBooleans=ft===2||ft===3||ft===4,this.attributeName=vt,this.attributeNamespace=Et,this.mustUseProperty=dt,this.propertyName=lt,this.type=ft,this.sanitizeURL=St,this.removeEmptyString=Tt}var D$4={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(lt){D$4[lt]=new B$1(lt,0,!1,lt,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(lt){var ft=lt[0];D$4[ft]=new B$1(ft,1,!1,lt[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(lt){D$4[lt]=new B$1(lt,2,!1,lt.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(lt){D$4[lt]=new B$1(lt,2,!1,lt,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(lt){D$4[lt]=new B$1(lt,3,!1,lt.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(lt){D$4[lt]=new B$1(lt,3,!0,lt,null,!1,!1)});["capture","download"].forEach(function(lt){D$4[lt]=new B$1(lt,4,!1,lt,null,!1,!1)});["cols","rows","size","span"].forEach(function(lt){D$4[lt]=new B$1(lt,6,!1,lt,null,!1,!1)});["rowSpan","start"].forEach(function(lt){D$4[lt]=new B$1(lt,5,!1,lt.toLowerCase(),null,!1,!1)});var oa=/[\-:]([a-z])/g;function pa(lt){return lt[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(lt){var ft=lt.replace(oa,pa);D$4[ft]=new B$1(ft,1,!1,lt,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(lt){var ft=lt.replace(oa,pa);D$4[ft]=new B$1(ft,1,!1,lt,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(lt){var ft=lt.replace(oa,pa);D$4[ft]=new B$1(ft,1,!1,lt,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(lt){D$4[lt]=new B$1(lt,1,!1,lt.toLowerCase(),null,!1,!1)});D$4.xlinkHref=new B$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(lt){D$4[lt]=new B$1(lt,1,!1,lt.toLowerCase(),null,!0,!0)});function qa(lt,ft,dt,vt){var Et=D$4.hasOwnProperty(ft)?D$4[ft]:null,St=Et!==null?Et.type===0:vt?!1:!(!(2<ft.length)||ft[0]!=="o"&&ft[0]!=="O"||ft[1]!=="n"&&ft[1]!=="N");St||(na(ft,dt,Et,vt)&&(dt=null),vt||Et===null?la(ft)&&(dt===null?lt.removeAttribute(ft):lt.setAttribute(ft,""+dt)):Et.mustUseProperty?lt[Et.propertyName]=dt===null?Et.type===3?!1:"":dt:(ft=Et.attributeName,vt=Et.attributeNamespace,dt===null?lt.removeAttribute(ft):(Et=Et.type,dt=Et===3||Et===4&&dt===!0?"":""+dt,vt?lt.setAttributeNS(vt,ft,dt):lt.setAttribute(ft,dt))))}var ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;if(typeof Symbol=="function"&&Symbol.for){var E$2=Symbol.for;sa=E$2("react.element"),ta=E$2("react.portal"),ua=E$2("react.fragment"),wa=E$2("react.strict_mode"),xa=E$2("react.profiler"),ya=E$2("react.provider"),za=E$2("react.context"),Aa=E$2("react.forward_ref"),Ba=E$2("react.suspense"),Ca=E$2("react.suspense_list"),Da=E$2("react.memo"),Ea=E$2("react.lazy"),Fa=E$2("react.block"),E$2("react.scope"),Ga=E$2("react.opaque.id"),Ha=E$2("react.debug_trace_mode"),Ia=E$2("react.offscreen"),Ja=E$2("react.legacy_hidden")}var Ka=typeof Symbol=="function"&&Symbol.iterator;function La(lt){return lt===null||typeof lt!="object"?null:(lt=Ka&&lt[Ka]||lt["@@iterator"],typeof lt=="function"?lt:null)}var Ma;function Na(lt){if(Ma===void 0)try{throw Error()}catch(dt){var ft=dt.stack.trim().match(/\n( *(at )?)/);Ma=ft&&ft[1]||""}return`
`+Ma+lt}var Oa=!1;function Pa(lt,ft){if(!lt||Oa)return"";Oa=!0;var dt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(ft)if(ft=function(){throw Error()},Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(Ct){var vt=Ct}Reflect.construct(lt,[],ft)}else{try{ft.call()}catch(Ct){vt=Ct}lt.call(ft.prototype)}else{try{throw Error()}catch(Ct){vt=Ct}lt()}}catch(Ct){if(Ct&&vt&&typeof Ct.stack=="string"){for(var Et=Ct.stack.split(`
`),St=vt.stack.split(`
`),Tt=Et.length-1,At=St.length-1;1<=Tt&&0<=At&&Et[Tt]!==St[At];)At--;for(;1<=Tt&&0<=At;Tt--,At--)if(Et[Tt]!==St[At]){if(Tt!==1||At!==1)do if(Tt--,At--,0>At||Et[Tt]!==St[At])return`
`+Et[Tt].replace(" at new "," at ");while(1<=Tt&&0<=At);break}}}finally{Oa=!1,Error.prepareStackTrace=dt}return(lt=lt?lt.displayName||lt.name:"")?Na(lt):""}function Qa(lt){switch(lt.tag){case 5:return Na(lt.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return lt=Pa(lt.type,!1),lt;case 11:return lt=Pa(lt.type.render,!1),lt;case 22:return lt=Pa(lt.type._render,!1),lt;case 1:return lt=Pa(lt.type,!0),lt;default:return""}}function Ra(lt){if(lt==null)return null;if(typeof lt=="function")return lt.displayName||lt.name||null;if(typeof lt=="string")return lt;switch(lt){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if(typeof lt=="object")switch(lt.$$typeof){case za:return(lt.displayName||"Context")+".Consumer";case ya:return(lt._context.displayName||"Context")+".Provider";case Aa:var ft=lt.render;return ft=ft.displayName||ft.name||"",lt.displayName||(ft!==""?"ForwardRef("+ft+")":"ForwardRef");case Da:return Ra(lt.type);case Fa:return Ra(lt._render);case Ea:ft=lt._payload,lt=lt._init;try{return Ra(lt(ft))}catch{}}return null}function Sa(lt){switch(typeof lt){case"boolean":case"number":case"object":case"string":case"undefined":return lt;default:return""}}function Ta(lt){var ft=lt.type;return(lt=lt.nodeName)&&lt.toLowerCase()==="input"&&(ft==="checkbox"||ft==="radio")}function Ua(lt){var ft=Ta(lt)?"checked":"value",dt=Object.getOwnPropertyDescriptor(lt.constructor.prototype,ft),vt=""+lt[ft];if(!lt.hasOwnProperty(ft)&&typeof dt<"u"&&typeof dt.get=="function"&&typeof dt.set=="function"){var Et=dt.get,St=dt.set;return Object.defineProperty(lt,ft,{configurable:!0,get:function(){return Et.call(this)},set:function(Tt){vt=""+Tt,St.call(this,Tt)}}),Object.defineProperty(lt,ft,{enumerable:dt.enumerable}),{getValue:function(){return vt},setValue:function(Tt){vt=""+Tt},stopTracking:function(){lt._valueTracker=null,delete lt[ft]}}}}function Va(lt){lt._valueTracker||(lt._valueTracker=Ua(lt))}function Wa(lt){if(!lt)return!1;var ft=lt._valueTracker;if(!ft)return!0;var dt=ft.getValue(),vt="";return lt&&(vt=Ta(lt)?lt.checked?"true":"false":lt.value),lt=vt,lt!==dt?(ft.setValue(lt),!0):!1}function Xa(lt){if(lt=lt||(typeof document<"u"?document:void 0),typeof lt>"u")return null;try{return lt.activeElement||lt.body}catch{return lt.body}}function Ya(lt,ft){var dt=ft.checked;return m$4({},ft,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:dt??lt._wrapperState.initialChecked})}function Za(lt,ft){var dt=ft.defaultValue==null?"":ft.defaultValue,vt=ft.checked!=null?ft.checked:ft.defaultChecked;dt=Sa(ft.value!=null?ft.value:dt),lt._wrapperState={initialChecked:vt,initialValue:dt,controlled:ft.type==="checkbox"||ft.type==="radio"?ft.checked!=null:ft.value!=null}}function $a(lt,ft){ft=ft.checked,ft!=null&&qa(lt,"checked",ft,!1)}function ab(lt,ft){$a(lt,ft);var dt=Sa(ft.value),vt=ft.type;if(dt!=null)vt==="number"?(dt===0&&lt.value===""||lt.value!=dt)&&(lt.value=""+dt):lt.value!==""+dt&&(lt.value=""+dt);else if(vt==="submit"||vt==="reset"){lt.removeAttribute("value");return}ft.hasOwnProperty("value")?bb(lt,ft.type,dt):ft.hasOwnProperty("defaultValue")&&bb(lt,ft.type,Sa(ft.defaultValue)),ft.checked==null&&ft.defaultChecked!=null&&(lt.defaultChecked=!!ft.defaultChecked)}function cb(lt,ft,dt){if(ft.hasOwnProperty("value")||ft.hasOwnProperty("defaultValue")){var vt=ft.type;if(!(vt!=="submit"&&vt!=="reset"||ft.value!==void 0&&ft.value!==null))return;ft=""+lt._wrapperState.initialValue,dt||ft===lt.value||(lt.value=ft),lt.defaultValue=ft}dt=lt.name,dt!==""&&(lt.name=""),lt.defaultChecked=!!lt._wrapperState.initialChecked,dt!==""&&(lt.name=dt)}function bb(lt,ft,dt){(ft!=="number"||Xa(lt.ownerDocument)!==lt)&&(dt==null?lt.defaultValue=""+lt._wrapperState.initialValue:lt.defaultValue!==""+dt&&(lt.defaultValue=""+dt))}function db(lt){var ft="";return aa.Children.forEach(lt,function(dt){dt!=null&&(ft+=dt)}),ft}function eb(lt,ft){return lt=m$4({children:void 0},ft),(ft=db(ft.children))&&(lt.children=ft),lt}function fb(lt,ft,dt,vt){if(lt=lt.options,ft){ft={};for(var Et=0;Et<dt.length;Et++)ft["$"+dt[Et]]=!0;for(dt=0;dt<lt.length;dt++)Et=ft.hasOwnProperty("$"+lt[dt].value),lt[dt].selected!==Et&&(lt[dt].selected=Et),Et&&vt&&(lt[dt].defaultSelected=!0)}else{for(dt=""+Sa(dt),ft=null,Et=0;Et<lt.length;Et++){if(lt[Et].value===dt){lt[Et].selected=!0,vt&&(lt[Et].defaultSelected=!0);return}ft!==null||lt[Et].disabled||(ft=lt[Et])}ft!==null&&(ft.selected=!0)}}function gb(lt,ft){if(ft.dangerouslySetInnerHTML!=null)throw Error(y$7(91));return m$4({},ft,{value:void 0,defaultValue:void 0,children:""+lt._wrapperState.initialValue})}function hb(lt,ft){var dt=ft.value;if(dt==null){if(dt=ft.children,ft=ft.defaultValue,dt!=null){if(ft!=null)throw Error(y$7(92));if(Array.isArray(dt)){if(!(1>=dt.length))throw Error(y$7(93));dt=dt[0]}ft=dt}ft==null&&(ft=""),dt=ft}lt._wrapperState={initialValue:Sa(dt)}}function ib(lt,ft){var dt=Sa(ft.value),vt=Sa(ft.defaultValue);dt!=null&&(dt=""+dt,dt!==lt.value&&(lt.value=dt),ft.defaultValue==null&&lt.defaultValue!==dt&&(lt.defaultValue=dt)),vt!=null&&(lt.defaultValue=""+vt)}function jb(lt){var ft=lt.textContent;ft===lt._wrapperState.initialValue&&ft!==""&&ft!==null&&(lt.value=ft)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function lb(lt){switch(lt){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(lt,ft){return lt==null||lt==="http://www.w3.org/1999/xhtml"?lb(ft):lt==="http://www.w3.org/2000/svg"&&ft==="foreignObject"?"http://www.w3.org/1999/xhtml":lt}var nb,ob=function(lt){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(ft,dt,vt,Et){MSApp.execUnsafeLocalFunction(function(){return lt(ft,dt,vt,Et)})}:lt}(function(lt,ft){if(lt.namespaceURI!==kb.svg||"innerHTML"in lt)lt.innerHTML=ft;else{for(nb=nb||document.createElement("div"),nb.innerHTML="<svg>"+ft.valueOf().toString()+"</svg>",ft=nb.firstChild;lt.firstChild;)lt.removeChild(lt.firstChild);for(;ft.firstChild;)lt.appendChild(ft.firstChild)}});function pb(lt,ft){if(ft){var dt=lt.firstChild;if(dt&&dt===lt.lastChild&&dt.nodeType===3){dt.nodeValue=ft;return}}lt.textContent=ft}var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(lt){rb.forEach(function(ft){ft=ft+lt.charAt(0).toUpperCase()+lt.substring(1),qb[ft]=qb[lt]})});function sb(lt,ft,dt){return ft==null||typeof ft=="boolean"||ft===""?"":dt||typeof ft!="number"||ft===0||qb.hasOwnProperty(lt)&&qb[lt]?(""+ft).trim():ft+"px"}function tb(lt,ft){lt=lt.style;for(var dt in ft)if(ft.hasOwnProperty(dt)){var vt=dt.indexOf("--")===0,Et=sb(dt,ft[dt],vt);dt==="float"&&(dt="cssFloat"),vt?lt.setProperty(dt,Et):lt[dt]=Et}}var ub=m$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vb(lt,ft){if(ft){if(ub[lt]&&(ft.children!=null||ft.dangerouslySetInnerHTML!=null))throw Error(y$7(137,lt));if(ft.dangerouslySetInnerHTML!=null){if(ft.children!=null)throw Error(y$7(60));if(!(typeof ft.dangerouslySetInnerHTML=="object"&&"__html"in ft.dangerouslySetInnerHTML))throw Error(y$7(61))}if(ft.style!=null&&typeof ft.style!="object")throw Error(y$7(62))}}function wb(lt,ft){if(lt.indexOf("-")===-1)return typeof ft.is=="string";switch(lt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xb(lt){return lt=lt.target||lt.srcElement||window,lt.correspondingUseElement&&(lt=lt.correspondingUseElement),lt.nodeType===3?lt.parentNode:lt}var yb=null,zb=null,Ab=null;function Bb(lt){if(lt=Cb(lt)){if(typeof yb!="function")throw Error(y$7(280));var ft=lt.stateNode;ft&&(ft=Db(ft),yb(lt.stateNode,lt.type,ft))}}function Eb(lt){zb?Ab?Ab.push(lt):Ab=[lt]:zb=lt}function Fb(){if(zb){var lt=zb,ft=Ab;if(Ab=zb=null,Bb(lt),ft)for(lt=0;lt<ft.length;lt++)Bb(ft[lt])}}function Gb(lt,ft){return lt(ft)}function Hb(lt,ft,dt,vt,Et){return lt(ft,dt,vt,Et)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){(zb!==null||Ab!==null)&&(Ib(),Fb())}function Nb(lt,ft,dt){if(Lb)return lt(ft,dt);Lb=!0;try{return Jb(lt,ft,dt)}finally{Lb=!1,Mb()}}function Ob(lt,ft){var dt=lt.stateNode;if(dt===null)return null;var vt=Db(dt);if(vt===null)return null;dt=vt[ft];e:switch(ft){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(vt=!vt.disabled)||(lt=lt.type,vt=!(lt==="button"||lt==="input"||lt==="select"||lt==="textarea")),lt=!vt;break e;default:lt=!1}if(lt)return null;if(dt&&typeof dt!="function")throw Error(y$7(231,ft,typeof dt));return dt}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch{Pb=!1}function Rb(lt,ft,dt,vt,Et,St,Tt,At,Ct){var Rt=Array.prototype.slice.call(arguments,3);try{ft.apply(dt,Rt)}catch(Dt){this.onError(Dt)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(lt){Sb=!0,Tb=lt}};function Xb(lt,ft,dt,vt,Et,St,Tt,At,Ct){Sb=!1,Tb=null,Rb.apply(Wb,arguments)}function Yb(lt,ft,dt,vt,Et,St,Tt,At,Ct){if(Xb.apply(this,arguments),Sb){if(Sb){var Rt=Tb;Sb=!1,Tb=null}else throw Error(y$7(198));Ub||(Ub=!0,Vb=Rt)}}function Zb(lt){var ft=lt,dt=lt;if(lt.alternate)for(;ft.return;)ft=ft.return;else{lt=ft;do ft=lt,ft.flags&1026&&(dt=ft.return),lt=ft.return;while(lt)}return ft.tag===3?dt:null}function $b(lt){if(lt.tag===13){var ft=lt.memoizedState;if(ft===null&&(lt=lt.alternate,lt!==null&&(ft=lt.memoizedState)),ft!==null)return ft.dehydrated}return null}function ac(lt){if(Zb(lt)!==lt)throw Error(y$7(188))}function bc(lt){var ft=lt.alternate;if(!ft){if(ft=Zb(lt),ft===null)throw Error(y$7(188));return ft!==lt?null:lt}for(var dt=lt,vt=ft;;){var Et=dt.return;if(Et===null)break;var St=Et.alternate;if(St===null){if(vt=Et.return,vt!==null){dt=vt;continue}break}if(Et.child===St.child){for(St=Et.child;St;){if(St===dt)return ac(Et),lt;if(St===vt)return ac(Et),ft;St=St.sibling}throw Error(y$7(188))}if(dt.return!==vt.return)dt=Et,vt=St;else{for(var Tt=!1,At=Et.child;At;){if(At===dt){Tt=!0,dt=Et,vt=St;break}if(At===vt){Tt=!0,vt=Et,dt=St;break}At=At.sibling}if(!Tt){for(At=St.child;At;){if(At===dt){Tt=!0,dt=St,vt=Et;break}if(At===vt){Tt=!0,vt=St,dt=Et;break}At=At.sibling}if(!Tt)throw Error(y$7(189))}}if(dt.alternate!==vt)throw Error(y$7(190))}if(dt.tag!==3)throw Error(y$7(188));return dt.stateNode.current===dt?lt:ft}function cc(lt){if(lt=bc(lt),!lt)return null;for(var ft=lt;;){if(ft.tag===5||ft.tag===6)return ft;if(ft.child)ft.child.return=ft,ft=ft.child;else{if(ft===lt)break;for(;!ft.sibling;){if(!ft.return||ft.return===lt)return null;ft=ft.return}ft.sibling.return=ft.return,ft=ft.sibling}}return null}function dc(lt,ft){for(var dt=lt.alternate;ft!==null;){if(ft===lt||ft===dt)return!0;ft=ft.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(lt,ft,dt,vt,Et){return{blockedOn:lt,domEventName:ft,eventSystemFlags:dt|16,nativeEvent:Et,targetContainers:[vt]}}function sc(lt,ft){switch(lt){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":nc.delete(ft.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(ft.pointerId)}}function tc(lt,ft,dt,vt,Et,St){return lt===null||lt.nativeEvent!==St?(lt=rc(ft,dt,vt,Et,St),ft!==null&&(ft=Cb(ft),ft!==null&&fc(ft)),lt):(lt.eventSystemFlags|=vt,ft=lt.targetContainers,Et!==null&&ft.indexOf(Et)===-1&&ft.push(Et),lt)}function uc(lt,ft,dt,vt,Et){switch(ft){case"focusin":return kc=tc(kc,lt,ft,dt,vt,Et),!0;case"dragenter":return lc=tc(lc,lt,ft,dt,vt,Et),!0;case"mouseover":return mc=tc(mc,lt,ft,dt,vt,Et),!0;case"pointerover":var St=Et.pointerId;return nc.set(St,tc(nc.get(St)||null,lt,ft,dt,vt,Et)),!0;case"gotpointercapture":return St=Et.pointerId,oc.set(St,tc(oc.get(St)||null,lt,ft,dt,vt,Et)),!0}return!1}function vc(lt){var ft=wc(lt.target);if(ft!==null){var dt=Zb(ft);if(dt!==null){if(ft=dt.tag,ft===13){if(ft=$b(dt),ft!==null){lt.blockedOn=ft,hc(lt.lanePriority,function(){r$4.unstable_runWithPriority(lt.priority,function(){gc(dt)})});return}}else if(ft===3&&dt.stateNode.hydrate){lt.blockedOn=dt.tag===3?dt.stateNode.containerInfo:null;return}}}lt.blockedOn=null}function xc(lt){if(lt.blockedOn!==null)return!1;for(var ft=lt.targetContainers;0<ft.length;){var dt=yc(lt.domEventName,lt.eventSystemFlags,ft[0],lt.nativeEvent);if(dt!==null)return ft=Cb(dt),ft!==null&&fc(ft),lt.blockedOn=dt,!1;ft.shift()}return!0}function zc(lt,ft,dt){xc(lt)&&dt.delete(ft)}function Ac(){for(ic=!1;0<jc.length;){var lt=jc[0];if(lt.blockedOn!==null){lt=Cb(lt.blockedOn),lt!==null&&ec(lt);break}for(var ft=lt.targetContainers;0<ft.length;){var dt=yc(lt.domEventName,lt.eventSystemFlags,ft[0],lt.nativeEvent);if(dt!==null){lt.blockedOn=dt;break}ft.shift()}lt.blockedOn===null&&jc.shift()}kc!==null&&xc(kc)&&(kc=null),lc!==null&&xc(lc)&&(lc=null),mc!==null&&xc(mc)&&(mc=null),nc.forEach(zc),oc.forEach(zc)}function Bc(lt,ft){lt.blockedOn===ft&&(lt.blockedOn=null,ic||(ic=!0,r$4.unstable_scheduleCallback(r$4.unstable_NormalPriority,Ac)))}function Cc(lt){function ft(Et){return Bc(Et,lt)}if(0<jc.length){Bc(jc[0],lt);for(var dt=1;dt<jc.length;dt++){var vt=jc[dt];vt.blockedOn===lt&&(vt.blockedOn=null)}}for(kc!==null&&Bc(kc,lt),lc!==null&&Bc(lc,lt),mc!==null&&Bc(mc,lt),nc.forEach(ft),oc.forEach(ft),dt=0;dt<pc.length;dt++)vt=pc[dt],vt.blockedOn===lt&&(vt.blockedOn=null);for(;0<pc.length&&(dt=pc[0],dt.blockedOn===null);)vc(dt),dt.blockedOn===null&&pc.shift()}function Dc(lt,ft){var dt={};return dt[lt.toLowerCase()]=ft.toLowerCase(),dt["Webkit"+lt]="webkit"+ft,dt["Moz"+lt]="moz"+ft,dt}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};fa&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(lt){if(Fc[lt])return Fc[lt];if(!Ec[lt])return lt;var ft=Ec[lt],dt;for(dt in ft)if(ft.hasOwnProperty(dt)&&dt in Gc)return Fc[lt]=ft[dt];return lt}var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(lt,ft){for(var dt=0;dt<lt.length;dt+=2){var vt=lt[dt],Et=lt[dt+1];Et="on"+(Et[0].toUpperCase()+Et.slice(1)),Nc.set(vt,ft),Mc.set(vt,Et),da(Et,[vt])}}var Qc=r$4.unstable_now;Qc();var F$3=8;function Rc(lt){if(1&lt)return F$3=15,1;if(2&lt)return F$3=14,2;if(4&lt)return F$3=13,4;var ft=24&lt;return ft!==0?(F$3=12,ft):lt&32?(F$3=11,32):(ft=192&lt,ft!==0?(F$3=10,ft):lt&256?(F$3=9,256):(ft=3584&lt,ft!==0?(F$3=8,ft):lt&4096?(F$3=7,4096):(ft=4186112&lt,ft!==0?(F$3=6,ft):(ft=62914560&lt,ft!==0?(F$3=5,ft):lt&67108864?(F$3=4,67108864):lt&134217728?(F$3=3,134217728):(ft=805306368&lt,ft!==0?(F$3=2,ft):1073741824&lt?(F$3=1,1073741824):(F$3=8,lt))))))}function Sc(lt){switch(lt){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(lt){switch(lt){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y$7(358,lt))}}function Uc(lt,ft){var dt=lt.pendingLanes;if(dt===0)return F$3=0;var vt=0,Et=0,St=lt.expiredLanes,Tt=lt.suspendedLanes,At=lt.pingedLanes;if(St!==0)vt=St,Et=F$3=15;else if(St=dt&134217727,St!==0){var Ct=St&~Tt;Ct!==0?(vt=Rc(Ct),Et=F$3):(At&=St,At!==0&&(vt=Rc(At),Et=F$3))}else St=dt&~Tt,St!==0?(vt=Rc(St),Et=F$3):At!==0&&(vt=Rc(At),Et=F$3);if(vt===0)return 0;if(vt=31-Vc(vt),vt=dt&((0>vt?0:1<<vt)<<1)-1,ft!==0&&ft!==vt&&!(ft&Tt)){if(Rc(ft),Et<=F$3)return ft;F$3=Et}if(ft=lt.entangledLanes,ft!==0)for(lt=lt.entanglements,ft&=vt;0<ft;)dt=31-Vc(ft),Et=1<<dt,vt|=lt[dt],ft&=~Et;return vt}function Wc(lt){return lt=lt.pendingLanes&-1073741825,lt!==0?lt:lt&1073741824?1073741824:0}function Xc(lt,ft){switch(lt){case 15:return 1;case 14:return 2;case 12:return lt=Yc(24&~ft),lt===0?Xc(10,ft):lt;case 10:return lt=Yc(192&~ft),lt===0?Xc(8,ft):lt;case 8:return lt=Yc(3584&~ft),lt===0&&(lt=Yc(4186112&~ft),lt===0&&(lt=512)),lt;case 2:return ft=Yc(805306368&~ft),ft===0&&(ft=268435456),ft}throw Error(y$7(358,lt))}function Yc(lt){return lt&-lt}function Zc(lt){for(var ft=[],dt=0;31>dt;dt++)ft.push(lt);return ft}function $c(lt,ft,dt){lt.pendingLanes|=ft;var vt=ft-1;lt.suspendedLanes&=vt,lt.pingedLanes&=vt,lt=lt.eventTimes,ft=31-Vc(ft),lt[ft]=dt}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(lt){return lt===0?32:31-(bd(lt)/cd|0)|0}var dd=r$4.unstable_UserBlockingPriority,ed=r$4.unstable_runWithPriority,fd=!0;function gd(lt,ft,dt,vt){Kb||Ib();var Et=hd,St=Kb;Kb=!0;try{Hb(Et,lt,ft,dt,vt)}finally{(Kb=St)||Mb()}}function id$1(lt,ft,dt,vt){ed(dd,hd.bind(null,lt,ft,dt,vt))}function hd(lt,ft,dt,vt){if(fd){var Et;if((Et=(ft&4)===0)&&0<jc.length&&-1<qc.indexOf(lt))lt=rc(null,lt,ft,dt,vt),jc.push(lt);else{var St=yc(lt,ft,dt,vt);if(St===null)Et&&sc(lt,vt);else{if(Et){if(-1<qc.indexOf(lt)){lt=rc(St,lt,ft,dt,vt),jc.push(lt);return}if(uc(St,lt,ft,dt,vt))return;sc(lt,vt)}jd(lt,ft,vt,null,dt)}}}}function yc(lt,ft,dt,vt){var Et=xb(vt);if(Et=wc(Et),Et!==null){var St=Zb(Et);if(St===null)Et=null;else{var Tt=St.tag;if(Tt===13){if(Et=$b(St),Et!==null)return Et;Et=null}else if(Tt===3){if(St.stateNode.hydrate)return St.tag===3?St.stateNode.containerInfo:null;Et=null}else St!==Et&&(Et=null)}}return jd(lt,ft,vt,Et,dt),null}var kd=null,ld=null,md=null;function nd(){if(md)return md;var lt,ft=ld,dt=ft.length,vt,Et="value"in kd?kd.value:kd.textContent,St=Et.length;for(lt=0;lt<dt&&ft[lt]===Et[lt];lt++);var Tt=dt-lt;for(vt=1;vt<=Tt&&ft[dt-vt]===Et[St-vt];vt++);return md=Et.slice(lt,1<vt?1-vt:void 0)}function od(lt){var ft=lt.keyCode;return"charCode"in lt?(lt=lt.charCode,lt===0&&ft===13&&(lt=13)):lt=ft,lt===10&&(lt=13),32<=lt||lt===13?lt:0}function pd(){return!0}function qd(){return!1}function rd(lt){function ft(dt,vt,Et,St,Tt){this._reactName=dt,this._targetInst=Et,this.type=vt,this.nativeEvent=St,this.target=Tt,this.currentTarget=null;for(var At in lt)lt.hasOwnProperty(At)&&(dt=lt[At],this[At]=dt?dt(St):St[At]);return this.isDefaultPrevented=(St.defaultPrevented!=null?St.defaultPrevented:St.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return m$4(ft.prototype,{preventDefault:function(){this.defaultPrevented=!0;var dt=this.nativeEvent;dt&&(dt.preventDefault?dt.preventDefault():typeof dt.returnValue!="unknown"&&(dt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var dt=this.nativeEvent;dt&&(dt.stopPropagation?dt.stopPropagation():typeof dt.cancelBubble!="unknown"&&(dt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),ft}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(lt){return lt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m$4({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m$4({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(lt){return lt.relatedTarget===void 0?lt.fromElement===lt.srcElement?lt.toElement:lt.fromElement:lt.relatedTarget},movementX:function(lt){return"movementX"in lt?lt.movementX:(lt!==yd&&(yd&&lt.type==="mousemove"?(wd=lt.screenX-yd.screenX,xd=lt.screenY-yd.screenY):xd=wd=0,yd=lt),wd)},movementY:function(lt){return"movementY"in lt?lt.movementY:xd}}),Bd=rd(Ad),Cd=m$4({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m$4({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m$4({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m$4({},sd,{clipboardData:function(lt){return"clipboardData"in lt?lt.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m$4({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(lt){var ft=this.nativeEvent;return ft.getModifierState?ft.getModifierState(lt):(lt=Od[lt])?!!ft[lt]:!1}function zd(){return Pd}var Qd=m$4({},ud,{key:function(lt){if(lt.key){var ft=Md[lt.key]||lt.key;if(ft!=="Unidentified")return ft}return lt.type==="keypress"?(lt=od(lt),lt===13?"Enter":String.fromCharCode(lt)):lt.type==="keydown"||lt.type==="keyup"?Nd[lt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(lt){return lt.type==="keypress"?od(lt):0},keyCode:function(lt){return lt.type==="keydown"||lt.type==="keyup"?lt.keyCode:0},which:function(lt){return lt.type==="keypress"?od(lt):lt.type==="keydown"||lt.type==="keyup"?lt.keyCode:0}}),Rd=rd(Qd),Sd=m$4({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m$4({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m$4({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m$4({},Ad,{deltaX:function(lt){return"deltaX"in lt?lt.deltaX:"wheelDeltaX"in lt?-lt.wheelDeltaX:0},deltaY:function(lt){return"deltaY"in lt?lt.deltaY:"wheelDeltaY"in lt?-lt.wheelDeltaY:"wheelDelta"in lt?-lt.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=fa&&"CompositionEvent"in window,be$3=null;fa&&"documentMode"in document&&(be$3=document.documentMode);var ce$1=fa&&"TextEvent"in window&&!be$3,de$2=fa&&(!ae$2||be$3&&8<be$3&&11>=be$3),ee$1=String.fromCharCode(32),fe$2=!1;function ge$1(lt,ft){switch(lt){case"keyup":return $d.indexOf(ft.keyCode)!==-1;case"keydown":return ft.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(lt){return lt=lt.detail,typeof lt=="object"&&"data"in lt?lt.data:null}var ie$2=!1;function je$1(lt,ft){switch(lt){case"compositionend":return he$2(ft);case"keypress":return ft.which!==32?null:(fe$2=!0,ee$1);case"textInput":return lt=ft.data,lt===ee$1&&fe$2?null:lt;default:return null}}function ke$1(lt,ft){if(ie$2)return lt==="compositionend"||!ae$2&&ge$1(lt,ft)?(lt=nd(),md=ld=kd=null,ie$2=!1,lt):null;switch(lt){case"paste":return null;case"keypress":if(!(ft.ctrlKey||ft.altKey||ft.metaKey)||ft.ctrlKey&&ft.altKey){if(ft.char&&1<ft.char.length)return ft.char;if(ft.which)return String.fromCharCode(ft.which)}return null;case"compositionend":return de$2&&ft.locale!=="ko"?null:ft.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(lt){var ft=lt&&lt.nodeName&&lt.nodeName.toLowerCase();return ft==="input"?!!le$2[lt.type]:ft==="textarea"}function ne$4(lt,ft,dt,vt){Eb(vt),ft=oe$3(ft,"onChange"),0<ft.length&&(dt=new td("onChange","change",null,dt,vt),lt.push({event:dt,listeners:ft}))}var pe$1=null,qe$2=null;function re$2(lt){se$2(lt,0)}function te$2(lt){var ft=ue$2(lt);if(Wa(ft))return lt}function ve$1(lt,ft){if(lt==="change")return ft}var we$2=!1;if(fa){var xe$3;if(fa){var ye$3="oninput"in document;if(!ye$3){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$3=typeof ze$2.oninput=="function"}xe$3=ye$3}else xe$3=!1;we$2=xe$3&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$2=pe$1=null)}function Be$1(lt){if(lt.propertyName==="value"&&te$2(qe$2)){var ft=[];if(ne$4(ft,qe$2,lt,xb(lt)),lt=re$2,Kb)lt(ft);else{Kb=!0;try{Gb(lt,ft)}finally{Kb=!1,Mb()}}}}function Ce$2(lt,ft,dt){lt==="focusin"?(Ae$1(),pe$1=ft,qe$2=dt,pe$1.attachEvent("onpropertychange",Be$1)):lt==="focusout"&&Ae$1()}function De$3(lt){if(lt==="selectionchange"||lt==="keyup"||lt==="keydown")return te$2(qe$2)}function Ee$3(lt,ft){if(lt==="click")return te$2(ft)}function Fe$1(lt,ft){if(lt==="input"||lt==="change")return te$2(ft)}function Ge$2(lt,ft){return lt===ft&&(lt!==0||1/lt===1/ft)||lt!==lt&&ft!==ft}var He$3=typeof Object.is=="function"?Object.is:Ge$2,Ie$1=Object.prototype.hasOwnProperty;function Je(lt,ft){if(He$3(lt,ft))return!0;if(typeof lt!="object"||lt===null||typeof ft!="object"||ft===null)return!1;var dt=Object.keys(lt),vt=Object.keys(ft);if(dt.length!==vt.length)return!1;for(vt=0;vt<dt.length;vt++)if(!Ie$1.call(ft,dt[vt])||!He$3(lt[dt[vt]],ft[dt[vt]]))return!1;return!0}function Ke$2(lt){for(;lt&&lt.firstChild;)lt=lt.firstChild;return lt}function Le$3(lt,ft){var dt=Ke$2(lt);lt=0;for(var vt;dt;){if(dt.nodeType===3){if(vt=lt+dt.textContent.length,lt<=ft&&vt>=ft)return{node:dt,offset:ft-lt};lt=vt}e:{for(;dt;){if(dt.nextSibling){dt=dt.nextSibling;break e}dt=dt.parentNode}dt=void 0}dt=Ke$2(dt)}}function Me$1(lt,ft){return lt&&ft?lt===ft?!0:lt&&lt.nodeType===3?!1:ft&&ft.nodeType===3?Me$1(lt,ft.parentNode):"contains"in lt?lt.contains(ft):lt.compareDocumentPosition?!!(lt.compareDocumentPosition(ft)&16):!1:!1}function Ne$3(){for(var lt=window,ft=Xa();ft instanceof lt.HTMLIFrameElement;){try{var dt=typeof ft.contentWindow.location.href=="string"}catch{dt=!1}if(dt)lt=ft.contentWindow;else break;ft=Xa(lt.document)}return ft}function Oe$1(lt){var ft=lt&&lt.nodeName&&lt.nodeName.toLowerCase();return ft&&(ft==="input"&&(lt.type==="text"||lt.type==="search"||lt.type==="tel"||lt.type==="url"||lt.type==="password")||ft==="textarea"||lt.contentEditable==="true")}var Pe$3=fa&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$2=null,Se$1=null,Te$1=!1;function Ue$2(lt,ft,dt){var vt=dt.window===dt?dt.document:dt.nodeType===9?dt:dt.ownerDocument;Te$1||Qe==null||Qe!==Xa(vt)||(vt=Qe,"selectionStart"in vt&&Oe$1(vt)?vt={start:vt.selectionStart,end:vt.selectionEnd}:(vt=(vt.ownerDocument&&vt.ownerDocument.defaultView||window).getSelection(),vt={anchorNode:vt.anchorNode,anchorOffset:vt.anchorOffset,focusNode:vt.focusNode,focusOffset:vt.focusOffset}),Se$1&&Je(Se$1,vt)||(Se$1=vt,vt=oe$3(Re$2,"onSelect"),0<vt.length&&(ft=new td("onSelect","select",null,ft,dt),lt.push({event:ft,listeners:vt}),ft.target=Qe)))}Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve$1="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We$1=0;We$1<Ve$1.length;We$1++)Nc.set(Ve$1[We$1],0);ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe));function Ze(lt,ft,dt){var vt=lt.type||"unknown-event";lt.currentTarget=dt,Yb(vt,ft,void 0,lt),lt.currentTarget=null}function se$2(lt,ft){ft=(ft&4)!==0;for(var dt=0;dt<lt.length;dt++){var vt=lt[dt],Et=vt.event;vt=vt.listeners;e:{var St=void 0;if(ft)for(var Tt=vt.length-1;0<=Tt;Tt--){var At=vt[Tt],Ct=At.instance,Rt=At.currentTarget;if(At=At.listener,Ct!==St&&Et.isPropagationStopped())break e;Ze(Et,At,Rt),St=Ct}else for(Tt=0;Tt<vt.length;Tt++){if(At=vt[Tt],Ct=At.instance,Rt=At.currentTarget,At=At.listener,Ct!==St&&Et.isPropagationStopped())break e;Ze(Et,At,Rt),St=Ct}}}if(Ub)throw lt=Vb,Ub=!1,Vb=null,lt}function G$1(lt,ft){var dt=$e$1(ft),vt=lt+"__bubble";dt.has(vt)||(af(ft,lt,2,!1),dt.add(vt))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(lt){lt[bf]||(lt[bf]=!0,ba.forEach(function(ft){Ye.has(ft)||df(ft,!1,lt,null),df(ft,!0,lt,null)}))}function df(lt,ft,dt,vt){var Et=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,St=dt;if(lt==="selectionchange"&&dt.nodeType!==9&&(St=dt.ownerDocument),vt!==null&&!ft&&Ye.has(lt)){if(lt!=="scroll")return;Et|=2,St=vt}var Tt=$e$1(St),At=lt+"__"+(ft?"capture":"bubble");Tt.has(At)||(ft&&(Et|=4),af(St,lt,Et,ft),Tt.add(At))}function af(lt,ft,dt,vt){var Et=Nc.get(ft);switch(Et===void 0?2:Et){case 0:Et=gd;break;case 1:Et=id$1;break;default:Et=hd}dt=Et.bind(null,ft,dt,lt),Et=void 0,!Pb||ft!=="touchstart"&&ft!=="touchmove"&&ft!=="wheel"||(Et=!0),vt?Et!==void 0?lt.addEventListener(ft,dt,{capture:!0,passive:Et}):lt.addEventListener(ft,dt,!0):Et!==void 0?lt.addEventListener(ft,dt,{passive:Et}):lt.addEventListener(ft,dt,!1)}function jd(lt,ft,dt,vt,Et){var St=vt;if(!(ft&1)&&!(ft&2)&&vt!==null)e:for(;;){if(vt===null)return;var Tt=vt.tag;if(Tt===3||Tt===4){var At=vt.stateNode.containerInfo;if(At===Et||At.nodeType===8&&At.parentNode===Et)break;if(Tt===4)for(Tt=vt.return;Tt!==null;){var Ct=Tt.tag;if((Ct===3||Ct===4)&&(Ct=Tt.stateNode.containerInfo,Ct===Et||Ct.nodeType===8&&Ct.parentNode===Et))return;Tt=Tt.return}for(;At!==null;){if(Tt=wc(At),Tt===null)return;if(Ct=Tt.tag,Ct===5||Ct===6){vt=St=Tt;continue e}At=At.parentNode}}vt=vt.return}Nb(function(){var Rt=St,Dt=xb(dt),kt=[];e:{var Nt=Mc.get(lt);if(Nt!==void 0){var zt=td,Wt=lt;switch(lt){case"keypress":if(od(dt)===0)break e;case"keydown":case"keyup":zt=Rd;break;case"focusin":Wt="focus",zt=Fd;break;case"focusout":Wt="blur",zt=Fd;break;case"beforeblur":case"afterblur":zt=Fd;break;case"click":if(dt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":zt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":zt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":zt=Vd;break;case Ic:case Jc:case Kc:zt=Hd;break;case Lc:zt=Xd;break;case"scroll":zt=vd;break;case"wheel":zt=Zd;break;case"copy":case"cut":case"paste":zt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":zt=Td}var nr=(ft&4)!==0,Ut=!nr&&lt==="scroll",Ht=nr?Nt!==null?Nt+"Capture":null:Nt;nr=[];for(var Bt=Rt,Ft;Bt!==null;){Ft=Bt;var tr=Ft.stateNode;if(Ft.tag===5&&tr!==null&&(Ft=tr,Ht!==null&&(tr=Ob(Bt,Ht),tr!=null&&nr.push(ef(Bt,tr,Ft)))),Ut)break;Bt=Bt.return}0<nr.length&&(Nt=new zt(Nt,Wt,null,dt,Dt),kt.push({event:Nt,listeners:nr}))}}if(!(ft&7)){e:{if(Nt=lt==="mouseover"||lt==="pointerover",zt=lt==="mouseout"||lt==="pointerout",Nt&&!(ft&16)&&(Wt=dt.relatedTarget||dt.fromElement)&&(wc(Wt)||Wt[ff]))break e;if((zt||Nt)&&(Nt=Dt.window===Dt?Dt:(Nt=Dt.ownerDocument)?Nt.defaultView||Nt.parentWindow:window,zt?(Wt=dt.relatedTarget||dt.toElement,zt=Rt,Wt=Wt?wc(Wt):null,Wt!==null&&(Ut=Zb(Wt),Wt!==Ut||Wt.tag!==5&&Wt.tag!==6)&&(Wt=null)):(zt=null,Wt=Rt),zt!==Wt)){if(nr=Bd,tr="onMouseLeave",Ht="onMouseEnter",Bt="mouse",(lt==="pointerout"||lt==="pointerover")&&(nr=Td,tr="onPointerLeave",Ht="onPointerEnter",Bt="pointer"),Ut=zt==null?Nt:ue$2(zt),Ft=Wt==null?Nt:ue$2(Wt),Nt=new nr(tr,Bt+"leave",zt,dt,Dt),Nt.target=Ut,Nt.relatedTarget=Ft,tr=null,wc(Dt)===Rt&&(nr=new nr(Ht,Bt+"enter",Wt,dt,Dt),nr.target=Ft,nr.relatedTarget=Ut,tr=nr),Ut=tr,zt&&Wt)t:{for(nr=zt,Ht=Wt,Bt=0,Ft=nr;Ft;Ft=gf(Ft))Bt++;for(Ft=0,tr=Ht;tr;tr=gf(tr))Ft++;for(;0<Bt-Ft;)nr=gf(nr),Bt--;for(;0<Ft-Bt;)Ht=gf(Ht),Ft--;for(;Bt--;){if(nr===Ht||Ht!==null&&nr===Ht.alternate)break t;nr=gf(nr),Ht=gf(Ht)}nr=null}else nr=null;zt!==null&&hf(kt,Nt,zt,nr,!1),Wt!==null&&Ut!==null&&hf(kt,Ut,Wt,nr,!0)}}e:{if(Nt=Rt?ue$2(Rt):window,zt=Nt.nodeName&&Nt.nodeName.toLowerCase(),zt==="select"||zt==="input"&&Nt.type==="file")var cr=ve$1;else if(me$2(Nt))if(we$2)cr=Fe$1;else{cr=De$3;var Kt=Ce$2}else(zt=Nt.nodeName)&&zt.toLowerCase()==="input"&&(Nt.type==="checkbox"||Nt.type==="radio")&&(cr=Ee$3);if(cr&&(cr=cr(lt,Rt))){ne$4(kt,cr,dt,Dt);break e}Kt&&Kt(lt,Nt,Rt),lt==="focusout"&&(Kt=Nt._wrapperState)&&Kt.controlled&&Nt.type==="number"&&bb(Nt,"number",Nt.value)}switch(Kt=Rt?ue$2(Rt):window,lt){case"focusin":(me$2(Kt)||Kt.contentEditable==="true")&&(Qe=Kt,Re$2=Rt,Se$1=null);break;case"focusout":Se$1=Re$2=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$2(kt,dt,Dt);break;case"selectionchange":if(Pe$3)break;case"keydown":case"keyup":Ue$2(kt,dt,Dt)}var Zt;if(ae$2)e:{switch(lt){case"compositionstart":var rr="onCompositionStart";break e;case"compositionend":rr="onCompositionEnd";break e;case"compositionupdate":rr="onCompositionUpdate";break e}rr=void 0}else ie$2?ge$1(lt,dt)&&(rr="onCompositionEnd"):lt==="keydown"&&dt.keyCode===229&&(rr="onCompositionStart");rr&&(de$2&&dt.locale!=="ko"&&(ie$2||rr!=="onCompositionStart"?rr==="onCompositionEnd"&&ie$2&&(Zt=nd()):(kd=Dt,ld="value"in kd?kd.value:kd.textContent,ie$2=!0)),Kt=oe$3(Rt,rr),0<Kt.length&&(rr=new Ld(rr,lt,null,dt,Dt),kt.push({event:rr,listeners:Kt}),Zt?rr.data=Zt:(Zt=he$2(dt),Zt!==null&&(rr.data=Zt)))),(Zt=ce$1?je$1(lt,dt):ke$1(lt,dt))&&(Rt=oe$3(Rt,"onBeforeInput"),0<Rt.length&&(Dt=new Ld("onBeforeInput","beforeinput",null,dt,Dt),kt.push({event:Dt,listeners:Rt}),Dt.data=Zt))}se$2(kt,ft)})}function ef(lt,ft,dt){return{instance:lt,listener:ft,currentTarget:dt}}function oe$3(lt,ft){for(var dt=ft+"Capture",vt=[];lt!==null;){var Et=lt,St=Et.stateNode;Et.tag===5&&St!==null&&(Et=St,St=Ob(lt,dt),St!=null&&vt.unshift(ef(lt,St,Et)),St=Ob(lt,ft),St!=null&&vt.push(ef(lt,St,Et))),lt=lt.return}return vt}function gf(lt){if(lt===null)return null;do lt=lt.return;while(lt&&lt.tag!==5);return lt||null}function hf(lt,ft,dt,vt,Et){for(var St=ft._reactName,Tt=[];dt!==null&&dt!==vt;){var At=dt,Ct=At.alternate,Rt=At.stateNode;if(Ct!==null&&Ct===vt)break;At.tag===5&&Rt!==null&&(At=Rt,Et?(Ct=Ob(dt,St),Ct!=null&&Tt.unshift(ef(dt,Ct,At))):Et||(Ct=Ob(dt,St),Ct!=null&&Tt.push(ef(dt,Ct,At)))),dt=dt.return}Tt.length!==0&&lt.push({event:ft,listeners:Tt})}function jf(){}var kf=null,lf=null;function mf(lt,ft){switch(lt){case"button":case"input":case"select":case"textarea":return!!ft.autoFocus}return!1}function nf(lt,ft){return lt==="textarea"||lt==="option"||lt==="noscript"||typeof ft.children=="string"||typeof ft.children=="number"||typeof ft.dangerouslySetInnerHTML=="object"&&ft.dangerouslySetInnerHTML!==null&&ft.dangerouslySetInnerHTML.__html!=null}var of=typeof setTimeout=="function"?setTimeout:void 0,pf=typeof clearTimeout=="function"?clearTimeout:void 0;function qf(lt){lt.nodeType===1?lt.textContent="":lt.nodeType===9&&(lt=lt.body,lt!=null&&(lt.textContent=""))}function rf(lt){for(;lt!=null;lt=lt.nextSibling){var ft=lt.nodeType;if(ft===1||ft===3)break}return lt}function sf(lt){lt=lt.previousSibling;for(var ft=0;lt;){if(lt.nodeType===8){var dt=lt.data;if(dt==="$"||dt==="$!"||dt==="$?"){if(ft===0)return lt;ft--}else dt==="/$"&&ft++}lt=lt.previousSibling}return null}var tf=0;function uf(lt){return{$$typeof:Ga,toString:lt,valueOf:lt}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;function wc(lt){var ft=lt[wf];if(ft)return ft;for(var dt=lt.parentNode;dt;){if(ft=dt[ff]||dt[wf]){if(dt=ft.alternate,ft.child!==null||dt!==null&&dt.child!==null)for(lt=sf(lt);lt!==null;){if(dt=lt[wf])return dt;lt=sf(lt)}return ft}lt=dt,dt=lt.parentNode}return null}function Cb(lt){return lt=lt[wf]||lt[ff],!lt||lt.tag!==5&&lt.tag!==6&&lt.tag!==13&&lt.tag!==3?null:lt}function ue$2(lt){if(lt.tag===5||lt.tag===6)return lt.stateNode;throw Error(y$7(33))}function Db(lt){return lt[xf]||null}function $e$1(lt){var ft=lt[yf];return ft===void 0&&(ft=lt[yf]=new Set),ft}var zf=[],Af=-1;function Bf(lt){return{current:lt}}function H$2(lt){0>Af||(lt.current=zf[Af],zf[Af]=null,Af--)}function I$4(lt,ft){Af++,zf[Af]=lt.current,lt.current=ft}var Cf={},M$2=Bf(Cf),N$1=Bf(!1),Df=Cf;function Ef(lt,ft){var dt=lt.type.contextTypes;if(!dt)return Cf;var vt=lt.stateNode;if(vt&&vt.__reactInternalMemoizedUnmaskedChildContext===ft)return vt.__reactInternalMemoizedMaskedChildContext;var Et={},St;for(St in dt)Et[St]=ft[St];return vt&&(lt=lt.stateNode,lt.__reactInternalMemoizedUnmaskedChildContext=ft,lt.__reactInternalMemoizedMaskedChildContext=Et),Et}function Ff(lt){return lt=lt.childContextTypes,lt!=null}function Gf(){H$2(N$1),H$2(M$2)}function Hf(lt,ft,dt){if(M$2.current!==Cf)throw Error(y$7(168));I$4(M$2,ft),I$4(N$1,dt)}function If(lt,ft,dt){var vt=lt.stateNode;if(lt=ft.childContextTypes,typeof vt.getChildContext!="function")return dt;vt=vt.getChildContext();for(var Et in vt)if(!(Et in lt))throw Error(y$7(108,Ra(ft)||"Unknown",Et));return m$4({},dt,vt)}function Jf(lt){return lt=(lt=lt.stateNode)&&lt.__reactInternalMemoizedMergedChildContext||Cf,Df=M$2.current,I$4(M$2,lt),I$4(N$1,N$1.current),!0}function Kf(lt,ft,dt){var vt=lt.stateNode;if(!vt)throw Error(y$7(169));dt?(lt=If(lt,ft,Df),vt.__reactInternalMemoizedMergedChildContext=lt,H$2(N$1),H$2(M$2),I$4(M$2,lt)):H$2(N$1),I$4(N$1,dt)}var Lf=null,Mf=null,Nf=r$4.unstable_runWithPriority,Of=r$4.unstable_scheduleCallback,Pf=r$4.unstable_cancelCallback,Qf=r$4.unstable_shouldYield,Rf=r$4.unstable_requestPaint,Sf=r$4.unstable_now,Tf=r$4.unstable_getCurrentPriorityLevel,Uf=r$4.unstable_ImmediatePriority,Vf=r$4.unstable_UserBlockingPriority,Wf=r$4.unstable_NormalPriority,Xf=r$4.unstable_LowPriority,Yf=r$4.unstable_IdlePriority,Zf={},$f=Rf!==void 0?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O$2=1e4>dg?Sf:function(){return Sf()-dg};function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y$7(332))}}function fg(lt){switch(lt){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y$7(332))}}function gg(lt,ft){return lt=fg(lt),Nf(lt,ft)}function hg(lt,ft,dt){return lt=fg(lt),Of(lt,ft,dt)}function ig(){if(bg!==null){var lt=bg;bg=null,Pf(lt)}jg()}function jg(){if(!cg&&ag!==null){cg=!0;var lt=0;try{var ft=ag;gg(99,function(){for(;lt<ft.length;lt++){var dt=ft[lt];do dt=dt(!0);while(dt!==null)}}),ag=null}catch(dt){throw ag!==null&&(ag=ag.slice(lt+1)),Of(Uf,ig),dt}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(lt,ft){if(lt&&lt.defaultProps){ft=m$4({},ft),lt=lt.defaultProps;for(var dt in lt)ft[dt]===void 0&&(ft[dt]=lt[dt]);return ft}return ft}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}function rg(lt){var ft=mg.current;H$2(mg),lt.type._context._currentValue=ft}function sg(lt,ft){for(;lt!==null;){var dt=lt.alternate;if((lt.childLanes&ft)===ft){if(dt===null||(dt.childLanes&ft)===ft)break;dt.childLanes|=ft}else lt.childLanes|=ft,dt!==null&&(dt.childLanes|=ft);lt=lt.return}}function tg(lt,ft){ng=lt,pg=og=null,lt=lt.dependencies,lt!==null&&lt.firstContext!==null&&(lt.lanes&ft&&(ug=!0),lt.firstContext=null)}function vg(lt,ft){if(pg!==lt&&ft!==!1&&ft!==0)if((typeof ft!="number"||ft===1073741823)&&(pg=lt,ft=1073741823),ft={context:lt,observedBits:ft,next:null},og===null){if(ng===null)throw Error(y$7(308));og=ft,ng.dependencies={lanes:0,firstContext:ft,responders:null}}else og=og.next=ft;return lt._currentValue}var wg=!1;function xg(lt){lt.updateQueue={baseState:lt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yg(lt,ft){lt=lt.updateQueue,ft.updateQueue===lt&&(ft.updateQueue={baseState:lt.baseState,firstBaseUpdate:lt.firstBaseUpdate,lastBaseUpdate:lt.lastBaseUpdate,shared:lt.shared,effects:lt.effects})}function zg(lt,ft){return{eventTime:lt,lane:ft,tag:0,payload:null,callback:null,next:null}}function Ag(lt,ft){if(lt=lt.updateQueue,lt!==null){lt=lt.shared;var dt=lt.pending;dt===null?ft.next=ft:(ft.next=dt.next,dt.next=ft),lt.pending=ft}}function Bg(lt,ft){var dt=lt.updateQueue,vt=lt.alternate;if(vt!==null&&(vt=vt.updateQueue,dt===vt)){var Et=null,St=null;if(dt=dt.firstBaseUpdate,dt!==null){do{var Tt={eventTime:dt.eventTime,lane:dt.lane,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null};St===null?Et=St=Tt:St=St.next=Tt,dt=dt.next}while(dt!==null);St===null?Et=St=ft:St=St.next=ft}else Et=St=ft;dt={baseState:vt.baseState,firstBaseUpdate:Et,lastBaseUpdate:St,shared:vt.shared,effects:vt.effects},lt.updateQueue=dt;return}lt=dt.lastBaseUpdate,lt===null?dt.firstBaseUpdate=ft:lt.next=ft,dt.lastBaseUpdate=ft}function Cg(lt,ft,dt,vt){var Et=lt.updateQueue;wg=!1;var St=Et.firstBaseUpdate,Tt=Et.lastBaseUpdate,At=Et.shared.pending;if(At!==null){Et.shared.pending=null;var Ct=At,Rt=Ct.next;Ct.next=null,Tt===null?St=Rt:Tt.next=Rt,Tt=Ct;var Dt=lt.alternate;if(Dt!==null){Dt=Dt.updateQueue;var kt=Dt.lastBaseUpdate;kt!==Tt&&(kt===null?Dt.firstBaseUpdate=Rt:kt.next=Rt,Dt.lastBaseUpdate=Ct)}}if(St!==null){kt=Et.baseState,Tt=0,Dt=Rt=Ct=null;do{At=St.lane;var Nt=St.eventTime;if((vt&At)===At){Dt!==null&&(Dt=Dt.next={eventTime:Nt,lane:0,tag:St.tag,payload:St.payload,callback:St.callback,next:null});e:{var zt=lt,Wt=St;switch(At=ft,Nt=dt,Wt.tag){case 1:if(zt=Wt.payload,typeof zt=="function"){kt=zt.call(Nt,kt,At);break e}kt=zt;break e;case 3:zt.flags=zt.flags&-4097|64;case 0:if(zt=Wt.payload,At=typeof zt=="function"?zt.call(Nt,kt,At):zt,At==null)break e;kt=m$4({},kt,At);break e;case 2:wg=!0}}St.callback!==null&&(lt.flags|=32,At=Et.effects,At===null?Et.effects=[St]:At.push(St))}else Nt={eventTime:Nt,lane:At,tag:St.tag,payload:St.payload,callback:St.callback,next:null},Dt===null?(Rt=Dt=Nt,Ct=kt):Dt=Dt.next=Nt,Tt|=At;if(St=St.next,St===null){if(At=Et.shared.pending,At===null)break;St=At.next,At.next=null,Et.lastBaseUpdate=At,Et.shared.pending=null}}while(1);Dt===null&&(Ct=kt),Et.baseState=Ct,Et.firstBaseUpdate=Rt,Et.lastBaseUpdate=Dt,Dg|=Tt,lt.lanes=Tt,lt.memoizedState=kt}}function Eg(lt,ft,dt){if(lt=ft.effects,ft.effects=null,lt!==null)for(ft=0;ft<lt.length;ft++){var vt=lt[ft],Et=vt.callback;if(Et!==null){if(vt.callback=null,vt=dt,typeof Et!="function")throw Error(y$7(191,Et));Et.call(vt)}}}var Fg=new aa.Component().refs;function Gg(lt,ft,dt,vt){ft=lt.memoizedState,dt=dt(vt,ft),dt=dt==null?ft:m$4({},ft,dt),lt.memoizedState=dt,lt.lanes===0&&(lt.updateQueue.baseState=dt)}var Kg={isMounted:function(lt){return(lt=lt._reactInternals)?Zb(lt)===lt:!1},enqueueSetState:function(lt,ft,dt){lt=lt._reactInternals;var vt=Hg(),Et=Ig(lt),St=zg(vt,Et);St.payload=ft,dt!=null&&(St.callback=dt),Ag(lt,St),Jg(lt,Et,vt)},enqueueReplaceState:function(lt,ft,dt){lt=lt._reactInternals;var vt=Hg(),Et=Ig(lt),St=zg(vt,Et);St.tag=1,St.payload=ft,dt!=null&&(St.callback=dt),Ag(lt,St),Jg(lt,Et,vt)},enqueueForceUpdate:function(lt,ft){lt=lt._reactInternals;var dt=Hg(),vt=Ig(lt),Et=zg(dt,vt);Et.tag=2,ft!=null&&(Et.callback=ft),Ag(lt,Et),Jg(lt,vt,dt)}};function Lg(lt,ft,dt,vt,Et,St,Tt){return lt=lt.stateNode,typeof lt.shouldComponentUpdate=="function"?lt.shouldComponentUpdate(vt,St,Tt):ft.prototype&&ft.prototype.isPureReactComponent?!Je(dt,vt)||!Je(Et,St):!0}function Mg(lt,ft,dt){var vt=!1,Et=Cf,St=ft.contextType;return typeof St=="object"&&St!==null?St=vg(St):(Et=Ff(ft)?Df:M$2.current,vt=ft.contextTypes,St=(vt=vt!=null)?Ef(lt,Et):Cf),ft=new ft(dt,St),lt.memoizedState=ft.state!==null&&ft.state!==void 0?ft.state:null,ft.updater=Kg,lt.stateNode=ft,ft._reactInternals=lt,vt&&(lt=lt.stateNode,lt.__reactInternalMemoizedUnmaskedChildContext=Et,lt.__reactInternalMemoizedMaskedChildContext=St),ft}function Ng(lt,ft,dt,vt){lt=ft.state,typeof ft.componentWillReceiveProps=="function"&&ft.componentWillReceiveProps(dt,vt),typeof ft.UNSAFE_componentWillReceiveProps=="function"&&ft.UNSAFE_componentWillReceiveProps(dt,vt),ft.state!==lt&&Kg.enqueueReplaceState(ft,ft.state,null)}function Og(lt,ft,dt,vt){var Et=lt.stateNode;Et.props=dt,Et.state=lt.memoizedState,Et.refs=Fg,xg(lt);var St=ft.contextType;typeof St=="object"&&St!==null?Et.context=vg(St):(St=Ff(ft)?Df:M$2.current,Et.context=Ef(lt,St)),Cg(lt,dt,Et,vt),Et.state=lt.memoizedState,St=ft.getDerivedStateFromProps,typeof St=="function"&&(Gg(lt,ft,St,dt),Et.state=lt.memoizedState),typeof ft.getDerivedStateFromProps=="function"||typeof Et.getSnapshotBeforeUpdate=="function"||typeof Et.UNSAFE_componentWillMount!="function"&&typeof Et.componentWillMount!="function"||(ft=Et.state,typeof Et.componentWillMount=="function"&&Et.componentWillMount(),typeof Et.UNSAFE_componentWillMount=="function"&&Et.UNSAFE_componentWillMount(),ft!==Et.state&&Kg.enqueueReplaceState(Et,Et.state,null),Cg(lt,dt,Et,vt),Et.state=lt.memoizedState),typeof Et.componentDidMount=="function"&&(lt.flags|=4)}var Pg=Array.isArray;function Qg(lt,ft,dt){if(lt=dt.ref,lt!==null&&typeof lt!="function"&&typeof lt!="object"){if(dt._owner){if(dt=dt._owner,dt){if(dt.tag!==1)throw Error(y$7(309));var vt=dt.stateNode}if(!vt)throw Error(y$7(147,lt));var Et=""+lt;return ft!==null&&ft.ref!==null&&typeof ft.ref=="function"&&ft.ref._stringRef===Et?ft.ref:(ft=function(St){var Tt=vt.refs;Tt===Fg&&(Tt=vt.refs={}),St===null?delete Tt[Et]:Tt[Et]=St},ft._stringRef=Et,ft)}if(typeof lt!="string")throw Error(y$7(284));if(!dt._owner)throw Error(y$7(290,lt))}return lt}function Rg(lt,ft){if(lt.type!=="textarea")throw Error(y$7(31,Object.prototype.toString.call(ft)==="[object Object]"?"object with keys {"+Object.keys(ft).join(", ")+"}":ft))}function Sg(lt){function ft(Ut,Ht){if(lt){var Bt=Ut.lastEffect;Bt!==null?(Bt.nextEffect=Ht,Ut.lastEffect=Ht):Ut.firstEffect=Ut.lastEffect=Ht,Ht.nextEffect=null,Ht.flags=8}}function dt(Ut,Ht){if(!lt)return null;for(;Ht!==null;)ft(Ut,Ht),Ht=Ht.sibling;return null}function vt(Ut,Ht){for(Ut=new Map;Ht!==null;)Ht.key!==null?Ut.set(Ht.key,Ht):Ut.set(Ht.index,Ht),Ht=Ht.sibling;return Ut}function Et(Ut,Ht){return Ut=Tg(Ut,Ht),Ut.index=0,Ut.sibling=null,Ut}function St(Ut,Ht,Bt){return Ut.index=Bt,lt?(Bt=Ut.alternate,Bt!==null?(Bt=Bt.index,Bt<Ht?(Ut.flags=2,Ht):Bt):(Ut.flags=2,Ht)):Ht}function Tt(Ut){return lt&&Ut.alternate===null&&(Ut.flags=2),Ut}function At(Ut,Ht,Bt,Ft){return Ht===null||Ht.tag!==6?(Ht=Ug(Bt,Ut.mode,Ft),Ht.return=Ut,Ht):(Ht=Et(Ht,Bt),Ht.return=Ut,Ht)}function Ct(Ut,Ht,Bt,Ft){return Ht!==null&&Ht.elementType===Bt.type?(Ft=Et(Ht,Bt.props),Ft.ref=Qg(Ut,Ht,Bt),Ft.return=Ut,Ft):(Ft=Vg(Bt.type,Bt.key,Bt.props,null,Ut.mode,Ft),Ft.ref=Qg(Ut,Ht,Bt),Ft.return=Ut,Ft)}function Rt(Ut,Ht,Bt,Ft){return Ht===null||Ht.tag!==4||Ht.stateNode.containerInfo!==Bt.containerInfo||Ht.stateNode.implementation!==Bt.implementation?(Ht=Wg(Bt,Ut.mode,Ft),Ht.return=Ut,Ht):(Ht=Et(Ht,Bt.children||[]),Ht.return=Ut,Ht)}function Dt(Ut,Ht,Bt,Ft,tr){return Ht===null||Ht.tag!==7?(Ht=Xg(Bt,Ut.mode,Ft,tr),Ht.return=Ut,Ht):(Ht=Et(Ht,Bt),Ht.return=Ut,Ht)}function kt(Ut,Ht,Bt){if(typeof Ht=="string"||typeof Ht=="number")return Ht=Ug(""+Ht,Ut.mode,Bt),Ht.return=Ut,Ht;if(typeof Ht=="object"&&Ht!==null){switch(Ht.$$typeof){case sa:return Bt=Vg(Ht.type,Ht.key,Ht.props,null,Ut.mode,Bt),Bt.ref=Qg(Ut,null,Ht),Bt.return=Ut,Bt;case ta:return Ht=Wg(Ht,Ut.mode,Bt),Ht.return=Ut,Ht}if(Pg(Ht)||La(Ht))return Ht=Xg(Ht,Ut.mode,Bt,null),Ht.return=Ut,Ht;Rg(Ut,Ht)}return null}function Nt(Ut,Ht,Bt,Ft){var tr=Ht!==null?Ht.key:null;if(typeof Bt=="string"||typeof Bt=="number")return tr!==null?null:At(Ut,Ht,""+Bt,Ft);if(typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case sa:return Bt.key===tr?Bt.type===ua?Dt(Ut,Ht,Bt.props.children,Ft,tr):Ct(Ut,Ht,Bt,Ft):null;case ta:return Bt.key===tr?Rt(Ut,Ht,Bt,Ft):null}if(Pg(Bt)||La(Bt))return tr!==null?null:Dt(Ut,Ht,Bt,Ft,null);Rg(Ut,Bt)}return null}function zt(Ut,Ht,Bt,Ft,tr){if(typeof Ft=="string"||typeof Ft=="number")return Ut=Ut.get(Bt)||null,At(Ht,Ut,""+Ft,tr);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case sa:return Ut=Ut.get(Ft.key===null?Bt:Ft.key)||null,Ft.type===ua?Dt(Ht,Ut,Ft.props.children,tr,Ft.key):Ct(Ht,Ut,Ft,tr);case ta:return Ut=Ut.get(Ft.key===null?Bt:Ft.key)||null,Rt(Ht,Ut,Ft,tr)}if(Pg(Ft)||La(Ft))return Ut=Ut.get(Bt)||null,Dt(Ht,Ut,Ft,tr,null);Rg(Ht,Ft)}return null}function Wt(Ut,Ht,Bt,Ft){for(var tr=null,cr=null,Kt=Ht,Zt=Ht=0,rr=null;Kt!==null&&Zt<Bt.length;Zt++){Kt.index>Zt?(rr=Kt,Kt=null):rr=Kt.sibling;var ar=Nt(Ut,Kt,Bt[Zt],Ft);if(ar===null){Kt===null&&(Kt=rr);break}lt&&Kt&&ar.alternate===null&&ft(Ut,Kt),Ht=St(ar,Ht,Zt),cr===null?tr=ar:cr.sibling=ar,cr=ar,Kt=rr}if(Zt===Bt.length)return dt(Ut,Kt),tr;if(Kt===null){for(;Zt<Bt.length;Zt++)Kt=kt(Ut,Bt[Zt],Ft),Kt!==null&&(Ht=St(Kt,Ht,Zt),cr===null?tr=Kt:cr.sibling=Kt,cr=Kt);return tr}for(Kt=vt(Ut,Kt);Zt<Bt.length;Zt++)rr=zt(Kt,Ut,Zt,Bt[Zt],Ft),rr!==null&&(lt&&rr.alternate!==null&&Kt.delete(rr.key===null?Zt:rr.key),Ht=St(rr,Ht,Zt),cr===null?tr=rr:cr.sibling=rr,cr=rr);return lt&&Kt.forEach(function(sr){return ft(Ut,sr)}),tr}function nr(Ut,Ht,Bt,Ft){var tr=La(Bt);if(typeof tr!="function")throw Error(y$7(150));if(Bt=tr.call(Bt),Bt==null)throw Error(y$7(151));for(var cr=tr=null,Kt=Ht,Zt=Ht=0,rr=null,ar=Bt.next();Kt!==null&&!ar.done;Zt++,ar=Bt.next()){Kt.index>Zt?(rr=Kt,Kt=null):rr=Kt.sibling;var sr=Nt(Ut,Kt,ar.value,Ft);if(sr===null){Kt===null&&(Kt=rr);break}lt&&Kt&&sr.alternate===null&&ft(Ut,Kt),Ht=St(sr,Ht,Zt),cr===null?tr=sr:cr.sibling=sr,cr=sr,Kt=rr}if(ar.done)return dt(Ut,Kt),tr;if(Kt===null){for(;!ar.done;Zt++,ar=Bt.next())ar=kt(Ut,ar.value,Ft),ar!==null&&(Ht=St(ar,Ht,Zt),cr===null?tr=ar:cr.sibling=ar,cr=ar);return tr}for(Kt=vt(Ut,Kt);!ar.done;Zt++,ar=Bt.next())ar=zt(Kt,Ut,Zt,ar.value,Ft),ar!==null&&(lt&&ar.alternate!==null&&Kt.delete(ar.key===null?Zt:ar.key),Ht=St(ar,Ht,Zt),cr===null?tr=ar:cr.sibling=ar,cr=ar);return lt&&Kt.forEach(function(dr){return ft(Ut,dr)}),tr}return function(Ut,Ht,Bt,Ft){var tr=typeof Bt=="object"&&Bt!==null&&Bt.type===ua&&Bt.key===null;tr&&(Bt=Bt.props.children);var cr=typeof Bt=="object"&&Bt!==null;if(cr)switch(Bt.$$typeof){case sa:e:{for(cr=Bt.key,tr=Ht;tr!==null;){if(tr.key===cr){switch(tr.tag){case 7:if(Bt.type===ua){dt(Ut,tr.sibling),Ht=Et(tr,Bt.props.children),Ht.return=Ut,Ut=Ht;break e}break;default:if(tr.elementType===Bt.type){dt(Ut,tr.sibling),Ht=Et(tr,Bt.props),Ht.ref=Qg(Ut,tr,Bt),Ht.return=Ut,Ut=Ht;break e}}dt(Ut,tr);break}else ft(Ut,tr);tr=tr.sibling}Bt.type===ua?(Ht=Xg(Bt.props.children,Ut.mode,Ft,Bt.key),Ht.return=Ut,Ut=Ht):(Ft=Vg(Bt.type,Bt.key,Bt.props,null,Ut.mode,Ft),Ft.ref=Qg(Ut,Ht,Bt),Ft.return=Ut,Ut=Ft)}return Tt(Ut);case ta:e:{for(tr=Bt.key;Ht!==null;){if(Ht.key===tr)if(Ht.tag===4&&Ht.stateNode.containerInfo===Bt.containerInfo&&Ht.stateNode.implementation===Bt.implementation){dt(Ut,Ht.sibling),Ht=Et(Ht,Bt.children||[]),Ht.return=Ut,Ut=Ht;break e}else{dt(Ut,Ht);break}else ft(Ut,Ht);Ht=Ht.sibling}Ht=Wg(Bt,Ut.mode,Ft),Ht.return=Ut,Ut=Ht}return Tt(Ut)}if(typeof Bt=="string"||typeof Bt=="number")return Bt=""+Bt,Ht!==null&&Ht.tag===6?(dt(Ut,Ht.sibling),Ht=Et(Ht,Bt),Ht.return=Ut,Ut=Ht):(dt(Ut,Ht),Ht=Ug(Bt,Ut.mode,Ft),Ht.return=Ut,Ut=Ht),Tt(Ut);if(Pg(Bt))return Wt(Ut,Ht,Bt,Ft);if(La(Bt))return nr(Ut,Ht,Bt,Ft);if(cr&&Rg(Ut,Bt),typeof Bt>"u"&&!tr)switch(Ut.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y$7(152,Ra(Ut.type)||"Component"))}return dt(Ut,Ht)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);function dh(lt){if(lt===$g)throw Error(y$7(174));return lt}function eh(lt,ft){switch(I$4(ch,ft),I$4(bh,lt),I$4(ah,$g),lt=ft.nodeType,lt){case 9:case 11:ft=(ft=ft.documentElement)?ft.namespaceURI:mb(null,"");break;default:lt=lt===8?ft.parentNode:ft,ft=lt.namespaceURI||null,lt=lt.tagName,ft=mb(ft,lt)}H$2(ah),I$4(ah,ft)}function fh(){H$2(ah),H$2(bh),H$2(ch)}function gh(lt){dh(ch.current);var ft=dh(ah.current),dt=mb(ft,lt.type);ft!==dt&&(I$4(bh,lt),I$4(ah,dt))}function hh(lt){bh.current===lt&&(H$2(ah),H$2(bh))}var P$2=Bf(0);function ih(lt){for(var ft=lt;ft!==null;){if(ft.tag===13){var dt=ft.memoizedState;if(dt!==null&&(dt=dt.dehydrated,dt===null||dt.data==="$?"||dt.data==="$!"))return ft}else if(ft.tag===19&&ft.memoizedProps.revealOrder!==void 0){if(ft.flags&64)return ft}else if(ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===lt)break;for(;ft.sibling===null;){if(ft.return===null||ft.return===lt)return null;ft=ft.return}ft.sibling.return=ft.return,ft=ft.sibling}return null}var jh=null,kh=null,lh=!1;function mh(lt,ft){var dt=nh(5,null,null,0);dt.elementType="DELETED",dt.type="DELETED",dt.stateNode=ft,dt.return=lt,dt.flags=8,lt.lastEffect!==null?(lt.lastEffect.nextEffect=dt,lt.lastEffect=dt):lt.firstEffect=lt.lastEffect=dt}function oh(lt,ft){switch(lt.tag){case 5:var dt=lt.type;return ft=ft.nodeType!==1||dt.toLowerCase()!==ft.nodeName.toLowerCase()?null:ft,ft!==null?(lt.stateNode=ft,!0):!1;case 6:return ft=lt.pendingProps===""||ft.nodeType!==3?null:ft,ft!==null?(lt.stateNode=ft,!0):!1;case 13:return!1;default:return!1}}function ph(lt){if(lh){var ft=kh;if(ft){var dt=ft;if(!oh(lt,ft)){if(ft=rf(dt.nextSibling),!ft||!oh(lt,ft)){lt.flags=lt.flags&-1025|2,lh=!1,jh=lt;return}mh(jh,dt)}jh=lt,kh=rf(ft.firstChild)}else lt.flags=lt.flags&-1025|2,lh=!1,jh=lt}}function qh(lt){for(lt=lt.return;lt!==null&&lt.tag!==5&&lt.tag!==3&&lt.tag!==13;)lt=lt.return;jh=lt}function rh(lt){if(lt!==jh)return!1;if(!lh)return qh(lt),lh=!0,!1;var ft=lt.type;if(lt.tag!==5||ft!=="head"&&ft!=="body"&&!nf(ft,lt.memoizedProps))for(ft=kh;ft;)mh(lt,ft),ft=rf(ft.nextSibling);if(qh(lt),lt.tag===13){if(lt=lt.memoizedState,lt=lt!==null?lt.dehydrated:null,!lt)throw Error(y$7(317));e:{for(lt=lt.nextSibling,ft=0;lt;){if(lt.nodeType===8){var dt=lt.data;if(dt==="/$"){if(ft===0){kh=rf(lt.nextSibling);break e}ft--}else dt!=="$"&&dt!=="$!"&&dt!=="$?"||ft++}lt=lt.nextSibling}kh=null}}else kh=jh?rf(lt.stateNode.nextSibling):null;return!0}function sh(){kh=jh=null,lh=!1}var th=[];function uh(){for(var lt=0;lt<th.length;lt++)th[lt]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R$1=null,S$2=null,T$1=null,yh=!1,zh=!1;function Ah(){throw Error(y$7(321))}function Bh(lt,ft){if(ft===null)return!1;for(var dt=0;dt<ft.length&&dt<lt.length;dt++)if(!He$3(lt[dt],ft[dt]))return!1;return!0}function Ch(lt,ft,dt,vt,Et,St){if(xh=St,R$1=ft,ft.memoizedState=null,ft.updateQueue=null,ft.lanes=0,vh.current=lt===null||lt.memoizedState===null?Dh:Eh,lt=dt(vt,Et),zh){St=0;do{if(zh=!1,!(25>St))throw Error(y$7(301));St+=1,T$1=S$2=null,ft.updateQueue=null,vh.current=Fh,lt=dt(vt,Et)}while(zh)}if(vh.current=Gh,ft=S$2!==null&&S$2.next!==null,xh=0,T$1=S$2=R$1=null,yh=!1,ft)throw Error(y$7(300));return lt}function Hh(){var lt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return T$1===null?R$1.memoizedState=T$1=lt:T$1=T$1.next=lt,T$1}function Ih(){if(S$2===null){var lt=R$1.alternate;lt=lt!==null?lt.memoizedState:null}else lt=S$2.next;var ft=T$1===null?R$1.memoizedState:T$1.next;if(ft!==null)T$1=ft,S$2=lt;else{if(lt===null)throw Error(y$7(310));S$2=lt,lt={memoizedState:S$2.memoizedState,baseState:S$2.baseState,baseQueue:S$2.baseQueue,queue:S$2.queue,next:null},T$1===null?R$1.memoizedState=T$1=lt:T$1=T$1.next=lt}return T$1}function Jh(lt,ft){return typeof ft=="function"?ft(lt):ft}function Kh(lt){var ft=Ih(),dt=ft.queue;if(dt===null)throw Error(y$7(311));dt.lastRenderedReducer=lt;var vt=S$2,Et=vt.baseQueue,St=dt.pending;if(St!==null){if(Et!==null){var Tt=Et.next;Et.next=St.next,St.next=Tt}vt.baseQueue=Et=St,dt.pending=null}if(Et!==null){Et=Et.next,vt=vt.baseState;var At=Tt=St=null,Ct=Et;do{var Rt=Ct.lane;if((xh&Rt)===Rt)At!==null&&(At=At.next={lane:0,action:Ct.action,eagerReducer:Ct.eagerReducer,eagerState:Ct.eagerState,next:null}),vt=Ct.eagerReducer===lt?Ct.eagerState:lt(vt,Ct.action);else{var Dt={lane:Rt,action:Ct.action,eagerReducer:Ct.eagerReducer,eagerState:Ct.eagerState,next:null};At===null?(Tt=At=Dt,St=vt):At=At.next=Dt,R$1.lanes|=Rt,Dg|=Rt}Ct=Ct.next}while(Ct!==null&&Ct!==Et);At===null?St=vt:At.next=Tt,He$3(vt,ft.memoizedState)||(ug=!0),ft.memoizedState=vt,ft.baseState=St,ft.baseQueue=At,dt.lastRenderedState=vt}return[ft.memoizedState,dt.dispatch]}function Lh(lt){var ft=Ih(),dt=ft.queue;if(dt===null)throw Error(y$7(311));dt.lastRenderedReducer=lt;var vt=dt.dispatch,Et=dt.pending,St=ft.memoizedState;if(Et!==null){dt.pending=null;var Tt=Et=Et.next;do St=lt(St,Tt.action),Tt=Tt.next;while(Tt!==Et);He$3(St,ft.memoizedState)||(ug=!0),ft.memoizedState=St,ft.baseQueue===null&&(ft.baseState=St),dt.lastRenderedState=St}return[St,vt]}function Mh(lt,ft,dt){var vt=ft._getVersion;vt=vt(ft._source);var Et=ft._workInProgressVersionPrimary;if(Et!==null?lt=Et===vt:(lt=lt.mutableReadLanes,(lt=(xh&lt)===lt)&&(ft._workInProgressVersionPrimary=vt,th.push(ft))),lt)return dt(ft._source);throw th.push(ft),Error(y$7(350))}function Nh(lt,ft,dt,vt){var Et=U$1;if(Et===null)throw Error(y$7(349));var St=ft._getVersion,Tt=St(ft._source),At=vh.current,Ct=At.useState(function(){return Mh(Et,ft,dt)}),Rt=Ct[1],Dt=Ct[0];Ct=T$1;var kt=lt.memoizedState,Nt=kt.refs,zt=Nt.getSnapshot,Wt=kt.source;kt=kt.subscribe;var nr=R$1;return lt.memoizedState={refs:Nt,source:ft,subscribe:vt},At.useEffect(function(){Nt.getSnapshot=dt,Nt.setSnapshot=Rt;var Ut=St(ft._source);if(!He$3(Tt,Ut)){Ut=dt(ft._source),He$3(Dt,Ut)||(Rt(Ut),Ut=Ig(nr),Et.mutableReadLanes|=Ut&Et.pendingLanes),Ut=Et.mutableReadLanes,Et.entangledLanes|=Ut;for(var Ht=Et.entanglements,Bt=Ut;0<Bt;){var Ft=31-Vc(Bt),tr=1<<Ft;Ht[Ft]|=Ut,Bt&=~tr}}},[dt,ft,vt]),At.useEffect(function(){return vt(ft._source,function(){var Ut=Nt.getSnapshot,Ht=Nt.setSnapshot;try{Ht(Ut(ft._source));var Bt=Ig(nr);Et.mutableReadLanes|=Bt&Et.pendingLanes}catch(Ft){Ht(function(){throw Ft})}})},[ft,vt]),He$3(zt,dt)&&He$3(Wt,ft)&&He$3(kt,vt)||(lt={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:Dt},lt.dispatch=Rt=Oh.bind(null,R$1,lt),Ct.queue=lt,Ct.baseQueue=null,Dt=Mh(Et,ft,dt),Ct.memoizedState=Ct.baseState=Dt),Dt}function Ph(lt,ft,dt){var vt=Ih();return Nh(vt,lt,ft,dt)}function Qh(lt){var ft=Hh();return typeof lt=="function"&&(lt=lt()),ft.memoizedState=ft.baseState=lt,lt=ft.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:lt},lt=lt.dispatch=Oh.bind(null,R$1,lt),[ft.memoizedState,lt]}function Rh(lt,ft,dt,vt){return lt={tag:lt,create:ft,destroy:dt,deps:vt,next:null},ft=R$1.updateQueue,ft===null?(ft={lastEffect:null},R$1.updateQueue=ft,ft.lastEffect=lt.next=lt):(dt=ft.lastEffect,dt===null?ft.lastEffect=lt.next=lt:(vt=dt.next,dt.next=lt,lt.next=vt,ft.lastEffect=lt)),lt}function Sh(lt){var ft=Hh();return lt={current:lt},ft.memoizedState=lt}function Th(){return Ih().memoizedState}function Uh(lt,ft,dt,vt){var Et=Hh();R$1.flags|=lt,Et.memoizedState=Rh(1|ft,dt,void 0,vt===void 0?null:vt)}function Vh(lt,ft,dt,vt){var Et=Ih();vt=vt===void 0?null:vt;var St=void 0;if(S$2!==null){var Tt=S$2.memoizedState;if(St=Tt.destroy,vt!==null&&Bh(vt,Tt.deps)){Rh(ft,dt,St,vt);return}}R$1.flags|=lt,Et.memoizedState=Rh(1|ft,dt,St,vt)}function Wh(lt,ft){return Uh(516,4,lt,ft)}function Xh(lt,ft){return Vh(516,4,lt,ft)}function Yh(lt,ft){return Vh(4,2,lt,ft)}function Zh(lt,ft){if(typeof ft=="function")return lt=lt(),ft(lt),function(){ft(null)};if(ft!=null)return lt=lt(),ft.current=lt,function(){ft.current=null}}function $h(lt,ft,dt){return dt=dt!=null?dt.concat([lt]):null,Vh(4,2,Zh.bind(null,ft,lt),dt)}function ai(){}function bi(lt,ft){var dt=Ih();ft=ft===void 0?null:ft;var vt=dt.memoizedState;return vt!==null&&ft!==null&&Bh(ft,vt[1])?vt[0]:(dt.memoizedState=[lt,ft],lt)}function ci(lt,ft){var dt=Ih();ft=ft===void 0?null:ft;var vt=dt.memoizedState;return vt!==null&&ft!==null&&Bh(ft,vt[1])?vt[0]:(lt=lt(),dt.memoizedState=[lt,ft],lt)}function di(lt,ft){var dt=eg();gg(98>dt?98:dt,function(){lt(!0)}),gg(97<dt?97:dt,function(){var vt=wh.transition;wh.transition=1;try{lt(!1),ft()}finally{wh.transition=vt}})}function Oh(lt,ft,dt){var vt=Hg(),Et=Ig(lt),St={lane:Et,action:dt,eagerReducer:null,eagerState:null,next:null},Tt=ft.pending;if(Tt===null?St.next=St:(St.next=Tt.next,Tt.next=St),ft.pending=St,Tt=lt.alternate,lt===R$1||Tt!==null&&Tt===R$1)zh=yh=!0;else{if(lt.lanes===0&&(Tt===null||Tt.lanes===0)&&(Tt=ft.lastRenderedReducer,Tt!==null))try{var At=ft.lastRenderedState,Ct=Tt(At,dt);if(St.eagerReducer=Tt,St.eagerState=Ct,He$3(Ct,At))return}catch{}finally{}Jg(lt,Et,vt)}}var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(lt,ft){return Hh().memoizedState=[lt,ft===void 0?null:ft],lt},useContext:vg,useEffect:Wh,useImperativeHandle:function(lt,ft,dt){return dt=dt!=null?dt.concat([lt]):null,Uh(4,2,Zh.bind(null,ft,lt),dt)},useLayoutEffect:function(lt,ft){return Uh(4,2,lt,ft)},useMemo:function(lt,ft){var dt=Hh();return ft=ft===void 0?null:ft,lt=lt(),dt.memoizedState=[lt,ft],lt},useReducer:function(lt,ft,dt){var vt=Hh();return ft=dt!==void 0?dt(ft):ft,vt.memoizedState=vt.baseState=ft,lt=vt.queue={pending:null,dispatch:null,lastRenderedReducer:lt,lastRenderedState:ft},lt=lt.dispatch=Oh.bind(null,R$1,lt),[vt.memoizedState,lt]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(lt){var ft=Qh(lt),dt=ft[0],vt=ft[1];return Wh(function(){var Et=wh.transition;wh.transition=1;try{vt(lt)}finally{wh.transition=Et}},[lt]),dt},useTransition:function(){var lt=Qh(!1),ft=lt[0];return lt=di.bind(null,lt[1]),Sh(lt),[lt,ft]},useMutableSource:function(lt,ft,dt){var vt=Hh();return vt.memoizedState={refs:{getSnapshot:ft,setSnapshot:null},source:lt,subscribe:dt},Nh(vt,lt,ft,dt)},useOpaqueIdentifier:function(){if(lh){var lt=!1,ft=uf(function(){throw lt||(lt=!0,dt("r:"+(tf++).toString(36))),Error(y$7(355))}),dt=Qh(ft)[1];return!(R$1.mode&2)&&(R$1.flags|=516,Rh(5,function(){dt("r:"+(tf++).toString(36))},void 0,null)),ft}return ft="r:"+(tf++).toString(36),Qh(ft),ft},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(lt){var ft=Kh(Jh),dt=ft[0],vt=ft[1];return Xh(function(){var Et=wh.transition;wh.transition=1;try{vt(lt)}finally{wh.transition=Et}},[lt]),dt},useTransition:function(){var lt=Kh(Jh)[0];return[Th().current,lt]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(lt){var ft=Lh(Jh),dt=ft[0],vt=ft[1];return Xh(function(){var Et=wh.transition;wh.transition=1;try{vt(lt)}finally{wh.transition=Et}},[lt]),dt},useTransition:function(){var lt=Lh(Jh)[0];return[Th().current,lt]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(lt,ft,dt,vt){ft.child=lt===null?Zg(ft,null,dt,vt):Yg(ft,lt.child,dt,vt)}function gi(lt,ft,dt,vt,Et){dt=dt.render;var St=ft.ref;return tg(ft,Et),vt=Ch(lt,ft,dt,vt,St,Et),lt!==null&&!ug?(ft.updateQueue=lt.updateQueue,ft.flags&=-517,lt.lanes&=~Et,hi(lt,ft,Et)):(ft.flags|=1,fi(lt,ft,vt,Et),ft.child)}function ii(lt,ft,dt,vt,Et,St){if(lt===null){var Tt=dt.type;return typeof Tt=="function"&&!ji(Tt)&&Tt.defaultProps===void 0&&dt.compare===null&&dt.defaultProps===void 0?(ft.tag=15,ft.type=Tt,ki(lt,ft,Tt,vt,Et,St)):(lt=Vg(dt.type,null,vt,ft,ft.mode,St),lt.ref=ft.ref,lt.return=ft,ft.child=lt)}return Tt=lt.child,!(Et&St)&&(Et=Tt.memoizedProps,dt=dt.compare,dt=dt!==null?dt:Je,dt(Et,vt)&&lt.ref===ft.ref)?hi(lt,ft,St):(ft.flags|=1,lt=Tg(Tt,vt),lt.ref=ft.ref,lt.return=ft,ft.child=lt)}function ki(lt,ft,dt,vt,Et,St){if(lt!==null&&Je(lt.memoizedProps,vt)&&lt.ref===ft.ref)if(ug=!1,(St&Et)!==0)lt.flags&16384&&(ug=!0);else return ft.lanes=lt.lanes,hi(lt,ft,St);return li(lt,ft,dt,vt,St)}function mi(lt,ft,dt){var vt=ft.pendingProps,Et=vt.children,St=lt!==null?lt.memoizedState:null;if(vt.mode==="hidden"||vt.mode==="unstable-defer-without-hiding")if(!(ft.mode&4))ft.memoizedState={baseLanes:0},ni(ft,dt);else if(dt&1073741824)ft.memoizedState={baseLanes:0},ni(ft,St!==null?St.baseLanes:dt);else return lt=St!==null?St.baseLanes|dt:dt,ft.lanes=ft.childLanes=1073741824,ft.memoizedState={baseLanes:lt},ni(ft,lt),null;else St!==null?(vt=St.baseLanes|dt,ft.memoizedState=null):vt=dt,ni(ft,vt);return fi(lt,ft,Et,dt),ft.child}function oi(lt,ft){var dt=ft.ref;(lt===null&&dt!==null||lt!==null&&lt.ref!==dt)&&(ft.flags|=128)}function li(lt,ft,dt,vt,Et){var St=Ff(dt)?Df:M$2.current;return St=Ef(ft,St),tg(ft,Et),dt=Ch(lt,ft,dt,vt,St,Et),lt!==null&&!ug?(ft.updateQueue=lt.updateQueue,ft.flags&=-517,lt.lanes&=~Et,hi(lt,ft,Et)):(ft.flags|=1,fi(lt,ft,dt,Et),ft.child)}function pi(lt,ft,dt,vt,Et){if(Ff(dt)){var St=!0;Jf(ft)}else St=!1;if(tg(ft,Et),ft.stateNode===null)lt!==null&&(lt.alternate=null,ft.alternate=null,ft.flags|=2),Mg(ft,dt,vt),Og(ft,dt,vt,Et),vt=!0;else if(lt===null){var Tt=ft.stateNode,At=ft.memoizedProps;Tt.props=At;var Ct=Tt.context,Rt=dt.contextType;typeof Rt=="object"&&Rt!==null?Rt=vg(Rt):(Rt=Ff(dt)?Df:M$2.current,Rt=Ef(ft,Rt));var Dt=dt.getDerivedStateFromProps,kt=typeof Dt=="function"||typeof Tt.getSnapshotBeforeUpdate=="function";kt||typeof Tt.UNSAFE_componentWillReceiveProps!="function"&&typeof Tt.componentWillReceiveProps!="function"||(At!==vt||Ct!==Rt)&&Ng(ft,Tt,vt,Rt),wg=!1;var Nt=ft.memoizedState;Tt.state=Nt,Cg(ft,vt,Tt,Et),Ct=ft.memoizedState,At!==vt||Nt!==Ct||N$1.current||wg?(typeof Dt=="function"&&(Gg(ft,dt,Dt,vt),Ct=ft.memoizedState),(At=wg||Lg(ft,dt,At,vt,Nt,Ct,Rt))?(kt||typeof Tt.UNSAFE_componentWillMount!="function"&&typeof Tt.componentWillMount!="function"||(typeof Tt.componentWillMount=="function"&&Tt.componentWillMount(),typeof Tt.UNSAFE_componentWillMount=="function"&&Tt.UNSAFE_componentWillMount()),typeof Tt.componentDidMount=="function"&&(ft.flags|=4)):(typeof Tt.componentDidMount=="function"&&(ft.flags|=4),ft.memoizedProps=vt,ft.memoizedState=Ct),Tt.props=vt,Tt.state=Ct,Tt.context=Rt,vt=At):(typeof Tt.componentDidMount=="function"&&(ft.flags|=4),vt=!1)}else{Tt=ft.stateNode,yg(lt,ft),At=ft.memoizedProps,Rt=ft.type===ft.elementType?At:lg(ft.type,At),Tt.props=Rt,kt=ft.pendingProps,Nt=Tt.context,Ct=dt.contextType,typeof Ct=="object"&&Ct!==null?Ct=vg(Ct):(Ct=Ff(dt)?Df:M$2.current,Ct=Ef(ft,Ct));var zt=dt.getDerivedStateFromProps;(Dt=typeof zt=="function"||typeof Tt.getSnapshotBeforeUpdate=="function")||typeof Tt.UNSAFE_componentWillReceiveProps!="function"&&typeof Tt.componentWillReceiveProps!="function"||(At!==kt||Nt!==Ct)&&Ng(ft,Tt,vt,Ct),wg=!1,Nt=ft.memoizedState,Tt.state=Nt,Cg(ft,vt,Tt,Et);var Wt=ft.memoizedState;At!==kt||Nt!==Wt||N$1.current||wg?(typeof zt=="function"&&(Gg(ft,dt,zt,vt),Wt=ft.memoizedState),(Rt=wg||Lg(ft,dt,Rt,vt,Nt,Wt,Ct))?(Dt||typeof Tt.UNSAFE_componentWillUpdate!="function"&&typeof Tt.componentWillUpdate!="function"||(typeof Tt.componentWillUpdate=="function"&&Tt.componentWillUpdate(vt,Wt,Ct),typeof Tt.UNSAFE_componentWillUpdate=="function"&&Tt.UNSAFE_componentWillUpdate(vt,Wt,Ct)),typeof Tt.componentDidUpdate=="function"&&(ft.flags|=4),typeof Tt.getSnapshotBeforeUpdate=="function"&&(ft.flags|=256)):(typeof Tt.componentDidUpdate!="function"||At===lt.memoizedProps&&Nt===lt.memoizedState||(ft.flags|=4),typeof Tt.getSnapshotBeforeUpdate!="function"||At===lt.memoizedProps&&Nt===lt.memoizedState||(ft.flags|=256),ft.memoizedProps=vt,ft.memoizedState=Wt),Tt.props=vt,Tt.state=Wt,Tt.context=Ct,vt=Rt):(typeof Tt.componentDidUpdate!="function"||At===lt.memoizedProps&&Nt===lt.memoizedState||(ft.flags|=4),typeof Tt.getSnapshotBeforeUpdate!="function"||At===lt.memoizedProps&&Nt===lt.memoizedState||(ft.flags|=256),vt=!1)}return qi(lt,ft,dt,vt,St,Et)}function qi(lt,ft,dt,vt,Et,St){oi(lt,ft);var Tt=(ft.flags&64)!==0;if(!vt&&!Tt)return Et&&Kf(ft,dt,!1),hi(lt,ft,St);vt=ft.stateNode,ei.current=ft;var At=Tt&&typeof dt.getDerivedStateFromError!="function"?null:vt.render();return ft.flags|=1,lt!==null&&Tt?(ft.child=Yg(ft,lt.child,null,St),ft.child=Yg(ft,null,At,St)):fi(lt,ft,At,St),ft.memoizedState=vt.state,Et&&Kf(ft,dt,!0),ft.child}function ri(lt){var ft=lt.stateNode;ft.pendingContext?Hf(lt,ft.pendingContext,ft.pendingContext!==ft.context):ft.context&&Hf(lt,ft.context,!1),eh(lt,ft.containerInfo)}var si={dehydrated:null,retryLane:0};function ti(lt,ft,dt){var vt=ft.pendingProps,Et=P$2.current,St=!1,Tt;return(Tt=(ft.flags&64)!==0)||(Tt=lt!==null&&lt.memoizedState===null?!1:(Et&2)!==0),Tt?(St=!0,ft.flags&=-65):lt!==null&&lt.memoizedState===null||vt.fallback===void 0||vt.unstable_avoidThisFallback===!0||(Et|=1),I$4(P$2,Et&1),lt===null?(vt.fallback!==void 0&&ph(ft),lt=vt.children,Et=vt.fallback,St?(lt=ui(ft,lt,Et,dt),ft.child.memoizedState={baseLanes:dt},ft.memoizedState=si,lt):typeof vt.unstable_expectedLoadTime=="number"?(lt=ui(ft,lt,Et,dt),ft.child.memoizedState={baseLanes:dt},ft.memoizedState=si,ft.lanes=33554432,lt):(dt=vi({mode:"visible",children:lt},ft.mode,dt,null),dt.return=ft,ft.child=dt)):lt.memoizedState!==null?St?(vt=wi(lt,ft,vt.children,vt.fallback,dt),St=ft.child,Et=lt.child.memoizedState,St.memoizedState=Et===null?{baseLanes:dt}:{baseLanes:Et.baseLanes|dt},St.childLanes=lt.childLanes&~dt,ft.memoizedState=si,vt):(dt=xi(lt,ft,vt.children,dt),ft.memoizedState=null,dt):St?(vt=wi(lt,ft,vt.children,vt.fallback,dt),St=ft.child,Et=lt.child.memoizedState,St.memoizedState=Et===null?{baseLanes:dt}:{baseLanes:Et.baseLanes|dt},St.childLanes=lt.childLanes&~dt,ft.memoizedState=si,vt):(dt=xi(lt,ft,vt.children,dt),ft.memoizedState=null,dt)}function ui(lt,ft,dt,vt){var Et=lt.mode,St=lt.child;return ft={mode:"hidden",children:ft},!(Et&2)&&St!==null?(St.childLanes=0,St.pendingProps=ft):St=vi(ft,Et,0,null),dt=Xg(dt,Et,vt,null),St.return=lt,dt.return=lt,St.sibling=dt,lt.child=St,dt}function xi(lt,ft,dt,vt){var Et=lt.child;return lt=Et.sibling,dt=Tg(Et,{mode:"visible",children:dt}),!(ft.mode&2)&&(dt.lanes=vt),dt.return=ft,dt.sibling=null,lt!==null&&(lt.nextEffect=null,lt.flags=8,ft.firstEffect=ft.lastEffect=lt),ft.child=dt}function wi(lt,ft,dt,vt,Et){var St=ft.mode,Tt=lt.child;lt=Tt.sibling;var At={mode:"hidden",children:dt};return!(St&2)&&ft.child!==Tt?(dt=ft.child,dt.childLanes=0,dt.pendingProps=At,Tt=dt.lastEffect,Tt!==null?(ft.firstEffect=dt.firstEffect,ft.lastEffect=Tt,Tt.nextEffect=null):ft.firstEffect=ft.lastEffect=null):dt=Tg(Tt,At),lt!==null?vt=Tg(lt,vt):(vt=Xg(vt,St,Et,null),vt.flags|=2),vt.return=ft,dt.return=ft,dt.sibling=vt,ft.child=dt,vt}function yi(lt,ft){lt.lanes|=ft;var dt=lt.alternate;dt!==null&&(dt.lanes|=ft),sg(lt.return,ft)}function zi(lt,ft,dt,vt,Et,St){var Tt=lt.memoizedState;Tt===null?lt.memoizedState={isBackwards:ft,rendering:null,renderingStartTime:0,last:vt,tail:dt,tailMode:Et,lastEffect:St}:(Tt.isBackwards=ft,Tt.rendering=null,Tt.renderingStartTime=0,Tt.last=vt,Tt.tail=dt,Tt.tailMode=Et,Tt.lastEffect=St)}function Ai(lt,ft,dt){var vt=ft.pendingProps,Et=vt.revealOrder,St=vt.tail;if(fi(lt,ft,vt.children,dt),vt=P$2.current,vt&2)vt=vt&1|2,ft.flags|=64;else{if(lt!==null&&lt.flags&64)e:for(lt=ft.child;lt!==null;){if(lt.tag===13)lt.memoizedState!==null&&yi(lt,dt);else if(lt.tag===19)yi(lt,dt);else if(lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===ft)break e;for(;lt.sibling===null;){if(lt.return===null||lt.return===ft)break e;lt=lt.return}lt.sibling.return=lt.return,lt=lt.sibling}vt&=1}if(I$4(P$2,vt),!(ft.mode&2))ft.memoizedState=null;else switch(Et){case"forwards":for(dt=ft.child,Et=null;dt!==null;)lt=dt.alternate,lt!==null&&ih(lt)===null&&(Et=dt),dt=dt.sibling;dt=Et,dt===null?(Et=ft.child,ft.child=null):(Et=dt.sibling,dt.sibling=null),zi(ft,!1,Et,dt,St,ft.lastEffect);break;case"backwards":for(dt=null,Et=ft.child,ft.child=null;Et!==null;){if(lt=Et.alternate,lt!==null&&ih(lt)===null){ft.child=Et;break}lt=Et.sibling,Et.sibling=dt,dt=Et,Et=lt}zi(ft,!0,dt,null,St,ft.lastEffect);break;case"together":zi(ft,!1,null,null,void 0,ft.lastEffect);break;default:ft.memoizedState=null}return ft.child}function hi(lt,ft,dt){if(lt!==null&&(ft.dependencies=lt.dependencies),Dg|=ft.lanes,dt&ft.childLanes){if(lt!==null&&ft.child!==lt.child)throw Error(y$7(153));if(ft.child!==null){for(lt=ft.child,dt=Tg(lt,lt.pendingProps),ft.child=dt,dt.return=ft;lt.sibling!==null;)lt=lt.sibling,dt=dt.sibling=Tg(lt,lt.pendingProps),dt.return=ft;dt.sibling=null}return ft.child}return null}var Bi,Ci,Di,Ei;Bi=function(lt,ft){for(var dt=ft.child;dt!==null;){if(dt.tag===5||dt.tag===6)lt.appendChild(dt.stateNode);else if(dt.tag!==4&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===ft)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===ft)return;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}};Ci=function(){};Di=function(lt,ft,dt,vt){var Et=lt.memoizedProps;if(Et!==vt){lt=ft.stateNode,dh(ah.current);var St=null;switch(dt){case"input":Et=Ya(lt,Et),vt=Ya(lt,vt),St=[];break;case"option":Et=eb(lt,Et),vt=eb(lt,vt),St=[];break;case"select":Et=m$4({},Et,{value:void 0}),vt=m$4({},vt,{value:void 0}),St=[];break;case"textarea":Et=gb(lt,Et),vt=gb(lt,vt),St=[];break;default:typeof Et.onClick!="function"&&typeof vt.onClick=="function"&&(lt.onclick=jf)}vb(dt,vt);var Tt;dt=null;for(Rt in Et)if(!vt.hasOwnProperty(Rt)&&Et.hasOwnProperty(Rt)&&Et[Rt]!=null)if(Rt==="style"){var At=Et[Rt];for(Tt in At)At.hasOwnProperty(Tt)&&(dt||(dt={}),dt[Tt]="")}else Rt!=="dangerouslySetInnerHTML"&&Rt!=="children"&&Rt!=="suppressContentEditableWarning"&&Rt!=="suppressHydrationWarning"&&Rt!=="autoFocus"&&(ca.hasOwnProperty(Rt)?St||(St=[]):(St=St||[]).push(Rt,null));for(Rt in vt){var Ct=vt[Rt];if(At=Et!=null?Et[Rt]:void 0,vt.hasOwnProperty(Rt)&&Ct!==At&&(Ct!=null||At!=null))if(Rt==="style")if(At){for(Tt in At)!At.hasOwnProperty(Tt)||Ct&&Ct.hasOwnProperty(Tt)||(dt||(dt={}),dt[Tt]="");for(Tt in Ct)Ct.hasOwnProperty(Tt)&&At[Tt]!==Ct[Tt]&&(dt||(dt={}),dt[Tt]=Ct[Tt])}else dt||(St||(St=[]),St.push(Rt,dt)),dt=Ct;else Rt==="dangerouslySetInnerHTML"?(Ct=Ct?Ct.__html:void 0,At=At?At.__html:void 0,Ct!=null&&At!==Ct&&(St=St||[]).push(Rt,Ct)):Rt==="children"?typeof Ct!="string"&&typeof Ct!="number"||(St=St||[]).push(Rt,""+Ct):Rt!=="suppressContentEditableWarning"&&Rt!=="suppressHydrationWarning"&&(ca.hasOwnProperty(Rt)?(Ct!=null&&Rt==="onScroll"&&G$1("scroll",lt),St||At===Ct||(St=[])):typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===Ga?Ct.toString():(St=St||[]).push(Rt,Ct))}dt&&(St=St||[]).push("style",dt);var Rt=St;(ft.updateQueue=Rt)&&(ft.flags|=4)}};Ei=function(lt,ft,dt,vt){dt!==vt&&(ft.flags|=4)};function Fi(lt,ft){if(!lh)switch(lt.tailMode){case"hidden":ft=lt.tail;for(var dt=null;ft!==null;)ft.alternate!==null&&(dt=ft),ft=ft.sibling;dt===null?lt.tail=null:dt.sibling=null;break;case"collapsed":dt=lt.tail;for(var vt=null;dt!==null;)dt.alternate!==null&&(vt=dt),dt=dt.sibling;vt===null?ft||lt.tail===null?lt.tail=null:lt.tail.sibling=null:vt.sibling=null}}function Gi(lt,ft,dt){var vt=ft.pendingProps;switch(ft.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(ft.type)&&Gf(),null;case 3:return fh(),H$2(N$1),H$2(M$2),uh(),vt=ft.stateNode,vt.pendingContext&&(vt.context=vt.pendingContext,vt.pendingContext=null),(lt===null||lt.child===null)&&(rh(ft)?ft.flags|=4:vt.hydrate||(ft.flags|=256)),Ci(ft),null;case 5:hh(ft);var Et=dh(ch.current);if(dt=ft.type,lt!==null&&ft.stateNode!=null)Di(lt,ft,dt,vt,Et),lt.ref!==ft.ref&&(ft.flags|=128);else{if(!vt){if(ft.stateNode===null)throw Error(y$7(166));return null}if(lt=dh(ah.current),rh(ft)){vt=ft.stateNode,dt=ft.type;var St=ft.memoizedProps;switch(vt[wf]=ft,vt[xf]=St,dt){case"dialog":G$1("cancel",vt),G$1("close",vt);break;case"iframe":case"object":case"embed":G$1("load",vt);break;case"video":case"audio":for(lt=0;lt<Xe.length;lt++)G$1(Xe[lt],vt);break;case"source":G$1("error",vt);break;case"img":case"image":case"link":G$1("error",vt),G$1("load",vt);break;case"details":G$1("toggle",vt);break;case"input":Za(vt,St),G$1("invalid",vt);break;case"select":vt._wrapperState={wasMultiple:!!St.multiple},G$1("invalid",vt);break;case"textarea":hb(vt,St),G$1("invalid",vt)}vb(dt,St),lt=null;for(var Tt in St)St.hasOwnProperty(Tt)&&(Et=St[Tt],Tt==="children"?typeof Et=="string"?vt.textContent!==Et&&(lt=["children",Et]):typeof Et=="number"&&vt.textContent!==""+Et&&(lt=["children",""+Et]):ca.hasOwnProperty(Tt)&&Et!=null&&Tt==="onScroll"&&G$1("scroll",vt));switch(dt){case"input":Va(vt),cb(vt,St,!0);break;case"textarea":Va(vt),jb(vt);break;case"select":case"option":break;default:typeof St.onClick=="function"&&(vt.onclick=jf)}vt=lt,ft.updateQueue=vt,vt!==null&&(ft.flags|=4)}else{switch(Tt=Et.nodeType===9?Et:Et.ownerDocument,lt===kb.html&&(lt=lb(dt)),lt===kb.html?dt==="script"?(lt=Tt.createElement("div"),lt.innerHTML="<script><\/script>",lt=lt.removeChild(lt.firstChild)):typeof vt.is=="string"?lt=Tt.createElement(dt,{is:vt.is}):(lt=Tt.createElement(dt),dt==="select"&&(Tt=lt,vt.multiple?Tt.multiple=!0:vt.size&&(Tt.size=vt.size))):lt=Tt.createElementNS(lt,dt),lt[wf]=ft,lt[xf]=vt,Bi(lt,ft,!1,!1),ft.stateNode=lt,Tt=wb(dt,vt),dt){case"dialog":G$1("cancel",lt),G$1("close",lt),Et=vt;break;case"iframe":case"object":case"embed":G$1("load",lt),Et=vt;break;case"video":case"audio":for(Et=0;Et<Xe.length;Et++)G$1(Xe[Et],lt);Et=vt;break;case"source":G$1("error",lt),Et=vt;break;case"img":case"image":case"link":G$1("error",lt),G$1("load",lt),Et=vt;break;case"details":G$1("toggle",lt),Et=vt;break;case"input":Za(lt,vt),Et=Ya(lt,vt),G$1("invalid",lt);break;case"option":Et=eb(lt,vt);break;case"select":lt._wrapperState={wasMultiple:!!vt.multiple},Et=m$4({},vt,{value:void 0}),G$1("invalid",lt);break;case"textarea":hb(lt,vt),Et=gb(lt,vt),G$1("invalid",lt);break;default:Et=vt}vb(dt,Et);var At=Et;for(St in At)if(At.hasOwnProperty(St)){var Ct=At[St];St==="style"?tb(lt,Ct):St==="dangerouslySetInnerHTML"?(Ct=Ct?Ct.__html:void 0,Ct!=null&&ob(lt,Ct)):St==="children"?typeof Ct=="string"?(dt!=="textarea"||Ct!=="")&&pb(lt,Ct):typeof Ct=="number"&&pb(lt,""+Ct):St!=="suppressContentEditableWarning"&&St!=="suppressHydrationWarning"&&St!=="autoFocus"&&(ca.hasOwnProperty(St)?Ct!=null&&St==="onScroll"&&G$1("scroll",lt):Ct!=null&&qa(lt,St,Ct,Tt))}switch(dt){case"input":Va(lt),cb(lt,vt,!1);break;case"textarea":Va(lt),jb(lt);break;case"option":vt.value!=null&&lt.setAttribute("value",""+Sa(vt.value));break;case"select":lt.multiple=!!vt.multiple,St=vt.value,St!=null?fb(lt,!!vt.multiple,St,!1):vt.defaultValue!=null&&fb(lt,!!vt.multiple,vt.defaultValue,!0);break;default:typeof Et.onClick=="function"&&(lt.onclick=jf)}mf(dt,vt)&&(ft.flags|=4)}ft.ref!==null&&(ft.flags|=128)}return null;case 6:if(lt&&ft.stateNode!=null)Ei(lt,ft,lt.memoizedProps,vt);else{if(typeof vt!="string"&&ft.stateNode===null)throw Error(y$7(166));dt=dh(ch.current),dh(ah.current),rh(ft)?(vt=ft.stateNode,dt=ft.memoizedProps,vt[wf]=ft,vt.nodeValue!==dt&&(ft.flags|=4)):(vt=(dt.nodeType===9?dt:dt.ownerDocument).createTextNode(vt),vt[wf]=ft,ft.stateNode=vt)}return null;case 13:return H$2(P$2),vt=ft.memoizedState,ft.flags&64?(ft.lanes=dt,ft):(vt=vt!==null,dt=!1,lt===null?ft.memoizedProps.fallback!==void 0&&rh(ft):dt=lt.memoizedState!==null,vt&&!dt&&ft.mode&2&&(lt===null&&ft.memoizedProps.unstable_avoidThisFallback!==!0||P$2.current&1?V$3===0&&(V$3=3):((V$3===0||V$3===3)&&(V$3=4),U$1===null||!(Dg&134217727)&&!(Hi&134217727)||Ii(U$1,W$2))),(vt||dt)&&(ft.flags|=4),null);case 4:return fh(),Ci(ft),lt===null&&cf(ft.stateNode.containerInfo),null;case 10:return rg(ft),null;case 17:return Ff(ft.type)&&Gf(),null;case 19:if(H$2(P$2),vt=ft.memoizedState,vt===null)return null;if(St=(ft.flags&64)!==0,Tt=vt.rendering,Tt===null)if(St)Fi(vt,!1);else{if(V$3!==0||lt!==null&&lt.flags&64)for(lt=ft.child;lt!==null;){if(Tt=ih(lt),Tt!==null){for(ft.flags|=64,Fi(vt,!1),St=Tt.updateQueue,St!==null&&(ft.updateQueue=St,ft.flags|=4),vt.lastEffect===null&&(ft.firstEffect=null),ft.lastEffect=vt.lastEffect,vt=dt,dt=ft.child;dt!==null;)St=dt,lt=vt,St.flags&=2,St.nextEffect=null,St.firstEffect=null,St.lastEffect=null,Tt=St.alternate,Tt===null?(St.childLanes=0,St.lanes=lt,St.child=null,St.memoizedProps=null,St.memoizedState=null,St.updateQueue=null,St.dependencies=null,St.stateNode=null):(St.childLanes=Tt.childLanes,St.lanes=Tt.lanes,St.child=Tt.child,St.memoizedProps=Tt.memoizedProps,St.memoizedState=Tt.memoizedState,St.updateQueue=Tt.updateQueue,St.type=Tt.type,lt=Tt.dependencies,St.dependencies=lt===null?null:{lanes:lt.lanes,firstContext:lt.firstContext}),dt=dt.sibling;return I$4(P$2,P$2.current&1|2),ft.child}lt=lt.sibling}vt.tail!==null&&O$2()>Ji&&(ft.flags|=64,St=!0,Fi(vt,!1),ft.lanes=33554432)}else{if(!St)if(lt=ih(Tt),lt!==null){if(ft.flags|=64,St=!0,dt=lt.updateQueue,dt!==null&&(ft.updateQueue=dt,ft.flags|=4),Fi(vt,!0),vt.tail===null&&vt.tailMode==="hidden"&&!Tt.alternate&&!lh)return ft=ft.lastEffect=vt.lastEffect,ft!==null&&(ft.nextEffect=null),null}else 2*O$2()-vt.renderingStartTime>Ji&&dt!==1073741824&&(ft.flags|=64,St=!0,Fi(vt,!1),ft.lanes=33554432);vt.isBackwards?(Tt.sibling=ft.child,ft.child=Tt):(dt=vt.last,dt!==null?dt.sibling=Tt:ft.child=Tt,vt.last=Tt)}return vt.tail!==null?(dt=vt.tail,vt.rendering=dt,vt.tail=dt.sibling,vt.lastEffect=ft.lastEffect,vt.renderingStartTime=O$2(),dt.sibling=null,ft=P$2.current,I$4(P$2,St?ft&1|2:ft&1),dt):null;case 23:case 24:return Ki(),lt!==null&&lt.memoizedState!==null!=(ft.memoizedState!==null)&&vt.mode!=="unstable-defer-without-hiding"&&(ft.flags|=4),null}throw Error(y$7(156,ft.tag))}function Li(lt){switch(lt.tag){case 1:Ff(lt.type)&&Gf();var ft=lt.flags;return ft&4096?(lt.flags=ft&-4097|64,lt):null;case 3:if(fh(),H$2(N$1),H$2(M$2),uh(),ft=lt.flags,ft&64)throw Error(y$7(285));return lt.flags=ft&-4097|64,lt;case 5:return hh(lt),null;case 13:return H$2(P$2),ft=lt.flags,ft&4096?(lt.flags=ft&-4097|64,lt):null;case 19:return H$2(P$2),null;case 4:return fh(),null;case 10:return rg(lt),null;case 23:case 24:return Ki(),null;default:return null}}function Mi(lt,ft){try{var dt="",vt=ft;do dt+=Qa(vt),vt=vt.return;while(vt);var Et=dt}catch(St){Et=`
Error generating stack: `+St.message+`
`+St.stack}return{value:lt,source:ft,stack:Et}}function Ni(lt,ft){try{console.error(ft.value)}catch(dt){setTimeout(function(){throw dt})}}var Oi=typeof WeakMap=="function"?WeakMap:Map;function Pi(lt,ft,dt){dt=zg(-1,dt),dt.tag=3,dt.payload={element:null};var vt=ft.value;return dt.callback=function(){Qi||(Qi=!0,Ri=vt),Ni(lt,ft)},dt}function Si(lt,ft,dt){dt=zg(-1,dt),dt.tag=3;var vt=lt.type.getDerivedStateFromError;if(typeof vt=="function"){var Et=ft.value;dt.payload=function(){return Ni(lt,ft),vt(Et)}}var St=lt.stateNode;return St!==null&&typeof St.componentDidCatch=="function"&&(dt.callback=function(){typeof vt!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this),Ni(lt,ft));var Tt=ft.stack;this.componentDidCatch(ft.value,{componentStack:Tt!==null?Tt:""})}),dt}var Ui=typeof WeakSet=="function"?WeakSet:Set;function Vi(lt){var ft=lt.ref;if(ft!==null)if(typeof ft=="function")try{ft(null)}catch(dt){Wi(lt,dt)}else ft.current=null}function Xi(lt,ft){switch(ft.tag){case 0:case 11:case 15:case 22:return;case 1:if(ft.flags&256&&lt!==null){var dt=lt.memoizedProps,vt=lt.memoizedState;lt=ft.stateNode,ft=lt.getSnapshotBeforeUpdate(ft.elementType===ft.type?dt:lg(ft.type,dt),vt),lt.__reactInternalSnapshotBeforeUpdate=ft}return;case 3:ft.flags&256&&qf(ft.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y$7(163))}function Yi(lt,ft,dt){switch(dt.tag){case 0:case 11:case 15:case 22:if(ft=dt.updateQueue,ft=ft!==null?ft.lastEffect:null,ft!==null){lt=ft=ft.next;do{if((lt.tag&3)===3){var vt=lt.create;lt.destroy=vt()}lt=lt.next}while(lt!==ft)}if(ft=dt.updateQueue,ft=ft!==null?ft.lastEffect:null,ft!==null){lt=ft=ft.next;do{var Et=lt;vt=Et.next,Et=Et.tag,Et&4&&Et&1&&(Zi(dt,lt),$i(dt,lt)),lt=vt}while(lt!==ft)}return;case 1:lt=dt.stateNode,dt.flags&4&&(ft===null?lt.componentDidMount():(vt=dt.elementType===dt.type?ft.memoizedProps:lg(dt.type,ft.memoizedProps),lt.componentDidUpdate(vt,ft.memoizedState,lt.__reactInternalSnapshotBeforeUpdate))),ft=dt.updateQueue,ft!==null&&Eg(dt,ft,lt);return;case 3:if(ft=dt.updateQueue,ft!==null){if(lt=null,dt.child!==null)switch(dt.child.tag){case 5:lt=dt.child.stateNode;break;case 1:lt=dt.child.stateNode}Eg(dt,ft,lt)}return;case 5:lt=dt.stateNode,ft===null&&dt.flags&4&&mf(dt.type,dt.memoizedProps)&&lt.focus();return;case 6:return;case 4:return;case 12:return;case 13:dt.memoizedState===null&&(dt=dt.alternate,dt!==null&&(dt=dt.memoizedState,dt!==null&&(dt=dt.dehydrated,dt!==null&&Cc(dt))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y$7(163))}function aj(lt,ft){for(var dt=lt;;){if(dt.tag===5){var vt=dt.stateNode;if(ft)vt=vt.style,typeof vt.setProperty=="function"?vt.setProperty("display","none","important"):vt.display="none";else{vt=dt.stateNode;var Et=dt.memoizedProps.style;Et=Et!=null&&Et.hasOwnProperty("display")?Et.display:null,vt.style.display=sb("display",Et)}}else if(dt.tag===6)dt.stateNode.nodeValue=ft?"":dt.memoizedProps;else if((dt.tag!==23&&dt.tag!==24||dt.memoizedState===null||dt===lt)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===lt)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===lt)return;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}}function bj(lt,ft){if(Mf&&typeof Mf.onCommitFiberUnmount=="function")try{Mf.onCommitFiberUnmount(Lf,ft)}catch{}switch(ft.tag){case 0:case 11:case 14:case 15:case 22:if(lt=ft.updateQueue,lt!==null&&(lt=lt.lastEffect,lt!==null)){var dt=lt=lt.next;do{var vt=dt,Et=vt.destroy;if(vt=vt.tag,Et!==void 0)if(vt&4)Zi(ft,dt);else{vt=ft;try{Et()}catch(St){Wi(vt,St)}}dt=dt.next}while(dt!==lt)}break;case 1:if(Vi(ft),lt=ft.stateNode,typeof lt.componentWillUnmount=="function")try{lt.props=ft.memoizedProps,lt.state=ft.memoizedState,lt.componentWillUnmount()}catch(St){Wi(ft,St)}break;case 5:Vi(ft);break;case 4:cj(lt,ft)}}function dj(lt){lt.alternate=null,lt.child=null,lt.dependencies=null,lt.firstEffect=null,lt.lastEffect=null,lt.memoizedProps=null,lt.memoizedState=null,lt.pendingProps=null,lt.return=null,lt.updateQueue=null}function ej(lt){return lt.tag===5||lt.tag===3||lt.tag===4}function fj(lt){e:{for(var ft=lt.return;ft!==null;){if(ej(ft))break e;ft=ft.return}throw Error(y$7(160))}var dt=ft;switch(ft=dt.stateNode,dt.tag){case 5:var vt=!1;break;case 3:ft=ft.containerInfo,vt=!0;break;case 4:ft=ft.containerInfo,vt=!0;break;default:throw Error(y$7(161))}dt.flags&16&&(pb(ft,""),dt.flags&=-17);e:t:for(dt=lt;;){for(;dt.sibling===null;){if(dt.return===null||ej(dt.return)){dt=null;break e}dt=dt.return}for(dt.sibling.return=dt.return,dt=dt.sibling;dt.tag!==5&&dt.tag!==6&&dt.tag!==18;){if(dt.flags&2||dt.child===null||dt.tag===4)continue t;dt.child.return=dt,dt=dt.child}if(!(dt.flags&2)){dt=dt.stateNode;break e}}vt?gj(lt,dt,ft):hj(lt,dt,ft)}function gj(lt,ft,dt){var vt=lt.tag,Et=vt===5||vt===6;if(Et)lt=Et?lt.stateNode:lt.stateNode.instance,ft?dt.nodeType===8?dt.parentNode.insertBefore(lt,ft):dt.insertBefore(lt,ft):(dt.nodeType===8?(ft=dt.parentNode,ft.insertBefore(lt,dt)):(ft=dt,ft.appendChild(lt)),dt=dt._reactRootContainer,dt!=null||ft.onclick!==null||(ft.onclick=jf));else if(vt!==4&&(lt=lt.child,lt!==null))for(gj(lt,ft,dt),lt=lt.sibling;lt!==null;)gj(lt,ft,dt),lt=lt.sibling}function hj(lt,ft,dt){var vt=lt.tag,Et=vt===5||vt===6;if(Et)lt=Et?lt.stateNode:lt.stateNode.instance,ft?dt.insertBefore(lt,ft):dt.appendChild(lt);else if(vt!==4&&(lt=lt.child,lt!==null))for(hj(lt,ft,dt),lt=lt.sibling;lt!==null;)hj(lt,ft,dt),lt=lt.sibling}function cj(lt,ft){for(var dt=ft,vt=!1,Et,St;;){if(!vt){vt=dt.return;e:for(;;){if(vt===null)throw Error(y$7(160));switch(Et=vt.stateNode,vt.tag){case 5:St=!1;break e;case 3:Et=Et.containerInfo,St=!0;break e;case 4:Et=Et.containerInfo,St=!0;break e}vt=vt.return}vt=!0}if(dt.tag===5||dt.tag===6){e:for(var Tt=lt,At=dt,Ct=At;;)if(bj(Tt,Ct),Ct.child!==null&&Ct.tag!==4)Ct.child.return=Ct,Ct=Ct.child;else{if(Ct===At)break e;for(;Ct.sibling===null;){if(Ct.return===null||Ct.return===At)break e;Ct=Ct.return}Ct.sibling.return=Ct.return,Ct=Ct.sibling}St?(Tt=Et,At=dt.stateNode,Tt.nodeType===8?Tt.parentNode.removeChild(At):Tt.removeChild(At)):Et.removeChild(dt.stateNode)}else if(dt.tag===4){if(dt.child!==null){Et=dt.stateNode.containerInfo,St=!0,dt.child.return=dt,dt=dt.child;continue}}else if(bj(lt,dt),dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===ft)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===ft)return;dt=dt.return,dt.tag===4&&(vt=!1)}dt.sibling.return=dt.return,dt=dt.sibling}}function ij(lt,ft){switch(ft.tag){case 0:case 11:case 14:case 15:case 22:var dt=ft.updateQueue;if(dt=dt!==null?dt.lastEffect:null,dt!==null){var vt=dt=dt.next;do(vt.tag&3)===3&&(lt=vt.destroy,vt.destroy=void 0,lt!==void 0&&lt()),vt=vt.next;while(vt!==dt)}return;case 1:return;case 5:if(dt=ft.stateNode,dt!=null){vt=ft.memoizedProps;var Et=lt!==null?lt.memoizedProps:vt;lt=ft.type;var St=ft.updateQueue;if(ft.updateQueue=null,St!==null){for(dt[xf]=vt,lt==="input"&&vt.type==="radio"&&vt.name!=null&&$a(dt,vt),wb(lt,Et),ft=wb(lt,vt),Et=0;Et<St.length;Et+=2){var Tt=St[Et],At=St[Et+1];Tt==="style"?tb(dt,At):Tt==="dangerouslySetInnerHTML"?ob(dt,At):Tt==="children"?pb(dt,At):qa(dt,Tt,At,ft)}switch(lt){case"input":ab(dt,vt);break;case"textarea":ib(dt,vt);break;case"select":lt=dt._wrapperState.wasMultiple,dt._wrapperState.wasMultiple=!!vt.multiple,St=vt.value,St!=null?fb(dt,!!vt.multiple,St,!1):lt!==!!vt.multiple&&(vt.defaultValue!=null?fb(dt,!!vt.multiple,vt.defaultValue,!0):fb(dt,!!vt.multiple,vt.multiple?[]:"",!1))}}}return;case 6:if(ft.stateNode===null)throw Error(y$7(162));ft.stateNode.nodeValue=ft.memoizedProps;return;case 3:dt=ft.stateNode,dt.hydrate&&(dt.hydrate=!1,Cc(dt.containerInfo));return;case 12:return;case 13:ft.memoizedState!==null&&(jj=O$2(),aj(ft.child,!0)),kj(ft);return;case 19:kj(ft);return;case 17:return;case 23:case 24:aj(ft,ft.memoizedState!==null);return}throw Error(y$7(163))}function kj(lt){var ft=lt.updateQueue;if(ft!==null){lt.updateQueue=null;var dt=lt.stateNode;dt===null&&(dt=lt.stateNode=new Ui),ft.forEach(function(vt){var Et=lj.bind(null,lt,vt);dt.has(vt)||(dt.add(vt),vt.then(Et,Et))})}}function mj(lt,ft){return lt!==null&&(lt=lt.memoizedState,lt===null||lt.dehydrated!==null)?(ft=ft.memoizedState,ft!==null&&ft.dehydrated===null):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X$1=0,U$1=null,Y$1=null,W$2=0,qj=0,rj=Bf(0),V$3=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=1/0;function wj(){Ji=O$2()+500}var Z$1=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return X$1&48?O$2():Fj!==-1?Fj:Fj=O$2()}function Ig(lt){if(lt=lt.mode,!(lt&2))return 1;if(!(lt&4))return eg()===99?1:2;if(Gj===0&&(Gj=tj),kg.transition!==0){Hj!==0&&(Hj=vj!==null?vj.pendingLanes:0),lt=Gj;var ft=4186112&~Hj;return ft&=-ft,ft===0&&(lt=4186112&~lt,ft=lt&-lt,ft===0&&(ft=8192)),ft}return lt=eg(),X$1&4&&lt===98?lt=Xc(12,Gj):(lt=Sc(lt),lt=Xc(lt,Gj)),lt}function Jg(lt,ft,dt){if(50<Dj)throw Dj=0,Ej=null,Error(y$7(185));if(lt=Kj(lt,ft),lt===null)return null;$c(lt,ft,dt),lt===U$1&&(Hi|=ft,V$3===4&&Ii(lt,W$2));var vt=eg();ft===1?X$1&8&&!(X$1&48)?Lj(lt):(Mj(lt,dt),X$1===0&&(wj(),ig())):(!(X$1&4)||vt!==98&&vt!==99||(Cj===null?Cj=new Set([lt]):Cj.add(lt)),Mj(lt,dt)),vj=lt}function Kj(lt,ft){lt.lanes|=ft;var dt=lt.alternate;for(dt!==null&&(dt.lanes|=ft),dt=lt,lt=lt.return;lt!==null;)lt.childLanes|=ft,dt=lt.alternate,dt!==null&&(dt.childLanes|=ft),dt=lt,lt=lt.return;return dt.tag===3?dt.stateNode:null}function Mj(lt,ft){for(var dt=lt.callbackNode,vt=lt.suspendedLanes,Et=lt.pingedLanes,St=lt.expirationTimes,Tt=lt.pendingLanes;0<Tt;){var At=31-Vc(Tt),Ct=1<<At,Rt=St[At];if(Rt===-1){if(!(Ct&vt)||Ct&Et){Rt=ft,Rc(Ct);var Dt=F$3;St[At]=10<=Dt?Rt+250:6<=Dt?Rt+5e3:-1}}else Rt<=ft&&(lt.expiredLanes|=Ct);Tt&=~Ct}if(vt=Uc(lt,lt===U$1?W$2:0),ft=F$3,vt===0)dt!==null&&(dt!==Zf&&Pf(dt),lt.callbackNode=null,lt.callbackPriority=0);else{if(dt!==null){if(lt.callbackPriority===ft)return;dt!==Zf&&Pf(dt)}ft===15?(dt=Lj.bind(null,lt),ag===null?(ag=[dt],bg=Of(Uf,jg)):ag.push(dt),dt=Zf):ft===14?dt=hg(99,Lj.bind(null,lt)):(dt=Tc(ft),dt=hg(dt,Nj.bind(null,lt))),lt.callbackPriority=ft,lt.callbackNode=dt}}function Nj(lt){if(Fj=-1,Hj=Gj=0,X$1&48)throw Error(y$7(327));var ft=lt.callbackNode;if(Oj()&&lt.callbackNode!==ft)return null;var dt=Uc(lt,lt===U$1?W$2:0);if(dt===0)return null;var vt=dt,Et=X$1;X$1|=16;var St=Pj();(U$1!==lt||W$2!==vt)&&(wj(),Qj(lt,vt));do try{Rj();break}catch(At){Sj(lt,At)}while(1);if(qg(),oj.current=St,X$1=Et,Y$1!==null?vt=0:(U$1=null,W$2=0,vt=V$3),tj&Hi)Qj(lt,0);else if(vt!==0){if(vt===2&&(X$1|=64,lt.hydrate&&(lt.hydrate=!1,qf(lt.containerInfo)),dt=Wc(lt),dt!==0&&(vt=Tj(lt,dt))),vt===1)throw ft=sj,Qj(lt,0),Ii(lt,dt),Mj(lt,O$2()),ft;switch(lt.finishedWork=lt.current.alternate,lt.finishedLanes=dt,vt){case 0:case 1:throw Error(y$7(345));case 2:Uj(lt);break;case 3:if(Ii(lt,dt),(dt&62914560)===dt&&(vt=jj+500-O$2(),10<vt)){if(Uc(lt,0)!==0)break;if(Et=lt.suspendedLanes,(Et&dt)!==dt){Hg(),lt.pingedLanes|=lt.suspendedLanes&Et;break}lt.timeoutHandle=of(Uj.bind(null,lt),vt);break}Uj(lt);break;case 4:if(Ii(lt,dt),(dt&4186112)===dt)break;for(vt=lt.eventTimes,Et=-1;0<dt;){var Tt=31-Vc(dt);St=1<<Tt,Tt=vt[Tt],Tt>Et&&(Et=Tt),dt&=~St}if(dt=Et,dt=O$2()-dt,dt=(120>dt?120:480>dt?480:1080>dt?1080:1920>dt?1920:3e3>dt?3e3:4320>dt?4320:1960*nj(dt/1960))-dt,10<dt){lt.timeoutHandle=of(Uj.bind(null,lt),dt);break}Uj(lt);break;case 5:Uj(lt);break;default:throw Error(y$7(329))}}return Mj(lt,O$2()),lt.callbackNode===ft?Nj.bind(null,lt):null}function Ii(lt,ft){for(ft&=~uj,ft&=~Hi,lt.suspendedLanes|=ft,lt.pingedLanes&=~ft,lt=lt.expirationTimes;0<ft;){var dt=31-Vc(ft),vt=1<<dt;lt[dt]=-1,ft&=~vt}}function Lj(lt){if(X$1&48)throw Error(y$7(327));if(Oj(),lt===U$1&&lt.expiredLanes&W$2){var ft=W$2,dt=Tj(lt,ft);tj&Hi&&(ft=Uc(lt,ft),dt=Tj(lt,ft))}else ft=Uc(lt,0),dt=Tj(lt,ft);if(lt.tag!==0&&dt===2&&(X$1|=64,lt.hydrate&&(lt.hydrate=!1,qf(lt.containerInfo)),ft=Wc(lt),ft!==0&&(dt=Tj(lt,ft))),dt===1)throw dt=sj,Qj(lt,0),Ii(lt,ft),Mj(lt,O$2()),dt;return lt.finishedWork=lt.current.alternate,lt.finishedLanes=ft,Uj(lt),Mj(lt,O$2()),null}function Vj(){if(Cj!==null){var lt=Cj;Cj=null,lt.forEach(function(ft){ft.expiredLanes|=24&ft.pendingLanes,Mj(ft,O$2())})}ig()}function Wj(lt,ft){var dt=X$1;X$1|=1;try{return lt(ft)}finally{X$1=dt,X$1===0&&(wj(),ig())}}function Xj(lt,ft){var dt=X$1;X$1&=-2,X$1|=8;try{return lt(ft)}finally{X$1=dt,X$1===0&&(wj(),ig())}}function ni(lt,ft){I$4(rj,qj),qj|=ft,tj|=ft}function Ki(){qj=rj.current,H$2(rj)}function Qj(lt,ft){lt.finishedWork=null,lt.finishedLanes=0;var dt=lt.timeoutHandle;if(dt!==-1&&(lt.timeoutHandle=-1,pf(dt)),Y$1!==null)for(dt=Y$1.return;dt!==null;){var vt=dt;switch(vt.tag){case 1:vt=vt.type.childContextTypes,vt!=null&&Gf();break;case 3:fh(),H$2(N$1),H$2(M$2),uh();break;case 5:hh(vt);break;case 4:fh();break;case 13:H$2(P$2);break;case 19:H$2(P$2);break;case 10:rg(vt);break;case 23:case 24:Ki()}dt=dt.return}U$1=lt,Y$1=Tg(lt.current,null),W$2=qj=tj=ft,V$3=0,sj=null,uj=Hi=Dg=0}function Sj(lt,ft){do{var dt=Y$1;try{if(qg(),vh.current=Gh,yh){for(var vt=R$1.memoizedState;vt!==null;){var Et=vt.queue;Et!==null&&(Et.pending=null),vt=vt.next}yh=!1}if(xh=0,T$1=S$2=R$1=null,zh=!1,pj.current=null,dt===null||dt.return===null){V$3=1,sj=ft,Y$1=null;break}e:{var St=lt,Tt=dt.return,At=dt,Ct=ft;if(ft=W$2,At.flags|=2048,At.firstEffect=At.lastEffect=null,Ct!==null&&typeof Ct=="object"&&typeof Ct.then=="function"){var Rt=Ct;if(!(At.mode&2)){var Dt=At.alternate;Dt?(At.updateQueue=Dt.updateQueue,At.memoizedState=Dt.memoizedState,At.lanes=Dt.lanes):(At.updateQueue=null,At.memoizedState=null)}var kt=(P$2.current&1)!==0,Nt=Tt;do{var zt;if(zt=Nt.tag===13){var Wt=Nt.memoizedState;if(Wt!==null)zt=Wt.dehydrated!==null;else{var nr=Nt.memoizedProps;zt=nr.fallback===void 0?!1:nr.unstable_avoidThisFallback!==!0?!0:!kt}}if(zt){var Ut=Nt.updateQueue;if(Ut===null){var Ht=new Set;Ht.add(Rt),Nt.updateQueue=Ht}else Ut.add(Rt);if(!(Nt.mode&2)){if(Nt.flags|=64,At.flags|=16384,At.flags&=-2981,At.tag===1)if(At.alternate===null)At.tag=17;else{var Bt=zg(-1,1);Bt.tag=2,Ag(At,Bt)}At.lanes|=1;break e}Ct=void 0,At=ft;var Ft=St.pingCache;if(Ft===null?(Ft=St.pingCache=new Oi,Ct=new Set,Ft.set(Rt,Ct)):(Ct=Ft.get(Rt),Ct===void 0&&(Ct=new Set,Ft.set(Rt,Ct))),!Ct.has(At)){Ct.add(At);var tr=Yj.bind(null,St,Rt,At);Rt.then(tr,tr)}Nt.flags|=4096,Nt.lanes=ft;break e}Nt=Nt.return}while(Nt!==null);Ct=Error((Ra(At.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}V$3!==5&&(V$3=2),Ct=Mi(Ct,At),Nt=Tt;do{switch(Nt.tag){case 3:St=Ct,Nt.flags|=4096,ft&=-ft,Nt.lanes|=ft;var cr=Pi(Nt,St,ft);Bg(Nt,cr);break e;case 1:St=Ct;var Kt=Nt.type,Zt=Nt.stateNode;if(!(Nt.flags&64)&&(typeof Kt.getDerivedStateFromError=="function"||Zt!==null&&typeof Zt.componentDidCatch=="function"&&(Ti===null||!Ti.has(Zt)))){Nt.flags|=4096,ft&=-ft,Nt.lanes|=ft;var rr=Si(Nt,St,ft);Bg(Nt,rr);break e}}Nt=Nt.return}while(Nt!==null)}Zj(dt)}catch(ar){ft=ar,Y$1===dt&&dt!==null&&(Y$1=dt=dt.return);continue}break}while(1)}function Pj(){var lt=oj.current;return oj.current=Gh,lt===null?Gh:lt}function Tj(lt,ft){var dt=X$1;X$1|=16;var vt=Pj();U$1===lt&&W$2===ft||Qj(lt,ft);do try{ak();break}catch(Et){Sj(lt,Et)}while(1);if(qg(),X$1=dt,oj.current=vt,Y$1!==null)throw Error(y$7(261));return U$1=null,W$2=0,V$3}function ak(){for(;Y$1!==null;)bk(Y$1)}function Rj(){for(;Y$1!==null&&!Qf();)bk(Y$1)}function bk(lt){var ft=ck(lt.alternate,lt,qj);lt.memoizedProps=lt.pendingProps,ft===null?Zj(lt):Y$1=ft,pj.current=null}function Zj(lt){var ft=lt;do{var dt=ft.alternate;if(lt=ft.return,ft.flags&2048){if(dt=Li(ft),dt!==null){dt.flags&=2047,Y$1=dt;return}lt!==null&&(lt.firstEffect=lt.lastEffect=null,lt.flags|=2048)}else{if(dt=Gi(dt,ft,qj),dt!==null){Y$1=dt;return}if(dt=ft,dt.tag!==24&&dt.tag!==23||dt.memoizedState===null||qj&1073741824||!(dt.mode&4)){for(var vt=0,Et=dt.child;Et!==null;)vt|=Et.lanes|Et.childLanes,Et=Et.sibling;dt.childLanes=vt}lt!==null&&!(lt.flags&2048)&&(lt.firstEffect===null&&(lt.firstEffect=ft.firstEffect),ft.lastEffect!==null&&(lt.lastEffect!==null&&(lt.lastEffect.nextEffect=ft.firstEffect),lt.lastEffect=ft.lastEffect),1<ft.flags&&(lt.lastEffect!==null?lt.lastEffect.nextEffect=ft:lt.firstEffect=ft,lt.lastEffect=ft))}if(ft=ft.sibling,ft!==null){Y$1=ft;return}Y$1=ft=lt}while(ft!==null);V$3===0&&(V$3=5)}function Uj(lt){var ft=eg();return gg(99,dk.bind(null,lt,ft)),null}function dk(lt,ft){do Oj();while(yj!==null);if(X$1&48)throw Error(y$7(327));var dt=lt.finishedWork;if(dt===null)return null;if(lt.finishedWork=null,lt.finishedLanes=0,dt===lt.current)throw Error(y$7(177));lt.callbackNode=null;var vt=dt.lanes|dt.childLanes,Et=vt,St=lt.pendingLanes&~Et;lt.pendingLanes=Et,lt.suspendedLanes=0,lt.pingedLanes=0,lt.expiredLanes&=Et,lt.mutableReadLanes&=Et,lt.entangledLanes&=Et,Et=lt.entanglements;for(var Tt=lt.eventTimes,At=lt.expirationTimes;0<St;){var Ct=31-Vc(St),Rt=1<<Ct;Et[Ct]=0,Tt[Ct]=-1,At[Ct]=-1,St&=~Rt}if(Cj!==null&&!(vt&24)&&Cj.has(lt)&&Cj.delete(lt),lt===U$1&&(Y$1=U$1=null,W$2=0),1<dt.flags?dt.lastEffect!==null?(dt.lastEffect.nextEffect=dt,vt=dt.firstEffect):vt=dt:vt=dt.firstEffect,vt!==null){if(Et=X$1,X$1|=32,pj.current=null,kf=fd,Tt=Ne$3(),Oe$1(Tt)){if("selectionStart"in Tt)At={start:Tt.selectionStart,end:Tt.selectionEnd};else e:if(At=(At=Tt.ownerDocument)&&At.defaultView||window,(Rt=At.getSelection&&At.getSelection())&&Rt.rangeCount!==0){At=Rt.anchorNode,St=Rt.anchorOffset,Ct=Rt.focusNode,Rt=Rt.focusOffset;try{At.nodeType,Ct.nodeType}catch{At=null;break e}var Dt=0,kt=-1,Nt=-1,zt=0,Wt=0,nr=Tt,Ut=null;t:for(;;){for(var Ht;nr!==At||St!==0&&nr.nodeType!==3||(kt=Dt+St),nr!==Ct||Rt!==0&&nr.nodeType!==3||(Nt=Dt+Rt),nr.nodeType===3&&(Dt+=nr.nodeValue.length),(Ht=nr.firstChild)!==null;)Ut=nr,nr=Ht;for(;;){if(nr===Tt)break t;if(Ut===At&&++zt===St&&(kt=Dt),Ut===Ct&&++Wt===Rt&&(Nt=Dt),(Ht=nr.nextSibling)!==null)break;nr=Ut,Ut=nr.parentNode}nr=Ht}At=kt===-1||Nt===-1?null:{start:kt,end:Nt}}else At=null;At=At||{start:0,end:0}}else At=null;lf={focusedElem:Tt,selectionRange:At},fd=!1,Ij=null,Jj=!1,Z$1=vt;do try{ek()}catch(ar){if(Z$1===null)throw Error(y$7(330));Wi(Z$1,ar),Z$1=Z$1.nextEffect}while(Z$1!==null);Ij=null,Z$1=vt;do try{for(Tt=lt;Z$1!==null;){var Bt=Z$1.flags;if(Bt&16&&pb(Z$1.stateNode,""),Bt&128){var Ft=Z$1.alternate;if(Ft!==null){var tr=Ft.ref;tr!==null&&(typeof tr=="function"?tr(null):tr.current=null)}}switch(Bt&1038){case 2:fj(Z$1),Z$1.flags&=-3;break;case 6:fj(Z$1),Z$1.flags&=-3,ij(Z$1.alternate,Z$1);break;case 1024:Z$1.flags&=-1025;break;case 1028:Z$1.flags&=-1025,ij(Z$1.alternate,Z$1);break;case 4:ij(Z$1.alternate,Z$1);break;case 8:At=Z$1,cj(Tt,At);var cr=At.alternate;dj(At),cr!==null&&dj(cr)}Z$1=Z$1.nextEffect}}catch(ar){if(Z$1===null)throw Error(y$7(330));Wi(Z$1,ar),Z$1=Z$1.nextEffect}while(Z$1!==null);if(tr=lf,Ft=Ne$3(),Bt=tr.focusedElem,Tt=tr.selectionRange,Ft!==Bt&&Bt&&Bt.ownerDocument&&Me$1(Bt.ownerDocument.documentElement,Bt)){for(Tt!==null&&Oe$1(Bt)&&(Ft=Tt.start,tr=Tt.end,tr===void 0&&(tr=Ft),"selectionStart"in Bt?(Bt.selectionStart=Ft,Bt.selectionEnd=Math.min(tr,Bt.value.length)):(tr=(Ft=Bt.ownerDocument||document)&&Ft.defaultView||window,tr.getSelection&&(tr=tr.getSelection(),At=Bt.textContent.length,cr=Math.min(Tt.start,At),Tt=Tt.end===void 0?cr:Math.min(Tt.end,At),!tr.extend&&cr>Tt&&(At=Tt,Tt=cr,cr=At),At=Le$3(Bt,cr),St=Le$3(Bt,Tt),At&&St&&(tr.rangeCount!==1||tr.anchorNode!==At.node||tr.anchorOffset!==At.offset||tr.focusNode!==St.node||tr.focusOffset!==St.offset)&&(Ft=Ft.createRange(),Ft.setStart(At.node,At.offset),tr.removeAllRanges(),cr>Tt?(tr.addRange(Ft),tr.extend(St.node,St.offset)):(Ft.setEnd(St.node,St.offset),tr.addRange(Ft)))))),Ft=[],tr=Bt;tr=tr.parentNode;)tr.nodeType===1&&Ft.push({element:tr,left:tr.scrollLeft,top:tr.scrollTop});for(typeof Bt.focus=="function"&&Bt.focus(),Bt=0;Bt<Ft.length;Bt++)tr=Ft[Bt],tr.element.scrollLeft=tr.left,tr.element.scrollTop=tr.top}fd=!!kf,lf=kf=null,lt.current=dt,Z$1=vt;do try{for(Bt=lt;Z$1!==null;){var Kt=Z$1.flags;if(Kt&36&&Yi(Bt,Z$1.alternate,Z$1),Kt&128){Ft=void 0;var Zt=Z$1.ref;if(Zt!==null){var rr=Z$1.stateNode;switch(Z$1.tag){case 5:Ft=rr;break;default:Ft=rr}typeof Zt=="function"?Zt(Ft):Zt.current=Ft}}Z$1=Z$1.nextEffect}}catch(ar){if(Z$1===null)throw Error(y$7(330));Wi(Z$1,ar),Z$1=Z$1.nextEffect}while(Z$1!==null);Z$1=null,$f(),X$1=Et}else lt.current=dt;if(xj)xj=!1,yj=lt,zj=ft;else for(Z$1=vt;Z$1!==null;)ft=Z$1.nextEffect,Z$1.nextEffect=null,Z$1.flags&8&&(Kt=Z$1,Kt.sibling=null,Kt.stateNode=null),Z$1=ft;if(vt=lt.pendingLanes,vt===0&&(Ti=null),vt===1?lt===Ej?Dj++:(Dj=0,Ej=lt):Dj=0,dt=dt.stateNode,Mf&&typeof Mf.onCommitFiberRoot=="function")try{Mf.onCommitFiberRoot(Lf,dt,void 0,(dt.current.flags&64)===64)}catch{}if(Mj(lt,O$2()),Qi)throw Qi=!1,lt=Ri,Ri=null,lt;return X$1&8||ig(),null}function ek(){for(;Z$1!==null;){var lt=Z$1.alternate;Jj||Ij===null||(Z$1.flags&8?dc(Z$1,Ij)&&(Jj=!0):Z$1.tag===13&&mj(lt,Z$1)&&dc(Z$1,Ij)&&(Jj=!0));var ft=Z$1.flags;ft&256&&Xi(lt,Z$1),!(ft&512)||xj||(xj=!0,hg(97,function(){return Oj(),null})),Z$1=Z$1.nextEffect}}function Oj(){if(zj!==90){var lt=97<zj?97:zj;return zj=90,gg(lt,fk)}return!1}function $i(lt,ft){Aj.push(ft,lt),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function Zi(lt,ft){Bj.push(ft,lt),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function fk(){if(yj===null)return!1;var lt=yj;if(yj=null,X$1&48)throw Error(y$7(331));var ft=X$1;X$1|=32;var dt=Bj;Bj=[];for(var vt=0;vt<dt.length;vt+=2){var Et=dt[vt],St=dt[vt+1],Tt=Et.destroy;if(Et.destroy=void 0,typeof Tt=="function")try{Tt()}catch(Ct){if(St===null)throw Error(y$7(330));Wi(St,Ct)}}for(dt=Aj,Aj=[],vt=0;vt<dt.length;vt+=2){Et=dt[vt],St=dt[vt+1];try{var At=Et.create;Et.destroy=At()}catch(Ct){if(St===null)throw Error(y$7(330));Wi(St,Ct)}}for(At=lt.current.firstEffect;At!==null;)lt=At.nextEffect,At.nextEffect=null,At.flags&8&&(At.sibling=null,At.stateNode=null),At=lt;return X$1=ft,ig(),!0}function gk(lt,ft,dt){ft=Mi(dt,ft),ft=Pi(lt,ft,1),Ag(lt,ft),ft=Hg(),lt=Kj(lt,1),lt!==null&&($c(lt,1,ft),Mj(lt,ft))}function Wi(lt,ft){if(lt.tag===3)gk(lt,lt,ft);else for(var dt=lt.return;dt!==null;){if(dt.tag===3){gk(dt,lt,ft);break}else if(dt.tag===1){var vt=dt.stateNode;if(typeof dt.type.getDerivedStateFromError=="function"||typeof vt.componentDidCatch=="function"&&(Ti===null||!Ti.has(vt))){lt=Mi(ft,lt);var Et=Si(dt,lt,1);if(Ag(dt,Et),Et=Hg(),dt=Kj(dt,1),dt!==null)$c(dt,1,Et),Mj(dt,Et);else if(typeof vt.componentDidCatch=="function"&&(Ti===null||!Ti.has(vt)))try{vt.componentDidCatch(ft,lt)}catch{}break}}dt=dt.return}}function Yj(lt,ft,dt){var vt=lt.pingCache;vt!==null&&vt.delete(ft),ft=Hg(),lt.pingedLanes|=lt.suspendedLanes&dt,U$1===lt&&(W$2&dt)===dt&&(V$3===4||V$3===3&&(W$2&62914560)===W$2&&500>O$2()-jj?Qj(lt,0):uj|=dt),Mj(lt,ft)}function lj(lt,ft){var dt=lt.stateNode;dt!==null&&dt.delete(ft),ft=0,ft===0&&(ft=lt.mode,ft&2?ft&4?(Gj===0&&(Gj=tj),ft=Yc(62914560&~Gj),ft===0&&(ft=4194304)):ft=eg()===99?1:2:ft=1),dt=Hg(),lt=Kj(lt,ft),lt!==null&&($c(lt,ft,dt),Mj(lt,dt))}var ck;ck=function(lt,ft,dt){var vt=ft.lanes;if(lt!==null)if(lt.memoizedProps!==ft.pendingProps||N$1.current)ug=!0;else if(dt&vt)ug=!!(lt.flags&16384);else{switch(ug=!1,ft.tag){case 3:ri(ft),sh();break;case 5:gh(ft);break;case 1:Ff(ft.type)&&Jf(ft);break;case 4:eh(ft,ft.stateNode.containerInfo);break;case 10:vt=ft.memoizedProps.value;var Et=ft.type._context;I$4(mg,Et._currentValue),Et._currentValue=vt;break;case 13:if(ft.memoizedState!==null)return dt&ft.child.childLanes?ti(lt,ft,dt):(I$4(P$2,P$2.current&1),ft=hi(lt,ft,dt),ft!==null?ft.sibling:null);I$4(P$2,P$2.current&1);break;case 19:if(vt=(dt&ft.childLanes)!==0,lt.flags&64){if(vt)return Ai(lt,ft,dt);ft.flags|=64}if(Et=ft.memoizedState,Et!==null&&(Et.rendering=null,Et.tail=null,Et.lastEffect=null),I$4(P$2,P$2.current),vt)break;return null;case 23:case 24:return ft.lanes=0,mi(lt,ft,dt)}return hi(lt,ft,dt)}else ug=!1;switch(ft.lanes=0,ft.tag){case 2:if(vt=ft.type,lt!==null&&(lt.alternate=null,ft.alternate=null,ft.flags|=2),lt=ft.pendingProps,Et=Ef(ft,M$2.current),tg(ft,dt),Et=Ch(null,ft,vt,lt,Et,dt),ft.flags|=1,typeof Et=="object"&&Et!==null&&typeof Et.render=="function"&&Et.$$typeof===void 0){if(ft.tag=1,ft.memoizedState=null,ft.updateQueue=null,Ff(vt)){var St=!0;Jf(ft)}else St=!1;ft.memoizedState=Et.state!==null&&Et.state!==void 0?Et.state:null,xg(ft);var Tt=vt.getDerivedStateFromProps;typeof Tt=="function"&&Gg(ft,vt,Tt,lt),Et.updater=Kg,ft.stateNode=Et,Et._reactInternals=ft,Og(ft,vt,lt,dt),ft=qi(null,ft,vt,!0,St,dt)}else ft.tag=0,fi(null,ft,Et,dt),ft=ft.child;return ft;case 16:Et=ft.elementType;e:{switch(lt!==null&&(lt.alternate=null,ft.alternate=null,ft.flags|=2),lt=ft.pendingProps,St=Et._init,Et=St(Et._payload),ft.type=Et,St=ft.tag=hk(Et),lt=lg(Et,lt),St){case 0:ft=li(null,ft,Et,lt,dt);break e;case 1:ft=pi(null,ft,Et,lt,dt);break e;case 11:ft=gi(null,ft,Et,lt,dt);break e;case 14:ft=ii(null,ft,Et,lg(Et.type,lt),vt,dt);break e}throw Error(y$7(306,Et,""))}return ft;case 0:return vt=ft.type,Et=ft.pendingProps,Et=ft.elementType===vt?Et:lg(vt,Et),li(lt,ft,vt,Et,dt);case 1:return vt=ft.type,Et=ft.pendingProps,Et=ft.elementType===vt?Et:lg(vt,Et),pi(lt,ft,vt,Et,dt);case 3:if(ri(ft),vt=ft.updateQueue,lt===null||vt===null)throw Error(y$7(282));if(vt=ft.pendingProps,Et=ft.memoizedState,Et=Et!==null?Et.element:null,yg(lt,ft),Cg(ft,vt,null,dt),vt=ft.memoizedState.element,vt===Et)sh(),ft=hi(lt,ft,dt);else{if(Et=ft.stateNode,(St=Et.hydrate)&&(kh=rf(ft.stateNode.containerInfo.firstChild),jh=ft,St=lh=!0),St){if(lt=Et.mutableSourceEagerHydrationData,lt!=null)for(Et=0;Et<lt.length;Et+=2)St=lt[Et],St._workInProgressVersionPrimary=lt[Et+1],th.push(St);for(dt=Zg(ft,null,vt,dt),ft.child=dt;dt;)dt.flags=dt.flags&-3|1024,dt=dt.sibling}else fi(lt,ft,vt,dt),sh();ft=ft.child}return ft;case 5:return gh(ft),lt===null&&ph(ft),vt=ft.type,Et=ft.pendingProps,St=lt!==null?lt.memoizedProps:null,Tt=Et.children,nf(vt,Et)?Tt=null:St!==null&&nf(vt,St)&&(ft.flags|=16),oi(lt,ft),fi(lt,ft,Tt,dt),ft.child;case 6:return lt===null&&ph(ft),null;case 13:return ti(lt,ft,dt);case 4:return eh(ft,ft.stateNode.containerInfo),vt=ft.pendingProps,lt===null?ft.child=Yg(ft,null,vt,dt):fi(lt,ft,vt,dt),ft.child;case 11:return vt=ft.type,Et=ft.pendingProps,Et=ft.elementType===vt?Et:lg(vt,Et),gi(lt,ft,vt,Et,dt);case 7:return fi(lt,ft,ft.pendingProps,dt),ft.child;case 8:return fi(lt,ft,ft.pendingProps.children,dt),ft.child;case 12:return fi(lt,ft,ft.pendingProps.children,dt),ft.child;case 10:e:{vt=ft.type._context,Et=ft.pendingProps,Tt=ft.memoizedProps,St=Et.value;var At=ft.type._context;if(I$4(mg,At._currentValue),At._currentValue=St,Tt!==null)if(At=Tt.value,St=He$3(At,St)?0:(typeof vt._calculateChangedBits=="function"?vt._calculateChangedBits(At,St):1073741823)|0,St===0){if(Tt.children===Et.children&&!N$1.current){ft=hi(lt,ft,dt);break e}}else for(At=ft.child,At!==null&&(At.return=ft);At!==null;){var Ct=At.dependencies;if(Ct!==null){Tt=At.child;for(var Rt=Ct.firstContext;Rt!==null;){if(Rt.context===vt&&Rt.observedBits&St){At.tag===1&&(Rt=zg(-1,dt&-dt),Rt.tag=2,Ag(At,Rt)),At.lanes|=dt,Rt=At.alternate,Rt!==null&&(Rt.lanes|=dt),sg(At.return,dt),Ct.lanes|=dt;break}Rt=Rt.next}}else Tt=At.tag===10&&At.type===ft.type?null:At.child;if(Tt!==null)Tt.return=At;else for(Tt=At;Tt!==null;){if(Tt===ft){Tt=null;break}if(At=Tt.sibling,At!==null){At.return=Tt.return,Tt=At;break}Tt=Tt.return}At=Tt}fi(lt,ft,Et.children,dt),ft=ft.child}return ft;case 9:return Et=ft.type,St=ft.pendingProps,vt=St.children,tg(ft,dt),Et=vg(Et,St.unstable_observedBits),vt=vt(Et),ft.flags|=1,fi(lt,ft,vt,dt),ft.child;case 14:return Et=ft.type,St=lg(Et,ft.pendingProps),St=lg(Et.type,St),ii(lt,ft,Et,St,vt,dt);case 15:return ki(lt,ft,ft.type,ft.pendingProps,vt,dt);case 17:return vt=ft.type,Et=ft.pendingProps,Et=ft.elementType===vt?Et:lg(vt,Et),lt!==null&&(lt.alternate=null,ft.alternate=null,ft.flags|=2),ft.tag=1,Ff(vt)?(lt=!0,Jf(ft)):lt=!1,tg(ft,dt),Mg(ft,vt,Et),Og(ft,vt,Et,dt),qi(null,ft,vt,!0,lt,dt);case 19:return Ai(lt,ft,dt);case 23:return mi(lt,ft,dt);case 24:return mi(lt,ft,dt)}throw Error(y$7(156,ft.tag))};function ik(lt,ft,dt,vt){this.tag=lt,this.key=dt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=ft,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=vt,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(lt,ft,dt,vt){return new ik(lt,ft,dt,vt)}function ji(lt){return lt=lt.prototype,!(!lt||!lt.isReactComponent)}function hk(lt){if(typeof lt=="function")return ji(lt)?1:0;if(lt!=null){if(lt=lt.$$typeof,lt===Aa)return 11;if(lt===Da)return 14}return 2}function Tg(lt,ft){var dt=lt.alternate;return dt===null?(dt=nh(lt.tag,ft,lt.key,lt.mode),dt.elementType=lt.elementType,dt.type=lt.type,dt.stateNode=lt.stateNode,dt.alternate=lt,lt.alternate=dt):(dt.pendingProps=ft,dt.type=lt.type,dt.flags=0,dt.nextEffect=null,dt.firstEffect=null,dt.lastEffect=null),dt.childLanes=lt.childLanes,dt.lanes=lt.lanes,dt.child=lt.child,dt.memoizedProps=lt.memoizedProps,dt.memoizedState=lt.memoizedState,dt.updateQueue=lt.updateQueue,ft=lt.dependencies,dt.dependencies=ft===null?null:{lanes:ft.lanes,firstContext:ft.firstContext},dt.sibling=lt.sibling,dt.index=lt.index,dt.ref=lt.ref,dt}function Vg(lt,ft,dt,vt,Et,St){var Tt=2;if(vt=lt,typeof lt=="function")ji(lt)&&(Tt=1);else if(typeof lt=="string")Tt=5;else e:switch(lt){case ua:return Xg(dt.children,Et,St,ft);case Ha:Tt=8,Et|=16;break;case wa:Tt=8,Et|=1;break;case xa:return lt=nh(12,dt,ft,Et|8),lt.elementType=xa,lt.type=xa,lt.lanes=St,lt;case Ba:return lt=nh(13,dt,ft,Et),lt.type=Ba,lt.elementType=Ba,lt.lanes=St,lt;case Ca:return lt=nh(19,dt,ft,Et),lt.elementType=Ca,lt.lanes=St,lt;case Ia:return vi(dt,Et,St,ft);case Ja:return lt=nh(24,dt,ft,Et),lt.elementType=Ja,lt.lanes=St,lt;default:if(typeof lt=="object"&&lt!==null)switch(lt.$$typeof){case ya:Tt=10;break e;case za:Tt=9;break e;case Aa:Tt=11;break e;case Da:Tt=14;break e;case Ea:Tt=16,vt=null;break e;case Fa:Tt=22;break e}throw Error(y$7(130,lt==null?lt:typeof lt,""))}return ft=nh(Tt,dt,ft,Et),ft.elementType=lt,ft.type=vt,ft.lanes=St,ft}function Xg(lt,ft,dt,vt){return lt=nh(7,lt,vt,ft),lt.lanes=dt,lt}function vi(lt,ft,dt,vt){return lt=nh(23,lt,vt,ft),lt.elementType=Ia,lt.lanes=dt,lt}function Ug(lt,ft,dt){return lt=nh(6,lt,null,ft),lt.lanes=dt,lt}function Wg(lt,ft,dt){return ft=nh(4,lt.children!==null?lt.children:[],lt.key,ft),ft.lanes=dt,ft.stateNode={containerInfo:lt.containerInfo,pendingChildren:null,implementation:lt.implementation},ft}function jk(lt,ft,dt){this.tag=ft,this.containerInfo=lt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=dt,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.mutableSourceEagerHydrationData=null}function kk(lt,ft,dt){var vt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:vt==null?null:""+vt,children:lt,containerInfo:ft,implementation:dt}}function lk(lt,ft,dt,vt){var Et=ft.current,St=Hg(),Tt=Ig(Et);e:if(dt){dt=dt._reactInternals;t:{if(Zb(dt)!==dt||dt.tag!==1)throw Error(y$7(170));var At=dt;do{switch(At.tag){case 3:At=At.stateNode.context;break t;case 1:if(Ff(At.type)){At=At.stateNode.__reactInternalMemoizedMergedChildContext;break t}}At=At.return}while(At!==null);throw Error(y$7(171))}if(dt.tag===1){var Ct=dt.type;if(Ff(Ct)){dt=If(dt,Ct,At);break e}}dt=At}else dt=Cf;return ft.context===null?ft.context=dt:ft.pendingContext=dt,ft=zg(St,Tt),ft.payload={element:lt},vt=vt===void 0?null:vt,vt!==null&&(ft.callback=vt),Ag(Et,ft),Jg(Et,Tt,St),Tt}function mk(lt){if(lt=lt.current,!lt.child)return null;switch(lt.child.tag){case 5:return lt.child.stateNode;default:return lt.child.stateNode}}function nk(lt,ft){if(lt=lt.memoizedState,lt!==null&&lt.dehydrated!==null){var dt=lt.retryLane;lt.retryLane=dt!==0&&dt<ft?dt:ft}}function ok(lt,ft){nk(lt,ft),(lt=lt.alternate)&&nk(lt,ft)}function pk(){return null}function qk(lt,ft,dt){var vt=dt!=null&&dt.hydrationOptions!=null&&dt.hydrationOptions.mutableSources||null;if(dt=new jk(lt,ft,dt!=null&&dt.hydrate===!0),ft=nh(3,null,null,ft===2?7:ft===1?3:0),dt.current=ft,ft.stateNode=dt,xg(ft),lt[ff]=dt.current,cf(lt.nodeType===8?lt.parentNode:lt),vt)for(lt=0;lt<vt.length;lt++){ft=vt[lt];var Et=ft._getVersion;Et=Et(ft._source),dt.mutableSourceEagerHydrationData==null?dt.mutableSourceEagerHydrationData=[ft,Et]:dt.mutableSourceEagerHydrationData.push(ft,Et)}this._internalRoot=dt}qk.prototype.render=function(lt){lk(lt,this._internalRoot,null,null)};qk.prototype.unmount=function(){var lt=this._internalRoot,ft=lt.containerInfo;lk(null,lt,null,function(){ft[ff]=null})};function rk(lt){return!(!lt||lt.nodeType!==1&&lt.nodeType!==9&&lt.nodeType!==11&&(lt.nodeType!==8||lt.nodeValue!==" react-mount-point-unstable "))}function sk(lt,ft){if(ft||(ft=lt?lt.nodeType===9?lt.documentElement:lt.firstChild:null,ft=!(!ft||ft.nodeType!==1||!ft.hasAttribute("data-reactroot"))),!ft)for(var dt;dt=lt.lastChild;)lt.removeChild(dt);return new qk(lt,0,ft?{hydrate:!0}:void 0)}function tk(lt,ft,dt,vt,Et){var St=dt._reactRootContainer;if(St){var Tt=St._internalRoot;if(typeof Et=="function"){var At=Et;Et=function(){var Rt=mk(Tt);At.call(Rt)}}lk(ft,Tt,lt,Et)}else{if(St=dt._reactRootContainer=sk(dt,vt),Tt=St._internalRoot,typeof Et=="function"){var Ct=Et;Et=function(){var Rt=mk(Tt);Ct.call(Rt)}}Xj(function(){lk(ft,Tt,lt,Et)})}return mk(Tt)}ec=function(lt){if(lt.tag===13){var ft=Hg();Jg(lt,4,ft),ok(lt,4)}};fc=function(lt){if(lt.tag===13){var ft=Hg();Jg(lt,67108864,ft),ok(lt,67108864)}};gc=function(lt){if(lt.tag===13){var ft=Hg(),dt=Ig(lt);Jg(lt,dt,ft),ok(lt,dt)}};hc=function(lt,ft){return ft()};yb=function(lt,ft,dt){switch(ft){case"input":if(ab(lt,dt),ft=dt.name,dt.type==="radio"&&ft!=null){for(dt=lt;dt.parentNode;)dt=dt.parentNode;for(dt=dt.querySelectorAll("input[name="+JSON.stringify(""+ft)+'][type="radio"]'),ft=0;ft<dt.length;ft++){var vt=dt[ft];if(vt!==lt&&vt.form===lt.form){var Et=Db(vt);if(!Et)throw Error(y$7(90));Wa(vt),ab(vt,Et)}}}break;case"textarea":ib(lt,dt);break;case"select":ft=dt.value,ft!=null&&fb(lt,!!dt.multiple,ft,!1)}};Gb=Wj;Hb=function(lt,ft,dt,vt,Et){var St=X$1;X$1|=4;try{return gg(98,lt.bind(null,ft,dt,vt,Et))}finally{X$1=St,X$1===0&&(wj(),ig())}};Ib=function(){!(X$1&49)&&(Vj(),Oj())};Jb=function(lt,ft){var dt=X$1;X$1|=2;try{return lt(ft)}finally{X$1=dt,X$1===0&&(wj(),ig())}};function uk(lt,ft){var dt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rk(ft))throw Error(y$7(200));return kk(lt,ft,null,dt)}var vk={Events:[Cb,ue$2,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(lt){return lt=cc(lt),lt===null?null:lt.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;reactDom_production_min.createPortal=uk;reactDom_production_min.findDOMNode=function(lt){if(lt==null)return null;if(lt.nodeType===1)return lt;var ft=lt._reactInternals;if(ft===void 0)throw typeof lt.render=="function"?Error(y$7(188)):Error(y$7(268,Object.keys(lt)));return lt=cc(ft),lt=lt===null?null:lt.stateNode,lt};reactDom_production_min.flushSync=function(lt,ft){var dt=X$1;if(dt&48)return lt(ft);X$1|=1;try{if(lt)return gg(99,lt.bind(null,ft))}finally{X$1=dt,ig()}};reactDom_production_min.hydrate=function(lt,ft,dt){if(!rk(ft))throw Error(y$7(200));return tk(null,lt,ft,!0,dt)};reactDom_production_min.render=function(lt,ft,dt){if(!rk(ft))throw Error(y$7(200));return tk(null,lt,ft,!1,dt)};reactDom_production_min.unmountComponentAtNode=function(lt){if(!rk(lt))throw Error(y$7(40));return lt._reactRootContainer?(Xj(function(){tk(null,null,lt,!1,function(){lt._reactRootContainer=null,lt[ff]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Wj;reactDom_production_min.unstable_createPortal=function(lt,ft){return uk(lt,ft,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(lt,ft,dt,vt){if(!rk(dt))throw Error(y$7(200));if(lt==null||lt._reactInternals===void 0)throw Error(y$7(38));return tk(lt,ft,dt,!1,vt)};reactDom_production_min.version="17.0.2";(function(lt){function ft(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ft)}catch(dt){console.error(dt)}}ft(),lt.exports=reactDom_production_min})(reactDom);const ReactDOM=getDefaultExportFromCjs(reactDomExports);function _setPrototypeOf$2(lt,ft){return _setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(vt,Et){return vt.__proto__=Et,vt},_setPrototypeOf$2(lt,ft)}function _inheritsLoose$1(lt,ft){lt.prototype=Object.create(ft.prototype),lt.prototype.constructor=lt,_setPrototypeOf$2(lt,ft)}var propTypesExports={},propTypes={get exports(){return propTypesExports},set exports(lt){propTypesExports=lt}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function lt(vt,Et,St,Tt,At,Ct){if(Ct!==ReactPropTypesSecret){var Rt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Rt.name="Invariant Violation",Rt}}lt.isRequired=lt;function ft(){return lt}var dt={array:lt,bigint:lt,bool:lt,func:lt,number:lt,object:lt,string:lt,symbol:lt,any:lt,arrayOf:ft,element:lt,elementType:lt,instanceOf:ft,node:lt,objectOf:ft,oneOf:ft,oneOfType:ft,shape:ft,exact:ft,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return dt.PropTypes=dt,dt};propTypes.exports=factoryWithThrowingShims();function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft];for(var vt in dt)Object.prototype.hasOwnProperty.call(dt,vt)&&(lt[vt]=dt[vt])}return lt},_extends$1.apply(this,arguments)}function isAbsolute(lt){return lt.charAt(0)==="/"}function spliceOne(lt,ft){for(var dt=ft,vt=dt+1,Et=lt.length;vt<Et;dt+=1,vt+=1)lt[dt]=lt[vt];lt.pop()}function resolvePathname(lt,ft){ft===void 0&&(ft="");var dt=lt&&lt.split("/")||[],vt=ft&&ft.split("/")||[],Et=lt&&isAbsolute(lt),St=ft&&isAbsolute(ft),Tt=Et||St;if(lt&&isAbsolute(lt)?vt=dt:dt.length&&(vt.pop(),vt=vt.concat(dt)),!vt.length)return"/";var At;if(vt.length){var Ct=vt[vt.length-1];At=Ct==="."||Ct===".."||Ct===""}else At=!1;for(var Rt=0,Dt=vt.length;Dt>=0;Dt--){var kt=vt[Dt];kt==="."?spliceOne(vt,Dt):kt===".."?(spliceOne(vt,Dt),Rt++):Rt&&(spliceOne(vt,Dt),Rt--)}if(!Tt)for(;Rt--;Rt)vt.unshift("..");Tt&&vt[0]!==""&&(!vt[0]||!isAbsolute(vt[0]))&&vt.unshift("");var Nt=vt.join("/");return At&&Nt.substr(-1)!=="/"&&(Nt+="/"),Nt}function valueOf(lt){return lt.valueOf?lt.valueOf():Object.prototype.valueOf.call(lt)}function valueEqual(lt,ft){if(lt===ft)return!0;if(lt==null||ft==null)return!1;if(Array.isArray(lt))return Array.isArray(ft)&&lt.length===ft.length&&lt.every(function(Et,St){return valueEqual(Et,ft[St])});if(typeof lt=="object"||typeof ft=="object"){var dt=valueOf(lt),vt=valueOf(ft);return dt!==lt||vt!==ft?valueEqual(dt,vt):Object.keys(Object.assign({},lt,ft)).every(function(Et){return valueEqual(lt[Et],ft[Et])})}return!1}var isProduction=!0,prefix="Invariant failed";function invariant(lt,ft){if(!lt){if(isProduction)throw new Error(prefix);var dt=typeof ft=="function"?ft():ft,vt=dt?"".concat(prefix,": ").concat(dt):prefix;throw new Error(vt)}}function addLeadingSlash$1(lt){return lt.charAt(0)==="/"?lt:"/"+lt}function stripLeadingSlash(lt){return lt.charAt(0)==="/"?lt.substr(1):lt}function hasBasename(lt,ft){return lt.toLowerCase().indexOf(ft.toLowerCase())===0&&"/?#".indexOf(lt.charAt(ft.length))!==-1}function stripBasename$1(lt,ft){return hasBasename(lt,ft)?lt.substr(ft.length):lt}function stripTrailingSlash(lt){return lt.charAt(lt.length-1)==="/"?lt.slice(0,-1):lt}function parsePath$1(lt){var ft=lt||"/",dt="",vt="",Et=ft.indexOf("#");Et!==-1&&(vt=ft.substr(Et),ft=ft.substr(0,Et));var St=ft.indexOf("?");return St!==-1&&(dt=ft.substr(St),ft=ft.substr(0,St)),{pathname:ft,search:dt==="?"?"":dt,hash:vt==="#"?"":vt}}function createPath(lt){var ft=lt.pathname,dt=lt.search,vt=lt.hash,Et=ft||"/";return dt&&dt!=="?"&&(Et+=dt.charAt(0)==="?"?dt:"?"+dt),vt&&vt!=="#"&&(Et+=vt.charAt(0)==="#"?vt:"#"+vt),Et}function createLocation(lt,ft,dt,vt){var Et;typeof lt=="string"?(Et=parsePath$1(lt),Et.state=ft):(Et=_extends$1({},lt),Et.pathname===void 0&&(Et.pathname=""),Et.search?Et.search.charAt(0)!=="?"&&(Et.search="?"+Et.search):Et.search="",Et.hash?Et.hash.charAt(0)!=="#"&&(Et.hash="#"+Et.hash):Et.hash="",ft!==void 0&&Et.state===void 0&&(Et.state=ft));try{Et.pathname=decodeURI(Et.pathname)}catch(St){throw St instanceof URIError?new URIError('Pathname "'+Et.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):St}return dt&&(Et.key=dt),vt?Et.pathname?Et.pathname.charAt(0)!=="/"&&(Et.pathname=resolvePathname(Et.pathname,vt.pathname)):Et.pathname=vt.pathname:Et.pathname||(Et.pathname="/"),Et}function locationsAreEqual(lt,ft){return lt.pathname===ft.pathname&&lt.search===ft.search&&lt.hash===ft.hash&&lt.key===ft.key&&valueEqual(lt.state,ft.state)}function createTransitionManager(){var lt=null;function ft(Tt){return lt=Tt,function(){lt===Tt&&(lt=null)}}function dt(Tt,At,Ct,Rt){if(lt!=null){var Dt=typeof lt=="function"?lt(Tt,At):lt;typeof Dt=="string"?typeof Ct=="function"?Ct(Dt,Rt):Rt(!0):Rt(Dt!==!1)}else Rt(!0)}var vt=[];function Et(Tt){var At=!0;function Ct(){At&&Tt.apply(void 0,arguments)}return vt.push(Ct),function(){At=!1,vt=vt.filter(function(Rt){return Rt!==Ct})}}function St(){for(var Tt=arguments.length,At=new Array(Tt),Ct=0;Ct<Tt;Ct++)At[Ct]=arguments[Ct];vt.forEach(function(Rt){return Rt.apply(void 0,At)})}return{setPrompt:ft,confirmTransitionTo:dt,appendListener:Et,notifyListeners:St}}var canUseDOM$1=!!(typeof window<"u"&&window.document&&window.document.createElement);function getConfirmation(lt,ft){ft(window.confirm(lt))}function supportsHistory(){var lt=window.navigator.userAgent;return(lt.indexOf("Android 2.")!==-1||lt.indexOf("Android 4.0")!==-1)&&lt.indexOf("Mobile Safari")!==-1&&lt.indexOf("Chrome")===-1&&lt.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function supportsPopStateOnHashChange(){return window.navigator.userAgent.indexOf("Trident")===-1}function supportsGoWithoutReloadUsingHash(){return window.navigator.userAgent.indexOf("Firefox")===-1}function isExtraneousPopstateEvent(lt){return lt.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var PopStateEvent="popstate",HashChangeEvent="hashchange";function getHistoryState(){try{return window.history.state||{}}catch{return{}}}function createBrowserHistory(lt){lt===void 0&&(lt={}),canUseDOM$1||invariant(!1);var ft=window.history,dt=supportsHistory(),vt=!supportsPopStateOnHashChange(),Et=lt,St=Et.forceRefresh,Tt=St===void 0?!1:St,At=Et.getUserConfirmation,Ct=At===void 0?getConfirmation:At,Rt=Et.keyLength,Dt=Rt===void 0?6:Rt,kt=lt.basename?stripTrailingSlash(addLeadingSlash$1(lt.basename)):"";function Nt(ir){var _r=ir||{},yr=_r.key,gr=_r.state,Sr=window.location,Tr=Sr.pathname,br=Sr.search,Ar=Sr.hash,Or=Tr+br+Ar;return kt&&(Or=stripBasename$1(Or,kt)),createLocation(Or,gr,yr)}function zt(){return Math.random().toString(36).substr(2,Dt)}var Wt=createTransitionManager();function nr(ir){_extends$1(mr,ir),mr.length=ft.length,Wt.notifyListeners(mr.location,mr.action)}function Ut(ir){isExtraneousPopstateEvent(ir)||Ft(Nt(ir.state))}function Ht(){Ft(Nt(getHistoryState()))}var Bt=!1;function Ft(ir){if(Bt)Bt=!1,nr();else{var _r="POP";Wt.confirmTransitionTo(ir,_r,Ct,function(yr){yr?nr({action:_r,location:ir}):tr(ir)})}}function tr(ir){var _r=mr.location,yr=Kt.indexOf(_r.key);yr===-1&&(yr=0);var gr=Kt.indexOf(ir.key);gr===-1&&(gr=0);var Sr=yr-gr;Sr&&(Bt=!0,sr(Sr))}var cr=Nt(getHistoryState()),Kt=[cr.key];function Zt(ir){return kt+createPath(ir)}function rr(ir,_r){var yr="PUSH",gr=createLocation(ir,_r,zt(),mr.location);Wt.confirmTransitionTo(gr,yr,Ct,function(Sr){if(Sr){var Tr=Zt(gr),br=gr.key,Ar=gr.state;if(dt)if(ft.pushState({key:br,state:Ar},null,Tr),Tt)window.location.href=Tr;else{var Or=Kt.indexOf(mr.location.key),Ir=Kt.slice(0,Or+1);Ir.push(gr.key),Kt=Ir,nr({action:yr,location:gr})}else window.location.href=Tr}})}function ar(ir,_r){var yr="REPLACE",gr=createLocation(ir,_r,zt(),mr.location);Wt.confirmTransitionTo(gr,yr,Ct,function(Sr){if(Sr){var Tr=Zt(gr),br=gr.key,Ar=gr.state;if(dt)if(ft.replaceState({key:br,state:Ar},null,Tr),Tt)window.location.replace(Tr);else{var Or=Kt.indexOf(mr.location.key);Or!==-1&&(Kt[Or]=gr.key),nr({action:yr,location:gr})}else window.location.replace(Tr)}})}function sr(ir){ft.go(ir)}function dr(){sr(-1)}function fr(){sr(1)}var pr=0;function xr(ir){pr+=ir,pr===1&&ir===1?(window.addEventListener(PopStateEvent,Ut),vt&&window.addEventListener(HashChangeEvent,Ht)):pr===0&&(window.removeEventListener(PopStateEvent,Ut),vt&&window.removeEventListener(HashChangeEvent,Ht))}var lr=!1;function hr(ir){ir===void 0&&(ir=!1);var _r=Wt.setPrompt(ir);return lr||(xr(1),lr=!0),function(){return lr&&(lr=!1,xr(-1)),_r()}}function ur(ir){var _r=Wt.appendListener(ir);return xr(1),function(){xr(-1),_r()}}var mr={length:ft.length,action:"POP",location:cr,createHref:Zt,push:rr,replace:ar,go:sr,goBack:dr,goForward:fr,block:hr,listen:ur};return mr}var HashChangeEvent$1="hashchange",HashPathCoders={hashbang:{encodePath:function(ft){return ft.charAt(0)==="!"?ft:"!/"+stripLeadingSlash(ft)},decodePath:function(ft){return ft.charAt(0)==="!"?ft.substr(1):ft}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash$1},slash:{encodePath:addLeadingSlash$1,decodePath:addLeadingSlash$1}};function stripHash(lt){var ft=lt.indexOf("#");return ft===-1?lt:lt.slice(0,ft)}function getHashPath(){var lt=window.location.href,ft=lt.indexOf("#");return ft===-1?"":lt.substring(ft+1)}function pushHashPath(lt){window.location.hash=lt}function replaceHashPath(lt){window.location.replace(stripHash(window.location.href)+"#"+lt)}function createHashHistory(lt){lt===void 0&&(lt={}),canUseDOM$1||invariant(!1);var ft=window.history;supportsGoWithoutReloadUsingHash();var dt=lt,vt=dt.getUserConfirmation,Et=vt===void 0?getConfirmation:vt,St=dt.hashType,Tt=St===void 0?"slash":St,At=lt.basename?stripTrailingSlash(addLeadingSlash$1(lt.basename)):"",Ct=HashPathCoders[Tt],Rt=Ct.encodePath,Dt=Ct.decodePath;function kt(){var _r=Dt(getHashPath());return At&&(_r=stripBasename$1(_r,At)),createLocation(_r)}var Nt=createTransitionManager();function zt(_r){_extends$1(ir,_r),ir.length=ft.length,Nt.notifyListeners(ir.location,ir.action)}var Wt=!1,nr=null;function Ut(_r,yr){return _r.pathname===yr.pathname&&_r.search===yr.search&&_r.hash===yr.hash}function Ht(){var _r=getHashPath(),yr=Rt(_r);if(_r!==yr)replaceHashPath(yr);else{var gr=kt(),Sr=ir.location;if(!Wt&&Ut(Sr,gr)||nr===createPath(gr))return;nr=null,Bt(gr)}}function Bt(_r){if(Wt)Wt=!1,zt();else{var yr="POP";Nt.confirmTransitionTo(_r,yr,Et,function(gr){gr?zt({action:yr,location:_r}):Ft(_r)})}}function Ft(_r){var yr=ir.location,gr=Zt.lastIndexOf(createPath(yr));gr===-1&&(gr=0);var Sr=Zt.lastIndexOf(createPath(_r));Sr===-1&&(Sr=0);var Tr=gr-Sr;Tr&&(Wt=!0,dr(Tr))}var tr=getHashPath(),cr=Rt(tr);tr!==cr&&replaceHashPath(cr);var Kt=kt(),Zt=[createPath(Kt)];function rr(_r){var yr=document.querySelector("base"),gr="";return yr&&yr.getAttribute("href")&&(gr=stripHash(window.location.href)),gr+"#"+Rt(At+createPath(_r))}function ar(_r,yr){var gr="PUSH",Sr=createLocation(_r,void 0,void 0,ir.location);Nt.confirmTransitionTo(Sr,gr,Et,function(Tr){if(Tr){var br=createPath(Sr),Ar=Rt(At+br),Or=getHashPath()!==Ar;if(Or){nr=br,pushHashPath(Ar);var Ir=Zt.lastIndexOf(createPath(ir.location)),Cr=Zt.slice(0,Ir+1);Cr.push(br),Zt=Cr,zt({action:gr,location:Sr})}else zt()}})}function sr(_r,yr){var gr="REPLACE",Sr=createLocation(_r,void 0,void 0,ir.location);Nt.confirmTransitionTo(Sr,gr,Et,function(Tr){if(Tr){var br=createPath(Sr),Ar=Rt(At+br),Or=getHashPath()!==Ar;Or&&(nr=br,replaceHashPath(Ar));var Ir=Zt.indexOf(createPath(ir.location));Ir!==-1&&(Zt[Ir]=br),zt({action:gr,location:Sr})}})}function dr(_r){ft.go(_r)}function fr(){dr(-1)}function pr(){dr(1)}var xr=0;function lr(_r){xr+=_r,xr===1&&_r===1?window.addEventListener(HashChangeEvent$1,Ht):xr===0&&window.removeEventListener(HashChangeEvent$1,Ht)}var hr=!1;function ur(_r){_r===void 0&&(_r=!1);var yr=Nt.setPrompt(_r);return hr||(lr(1),hr=!0),function(){return hr&&(hr=!1,lr(-1)),yr()}}function mr(_r){var yr=Nt.appendListener(_r);return lr(1),function(){lr(-1),yr()}}var ir={length:ft.length,action:"POP",location:Kt,createHref:rr,push:ar,replace:sr,go:dr,goBack:fr,goForward:pr,block:ur,listen:mr};return ir}function clamp$1(lt,ft,dt){return Math.min(Math.max(lt,ft),dt)}function createMemoryHistory(lt){lt===void 0&&(lt={});var ft=lt,dt=ft.getUserConfirmation,vt=ft.initialEntries,Et=vt===void 0?["/"]:vt,St=ft.initialIndex,Tt=St===void 0?0:St,At=ft.keyLength,Ct=At===void 0?6:At,Rt=createTransitionManager();function Dt(rr){_extends$1(Zt,rr),Zt.length=Zt.entries.length,Rt.notifyListeners(Zt.location,Zt.action)}function kt(){return Math.random().toString(36).substr(2,Ct)}var Nt=clamp$1(Tt,0,Et.length-1),zt=Et.map(function(rr){return typeof rr=="string"?createLocation(rr,void 0,kt()):createLocation(rr,void 0,rr.key||kt())}),Wt=createPath;function nr(rr,ar){var sr="PUSH",dr=createLocation(rr,ar,kt(),Zt.location);Rt.confirmTransitionTo(dr,sr,dt,function(fr){if(fr){var pr=Zt.index,xr=pr+1,lr=Zt.entries.slice(0);lr.length>xr?lr.splice(xr,lr.length-xr,dr):lr.push(dr),Dt({action:sr,location:dr,index:xr,entries:lr})}})}function Ut(rr,ar){var sr="REPLACE",dr=createLocation(rr,ar,kt(),Zt.location);Rt.confirmTransitionTo(dr,sr,dt,function(fr){fr&&(Zt.entries[Zt.index]=dr,Dt({action:sr,location:dr}))})}function Ht(rr){var ar=clamp$1(Zt.index+rr,0,Zt.entries.length-1),sr="POP",dr=Zt.entries[ar];Rt.confirmTransitionTo(dr,sr,dt,function(fr){fr?Dt({action:sr,location:dr,index:ar}):Dt()})}function Bt(){Ht(-1)}function Ft(){Ht(1)}function tr(rr){var ar=Zt.index+rr;return ar>=0&&ar<Zt.entries.length}function cr(rr){return rr===void 0&&(rr=!1),Rt.setPrompt(rr)}function Kt(rr){return Rt.appendListener(rr)}var Zt={length:zt.length,action:"POP",location:zt[Nt],index:Nt,entries:zt,createHref:Wt,push:nr,replace:Ut,go:Ht,goBack:Bt,goForward:Ft,canGo:tr,block:cr,listen:Kt};return Zt}var pathToRegexpExports={},pathToRegexp$1={get exports(){return pathToRegexpExports},set exports(lt){pathToRegexpExports=lt}},isarray$1=Array.isArray||function(lt){return Object.prototype.toString.call(lt)=="[object Array]"},isarray=isarray$1;pathToRegexp$1.exports=pathToRegexp;pathToRegexpExports.parse=parse$a;pathToRegexpExports.compile=compile;pathToRegexpExports.tokensToFunction=tokensToFunction;pathToRegexpExports.tokensToRegExp=tokensToRegExp;var PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function parse$a(lt,ft){for(var dt=[],vt=0,Et=0,St="",Tt=ft&&ft.delimiter||"/",At;(At=PATH_REGEXP.exec(lt))!=null;){var Ct=At[0],Rt=At[1],Dt=At.index;if(St+=lt.slice(Et,Dt),Et=Dt+Ct.length,Rt){St+=Rt[1];continue}var kt=lt[Et],Nt=At[2],zt=At[3],Wt=At[4],nr=At[5],Ut=At[6],Ht=At[7];St&&(dt.push(St),St="");var Bt=Nt!=null&&kt!=null&&kt!==Nt,Ft=Ut==="+"||Ut==="*",tr=Ut==="?"||Ut==="*",cr=At[2]||Tt,Kt=Wt||nr;dt.push({name:zt||vt++,prefix:Nt||"",delimiter:cr,optional:tr,repeat:Ft,partial:Bt,asterisk:!!Ht,pattern:Kt?escapeGroup(Kt):Ht?".*":"[^"+escapeString(cr)+"]+?"})}return Et<lt.length&&(St+=lt.substr(Et)),St&&dt.push(St),dt}function compile(lt,ft){return tokensToFunction(parse$a(lt,ft),ft)}function encodeURIComponentPretty(lt){return encodeURI(lt).replace(/[\/?#]/g,function(ft){return"%"+ft.charCodeAt(0).toString(16).toUpperCase()})}function encodeAsterisk(lt){return encodeURI(lt).replace(/[?#]/g,function(ft){return"%"+ft.charCodeAt(0).toString(16).toUpperCase()})}function tokensToFunction(lt,ft){for(var dt=new Array(lt.length),vt=0;vt<lt.length;vt++)typeof lt[vt]=="object"&&(dt[vt]=new RegExp("^(?:"+lt[vt].pattern+")$",flags(ft)));return function(Et,St){for(var Tt="",At=Et||{},Ct=St||{},Rt=Ct.pretty?encodeURIComponentPretty:encodeURIComponent,Dt=0;Dt<lt.length;Dt++){var kt=lt[Dt];if(typeof kt=="string"){Tt+=kt;continue}var Nt=At[kt.name],zt;if(Nt==null)if(kt.optional){kt.partial&&(Tt+=kt.prefix);continue}else throw new TypeError('Expected "'+kt.name+'" to be defined');if(isarray(Nt)){if(!kt.repeat)throw new TypeError('Expected "'+kt.name+'" to not repeat, but received `'+JSON.stringify(Nt)+"`");if(Nt.length===0){if(kt.optional)continue;throw new TypeError('Expected "'+kt.name+'" to not be empty')}for(var Wt=0;Wt<Nt.length;Wt++){if(zt=Rt(Nt[Wt]),!dt[Dt].test(zt))throw new TypeError('Expected all "'+kt.name+'" to match "'+kt.pattern+'", but received `'+JSON.stringify(zt)+"`");Tt+=(Wt===0?kt.prefix:kt.delimiter)+zt}continue}if(zt=kt.asterisk?encodeAsterisk(Nt):Rt(Nt),!dt[Dt].test(zt))throw new TypeError('Expected "'+kt.name+'" to match "'+kt.pattern+'", but received "'+zt+'"');Tt+=kt.prefix+zt}return Tt}}function escapeString(lt){return lt.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function escapeGroup(lt){return lt.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(lt,ft){return lt.keys=ft,lt}function flags(lt){return lt&&lt.sensitive?"":"i"}function regexpToRegexp(lt,ft){var dt=lt.source.match(/\((?!\?)/g);if(dt)for(var vt=0;vt<dt.length;vt++)ft.push({name:vt,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return attachKeys(lt,ft)}function arrayToRegexp(lt,ft,dt){for(var vt=[],Et=0;Et<lt.length;Et++)vt.push(pathToRegexp(lt[Et],ft,dt).source);var St=new RegExp("(?:"+vt.join("|")+")",flags(dt));return attachKeys(St,ft)}function stringToRegexp(lt,ft,dt){return tokensToRegExp(parse$a(lt,dt),ft,dt)}function tokensToRegExp(lt,ft,dt){isarray(ft)||(dt=ft||dt,ft=[]),dt=dt||{};for(var vt=dt.strict,Et=dt.end!==!1,St="",Tt=0;Tt<lt.length;Tt++){var At=lt[Tt];if(typeof At=="string")St+=escapeString(At);else{var Ct=escapeString(At.prefix),Rt="(?:"+At.pattern+")";ft.push(At),At.repeat&&(Rt+="(?:"+Ct+Rt+")*"),At.optional?At.partial?Rt=Ct+"("+Rt+")?":Rt="(?:"+Ct+"("+Rt+"))?":Rt=Ct+"("+Rt+")",St+=Rt}}var Dt=escapeString(dt.delimiter||"/"),kt=St.slice(-Dt.length)===Dt;return vt||(St=(kt?St.slice(0,-Dt.length):St)+"(?:"+Dt+"(?=$))?"),Et?St+="$":St+=vt&&kt?"":"(?="+Dt+"|$)",attachKeys(new RegExp("^"+St,flags(dt)),ft)}function pathToRegexp(lt,ft,dt){return isarray(ft)||(dt=ft||dt,ft=[]),dt=dt||{},lt instanceof RegExp?regexpToRegexp(lt,ft):isarray(lt)?arrayToRegexp(lt,ft,dt):stringToRegexp(lt,ft,dt)}var reactIsExports={},reactIs$1={get exports(){return reactIsExports},set exports(lt){reactIsExports=lt}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$4=typeof Symbol=="function"&&Symbol.for,c$6=b$4?Symbol.for("react.element"):60103,d$6=b$4?Symbol.for("react.portal"):60106,e$1=b$4?Symbol.for("react.fragment"):60107,f$3=b$4?Symbol.for("react.strict_mode"):60108,g$3=b$4?Symbol.for("react.profiler"):60114,h$5=b$4?Symbol.for("react.provider"):60109,k$3=b$4?Symbol.for("react.context"):60110,l$6=b$4?Symbol.for("react.async_mode"):60111,m$3=b$4?Symbol.for("react.concurrent_mode"):60111,n$3=b$4?Symbol.for("react.forward_ref"):60112,p$3=b$4?Symbol.for("react.suspense"):60113,q$3=b$4?Symbol.for("react.suspense_list"):60120,r$3=b$4?Symbol.for("react.memo"):60115,t$2=b$4?Symbol.for("react.lazy"):60116,v$4=b$4?Symbol.for("react.block"):60121,w$2=b$4?Symbol.for("react.fundamental"):60117,x$3=b$4?Symbol.for("react.responder"):60118,y$6=b$4?Symbol.for("react.scope"):60119;function z$2(lt){if(typeof lt=="object"&&lt!==null){var ft=lt.$$typeof;switch(ft){case c$6:switch(lt=lt.type,lt){case l$6:case m$3:case e$1:case g$3:case f$3:case p$3:return lt;default:switch(lt=lt&&lt.$$typeof,lt){case k$3:case n$3:case t$2:case r$3:case h$5:return lt;default:return ft}}case d$6:return ft}}}function A$2(lt){return z$2(lt)===m$3}reactIs_production_min.AsyncMode=l$6;reactIs_production_min.ConcurrentMode=m$3;reactIs_production_min.ContextConsumer=k$3;reactIs_production_min.ContextProvider=h$5;reactIs_production_min.Element=c$6;reactIs_production_min.ForwardRef=n$3;reactIs_production_min.Fragment=e$1;reactIs_production_min.Lazy=t$2;reactIs_production_min.Memo=r$3;reactIs_production_min.Portal=d$6;reactIs_production_min.Profiler=g$3;reactIs_production_min.StrictMode=f$3;reactIs_production_min.Suspense=p$3;reactIs_production_min.isAsyncMode=function(lt){return A$2(lt)||z$2(lt)===l$6};reactIs_production_min.isConcurrentMode=A$2;reactIs_production_min.isContextConsumer=function(lt){return z$2(lt)===k$3};reactIs_production_min.isContextProvider=function(lt){return z$2(lt)===h$5};reactIs_production_min.isElement=function(lt){return typeof lt=="object"&&lt!==null&&lt.$$typeof===c$6};reactIs_production_min.isForwardRef=function(lt){return z$2(lt)===n$3};reactIs_production_min.isFragment=function(lt){return z$2(lt)===e$1};reactIs_production_min.isLazy=function(lt){return z$2(lt)===t$2};reactIs_production_min.isMemo=function(lt){return z$2(lt)===r$3};reactIs_production_min.isPortal=function(lt){return z$2(lt)===d$6};reactIs_production_min.isProfiler=function(lt){return z$2(lt)===g$3};reactIs_production_min.isStrictMode=function(lt){return z$2(lt)===f$3};reactIs_production_min.isSuspense=function(lt){return z$2(lt)===p$3};reactIs_production_min.isValidElementType=function(lt){return typeof lt=="string"||typeof lt=="function"||lt===e$1||lt===m$3||lt===g$3||lt===f$3||lt===p$3||lt===q$3||typeof lt=="object"&&lt!==null&&(lt.$$typeof===t$2||lt.$$typeof===r$3||lt.$$typeof===h$5||lt.$$typeof===k$3||lt.$$typeof===n$3||lt.$$typeof===w$2||lt.$$typeof===x$3||lt.$$typeof===y$6||lt.$$typeof===v$4)};reactIs_production_min.typeOf=z$2;(function(lt){lt.exports=reactIs_production_min})(reactIs$1);function _objectWithoutPropertiesLoose$1(lt,ft){if(lt==null)return{};var dt={},vt=Object.keys(lt),Et,St;for(St=0;St<vt.length;St++)Et=vt[St],!(ft.indexOf(Et)>=0)&&(dt[Et]=lt[Et]);return dt}var reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var MAX_SIGNED_31_BIT_INT=1073741823,commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function getUniqueId(){var lt="__global_unique_id__";return commonjsGlobal[lt]=(commonjsGlobal[lt]||0)+1}function objectIs(lt,ft){return lt===ft?lt!==0||1/lt===1/ft:lt!==lt&&ft!==ft}function createEventEmitter(lt){var ft=[];return{on:function(vt){ft.push(vt)},off:function(vt){ft=ft.filter(function(Et){return Et!==vt})},get:function(){return lt},set:function(vt,Et){lt=vt,ft.forEach(function(St){return St(lt,Et)})}}}function onlyChild(lt){return Array.isArray(lt)?lt[0]:lt}function createReactContext(lt,ft){var dt,vt,Et="__create-react-context-"+getUniqueId()+"__",St=function(At){_inheritsLoose$1(Ct,At);function Ct(){for(var Dt,kt=arguments.length,Nt=new Array(kt),zt=0;zt<kt;zt++)Nt[zt]=arguments[zt];return Dt=At.call.apply(At,[this].concat(Nt))||this,Dt.emitter=createEventEmitter(Dt.props.value),Dt}var Rt=Ct.prototype;return Rt.getChildContext=function(){var kt;return kt={},kt[Et]=this.emitter,kt},Rt.componentWillReceiveProps=function(kt){if(this.props.value!==kt.value){var Nt=this.props.value,zt=kt.value,Wt;objectIs(Nt,zt)?Wt=0:(Wt=typeof ft=="function"?ft(Nt,zt):MAX_SIGNED_31_BIT_INT,Wt|=0,Wt!==0&&this.emitter.set(kt.value,Wt))}},Rt.render=function(){return this.props.children},Ct}(React$1.Component);St.childContextTypes=(dt={},dt[Et]=propTypesExports.object.isRequired,dt);var Tt=function(At){_inheritsLoose$1(Ct,At);function Ct(){for(var Dt,kt=arguments.length,Nt=new Array(kt),zt=0;zt<kt;zt++)Nt[zt]=arguments[zt];return Dt=At.call.apply(At,[this].concat(Nt))||this,Dt.observedBits=void 0,Dt.state={value:Dt.getValue()},Dt.onUpdate=function(Wt,nr){var Ut=Dt.observedBits|0;Ut&nr&&Dt.setState({value:Dt.getValue()})},Dt}var Rt=Ct.prototype;return Rt.componentWillReceiveProps=function(kt){var Nt=kt.observedBits;this.observedBits=Nt??MAX_SIGNED_31_BIT_INT},Rt.componentDidMount=function(){this.context[Et]&&this.context[Et].on(this.onUpdate);var kt=this.props.observedBits;this.observedBits=kt??MAX_SIGNED_31_BIT_INT},Rt.componentWillUnmount=function(){this.context[Et]&&this.context[Et].off(this.onUpdate)},Rt.getValue=function(){return this.context[Et]?this.context[Et].get():lt},Rt.render=function(){return onlyChild(this.props.children)(this.state.value)},Ct}(React$1.Component);return Tt.contextTypes=(vt={},vt[Et]=propTypesExports.object,vt),{Provider:St,Consumer:Tt}}var createContext=React$1.createContext||createReactContext,createNamedContext=function(ft){var dt=createContext();return dt.displayName=ft,dt},historyContext=createNamedContext("Router-History"),context=createNamedContext("Router"),Router=function(lt){_inheritsLoose$1(ft,lt),ft.computeRootMatch=function(Et){return{path:"/",url:"/",params:{},isExact:Et==="/"}};function ft(vt){var Et;return Et=lt.call(this,vt)||this,Et.state={location:vt.history.location},Et._isMounted=!1,Et._pendingLocation=null,vt.staticContext||(Et.unlisten=vt.history.listen(function(St){Et._pendingLocation=St})),Et}var dt=ft.prototype;return dt.componentDidMount=function(){var Et=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(St){Et._isMounted&&Et.setState({location:St})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},dt.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},dt.render=function(){return React$1.createElement(context.Provider,{value:{history:this.props.history,location:this.state.location,match:ft.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},React$1.createElement(historyContext.Provider,{children:this.props.children||null,value:this.props.history}))},ft}(React$1.Component);React$1.Component;var Lifecycle=function(lt){_inheritsLoose$1(ft,lt);function ft(){return lt.apply(this,arguments)||this}var dt=ft.prototype;return dt.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},dt.componentDidUpdate=function(Et){this.props.onUpdate&&this.props.onUpdate.call(this,this,Et)},dt.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},dt.render=function(){return null},ft}(React$1.Component),cache$1={},cacheLimit=1e4,cacheCount=0;function compilePath(lt){if(cache$1[lt])return cache$1[lt];var ft=pathToRegexpExports.compile(lt);return cacheCount<cacheLimit&&(cache$1[lt]=ft,cacheCount++),ft}function generatePath(lt,ft){return lt===void 0&&(lt="/"),ft===void 0&&(ft={}),lt==="/"?lt:compilePath(lt)(ft,{pretty:!0})}function Redirect(lt){var ft=lt.computedMatch,dt=lt.to,vt=lt.push,Et=vt===void 0?!1:vt;return React$1.createElement(context.Consumer,null,function(St){St||invariant(!1);var Tt=St.history,At=St.staticContext,Ct=Et?Tt.push:Tt.replace,Rt=createLocation(ft?typeof dt=="string"?generatePath(dt,ft.params):_extends$1({},dt,{pathname:generatePath(dt.pathname,ft.params)}):dt);return At?(Ct(Rt),null):React$1.createElement(Lifecycle,{onMount:function(){Ct(Rt)},onUpdate:function(kt,Nt){var zt=createLocation(Nt.to);locationsAreEqual(zt,_extends$1({},Rt,{key:zt.key}))||Ct(Rt)},to:dt})})}var cache$1$1={},cacheLimit$1=1e4,cacheCount$1=0;function compilePath$1(lt,ft){var dt=""+ft.end+ft.strict+ft.sensitive,vt=cache$1$1[dt]||(cache$1$1[dt]={});if(vt[lt])return vt[lt];var Et=[],St=pathToRegexpExports(lt,Et,ft),Tt={regexp:St,keys:Et};return cacheCount$1<cacheLimit$1&&(vt[lt]=Tt,cacheCount$1++),Tt}function matchPath(lt,ft){ft===void 0&&(ft={}),(typeof ft=="string"||Array.isArray(ft))&&(ft={path:ft});var dt=ft,vt=dt.path,Et=dt.exact,St=Et===void 0?!1:Et,Tt=dt.strict,At=Tt===void 0?!1:Tt,Ct=dt.sensitive,Rt=Ct===void 0?!1:Ct,Dt=[].concat(vt);return Dt.reduce(function(kt,Nt){if(!Nt&&Nt!=="")return null;if(kt)return kt;var zt=compilePath$1(Nt,{end:St,strict:At,sensitive:Rt}),Wt=zt.regexp,nr=zt.keys,Ut=Wt.exec(lt);if(!Ut)return null;var Ht=Ut[0],Bt=Ut.slice(1),Ft=lt===Ht;return St&&!Ft?null:{path:Nt,url:Nt==="/"&&Ht===""?"/":Ht,isExact:Ft,params:nr.reduce(function(tr,cr,Kt){return tr[cr.name]=Bt[Kt],tr},{})}},null)}function isEmptyChildren(lt){return React$1.Children.count(lt)===0}var Route=function(lt){_inheritsLoose$1(ft,lt);function ft(){return lt.apply(this,arguments)||this}var dt=ft.prototype;return dt.render=function(){var Et=this;return React$1.createElement(context.Consumer,null,function(St){St||invariant(!1);var Tt=Et.props.location||St.location,At=Et.props.computedMatch?Et.props.computedMatch:Et.props.path?matchPath(Tt.pathname,Et.props):St.match,Ct=_extends$1({},St,{location:Tt,match:At}),Rt=Et.props,Dt=Rt.children,kt=Rt.component,Nt=Rt.render;return Array.isArray(Dt)&&isEmptyChildren(Dt)&&(Dt=null),React$1.createElement(context.Provider,{value:Ct},Ct.match?Dt?typeof Dt=="function"?Dt(Ct):Dt:kt?React$1.createElement(kt,Ct):Nt?Nt(Ct):null:typeof Dt=="function"?Dt(Ct):null)})},ft}(React$1.Component);function addLeadingSlash(lt){return lt.charAt(0)==="/"?lt:"/"+lt}function addBasename(lt,ft){return lt?_extends$1({},ft,{pathname:addLeadingSlash(lt)+ft.pathname}):ft}function stripBasename(lt,ft){if(!lt)return ft;var dt=addLeadingSlash(lt);return ft.pathname.indexOf(dt)!==0?ft:_extends$1({},ft,{pathname:ft.pathname.substr(dt.length)})}function createURL(lt){return typeof lt=="string"?lt:createPath(lt)}function staticHandler(lt){return function(){invariant(!1)}}function noop$4(){}React$1.Component;var Switch=function(lt){_inheritsLoose$1(ft,lt);function ft(){return lt.apply(this,arguments)||this}var dt=ft.prototype;return dt.render=function(){var Et=this;return React$1.createElement(context.Consumer,null,function(St){St||invariant(!1);var Tt=Et.props.location||St.location,At,Ct;return React$1.Children.forEach(Et.props.children,function(Rt){if(Ct==null&&React$1.isValidElement(Rt)){At=Rt;var Dt=Rt.props.path||Rt.props.from;Ct=Dt?matchPath(Tt.pathname,_extends$1({},Rt.props,{path:Dt})):St.match}}),Ct?React$1.cloneElement(At,{location:Tt,computedMatch:Ct}):null})},ft}(React$1.Component),useContext=React$1.useContext;function useHistory(){return useContext(historyContext)}function useLocation(){return useContext(context).location}function useParams(){var lt=useContext(context).match;return lt?lt.params:{}}function useRouteMatch(lt){var ft=useLocation(),dt=useContext(context).match;return lt?matchPath(ft.pathname,lt):dt}var BrowserRouter=function(lt){_inheritsLoose$1(ft,lt);function ft(){for(var vt,Et=arguments.length,St=new Array(Et),Tt=0;Tt<Et;Tt++)St[Tt]=arguments[Tt];return vt=lt.call.apply(lt,[this].concat(St))||this,vt.history=createBrowserHistory(vt.props),vt}var dt=ft.prototype;return dt.render=function(){return React$1.createElement(Router,{history:this.history,children:this.props.children})},ft}(React$1.Component),HashRouter=function(lt){_inheritsLoose$1(ft,lt);function ft(){for(var vt,Et=arguments.length,St=new Array(Et),Tt=0;Tt<Et;Tt++)St[Tt]=arguments[Tt];return vt=lt.call.apply(lt,[this].concat(St))||this,vt.history=createHashHistory(vt.props),vt}var dt=ft.prototype;return dt.render=function(){return React$1.createElement(Router,{history:this.history,children:this.props.children})},ft}(React$1.Component),resolveToLocation=function(ft,dt){return typeof ft=="function"?ft(dt):ft},normalizeToLocation=function(ft,dt){return typeof ft=="string"?createLocation(ft,null,null,dt):ft},forwardRefShim=function(ft){return ft},forwardRef=React$1.forwardRef;typeof forwardRef>"u"&&(forwardRef=forwardRefShim);function isModifiedEvent(lt){return!!(lt.metaKey||lt.altKey||lt.ctrlKey||lt.shiftKey)}var LinkAnchor=forwardRef(function(lt,ft){var dt=lt.innerRef,vt=lt.navigate,Et=lt.onClick,St=_objectWithoutPropertiesLoose$1(lt,["innerRef","navigate","onClick"]),Tt=St.target,At=_extends$1({},St,{onClick:function(Rt){try{Et&&Et(Rt)}catch(Dt){throw Rt.preventDefault(),Dt}!Rt.defaultPrevented&&Rt.button===0&&(!Tt||Tt==="_self")&&!isModifiedEvent(Rt)&&(Rt.preventDefault(),vt())}});return forwardRefShim!==forwardRef?At.ref=ft||dt:At.ref=dt,React$1.createElement("a",At)}),Link$1=forwardRef(function(lt,ft){var dt=lt.component,vt=dt===void 0?LinkAnchor:dt,Et=lt.replace,St=lt.to,Tt=lt.innerRef,At=_objectWithoutPropertiesLoose$1(lt,["component","replace","to","innerRef"]);return React$1.createElement(context.Consumer,null,function(Ct){Ct||invariant(!1);var Rt=Ct.history,Dt=normalizeToLocation(resolveToLocation(St,Ct.location),Ct.location),kt=Dt?Rt.createHref(Dt):"",Nt=_extends$1({},At,{href:kt,navigate:function(){var Wt=resolveToLocation(St,Ct.location),nr=createPath(Ct.location)===createPath(normalizeToLocation(Wt)),Ut=Et||nr?Rt.replace:Rt.push;Ut(Wt)}});return forwardRefShim!==forwardRef?Nt.ref=ft||Tt:Nt.innerRef=Tt,React$1.createElement(vt,Nt)})}),forwardRefShim$1=function(ft){return ft},forwardRef$1=React$1.forwardRef;typeof forwardRef$1>"u"&&(forwardRef$1=forwardRefShim$1);function joinClassnames(){for(var lt=arguments.length,ft=new Array(lt),dt=0;dt<lt;dt++)ft[dt]=arguments[dt];return ft.filter(function(vt){return vt}).join(" ")}forwardRef$1(function(lt,ft){var dt=lt["aria-current"],vt=dt===void 0?"page":dt,Et=lt.activeClassName,St=Et===void 0?"active":Et,Tt=lt.activeStyle,At=lt.className,Ct=lt.exact,Rt=lt.isActive,Dt=lt.location,kt=lt.sensitive,Nt=lt.strict,zt=lt.style,Wt=lt.to,nr=lt.innerRef,Ut=_objectWithoutPropertiesLoose$1(lt,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return React$1.createElement(context.Consumer,null,function(Ht){Ht||invariant(!1);var Bt=Dt||Ht.location,Ft=normalizeToLocation(resolveToLocation(Wt,Bt),Bt),tr=Ft.pathname,cr=tr&&tr.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),Kt=cr?matchPath(Bt.pathname,{path:cr,exact:Ct,sensitive:kt,strict:Nt}):null,Zt=!!(Rt?Rt(Kt,Bt):Kt),rr=typeof At=="function"?At(Zt):At,ar=typeof zt=="function"?zt(Zt):zt;Zt&&(rr=joinClassnames(rr,St),ar=_extends$1({},ar,Tt));var sr=_extends$1({"aria-current":Zt&&vt||null,className:rr,style:ar,to:Ft},Ut);return forwardRefShim$1!==forwardRef$1?sr.ref=ft||nr:sr.innerRef=nr,React$1.createElement(Link$1,sr)})});var Icons=(lt=>(lt.SEARCH="search",lt.BOOKMARK="bookmark",lt.BOOKMARK_OUTLINE="bookmark_outline",lt.CLOCK="clock",lt.EYE_SLASH="eyeSlash",lt.ARROW_LEFT="arrowLeft",lt.ARROW_RIGHT="arrowRight",lt.CHEVRON_DOWN="chevronDown",lt.CHEVRON_RIGHT="chevronRight",lt.CHEVRON_LEFT="chevronLeft",lt.CLAPPER_BOARD="clapperBoard",lt.FILM="film",lt.DRAGON="dragon",lt.WARNING="warning",lt.MOVIE_WEB="movieWeb",lt.DISCORD="discord",lt.GITHUB="github",lt.PLAY="play",lt.PAUSE="pause",lt.EXPAND="expand",lt.COMPRESS="compress",lt.VOLUME="volume",lt.VOLUME_X="volume_x",lt.X="x",lt.EDIT="edit",lt.AIRPLAY="airplay",lt.EPISODES="episodes",lt.SKIP_FORWARD="skip_forward",lt.SKIP_BACKWARD="skip_backward",lt.FILE="file",lt.CAPTIONS="captions",lt.LINK="link",lt.CASTING="casting",lt.CIRCLE_EXCLAMATION="circle_exclamation",lt.DOWNLOAD="download",lt.GEAR="gear",lt.WATCH_PARTY="watch_party",lt.PICTURE_IN_PICTURE="pictureInPicture",lt.CHECKMARK="checkmark",lt.TACHOMETER="tachometer",lt))(Icons||{});const iconList={search:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"/></svg>',bookmark:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M384 48V512l-192-112L0 512V48C0 21.5 21.5 0 48 0h288C362.5 0 384 21.5 384 48z"/></svg>',clock:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"/></svg>',eyeSlash:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M150.7 92.77C195 58.27 251.8 32 320 32C400.8 32 465.5 68.84 512.6 112.6C559.4 156 590.7 207.1 605.5 243.7C608.8 251.6 608.8 260.4 605.5 268.3C592.1 300.6 565.2 346.1 525.6 386.7L630.8 469.1C641.2 477.3 643.1 492.4 634.9 502.8C626.7 513.2 611.6 515.1 601.2 506.9L9.196 42.89C-1.236 34.71-3.065 19.63 5.112 9.196C13.29-1.236 28.37-3.065 38.81 5.112L150.7 92.77zM223.1 149.5L313.4 220.3C317.6 211.8 320 202.2 320 191.1C320 180.5 316.1 169.7 311.6 160.4C314.4 160.1 317.2 159.1 320 159.1C373 159.1 416 202.1 416 255.1C416 269.7 413.1 282.7 407.1 294.5L446.6 324.7C457.7 304.3 464 280.9 464 255.1C464 176.5 399.5 111.1 320 111.1C282.7 111.1 248.6 126.2 223.1 149.5zM320 480C239.2 480 174.5 443.2 127.4 399.4C80.62 355.1 49.34 304 34.46 268.3C31.18 260.4 31.18 251.6 34.46 243.7C44 220.8 60.29 191.2 83.09 161.5L177.4 235.8C176.5 242.4 176 249.1 176 255.1C176 335.5 240.5 400 320 400C338.7 400 356.6 396.4 373 389.9L446.2 447.5C409.9 467.1 367.8 480 320 480H320z"/></svg>',arrowLeft:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>',chevronDown:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>',chevronRight:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>',chevronLeft:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>',clapperBoard:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M326.1 160l127.4-127.4C451.7 32.39 449.9 32 448 32h-86.06l-128 128H326.1zM166.1 160l128-128H201.9l-128 128H166.1zM497.7 56.19L393.9 160H512V96C512 80.87 506.5 67.15 497.7 56.19zM134.1 32H64C28.65 32 0 60.65 0 96v64h6.062L134.1 32zM0 416c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64V192H0V416z"/></svg>',film:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M463.1 32h-416C21.49 32-.0001 53.49-.0001 80v352c0 26.51 21.49 48 47.1 48h416c26.51 0 48-21.49 48-48v-352C511.1 53.49 490.5 32 463.1 32zM111.1 408c0 4.418-3.582 8-8 8H55.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8L111.1 408zM111.1 280c0 4.418-3.582 8-8 8H55.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8V280zM111.1 152c0 4.418-3.582 8-8 8H55.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8L111.1 152zM351.1 400c0 8.836-7.164 16-16 16H175.1c-8.836 0-16-7.164-16-16v-96c0-8.838 7.164-16 16-16h160c8.836 0 16 7.162 16 16V400zM351.1 208c0 8.836-7.164 16-16 16H175.1c-8.836 0-16-7.164-16-16v-96c0-8.838 7.164-16 16-16h160c8.836 0 16 7.162 16 16V208zM463.1 408c0 4.418-3.582 8-8 8h-47.1c-4.418 0-7.1-3.582-7.1-8l0-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8V408zM463.1 280c0 4.418-3.582 8-8 8h-47.1c-4.418 0-8-3.582-8-8v-48c0-4.418 3.582-8 8-8h47.1c4.418 0 8 3.582 8 8V280zM463.1 152c0 4.418-3.582 8-8 8h-47.1c-4.418 0-8-3.582-8-8l0-48c0-4.418 3.582-8 7.1-8h47.1c4.418 0 8 3.582 8 8V152z"/></svg>',dragon:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M18.43 255.8L192 224L100.8 292.6C90.67 302.8 97.8 320 112 320h222.7c-9.499-26.5-14.75-54.5-14.75-83.38V194.2L200.3 106.8C176.5 90.88 145 92.75 123.3 111.2l-117.5 116.4C-6.562 238 2.436 258 18.43 255.8zM575.2 289.9l-100.7-50.25c-16.25-8.125-26.5-24.75-26.5-43V160h63.99l28.12 22.62C546.1 188.6 554.2 192 562.7 192h30.1c11.1 0 23.12-6.875 28.5-17.75l14.37-28.62c5.374-10.87 4.25-23.75-2.999-33.5l-74.49-99.37C552.1 4.75 543.5 0 533.5 0H296C288.9 0 285.4 8.625 290.4 13.62L351.1 64L292.4 88.75c-5.874 3-5.874 11.37 0 14.37L351.1 128l-.0011 108.6c0 72 35.99 139.4 95.99 179.4c-195.6 6.75-344.4 41-434.1 60.88c-8.124 1.75-13.87 9-13.87 17.38C.0463 504 8.045 512 17.79 512h499.1c63.24 0 119.6-47.5 122.1-110.8C642.3 354 617.1 310.9 575.2 289.9zM489.1 66.25l45.74 11.38c-2.75 11-12.5 18.88-24.12 18.25C497.7 95.25 484.8 83.38 489.1 66.25z"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-triangle"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>',movieWeb:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 20.927 20.927"><path d="M18.186,4.5V6.241H16.445V4.5H9.482V6.241H7.741V4.5H6V20.168H7.741V18.427H9.482v1.741h6.964V18.427h1.741v1.741h1.741V4.5Zm-8.7,12.186H7.741V14.945H9.482Zm0-3.482H7.741V11.464H9.482Zm0-3.482H7.741V7.982H9.482Zm8.7,6.964H16.445V14.945h1.741Zm0-3.482H16.445V11.464h1.741Zm0-3.482H16.445V7.982h1.741Z" transform="translate(10.018 -7.425) rotate(45)" fill="currentColor"/></svg>',discord:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"/></svg>',github:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 496 512"><!--! Font Awesome Pro 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>',play:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" style="transform: translateX(5%)" height="1em" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg>',pause:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"/></svg>',expand:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z"/></svg>',compress:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V64zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32H96v64c0 17.7 14.3 32 32 32s32-14.3 32-32V352c0-17.7-14.3-32-32-32H32zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352V64zM320 320c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32s32-14.3 32-32V384h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H320z"/></svg>',volume:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 640 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M533.6 32.5C598.5 85.3 640 165.8 640 256s-41.5 170.8-106.4 223.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C557.5 398.2 592 331.2 592 256s-34.5-142.2-88.7-186.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM473.1 107c43.2 35.2 70.9 88.9 70.9 149s-27.7 113.8-70.9 149c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C475.3 341.3 496 301.1 496 256s-20.7-85.3-53.2-111.8c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zm-60.5 74.5C434.1 199.1 448 225.9 448 256s-13.9 56.9-35.4 74.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C393.1 284.4 400 271 400 256s-6.9-28.4-17.7-37.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3z"/></svg>',volume_x:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 576 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3zM425 167l55 55 55-55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-55 55 55 55c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-55-55-55 55c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l55-55-55-55c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"/></svg>',x:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 320 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"/></svg>',edit:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"/></svg>',bookmark_outline:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 384 512"><!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path fill="currentColor" d="M336 0h-288C21.49 0 0 21.49 0 48v431.9c0 24.7 26.79 40.08 48.12 27.64L192 423.6l143.9 83.93C357.2 519.1 384 504.6 384 479.9V48C384 21.49 362.5 0 336 0zM336 452L192 368l-144 84V54C48 50.63 50.63 48 53.1 48h276C333.4 48 336 50.63 336 54V452z"/></svg>',airplay:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-airplay"><path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon fill="currentColor" points="12 15 17 21 7 21 12 15"></polygon></svg>',episodes:'<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4C1.34315 4 0 5.34314 0 7V13.9496C0 15.6065 1.34315 16.9496 3 16.9496H5.86645V14.9496H3C2.44772 14.9496 2 14.5019 2 13.9496V7C2 6.44771 2.44771 6 3 6H16.0327C16.585 6 17.0327 6.44772 17.0327 7V9.86645H19.0327V7C19.0327 5.34315 17.6896 4 16.0327 4H3Z" fill="currentColor"/><rect x="5.89929" y="10.5444" width="17" height="10" rx="2" stroke="currentColor" stroke-width="2"/></svg>',skip_forward:'<svg width="1em" height="1em" viewBox="0 0 26 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.3333 12.3333L16 7.66667M16 7.66667L11.3333 3M16 7.66667H6.66667C5.42899 7.66667 4.242 8.15833 3.36684 9.0335C2.49167 9.90867 2 11.0957 2 12.3333C2 13.571 2.49167 14.758 3.36684 15.6332C4.242 16.5083 5.42899 17 6.66667 17H9" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" /><path d="M16.5043 14.2727V23H14.6591V16.0241H14.608L12.6094 17.277V15.6406L14.7699 14.2727H16.5043ZM22.0004 23.1918C21.2674 23.1889 20.6367 23.0085 20.1083 22.6506C19.5827 22.2926 19.1779 21.7741 18.8938 21.0952C18.6126 20.4162 18.4734 19.5994 18.4762 18.6449C18.4762 17.6932 18.6168 16.8821 18.8981 16.2116C19.1822 15.5412 19.587 15.0312 20.1126 14.6818C20.641 14.3295 21.2702 14.1534 22.0004 14.1534C22.7305 14.1534 23.3583 14.3295 23.8839 14.6818C24.4123 15.0341 24.8185 15.5455 25.1026 16.2159C25.3867 16.8835 25.5273 17.6932 25.5245 18.6449C25.5245 19.6023 25.3825 20.4205 25.0984 21.0994C24.8171 21.7784 24.4137 22.2969 23.8881 22.6548C23.3626 23.0128 22.7333 23.1918 22.0004 23.1918ZM22.0004 21.6619C22.5004 21.6619 22.8995 21.4105 23.1978 20.9077C23.4961 20.4048 23.6438 19.6506 23.641 18.6449C23.641 17.983 23.5728 17.4318 23.4364 16.9915C23.3029 16.5511 23.1126 16.2202 22.8654 15.9986C22.6211 15.777 22.3327 15.6662 22.0004 15.6662C21.5032 15.6662 21.1055 15.9148 20.8072 16.4119C20.5089 16.9091 20.3583 17.6534 20.3555 18.6449C20.3555 19.3153 20.4222 19.875 20.5558 20.3239C20.6921 20.7699 20.8839 21.1051 21.131 21.3295C21.3782 21.5511 21.668 21.6619 22.0004 21.6619Z" fill="currentColor" /></svg>',skip_backward:'<svg width="1em" height="1em" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.6667 12.3333L9 7.66667M9 7.66667L13.6667 3M9 7.66667H18.3333C19.571 7.66667 20.758 8.15833 21.6332 9.0335C22.5083 9.90867 23 11.0957 23 12.3333C23 13.571 22.5083 14.758 21.6332 15.6332C20.758 16.5083 19.571 17 18.3333 17H16" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M4.50426 14.2727V23H2.65909V16.0241H2.60795L0.609375 17.277V15.6406L2.76989 14.2727H4.50426ZM10.0004 23.1918C9.2674 23.1889 8.63672 23.0085 8.10831 22.6506C7.58274 22.2926 7.17791 21.7741 6.89382 21.0952C6.61257 20.4162 6.47337 19.5994 6.47621 18.6449C6.47621 17.6932 6.61683 16.8821 6.89808 16.2116C7.18217 15.5412 7.587 15.0312 8.11257 14.6818C8.64098 14.3295 9.27024 14.1534 10.0004 14.1534C10.7305 14.1534 11.3583 14.3295 11.8839 14.6818C12.4123 15.0341 12.8185 15.5455 13.1026 16.2159C13.3867 16.8835 13.5273 17.6932 13.5245 18.6449C13.5245 19.6023 13.3825 20.4205 13.0984 21.0994C12.8171 21.7784 12.4137 22.2969 11.8881 22.6548C11.3626 23.0128 10.7333 23.1918 10.0004 23.1918ZM10.0004 21.6619C10.5004 21.6619 10.8995 21.4105 11.1978 20.9077C11.4961 20.4048 11.6438 19.6506 11.641 18.6449C11.641 17.983 11.5728 17.4318 11.4364 16.9915C11.3029 16.5511 11.1126 16.2202 10.8654 15.9986C10.6211 15.777 10.3327 15.6662 10.0004 15.6662C9.5032 15.6662 9.10547 15.9148 8.80717 16.4119C8.50888 16.9091 8.35831 17.6534 8.35547 18.6449C8.35547 19.3153 8.42223 19.875 8.55575 20.3239C8.69212 20.7699 8.88388 21.1051 9.13104 21.3295C9.3782 21.5511 9.66797 21.6619 10.0004 21.6619Z" fill="currentColor"/></svg>',file:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>',captions:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 25 20"><path transform="translate(-3 -6)" d="M25.5,6H5.5A2.507,2.507,0,0,0,3,8.5v15A2.507,2.507,0,0,0,5.5,26h20A2.507,2.507,0,0,0,28,23.5V8.5A2.507,2.507,0,0,0,25.5,6ZM5.5,16h5v2.5h-5ZM18,23.5H5.5V21H18Zm7.5,0h-5V21h5Zm0-5H13V16H25.5Z" fill="currentColor"/></svg>',link:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>',circle_exclamation:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/></svg>',casting:"",download:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-download"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',gear:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M481.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-30.9 28.1c-7.7 7.1-11.4 17.5-10.9 27.9c.1 2.9 .2 5.8 .2 8.8s-.1 5.9-.2 8.8c-.5 10.5 3.1 20.9 10.9 27.9l30.9 28.1c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-39.7-12.6c-10-3.2-20.8-1.1-29.7 4.6c-4.9 3.1-9.9 6.1-15.1 8.7c-9.3 4.8-16.5 13.2-18.8 23.4l-8.9 40.7c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-8.9-40.7c-2.2-10.2-9.5-18.6-18.8-23.4c-5.2-2.7-10.2-5.6-15.1-8.7c-8.8-5.7-19.7-7.8-29.7-4.6L69.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l30.9-28.1c7.7-7.1 11.4-17.5 10.9-27.9c-.1-2.9-.2-5.8-.2-8.8s.1-5.9 .2-8.8c.5-10.5-3.1-20.9-10.9-27.9L8.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l39.7 12.6c10 3.2 20.8 1.1 29.7-4.6c4.9-3.1 9.9-6.1 15.1-8.7c9.3-4.8 16.5-13.2 18.8-23.4l8.9-40.7c2-9.1 9-16.3 18.2-17.8C213.3 1.2 227.5 0 242 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l8.9 40.7c2.2 10.2 9.4 18.6 18.8 23.4c5.2 2.7 10.2 5.6 15.1 8.7c8.8 5.7 19.7 7.7 29.7 4.6l39.7-12.6c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM242 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/></svg>',watch_party:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M319.4 372c48.5-31.3 80.6-85.9 80.6-148c0-97.2-78.8-176-176-176S48 126.8 48 224c0 62.1 32.1 116.6 80.6 148c1.2 17.3 4 38 7.2 57.1l.2 1C56 395.8 0 316.5 0 224C0 100.3 100.3 0 224 0S448 100.3 448 224c0 92.5-56 171.9-136 206.1l.2-1.1c3.1-19.2 6-39.8 7.2-57zm-2.3-38.1c-1.6-5.7-3.9-11.1-7-16.2c-5.8-9.7-13.5-17-21.9-22.4c19.5-17.6 31.8-43 31.8-71.3c0-53-43-96-96-96s-96 43-96 96c0 28.3 12.3 53.8 31.8 71.3c-8.4 5.4-16.1 12.7-21.9 22.4c-3.1 5.1-5.4 10.5-7 16.2C99.8 307.5 80 268 80 224c0-79.5 64.5-144 144-144s144 64.5 144 144c0 44-19.8 83.5-50.9 109.9zM224 312c32.9 0 64 8.6 64 43.8c0 33-12.9 104.1-20.6 132.9c-5.1 19-24.5 23.4-43.4 23.4s-38.2-4.4-43.4-23.4c-7.8-28.5-20.6-99.7-20.6-132.8c0-35.1 31.1-43.8 64-43.8zm0-144a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"/></svg>',pictureInPicture:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" fill="currentColor" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 7h-8v6h8V7zm2-4H3c-1.1 0-2 .9-2 2v14c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98V5c0-1.1-.9-2-2-2zm0 16.01H3V4.98h18v14.03z"/></svg>',checkmark:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" fill="currentColor" viewBox="0 0 24 24"><path d="M9 22l-10-10.598 2.798-2.859 7.149 7.473 13.144-14.016 2.909 2.806z" /></svg>',tachometer:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" width="1em" fill="currentColor" viewBox="0 0 576 512"><!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --><path d="M128 288c-17.67 0-32 14.33-32 32s14.33 32 32 32 32-14.33 32-32-14.33-32-32-32zm154.65-97.08l16.24-48.71c1.16-3.45 3.18-6.35 4.92-9.43-4.73-2.76-9.94-4.78-15.81-4.78-17.67 0-32 14.33-32 32 0 15.78 11.63 28.29 26.65 30.92zM176 176c-17.67 0-32 14.33-32 32s14.33 32 32 32 32-14.33 32-32-14.33-32-32-32zM288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm212.27 400H75.73C57.56 397.63 48 359.12 48 320 48 187.66 155.66 80 288 80s240 107.66 240 240c0 39.12-9.56 77.63-27.73 112zM416 320c0 17.67 14.33 32 32 32s32-14.33 32-32-14.33-32-32-32-32 14.33-32 32zm-56.41-182.77c-12.72-4.23-26.16 2.62-30.38 15.17l-45.34 136.01C250.49 290.58 224 318.06 224 352c0 11.72 3.38 22.55 8.88 32h110.25c5.5-9.45 8.88-20.28 8.88-32 0-19.45-8.86-36.66-22.55-48.4l45.34-136.01c4.17-12.57-2.64-26.17-15.21-30.36zM432 208c0-15.8-11.66-28.33-26.72-30.93-.07.21-.07.43-.14.65l-19.5 58.49c4.37 2.24 9.11 3.8 14.36 3.8 17.67-.01 32-14.34 32-32.01z"/></svg>'};function ChromeCastButton(){const lt=reactExports.useRef(null);return reactExports.useEffect(()=>{var dt;const ft=document.createElement("google-cast-launcher");ft.setAttribute("id","castbutton"),(dt=lt.current)==null||dt.appendChild(ft)},[]),jsx("div",{ref:lt,className:"h-6"})}const Icon=reactExports.memo(lt=>lt.icon==="casting"?jsx(ChromeCastButton,{}):jsx("span",{dangerouslySetInnerHTML:{__html:iconList[lt.icon]},className:lt.className}));function IconPatch(lt){const ft=lt.clickable?"cursor-pointer hover:scale-110 hover:bg-denim-600 hover:text-white active:scale-125":"",dt=lt.transparent?"bg-opacity-0 hover:bg-opacity-50":"",vt=lt.active?"border-bink-600 bg-bink-100 text-bink-600":"";return jsx("div",{className:lt.className||void 0,onClick:lt.onClick,children:jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-full border-2 border-transparent bg-denim-500 transition-[background-color,color,transform,border-color] duration-75 ${dt} ${ft} ${vt}`,children:jsx(Icon,{icon:lt.icon})})})}function Link(lt){const ft=!!lt.url,dt=!!lt.to,vt=jsx("span",{className:"cursor-pointer font-bold text-bink-600 hover:text-bink-700",children:lt.children});return ft?jsx("a",{target:lt.newTab?"_blank":void 0,rel:"noreferrer",href:lt.url,children:vt}):dt?jsx(Link$1,{to:lt.to,children:vt}):jsx("span",{onClick:()=>lt.onClick&&lt.onClick(),children:vt})}function Title(lt){return jsx("h1",{className:`text-2xl font-bold text-white sm:text-3xl md:text-4xl ${lt.className??""}`,children:lt.children})}const APP_VERSION="3.0.10",DISCORD_LINK="https://discord.gg/Jhqt4Xzpfb",GITHUB_LINK="https://github.com/movie-web/movie-web",GA_ID="G-44YVXRL61C",env={OMDB_API_KEY:{}.VITE_OMDB_API_KEY,TMDB_API_KEY:{}.VITE_TMDB_API_KEY,APP_VERSION:void 0,GITHUB_LINK:void 0,DISCORD_LINK:void 0,CORS_PROXY_URL:{}.VITE_CORS_PROXY_URL,NORMAL_ROUTER:{}.VITE_NORMAL_ROUTER},alerts=[];function getKey(lt,ft){var Et;let dt=(Et=window==null?void 0:window.__CONFIG__)==null?void 0:Et[`VITE_${lt}`];dt!==void 0&&dt.length===0&&(dt=void 0);const vt=env[lt]??dt??void 0;return vt===void 0?ft||(alerts.includes(lt)||(window.alert(`Misconfigured instance, missing key: ${lt}`),alerts.push(lt)),""):vt}function conf(){return{APP_VERSION,GITHUB_LINK,DISCORD_LINK,OMDB_API_KEY:getKey("OMDB_API_KEY"),TMDB_API_KEY:getKey("TMDB_API_KEY"),PROXY_URLS:getKey("CORS_PROXY_URL").split(",").map(lt=>lt.trim()),NORMAL_ROUTER:getKey("NORMAL_ROUTER","false")==="true"}}function _typeof$3(lt){return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft},_typeof$3(lt)}function _toPrimitive$1(lt,ft){if(_typeof$3(lt)!=="object"||lt===null)return lt;var dt=lt[Symbol.toPrimitive];if(dt!==void 0){var vt=dt.call(lt,ft||"default");if(_typeof$3(vt)!=="object")return vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ft==="string"?String:Number)(lt)}function _toPropertyKey$1(lt){var ft=_toPrimitive$1(lt,"string");return _typeof$3(ft)==="symbol"?ft:String(ft)}function _defineProperty$4(lt,ft,dt){return ft=_toPropertyKey$1(ft),ft in lt?Object.defineProperty(lt,ft,{value:dt,enumerable:!0,configurable:!0,writable:!0}):lt[ft]=dt,lt}function _objectWithoutProperties$1(lt,ft){if(lt==null)return{};var dt=_objectWithoutPropertiesLoose$1(lt,ft),vt,Et;if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(lt);for(Et=0;Et<St.length;Et++)vt=St[Et],!(ft.indexOf(vt)>=0)&&Object.prototype.propertyIsEnumerable.call(lt,vt)&&(dt[vt]=lt[vt])}return dt}var voidElements={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},t$1=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function n$2(lt){var ft={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},dt=lt.match(/<\/?([^\s]+?)[/\s>]/);if(dt&&(ft.name=dt[1],(voidElements[dt[1]]||lt.charAt(lt.length-2)==="/")&&(ft.voidElement=!0),ft.name.startsWith("!--"))){var vt=lt.indexOf("-->");return{type:"comment",comment:vt!==-1?lt.slice(4,vt):""}}for(var Et=new RegExp(t$1),St=null;(St=Et.exec(lt))!==null;)if(St[0].trim())if(St[1]){var Tt=St[1].trim(),At=[Tt,""];Tt.indexOf("=")>-1&&(At=Tt.split("=")),ft.attrs[At[0]]=At[1],Et.lastIndex--}else St[2]&&(ft.attrs[St[2]]=St[3].trim().substring(1,St[3].length-1));return ft}var r$2=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,i$3=/^\s*$/,s$2=Object.create(null);function a(lt,ft){switch(ft.type){case"text":return lt+ft.content;case"tag":return lt+="<"+ft.name+(ft.attrs?function(dt){var vt=[];for(var Et in dt)vt.push(Et+'="'+dt[Et]+'"');return vt.length?" "+vt.join(" "):""}(ft.attrs):"")+(ft.voidElement?"/>":">"),ft.voidElement?lt:lt+ft.children.reduce(a,"")+"</"+ft.name+">";case"comment":return lt+"<!--"+ft.comment+"-->"}}var c$5={parse:function(lt,ft){ft||(ft={}),ft.components||(ft.components=s$2);var dt,vt=[],Et=[],St=-1,Tt=!1;if(lt.indexOf("<")!==0){var At=lt.indexOf("<");vt.push({type:"text",content:At===-1?lt:lt.substring(0,At)})}return lt.replace(r$2,function(Ct,Rt){if(Tt){if(Ct!=="</"+dt.name+">")return;Tt=!1}var Dt,kt=Ct.charAt(1)!=="/",Nt=Ct.startsWith("<!--"),zt=Rt+Ct.length,Wt=lt.charAt(zt);if(Nt){var nr=n$2(Ct);return St<0?(vt.push(nr),vt):((Dt=Et[St]).children.push(nr),vt)}if(kt&&(St++,(dt=n$2(Ct)).type==="tag"&&ft.components[dt.name]&&(dt.type="component",Tt=!0),dt.voidElement||Tt||!Wt||Wt==="<"||dt.children.push({type:"text",content:lt.slice(zt,lt.indexOf("<",zt))}),St===0&&vt.push(dt),(Dt=Et[St-1])&&Dt.children.push(dt),Et[St]=dt),(!kt||dt.voidElement)&&(St>-1&&(dt.voidElement||dt.name===Ct.slice(2,-1))&&(St--,dt=St===-1?vt:Et[St]),!Tt&&Wt!=="<"&&Wt)){Dt=St===-1?vt:Et[St].children;var Ut=lt.indexOf("<",zt),Ht=lt.slice(zt,Ut===-1?void 0:Ut);i$3.test(Ht)&&(Ht=" "),(Ut>-1&&St+Dt.length>=0||Ht!==" ")&&Dt.push({type:"text",content:Ht})}}),vt},stringify:function(lt){return lt.reduce(function(ft,dt){return ft+a("",dt)},"")}};function warn$2(){if(console&&console.warn){for(var lt,ft=arguments.length,dt=new Array(ft),vt=0;vt<ft;vt++)dt[vt]=arguments[vt];typeof dt[0]=="string"&&(dt[0]="react-i18next:: ".concat(dt[0])),(lt=console).warn.apply(lt,dt)}}var alreadyWarned={};function warnOnce(){for(var lt=arguments.length,ft=new Array(lt),dt=0;dt<lt;dt++)ft[dt]=arguments[dt];typeof ft[0]=="string"&&alreadyWarned[ft[0]]||(typeof ft[0]=="string"&&(alreadyWarned[ft[0]]=new Date),warn$2.apply(void 0,ft))}function loadNamespaces(lt,ft,dt){lt.loadNamespaces(ft,function(){if(lt.isInitialized)dt();else{var vt=function Et(){setTimeout(function(){lt.off("initialized",Et)},0),dt()};lt.on("initialized",vt)}})}function oldI18nextHasLoadedNamespace(lt,ft){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},vt=ft.languages[0],Et=ft.options?ft.options.fallbackLng:!1,St=ft.languages[ft.languages.length-1];if(vt.toLowerCase()==="cimode")return!0;var Tt=function(Ct,Rt){var Dt=ft.services.backendConnector.state["".concat(Ct,"|").concat(Rt)];return Dt===-1||Dt===2};return dt.bindI18n&&dt.bindI18n.indexOf("languageChanging")>-1&&ft.services.backendConnector.backend&&ft.isLanguageChangingTo&&!Tt(ft.isLanguageChangingTo,lt)?!1:!!(ft.hasResourceBundle(vt,lt)||!ft.services.backendConnector.backend||ft.options.resources&&!ft.options.partialBundledLanguages||Tt(vt,lt)&&(!Et||Tt(St,lt)))}function hasLoadedNamespace(lt,ft){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!ft.languages||!ft.languages.length)return warnOnce("i18n.languages were undefined or empty",ft.languages),!0;var vt=ft.options.ignoreJSONStructure!==void 0;return vt?ft.hasLoadedNamespace(lt,{precheck:function(St,Tt){if(dt.bindI18n&&dt.bindI18n.indexOf("languageChanging")>-1&&St.services.backendConnector.backend&&St.isLanguageChangingTo&&!Tt(St.isLanguageChangingTo,lt))return!1}}):oldI18nextHasLoadedNamespace(lt,ft,dt)}var matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=function(ft){return htmlEntities[ft]},unescape$1=function(ft){return ft.replace(matchHtmlEntity,unescapeHtmlEntity)};function ownKeys$b(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$a(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys$b(Object(dt),!0).forEach(function(vt){_defineProperty$4(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys$b(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}var defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:unescape$1};function setDefaults(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};defaultOptions=_objectSpread$a(_objectSpread$a({},defaultOptions),lt)}function getDefaults$1(){return defaultOptions}var i18nInstance;function setI18n(lt){i18nInstance=lt}function getI18n(){return i18nInstance}var _excluded$2=["format"],_excluded2=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function ownKeys$a(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$9(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys$a(Object(dt),!0).forEach(function(vt){_defineProperty$4(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys$a(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}function hasChildren(lt,ft){if(!lt)return!1;var dt=lt.props?lt.props.children:lt.children;return ft?dt.length>0:!!dt}function getChildren(lt){return lt?lt.props?lt.props.children:lt.children:[]}function hasValidReactChildren(lt){return Object.prototype.toString.call(lt)!=="[object Array]"?!1:lt.every(function(ft){return reactExports.isValidElement(ft)})}function getAsArray(lt){return Array.isArray(lt)?lt:[lt]}function mergeProps(lt,ft){var dt=_objectSpread$9({},ft);return dt.props=Object.assign(lt.props,ft.props),dt}function nodesToString(lt,ft){if(!lt)return"";var dt="",vt=getAsArray(lt),Et=ft.transSupportBasicHtmlNodes&&ft.transKeepBasicHtmlNodesFor?ft.transKeepBasicHtmlNodesFor:[];return vt.forEach(function(St,Tt){if(typeof St=="string")dt+="".concat(St);else if(reactExports.isValidElement(St)){var At=Object.keys(St.props).length,Ct=Et.indexOf(St.type)>-1,Rt=St.props.children;if(!Rt&&Ct&&At===0)dt+="<".concat(St.type,"/>");else if(!Rt&&(!Ct||At!==0))dt+="<".concat(Tt,"></").concat(Tt,">");else if(St.props.i18nIsDynamicList)dt+="<".concat(Tt,"></").concat(Tt,">");else if(Ct&&At===1&&typeof Rt=="string")dt+="<".concat(St.type,">").concat(Rt,"</").concat(St.type,">");else{var Dt=nodesToString(Rt,ft);dt+="<".concat(Tt,">").concat(Dt,"</").concat(Tt,">")}}else if(St===null)warn$2("Trans: the passed in value is invalid - seems you passed in a null child.");else if(_typeof$3(St)==="object"){var kt=St.format,Nt=_objectWithoutProperties$1(St,_excluded$2),zt=Object.keys(Nt);if(zt.length===1){var Wt=kt?"".concat(zt[0],", ").concat(kt):zt[0];dt+="{{".concat(Wt,"}}")}else warn$2("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",St)}else warn$2("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",St)}),dt}function renderNodes(lt,ft,dt,vt,Et,St){if(ft==="")return[];var Tt=vt.transKeepBasicHtmlNodesFor||[],At=ft&&new RegExp(Tt.join("|")).test(ft);if(!lt&&!At)return[ft];var Ct={};function Rt(Ut){var Ht=getAsArray(Ut);Ht.forEach(function(Bt){typeof Bt!="string"&&(hasChildren(Bt)?Rt(getChildren(Bt)):_typeof$3(Bt)==="object"&&!reactExports.isValidElement(Bt)&&Object.assign(Ct,Bt))})}Rt(lt);var Dt=c$5.parse("<0>".concat(ft,"</0>")),kt=_objectSpread$9(_objectSpread$9({},Ct),Et);function Nt(Ut,Ht,Bt){var Ft=getChildren(Ut),tr=Wt(Ft,Ht.children,Bt);return hasValidReactChildren(Ft)&&tr.length===0?Ft:tr}function zt(Ut,Ht,Bt,Ft,tr){Ut.dummy&&(Ut.children=Ht),Bt.push(reactExports.cloneElement(Ut,_objectSpread$9(_objectSpread$9({},Ut.props),{},{key:Ft}),tr?void 0:Ht))}function Wt(Ut,Ht,Bt){var Ft=getAsArray(Ut),tr=getAsArray(Ht);return tr.reduce(function(cr,Kt,Zt){var rr=Kt.children&&Kt.children[0]&&Kt.children[0].content&&dt.services.interpolator.interpolate(Kt.children[0].content,kt,dt.language);if(Kt.type==="tag"){var ar=Ft[parseInt(Kt.name,10)];!ar&&Bt.length===1&&Bt[0][Kt.name]&&(ar=Bt[0][Kt.name]),ar||(ar={});var sr=Object.keys(Kt.attrs).length!==0?mergeProps({props:Kt.attrs},ar):ar,dr=reactExports.isValidElement(sr),fr=dr&&hasChildren(Kt,!0)&&!Kt.voidElement,pr=At&&_typeof$3(sr)==="object"&&sr.dummy&&!dr,xr=_typeof$3(lt)==="object"&&lt!==null&&Object.hasOwnProperty.call(lt,Kt.name);if(typeof sr=="string"){var lr=dt.services.interpolator.interpolate(sr,kt,dt.language);cr.push(lr)}else if(hasChildren(sr)||fr){var hr=Nt(sr,Kt,Bt);zt(sr,hr,cr,Zt)}else if(pr){var ur=Wt(Ft,Kt.children,Bt);cr.push(reactExports.cloneElement(sr,_objectSpread$9(_objectSpread$9({},sr.props),{},{key:Zt}),ur))}else if(Number.isNaN(parseFloat(Kt.name)))if(xr){var mr=Nt(sr,Kt,Bt);zt(sr,mr,cr,Zt,Kt.voidElement)}else if(vt.transSupportBasicHtmlNodes&&Tt.indexOf(Kt.name)>-1)if(Kt.voidElement)cr.push(reactExports.createElement(Kt.name,{key:"".concat(Kt.name,"-").concat(Zt)}));else{var ir=Wt(Ft,Kt.children,Bt);cr.push(reactExports.createElement(Kt.name,{key:"".concat(Kt.name,"-").concat(Zt)},ir))}else if(Kt.voidElement)cr.push("<".concat(Kt.name," />"));else{var _r=Wt(Ft,Kt.children,Bt);cr.push("<".concat(Kt.name,">").concat(_r,"</").concat(Kt.name,">"))}else if(_typeof$3(sr)==="object"&&!dr){var yr=Kt.children[0]?rr:null;yr&&cr.push(yr)}else Kt.children.length===1&&rr?cr.push(reactExports.cloneElement(sr,_objectSpread$9(_objectSpread$9({},sr.props),{},{key:Zt}),rr)):cr.push(reactExports.cloneElement(sr,_objectSpread$9(_objectSpread$9({},sr.props),{},{key:Zt})))}else if(Kt.type==="text"){var gr=vt.transWrapTextNodes,Sr=St?vt.unescape(dt.services.interpolator.interpolate(Kt.content,kt,dt.language)):dt.services.interpolator.interpolate(Kt.content,kt,dt.language);gr?cr.push(reactExports.createElement(gr,{key:"".concat(Kt.name,"-").concat(Zt)},Sr)):cr.push(Sr)}return cr},[])}var nr=Wt([{dummy:!0,children:lt||[]}],Dt,getAsArray(lt||[]));return getChildren(nr[0])}function Trans$1(lt){var ft=lt.children,dt=lt.count,vt=lt.parent,Et=lt.i18nKey,St=lt.context,Tt=lt.tOptions,At=Tt===void 0?{}:Tt,Ct=lt.values,Rt=lt.defaults,Dt=lt.components,kt=lt.ns,Nt=lt.i18n,zt=lt.t,Wt=lt.shouldUnescape,nr=_objectWithoutProperties$1(lt,_excluded2),Ut=Nt||getI18n();if(!Ut)return warnOnce("You will need to pass in an i18next instance by using i18nextReactModule"),ft;var Ht=zt||Ut.t.bind(Ut)||function(fr){return fr};St&&(At.context=St);var Bt=_objectSpread$9(_objectSpread$9({},getDefaults$1()),Ut.options&&Ut.options.react),Ft=kt||Ht.ns||Ut.options&&Ut.options.defaultNS;Ft=typeof Ft=="string"?[Ft]:Ft||["translation"];var tr=Rt||nodesToString(ft,Bt)||Bt.transEmptyNodeValue||Et,cr=Bt.hashTransKey,Kt=Et||(cr?cr(tr):tr),Zt=Ct?At.interpolation:{interpolation:_objectSpread$9(_objectSpread$9({},At.interpolation),{},{prefix:"#$?",suffix:"?$#"})},rr=_objectSpread$9(_objectSpread$9(_objectSpread$9(_objectSpread$9({},At),{},{count:dt},Ct),Zt),{},{defaultValue:tr,ns:Ft}),ar=Kt?Ht(Kt,rr):tr,sr=renderNodes(Dt||ft,ar,Ut,Bt,rr,Wt),dr=vt!==void 0?vt:Bt.defaultTransParent;return dr?reactExports.createElement(dr,nr,sr):sr}function _classCallCheck$2(lt,ft){if(!(lt instanceof ft))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(lt,ft){for(var dt=0;dt<ft.length;dt++){var vt=ft[dt];vt.enumerable=vt.enumerable||!1,vt.configurable=!0,"value"in vt&&(vt.writable=!0),Object.defineProperty(lt,_toPropertyKey$1(vt.key),vt)}}function _createClass$2(lt,ft,dt){return ft&&_defineProperties$1(lt.prototype,ft),dt&&_defineProperties$1(lt,dt),Object.defineProperty(lt,"prototype",{writable:!1}),lt}var initReactI18next={type:"3rdParty",init:function(ft){setDefaults(ft.options.react),setI18n(ft)}},I18nContext=reactExports.createContext(),ReportNamespaces=function(){function lt(){_classCallCheck$2(this,lt),this.usedNamespaces={}}return _createClass$2(lt,[{key:"addUsedNamespaces",value:function(dt){var vt=this;dt.forEach(function(Et){vt.usedNamespaces[Et]||(vt.usedNamespaces[Et]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),lt}(),_excluded$1=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function ownKeys$9(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$8(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys$9(Object(dt),!0).forEach(function(vt){_defineProperty$4(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys$9(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}function Trans(lt){var ft=lt.children,dt=lt.count,vt=lt.parent,Et=lt.i18nKey,St=lt.context,Tt=lt.tOptions,At=Tt===void 0?{}:Tt,Ct=lt.values,Rt=lt.defaults,Dt=lt.components,kt=lt.ns,Nt=lt.i18n,zt=lt.t,Wt=lt.shouldUnescape,nr=_objectWithoutProperties$1(lt,_excluded$1),Ut=reactExports.useContext(I18nContext)||{},Ht=Ut.i18n,Bt=Ut.defaultNS,Ft=Nt||Ht||getI18n(),tr=zt||Ft&&Ft.t.bind(Ft);return Trans$1(_objectSpread$8({children:ft,count:dt,parent:vt,i18nKey:Et,context:St,tOptions:At,values:Ct,defaults:Rt,components:Dt,ns:kt||tr&&tr.ns||Bt||Ft&&Ft.options&&Ft.options.defaultNS,i18n:Ft,t:zt,shouldUnescape:Wt},nr))}function _arrayWithHoles$1(lt){if(Array.isArray(lt))return lt}function _iterableToArrayLimit$1(lt,ft){var dt=lt==null?null:typeof Symbol<"u"&&lt[Symbol.iterator]||lt["@@iterator"];if(dt!=null){var vt,Et,St,Tt,At=[],Ct=!0,Rt=!1;try{if(St=(dt=dt.call(lt)).next,ft===0){if(Object(dt)!==dt)return;Ct=!1}else for(;!(Ct=(vt=St.call(dt)).done)&&(At.push(vt.value),At.length!==ft);Ct=!0);}catch(Dt){Rt=!0,Et=Dt}finally{try{if(!Ct&&dt.return!=null&&(Tt=dt.return(),Object(Tt)!==Tt))return}finally{if(Rt)throw Et}}return At}}function _arrayLikeToArray$1(lt,ft){(ft==null||ft>lt.length)&&(ft=lt.length);for(var dt=0,vt=new Array(ft);dt<ft;dt++)vt[dt]=lt[dt];return vt}function _unsupportedIterableToArray$1(lt,ft){if(lt){if(typeof lt=="string")return _arrayLikeToArray$1(lt,ft);var dt=Object.prototype.toString.call(lt).slice(8,-1);if(dt==="Object"&&lt.constructor&&(dt=lt.constructor.name),dt==="Map"||dt==="Set")return Array.from(lt);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return _arrayLikeToArray$1(lt,ft)}}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray$1(lt,ft){return _arrayWithHoles$1(lt)||_iterableToArrayLimit$1(lt,ft)||_unsupportedIterableToArray$1(lt,ft)||_nonIterableRest$1()}function ownKeys$8(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$7(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys$8(Object(dt),!0).forEach(function(vt){_defineProperty$4(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys$8(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}var usePrevious=function(ft,dt){var vt=reactExports.useRef();return reactExports.useEffect(function(){vt.current=dt?vt.current:ft},[ft,dt]),vt.current};function useTranslation(lt){var ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=ft.i18n,vt=reactExports.useContext(I18nContext)||{},Et=vt.i18n,St=vt.defaultNS,Tt=dt||Et||getI18n();if(Tt&&!Tt.reportNamespaces&&(Tt.reportNamespaces=new ReportNamespaces),!Tt){warnOnce("You will need to pass in an i18next instance by using initReactI18next");var At=function(ar,sr){return typeof sr=="string"?sr:sr&&_typeof$3(sr)==="object"&&typeof sr.defaultValue=="string"?sr.defaultValue:Array.isArray(ar)?ar[ar.length-1]:ar},Ct=[At,{},!1];return Ct.t=At,Ct.i18n={},Ct.ready=!1,Ct}Tt.options.react&&Tt.options.react.wait!==void 0&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var Rt=_objectSpread$7(_objectSpread$7(_objectSpread$7({},getDefaults$1()),Tt.options.react),ft),Dt=Rt.useSuspense,kt=Rt.keyPrefix,Nt=lt||St||Tt.options&&Tt.options.defaultNS;Nt=typeof Nt=="string"?[Nt]:Nt||["translation"],Tt.reportNamespaces.addUsedNamespaces&&Tt.reportNamespaces.addUsedNamespaces(Nt);var zt=(Tt.isInitialized||Tt.initializedStoreOnce)&&Nt.every(function(rr){return hasLoadedNamespace(rr,Tt,Rt)});function Wt(){return Tt.getFixedT(null,Rt.nsMode==="fallback"?Nt:Nt[0],kt)}var nr=reactExports.useState(Wt),Ut=_slicedToArray$1(nr,2),Ht=Ut[0],Bt=Ut[1],Ft=Nt.join(),tr=usePrevious(Ft),cr=reactExports.useRef(!0);reactExports.useEffect(function(){var rr=Rt.bindI18n,ar=Rt.bindI18nStore;cr.current=!0,!zt&&!Dt&&loadNamespaces(Tt,Nt,function(){cr.current&&Bt(Wt)}),zt&&tr&&tr!==Ft&&cr.current&&Bt(Wt);function sr(){cr.current&&Bt(Wt)}return rr&&Tt&&Tt.on(rr,sr),ar&&Tt&&Tt.store.on(ar,sr),function(){cr.current=!1,rr&&Tt&&rr.split(" ").forEach(function(dr){return Tt.off(dr,sr)}),ar&&Tt&&ar.split(" ").forEach(function(dr){return Tt.store.off(dr,sr)})}},[Tt,Ft]);var Kt=reactExports.useRef(!0);reactExports.useEffect(function(){cr.current&&!Kt.current&&Bt(Wt),Kt.current=!1},[Tt,kt]);var Zt=[Ht,Tt,zt];if(Zt.t=Ht,Zt.i18n=Tt,Zt.ready=zt,zt||!zt&&!Dt)return Zt;throw new Promise(function(rr){loadNamespaces(Tt,Nt,function(){rr()})})}function ErrorShowcase(lt){return jsxs("div",{className:"w-4xl mt-12 max-w-full rounded bg-denim-300 px-6 py-4",children:[jsxs("p",{className:"mb-1 break-words font-bold text-white",children:[lt.error.name," - ",lt.error.description]}),jsx("p",{className:"break-words",children:lt.error.path})]})}function ErrorMessage(lt){const{t:ft}=useTranslation();return jsxs("div",{className:`${lt.localSize?"h-full":"min-h-screen"} flex w-full flex-col items-center justify-center px-4 py-12`,children:[jsxs("div",{className:"flex flex-col items-center justify-start text-center",children:[jsx(IconPatch,{icon:Icons.WARNING,className:"mb-6 text-red-400"}),jsx(Title,{children:ft("media.errors.genericTitle")}),lt.children?jsx("p",{className:"my-6 max-w-lg",children:lt.children}):jsx("p",{className:"my-6 max-w-lg",children:jsxs(Trans,{i18nKey:"media.errors.videoFailed",children:[jsx(Link,{url:conf().DISCORD_LINK,newTab:!0}),jsx(Link,{url:conf().GITHUB_LINK,newTab:!0})]})})]}),lt.error?jsx(ErrorShowcase,{error:lt.error}):null]})}class ErrorBoundary extends reactExports.Component{constructor(ft){super(ft),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(ft,dt){if(console.error("Render error caught",ft,dt),ft instanceof Error){const vt=ft;this.setState(Et=>({...Et,hasError:!0,error:{name:vt.name,description:vt.message,path:dt.componentStack.split(`
`)[1]}}))}}render(){return this.state.hasError?jsx(ErrorMessage,{error:this.state.error}):this.props.children}}const scriptRel="modulepreload",assetsURL=function(lt){return"/"+lt},seen={},__vitePreload=function(ft,dt,vt){if(!dt||dt.length===0)return ft();const Et=document.getElementsByTagName("link");return Promise.all(dt.map(St=>{if(St=assetsURL(St),St in seen)return;seen[St]=!0;const Tt=St.endsWith(".css"),At=Tt?'[rel="stylesheet"]':"";if(!!vt)for(let Dt=Et.length-1;Dt>=0;Dt--){const kt=Et[Dt];if(kt.href===St&&(!Tt||kt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${St}"]${At}`))return;const Rt=document.createElement("link");if(Rt.rel=Tt?"stylesheet":scriptRel,Tt||(Rt.as="script",Rt.crossOrigin=""),Rt.href=St,document.head.appendChild(Rt),Tt)return new Promise((Dt,kt)=>{Rt.addEventListener("load",Dt),Rt.addEventListener("error",()=>kt(new Error(`Unable to preload CSS for ${St}`)))})})).then(()=>ft())};function registerSW(lt={}){const{immediate:ft=!1,onNeedRefresh:dt,onOfflineReady:vt,onRegistered:Et,onRegisteredSW:St,onRegisterError:Tt}=lt;let At,Ct;const Rt=async(kt=!0)=>{await Ct};async function Dt(){if("serviceWorker"in navigator){const{Workbox:kt}=await __vitePreload(()=>import("./workbox-window.prod.es5-dc90f814.js"),[]);At=new kt("/sw.js",{scope:"/",type:"classic"}),At.addEventListener("activated",Nt=>{(Nt.isUpdate||Nt.isExternal)&&window.location.reload()}),At.addEventListener("installed",Nt=>{Nt.isUpdate||vt==null||vt()}),At.register({immediate:ft}).then(Nt=>{St?St("/sw.js",Nt):Et==null||Et(Nt)}).catch(Nt=>{Tt==null||Tt(Nt)})}}return Ct=Dt(),Rt}const storeCallbacks={},stores={};async function initializeStores(){var lt,ft;for(const[dt,vt]of Object.values(stores)){const Et=vt.versions.sort((Rt,Dt)=>Rt.version-Dt.version),St=dt._raw(),Tt=St["--version"]&&typeof St["--version"]=="number"?St["--version"]:0,At=Et.filter(Rt=>Rt.version>=Tt);let Ct=St;try{for(const Rt of At)Rt.migrate&&(Ct=await Rt.migrate(Ct))}catch(Rt){console.error(`FAILED TO MIGRATE STORE ${vt.key}`,Rt),Ct=((ft=(lt=At[At.length-1]).create)==null?void 0:ft.call(lt))??{}}dt.save(Ct)}}function buildStorageObject(lt){const ft=lt.key??"",dt=lt.versions.sort((At,Ct)=>Ct.version-At.version)[0];function vt(At){return storeCallbacks[ft]||(storeCallbacks[ft]=[]),storeCallbacks[ft].push(At),{destroy(){storeCallbacks[ft]=storeCallbacks[ft].filter(Ct=>Ct===At)}}}function Et(){var Ct;const At=((Ct=dt.create)==null?void 0:Ct.call(dt))??{};return At["--version"]=dt.version,At}function St(){const At=localStorage.getItem(ft);if(!At)return Et();try{return JSON.parse(At)}catch(Ct){return console.error(`FAILED TO PARSE LOCALSTORAGE FOR KEY ${ft}`,Ct),Et()}}function Tt(At){const Ct={...At};Ct["--version"]=dt.version,localStorage.setItem(ft,JSON.stringify(Ct)),storeCallbacks[ft]||(storeCallbacks[ft]=[]),storeCallbacks[ft].forEach(Rt=>Rt(window.structuredClone(At)))}return{get(){const At=St();return delete At["--version"],At},_raw(){return St()},onChange:vt,save:Tt}}function assertStore(lt){var vt;const ft=lt.versions.sort((Et,St)=>Et.version-St.version);if(ft.forEach((Et,St,Tt)=>{if(St!==0&&Et.version!==Tt[St-1].version+1)throw new Error("Version list of store is not incremental")}),ft.forEach(Et=>{if(Et.version<0)throw new Error("Versions cannot be negative")}),((vt=ft[0])==null?void 0:vt.version)!==0)throw new Error("Version 0 doesn't exist in version list of store");if(!lt.versions[lt.versions.length-1].create)throw new Error("Missing create function on latest version of store");if(!lt.key)throw new Error("storage key not set in store");const dt=[...ft];dt.pop(),dt.forEach(Et=>{if(!Et.migrate)throw new Error(`Migration missing on version ${Et.version}`)})}function createVersionedStore(){const lt={versions:[],key:null};return{setKey(ft){return lt.key=ft,this},addVersion(ft){return lt.versions.push(ft),this},build(){assertStore(lt);const ft=buildStorageObject(lt);return stores[lt.key??""]=[ft,lt],ft}}}function useStore(lt){const[ft,dt]=reactExports.useState(lt.get());reactExports.useEffect(()=>{const{destroy:Et}=lt.onChange(St=>{dt(St)});return()=>{Et()}},[lt]);function vt(Et){const St=Et(ft);lt.save(St)}return[ft,vt]}const suspectProtoRx=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,suspectConstructorRx=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JsonSigRx=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function jsonParseTransform(lt,ft){if(lt!=="__proto__"&&!(lt==="constructor"&&ft&&typeof ft=="object"&&"prototype"in ft))return ft}function destr(lt,ft={}){if(typeof lt!="string")return lt;const dt=lt.toLowerCase().trim();if(dt==="true")return!0;if(dt==="false")return!1;if(dt==="null")return null;if(dt==="nan")return Number.NaN;if(dt==="infinity")return Number.POSITIVE_INFINITY;if(dt!=="undefined"){if(!JsonSigRx.test(lt)){if(ft.strict)throw new SyntaxError("Invalid JSON");return lt}try{return suspectProtoRx.test(lt)||suspectConstructorRx.test(lt)?JSON.parse(lt,jsonParseTransform):JSON.parse(lt)}catch(vt){if(ft.strict)throw vt;return lt}}}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,EQUAL_RE=/=/g,PLUS_RE=/\+/g,ENC_CARET_RE=/%5e/gi,ENC_BACKTICK_RE=/%60/gi,ENC_PIPE_RE=/%7c/gi,ENC_SPACE_RE=/%20/gi;function encode(lt){return encodeURI(""+lt).replace(ENC_PIPE_RE,"|")}function encodeQueryValue(lt){return encode(typeof lt=="string"?lt:JSON.stringify(lt)).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CARET_RE,"^")}function encodeQueryKey(lt){return encodeQueryValue(lt).replace(EQUAL_RE,"%3D")}function decode(lt=""){try{return decodeURIComponent(""+lt)}catch{return""+lt}}function decodeQueryValue(lt){return decode(lt.replace(PLUS_RE," "))}function parseQuery(lt=""){const ft={};lt[0]==="?"&&(lt=lt.slice(1));for(const dt of lt.split("&")){const vt=dt.match(/([^=]+)=?(.*)/)||[];if(vt.length<2)continue;const Et=decode(vt[1]);if(Et==="__proto__"||Et==="constructor")continue;const St=decodeQueryValue(vt[2]||"");typeof ft[Et]<"u"?Array.isArray(ft[Et])?ft[Et].push(St):ft[Et]=[ft[Et],St]:ft[Et]=St}return ft}function encodeQueryItem(lt,ft){return(typeof ft=="number"||typeof ft=="boolean")&&(ft=String(ft)),ft?Array.isArray(ft)?ft.map(dt=>`${encodeQueryKey(lt)}=${encodeQueryValue(dt)}`).join("&"):`${encodeQueryKey(lt)}=${encodeQueryValue(ft)}`:encodeQueryKey(lt)}function stringifyQuery(lt){return Object.keys(lt).filter(ft=>lt[ft]!==void 0).map(ft=>encodeQueryItem(ft,lt[ft])).join("&")}const PROTOCOL_STRICT_REGEX=/^\w{2,}:([/\\]{1,2})/,PROTOCOL_REGEX=/^\w{2,}:([/\\]{2})?/,PROTOCOL_RELATIVE_REGEX=/^([/\\]\s*){2,}[^/\\]/;function hasProtocol(lt,ft={}){return typeof ft=="boolean"&&(ft={acceptRelative:ft}),ft.strict?PROTOCOL_STRICT_REGEX.test(lt):PROTOCOL_REGEX.test(lt)||(ft.acceptRelative?PROTOCOL_RELATIVE_REGEX.test(lt):!1)}const TRAILING_SLASH_RE=/\/$|\/\?/;function hasTrailingSlash(lt="",ft=!1){return ft?TRAILING_SLASH_RE.test(lt):lt.endsWith("/")}function withoutTrailingSlash(lt="",ft=!1){if(!ft)return(hasTrailingSlash(lt)?lt.slice(0,-1):lt)||"/";if(!hasTrailingSlash(lt,!0))return lt||"/";const[dt,...vt]=lt.split("?");return(dt.slice(0,-1)||"/")+(vt.length>0?`?${vt.join("?")}`:"")}function withTrailingSlash(lt="",ft=!1){if(!ft)return lt.endsWith("/")?lt:lt+"/";if(hasTrailingSlash(lt,!0))return lt||"/";const[dt,...vt]=lt.split("?");return dt+"/"+(vt.length>0?`?${vt.join("?")}`:"")}function hasLeadingSlash(lt=""){return lt.startsWith("/")}function withoutLeadingSlash(lt=""){return(hasLeadingSlash(lt)?lt.slice(1):lt)||"/"}function withBase(lt,ft){if(isEmptyURL(ft)||hasProtocol(lt))return lt;const dt=withoutTrailingSlash(ft);return lt.startsWith(dt)?lt:joinURL(dt,lt)}function withQuery(lt,ft){const dt=parseURL(lt),vt={...parseQuery(dt.search),...ft};return dt.search=stringifyQuery(vt),stringifyParsedURL(dt)}function isEmptyURL(lt){return!lt||lt==="/"}function isNonEmptyURL(lt){return lt&&lt!=="/"}function joinURL(lt,...ft){let dt=lt||"";for(const vt of ft.filter(Et=>isNonEmptyURL(Et)))dt=dt?withTrailingSlash(dt)+withoutLeadingSlash(vt):vt;return dt}function parseURL(lt="",ft){if(!hasProtocol(lt,{acceptRelative:!0}))return ft?parseURL(ft+lt):parsePath(lt);const[dt="",vt,Et=""]=(lt.replace(/\\/g,"/").match(/([^/:]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[St="",Tt=""]=(Et.match(/([^#/?]*)(.*)?/)||[]).splice(1),{pathname:At,search:Ct,hash:Rt}=parsePath(Tt.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:dt,auth:vt?vt.slice(0,Math.max(0,vt.length-1)):"",host:St,pathname:At,search:Ct,hash:Rt}}function parsePath(lt=""){const[ft="",dt="",vt=""]=(lt.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:ft,search:dt,hash:vt}}function stringifyParsedURL(lt){const ft=lt.pathname+(lt.search?(lt.search.startsWith("?")?"":"?")+lt.search:"")+lt.hash;return lt.protocol?lt.protocol+"//"+(lt.auth?lt.auth+"@":"")+lt.host+ft:ft}class FetchError extends Error{constructor(){super(...arguments),this.name="FetchError"}}function createFetchError(lt,ft,dt){let vt="";ft&&(vt=ft.message),lt&&dt?vt=`${vt} (${dt.status} ${dt.statusText} (${lt.toString()}))`:lt&&(vt=`${vt} (${lt.toString()})`);const Et=new FetchError(vt);return Object.defineProperty(Et,"request",{get(){return lt}}),Object.defineProperty(Et,"response",{get(){return dt}}),Object.defineProperty(Et,"data",{get(){return dt&&dt._data}}),Object.defineProperty(Et,"status",{get(){return dt&&dt.status}}),Object.defineProperty(Et,"statusText",{get(){return dt&&dt.statusText}}),Object.defineProperty(Et,"statusCode",{get(){return dt&&dt.status}}),Object.defineProperty(Et,"statusMessage",{get(){return dt&&dt.statusText}}),Et}const payloadMethods=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod(lt="GET"){return payloadMethods.has(lt.toUpperCase())}function isJSONSerializable(lt){if(lt===void 0)return!1;const ft=typeof lt;return ft==="string"||ft==="number"||ft==="boolean"||ft===null?!0:ft!=="object"?!1:Array.isArray(lt)?!0:lt.constructor&&lt.constructor.name==="Object"||typeof lt.toJSON=="function"}const textTypes=new Set(["image/svg","application/xml","application/xhtml","application/html"]),JSON_RE=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function detectResponseType(lt=""){if(!lt)return"json";const ft=lt.split(";").shift()||"";return JSON_RE.test(ft)?"json":textTypes.has(ft)||ft.startsWith("text/")?"text":"blob"}const retryStatusCodes=new Set([408,409,425,429,500,502,503,504]);function createFetch(lt){const{fetch:ft,Headers:dt}=lt;function vt(Tt){const At=Tt.error&&Tt.error.name==="AbortError"||!1;if(Tt.options.retry!==!1&&!At){let Rt;typeof Tt.options.retry=="number"?Rt=Tt.options.retry:Rt=isPayloadMethod(Tt.options.method)?0:1;const Dt=Tt.response&&Tt.response.status||500;if(Rt>0&&retryStatusCodes.has(Dt))return Et(Tt.request,{...Tt.options,retry:Rt-1})}const Ct=createFetchError(Tt.request,Tt.error,Tt.response);throw Error.captureStackTrace&&Error.captureStackTrace(Ct,Et),Ct}const Et=async function(At,Ct={}){const Rt={request:At,options:{...lt.defaults,...Ct},response:void 0,error:void 0};Rt.options.onRequest&&await Rt.options.onRequest(Rt),typeof Rt.request=="string"&&(Rt.options.baseURL&&(Rt.request=withBase(Rt.request,Rt.options.baseURL)),(Rt.options.query||Rt.options.params)&&(Rt.request=withQuery(Rt.request,{...Rt.options.params,...Rt.options.query})),Rt.options.body&&isPayloadMethod(Rt.options.method)&&isJSONSerializable(Rt.options.body)&&(Rt.options.body=typeof Rt.options.body=="string"?Rt.options.body:JSON.stringify(Rt.options.body),Rt.options.headers=new dt(Rt.options.headers),Rt.options.headers.has("content-type")||Rt.options.headers.set("content-type","application/json"),Rt.options.headers.has("accept")||Rt.options.headers.set("accept","application/json"))),Rt.response=await ft(Rt.request,Rt.options).catch(async kt=>(Rt.error=kt,Rt.options.onRequestError&&await Rt.options.onRequestError(Rt),vt(Rt)));const Dt=(Rt.options.parseResponse?"json":Rt.options.responseType)||detectResponseType(Rt.response.headers.get("content-type")||"");if(Dt==="json"){const kt=await Rt.response.text(),Nt=Rt.options.parseResponse||destr;Rt.response._data=Nt(kt)}else Dt==="stream"?Rt.response._data=Rt.response.body:Rt.response._data=await Rt.response[Dt]();return Rt.options.onResponse&&await Rt.options.onResponse(Rt),Rt.response.status>=400&&Rt.response.status<600?(Rt.options.onResponseError&&await Rt.options.onResponseError(Rt),vt(Rt)):Rt.response},St=function(At,Ct){return Et(At,Ct).then(Rt=>Rt._data)};return St.raw=Et,St.native=ft,St.create=(Tt={})=>createFetch({...lt,defaults:{...lt.defaults,...Tt}}),St}const _globalThis=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),fetch$1=_globalThis.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),Headers=_globalThis.Headers,ofetch=createFetch({fetch:fetch$1,Headers});let proxyUrlIndex=Math.floor(Math.random()*conf().PROXY_URLS.length);function getProxyUrl(){const lt=conf().PROXY_URLS[proxyUrlIndex];return proxyUrlIndex=(proxyUrlIndex+1)%conf().PROXY_URLS.length,lt}const baseFetch=ofetch.create({retry:0});function makeUrl(lt,ft){let dt=lt;return Object.entries(ft).forEach(([vt,Et])=>{dt=dt.replace(`{${vt}}`,encodeURIComponent(Et))}),dt}function mwFetch(lt,ft={}){return baseFetch(lt,ft)}function proxiedFetch(lt,ft={}){let dt=(ft==null?void 0:ft.baseURL)??"";dt.length>0&&dt.endsWith("/")&&lt.startsWith("/")?dt+=lt.slice(1):dt.length>0&&!dt.endsWith("/")&&!lt.startsWith("/")?dt+=`/${lt}`:dt+=lt;const vt=new URL(dt);return Object.entries((ft==null?void 0:ft.params)??{}).forEach(([Et,St])=>{vt.searchParams.set(Et,St)}),baseFetch(getProxyUrl(),{...ft,baseURL:void 0,params:{destination:vt.toString()}})}var MWMediaType=(lt=>(lt.MOVIE="movie",lt.SERIES="series",lt.ANIME="anime",lt))(MWMediaType||{});const JW_API_BASE="https://apis.justwatch.com",JW_IMAGE_BASE="https://images.justwatch.com";function mediaTypeToJW(lt){if(lt===MWMediaType.MOVIE)return"movie";if(lt===MWMediaType.SERIES)return"show";throw new Error("unsupported type")}function JWMediaToMediaType(lt){if(lt==="movie")return MWMediaType.MOVIE;if(lt==="show")return MWMediaType.SERIES;throw new Error("unsupported type")}function formatJWMeta(lt,ft){var Et,St;const dt=JWMediaToMediaType(lt.object_type);let vt;return dt===MWMediaType.SERIES&&(vt=(Et=lt.seasons)==null?void 0:Et.sort((Tt,At)=>Tt.season_number-At.season_number).map(Tt=>({id:Tt.id.toString(),number:Tt.season_number,title:Tt.title}))),{title:lt.title,id:lt.id.toString(),year:(St=lt.original_release_year)==null?void 0:St.toString(),poster:lt.poster?`${JW_IMAGE_BASE}${lt.poster.replace("{profile}","s166")}`:void 0,type:dt,seasons:vt,seasonData:ft?{id:ft.id.toString(),number:ft.season_number,title:ft.title,episodes:ft.episodes.sort((Tt,At)=>Tt.episode_number-At.episode_number).map(Tt=>({id:Tt.id.toString(),number:Tt.episode_number,title:Tt.title}))}:void 0}}function JWMediaToId(lt){return["JW",mediaTypeToJW(lt.type),lt.id].join("-")}function decodeJWId(lt){const[ft,dt,vt]=lt.split("-",3);if(ft!=="JW")return null;let Et;try{Et=JWMediaToMediaType(dt)}catch{return null}return{type:Et,id:vt}}async function getMetaFromId(lt,ft,dt){var Ct,Rt,Dt,kt,Nt;const vt=mediaTypeToJW(lt);let Et;try{const zt=makeUrl("/content/titles/{type}/{id}/locale/en_US",{type:vt,id:ft});Et=await proxiedFetch(zt,{baseURL:JW_API_BASE})}catch(zt){if(zt instanceof FetchError&&(zt.statusCode===400||zt.statusCode===404))return null;throw zt}let St=(Ct=Et.external_ids.find(zt=>zt.provider==="imdb_latest"))==null?void 0:Ct.external_id;St||(St=(Rt=Et.external_ids.find(zt=>zt.provider==="imdb"))==null?void 0:Rt.external_id);let Tt=(Dt=Et.external_ids.find(zt=>zt.provider==="tmdb_latest"))==null?void 0:Dt.external_id;if(Tt||(Tt=(kt=Et.external_ids.find(zt=>zt.provider==="tmdb"))==null?void 0:kt.external_id),!St||!Tt)throw new Error("not enough info");let At;if(Et.object_type==="show"){const zt=dt??((Nt=Et.seasons)==null?void 0:Nt[0].id.toString())??"",Wt=makeUrl("/content/titles/show_season/{id}/locale/en_US",{id:zt});At=await proxiedFetch(Wt,{baseURL:JW_API_BASE})}return{meta:formatJWMeta(Et,At),imdbId:St,tmdbId:Tt}}class SimpleCache{constructor(){this.INTERVAL_MS=2*60*1e3,this._interval=null,this._compare=null,this._storage=[]}initialize(){if(this._interval)throw new Error("cache is already initialized");this._interval=setInterval(()=>{const ft=new Date;this._storage.filter(dt=>!(dt.expiry<ft))},this.INTERVAL_MS)}destroy(){this._interval&&clearInterval(this._interval),this.clear()}setCompare(ft){this._compare=ft}has(ft){return!!this.get(ft)}get(ft){if(!this._compare)throw new Error("Compare function not set");const dt=this._storage.find(vt=>this._compare&&this._compare(vt.key,ft));if(dt)return dt.value}set(ft,dt,vt){if(!this._compare)throw new Error("Compare function not set");const Et=this._storage.find(Tt=>this._compare&&this._compare(Tt.key,ft)),St=new Date(new Date().getTime()+vt*1e3);if(Et){Et.key=ft,Et.value=dt,Et.expiry=St;return}this._storage.push({key:ft,value:dt,expiry:St})}remove(ft){if(!this._compare)throw new Error("Compare function not set");this._storage.filter(dt=>!(this._compare&&this._compare(dt.key,ft)))}clear(){this._storage=[]}}const cache=new SimpleCache;cache.setCompare((lt,ft)=>lt.type===ft.type&&lt.searchQuery.trim()===ft.searchQuery.trim());cache.initialize();async function searchForMedia(lt){if(cache.has(lt))return cache.get(lt);const{searchQuery:ft,type:dt}=lt,Et={content_types:[mediaTypeToJW(dt)],page:1,query:ft,page_size:40},Tt=(await proxiedFetch("/content/titles/en_US/popular",{baseURL:JW_API_BASE,params:{body:JSON.stringify(Et)}})).items.map(At=>formatJWMeta(At));return cache.set(lt,Tt,3600),Tt}function normalizeTitle(lt){return lt.trim().toLowerCase().replace(/['":]/g,"").replace(/[^a-zA-Z0-9]+/g,"_")}function compareTitle(lt,ft){return normalizeTitle(lt)===normalizeTitle(ft)}async function getMetas(lt,ft){const dt=(St,Tt)=>Math.abs(St-Tt)<=1,vt={},Et=await Promise.all(Object.values(lt).map(async St=>{const Tt=Number(St.year.toString().split("-")[0]),Ct=(await searchForMedia({searchQuery:`${St.title} ${Tt}`,type:St.mediaType})).find(Rt=>dt(Number(Rt.year),Tt)&&compareTitle(Rt.title,St.title));if(!Ct){console.error(`No item found for migration: ${St.title}`);return}return{id:St.mediaId,data:Ct}}));for(const St of Et.filter(Boolean)){if(!St)continue;let Tt=[["0","0"]];if(St.data.type==="series"){const At=await getMetaFromId(St.data.type,St.data.id);if(!At||!(At!=null&&At.meta.seasons))return;Tt=[...new Set(ft!=null&&ft.items?ft.items.filter(Dt=>Dt.mediaId===St.id).map(Dt=>Dt.seasonId):["0"])].map(Dt=>{var kt,Nt;return{num:Dt,season:(Nt=(kt=At.meta)==null?void 0:kt.seasons)==null?void 0:Nt[Math.max(0,Dt-1)]}}).map(Dt=>{var kt;return Dt?[Dt.num,(kt=Dt==null?void 0:Dt.season)==null?void 0:kt.id]:[]}).filter(Dt=>Dt.length>0)}vt[St.id]||(vt[St.id]={}),await Promise.all(Tt.map(async([At,Ct])=>{At&&(vt[St.id][At]=await getMetaFromId(St.data.type,St.data.id,Ct==="0"||Ct===null?void 0:Ct))}))}return vt}async function migrateV1Bookmarks(lt){const ft=lt;if(!ft)return;const dt={};ft.bookmarks.forEach(St=>{dt[St.mediaId]||(dt[St.mediaId]=St)});const vt=await getMetas(dt);return vt?{bookmarks:Object.keys(vt).map(St=>vt[St][0]).map(St=>St==null?void 0:St.meta).filter(Boolean)}:void 0}async function migrateV2Videos(lt){var Tt,At,Ct,Rt;const ft=lt;if(!ft)return;const dt={};ft.items.forEach(Dt=>{dt[Dt.mediaId]||(dt[Dt.mediaId]=Dt)});const vt=await getMetas(dt,ft);if(!vt)return;const Et={...ft,items:[]},St=Date.now();for(const Dt of ft.items)if(Dt.mediaType==="movie"){if(!((Tt=vt[Dt.mediaId][0])!=null&&Tt.meta))continue;const kt={item:{meta:(At=vt[Dt.mediaId][0])==null?void 0:At.meta},progress:Dt.progress,percentage:Dt.percentage,watchedAt:Date.now()};ft.items=ft.items.filter(Nt=>JSON.stringify(Nt)!==JSON.stringify(Dt)),Et.items.push(kt)}else if(Dt.mediaType==="series"){if(!((Ct=vt[Dt.mediaId][Dt.seasonId])!=null&&Ct.meta))continue;const kt=(Rt=vt[Dt.mediaId][Dt.seasonId])==null?void 0:Rt.meta;if(kt.type!=="series")return;const Nt={item:{meta:kt,series:{episode:Number(Dt.episodeId),season:Number(Dt.seasonId),seasonId:kt.seasonData.id,episodeId:kt.seasonData.episodes[Number(Dt.episodeId)-1].id}},progress:Dt.progress,percentage:Dt.percentage,watchedAt:St+Number(Dt.seasonId)*1e3+Number(Dt.episodeId)};if(Et.items.find(zt=>{var Wt,nr;return zt.item.meta.id===Nt.item.meta.id&&((Wt=zt.item.series)==null?void 0:Wt.episodeId)===((nr=Nt.item.series)==null?void 0:nr.episodeId)}))continue;ft.items=ft.items.filter(zt=>JSON.stringify(zt)!==JSON.stringify(Dt)),Et.items.push(Nt)}return Et}const BookmarkStore=createVersionedStore().setKey("mw-bookmarks").addVersion({version:0,migrate(lt){return migrateV1Bookmarks(lt)}}).addVersion({version:1,create(){return{bookmarks:[]}}}).build(),BookmarkedContext=reactExports.createContext({setItemBookmark:()=>{},getFilteredBookmarks:()=>[],bookmarkStore:{bookmarks:[]}});function getBookmarkIndexFromMedia(lt,ft){return lt.findIndex(vt=>vt.id===ft.id)}function BookmarkContextProvider(lt){const[ft,dt]=useStore(BookmarkStore),vt=reactExports.useMemo(()=>({setItemBookmark(Et,St){dt(Tt=>{let At=[...Tt.bookmarks];return At=At.filter(Ct=>Ct.id!==Et.id),St&&At.push({...Et}),{bookmarks:At}})},getFilteredBookmarks(){return[...ft.bookmarks]},bookmarkStore:ft}),[ft,dt]);return jsx(BookmarkedContext.Provider,{value:vt,children:lt.children})}function useBookmarkContext(){return reactExports.useContext(BookmarkedContext)}function getIfBookmarkedFromPortable(lt,ft){return getBookmarkIndexFromMedia(lt,ft)!==-1}const VideoProgressStore=createVersionedStore().setKey("video-progress").addVersion({version:0,migrate(){return{items:[]}}}).addVersion({version:1,async migrate(lt){return migrateV2Videos(lt)}}).addVersion({version:2,create(){return{items:[]}}}).build(),FIVETEEN_MINUTES=15*60,FIVE_MINUTES=5*60;function shouldSave(lt,ft,dt){const vt=Math.max(0,ft-lt);return ft<FIVETEEN_MINUTES?!(lt<5||vt<60):!(lt<30||vt<FIVE_MINUTES&&!dt)}const WatchedContext=reactExports.createContext({updateProgress:()=>{},getFilteredWatched:()=>[],removeProgress:()=>{},watched:{items:[]}});WatchedContext.displayName="WatchedContext";function isSameEpisode(lt,ft){var dt,vt;return lt.meta.id===ft.meta.id&&(!lt.series||lt.series.seasonId===((dt=ft.series)==null?void 0:dt.seasonId)&&lt.series.episodeId===((vt=ft.series)==null?void 0:vt.episodeId))}function WatchedContextProvider(lt){const[ft,dt]=useStore(VideoProgressStore),vt=reactExports.useMemo(()=>({removeProgress(Et){dt(St=>{const Tt={...St};return Tt.items=Tt.items.filter(At=>At.item.meta.id!==Et),Tt})},updateProgress(Et,St,Tt){dt(At=>{const Ct={...At};let Rt=Ct.items.find(Dt=>isSameEpisode(Et,Dt.item));return Rt||(Rt={item:{...Et,meta:{...Et.meta},series:Et.series?{...Et.series}:void 0},progress:0,percentage:0,watchedAt:Date.now()},Ct.items.push(Rt)),Rt.progress=St,Rt.percentage=Math.round(St/Tt*100),Rt.watchedAt=Date.now(),shouldSave(St,Tt,!!Et.series)||(Ct.items=At.items.filter(Dt=>!isSameEpisode(Dt.item,Et))),Ct})},getFilteredWatched(){let Et=ft.items;const St=[];return Et=Et.sort((Tt,At)=>At.watchedAt-Tt.watchedAt).filter(Tt=>{const At=Tt.item.meta.id;return St.includes(At)?!1:(St.push(At),!0)}),Et},watched:ft}),[ft,dt]);return jsx(WatchedContext.Provider,{value:vt,children:lt.children})}function useWatchedContext(){return reactExports.useContext(WatchedContext)}function isSameEpisodeMeta(lt,ft,dt){return(ft==null?void 0:ft.meta.type)===MWMediaType.SERIES&&dt?isSameEpisode(lt,{meta:ft.meta,series:{season:0,episode:0,episodeId:dt,seasonId:ft.meta.seasonData.id}}):ft?isSameEpisode(lt,{meta:ft.meta}):()=>!1}function useWatchedItem(lt,ft){const{watched:dt,updateProgress:vt}=reactExports.useContext(WatchedContext),Et=reactExports.useMemo(()=>dt.items.find(At=>isSameEpisodeMeta(At.item,lt,ft)),[dt,lt,ft]),St=reactExports.useRef([0,0]);return{updateProgress:reactExports.useCallback((At,Ct)=>{var Dt;const Rt=St.current[0]!==At||St.current[1]!==Ct;if(lt&&Rt){St.current=[At,Ct];const kt={meta:lt.meta,series:lt.meta.type===MWMediaType.SERIES&&ft?{seasonId:lt.meta.seasonData.id,episodeId:ft,season:lt.meta.seasonData.number,episode:((Dt=lt.meta.seasonData.episodes.find(Nt=>Nt.id===ft))==null?void 0:Dt.number)||0}:void 0};vt(kt,At,Ct)}},[lt,vt,ft]),watchedItem:Et}}const SettingsStore=createVersionedStore().setKey("mw-settings").addVersion({version:0,create(){return{language:"en",captionSettings:{delay:0,style:{color:"#ffffff",fontSize:25,backgroundColor:"#00000096"}}}}}).build(),SettingsContext=reactExports.createContext(null);function SettingsProvider(lt){function ft(St,Tt,At){return Math.max(St,Math.min(Tt,At))}const[dt,vt]=useStore(SettingsStore),Et=reactExports.useMemo(()=>({...dt,setLanguage(Tt){vt(At=>({...At,language:Tt}))},setCaptionDelay(Tt){vt(At=>{const Ct=At.captionSettings;return Ct.delay=ft(-10,Tt,10),At})},setCaptionColor(Tt){vt(At=>{const Ct=At.captionSettings.style;return Ct.color=Tt,At})},setCaptionFontSize(Tt){vt(At=>{const Ct=At.captionSettings.style;return Ct.fontSize=ft(10,Tt,60),At})},setCaptionBackgroundColor(Tt){vt(At=>{const Ct=At.captionSettings.style;return Ct.backgroundColor=Tt,At})}}),[dt,vt]);return jsx(SettingsContext.Provider,{value:Et,children:lt.children})}function useSettings(){return reactExports.useContext(SettingsContext)}var __assign=function(){return __assign=Object.assign||function(ft){for(var dt,vt=1,Et=arguments.length;vt<Et;vt++){dt=arguments[vt];for(var St in dt)Object.prototype.hasOwnProperty.call(dt,St)&&(ft[St]=dt[St])}return ft},__assign.apply(this,arguments)};function useMountedState(){var lt=reactExports.useRef(!1),ft=reactExports.useCallback(function(){return lt.current},[]);return reactExports.useEffect(function(){return lt.current=!0,function(){lt.current=!1}},[]),ft}function useAsyncFn(lt,ft,dt){ft===void 0&&(ft=[]),dt===void 0&&(dt={loading:!1});var vt=reactExports.useRef(0),Et=useMountedState(),St=reactExports.useState(dt),Tt=St[0],At=St[1],Ct=reactExports.useCallback(function(){for(var Rt=[],Dt=0;Dt<arguments.length;Dt++)Rt[Dt]=arguments[Dt];var kt=++vt.current;return Tt.loading||At(function(Nt){return __assign(__assign({},Nt),{loading:!0})}),lt.apply(void 0,Rt).then(function(Nt){return Et()&&kt===vt.current&&At({value:Nt,loading:!1}),Nt},function(Nt){return Et()&&kt===vt.current&&At({error:Nt,loading:!1}),Nt})},ft);return[Tt,Ct]}function useAsync(lt,ft){ft===void 0&&(ft=[]);var dt=useAsyncFn(lt,ft,{loading:!0}),vt=dt[0],Et=dt[1];return reactExports.useEffect(function(){Et()},[Et]),vt}var noop$3=function(){},isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect;const useIsomorphicLayoutEffect$1=useIsomorphicLayoutEffect;var defaultState={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function useMeasure(){var lt=reactExports.useState(null),ft=lt[0],dt=lt[1],vt=reactExports.useState(defaultState),Et=vt[0],St=vt[1],Tt=reactExports.useMemo(function(){return new window.ResizeObserver(function(At){if(At[0]){var Ct=At[0].contentRect,Rt=Ct.x,Dt=Ct.y,kt=Ct.width,Nt=Ct.height,zt=Ct.top,Wt=Ct.left,nr=Ct.bottom,Ut=Ct.right;St({x:Rt,y:Dt,width:kt,height:Nt,top:zt,left:Wt,bottom:nr,right:Ut})}})},[]);return useIsomorphicLayoutEffect$1(function(){if(ft)return Tt.observe(ft),function(){Tt.disconnect()}},[ft]),[dt,Et]}const useMeasure$1=isBrowser$1&&typeof window.ResizeObserver<"u"?useMeasure:function(){return[noop$3,defaultState]},BannerContext=reactExports.createContext(null);function BannerContextProvider(lt){const[ft,dt]=reactExports.useState([]),vt=reactExports.useMemo(()=>[ft,dt],[ft]);return jsx(BannerContext.Provider,{value:vt,children:lt.children})}function useBanner(lt){const[ft,{height:dt}]=useMeasure$1(),[vt,Et]=reactExports.useContext(BannerContext);return reactExports.useEffect(()=>(Et(St=>[...St,{id:lt,height:0}]),Et(St=>{const Tt=St.find(At=>At.id===lt);return Tt&&(Tt.height=dt),St}),()=>{Et(St=>St.filter(Tt=>Tt.id!==lt))}),[dt,lt,Et]),[ft]}function useBannerSize(){const[lt]=reactExports.useContext(BannerContext);return lt.reduce((ft,dt)=>ft+dt.height,0)}function BrandPill(lt){const{t:ft}=useTranslation();return jsxs("div",{className:`flex items-center space-x-2 rounded-full bg-bink-300 bg-opacity-50 px-4 py-2 text-bink-600 ${lt.clickable?"transition-[transform,background-color] hover:scale-105 hover:bg-bink-400 hover:text-bink-700 active:scale-95":""}`,children:[jsx(Icon,{className:"text-xl",icon:Icons.MOVIE_WEB}),jsx("span",{className:["font-semibold text-white",lt.hideTextOnMobile?"hidden sm:block":""].join(" "),children:ft("global.name")})]})}function Navigation(lt){const ft=useBannerSize();return jsx("div",{className:"fixed left-0 right-0 top-0 z-20 min-h-[150px] bg-gradient-to-b from-denim-300 via-denim-300 to-transparent sm:from-transparent",style:{top:`${ft}px`},children:jsxs("div",{className:"fixed left-0 right-0 flex items-center justify-between py-5 px-7",children:[jsx("div",{className:`${lt.bg?"opacity-100":"opacity-0"} absolute inset-0 block bg-denim-100 transition-opacity duration-300`,children:jsx("div",{className:"pointer-events-none absolute -bottom-24 h-24 w-full bg-gradient-to-b from-denim-100 to-transparent"})}),jsxs("div",{className:"relative flex w-full items-center justify-center sm:w-fit",children:[jsx("div",{className:"mr-auto sm:mr-6",children:jsx(Link$1,{to:"/",children:jsx(BrandPill,{clickable:!0})})}),lt.children]}),jsxs("div",{className:`${lt.children?"hidden sm:flex":"flex"} relative flex-row	gap-4`,children:[jsx("a",{href:conf().DISCORD_LINK,target:"_blank",rel:"noreferrer",className:"text-2xl text-white",children:jsx(IconPatch,{icon:Icons.DISCORD,clickable:!0})}),jsx("a",{href:conf().GITHUB_LINK,target:"_blank",rel:"noreferrer",className:"text-2xl text-white",children:jsx(IconPatch,{icon:Icons.GITHUB,clickable:!0})})]})]})})}function ArrowLink(lt){const ft=lt.direction||"right",dt=!!lt.url,vt=!!lt.to,Et=jsxs("span",{className:"group mt-1 inline-flex cursor-pointer items-center space-x-1 pr-1 font-bold text-bink-600 hover:text-bink-700 active:scale-95",children:[ft==="left"?jsx("span",{className:"text-xl transition-transform group-hover:-translate-x-1",children:jsx(Icon,{icon:Icons.ARROW_LEFT})}):null,jsx("span",{className:"flex-1",children:lt.linkText}),ft==="right"?jsx("span",{className:"text-xl transition-transform group-hover:translate-x-1",children:jsx(Icon,{icon:Icons.ARROW_RIGHT})}):null]});return dt?jsx("a",{href:lt.url,children:Et}):vt?jsx(Link$1,{to:lt.to,children:Et}):jsx("span",{onClick:()=>lt.onClick&&lt.onClick(),children:Et})}function useGoBack(){const lt=useHistory();return reactExports.useCallback(()=>{lt.action!=="POP"?lt.goBack():lt.push("/")},[lt])}function _interopDefault(lt){return lt&&typeof lt=="object"&&"default"in lt?lt.default:lt}var React=reactExports,React__default=_interopDefault(React);function _defineProperty$3(lt,ft,dt){return ft in lt?Object.defineProperty(lt,ft,{value:dt,enumerable:!0,configurable:!0,writable:!0}):lt[ft]=dt,lt}function _inheritsLoose(lt,ft){lt.prototype=Object.create(ft.prototype),lt.prototype.constructor=lt,lt.__proto__=ft}var canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement);function withSideEffect(lt,ft,dt){if(typeof lt!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof ft!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof dt<"u"&&typeof dt!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function vt(Et){return Et.displayName||Et.name||"Component"}return function(St){if(typeof St!="function")throw new Error("Expected WrappedComponent to be a React component.");var Tt=[],At;function Ct(){At=lt(Tt.map(function(Dt){return Dt.props})),Rt.canUseDOM?ft(At):dt&&(At=dt(At))}var Rt=function(Dt){_inheritsLoose(kt,Dt);function kt(){return Dt.apply(this,arguments)||this}kt.peek=function(){return At},kt.rewind=function(){if(kt.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var Wt=At;return At=void 0,Tt=[],Wt};var Nt=kt.prototype;return Nt.UNSAFE_componentWillMount=function(){Tt.push(this),Ct()},Nt.componentDidUpdate=function(){Ct()},Nt.componentWillUnmount=function(){var Wt=Tt.indexOf(this);Tt.splice(Wt,1),Ct()},Nt.render=function(){return React__default.createElement(St,this.props)},kt}(React.PureComponent);return _defineProperty$3(Rt,"displayName","SideEffect("+vt(St)+")"),_defineProperty$3(Rt,"canUseDOM",canUseDOM),Rt}}var lib=withSideEffect,hasElementType=typeof Element<"u",hasMap=typeof Map=="function",hasSet=typeof Set=="function",hasArrayBuffer=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function equal(lt,ft){if(lt===ft)return!0;if(lt&&ft&&typeof lt=="object"&&typeof ft=="object"){if(lt.constructor!==ft.constructor)return!1;var dt,vt,Et;if(Array.isArray(lt)){if(dt=lt.length,dt!=ft.length)return!1;for(vt=dt;vt--!==0;)if(!equal(lt[vt],ft[vt]))return!1;return!0}var St;if(hasMap&&lt instanceof Map&&ft instanceof Map){if(lt.size!==ft.size)return!1;for(St=lt.entries();!(vt=St.next()).done;)if(!ft.has(vt.value[0]))return!1;for(St=lt.entries();!(vt=St.next()).done;)if(!equal(vt.value[1],ft.get(vt.value[0])))return!1;return!0}if(hasSet&&lt instanceof Set&&ft instanceof Set){if(lt.size!==ft.size)return!1;for(St=lt.entries();!(vt=St.next()).done;)if(!ft.has(vt.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(lt)&&ArrayBuffer.isView(ft)){if(dt=lt.length,dt!=ft.length)return!1;for(vt=dt;vt--!==0;)if(lt[vt]!==ft[vt])return!1;return!0}if(lt.constructor===RegExp)return lt.source===ft.source&&lt.flags===ft.flags;if(lt.valueOf!==Object.prototype.valueOf&&typeof lt.valueOf=="function"&&typeof ft.valueOf=="function")return lt.valueOf()===ft.valueOf();if(lt.toString!==Object.prototype.toString&&typeof lt.toString=="function"&&typeof ft.toString=="function")return lt.toString()===ft.toString();if(Et=Object.keys(lt),dt=Et.length,dt!==Object.keys(ft).length)return!1;for(vt=dt;vt--!==0;)if(!Object.prototype.hasOwnProperty.call(ft,Et[vt]))return!1;if(hasElementType&&lt instanceof Element)return!1;for(vt=dt;vt--!==0;)if(!((Et[vt]==="_owner"||Et[vt]==="__v"||Et[vt]==="__o")&&lt.$$typeof)&&!equal(lt[Et[vt]],ft[Et[vt]]))return!1;return!0}return lt!==lt&&ft!==ft}var reactFastCompare=function(ft,dt){try{return equal(ft,dt)}catch(vt){if((vt.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw vt}},ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(TAG_NAMES).map(function(lt){return TAG_NAMES[lt]});var TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},HTML_TAG_MAP=Object.keys(REACT_TAG_MAP).reduce(function(lt,ft){return lt[REACT_TAG_MAP[ft]]=ft,lt},{}),SELF_CLOSING_TAGS=[TAG_NAMES.NOSCRIPT,TAG_NAMES.SCRIPT,TAG_NAMES.STYLE],HELMET_ATTRIBUTE="data-react-helmet",_typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},classCallCheck=function(lt,ft){if(!(lt instanceof ft))throw new TypeError("Cannot call a class as a function")},createClass=function(){function lt(ft,dt){for(var vt=0;vt<dt.length;vt++){var Et=dt[vt];Et.enumerable=Et.enumerable||!1,Et.configurable=!0,"value"in Et&&(Et.writable=!0),Object.defineProperty(ft,Et.key,Et)}}return function(ft,dt,vt){return dt&&lt(ft.prototype,dt),vt&&lt(ft,vt),ft}}(),_extends=Object.assign||function(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft];for(var vt in dt)Object.prototype.hasOwnProperty.call(dt,vt)&&(lt[vt]=dt[vt])}return lt},inherits=function(lt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ft);lt.prototype=Object.create(ft&&ft.prototype,{constructor:{value:lt,enumerable:!1,writable:!0,configurable:!0}}),ft&&(Object.setPrototypeOf?Object.setPrototypeOf(lt,ft):lt.__proto__=ft)},objectWithoutProperties=function(lt,ft){var dt={};for(var vt in lt)ft.indexOf(vt)>=0||Object.prototype.hasOwnProperty.call(lt,vt)&&(dt[vt]=lt[vt]);return dt},possibleConstructorReturn=function(lt,ft){if(!lt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ft&&(typeof ft=="object"||typeof ft=="function")?ft:lt},encodeSpecialCharacters=function(ft){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return dt===!1?String(ft):String(ft).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},getTitleFromPropsList=function(ft){var dt=getInnermostProperty(ft,TAG_NAMES.TITLE),vt=getInnermostProperty(ft,HELMET_PROPS.TITLE_TEMPLATE);if(vt&&dt)return vt.replace(/%s/g,function(){return Array.isArray(dt)?dt.join(""):dt});var Et=getInnermostProperty(ft,HELMET_PROPS.DEFAULT_TITLE);return dt||Et||void 0},getOnChangeClientState=function(ft){return getInnermostProperty(ft,HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},getAttributesFromPropsList=function(ft,dt){return dt.filter(function(vt){return typeof vt[ft]<"u"}).map(function(vt){return vt[ft]}).reduce(function(vt,Et){return _extends({},vt,Et)},{})},getBaseTagFromPropsList=function(ft,dt){return dt.filter(function(vt){return typeof vt[TAG_NAMES.BASE]<"u"}).map(function(vt){return vt[TAG_NAMES.BASE]}).reverse().reduce(function(vt,Et){if(!vt.length)for(var St=Object.keys(Et),Tt=0;Tt<St.length;Tt++){var At=St[Tt],Ct=At.toLowerCase();if(ft.indexOf(Ct)!==-1&&Et[Ct])return vt.concat(Et)}return vt},[])},getTagsFromPropsList=function(ft,dt,vt){var Et={};return vt.filter(function(St){return Array.isArray(St[ft])?!0:(typeof St[ft]<"u"&&warn$1("Helmet: "+ft+' should be of type "Array". Instead found type "'+_typeof$2(St[ft])+'"'),!1)}).map(function(St){return St[ft]}).reverse().reduce(function(St,Tt){var At={};Tt.filter(function(Nt){for(var zt=void 0,Wt=Object.keys(Nt),nr=0;nr<Wt.length;nr++){var Ut=Wt[nr],Ht=Ut.toLowerCase();dt.indexOf(Ht)!==-1&&!(zt===TAG_PROPERTIES.REL&&Nt[zt].toLowerCase()==="canonical")&&!(Ht===TAG_PROPERTIES.REL&&Nt[Ht].toLowerCase()==="stylesheet")&&(zt=Ht),dt.indexOf(Ut)!==-1&&(Ut===TAG_PROPERTIES.INNER_HTML||Ut===TAG_PROPERTIES.CSS_TEXT||Ut===TAG_PROPERTIES.ITEM_PROP)&&(zt=Ut)}if(!zt||!Nt[zt])return!1;var Bt=Nt[zt].toLowerCase();return Et[zt]||(Et[zt]={}),At[zt]||(At[zt]={}),Et[zt][Bt]?!1:(At[zt][Bt]=!0,!0)}).reverse().forEach(function(Nt){return St.push(Nt)});for(var Ct=Object.keys(At),Rt=0;Rt<Ct.length;Rt++){var Dt=Ct[Rt],kt=objectAssign$1({},Et[Dt],At[Dt]);Et[Dt]=kt}return St},[]).reverse()},getInnermostProperty=function(ft,dt){for(var vt=ft.length-1;vt>=0;vt--){var Et=ft[vt];if(Et.hasOwnProperty(dt))return Et[dt]}return null},reducePropsToState=function(ft){return{baseTag:getBaseTagFromPropsList([TAG_PROPERTIES.HREF,TAG_PROPERTIES.TARGET],ft),bodyAttributes:getAttributesFromPropsList(ATTRIBUTE_NAMES.BODY,ft),defer:getInnermostProperty(ft,HELMET_PROPS.DEFER),encode:getInnermostProperty(ft,HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:getAttributesFromPropsList(ATTRIBUTE_NAMES.HTML,ft),linkTags:getTagsFromPropsList(TAG_NAMES.LINK,[TAG_PROPERTIES.REL,TAG_PROPERTIES.HREF],ft),metaTags:getTagsFromPropsList(TAG_NAMES.META,[TAG_PROPERTIES.NAME,TAG_PROPERTIES.CHARSET,TAG_PROPERTIES.HTTPEQUIV,TAG_PROPERTIES.PROPERTY,TAG_PROPERTIES.ITEM_PROP],ft),noscriptTags:getTagsFromPropsList(TAG_NAMES.NOSCRIPT,[TAG_PROPERTIES.INNER_HTML],ft),onChangeClientState:getOnChangeClientState(ft),scriptTags:getTagsFromPropsList(TAG_NAMES.SCRIPT,[TAG_PROPERTIES.SRC,TAG_PROPERTIES.INNER_HTML],ft),styleTags:getTagsFromPropsList(TAG_NAMES.STYLE,[TAG_PROPERTIES.CSS_TEXT],ft),title:getTitleFromPropsList(ft),titleAttributes:getAttributesFromPropsList(ATTRIBUTE_NAMES.TITLE,ft)}},rafPolyfill=function(){var lt=Date.now();return function(ft){var dt=Date.now();dt-lt>16?(lt=dt,ft(dt)):setTimeout(function(){rafPolyfill(ft)},0)}}(),cafPolyfill=function(ft){return clearTimeout(ft)},requestAnimationFrame$1=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||rafPolyfill:global.requestAnimationFrame||rafPolyfill,cancelAnimationFrame$1=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||cafPolyfill:global.cancelAnimationFrame||cafPolyfill,warn$1=function(ft){return console&&typeof console.warn=="function"&&console.warn(ft)},_helmetCallback=null,handleClientStateChange=function(ft){_helmetCallback&&cancelAnimationFrame$1(_helmetCallback),ft.defer?_helmetCallback=requestAnimationFrame$1(function(){commitTagChanges(ft,function(){_helmetCallback=null})}):(commitTagChanges(ft),_helmetCallback=null)},commitTagChanges=function(ft,dt){var vt=ft.baseTag,Et=ft.bodyAttributes,St=ft.htmlAttributes,Tt=ft.linkTags,At=ft.metaTags,Ct=ft.noscriptTags,Rt=ft.onChangeClientState,Dt=ft.scriptTags,kt=ft.styleTags,Nt=ft.title,zt=ft.titleAttributes;updateAttributes(TAG_NAMES.BODY,Et),updateAttributes(TAG_NAMES.HTML,St),updateTitle(Nt,zt);var Wt={baseTag:updateTags(TAG_NAMES.BASE,vt),linkTags:updateTags(TAG_NAMES.LINK,Tt),metaTags:updateTags(TAG_NAMES.META,At),noscriptTags:updateTags(TAG_NAMES.NOSCRIPT,Ct),scriptTags:updateTags(TAG_NAMES.SCRIPT,Dt),styleTags:updateTags(TAG_NAMES.STYLE,kt)},nr={},Ut={};Object.keys(Wt).forEach(function(Ht){var Bt=Wt[Ht],Ft=Bt.newTags,tr=Bt.oldTags;Ft.length&&(nr[Ht]=Ft),tr.length&&(Ut[Ht]=Wt[Ht].oldTags)}),dt&&dt(),Rt(ft,nr,Ut)},flattenArray=function(ft){return Array.isArray(ft)?ft.join(""):ft},updateTitle=function(ft,dt){typeof ft<"u"&&document.title!==ft&&(document.title=flattenArray(ft)),updateAttributes(TAG_NAMES.TITLE,dt)},updateAttributes=function(ft,dt){var vt=document.getElementsByTagName(ft)[0];if(vt){for(var Et=vt.getAttribute(HELMET_ATTRIBUTE),St=Et?Et.split(","):[],Tt=[].concat(St),At=Object.keys(dt),Ct=0;Ct<At.length;Ct++){var Rt=At[Ct],Dt=dt[Rt]||"";vt.getAttribute(Rt)!==Dt&&vt.setAttribute(Rt,Dt),St.indexOf(Rt)===-1&&St.push(Rt);var kt=Tt.indexOf(Rt);kt!==-1&&Tt.splice(kt,1)}for(var Nt=Tt.length-1;Nt>=0;Nt--)vt.removeAttribute(Tt[Nt]);St.length===Tt.length?vt.removeAttribute(HELMET_ATTRIBUTE):vt.getAttribute(HELMET_ATTRIBUTE)!==At.join(",")&&vt.setAttribute(HELMET_ATTRIBUTE,At.join(","))}},updateTags=function(ft,dt){var vt=document.head||document.querySelector(TAG_NAMES.HEAD),Et=vt.querySelectorAll(ft+"["+HELMET_ATTRIBUTE+"]"),St=Array.prototype.slice.call(Et),Tt=[],At=void 0;return dt&&dt.length&&dt.forEach(function(Ct){var Rt=document.createElement(ft);for(var Dt in Ct)if(Ct.hasOwnProperty(Dt))if(Dt===TAG_PROPERTIES.INNER_HTML)Rt.innerHTML=Ct.innerHTML;else if(Dt===TAG_PROPERTIES.CSS_TEXT)Rt.styleSheet?Rt.styleSheet.cssText=Ct.cssText:Rt.appendChild(document.createTextNode(Ct.cssText));else{var kt=typeof Ct[Dt]>"u"?"":Ct[Dt];Rt.setAttribute(Dt,kt)}Rt.setAttribute(HELMET_ATTRIBUTE,"true"),St.some(function(Nt,zt){return At=zt,Rt.isEqualNode(Nt)})?St.splice(At,1):Tt.push(Rt)}),St.forEach(function(Ct){return Ct.parentNode.removeChild(Ct)}),Tt.forEach(function(Ct){return vt.appendChild(Ct)}),{oldTags:St,newTags:Tt}},generateElementAttributesAsString=function(ft){return Object.keys(ft).reduce(function(dt,vt){var Et=typeof ft[vt]<"u"?vt+'="'+ft[vt]+'"':""+vt;return dt?dt+" "+Et:Et},"")},generateTitleAsString=function(ft,dt,vt,Et){var St=generateElementAttributesAsString(vt),Tt=flattenArray(dt);return St?"<"+ft+" "+HELMET_ATTRIBUTE+'="true" '+St+">"+encodeSpecialCharacters(Tt,Et)+"</"+ft+">":"<"+ft+" "+HELMET_ATTRIBUTE+'="true">'+encodeSpecialCharacters(Tt,Et)+"</"+ft+">"},generateTagsAsString=function(ft,dt,vt){return dt.reduce(function(Et,St){var Tt=Object.keys(St).filter(function(Rt){return!(Rt===TAG_PROPERTIES.INNER_HTML||Rt===TAG_PROPERTIES.CSS_TEXT)}).reduce(function(Rt,Dt){var kt=typeof St[Dt]>"u"?Dt:Dt+'="'+encodeSpecialCharacters(St[Dt],vt)+'"';return Rt?Rt+" "+kt:kt},""),At=St.innerHTML||St.cssText||"",Ct=SELF_CLOSING_TAGS.indexOf(ft)===-1;return Et+"<"+ft+" "+HELMET_ATTRIBUTE+'="true" '+Tt+(Ct?"/>":">"+At+"</"+ft+">")},"")},convertElementAttributestoReactProps=function(ft){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(ft).reduce(function(vt,Et){return vt[REACT_TAG_MAP[Et]||Et]=ft[Et],vt},dt)},convertReactPropstoHtmlAttributes=function(ft){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(ft).reduce(function(vt,Et){return vt[HTML_TAG_MAP[Et]||Et]=ft[Et],vt},dt)},generateTitleAsReactComponent=function(ft,dt,vt){var Et,St=(Et={key:dt},Et[HELMET_ATTRIBUTE]=!0,Et),Tt=convertElementAttributestoReactProps(vt,St);return[React$1.createElement(TAG_NAMES.TITLE,Tt,dt)]},generateTagsAsReactComponent=function(ft,dt){return dt.map(function(vt,Et){var St,Tt=(St={key:Et},St[HELMET_ATTRIBUTE]=!0,St);return Object.keys(vt).forEach(function(At){var Ct=REACT_TAG_MAP[At]||At;if(Ct===TAG_PROPERTIES.INNER_HTML||Ct===TAG_PROPERTIES.CSS_TEXT){var Rt=vt.innerHTML||vt.cssText;Tt.dangerouslySetInnerHTML={__html:Rt}}else Tt[Ct]=vt[At]}),React$1.createElement(ft,Tt)})},getMethodsForTag=function(ft,dt,vt){switch(ft){case TAG_NAMES.TITLE:return{toComponent:function(){return generateTitleAsReactComponent(ft,dt.title,dt.titleAttributes)},toString:function(){return generateTitleAsString(ft,dt.title,dt.titleAttributes,vt)}};case ATTRIBUTE_NAMES.BODY:case ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return convertElementAttributestoReactProps(dt)},toString:function(){return generateElementAttributesAsString(dt)}};default:return{toComponent:function(){return generateTagsAsReactComponent(ft,dt)},toString:function(){return generateTagsAsString(ft,dt,vt)}}}},mapStateOnServer=function(ft){var dt=ft.baseTag,vt=ft.bodyAttributes,Et=ft.encode,St=ft.htmlAttributes,Tt=ft.linkTags,At=ft.metaTags,Ct=ft.noscriptTags,Rt=ft.scriptTags,Dt=ft.styleTags,kt=ft.title,Nt=kt===void 0?"":kt,zt=ft.titleAttributes;return{base:getMethodsForTag(TAG_NAMES.BASE,dt,Et),bodyAttributes:getMethodsForTag(ATTRIBUTE_NAMES.BODY,vt,Et),htmlAttributes:getMethodsForTag(ATTRIBUTE_NAMES.HTML,St,Et),link:getMethodsForTag(TAG_NAMES.LINK,Tt,Et),meta:getMethodsForTag(TAG_NAMES.META,At,Et),noscript:getMethodsForTag(TAG_NAMES.NOSCRIPT,Ct,Et),script:getMethodsForTag(TAG_NAMES.SCRIPT,Rt,Et),style:getMethodsForTag(TAG_NAMES.STYLE,Dt,Et),title:getMethodsForTag(TAG_NAMES.TITLE,{title:Nt,titleAttributes:zt},Et)}},Helmet=function(ft){var dt,vt;return vt=dt=function(Et){inherits(St,Et);function St(){return classCallCheck(this,St),possibleConstructorReturn(this,Et.apply(this,arguments))}return St.prototype.shouldComponentUpdate=function(At){return!reactFastCompare(this.props,At)},St.prototype.mapNestedChildrenToProps=function(At,Ct){if(!Ct)return null;switch(At.type){case TAG_NAMES.SCRIPT:case TAG_NAMES.NOSCRIPT:return{innerHTML:Ct};case TAG_NAMES.STYLE:return{cssText:Ct}}throw new Error("<"+At.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},St.prototype.flattenArrayTypeChildren=function(At){var Ct,Rt=At.child,Dt=At.arrayTypeChildren,kt=At.newChildProps,Nt=At.nestedChildren;return _extends({},Dt,(Ct={},Ct[Rt.type]=[].concat(Dt[Rt.type]||[],[_extends({},kt,this.mapNestedChildrenToProps(Rt,Nt))]),Ct))},St.prototype.mapObjectTypeChildren=function(At){var Ct,Rt,Dt=At.child,kt=At.newProps,Nt=At.newChildProps,zt=At.nestedChildren;switch(Dt.type){case TAG_NAMES.TITLE:return _extends({},kt,(Ct={},Ct[Dt.type]=zt,Ct.titleAttributes=_extends({},Nt),Ct));case TAG_NAMES.BODY:return _extends({},kt,{bodyAttributes:_extends({},Nt)});case TAG_NAMES.HTML:return _extends({},kt,{htmlAttributes:_extends({},Nt)})}return _extends({},kt,(Rt={},Rt[Dt.type]=_extends({},Nt),Rt))},St.prototype.mapArrayTypeChildrenToProps=function(At,Ct){var Rt=_extends({},Ct);return Object.keys(At).forEach(function(Dt){var kt;Rt=_extends({},Rt,(kt={},kt[Dt]=At[Dt],kt))}),Rt},St.prototype.warnOnInvalidChildren=function(At,Ct){return!0},St.prototype.mapChildrenToProps=function(At,Ct){var Rt=this,Dt={};return React$1.Children.forEach(At,function(kt){if(!(!kt||!kt.props)){var Nt=kt.props,zt=Nt.children,Wt=objectWithoutProperties(Nt,["children"]),nr=convertReactPropstoHtmlAttributes(Wt);switch(Rt.warnOnInvalidChildren(kt,zt),kt.type){case TAG_NAMES.LINK:case TAG_NAMES.META:case TAG_NAMES.NOSCRIPT:case TAG_NAMES.SCRIPT:case TAG_NAMES.STYLE:Dt=Rt.flattenArrayTypeChildren({child:kt,arrayTypeChildren:Dt,newChildProps:nr,nestedChildren:zt});break;default:Ct=Rt.mapObjectTypeChildren({child:kt,newProps:Ct,newChildProps:nr,nestedChildren:zt});break}}}),Ct=this.mapArrayTypeChildrenToProps(Dt,Ct),Ct},St.prototype.render=function(){var At=this.props,Ct=At.children,Rt=objectWithoutProperties(At,["children"]),Dt=_extends({},Rt);return Ct&&(Dt=this.mapChildrenToProps(Ct,Dt)),React$1.createElement(ft,Dt)},createClass(St,null,[{key:"canUseDOM",set:function(At){ft.canUseDOM=At}}]),St}(React$1.Component),dt.propTypes={base:propTypesExports.object,bodyAttributes:propTypesExports.object,children:propTypesExports.oneOfType([propTypesExports.arrayOf(propTypesExports.node),propTypesExports.node]),defaultTitle:propTypesExports.string,defer:propTypesExports.bool,encodeSpecialCharacters:propTypesExports.bool,htmlAttributes:propTypesExports.object,link:propTypesExports.arrayOf(propTypesExports.object),meta:propTypesExports.arrayOf(propTypesExports.object),noscript:propTypesExports.arrayOf(propTypesExports.object),onChangeClientState:propTypesExports.func,script:propTypesExports.arrayOf(propTypesExports.object),style:propTypesExports.arrayOf(propTypesExports.object),title:propTypesExports.string,titleAttributes:propTypesExports.object,titleTemplate:propTypesExports.string},dt.defaultProps={defer:!0,encodeSpecialCharacters:!0},dt.peek=ft.peek,dt.rewind=function(){var Et=ft.rewind();return Et||(Et=mapStateOnServer({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),Et},vt},NullComponent=function(){return null},HelmetSideEffects=lib(reducePropsToState,handleClientStateChange,mapStateOnServer)(NullComponent),HelmetExport=Helmet(HelmetSideEffects);HelmetExport.renderStatic=HelmetExport.rewind;let random=lt=>crypto.getRandomValues(new Uint8Array(lt)),customRandom=(lt,ft,dt)=>{let vt=(2<<Math.log(lt.length-1)/Math.LN2)-1,Et=-~(1.6*vt*ft/lt.length);return(St=ft)=>{let Tt="";for(;;){let At=dt(Et),Ct=Et;for(;Ct--;)if(Tt+=lt[At[Ct]&vt]||"",Tt.length===St)return Tt}}},customAlphabet=(lt,ft=21)=>customRandom(lt,ft,random),nanoid$1=(lt=21)=>crypto.getRandomValues(new Uint8Array(lt)).reduce((ft,dt)=>(dt&=63,dt<36?ft+=dt.toString(36):dt<62?ft+=(dt-26).toString(36).toUpperCase():dt>62?ft+="-":ft+="_",ft),"");const _players=new Map;function getPlayerState(lt){const ft=_players.get(lt);if(!ft)throw new Error("invalid descriptor or has been unregistered");return ft}function resetForSource(lt){const ft=lt;ft.mediaPlaying={isPlaying:!1,isPaused:!0,isLoading:!1,isSeeking:!1,isDragSeeking:!1,isFirstLoading:!0,hasPlayedOnce:!1,volume:ft.mediaPlaying.volume,playbackSpeed:1},ft.progress={time:0,duration:0,buffered:0,draggingTime:0},ft.initalized=!1}function initPlayer(){return{interface:{popout:null,isFullscreen:!1,isFocused:!1,leftControlHovering:!1,popoutBounds:null},mediaPlaying:{isPlaying:!1,isPaused:!0,isLoading:!1,isSeeking:!1,isDragSeeking:!1,isFirstLoading:!0,hasPlayedOnce:!1,volume:0,playbackSpeed:1},progress:{time:0,duration:0,buffered:0,draggingTime:0},casting:{isCasting:!1,controller:null,instance:null,player:null},meta:null,source:null,error:null,canAirplay:!1,initalized:!1,stateProviderId:"video",pausedWhenSeeking:!1,hlsInstance:null,stateProvider:null,wrapperElement:null}}function registerVideoPlayer(){const lt=nanoid$1();if(_players.has(lt))throw new Error("duplicate id");return _players.set(lt,initPlayer()),lt}function unregisterVideoPlayer(lt){_players.has(lt)&&_players.delete(lt)}const VideoPlayerContext=reactExports.createContext("");function VideoPlayerContextProvider(lt){const[ft,dt]=reactExports.useState(null);return reactExports.useEffect(()=>{const vt=registerVideoPlayer();return dt(vt),()=>{unregisterVideoPlayer(vt)}},[dt]),ft?jsx(VideoPlayerContext.Provider,{value:ft,children:lt.children}):null}function useVideoPlayerDescriptor(){return reactExports.useContext(VideoPlayerContext)}function createEventString(lt,ft){return`_vid:::${lt}:::${ft}`}function sendEvent(lt,ft,dt){const vt=new CustomEvent(createEventString(lt,ft),{detail:dt});document.dispatchEvent(vt)}function listenEvent(lt,ft,dt){document.addEventListener(createEventString(lt,ft),dt)}function unlistenEvent(lt,ft,dt){document.removeEventListener(createEventString(lt,ft),dt)}function getInterfaceFromState(lt){return{popout:lt.interface.popout,leftControlHovering:lt.interface.leftControlHovering,isFocused:lt.interface.isFocused,isFullscreen:lt.interface.isFullscreen,popoutBounds:lt.interface.popoutBounds}}function updateInterface(lt,ft){sendEvent(lt,"interface",getInterfaceFromState(ft))}function useInterface(lt){const ft=getPlayerState(lt),[dt,vt]=reactExports.useState(getInterfaceFromState(ft));return reactExports.useEffect(()=>{function Et(St){vt(St.detail)}return listenEvent(lt,"interface",Et),()=>{unlistenEvent(lt,"interface",Et)}},[lt]),dt}function getMetaFromState(lt){return lt.meta?{...lt.meta}:null}function updateMeta(lt,ft){sendEvent(lt,"meta",getMetaFromState(ft))}function useMeta(lt){const ft=getPlayerState(lt),[dt,vt]=reactExports.useState(getMetaFromState(ft));return reactExports.useEffect(()=>{function Et(St){vt(St.detail)}return listenEvent(lt,"meta",Et),()=>{unlistenEvent(lt,"meta",Et)}},[lt]),dt}function getProgressFromState(lt){return{time:lt.progress.time,duration:lt.progress.duration,buffered:lt.progress.buffered,draggingTime:lt.progress.draggingTime}}function updateProgress(lt,ft){sendEvent(lt,"progress",getProgressFromState(ft))}function useProgress(lt){const ft=getPlayerState(lt),[dt,vt]=reactExports.useState(getProgressFromState(ft));return reactExports.useEffect(()=>{function Et(St){vt(St.detail)}return listenEvent(lt,"progress",Et),()=>{unlistenEvent(lt,"progress",Et)}},[lt]),dt}function useControls(lt){const ft=getPlayerState(lt);return{getId(){var dt;return((dt=ft.stateProvider)==null?void 0:dt.getId())??""},pause(){var dt;(dt=ft.stateProvider)==null||dt.pause()},play(){var dt;(dt=ft.stateProvider)==null||dt.play()},setSource(dt){var vt;(vt=ft.stateProvider)==null||vt.setSource(dt)},setSeeking(dt){var vt;(vt=ft.stateProvider)==null||vt.setSeeking(dt)},setTime(dt){var vt;(vt=ft.stateProvider)==null||vt.setTime(dt)},exitFullscreen(){var dt;(dt=ft.stateProvider)==null||dt.exitFullscreen()},enterFullscreen(){var dt;(dt=ft.stateProvider)==null||dt.enterFullscreen()},setVolume(dt){var vt;(vt=ft.stateProvider)==null||vt.setVolume(dt)},startAirplay(){var dt;(dt=ft.stateProvider)==null||dt.startAirplay()},setCaption(dt,vt){var Et;(Et=ft.stateProvider)==null||Et.setCaption(dt,vt)},clearCaption(){var dt;(dt=ft.stateProvider)==null||dt.clearCaption()},setLeftControlsHover(dt){ft.interface.leftControlHovering=dt,updateInterface(lt,ft)},setDraggingTime(dt){ft.progress.draggingTime=Math.max(0,Math.min(ft.progress.duration,dt)),updateProgress(lt,ft)},openPopout(dt){ft.interface.popout=dt,updateInterface(lt,ft)},closePopout(){ft.interface.popout=null,updateInterface(lt,ft)},setFocused(dt){ft.interface.isFocused=dt,updateInterface(lt,ft)},setMeta(dt){dt?ft.meta=dt:ft.meta=null,updateMeta(lt,ft)},setCurrentEpisode(dt,vt){ft.meta&&(ft.meta.episode={seasonId:dt,episodeId:vt},updateMeta(lt,ft))},togglePictureInPicture(){var dt;(dt=ft.stateProvider)==null||dt.togglePictureInPicture(),updateInterface(lt,ft)},setPlaybackSpeed(dt){var vt;(vt=ft.stateProvider)==null||vt.setPlaybackSpeed(dt),updateInterface(lt,ft)}}}function getMiscFromState(lt){return{canAirplay:lt.canAirplay,wrapperInitialized:!!lt.wrapperElement,initalized:lt.initalized,isCasting:lt.casting.isCasting,stateProviderId:lt.stateProviderId}}function updateMisc(lt,ft){sendEvent(lt,"misc",getMiscFromState(ft))}function useMisc(lt){const ft=getPlayerState(lt),[dt,vt]=reactExports.useState(getMiscFromState(ft));return reactExports.useEffect(()=>{function Et(St){vt(St.detail)}return listenEvent(lt,"misc",Et),()=>{unlistenEvent(lt,"misc",Et)}},[lt]),dt}const VideoPlayerIconButton=reactExports.forwardRef((lt,ft)=>jsx("div",{className:lt.className,ref:ft,children:jsx("button",{type:"button",onClick:lt.onClick,className:["group pointer-events-auto p-2 text-white transition-transform duration-100 active:scale-110",lt.disabled?"pointer-events-none cursor-not-allowed opacity-50":""].join(" "),children:jsxs("div",{className:["flex items-center justify-center rounded-full bg-denim-600 bg-opacity-0 transition-colors duration-100",lt.active?"!bg-denim-500 !bg-opacity-100":"",lt.noPadding?"":lt.wide?"p-2 sm:px-4":"p-2",lt.disabled?"":"group-hover:bg-opacity-50 group-active:bg-denim-500 group-active:bg-opacity-100"].join(" "),children:[jsx(Icon,{icon:lt.icon,className:lt.iconSize??"text-2xl"}),jsx("p",{className:"hidden sm:block",children:lt.text?jsx("span",{className:"ml-2",children:lt.text}):null})]})})}));function AirplayAction(lt){const ft=useVideoPlayerDescriptor(),dt=useControls(ft),vt=useMisc(ft),Et=reactExports.useCallback(()=>{dt.startAirplay()},[dt]);return vt.canAirplay?jsx(VideoPlayerIconButton,{className:lt.className,onClick:Et,icon:Icons.AIRPLAY}):null}function ChromecastAction(lt){const[ft,dt]=reactExports.useState(!1),vt=useVideoPlayerDescriptor(),St=useMisc(vt).isCasting,Tt=reactExports.useRef(null),At=reactExports.useCallback(Ct=>{const Rt=(Ct.getAttribute("style")??"").includes("inline");dt(!Rt)},[dt]);return reactExports.useEffect(()=>{var Dt;const Ct=(Dt=Tt.current)==null?void 0:Dt.querySelector("google-cast-launcher");if(!Ct)return;const Rt=new MutationObserver(()=>{At(Ct)});return Rt.observe(Ct,{attributes:!0,attributeFilter:["style"]}),At(Ct),()=>{Rt.disconnect()}},[At]),jsx(VideoPlayerIconButton,{ref:Tt,className:[lt.className??"","google-cast-button",St?"casting":"",ft?"hidden":""].join(" "),icon:Icons.CASTING,onClick:Ct=>{const Rt=Ct.currentTarget.querySelector("google-cast-launcher");Rt&&Rt.click()}})}function useIsMobile(lt){const[ft,dt]=reactExports.useState(!1),vt=reactExports.useRef(!1);return reactExports.useEffect(()=>{function Et(){const St=lt?window.innerHeight<600:window.innerWidth<1024;vt.current!==St&&(vt.current=St,dt(St))}return Et(),window.addEventListener("resize",Et),()=>{window.removeEventListener("resize",Et)}},[lt]),{isMobile:ft}}function VideoPlayerHeader(lt){const{isMobile:ft}=useIsMobile(),{bookmarkStore:dt,setItemBookmark:vt}=useBookmarkContext(),Et=lt.media?getIfBookmarkedFromPortable(dt.bookmarks,lt.media):!1,St=lt.media&&lt.onClick,{t:Tt}=useTranslation(),At=useBannerSize();return jsxs("div",{className:"flex items-center",style:{paddingTop:lt.isFullScreen?`${At}px`:void 0},children:[jsxs("div",{className:"flex min-w-0 flex-1 items-center",children:[jsxs("p",{className:"flex items-center truncate",children:[lt.onClick?jsxs("span",{onClick:lt.onClick,className:"flex cursor-pointer items-center py-1 text-white opacity-50 transition-opacity hover:opacity-100",children:[jsx(Icon,{className:"mr-2",icon:Icons.ARROW_LEFT}),ft?jsx("span",{children:Tt("videoPlayer.backToHomeShort")}):jsx("span",{children:Tt("videoPlayer.backToHome")})]}):null,St?jsx("span",{className:"mx-4 h-6 w-[1.5px] rotate-[30deg] bg-white opacity-50"}):null,lt.media?jsx("span",{className:"truncate text-white",children:lt.media.title}):null]}),lt.media&&jsx(IconPatch,{clickable:!0,transparent:!0,icon:Et?Icons.BOOKMARK:Icons.BOOKMARK_OUTLINE,className:"ml-2 text-white",onClick:()=>lt.media&&vt(lt.media,!Et)})]}),lt.showControls?jsxs(Fragment,{children:[jsx(AirplayAction,{}),jsx(ChromecastAction,{})]}):jsx(BrandPill,{hideTextOnMobile:!0})]})}function NotFoundWrapper(lt){const{t:ft}=useTranslation(),dt=useGoBack();return jsxs("div",{className:"relative flex flex-1 flex-col",children:[jsx(HelmetExport,{children:jsx("title",{children:ft("notFound.genericTitle")})}),lt.video?jsx("div",{className:"absolute inset-x-0 top-0 py-6 px-8",children:jsx(VideoPlayerHeader,{onClick:dt})}):jsx(Navigation,{}),jsx("div",{className:"flex h-full flex-1 flex-col items-center justify-center p-5 text-center",children:lt.children})]})}function NotFoundMedia(){const{t:lt}=useTranslation();return jsxs("div",{className:"flex flex-1 flex-col items-center justify-center p-5 text-center",children:[jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"mb-6 text-xl text-bink-600"}),jsx(Title,{children:lt("notFound.media.title")}),jsx("p",{className:"mt-5 mb-12 max-w-sm",children:lt("notFound.media.description")}),jsx(ArrowLink,{to:"/",linkText:lt("notFound.backArrow")})]})}function NotFoundPage(){const{t:lt}=useTranslation();return jsxs(NotFoundWrapper,{children:[jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"mb-6 text-xl text-bink-600"}),jsx(Title,{children:lt("notFound.page.title")}),jsx("p",{className:"mt-5 mb-12 max-w-sm",children:lt("notFound.page.description")}),jsx(ArrowLink,{to:"/",linkText:lt("notFound.backArrow")})]})}let providers=[],embeds=[];function registerProvider(lt){lt.disabled||providers.push(lt)}function registerEmbedScraper(lt){lt.disabled||embeds.push(lt)}function initializeScraperStore(){providers=providers.sort((Et,St)=>St.rank-Et.rank),embeds=embeds.sort((Et,St)=>St.rank-Et.rank);let lt=null;providers.forEach(Et=>{if(lt===null){lt=Et.rank;return}if(lt===Et.rank)throw new Error(`Duplicate rank number for provider ${Et.id}`);lt=Et.rank}),lt=null,providers.forEach(Et=>{if(lt===null){lt=Et.rank;return}if(lt===Et.rank)throw new Error(`Duplicate rank number for embed scraper ${Et.id}`);lt=Et.rank});const ft=providers.map(Et=>Et.id);if(ft.length>0&&new Set(ft).size!==ft.length)throw new Error("Duplicate IDS in providers");const dt=embeds.map(Et=>Et.id);if(dt.length>0&&new Set(dt).size!==dt.length)throw new Error("Duplicate IDS in embed scrapers");const vt=embeds.map(Et=>Et.for);if(vt.length>0&&new Set(vt).size!==vt.length)throw new Error("Duplicate types in embed scrapers")}function getProviders(){return providers}function getEmbeds(){return embeds}function getEmbedScraperByType(lt){return getEmbeds().find(ft=>ft.for===lt)??null}function sortProviderResult(lt){return lt.embeds=lt.embeds.map(ft=>[ft,ft.type?getEmbedScraperByType(ft.type):null]).sort(([,ft],[,dt])=>((dt==null?void 0:dt.rank)??0)-((ft==null?void 0:ft.rank)??0)).map(ft=>ft[0]),lt}async function runProvider(lt,ft){try{const dt=await lt.scrape(ft);return sortProviderResult(dt)}catch(dt){throw console.error("Failed to run provider",dt,{id:lt.id,ctx:{...ft}}),dt}}async function runEmbedScraper(lt,ft){try{return await lt.getStream(ft)}catch(dt){throw console.error("Failed to run embed scraper",{id:lt.id,ctx:{...ft}}),dt}}async function findBestEmbedStream(lt,ft,dt){var Et,St,Tt;if(lt.stream)return{...lt.stream,providerId:ft,embedId:ft};let vt=0;for(const At of lt.embeds){if(vt+=1,!At.type)continue;const Ct=getEmbedScraperByType(At.type);if(!Ct)throw new Error(`Type for embed not found: ${At.type}`);const Rt=[ft,Ct.id,vt].join("|");(Et=dt.onNext)==null||Et.call(dt,{id:Ct.id,type:"embed",eventId:Rt});let Dt;try{Dt=await runEmbedScraper(Ct,{url:At.url,progress(kt){var Nt;(Nt=dt.onProgress)==null||Nt.call(dt,{errored:!1,eventId:Rt,id:Ct.id,percentage:kt,type:"embed"})}})}catch{(St=dt.onProgress)==null||St.call(dt,{errored:!0,eventId:Rt,id:Ct.id,percentage:100,type:"embed"});continue}return(Tt=dt.onProgress)==null||Tt.call(dt,{errored:!1,eventId:Rt,id:Ct.id,percentage:100,type:"embed"}),Dt.providerId=ft,Dt}return null}async function findBestStream(lt){var dt,vt,Et;const ft=getProviders();for(const St of ft){const Tt=St.id;(dt=lt.onNext)==null||dt.call(lt,{id:St.id,type:"provider",eventId:Tt});let At;try{let Rt;lt.type===MWMediaType.SERIES?Rt={media:lt.media,type:lt.type,episode:lt.episode,season:lt.season,progress(Dt){var kt;(kt=lt.onProgress)==null||kt.call(lt,{percentage:Dt,eventId:Tt,errored:!1,id:St.id,type:"provider"})}}:Rt={media:lt.media,type:lt.type,progress(Dt){var kt;(kt=lt.onProgress)==null||kt.call(lt,{percentage:Dt,eventId:Tt,errored:!1,id:St.id,type:"provider"})}},At=await runProvider(St,Rt)}catch{(vt=lt.onProgress)==null||vt.call(lt,{percentage:100,errored:!0,eventId:Tt,id:St.id,type:"provider"});continue}(Et=lt.onProgress)==null||Et.call(lt,{errored:!1,id:St.id,eventId:Tt,percentage:100,type:"provider"});const Ct=await findBestEmbedStream(At,St.id,lt);if(Ct)return Ct}return null}function useScrape(lt,ft){const[dt,vt]=reactExports.useState([]),[Et,St]=reactExports.useState(null),[Tt,At]=reactExports.useState(!0);return reactExports.useEffect(()=>{At(!0),St(null),vt([]),(async()=>{const Ct=await findBestStream({media:lt,...ft,onNext(Rt){vt(Dt=>[...Dt,{errored:!1,id:Rt.id,eventId:Rt.eventId,type:Rt.type,percentage:0}])},onProgress(Rt){vt(Dt=>{const kt=Dt.reverse().find(Nt=>Nt.id===Rt.id);return kt&&(kt.errored=Rt.errored,kt.percentage=Rt.percentage),[...Dt]})}});At(!1),St(Ct)})()},[lt,ft]),{stream:Et,pending:Tt,eventLog:dt}}function Loading(lt){return jsx("div",{className:lt.className,children:jsxs("div",{className:"flex flex-col items-center justify-center",children:[jsxs("div",{className:"flex h-12 items-center justify-center",children:[jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-denim-300"}),jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-denim-300 [animation-delay:150ms]"}),jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-denim-300 [animation-delay:300ms]"}),jsx("div",{className:"mx-1 h-2 w-2 animate-loading-pin rounded-full bg-denim-300 [animation-delay:450ms]"})]}),lt.text&&lt.text.length?jsx("p",{className:"mt-3 max-w-xs text-sm opacity-75",children:lt.text}):null]})})}function useLoading(lt){const[ft,dt]=reactExports.useState(!1),[vt,Et]=reactExports.useState(!1),[St,Tt]=reactExports.useState(void 0),At=reactExports.useRef(!0),Ct=reactExports.useMemo(()=>lt,[]);return React$1.useEffect(()=>(At.current=!0,()=>{At.current=!1}),[]),[reactExports.useMemo(()=>async(...Dt)=>(dt(!0),Et(!1),Tt(void 0),new Promise(kt=>{Ct(...Dt).then(Nt=>At.current?(Et(!0),kt(Nt),null):kt(void 0)).catch(Nt=>{At&&(Tt(Nt),console.error("USELOADING ERROR",Nt),Et(!1)),kt(void 0)})}).finally(()=>At.current&&dt(!1))),[Ct]),ft,St,vt]}var i$2=Object.defineProperty,d$5=(lt,ft,dt)=>ft in lt?i$2(lt,ft,{enumerable:!0,configurable:!0,writable:!0,value:dt}):lt[ft]=dt,r$1=(lt,ft,dt)=>(d$5(lt,typeof ft!="symbol"?ft+"":ft,dt),dt);let o$2=class{constructor(){r$1(this,"current",this.detect()),r$1(this,"handoffState","pending"),r$1(this,"currentId",0)}set(ft){this.current!==ft&&(this.handoffState="pending",this.currentId=0,this.current=ft)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},s$1=new o$2,l$5=(lt,ft)=>{s$1.isServer?reactExports.useEffect(lt,ft):reactExports.useLayoutEffect(lt,ft)};function s(lt){let ft=reactExports.useRef(lt);return l$5(()=>{ft.current=lt},[lt]),ft}function t(lt){typeof queueMicrotask=="function"?queueMicrotask(lt):Promise.resolve().then(lt).catch(ft=>setTimeout(()=>{throw ft}))}function o$1(){let lt=[],ft={addEventListener(dt,vt,Et,St){return dt.addEventListener(vt,Et,St),ft.add(()=>dt.removeEventListener(vt,Et,St))},requestAnimationFrame(...dt){let vt=requestAnimationFrame(...dt);return ft.add(()=>cancelAnimationFrame(vt))},nextFrame(...dt){return ft.requestAnimationFrame(()=>ft.requestAnimationFrame(...dt))},setTimeout(...dt){let vt=setTimeout(...dt);return ft.add(()=>clearTimeout(vt))},microTask(...dt){let vt={current:!0};return t(()=>{vt.current&&dt[0]()}),ft.add(()=>{vt.current=!1})},style(dt,vt,Et){let St=dt.style.getPropertyValue(vt);return Object.assign(dt.style,{[vt]:Et}),this.add(()=>{Object.assign(dt.style,{[vt]:St})})},group(dt){let vt=o$1();return dt(vt),this.add(()=>vt.dispose())},add(dt){return lt.push(dt),()=>{let vt=lt.indexOf(dt);if(vt>=0)for(let Et of lt.splice(vt,1))Et()}},dispose(){for(let dt of lt.splice(0))dt()}};return ft}function p$2(){let[lt]=reactExports.useState(o$1);return reactExports.useEffect(()=>()=>lt.dispose(),[lt]),lt}let o=function(lt){let ft=s(lt);return React$1.useCallback((...dt)=>ft.current(...dt),[ft])};function l$4(){let[lt,ft]=reactExports.useState(s$1.isHandoffComplete);return lt&&s$1.isHandoffComplete===!1&&ft(!1),reactExports.useEffect(()=>{lt!==!0&&ft(!0)},[lt]),reactExports.useEffect(()=>s$1.handoff(),[]),lt}function u$4(lt,ft,...dt){if(lt in ft){let Et=ft[lt];return typeof Et=="function"?Et(...dt):Et}let vt=new Error(`Tried to handle "${lt}" but there is no handler defined. Only defined handlers are: ${Object.keys(ft).map(Et=>`"${Et}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(vt,u$4),vt}let u$3=Symbol();function y$5(...lt){let ft=reactExports.useRef(lt);reactExports.useEffect(()=>{ft.current=lt},[lt]);let dt=o(vt=>{for(let Et of ft.current)Et!=null&&(typeof Et=="function"?Et(vt):Et.current=vt)});return lt.every(vt=>vt==null||(vt==null?void 0:vt[u$3]))?void 0:dt}function e(...lt){return lt.filter(Boolean).join(" ")}var j$2=(lt=>(lt[lt.None=0]="None",lt[lt.RenderStrategy=1]="RenderStrategy",lt[lt.Static=2]="Static",lt))(j$2||{}),w$1=(lt=>(lt[lt.Unmount=0]="Unmount",lt[lt.Hidden=1]="Hidden",lt))(w$1||{});function D$3({ourProps:lt,theirProps:ft,slot:dt,defaultTag:vt,features:Et,visible:St=!0,name:Tt}){let At=h$4(ft,lt);if(St)return m$2(At,dt,vt,Tt);let Ct=Et??0;if(Ct&2){let{static:Rt=!1,...Dt}=At;if(Rt)return m$2(Dt,dt,vt,Tt)}if(Ct&1){let{unmount:Rt=!0,...Dt}=At;return u$4(Rt?0:1,{[0](){return null},[1](){return m$2({...Dt,hidden:!0,style:{display:"none"}},dt,vt,Tt)}})}return m$2(At,dt,vt,Tt)}function m$2(lt,ft={},dt,vt){var Et;let{as:St=dt,children:Tt,refName:At="ref",...Ct}=g$2(lt,["unmount","static"]),Rt=lt.ref!==void 0?{[At]:lt.ref}:{},Dt=typeof Tt=="function"?Tt(ft):Tt;"className"in Ct&&Ct.className&&typeof Ct.className=="function"&&(Ct.className=Ct.className(ft));let kt={};if(ft){let Nt=!1,zt=[];for(let[Wt,nr]of Object.entries(ft))typeof nr=="boolean"&&(Nt=!0),nr===!0&&zt.push(Wt);Nt&&(kt["data-headlessui-state"]=zt.join(" "))}if(St===reactExports.Fragment&&Object.keys(P$1(Ct)).length>0){if(!reactExports.isValidElement(Dt)||Array.isArray(Dt)&&Dt.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${vt} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Ct).map(Wt=>`  - ${Wt}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(Wt=>`  - ${Wt}`).join(`
`)].join(`
`));let Nt=e((Et=Dt.props)==null?void 0:Et.className,Ct.className),zt=Nt?{className:Nt}:{};return reactExports.cloneElement(Dt,Object.assign({},h$4(Dt.props,P$1(g$2(Ct,["ref"]))),kt,Rt,O$1(Dt.ref,Rt.ref),zt))}return reactExports.createElement(St,Object.assign({},g$2(Ct,["ref"]),St!==reactExports.Fragment&&Rt,St!==reactExports.Fragment&&kt),Dt)}function O$1(...lt){return{ref:lt.every(ft=>ft==null)?void 0:ft=>{for(let dt of lt)dt!=null&&(typeof dt=="function"?dt(ft):dt.current=ft)}}}function h$4(...lt){if(lt.length===0)return{};if(lt.length===1)return lt[0];let ft={},dt={};for(let vt of lt)for(let Et in vt)Et.startsWith("on")&&typeof vt[Et]=="function"?(dt[Et]!=null||(dt[Et]=[]),dt[Et].push(vt[Et])):ft[Et]=vt[Et];if(ft.disabled||ft["aria-disabled"])return Object.assign(ft,Object.fromEntries(Object.keys(dt).map(vt=>[vt,void 0])));for(let vt in dt)Object.assign(ft,{[vt](Et,...St){let Tt=dt[vt];for(let At of Tt){if((Et instanceof Event||(Et==null?void 0:Et.nativeEvent)instanceof Event)&&Et.defaultPrevented)return;At(Et,...St)}}});return ft}function L$2(lt){var ft;return Object.assign(reactExports.forwardRef(lt),{displayName:(ft=lt.displayName)!=null?ft:lt.name})}function P$1(lt){let ft=Object.assign({},lt);for(let dt in ft)ft[dt]===void 0&&delete ft[dt];return ft}function g$2(lt,ft=[]){let dt=Object.assign({},lt);for(let vt of ft)vt in dt&&delete dt[vt];return dt}let n$1=reactExports.createContext(null);n$1.displayName="OpenClosedContext";var d$4=(lt=>(lt[lt.Open=1]="Open",lt[lt.Closed=2]="Closed",lt[lt.Closing=4]="Closing",lt[lt.Opening=8]="Opening",lt))(d$4||{});function C$2(){return reactExports.useContext(n$1)}function c$4({value:lt,children:ft}){return React$1.createElement(n$1.Provider,{value:lt},ft)}function f$2(){let lt=reactExports.useRef(!1);return l$5(()=>(lt.current=!0,()=>{lt.current=!1}),[]),lt}function b$3(lt=0){let[ft,dt]=reactExports.useState(lt),vt=reactExports.useCallback(At=>dt(Ct=>Ct|At),[ft]),Et=reactExports.useCallback(At=>!!(ft&At),[ft]),St=reactExports.useCallback(At=>dt(Ct=>Ct&~At),[dt]),Tt=reactExports.useCallback(At=>dt(Ct=>Ct^At),[dt]);return{flags:ft,addFlag:vt,hasFlag:Et,removeFlag:St,toggleFlag:Tt}}function l$3(lt){let ft={called:!1};return(...dt)=>{if(!ft.called)return ft.called=!0,lt(...dt)}}function d$3(lt,...ft){lt&&ft.length>0&&lt.classList.add(...ft)}function v$3(lt,...ft){lt&&ft.length>0&&lt.classList.remove(...ft)}function F$2(lt,ft){let dt=o$1();if(!lt)return dt.dispose;let{transitionDuration:vt,transitionDelay:Et}=getComputedStyle(lt),[St,Tt]=[vt,Et].map(Ct=>{let[Rt=0]=Ct.split(",").filter(Boolean).map(Dt=>Dt.includes("ms")?parseFloat(Dt):parseFloat(Dt)*1e3).sort((Dt,kt)=>kt-Dt);return Rt}),At=St+Tt;if(At!==0){dt.group(Rt=>{Rt.setTimeout(()=>{ft(),Rt.dispose()},At),Rt.addEventListener(lt,"transitionrun",Dt=>{Dt.target===Dt.currentTarget&&Rt.dispose()})});let Ct=dt.addEventListener(lt,"transitionend",Rt=>{Rt.target===Rt.currentTarget&&(ft(),Ct())})}else ft();return dt.add(()=>ft()),dt.dispose}function y$4(lt,ft,dt,vt){let Et=dt?"enter":"leave",St=o$1(),Tt=vt!==void 0?l$3(vt):()=>{};Et==="enter"&&(lt.removeAttribute("hidden"),lt.style.display="");let At=u$4(Et,{enter:()=>ft.enter,leave:()=>ft.leave}),Ct=u$4(Et,{enter:()=>ft.enterTo,leave:()=>ft.leaveTo}),Rt=u$4(Et,{enter:()=>ft.enterFrom,leave:()=>ft.leaveFrom});return v$3(lt,...ft.enter,...ft.enterTo,...ft.enterFrom,...ft.leave,...ft.leaveFrom,...ft.leaveTo,...ft.entered),d$3(lt,...At,...Rt),St.nextFrame(()=>{v$3(lt,...Rt),d$3(lt,...Ct),F$2(lt,()=>(v$3(lt,...At),d$3(lt,...ft.entered),Tt()))}),St.dispose}function D$2({container:lt,direction:ft,classes:dt,onStart:vt,onStop:Et}){let St=f$2(),Tt=p$2(),At=s(ft);l$5(()=>{let Ct=o$1();Tt.add(Ct.dispose);let Rt=lt.current;if(Rt&&At.current!=="idle"&&St.current)return Ct.dispose(),vt.current(At.current),Ct.add(y$4(Rt,dt.current,At.current==="enter",()=>{Ct.dispose(),Et.current(At.current)})),Ct.dispose},[ft])}function S$1(lt=""){return lt.split(" ").filter(ft=>ft.trim().length>1)}let A$1=reactExports.createContext(null);A$1.displayName="TransitionContext";var Ee$2=(lt=>(lt.Visible="visible",lt.Hidden="hidden",lt))(Ee$2||{});function be$2(){let lt=reactExports.useContext(A$1);if(lt===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return lt}function Se(){let lt=reactExports.useContext(I$3);if(lt===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return lt}let I$3=reactExports.createContext(null);I$3.displayName="NestingContext";function _$2(lt){return"children"in lt?_$2(lt.children):lt.current.filter(({el:ft})=>ft.current!==null).filter(({state:ft})=>ft==="visible").length>0}function ne$3(lt,ft){let dt=s(lt),vt=reactExports.useRef([]),Et=f$2(),St=p$2(),Tt=o((zt,Wt=w$1.Hidden)=>{let nr=vt.current.findIndex(({el:Ut})=>Ut===zt);nr!==-1&&(u$4(Wt,{[w$1.Unmount](){vt.current.splice(nr,1)},[w$1.Hidden](){vt.current[nr].state="hidden"}}),St.microTask(()=>{var Ut;!_$2(vt)&&Et.current&&((Ut=dt.current)==null||Ut.call(dt))}))}),At=o(zt=>{let Wt=vt.current.find(({el:nr})=>nr===zt);return Wt?Wt.state!=="visible"&&(Wt.state="visible"):vt.current.push({el:zt,state:"visible"}),()=>Tt(zt,w$1.Unmount)}),Ct=reactExports.useRef([]),Rt=reactExports.useRef(Promise.resolve()),Dt=reactExports.useRef({enter:[],leave:[],idle:[]}),kt=o((zt,Wt,nr)=>{Ct.current.splice(0),ft&&(ft.chains.current[Wt]=ft.chains.current[Wt].filter(([Ut])=>Ut!==zt)),ft==null||ft.chains.current[Wt].push([zt,new Promise(Ut=>{Ct.current.push(Ut)})]),ft==null||ft.chains.current[Wt].push([zt,new Promise(Ut=>{Promise.all(Dt.current[Wt].map(([Ht,Bt])=>Bt)).then(()=>Ut())})]),Wt==="enter"?Rt.current=Rt.current.then(()=>ft==null?void 0:ft.wait.current).then(()=>nr(Wt)):nr(Wt)}),Nt=o((zt,Wt,nr)=>{Promise.all(Dt.current[Wt].splice(0).map(([Ut,Ht])=>Ht)).then(()=>{var Ut;(Ut=Ct.current.shift())==null||Ut()}).then(()=>nr(Wt))});return reactExports.useMemo(()=>({children:vt,register:At,unregister:Tt,onStart:kt,onStop:Nt,wait:Rt,chains:Dt}),[At,Tt,vt,kt,Nt,Dt,Rt])}function xe$2(){}let Pe$2=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function re$1(lt){var ft;let dt={};for(let vt of Pe$2)dt[vt]=(ft=lt[vt])!=null?ft:xe$2;return dt}function Re$1(lt){let ft=reactExports.useRef(re$1(lt));return reactExports.useEffect(()=>{ft.current=re$1(lt)},[lt]),ft}let ye$2="div",ie$1=j$2.RenderStrategy;function Ne$2(lt,ft){let{beforeEnter:dt,afterEnter:vt,beforeLeave:Et,afterLeave:St,enter:Tt,enterFrom:At,enterTo:Ct,entered:Rt,leave:Dt,leaveFrom:kt,leaveTo:Nt,...zt}=lt,Wt=reactExports.useRef(null),nr=y$5(Wt,ft),Ut=zt.unmount?w$1.Unmount:w$1.Hidden,{show:Ht,appear:Bt,initial:Ft}=be$2(),[tr,cr]=reactExports.useState(Ht?"visible":"hidden"),Kt=Se(),{register:Zt,unregister:rr}=Kt,ar=reactExports.useRef(null);reactExports.useEffect(()=>Zt(Wt),[Zt,Wt]),reactExports.useEffect(()=>{if(Ut===w$1.Hidden&&Wt.current){if(Ht&&tr!=="visible"){cr("visible");return}return u$4(tr,{hidden:()=>rr(Wt),visible:()=>Zt(Wt)})}},[tr,Wt,Zt,rr,Ht,Ut]);let sr=s({enter:S$1(Tt),enterFrom:S$1(At),enterTo:S$1(Ct),entered:S$1(Rt),leave:S$1(Dt),leaveFrom:S$1(kt),leaveTo:S$1(Nt)}),dr=Re$1({beforeEnter:dt,afterEnter:vt,beforeLeave:Et,afterLeave:St}),fr=l$4();reactExports.useEffect(()=>{if(fr&&tr==="visible"&&Wt.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[Wt,tr,fr]);let pr=Ft&&!Bt,xr=(()=>!fr||pr||ar.current===Ht?"idle":Ht?"enter":"leave")(),lr=b$3(0),hr=o(yr=>u$4(yr,{enter:()=>{lr.addFlag(d$4.Opening),dr.current.beforeEnter()},leave:()=>{lr.addFlag(d$4.Closing),dr.current.beforeLeave()},idle:()=>{}})),ur=o(yr=>u$4(yr,{enter:()=>{lr.removeFlag(d$4.Opening),dr.current.afterEnter()},leave:()=>{lr.removeFlag(d$4.Closing),dr.current.afterLeave()},idle:()=>{}})),mr=ne$3(()=>{cr("hidden"),rr(Wt)},Kt);D$2({container:Wt,classes:sr,direction:xr,onStart:s(yr=>{mr.onStart(Wt,yr,hr)}),onStop:s(yr=>{mr.onStop(Wt,yr,ur),yr==="leave"&&!_$2(mr)&&(cr("hidden"),rr(Wt))})}),reactExports.useEffect(()=>{pr&&(Ut===w$1.Hidden?ar.current=null:ar.current=Ht)},[Ht,pr,tr]);let ir=zt,_r={ref:nr};return Bt&&Ht&&s$1.isServer&&(ir={...ir,className:e(zt.className,...sr.current.enter,...sr.current.enterFrom)}),React$1.createElement(I$3.Provider,{value:mr},React$1.createElement(c$4,{value:u$4(tr,{visible:d$4.Open,hidden:d$4.Closed})|lr.flags},D$3({ourProps:_r,theirProps:ir,defaultTag:ye$2,features:ie$1,visible:tr==="visible",name:"Transition.Child"})))}function He$2(lt,ft){let{show:dt,appear:vt=!1,unmount:Et,...St}=lt,Tt=reactExports.useRef(null),At=y$5(Tt,ft);l$4();let Ct=C$2();if(dt===void 0&&Ct!==null&&(dt=(Ct&d$4.Open)===d$4.Open),![!0,!1].includes(dt))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[Rt,Dt]=reactExports.useState(dt?"visible":"hidden"),kt=ne$3(()=>{Dt("hidden")}),[Nt,zt]=reactExports.useState(!0),Wt=reactExports.useRef([dt]);l$5(()=>{Nt!==!1&&Wt.current[Wt.current.length-1]!==dt&&(Wt.current.push(dt),zt(!1))},[Wt,dt]);let nr=reactExports.useMemo(()=>({show:dt,appear:vt,initial:Nt}),[dt,vt,Nt]);reactExports.useEffect(()=>{if(dt)Dt("visible");else if(!_$2(kt))Dt("hidden");else{let Ht=Tt.current;if(!Ht)return;let Bt=Ht.getBoundingClientRect();Bt.x===0&&Bt.y===0&&Bt.width===0&&Bt.height===0&&Dt("hidden")}},[dt,kt]);let Ut={unmount:Et};return React$1.createElement(I$3.Provider,{value:kt},React$1.createElement(A$1.Provider,{value:nr},D$3({ourProps:{...Ut,as:reactExports.Fragment,children:React$1.createElement(oe$2,{ref:At,...Ut,...St})},theirProps:{},defaultTag:reactExports.Fragment,features:ie$1,visible:Rt==="visible",name:"Transition"})))}function De$2(lt,ft){let dt=reactExports.useContext(A$1)!==null,vt=C$2()!==null;return React$1.createElement(React$1.Fragment,null,!dt&&vt?React$1.createElement(q$2,{ref:ft,...lt}):React$1.createElement(oe$2,{ref:ft,...lt}))}let q$2=L$2(He$2),oe$2=L$2(Ne$2),Fe=L$2(De$2),tt$1=Object.assign(q$2,{Child:Fe,Root:q$2});function getClasses(lt,ft){return lt==="slide-down"?{leave:`transition-[transform,opacity] ${ft}`,leaveFrom:"opacity-100 translate-y-0",leaveTo:"-translate-y-4 opacity-0",enter:`transition-[transform,opacity] ${ft}`,enterFrom:"opacity-0 -translate-y-4",enterTo:"translate-y-0 opacity-100"}:lt==="slide-up"?{leave:`transition-[transform,opacity] ${ft}`,leaveFrom:"opacity-100 translate-y-0",leaveTo:"translate-y-4 opacity-0",enter:`transition-[transform,opacity] ${ft}`,enterFrom:"opacity-0 translate-y-4",enterTo:"translate-y-0 opacity-100"}:lt==="slide-full-left"?{leave:`transition-[transform] ${ft}`,leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",enter:`transition-[transform] ${ft}`,enterFrom:"-translate-x-full",enterTo:"translate-x-0"}:lt==="slide-full-right"?{leave:`transition-[transform] ${ft}`,leaveFrom:"translate-x-0",leaveTo:"translate-x-full",enter:`transition-[transform] ${ft}`,enterFrom:"translate-x-full",enterTo:"translate-x-0"}:lt==="fade"?{leave:`transition-[transform,opacity] ${ft}`,leaveFrom:"opacity-100",leaveTo:"opacity-0",enter:`transition-[transform,opacity] ${ft}`,enterFrom:"opacity-0",enterTo:"opacity-100"}:{}}function Transition(lt){const ft=lt.durationClass??"duration-200",dt=getClasses(lt.animation,ft);return lt.isChild?jsx(tt$1.Child,{as:reactExports.Fragment,...dt,children:jsx("div",{className:lt.className,children:lt.children})}):jsx(tt$1,{show:lt.show,as:reactExports.Fragment,...dt,children:jsx("div",{className:lt.className,children:lt.children})})}function getMediaPlayingFromState(lt){return{hasPlayedOnce:lt.mediaPlaying.hasPlayedOnce,isLoading:lt.mediaPlaying.isLoading,isPaused:lt.mediaPlaying.isPaused,isPlaying:lt.mediaPlaying.isPlaying,isSeeking:lt.mediaPlaying.isSeeking,isDragSeeking:lt.mediaPlaying.isDragSeeking,isFirstLoading:lt.mediaPlaying.isFirstLoading,volume:lt.mediaPlaying.volume,playbackSpeed:lt.mediaPlaying.playbackSpeed}}function updateMediaPlaying(lt,ft){sendEvent(lt,"mediaplaying",getMediaPlayingFromState(ft))}function useMediaPlaying(lt){const ft=getPlayerState(lt),[dt,vt]=reactExports.useState(getMediaPlayingFromState(ft));return reactExports.useEffect(()=>{function Et(St){vt(St.detail)}return listenEvent(lt,"mediaplaying",Et),()=>{unlistenEvent(lt,"mediaplaying",Et)}},[lt]),dt}function BackdropAction(lt){const ft=useVideoPlayerDescriptor(),dt=useControls(ft),vt=useMediaPlaying(ft),Et=useInterface(ft),[St,Tt]=reactExports.useState(!1),At=reactExports.useRef(null),Ct=reactExports.useRef(null),Rt=reactExports.useRef(0),Dt=reactExports.useCallback(()=>{if(!St){setTimeout(()=>{Date.now()-Rt.current<200||Tt(!0)},20);return}At.current&&clearTimeout(At.current),At.current=setTimeout(()=>{St&&Tt(!1),At.current=null},3e3)},[Tt,St]),kt=reactExports.useCallback(()=>{Tt(!1)},[Tt]),Nt=reactExports.useCallback(Ut=>{if(!(!Ct.current||Ct.current!==Ut.target)&&Et.popout===null){if(Ut.type==="touchend"){Rt.current=Date.now();return}Ut.button===0&&setTimeout(()=>{if(Date.now()-Rt.current<200){Tt(Ht=>!Ht);return}vt.isPlaying?dt.pause():dt.play()},20)}},[dt,vt,Et]),zt=reactExports.useCallback(Ut=>{!Ct.current||Ct.current!==Ut.target||(Et.isFullscreen?dt.exitFullscreen():dt.enterFullscreen())},[dt,Et]),Wt=reactExports.useRef(null);reactExports.useEffect(()=>{var Ht;const Ut=St||vt.isPaused||!!Et.popout;Ut!==Wt.current&&(Wt.current=Ut,(Ht=lt.onBackdropChange)==null||Ht.call(lt,Ut))},[St,vt,lt,Et]);const nr=St||vt.isPaused||!!Et.popout;return jsxs("div",{className:`absolute inset-0 ${nr?"":"cursor-none"}`,onMouseMove:Dt,onMouseLeave:kt,ref:Ct,onMouseUp:Nt,onTouchEnd:Nt,onDoubleClick:zt,children:[jsx("div",{className:`pointer-events-none absolute inset-0 bg-black bg-opacity-20 transition-opacity duration-200 ${nr?"":"!opacity-0"}`}),jsx("div",{className:`pointer-events-none absolute inset-x-0 bottom-0 h-[20%] bg-gradient-to-t from-black to-transparent transition-opacity duration-200 ${nr?"":"!opacity-0"}`}),jsx("div",{className:`pointer-events-none absolute inset-x-0 top-0 h-[20%] bg-gradient-to-b from-black to-transparent transition-opacity duration-200 ${nr?"":"!opacity-0"}`}),jsx("div",{className:"pointer-events-none absolute inset-0",children:lt.children})]})}var key$2={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},webkit=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],moz=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],ms=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],document$1=typeof window<"u"&&typeof window.document<"u"?window.document:{},vendor="fullscreenEnabled"in document$1&&Object.keys(key$2)||webkit[0]in document$1&&webkit||moz[0]in document$1&&moz||ms[0]in document$1&&ms||[],fscreen={requestFullscreen:function(lt){return lt[vendor[key$2.requestFullscreen]]()},requestFullscreenFunction:function(lt){return lt[vendor[key$2.requestFullscreen]]},get exitFullscreen(){return document$1[vendor[key$2.exitFullscreen]].bind(document$1)},get fullscreenPseudoClass(){return":"+vendor[key$2.fullscreen]},addEventListener:function(lt,ft,dt){return document$1.addEventListener(vendor[key$2[lt]],ft,dt)},removeEventListener:function(lt,ft,dt){return document$1.removeEventListener(vendor[key$2[lt]],ft,dt)},get fullscreenEnabled(){return!!document$1[vendor[key$2.fullscreenEnabled]]},set fullscreenEnabled(lt){},get fullscreenElement(){return document$1[vendor[key$2.fullscreenElement]]},set fullscreenElement(lt){},get onfullscreenchange(){return document$1[("on"+vendor[key$2.fullscreenchange]).toLowerCase()]},set onfullscreenchange(lt){return document$1[("on"+vendor[key$2.fullscreenchange]).toLowerCase()]=lt},get onfullscreenerror(){return document$1[("on"+vendor[key$2.fullscreenerror]).toLowerCase()]},set onfullscreenerror(lt){return document$1[("on"+vendor[key$2.fullscreenerror]).toLowerCase()]=lt}};const fscreen$1=fscreen,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);let cachedVolumeResult=null;async function canChangeVolume(){if(cachedVolumeResult===null){const lt=new Promise(dt=>{setTimeout(()=>dt(!1),1e3)}),ft=new Promise(dt=>{const vt=document.createElement("video"),Et=()=>{vt.removeEventListener("volumechange",Et),dt(!0)};vt.addEventListener("volumechange",Et),vt.volume=.5});cachedVolumeResult=await Promise.race([ft,lt])}return cachedVolumeResult}function canFullscreenAnyElement(){return fscreen$1.fullscreenEnabled}function canWebkitFullscreen(){return canFullscreenAnyElement()||isSafari}function canFullscreen(){return canFullscreenAnyElement()||canWebkitFullscreen()}function canPictureInPicture(){return"pictureInPictureEnabled"in document}function canWebkitPictureInPicture(){return"webkitSupportsPresentationMode"in document.createElement("video")}function FullscreenAction(lt){const ft=useVideoPlayerDescriptor(),dt=useInterface(ft),vt=useControls(ft),Et=reactExports.useCallback(()=>{dt.isFullscreen?vt.exitFullscreen():vt.enterFullscreen()},[vt,dt]);return canFullscreen()?jsx(VideoPlayerIconButton,{className:lt.className,onClick:Et,icon:dt.isFullscreen?Icons.COMPRESS:Icons.EXPAND}):null}function HeaderAction(lt){const ft=useVideoPlayerDescriptor(),dt=useMeta(ft);return jsx(VideoPlayerHeader,{media:dt==null?void 0:dt.meta.meta,...lt})}const Spinner$1="";function Spinner(lt){return jsx("div",{className:["spinner",lt.className??""].join(" ")})}function LoadingAction(){const lt=useVideoPlayerDescriptor(),ft=useMediaPlaying(lt),dt=useMisc(lt),vt=ft.isFirstLoading||ft.isLoading,Et=!dt.isCasting;return!vt||!Et?null:jsx(Spinner,{})}function MiddlePauseAction(){const lt=useVideoPlayerDescriptor(),ft=useControls(lt),dt=useMediaPlaying(lt),vt=reactExports.useCallback(()=>{dt!=null&&dt.isPlaying?ft.pause():ft.play()},[ft,dt]);return dt.hasPlayedOnce||dt.isPlaying||dt.isFirstLoading?null:jsx("div",{onClick:vt,className:"group pointer-events-auto flex h-16 w-16 items-center justify-center rounded-full bg-denim-400 text-white transition-[background-color,transform] hover:scale-125 hover:bg-denim-500 active:scale-100",children:jsx(Icon,{icon:Icons.PLAY,className:"text-2xl transition-transform group-hover:scale-125"})})}function PauseAction(lt){const ft=useVideoPlayerDescriptor(),dt=useMediaPlaying(ft),vt=useControls(ft),Et=reactExports.useCallback(()=>{dt.isPlaying?vt.pause():vt.play()},[dt,vt]),St=dt.isPlaying||dt.isSeeking?Icons.PAUSE:Icons.PLAY;return jsx(VideoPlayerIconButton,{iconSize:lt.iconSize,className:lt.className,icon:St,onClick:Et})}function SkipTimeBackwardAction(){const lt=useVideoPlayerDescriptor(),ft=useControls(lt),dt=useProgress(lt),vt=()=>{ft.setTime(dt.time-10)};return jsx(VideoPlayerIconButton,{icon:Icons.SKIP_BACKWARD,onClick:vt})}function SkipTimeForwardAction(){const lt=useVideoPlayerDescriptor(),ft=useControls(lt),dt=useProgress(lt),vt=()=>{ft.setTime(dt.time+10)};return jsx(VideoPlayerIconButton,{icon:Icons.SKIP_FORWARD,onClick:vt})}function SkipTimeAction(lt){return jsx("div",{className:lt.className,children:jsxs("div",{className:"flex select-none items-center text-white",children:[jsx(SkipTimeBackwardAction,{}),jsx(SkipTimeForwardAction,{})]})})}function MobileCenterAction(){const lt=useVideoPlayerDescriptor(),ft=useMediaPlaying(lt),dt=ft.isFirstLoading||ft.isLoading;return jsxs("div",{className:"flex items-center space-x-8",children:[jsx(SkipTimeBackwardAction,{}),jsx(PauseAction,{iconSize:"text-5xl",className:dt?"pointer-events-none opacity-0":""}),jsx(SkipTimeForwardAction,{})]})}function useCurrentSeriesEpisodeInfo(lt){const ft=useMeta(lt),{t:dt}=useTranslation(),vt=reactExports.useMemo(()=>{var At;return(At=ft==null?void 0:ft.seasons)==null?void 0:At.find(Ct=>{var Rt;return Ct.id===((Rt=ft==null?void 0:ft.episode)==null?void 0:Rt.seasonId)})},[ft]),Et=reactExports.useMemo(()=>{var At;return(At=vt==null?void 0:vt.episodes)==null?void 0:At.find(Ct=>{var Rt;return Ct.id===((Rt=ft==null?void 0:ft.episode)==null?void 0:Rt.episodeId)})},[vt,ft]);return!((ft==null?void 0:ft.meta.meta.type)===MWMediaType.SERIES&&(ft!=null&&ft.episode))?{isSeries:!1}:{isSeries:!0,humanizedEpisodeId:dt("videoPlayer.seasonAndEpisode",{season:vt==null?void 0:vt.number,episode:Et==null?void 0:Et.number}),currentSeasonInfo:vt,currentEpisodeInfo:Et,meta:ft==null?void 0:ft.meta}}function PageTitleAction(){const lt=useVideoPlayerDescriptor(),{isSeries:ft,humanizedEpisodeId:dt,meta:vt}=useCurrentSeriesEpisodeInfo(lt);if(!vt)return null;const Et=ft?`${vt.meta.title} - ${dt}`:vt.meta.title;return jsx(HelmetExport,{children:jsx("title",{children:Et})})}function makePercentageString(lt){return`${lt.toFixed(2)}%`}function makePercentage(lt){return Number(Math.max(0,Math.min(lt,100)).toFixed(2))}function isClickEvent(lt){return lt.type==="mousedown"||lt.type==="mouseup"||lt.type==="mousemove"}const getEventX=lt=>isClickEvent(lt)?lt.pageX:lt.changedTouches[0].pageX;function useProgressBar(lt,ft,dt=!1){const[vt,Et]=reactExports.useState(!1),[St,Tt]=reactExports.useState(0);reactExports.useEffect(()=>{function Ct(Dt){if(!vt||!lt.current)return;const kt=lt.current.getBoundingClientRect(),Nt=(getEventX(Dt)-kt.left)/lt.current.offsetWidth;Tt(Nt*100),dt&&ft(Nt)}function Rt(Dt){if(!vt||(Et(!1),document.body.removeAttribute("data-no-select"),!lt.current))return;const kt=lt.current.getBoundingClientRect(),Nt=(getEventX(Dt)-kt.left)/lt.current.offsetWidth;ft(Nt)}return document.addEventListener("mousemove",Ct),document.addEventListener("touchmove",Ct),document.addEventListener("mouseup",Rt),document.addEventListener("touchend",Rt),()=>{document.removeEventListener("mousemove",Ct),document.removeEventListener("touchmove",Ct),document.removeEventListener("mouseup",Rt),document.removeEventListener("touchend",Rt)}},[vt,lt,ft,dt]);const At=reactExports.useCallback(Ct=>{if(Et(!0),document.body.setAttribute("data-no-select","true"),!lt.current)return;const Rt=lt.current.getBoundingClientRect(),Dt=(getEventX(Ct)-Rt.left)/lt.current.offsetWidth*100;Tt(Dt)},[Tt,lt]);return{dragging:vt,dragPercentage:St,dragMouseDown:At}}function ProgressAction(){const lt=useVideoPlayerDescriptor(),ft=useControls(lt),dt=useProgress(lt),vt=reactExports.useRef(null),Et=reactExports.useRef(!1),St=reactExports.useRef(ft);reactExports.useEffect(()=>{St.current=ft},[ft]);const Tt=reactExports.useCallback(Nt=>{ft.setTime(Nt*dt.duration)},[ft,dt]),{dragging:At,dragPercentage:Ct,dragMouseDown:Rt}=useProgressBar(vt,Tt);reactExports.useEffect(()=>{Et.current!==At&&(Et.current=At,ft.setSeeking(At))},[Et,At,ft]),reactExports.useEffect(()=>{if(At){const Nt=getPlayerState(lt);St.current.setDraggingTime(Nt.progress.duration*(Ct/100))}},[lt,At,Ct]);let Dt=makePercentageString(makePercentage(dt.time/dt.duration*100));At&&(Dt=makePercentageString(makePercentage(Ct)));const kt=makePercentageString(makePercentage(dt.buffered/dt.duration*100));return jsx("div",{className:"group pointer-events-auto w-full cursor-pointer rounded-full px-2",children:jsx("div",{ref:vt,className:"-my-3 flex h-8 items-center",onMouseDown:Rt,onTouchStart:Rt,children:jsxs("div",{className:`relative h-1 flex-1 rounded-full bg-gray-500 bg-opacity-50 transition-[height] duration-100 group-hover:h-2 ${At?"!h-2":""}`,children:[jsx("div",{className:"absolute inset-y-0 left-0 flex items-center justify-end rounded-full bg-gray-300 bg-opacity-20",style:{width:kt}}),jsx("div",{className:"absolute inset-y-0 left-0 flex items-center justify-end rounded-full bg-bink-600",style:{width:Dt},children:jsx("div",{className:`absolute h-1 w-1 translate-x-1/2 rounded-full bg-white opacity-0 transition-[transform,opacity] group-hover:scale-[400%] group-hover:opacity-100 ${At?"!scale-[400%] !opacity-100":""}`})})]})})})}function createFloatingAnchorEvent(lt){return`__floating::anchor::${lt}`}function FloatingAnchor(lt){const ft=reactExports.useRef(null),dt=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!ft.current)return;let vt=!1;function Et(){if(!vt){if(ft.current){const St=dt.current,Tt=ft.current.getBoundingClientRect(),At=JSON.stringify(Tt);if(St!==At){dt.current=At;const Ct=createFloatingAnchorEvent(lt.id);window[Ct]=Tt;const Rt=new CustomEvent(createFloatingAnchorEvent(lt.id),{detail:Tt});document.dispatchEvent(Rt)}}window.requestAnimationFrame(Et)}}return window.requestAnimationFrame(Et),()=>{vt=!0}},[lt]),jsx("div",{ref:ft,children:lt.children})}function SeriesSelectionAction(lt){const{t:ft}=useTranslation(),dt=useVideoPlayerDescriptor(),vt=useMeta(dt),Et=useInterface(dt),St=useControls(dt);return(vt==null?void 0:vt.meta.meta.type)!==MWMediaType.SERIES?null:jsx("div",{className:lt.className,children:jsx("div",{className:"relative",children:jsx(FloatingAnchor,{id:"episodes",children:jsx(VideoPlayerIconButton,{active:Et.popout==="episodes",icon:Icons.EPISODES,text:ft("videoPlayer.buttons.episodes"),wide:!0,onClick:()=>St.openPopout("episodes")})})})})}function ShowTitleAction(){const lt=useVideoPlayerDescriptor(),{isSeries:ft,currentEpisodeInfo:dt,humanizedEpisodeId:vt}=useCurrentSeriesEpisodeInfo(lt);return ft?jsxs("p",{className:"ml-8 select-none space-x-2 text-white",children:[jsx("span",{children:vt}),jsx("span",{className:"opacity-50",children:dt==null?void 0:dt.title})]}):null}function useVolumeControl(lt){const[ft,dt]=reactExports.useState(1),vt=useControls(lt),Et=useMediaPlaying(lt);return{storedVolume:ft,setStoredVolume:dt,toggleVolume:()=>{Et.volume>0?(dt(Et.volume),vt.setVolume(0)):vt.setVolume(ft>0?ft:1)}}}function KeyboardShortcutsAction(){const lt=useVideoPlayerDescriptor(),ft=useControls(lt),dt=useInterface(lt),vt=useMediaPlaying(lt),Et=useProgress(lt),{toggleVolume:St}=useVolumeControl(lt),Tt=reactExports.useRef(0);return reactExports.useEffect(()=>{Tt.current=Et.time},[Et]),reactExports.useEffect(()=>{const Ct=getPlayerState(lt).wrapperElement;if(!Ct)return;let Rt=!1;const Dt=kt=>{if(dt.isFocused)switch(kt.key.toLowerCase()){case"f":dt.isFullscreen?ft.exitFullscreen():ft.enterFullscreen();break;case"arrowleft":ft.setTime(Tt.current-5);break;case"arrowright":ft.setTime(Tt.current+5);break;case" ":vt.isPaused?ft.play():ft.pause();break;case"m":St();break;case"arrowdown":ft.setVolume(Math.max(vt.volume-.1,0));break;case"arrowup":ft.setVolume(Math.min(vt.volume+.1,1));break;case"r":if(Rt||kt.ctrlKey||kt.metaKey)return;Rt=!0,Ct.classList.add("roll"),setTimeout(()=>{Rt=!1,Ct.classList.remove("roll")},1e3);break}};return window.addEventListener("keydown",Dt),()=>{window.removeEventListener("keydown",Dt)}},[ft,lt,vt,dt,St]),null}function durationExceedsHour(lt){return lt>60*60}function formatSeconds(lt,ft=!1){if(Number.isNaN(lt))return ft?"0:00:00":"0:00";let dt=lt;const vt=Math.floor(dt%60);dt/=60;const Et=Math.floor(dt%60);dt/=60;const St=Math.floor(dt),Tt=vt.toString().padStart(2,"0"),At=Et.toString().padStart(2,"0");return ft?[St,At,Tt].join(":"):[At,Tt].join(":")}function TimeAction(lt){const ft=useVideoPlayerDescriptor(),dt=useProgress(ft),vt=useMediaPlaying(ft),Et=durationExceedsHour(dt.duration),St=formatSeconds(vt.isDragSeeking?dt.draggingTime:dt.time,Et),Tt=formatSeconds(dt.duration,Et);return jsx("div",{className:lt.className,children:jsxs("p",{className:"select-none text-white",children:[St," ",lt.noDuration?"":`/ ${Tt}`]})})}function VolumeAction(lt){const ft=useVideoPlayerDescriptor(),dt=useControls(ft),vt=useMediaPlaying(ft),Et=useInterface(ft),{setStoredVolume:St,toggleVolume:Tt}=useVolumeControl(ft),At=reactExports.useRef(null),[Ct,Rt]=reactExports.useState(!1),Dt=reactExports.useCallback(Bt=>{dt.setVolume(Bt),St(Bt)},[dt,St]),{dragging:kt,dragPercentage:Nt,dragMouseDown:zt}=useProgressBar(At,Dt,!0);reactExports.useEffect(()=>{Et.leftControlHovering||Rt(!1)},[Et]);const Wt=reactExports.useCallback(()=>{Tt()},[Tt]),nr=reactExports.useCallback(async()=>{await canChangeVolume()&&Rt(!0)},[Rt]);let Ut=makePercentage(vt.volume*100);kt&&(Ut=makePercentage(Nt));const Ht=makePercentageString(Ut);return jsx("div",{className:lt.className,children:jsxs("div",{className:"pointer-events-auto flex cursor-pointer items-center",onMouseEnter:nr,children:[jsx("div",{className:"px-4 text-2xl text-white",onClick:Wt,children:jsx(Icon,{icon:Ut>0?Icons.VOLUME:Icons.VOLUME_X})}),jsx("div",{className:`linear -ml-2 w-0 overflow-hidden transition-[width,opacity] duration-300 ${Ct||kt?"!w-24 opacity-100":"w-4 opacity-0"}`,children:jsx("div",{ref:At,className:"flex h-10 w-20 items-center px-2",onMouseDown:zt,onTouchStart:zt,children:jsx("div",{className:"relative h-1 flex-1 rounded-full bg-gray-500 bg-opacity-50",children:jsx("div",{className:"absolute inset-y-0 left-0 flex items-center justify-end rounded-full bg-bink-500",style:{width:Ht},children:jsx("div",{className:"absolute h-3 w-3 translate-x-1/2 rounded-full bg-white"})})})})})]})})}function getErrorFromState(lt){return{error:lt.error}}function updateError(lt,ft){sendEvent(lt,"error",getErrorFromState(ft))}function useError(lt){const ft=getPlayerState(lt),[dt,vt]=reactExports.useState(getErrorFromState(ft));return reactExports.useEffect(()=>{function Et(St){vt(St.detail)}return listenEvent(lt,"error",Et),()=>{unlistenEvent(lt,"error",Et)}},[lt]),dt}function VideoPlayerError(lt){const ft=useVideoPlayerDescriptor(),dt=useMeta(ft),Et=useError(ft).error;return Et?jsxs("div",{children:[jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-denim-100",children:[jsx(IconPatch,{icon:Icons.WARNING,className:"mb-6 text-red-400"}),jsx(Title,{children:"Failed to load media"}),jsxs("p",{className:"my-6 max-w-lg text-center",children:[Et==null?void 0:Et.name,": ",Et==null?void 0:Et.description]})]}),jsx("div",{className:"pointer-events-auto absolute inset-x-0 top-0 flex flex-col py-6 px-8 pb-2",children:jsx(VideoPlayerHeader,{media:dt==null?void 0:dt.meta.meta,onClick:lt.onGoBack})})]}):lt.children}const CHROMECAST_SENDER_SDK="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",callbacks=[];let _available=null;function init(lt){_available=lt,callbacks.forEach(ft=>ft(lt))}function isChromecastAvailable(lt){if(_available!==null)return lt(_available);callbacks.push(lt)}function initializeChromecast(){if(window.__onGCastApiAvailable=ft=>{init(ft)},!!!document.getElementById("chromecast-script")){const ft=document.createElement("script");ft.setAttribute("src",CHROMECAST_SENDER_SDK),ft.setAttribute("id","chromecast-script"),document.body.appendChild(ft)}}function useChromecastAvailable(){const[lt,ft]=reactExports.useState(null);return reactExports.useEffect(()=>{isChromecastAvailable(dt=>ft(dt))},[]),lt}function getSourceFromState(lt){return{source:lt.source?{...lt.source}:null}}function updateSource(lt,ft){sendEvent(lt,"source",getSourceFromState(ft))}function useSource(lt){const ft=getPlayerState(lt),[dt,vt]=reactExports.useState(getSourceFromState(ft));return reactExports.useEffect(()=>{function Et(St){vt(St.detail)}return listenEvent(lt,"source",Et),()=>{unlistenEvent(lt,"source",Et)}},[lt]),dt}const volumeStore=createVersionedStore().setKey("mw-volume").addVersion({version:0,create(){return{volume:1}}}).build();function getStoredVolume(){return volumeStore.get().volume}function setStoredVolume(lt){volumeStore.save({volume:lt})}function resetStateForSource(lt,ft){const dt=ft;dt.hlsInstance&&(dt.hlsInstance.destroy(),dt.hlsInstance=null),resetForSource(dt),updateMediaPlaying(lt,dt),updateProgress(lt,dt),updateMisc(lt,dt)}/*! @license DOMPurify 3.0.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.1/LICENSE */function _typeof$1(lt){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft},_typeof$1(lt)}function _setPrototypeOf$1(lt,ft){return _setPrototypeOf$1=Object.setPrototypeOf||function(vt,Et){return vt.__proto__=Et,vt},_setPrototypeOf$1(lt,ft)}function _isNativeReflectConstruct$5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _construct(lt,ft,dt){return _isNativeReflectConstruct$5()?_construct=Reflect.construct:_construct=function(Et,St,Tt){var At=[null];At.push.apply(At,St);var Ct=Function.bind.apply(Et,At),Rt=new Ct;return Tt&&_setPrototypeOf$1(Rt,Tt.prototype),Rt},_construct.apply(null,arguments)}function _slicedToArray(lt,ft){return _arrayWithHoles(lt)||_iterableToArrayLimit(lt,ft)||_unsupportedIterableToArray(lt,ft)||_nonIterableRest()}function _toConsumableArray(lt){return _arrayWithoutHoles(lt)||_iterableToArray$1(lt)||_unsupportedIterableToArray(lt)||_nonIterableSpread()}function _arrayWithoutHoles(lt){if(Array.isArray(lt))return _arrayLikeToArray(lt)}function _arrayWithHoles(lt){if(Array.isArray(lt))return lt}function _iterableToArray$1(lt){if(typeof Symbol<"u"&&lt[Symbol.iterator]!=null||lt["@@iterator"]!=null)return Array.from(lt)}function _iterableToArrayLimit(lt,ft){var dt=lt==null?null:typeof Symbol<"u"&&lt[Symbol.iterator]||lt["@@iterator"];if(dt!=null){var vt=[],Et=!0,St=!1,Tt,At;try{for(dt=dt.call(lt);!(Et=(Tt=dt.next()).done)&&(vt.push(Tt.value),!(ft&&vt.length===ft));Et=!0);}catch(Ct){St=!0,At=Ct}finally{try{!Et&&dt.return!=null&&dt.return()}finally{if(St)throw At}}return vt}}function _unsupportedIterableToArray(lt,ft){if(lt){if(typeof lt=="string")return _arrayLikeToArray(lt,ft);var dt=Object.prototype.toString.call(lt).slice(8,-1);if(dt==="Object"&&lt.constructor&&(dt=lt.constructor.name),dt==="Map"||dt==="Set")return Array.from(lt);if(dt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt))return _arrayLikeToArray(lt,ft)}}function _arrayLikeToArray(lt,ft){(ft==null||ft>lt.length)&&(ft=lt.length);for(var dt=0,vt=new Array(ft);dt<ft;dt++)vt[dt]=lt[dt];return vt}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _createForOfIteratorHelper(lt,ft){var dt=typeof Symbol<"u"&&lt[Symbol.iterator]||lt["@@iterator"];if(!dt){if(Array.isArray(lt)||(dt=_unsupportedIterableToArray(lt))||ft&&lt&&typeof lt.length=="number"){dt&&(lt=dt);var vt=0,Et=function(){};return{s:Et,n:function(){return vt>=lt.length?{done:!0}:{done:!1,value:lt[vt++]}},e:function(Ct){throw Ct},f:Et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var St=!0,Tt=!1,At;return{s:function(){dt=dt.call(lt)},n:function(){var Ct=dt.next();return St=Ct.done,Ct},e:function(Ct){Tt=!0,At=Ct},f:function(){try{!St&&dt.return!=null&&dt.return()}finally{if(Tt)throw At}}}}var entries=Object.entries,setPrototypeOf=Object.setPrototypeOf,isFrozen=Object.isFrozen,getPrototypeOf=Object.getPrototypeOf,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,freeze=Object.freeze,seal=Object.seal,create=Object.create,_ref=typeof Reflect<"u"&&Reflect,apply$2=_ref.apply,construct=_ref.construct;apply$2||(apply$2=function(ft,dt,vt){return ft.apply(dt,vt)});freeze||(freeze=function(ft){return ft});seal||(seal=function(ft){return ft});construct||(construct=function(ft,dt){return _construct(ft,_toConsumableArray(dt))});var arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush$3=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(lt){return function(ft){for(var dt=arguments.length,vt=new Array(dt>1?dt-1:0),Et=1;Et<dt;Et++)vt[Et-1]=arguments[Et];return apply$2(lt,ft,vt)}}function unconstruct(lt){return function(){for(var ft=arguments.length,dt=new Array(ft),vt=0;vt<ft;vt++)dt[vt]=arguments[vt];return construct(lt,dt)}}function addToSet(lt,ft,dt){dt=dt||stringToLowerCase,setPrototypeOf&&setPrototypeOf(lt,null);for(var vt=ft.length;vt--;){var Et=ft[vt];if(typeof Et=="string"){var St=dt(Et);St!==Et&&(isFrozen(ft)||(ft[vt]=St),Et=St)}lt[Et]=!0}return lt}function clone$2(lt){var ft=create(null),dt=_createForOfIteratorHelper(entries(lt)),vt;try{for(dt.s();!(vt=dt.n()).done;){var Et=_slicedToArray(vt.value,2),St=Et[0],Tt=Et[1];ft[St]=Tt}}catch(At){dt.e(At)}finally{dt.f()}return ft}function lookupGetter(lt,ft){for(;lt!==null;){var dt=getOwnPropertyDescriptor(lt,ft);if(dt){if(dt.get)return unapply(dt.get);if(typeof dt.value=="function")return unapply(dt.value)}lt=getPrototypeOf(lt)}function vt(Et){return console.warn("fallback value for",Et),null}return vt}var html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),svg=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\${[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),getGlobal=function(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function(ft,dt){if(_typeof$1(ft)!=="object"||typeof ft.createPolicy!="function")return null;var vt=null,Et="data-tt-policy-suffix";dt.currentScript&&dt.currentScript.hasAttribute(Et)&&(vt=dt.currentScript.getAttribute(Et));var St="dompurify"+(vt?"#"+vt:"");try{return ft.createPolicy(St,{createHTML:function(At){return At},createScriptURL:function(At){return At}})}catch{return console.warn("TrustedTypes policy "+St+" could not be created."),null}};function createDOMPurify(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal(),ft=function(Nr){return createDOMPurify(Nr)};if(ft.version="3.0.1",ft.removed=[],!lt||!lt.document||lt.document.nodeType!==9)return ft.isSupported=!1,ft;var dt=lt.document,vt=lt.document,Et=lt.DocumentFragment,St=lt.HTMLTemplateElement,Tt=lt.Node,At=lt.Element,Ct=lt.NodeFilter,Rt=lt.NamedNodeMap,Dt=Rt===void 0?lt.NamedNodeMap||lt.MozNamedAttrMap:Rt,kt=lt.HTMLFormElement,Nt=lt.DOMParser,zt=lt.trustedTypes,Wt=At.prototype,nr=lookupGetter(Wt,"cloneNode"),Ut=lookupGetter(Wt,"nextSibling"),Ht=lookupGetter(Wt,"childNodes"),Bt=lookupGetter(Wt,"parentNode");if(typeof St=="function"){var Ft=vt.createElement("template");Ft.content&&Ft.content.ownerDocument&&(vt=Ft.content.ownerDocument)}var tr=_createTrustedTypesPolicy(zt,dt),cr=tr?tr.createHTML(""):"",Kt=vt,Zt=Kt.implementation,rr=Kt.createNodeIterator,ar=Kt.createDocumentFragment,sr=Kt.getElementsByTagName,dr=dt.importNode,fr={};ft.isSupported=typeof entries=="function"&&typeof Bt=="function"&&Zt&&typeof Zt.createHTMLDocument<"u";var pr=MUSTACHE_EXPR,xr=ERB_EXPR,lr=TMPLIT_EXPR,hr=DATA_ATTR,ur=ARIA_ATTR,mr=IS_SCRIPT_OR_DATA,ir=ATTR_WHITESPACE,_r=IS_ALLOWED_URI,yr=null,gr=addToSet({},[].concat(_toConsumableArray(html$1),_toConsumableArray(svg$1),_toConsumableArray(svgFilters),_toConsumableArray(mathMl$1),_toConsumableArray(text))),Sr=null,Tr=addToSet({},[].concat(_toConsumableArray(html),_toConsumableArray(svg),_toConsumableArray(mathMl),_toConsumableArray(xml))),br=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ar=null,Or=null,Ir=!0,Cr=!0,Rr=!1,Pr=!0,wr=!1,Dr=!1,kr=!1,Fr=!1,Br=!1,Kr=!1,Vr=!1,Gr=!0,jr=!1,zr="user-content-",Xr=!0,Zr=!1,ln={},Qr=null,an=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Jr=null,cn=addToSet({},["audio","video","img","source","image","track"]),un=null,vn=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),hn="http://www.w3.org/1998/Math/MathML",fn="http://www.w3.org/2000/svg",pn="http://www.w3.org/1999/xhtml",Tn=pn,$n=!1,Ln=null,Dn=addToSet({},[hn,fn,pn],stringToString),mn,On=["application/xhtml+xml","text/html"],xn="text/html",tn,En=null,Mn=vt.createElement("form"),gn=function(Nr){return Nr instanceof RegExp||Nr instanceof Function},In=function(Nr){En&&En===Nr||((!Nr||_typeof$1(Nr)!=="object")&&(Nr={}),Nr=clone$2(Nr),mn=On.indexOf(Nr.PARSER_MEDIA_TYPE)===-1?mn=xn:mn=Nr.PARSER_MEDIA_TYPE,tn=mn==="application/xhtml+xml"?stringToString:stringToLowerCase,yr="ALLOWED_TAGS"in Nr?addToSet({},Nr.ALLOWED_TAGS,tn):gr,Sr="ALLOWED_ATTR"in Nr?addToSet({},Nr.ALLOWED_ATTR,tn):Tr,Ln="ALLOWED_NAMESPACES"in Nr?addToSet({},Nr.ALLOWED_NAMESPACES,stringToString):Dn,un="ADD_URI_SAFE_ATTR"in Nr?addToSet(clone$2(vn),Nr.ADD_URI_SAFE_ATTR,tn):vn,Jr="ADD_DATA_URI_TAGS"in Nr?addToSet(clone$2(cn),Nr.ADD_DATA_URI_TAGS,tn):cn,Qr="FORBID_CONTENTS"in Nr?addToSet({},Nr.FORBID_CONTENTS,tn):an,Ar="FORBID_TAGS"in Nr?addToSet({},Nr.FORBID_TAGS,tn):{},Or="FORBID_ATTR"in Nr?addToSet({},Nr.FORBID_ATTR,tn):{},ln="USE_PROFILES"in Nr?Nr.USE_PROFILES:!1,Ir=Nr.ALLOW_ARIA_ATTR!==!1,Cr=Nr.ALLOW_DATA_ATTR!==!1,Rr=Nr.ALLOW_UNKNOWN_PROTOCOLS||!1,Pr=Nr.ALLOW_SELF_CLOSE_IN_ATTR!==!1,wr=Nr.SAFE_FOR_TEMPLATES||!1,Dr=Nr.WHOLE_DOCUMENT||!1,Br=Nr.RETURN_DOM||!1,Kr=Nr.RETURN_DOM_FRAGMENT||!1,Vr=Nr.RETURN_TRUSTED_TYPE||!1,Fr=Nr.FORCE_BODY||!1,Gr=Nr.SANITIZE_DOM!==!1,jr=Nr.SANITIZE_NAMED_PROPS||!1,Xr=Nr.KEEP_CONTENT!==!1,Zr=Nr.IN_PLACE||!1,_r=Nr.ALLOWED_URI_REGEXP||_r,Tn=Nr.NAMESPACE||pn,br=Nr.CUSTOM_ELEMENT_HANDLING||{},Nr.CUSTOM_ELEMENT_HANDLING&&gn(Nr.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(br.tagNameCheck=Nr.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Nr.CUSTOM_ELEMENT_HANDLING&&gn(Nr.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(br.attributeNameCheck=Nr.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Nr.CUSTOM_ELEMENT_HANDLING&&typeof Nr.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(br.allowCustomizedBuiltInElements=Nr.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),wr&&(Cr=!1),Kr&&(Br=!0),ln&&(yr=addToSet({},_toConsumableArray(text)),Sr=[],ln.html===!0&&(addToSet(yr,html$1),addToSet(Sr,html)),ln.svg===!0&&(addToSet(yr,svg$1),addToSet(Sr,svg),addToSet(Sr,xml)),ln.svgFilters===!0&&(addToSet(yr,svgFilters),addToSet(Sr,svg),addToSet(Sr,xml)),ln.mathMl===!0&&(addToSet(yr,mathMl$1),addToSet(Sr,mathMl),addToSet(Sr,xml))),Nr.ADD_TAGS&&(yr===gr&&(yr=clone$2(yr)),addToSet(yr,Nr.ADD_TAGS,tn)),Nr.ADD_ATTR&&(Sr===Tr&&(Sr=clone$2(Sr)),addToSet(Sr,Nr.ADD_ATTR,tn)),Nr.ADD_URI_SAFE_ATTR&&addToSet(un,Nr.ADD_URI_SAFE_ATTR,tn),Nr.FORBID_CONTENTS&&(Qr===an&&(Qr=clone$2(Qr)),addToSet(Qr,Nr.FORBID_CONTENTS,tn)),Xr&&(yr["#text"]=!0),Dr&&addToSet(yr,["html","head","body"]),yr.table&&(addToSet(yr,["tbody"]),delete Ar.tbody),freeze&&freeze(Nr),En=Nr)},bn=addToSet({},["mi","mo","mn","ms","mtext"]),Kn=addToSet({},["foreignobject","desc","title","annotation-xml"]),Hn=addToSet({},["title","style","font","a","script"]),Nn=addToSet({},svg$1);addToSet(Nn,svgFilters),addToSet(Nn,svgDisallowed);var Vn=addToSet({},mathMl$1);addToSet(Vn,mathMlDisallowed);var Gn=function(Nr){var Hr=Bt(Nr);(!Hr||!Hr.tagName)&&(Hr={namespaceURI:Tn,tagName:"template"});var Wr=stringToLowerCase(Nr.tagName),dn=stringToLowerCase(Hr.tagName);return Ln[Nr.namespaceURI]?Nr.namespaceURI===fn?Hr.namespaceURI===pn?Wr==="svg":Hr.namespaceURI===hn?Wr==="svg"&&(dn==="annotation-xml"||bn[dn]):!!Nn[Wr]:Nr.namespaceURI===hn?Hr.namespaceURI===pn?Wr==="math":Hr.namespaceURI===fn?Wr==="math"&&Kn[dn]:!!Vn[Wr]:Nr.namespaceURI===pn?Hr.namespaceURI===fn&&!Kn[dn]||Hr.namespaceURI===hn&&!bn[dn]?!1:!Vn[Wr]&&(Hn[Wr]||!Nn[Wr]):!!(mn==="application/xhtml+xml"&&Ln[Nr.namespaceURI]):!1},yn=function(Nr){arrayPush$3(ft.removed,{element:Nr});try{Nr.parentNode.removeChild(Nr)}catch{Nr.remove()}},Cn=function(Nr,Hr){try{arrayPush$3(ft.removed,{attribute:Hr.getAttributeNode(Nr),from:Hr})}catch{arrayPush$3(ft.removed,{attribute:null,from:Hr})}if(Hr.removeAttribute(Nr),Nr==="is"&&!Sr[Nr])if(Br||Kr)try{yn(Hr)}catch{}else try{Hr.setAttribute(Nr,"")}catch{}},Wn=function(Nr){var Hr,Wr;if(Fr)Nr="<remove></remove>"+Nr;else{var dn=stringMatch(Nr,/^[\r\n\t ]+/);Wr=dn&&dn[0]}mn==="application/xhtml+xml"&&Tn===pn&&(Nr='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Nr+"</body></html>");var An=tr?tr.createHTML(Nr):Nr;if(Tn===pn)try{Hr=new Nt().parseFromString(An,mn)}catch{}if(!Hr||!Hr.documentElement){Hr=Zt.createDocument(Tn,"template",null);try{Hr.documentElement.innerHTML=$n?cr:An}catch{}}var Un=Hr.body||Hr.documentElement;return Nr&&Wr&&Un.insertBefore(vt.createTextNode(Wr),Un.childNodes[0]||null),Tn===pn?sr.call(Hr,Dr?"html":"body")[0]:Dr?Hr.documentElement:Un},zn=function(Nr){return rr.call(Nr.ownerDocument||Nr,Nr,Ct.SHOW_ELEMENT|Ct.SHOW_COMMENT|Ct.SHOW_TEXT,null,!1)},Xn=function(Nr){return Nr instanceof kt&&(typeof Nr.nodeName!="string"||typeof Nr.textContent!="string"||typeof Nr.removeChild!="function"||!(Nr.attributes instanceof Dt)||typeof Nr.removeAttribute!="function"||typeof Nr.setAttribute!="function"||typeof Nr.namespaceURI!="string"||typeof Nr.insertBefore!="function"||typeof Nr.hasChildNodes!="function")},Rn=function(Nr){return _typeof$1(Tt)==="object"?Nr instanceof Tt:Nr&&_typeof$1(Nr)==="object"&&typeof Nr.nodeType=="number"&&typeof Nr.nodeName=="string"},jn=function(Nr,Hr,Wr){fr[Nr]&&arrayForEach(fr[Nr],function(dn){dn.call(ft,Hr,Wr,En)})},qn=function(Nr){var Hr;if(jn("beforeSanitizeElements",Nr,null),Xn(Nr))return yn(Nr),!0;var Wr=tn(Nr.nodeName);if(jn("uponSanitizeElement",Nr,{tagName:Wr,allowedTags:yr}),Nr.hasChildNodes()&&!Rn(Nr.firstElementChild)&&(!Rn(Nr.content)||!Rn(Nr.content.firstElementChild))&&regExpTest(/<[/\w]/g,Nr.innerHTML)&&regExpTest(/<[/\w]/g,Nr.textContent))return yn(Nr),!0;if(!yr[Wr]||Ar[Wr]){if(!Ar[Wr]&&Qn(Wr)&&(br.tagNameCheck instanceof RegExp&&regExpTest(br.tagNameCheck,Wr)||br.tagNameCheck instanceof Function&&br.tagNameCheck(Wr)))return!1;if(Xr&&!Qr[Wr]){var dn=Bt(Nr)||Nr.parentNode,An=Ht(Nr)||Nr.childNodes;if(An&&dn)for(var Un=An.length,Pn=Un-1;Pn>=0;--Pn)dn.insertBefore(nr(An[Pn],!0),Ut(Nr))}return yn(Nr),!0}return Nr instanceof At&&!Gn(Nr)||(Wr==="noscript"||Wr==="noembed")&&regExpTest(/<\/no(script|embed)/i,Nr.innerHTML)?(yn(Nr),!0):(wr&&Nr.nodeType===3&&(Hr=Nr.textContent,Hr=stringReplace(Hr,pr," "),Hr=stringReplace(Hr,xr," "),Hr=stringReplace(Hr,lr," "),Nr.textContent!==Hr&&(arrayPush$3(ft.removed,{element:Nr.cloneNode()}),Nr.textContent=Hr)),jn("afterSanitizeElements",Nr,null),!1)},Zn=function(Nr,Hr,Wr){if(Gr&&(Hr==="id"||Hr==="name")&&(Wr in vt||Wr in Mn))return!1;if(!(Cr&&!Or[Hr]&&regExpTest(hr,Hr))){if(!(Ir&&regExpTest(ur,Hr))){if(!Sr[Hr]||Or[Hr]){if(!(Qn(Nr)&&(br.tagNameCheck instanceof RegExp&&regExpTest(br.tagNameCheck,Nr)||br.tagNameCheck instanceof Function&&br.tagNameCheck(Nr))&&(br.attributeNameCheck instanceof RegExp&&regExpTest(br.attributeNameCheck,Hr)||br.attributeNameCheck instanceof Function&&br.attributeNameCheck(Hr))||Hr==="is"&&br.allowCustomizedBuiltInElements&&(br.tagNameCheck instanceof RegExp&&regExpTest(br.tagNameCheck,Wr)||br.tagNameCheck instanceof Function&&br.tagNameCheck(Wr))))return!1}else if(!un[Hr]){if(!regExpTest(_r,stringReplace(Wr,ir,""))){if(!((Hr==="src"||Hr==="xlink:href"||Hr==="href")&&Nr!=="script"&&stringIndexOf(Wr,"data:")===0&&Jr[Nr])){if(!(Rr&&!regExpTest(mr,stringReplace(Wr,ir,"")))){if(Wr)return!1}}}}}}return!0},Qn=function(Nr){return Nr.indexOf("-")>0},Jn=function(Nr){var Hr,Wr,dn,An;jn("beforeSanitizeAttributes",Nr,null);var Un=Nr.attributes;if(Un){var Pn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Sr};for(An=Un.length;An--;){Hr=Un[An];var Bn=Hr,Yn=Bn.name,ga=Bn.namespaceURI;if(Wr=Yn==="value"?Hr.value:stringTrim(Hr.value),dn=tn(Yn),Pn.attrName=dn,Pn.attrValue=Wr,Pn.keepAttr=!0,Pn.forceKeepAttr=void 0,jn("uponSanitizeAttribute",Nr,Pn),Wr=Pn.attrValue,!Pn.forceKeepAttr&&(Cn(Yn,Nr),!!Pn.keepAttr)){if(!Pr&&regExpTest(/\/>/i,Wr)){Cn(Yn,Nr);continue}wr&&(Wr=stringReplace(Wr,pr," "),Wr=stringReplace(Wr,xr," "),Wr=stringReplace(Wr,lr," "));var _a=tn(Nr.nodeName);if(Zn(_a,dn,Wr)){if(jr&&(dn==="id"||dn==="name")&&(Cn(Yn,Nr),Wr=zr+Wr),tr&&_typeof$1(zt)==="object"&&typeof zt.getAttributeType=="function"&&!ga)switch(zt.getAttributeType(_a,dn)){case"TrustedHTML":Wr=tr.createHTML(Wr);break;case"TrustedScriptURL":Wr=tr.createScriptURL(Wr);break}try{ga?Nr.setAttributeNS(ga,Yn,Wr):Nr.setAttribute(Yn,Wr),arrayPop(ft.removed)}catch{}}}}jn("afterSanitizeAttributes",Nr,null)}},va=function qr(Nr){var Hr,Wr=zn(Nr);for(jn("beforeSanitizeShadowDOM",Nr,null);Hr=Wr.nextNode();)jn("uponSanitizeShadowNode",Hr,null),!qn(Hr)&&(Hr.content instanceof Et&&qr(Hr.content),Jn(Hr));jn("afterSanitizeShadowDOM",Nr,null)};return ft.sanitize=function(qr){var Nr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Hr,Wr,dn,An;if($n=!qr,$n&&(qr="<!-->"),typeof qr!="string"&&!Rn(qr)){if(typeof qr.toString!="function")throw typeErrorCreate("toString is not a function");if(qr=qr.toString(),typeof qr!="string")throw typeErrorCreate("dirty is not a string, aborting")}if(!ft.isSupported)return qr;if(kr||In(Nr),ft.removed=[],typeof qr=="string"&&(Zr=!1),Zr){if(qr.nodeName){var Un=tn(qr.nodeName);if(!yr[Un]||Ar[Un])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(qr instanceof Tt)Hr=Wn("<!---->"),Wr=Hr.ownerDocument.importNode(qr,!0),Wr.nodeType===1&&Wr.nodeName==="BODY"||Wr.nodeName==="HTML"?Hr=Wr:Hr.appendChild(Wr);else{if(!Br&&!wr&&!Dr&&qr.indexOf("<")===-1)return tr&&Vr?tr.createHTML(qr):qr;if(Hr=Wn(qr),!Hr)return Br?null:Vr?cr:""}Hr&&Fr&&yn(Hr.firstChild);for(var Pn=zn(Zr?qr:Hr);dn=Pn.nextNode();)qn(dn)||(dn.content instanceof Et&&va(dn.content),Jn(dn));if(Zr)return qr;if(Br){if(Kr)for(An=ar.call(Hr.ownerDocument);Hr.firstChild;)An.appendChild(Hr.firstChild);else An=Hr;return(Sr.shadowroot||Sr.shadowrootmod)&&(An=dr.call(dt,An,!0)),An}var Bn=Dr?Hr.outerHTML:Hr.innerHTML;return Dr&&yr["!doctype"]&&Hr.ownerDocument&&Hr.ownerDocument.doctype&&Hr.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,Hr.ownerDocument.doctype.name)&&(Bn="<!DOCTYPE "+Hr.ownerDocument.doctype.name+`>
`+Bn),wr&&(Bn=stringReplace(Bn,pr," "),Bn=stringReplace(Bn,xr," "),Bn=stringReplace(Bn,lr," ")),tr&&Vr?tr.createHTML(Bn):Bn},ft.setConfig=function(qr){In(qr),kr=!0},ft.clearConfig=function(){En=null,kr=!1},ft.isValidAttribute=function(qr,Nr,Hr){En||In({});var Wr=tn(qr),dn=tn(Nr);return Zn(Wr,dn,Hr)},ft.addHook=function(qr,Nr){typeof Nr=="function"&&(fr[qr]=fr[qr]||[],arrayPush$3(fr[qr],Nr))},ft.removeHook=function(qr){if(fr[qr])return arrayPop(fr[qr])},ft.removeHooks=function(qr){fr[qr]&&(fr[qr]=[])},ft.removeAllHooks=function(){fr={}},ft}var purify=createDOMPurify();class Handler{constructor({name:ft,build:dt,detect:vt,helper:Et,parse:St}){this.name=ft,this.helper=Et,this.build=dt,this.detect=Tt=>{if(typeof Tt!="string")throw new Error("Expected string content!");return vt(Tt)},this.parse=(Tt,At)=>{if(typeof Tt!="string")throw new Error("Expected string content!");return St(Tt,At)}}}const buildHandler=lt=>new Handler(lt),FORMAT_NAME$8="ssa",helper$5={toMilliseconds:lt=>{const ft=/^\s*(\d+:)?(\d{1,2}):(\d{1,2})(?:[.,](\d{1,3}))?\s*$/.exec(lt);if(!ft)throw new Error(`Invalid time format: ${lt}`);const dt=ft[1]?parseInt(ft[1].replace(":","")):0,vt=parseInt(ft[2]),Et=parseInt(ft[3]),St=ft[4]?parseInt(ft[4]):0;return dt*3600*1e3+vt*60*1e3+Et*1e3+St*10},toTimeString:lt=>{const ft=Math.floor(lt/1e3/3600),dt=Math.floor(lt/1e3/60%60),vt=Math.floor(lt/1e3%60),Et=Math.floor(lt%1e3/10);return`${ft}:${dt<10?"0":""}${dt}:${vt<10?"0":""}${vt}.${Et<10?"0":""}${Et}`}},parse$9=(lt,ft)=>{let dt,vt=null;const Et=[],St=ft.eol||`\r
`,Tt=lt.split(/\r?\n\s*\n/);for(let At=0;At<Tt.length;At++){const Rt=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)$/.exec(Tt[At]);if(Rt){const Dt=Rt[1],kt=Rt[2].split(/\r?\n/);for(let Nt=0;Nt<kt.length;Nt++){const zt=kt[Nt];if(/^\s*;/.test(zt))continue;const Wt=/^\s*([^\s:]+):\s*(.*)$/.exec(zt);if(Wt){if(Dt==="Script Info")if(dt||(dt={},dt.type="meta",dt.data={},Et.push(dt)),typeof dt.data=="object"){const nr=Wt[1].trim(),Ut=Wt[2].trim();dt.data[nr]=Ut}else throw new Error(`Invalid meta data: ${zt}`);else if(Dt==="V4 Styles"||Dt==="V4+ Styles"){const nr=Wt[1].trim(),Ut=Wt[2].trim();if(nr==="Format")vt=Ut.split(/\s*,\s*/g);else if(nr==="Style"&&vt){const Ht=Ut.split(/\s*,\s*/g),Bt={};Bt.type="style",Bt.data={};for(let Ft=0;Ft<vt.length&&Ft<Ht.length;Ft++)Bt.data[vt[Ft]]=Ht[Ft];Et.push(Bt)}}else if(Dt==="Events"){const nr=Wt[1].trim(),Ut=Wt[2].trim();if(nr==="Format")vt=Ut.split(/\s*,\s*/g);else if(nr==="Dialogue"&&vt){const Ht=Ut.split(/\s*,\s*/g),Bt={};Bt.type="caption",Bt.data={};for(let cr=0;cr<vt.length&&cr<Ht.length;cr++)Bt.data[vt[cr]]=Ht[cr];Bt.start=helper$5.toMilliseconds(Bt.data.Start),Bt.end=helper$5.toMilliseconds(Bt.data.End),Bt.duration=Bt.end-Bt.start,Bt.content=Bt.data.Text;const tr=((cr,Kt,Zt)=>cr.split(Kt,Zt).join(Kt).length)(Ut,",",vt.length-1)+1;Bt.content=Ut.substring(tr),Bt.data.Text=Bt.content,Bt.text=Bt.content.replace(/\\N/g,St).replace(/\{[^}]+\}/g,""),Et.push(Bt)}}}}}ft.verbose&&console.log("WARN: Unknown part",Tt[At])}return Et},build$8=(lt,ft)=>{const dt=ft.eol||`\r
`,vt=ft.format==="ass";let Et="";Et+=`[Script Info]${dt}`,Et+=`; Script generated by subsrt ${dt}`,Et+=`ScriptType: v4.00${vt?"+":""}${dt}`,Et+=`Collisions: Normal${dt}`,Et+=dt,vt?(Et+=`[V4+ Styles]${dt}`,Et+=`Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding${dt}`,Et+=`Style: DefaultVCD, Arial,28,&H00B4FCFC,&H00B4FCFC,&H00000008,&H80000008,-1,0,0,0,100,100,0.00,0.00,1,1.00,2.00,2,30,30,30,0${dt}`):(Et+=`[V4 Styles]${dt}`,Et+=`Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, TertiaryColour, BackColour, Bold, Italic, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, AlphaLevel, Encoding${dt}`,Et+=`Style: DefaultVCD, Arial,28,11861244,11861244,11861244,-2147483640,-1,0,1,1,2,2,30,30,30,0,0${dt}`),Et+=dt,Et+=`[Events]${dt}`,Et+=`Format: ${vt?"Layer":"Marked"}, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text${dt}`;for(let St=0;St<lt.length;St++){const Tt=lt[St];if(Tt.type!=="meta"){if(!Tt.type||Tt.type==="caption"){Et+=`Dialogue: ${vt?"0":"Marked=0"},${helper$5.toTimeString(Tt.start)},${helper$5.toTimeString(Tt.end)},DefaultVCD, NTP,0000,0000,0000,,${Tt.text.replace(/\r?\n/g,"\\N")}${dt}`;continue}ft.verbose&&console.log("SKIP:",Tt)}}return Et},detect$9=lt=>/^\s*\[Script Info\]\r?\n/.test(lt)&&/\s*\[Events\]\r?\n/.test(lt)?lt.indexOf("[V4+ Styles]")>0?"ass":"ssa":!1,ssa=buildHandler({name:FORMAT_NAME$8,build:build$8,detect:detect$9,helper:helper$5,parse:parse$9}),FORMAT_NAME$7="ass",ass=buildHandler({name:FORMAT_NAME$7,build:build$8,detect:detect$9,helper:helper$5,parse:parse$9}),FORMAT_NAME$6="json",parse$8=(lt,ft)=>JSON.parse(lt),build$7=(lt,ft)=>JSON.stringify(lt,void 0,2),detect$8=lt=>{try{const ft=JSON.parse(lt);return Array.isArray(ft)&&ft.length>0&&typeof ft[0]=="object"}catch{return!1}},json=buildHandler({name:FORMAT_NAME$6,build:build$7,detect:detect$8,parse:parse$8}),FORMAT_NAME$5="lrc",helper$4={toMilliseconds:lt=>{const ft=/^\s*(\d+):(\d{1,2})(?:[.,](\d{1,3}))?\s*$/.exec(lt);if(!ft)throw new Error(`Invalid time format: ${lt}`);const dt=parseInt(ft[1]),vt=parseInt(ft[2]),Et=ft[3]?parseInt(ft[3]):0;return dt*60*1e3+vt*1e3+Et*10},toTimeString:lt=>{const ft=Math.floor(lt/1e3/60),dt=Math.floor(lt/1e3%60),vt=Math.floor(lt%1e3);return`${(ft<10?"0":"")+ft}:${dt<10?"0":""}${dt}.${vt<100?"0":""}${vt<10?"0":Math.floor(vt/10)}`}},parse$7=(lt,ft)=>{let dt=null;const vt=[],Et=lt.split(/\r?\n/);for(let St=0;St<Et.length;St++){if(!Et[St]||Et[St].trim().length===0)continue;const At=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)(?:\r?\n)*$/.exec(Et[St]);if(At){const Rt={};Rt.type="caption",Rt.start=helper$4.toMilliseconds(At[1]),Rt.end=Rt.start+2e3,Rt.duration=Rt.end-Rt.start,Rt.content=At[2],Rt.text=Rt.content,vt.push(Rt),dt&&(dt.end=Rt.start,dt.duration=dt.end-dt.start),dt=Rt;continue}const Ct=/^\[(\w+):([^\]]*)\](?:\r?\n)*$/.exec(Et[St]);if(Ct){const Rt={};Rt.type="meta",Rt.tag=Ct[1],Ct[2]&&(Rt.data=Ct[2]),vt.push(Rt);continue}ft.verbose&&console.log("WARN: Unknown part",Et[St])}return vt},build$6=(lt,ft)=>{let dt="",vt=!1;const Et=ft.eol||`\r
`;for(let St=0;St<lt.length;St++){const Tt=lt[St];if(Tt.type==="meta"){Tt.tag&&Tt.data&&typeof Tt.data=="string"&&(dt+=`[${Tt.tag}:${Tt.data.replace(/[\r\n]+/g," ")}]${Et}`);continue}if(!Tt.type||Tt.type==="caption"){vt||(dt+=Et,vt=!0),dt+=`[${helper$4.toTimeString(Tt.start)}]${Tt.text}${Et}`;continue}ft.verbose&&console.log("SKIP:",Tt)}return dt},detect$7=lt=>/\r?\n\[\d+:\d{1,2}(?:[.,]\d{1,3})?\].*\r?\n/.test(lt),lrc=buildHandler({name:FORMAT_NAME$5,build:build$6,detect:detect$7,helper:helper$4,parse:parse$7}),FORMAT_NAME$4="sbv",helper$3={toMilliseconds:lt=>{const ft=/^\s*(\d{1,2}):(\d{1,2}):(\d{1,2})(?:[.,](\d{1,3}))?\s*$/.exec(lt);if(!ft)throw new Error(`Invalid time format: ${lt}`);const dt=parseInt(ft[1]),vt=parseInt(ft[2]),Et=parseInt(ft[3]),St=ft[4]?parseInt(ft[4]):0;return dt*3600*1e3+vt*60*1e3+Et*1e3+St},toTimeString:lt=>{const ft=Math.floor(lt/1e3/3600),dt=Math.floor(lt/1e3/60%60),vt=Math.floor(lt/1e3%60),Et=Math.floor(lt%1e3);return`${(ft<10?"0":"")+ft}:${dt<10?"0":""}${dt}:${vt<10?"0":""}${vt}.${Et<100?"0":""}${Et<10?"0":""}${Et}`}},parse$6=(lt,ft)=>{const dt=[],vt=ft.eol||`\r
`,Et=lt.split(/\r?\n\s*\n/);for(let St=0;St<Et.length;St++){const At=/^(\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\s*[,;]\s*(\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\r?\n([\s\S]*)$/.exec(Et[St]);if(At){const Ct={};Ct.type="caption",Ct.start=helper$3.toMilliseconds(At[1]),Ct.end=helper$3.toMilliseconds(At[2]),Ct.duration=Ct.end-Ct.start;const Rt=At[3].split(/\[br\]|\r?\n/gi);Ct.content=Rt.join(vt),Ct.text=Ct.content.replace(/>>[^:]+:\s*/g,""),dt.push(Ct);continue}ft.verbose&&console.log("WARN: Unknown part",Et[St])}return dt},build$5=(lt,ft)=>{let dt="";const vt=ft.eol||`\r
`;for(let Et=0;Et<lt.length;Et++){const St=lt[Et];if(!St.type||St.type==="caption"){dt+=`${helper$3.toTimeString(St.start)},${helper$3.toTimeString(St.end)}${vt}`,dt+=St.text+vt,dt+=vt;continue}ft.verbose&&console.log("SKIP:",St)}return dt},detect$6=lt=>/\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?\s*[,;]\s*\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?/.test(lt),sbv=buildHandler({name:FORMAT_NAME$4,build:build$5,detect:detect$6,helper:helper$3,parse:parse$6}),FORMAT_NAME$3="smi",helper$2={htmlEncode:lt=>lt.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n/g,"<BR>"),htmlDecode:(lt,ft)=>lt.replace(/<BR\s*\/?>/gi,ft||`\r
`).replace(/&nbsp;/g," ").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},parse$5=(lt,ft)=>{if(ft.format&&ft.format!==FORMAT_NAME$3)throw new Error(`Invalid format: ${ft.format}`);const dt=[],vt=ft.eol||`\r
`,Et=/<TITLE[^>]*>([\s\S]*)<\/TITLE>/i.exec(lt);if(Et){const Rt={};Rt.type="meta",Rt.name="title",Rt.data=Et[1].replace(/^\s*/g,"").replace(/\s*$/g,""),dt.push(Rt)}const St=/<STYLE[^>]*>([\s\S]*)<\/STYLE>/i.exec(lt);if(St){const Rt={};Rt.type="meta",Rt.name="style",Rt.data=St[1],dt.push(Rt)}const Tt=lt.replace(/^[\s\S]*<BODY[^>]*>/gi,"").replace(/<\/BODY[^>]*>[\s\S]*$/gi,"");let At=null;const Ct=Tt.split(/<SYNC/gi);for(let Rt=0;Rt<Ct.length;Rt++){if(!Ct[Rt]||Ct[Rt].trim().length===0)continue;const Dt=`<SYNC${Ct[Rt]}`,kt=/^<SYNC[^>]+Start\s*=\s*["']?(\d+)[^\d>]*>([\s\S]*)/i.exec(Dt);if(kt){const Nt={};Nt.type="caption",Nt.start=parseInt(kt[1]),Nt.end=Nt.start+2e3,Nt.duration=Nt.end-Nt.start,Nt.content=kt[2].replace(/^<\/SYNC[^>]*>/gi,"");let zt=!0;const Wt=/^<P.+Class\s*=\s*["']?([\w-]+)(?: .*)?>([\s\S]*)/i.exec(Nt.content)||/^<P([^>]*)>([\s\S]*)/i.exec(Nt.content);if(Wt){let nr=Wt[2].replace(/<P[\s\S]+$/gi,"");nr=nr.replace(/<BR\s*\/?>\s+/gi,vt).replace(/<BR\s*\/?>/gi,vt).replace(/<[^>]+>/g,""),nr=nr.replace(/^\s+/g,"").replace(/\s+$/g,""),zt=nr.replace(/&nbsp;/gi," ").replace(/\s+/g,"").length===0,Nt.text=helper$2.htmlDecode(nr,vt)}!ft.preserveSpaces&&zt?ft.verbose&&console.log(`INFO: Skipping white space caption at ${Nt.start}`):dt.push(Nt),At&&(At.end=Nt.start,At.duration=At.end-At.start),At=Nt;continue}ft.verbose&&console.log("WARN: Unknown part",Ct[Rt])}return dt},build$4=(lt,ft)=>{const dt=ft.eol||`\r
`;let vt="";vt+=`<SAMI>${dt}`,vt+=`<HEAD>${dt}`,vt+=`<TITLE>${ft.title||""}</TITLE>${dt}`,vt+=`<STYLE TYPE="text/css">${dt}`,vt+=`<!--${dt}`,vt+=`P { font-family: Arial; font-weight: normal; color: white; background-color: black; text-align: center; }${dt}`,vt+=`.LANG { Name: ${ft.langName||"English"}; lang: ${ft.langCode||"en-US"}; SAMIType: CC; }${dt}`,vt+=`-->${dt}`,vt+=`</STYLE>${dt}`,vt+=`</HEAD>${dt}`,vt+=`<BODY>${dt}`;for(let Et=0;Et<lt.length;Et++){const St=lt[Et];if(St.type!=="meta"){if(!St.type||St.type==="caption"){vt+=`<SYNC Start=${St.start}>${dt}`,vt+=`  <P Class=LANG>${helper$2.htmlEncode(St.text||"")}${ft.closeTags?"</P>":""}${dt}`,ft.closeTags&&(vt+=`</SYNC>${dt}`),vt+=`<SYNC Start=${St.end}>${dt}`,vt+=`  <P Class=LANG>&nbsp;${ft.closeTags?"</P>":""}${dt}`,ft.closeTags&&(vt+=`</SYNC>${dt}`);continue}ft.verbose&&console.log("SKIP:",St)}}return vt+=`</BODY>${dt}`,vt+=`</SAMI>${dt}`,vt},detect$5=lt=>/<SAMI[^>]*>[\s\S]*<BODY[^>]*>/.test(lt),smi=buildHandler({name:FORMAT_NAME$3,build:build$4,detect:detect$5,helper:helper$2,parse:parse$5}),FORMAT_NAME$2="srt",helper$1={toMilliseconds:lt=>{const ft=/^\s*(\d{1,2}):(\d{1,2}):(\d{1,2})(?:[.,](\d{1,3}))?\s*$/.exec(lt);if(!ft)throw new Error(`Invalid time format: ${lt}`);const dt=parseInt(ft[1]),vt=parseInt(ft[2]),Et=parseInt(ft[3]),St=ft[4]?parseInt(ft[4]):0;return dt*3600*1e3+vt*60*1e3+Et*1e3+St},toTimeString:lt=>{const ft=Math.floor(lt/1e3/3600),dt=Math.floor(lt/1e3/60%60),vt=Math.floor(lt/1e3%60),Et=Math.floor(lt%1e3);return`${(ft<10?"0":"")+ft}:${dt<10?"0":""}${dt}:${vt<10?"0":""}${vt},${Et<100?"0":""}${Et<10?"0":""}${Et}`}},parse$4=(lt,ft)=>{const dt=[],vt=ft.eol||`\r
`,Et=lt.split(/\r?\n\s*\n/g);for(let St=0;St<Et.length;St++){const At=/^(\d+)\r?\n(\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\s*-->\s*(\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\r?\n([\s\S]*)$/.exec(Et[St]);if(At){const Ct={};Ct.type="caption",Ct.index=parseInt(At[1]),Ct.start=helper$1.toMilliseconds(At[2]),Ct.end=helper$1.toMilliseconds(At[3]),Ct.duration=Ct.end-Ct.start;const Rt=At[4].split(/\r?\n/);Ct.content=Rt.join(vt),Ct.text=Ct.content.replace(/<[^>]+>/g,"").replace(/\{[^}]+\}/g,"").replace(/>>[^:]*:\s*/g,""),dt.push(Ct);continue}ft.verbose&&console.log("WARN: Unknown part",Et[St])}return dt},build$3=(lt,ft)=>{let dt="";const vt=ft.eol||`\r
`;for(let Et=0;Et<lt.length;Et++){const St=lt[Et];if(!St.type||St.type==="caption"){dt+=(Et+1).toString()+vt,dt+=`${helper$1.toTimeString(St.start)} --> ${helper$1.toTimeString(St.end)}${vt}`,dt+=St.text+vt,dt+=vt;continue}ft.verbose&&console.log("SKIP:",St)}return dt},detect$4=lt=>/\d+\r?\n\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?\s*-->\s*\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?/.test(lt),srt=buildHandler({name:FORMAT_NAME$2,build:build$3,detect:detect$4,helper:helper$1,parse:parse$4}),FORMAT_NAME$1="sub",DEFAULT_FPS=25,parse$3=(lt,ft)=>{ft.fps||(ft.fps=DEFAULT_FPS);const dt=ft.fps>0?ft.fps:DEFAULT_FPS,vt=[],Et=ft.eol||`\r
`,St=lt.split(/\r?\n/g);for(let Tt=0;Tt<St.length;Tt++){const Ct=/^\{(\d+)\}\{(\d+)\}(.*)$/.exec(St[Tt]);if(Ct){const Rt={};Rt.type="caption",Rt.index=Tt+1,Rt.frame={start:parseInt(Ct[1]),end:parseInt(Ct[2]),count:parseInt(Ct[2])-parseInt(Ct[1])},Rt.start=Math.round(Rt.frame.start/dt),Rt.end=Math.round(Rt.frame.end/dt),Rt.duration=Rt.end-Rt.start;const Dt=Ct[3].split(/\|/g);Rt.content=Dt.join(Et),Rt.text=Rt.content.replace(/\{[^}]+\}/g,""),vt.push(Rt);continue}ft.verbose&&console.log("WARN: Unknown part",St[Tt])}return vt},build$2=(lt,ft)=>{const dt=(ft.fps||0)>0?ft.fps:DEFAULT_FPS;let vt="";const Et=ft.eol||`\r
`;for(let St=0;St<lt.length;St++){const Tt=lt[St];if(!Tt.type||Tt.type==="caption"){const At=typeof Tt.frame=="object"&&Tt.frame.start>=0?Tt.frame.start:Tt.start*dt,Ct=typeof Tt.frame=="object"&&Tt.frame.end>=0?Tt.frame.end:Tt.end*dt,Rt=Tt.text.replace(/\r?\n/,"|");vt+=`{${At}}{${Ct}}${Rt}${Et}`;continue}ft.verbose&&console.log("SKIP:",Tt)}return vt},detect$3=lt=>/^\{\d+\}\{\d+\}.*/.test(lt),sub=buildHandler({name:FORMAT_NAME$1,build:build$2,detect:detect$3,parse:parse$3}),FORMAT_NAME="vtt",helper={toMilliseconds:lt=>{const ft=/^\s*(\d{1,2}:)?(\d{1,2}):(\d{1,2})(?:[.,](\d{1,3}))?\s*$/.exec(lt);if(!ft)throw new Error(`Invalid time format: ${lt}`);const dt=ft[1]?parseInt(ft[1].replace(":","")):0,vt=parseInt(ft[2]),Et=parseInt(ft[3]),St=ft[4]?parseInt(ft[4]):0;return dt*3600*1e3+vt*60*1e3+Et*1e3+St},toTimeString:lt=>{const ft=Math.floor(lt/1e3/3600),dt=Math.floor(lt/1e3/60%60),vt=Math.floor(lt/1e3%60),Et=Math.floor(lt%1e3);return`${(ft<10?"0":"")+ft}:${dt<10?"0":""}${dt}:${vt<10?"0":""}${vt}.${Et<100?"0":""}${Et<10?"0":""}${Et}`}},parse$2=(lt,ft)=>{let dt=1;const vt=[],Et=lt.split(/\r?\n\s*\n/);for(let St=0;St<Et.length;St++){const At=/^([^\r\n]+\r?\n)?((?:\d{1,2}:)?\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\s*-->\s*((?:\d{1,2}:)?\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\s?.*\r?\n([\s\S]*)$/.exec(Et[St]);if(At){const Rt={};Rt.type="caption",Rt.index=dt++,At[1]&&(Rt.cue=At[1].replace(/[\r\n]*/g,"")),Rt.start=helper.toMilliseconds(At[2]),Rt.end=helper.toMilliseconds(At[3]),Rt.duration=Rt.end-Rt.start;const Dt=At[4].split(/\r?\n/);Rt.content=Dt.join(" "),Rt.text=Rt.content.replace(/<[^>]+>/g,"").replace(/\{[^}]+\}/g,""),vt.push(Rt);continue}const Ct=/^([A-Z]+)(\r?\n([\s\S]*))?$/.exec(Et[St])||/^([A-Z]+)\s+([^\r\n]*)$/.exec(Et[St]);if(Ct){const Rt={};Rt.type="meta",Rt.name=Ct[1],Ct[3]&&(Rt.data=Ct[3]),vt.push(Rt);continue}ft.verbose&&console.log("WARN: Unknown part",Et[St])}return vt},build$1=(lt,ft)=>{const dt=ft.eol||`\r
`;let vt=`WEBVTT${dt}${dt}`;for(let Et=0;Et<lt.length;Et++){const St=lt[Et];if(St.type==="meta"){if(St.name==="WEBVTT")continue;vt+=St.name+dt,vt+=St.data?St.data+dt:"",vt+=dt;continue}if(!St.type||St.type==="caption"){vt+=(Et+1).toString()+dt,vt+=`${helper.toTimeString(St.start)} --> ${helper.toTimeString(St.end)}${dt}`,vt+=St.text+dt,vt+=dt;continue}ft.verbose&&console.log("SKIP:",St)}return vt},detect$2=lt=>/^\s*WEBVTT\r?\n/.test(lt),vtt=buildHandler({name:FORMAT_NAME,build:build$1,detect:detect$2,helper,parse:parse$2}),formats={vtt,lrc,smi,ssa,ass,sub,srt,sbv,json},clone$1=lt=>JSON.parse(JSON.stringify(lt));class Subsrt{constructor(){this.format=formats,this.list=()=>Object.keys(this.format),this.detect=ft=>{const dt=this.list();for(let vt=0;vt<dt.length;vt++){const Et=dt[vt],St=this.format[Et];if(typeof St>"u"||typeof St.detect!="function")continue;const Tt=St.detect(ft);if(Tt===!0||Tt===Et)return Et}return""},this.parse=(ft,dt={})=>{const vt=dt.format||this.detect(ft);if(!vt||vt.trim().length===0)throw new Error("Cannot determine subtitle format!");const Et=this.format[vt];if(typeof Et>"u")throw new Error(`Unsupported subtitle format: ${vt}`);const St=Et.parse;if(typeof St!="function")throw new Error(`Subtitle format does not support 'parse' op: ${vt}`);return St(ft,dt)},this.build=(ft,dt={})=>{const vt=dt.format||"srt";if(!vt||vt.trim().length===0)throw new Error("Cannot determine subtitle format!");const Et=this.format[vt];if(typeof Et>"u")throw new Error(`Unsupported subtitle format: ${vt}`);const St=Et.build;if(typeof St!="function")throw new Error(`Subtitle format does not support 'build' op: ${vt}`);return St(ft,dt)},this.convert=(ft,dt={})=>{let vt={};typeof dt=="string"?vt.to=dt:vt=dt;const Et={format:vt.from||void 0,verbose:vt.verbose,eol:vt.eol};let St=this.parse(ft,Et);vt.resync&&(St=this.resync(St,vt.resync));const Tt={format:vt.to||vt.format,verbose:vt.verbose,eol:vt.eol};return this.build(St,Tt)},this.resync=(ft,dt={})=>{let vt,Et,St=!1,Tt;if(typeof dt=="function")vt=dt;else if(typeof dt=="number")Tt=dt,vt=Ct=>[Ct[0]+Tt,Ct[1]+Tt];else if(typeof dt=="object")Tt=(dt.offset||0)*(dt.frame?dt.fps||25:1),Et=dt.ratio||1,St=dt.frame||!1,vt=Ct=>[Math.round(Ct[0]*Et+Tt),Math.round(Ct[1]*Et+Tt)];else throw new Error("Argument 'options' not defined!");const At=[];for(let Ct=0;Ct<ft.length;Ct++){const Rt=clone$1(ft[Ct]);if(!Rt.type||Rt.type==="caption")if(St){const Dt=vt([Rt.frame.start,Rt.frame.end]);Dt&&Dt.length===2&&(Rt.frame.start=Dt[0],Rt.frame.end=Dt[1],Rt.frame.count=Rt.frame.end-Rt.frame.start)}else{const Dt=vt([Rt.start,Rt.end]);Dt&&Dt.length===2&&(Rt.start=Dt[0],Rt.end=Dt[1],Rt.duration=Rt.end-Rt.start)}At.push(Rt)}return At}}}const subsrt=new Subsrt,{format:format$2,list,detect:detect$1,parse:parse$1,build,convert,resync}=subsrt,subtitleTypeList=list().map(lt=>`.${lt}`),sanitize=purify.sanitize;async function getCaptionUrl(lt){if(lt.url.startsWith("blob:"))return lt.url;let ft;return lt.needsProxy?ft=await proxiedFetch(lt.url,{responseType:"blob"}):ft=await mwFetch(lt.url,{responseType:"blob"}),URL.createObjectURL(ft)}function revokeCaptionBlob(lt){lt&&lt.startsWith("blob:")&&URL.revokeObjectURL(lt)}function parseSubtitles(lt){if(detect$1(lt)==="")throw new Error("Invalid subtitle format");return parse$1(lt).filter(ft=>ft.type==="caption")}function createCastingStateProvider(lt){const ft=getPlayerState(lt),dt=ft.casting.instance,vt=ft.casting.player,Et=ft.casting.controller;return{getId(){return"casting"},play(){ft.mediaPlaying.isPaused&&(Et==null||Et.playOrPause())},pause(){ft.mediaPlaying.isPlaying&&(Et==null||Et.playOrPause())},exitFullscreen(){fscreen$1.fullscreenElement&&fscreen$1.exitFullscreen()},enterFullscreen(){if(!(!canFullscreen()||fscreen$1.fullscreenElement)){if(canFullscreenAnyElement()){ft.wrapperElement&&fscreen$1.requestFullscreen(ft.wrapperElement);return}canWebkitFullscreen()&&vt.webkitEnterFullscreen()}},startAirplay(){},setTime(St){let Tt=Math.min(St,(vt==null?void 0:vt.duration)??0);Tt=Math.max(0,Tt),!Number.isNaN(Tt)&&(vt&&(vt.currentTime=Tt),ft.progress.time=Tt,Et==null||Et.seek(),updateProgress(lt,ft))},setSeeking(St){if(ft.mediaPlaying.isSeeking=St,ft.mediaPlaying.isDragSeeking=St,updateMediaPlaying(lt,ft),!St){ft.pausedWhenSeeking||this.play();return}ft.pausedWhenSeeking=ft.mediaPlaying.isPaused,this.pause()},togglePictureInPicture(){},setPlaybackSpeed(St){var Rt,Dt,kt;const Tt=new chrome.cast.media.MediaInfo(((Rt=ft.meta)==null?void 0:Rt.meta.meta.id)??"video","video/mp4");Tt.contentUrl=(Dt=ft.source)==null?void 0:Dt.url,Tt.streamType=chrome.cast.media.StreamType.BUFFERED,Tt.metadata=new chrome.cast.media.MovieMediaMetadata,Tt.metadata.title=((kt=ft.meta)==null?void 0:kt.meta.meta.title)??"",Tt.customData={playbackRate:St};const At=new chrome.cast.media.LoadRequest(Tt);At.autoplay=!0;const Ct=dt==null?void 0:dt.getCurrentSession();Ct==null||Ct.loadMedia(At)},async setVolume(St){let Tt=Math.min(St,1);Tt=Math.max(0,Tt),await canChangeVolume()&&vt&&(vt.volumeLevel=Tt),ft.mediaPlaying.volume=Tt,Et==null||Et.setVolumeLevel(),updateMediaPlaying(lt,ft),setStoredVolume(Tt)},setSource(St){var Dt,kt;if(!St){resetStateForSource(lt,ft),Et==null||Et.stop(),ft.source=null,updateSource(lt,ft);return}const Tt=new chrome.cast.media.MovieMediaMetadata;Tt.title=((Dt=ft.meta)==null?void 0:Dt.meta.meta.title)??"";const At=new chrome.cast.media.MediaInfo(((kt=ft.meta)==null?void 0:kt.meta.meta.id)??"video","video/mp4");At.contentUrl=St==null?void 0:St.source,At.streamType=chrome.cast.media.StreamType.BUFFERED,At.metadata=Tt;const Ct=new chrome.cast.media.LoadRequest(At);Ct.autoplay=!0;const Rt=dt==null?void 0:dt.getCurrentSession();Rt==null||Rt.loadMedia(Ct),ft.source={quality:St.quality,type:St.type,url:St.source,caption:null,embedId:St.embedId,providerId:St.providerId},resetStateForSource(lt,ft),updateSource(lt,ft)},setCaption(St,Tt){var At;ft.source&&(revokeCaptionBlob((At=ft.source.caption)==null?void 0:At.url),ft.source.caption={id:St,url:Tt},updateSource(lt,ft))},clearCaption(){var St;ft.source&&(revokeCaptionBlob((St=ft.source.caption)==null?void 0:St.url),ft.source.caption=null,updateSource(lt,ft))},providerStart(){var Ct,Rt,Dt;this.setVolume(getStoredVolume());const St=async kt=>{switch(kt.field){case"volumeLevel":await canChangeVolume()&&(ft.mediaPlaying.volume=kt.value,updateMediaPlaying(lt,ft));break;case"currentTime":ft.progress.time=kt.value,updateProgress(lt,ft);break;case"mediaInfo":kt.value&&(ft.progress.duration=kt.value.duration,updateProgress(lt,ft));break;case"playerState":ft.mediaPlaying.isLoading=kt.value==="BUFFERING",ft.mediaPlaying.isPaused=kt.value!=="PLAYING",ft.mediaPlaying.isPlaying=kt.value==="PLAYING",kt.value==="PLAYING"&&(ft.mediaPlaying.hasPlayedOnce=!0,ft.mediaPlaying.isFirstLoading=!1),updateMediaPlaying(lt,ft);break;case"isMuted":ft.mediaPlaying.volume=kt.value?1:0,updateMediaPlaying(lt,ft);break;case"displayStatus":case"canSeek":case"title":case"isPaused":break;default:console.log(kt.type,kt.field,kt.value);break}},Tt=()=>{ft.interface.isFullscreen=!!document.fullscreenElement,updateInterface(lt,ft)},At=kt=>{ft.interface.isFocused=kt.type!=="mouseleave",updateInterface(lt,ft)};return Et==null||Et.addEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,St),(Ct=ft.wrapperElement)==null||Ct.addEventListener("click",At),(Rt=ft.wrapperElement)==null||Rt.addEventListener("mouseenter",At),(Dt=ft.wrapperElement)==null||Dt.addEventListener("mouseleave",At),fscreen$1.addEventListener("fullscreenchange",Tt),ft.source&&this.setSource({quality:ft.source.quality,source:ft.source.url,type:ft.source.type,embedId:ft.source.embedId,providerId:ft.source.providerId}),{destroy:()=>{var kt,Nt,zt;Et==null||Et.removeEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,St),(kt=ft.wrapperElement)==null||kt.removeEventListener("click",At),(Nt=ft.wrapperElement)==null||Nt.removeEventListener("mouseenter",At),(zt=ft.wrapperElement)==null||zt.removeEventListener("mouseleave",At),fscreen$1.removeEventListener("fullscreenchange",Tt),dt==null||dt.endCurrentSession(!0)}}}}}function setProvider(lt,ft){const dt=getPlayerState(lt);dt.stateProvider=ft,dt.initalized=!0,dt.stateProviderId=ft.getId(),updateMisc(lt,dt)}function unsetStateProvider(lt,ft){var vt;const dt=getPlayerState(lt);!dt.stateProvider||((vt=dt.stateProvider)==null?void 0:vt.getId())!==ft||(dt.stateProvider=null,dt.stateProviderId="video",updateMisc(lt,dt))}function handleBuffered(lt,ft){for(let dt=0;dt<ft.length;dt+=1)if(ft.start(ft.length-1-dt)<lt)return ft.end(ft.length-1-dt);return 0}function CastingInternal(){const lt=useVideoPlayerDescriptor(),ft=useMisc(lt),dt=reactExports.useRef(!1),vt=useChromecastAvailable(),Et=reactExports.useMemo(()=>ft.isCasting,[ft]);return reactExports.useEffect(()=>{if(dt.current===Et||(dt.current=Et,!Et))return;const St=createCastingStateProvider(lt);setProvider(lt,St);const{destroy:Tt}=St.providerStart();return()=>{try{unsetStateProvider(lt,St.getId())}catch{}Tt()}},[lt,Et]),reactExports.useEffect(()=>{const St=getPlayerState(lt);if(!vt)return;St.casting.instance=cast.framework.CastContext.getInstance(),St.casting.instance.setOptions({receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),St.casting.player=new cast.framework.RemotePlayer,St.casting.controller=new cast.framework.RemotePlayerController(St.casting.player);function Tt(At){At.field==="isConnected"&&(St.casting.isCasting=At.value,updateMisc(lt,St))}return St.casting.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,Tt),()=>{var At;(At=St.casting.controller)==null||At.removeEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,Tt)}},[vt,lt]),null}function WrapperRegisterInternal(lt){const ft=useVideoPlayerDescriptor();return reactExports.useEffect(()=>{const dt=getPlayerState(ft);dt.wrapperElement=lt.wrapper,updateMisc(ft,dt)},[lt.wrapper,ft]),null}class VideoErrorBoundary extends reactExports.Component{constructor(ft){super(ft),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(ft,dt){if(console.error("Render error caught",ft,dt),ft instanceof Error){const vt=ft;this.setState(Et=>({...Et,hasError:!0,error:{name:vt.name,description:vt.message,path:dt.componentStack.split(`
`)[1]}}))}}render(){return this.state.hasError?jsxs("div",{className:"absolute inset-0 bg-denim-100",children:[jsx("div",{className:"pointer-events-auto absolute inset-x-0 top-0 flex flex-col py-6 px-8 pb-2",children:jsx(VideoPlayerHeader,{media:this.props.media,onClick:this.props.onGoBack})}),jsx(ErrorMessage,{error:this.state.error,localSize:!0,children:jsxs(Trans,{i18nKey:"videoPlayer.errors.fatalError",children:[jsx(Link,{url:conf().DISCORD_LINK,newTab:!0}),jsx(Link,{url:conf().GITHUB_LINK,newTab:!0})]})})]}):this.props.children}}function MetaAction(){const lt=useVideoPlayerDescriptor(),ft=useMeta(lt),dt=useProgress(lt);return reactExports.useEffect(()=>(window.meta||(window.meta={}),ft&&(window.meta[lt]={meta:ft.meta,captions:ft.captions,seasons:ft.seasons,episode:ft.episode,progress:{time:dt.time,duration:dt.duration}}),()=>{window.meta&&delete window.meta[lt]}),[ft,lt,dt]),null}var hlsExports={},hls={get exports(){return hlsExports},set exports(lt){hlsExports=lt}};(function(lt,ft){typeof window<"u"&&function(vt,Et){lt.exports=Et()}(commonjsGlobal$1,()=>(()=>{var dt={"./src/config.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{enableStreamingMode:()=>mr,hlsDefaultConfig:()=>lr,mergeConfig:()=>ur});var Rt=Ct("./src/controller/abr-controller.ts"),Dt=Ct("./src/controller/audio-stream-controller.ts"),kt=Ct("./src/controller/audio-track-controller.ts"),Nt=Ct("./src/controller/subtitle-stream-controller.ts"),zt=Ct("./src/controller/subtitle-track-controller.ts"),Wt=Ct("./src/controller/buffer-controller.ts"),nr=Ct("./src/controller/timeline-controller.ts"),Ut=Ct("./src/controller/cap-level-controller.ts"),Ht=Ct("./src/controller/fps-controller.ts"),Bt=Ct("./src/controller/eme-controller.ts"),Ft=Ct("./src/controller/cmcd-controller.ts"),tr=Ct("./src/utils/xhr-loader.ts"),cr=Ct("./src/utils/fetch-loader.ts"),Kt=Ct("./src/utils/cues.ts"),Zt=Ct("./src/utils/mediakeys-helper.ts"),rr=Ct("./src/utils/logger.ts");function ar(){return ar=Object.assign?Object.assign.bind():function(ir){for(var _r=1;_r<arguments.length;_r++){var yr=arguments[_r];for(var gr in yr)Object.prototype.hasOwnProperty.call(yr,gr)&&(ir[gr]=yr[gr])}return ir},ar.apply(this,arguments)}function sr(ir,_r){var yr=Object.keys(ir);if(Object.getOwnPropertySymbols){var gr=Object.getOwnPropertySymbols(ir);_r&&(gr=gr.filter(function(Sr){return Object.getOwnPropertyDescriptor(ir,Sr).enumerable})),yr.push.apply(yr,gr)}return yr}function dr(ir){for(var _r=1;_r<arguments.length;_r++){var yr=arguments[_r]!=null?arguments[_r]:{};_r%2?sr(Object(yr),!0).forEach(function(gr){fr(ir,gr,yr[gr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ir,Object.getOwnPropertyDescriptors(yr)):sr(Object(yr)).forEach(function(gr){Object.defineProperty(ir,gr,Object.getOwnPropertyDescriptor(yr,gr))})}return ir}function fr(ir,_r,yr){return _r=pr(_r),_r in ir?Object.defineProperty(ir,_r,{value:yr,enumerable:!0,configurable:!0,writable:!0}):ir[_r]=yr,ir}function pr(ir){var _r=xr(ir,"string");return typeof _r=="symbol"?_r:String(_r)}function xr(ir,_r){if(typeof ir!="object"||ir===null)return ir;var yr=ir[Symbol.toPrimitive];if(yr!==void 0){var gr=yr.call(ir,_r||"default");if(typeof gr!="object")return gr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_r==="string"?String:Number)(ir)}var lr=dr(dr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:tr.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Rt.default,bufferController:Wt.default,capLevelController:Ut.default,fpsController:Ht.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Zt.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},hr()),{},{subtitleStreamController:Nt.SubtitleStreamController,subtitleTrackController:zt.default,timelineController:nr.TimelineController,audioStreamController:Dt.default,audioTrackController:kt.default,emeController:Bt.default,cmcdController:Ft.default});function hr(){return{cueHandler:Kt.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function ur(ir,_r){if((_r.liveSyncDurationCount||_r.liveMaxLatencyDurationCount)&&(_r.liveSyncDuration||_r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(_r.liveMaxLatencyDurationCount!==void 0&&(_r.liveSyncDurationCount===void 0||_r.liveMaxLatencyDurationCount<=_r.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(_r.liveMaxLatencyDuration!==void 0&&(_r.liveSyncDuration===void 0||_r.liveMaxLatencyDuration<=_r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return ar({},ir,_r)}function mr(ir){var _r=ir.loader;if(_r!==cr.default&&_r!==tr.default)rr.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),ir.progressive=!1;else{var yr=(0,cr.fetchSupported)();yr&&(ir.loader=cr.default,ir.progressive=!0,ir.enableSoftwareAES=!0,rr.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}}},"./src/controller/abr-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>tr});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/utils/ewma-bandwidth-estimator.ts"),kt=Ct("./src/events.ts"),Nt=Ct("./src/errors.ts"),zt=Ct("./src/types/loader.ts"),Wt=Ct("./src/utils/logger.ts");function nr(cr,Kt){for(var Zt=0;Zt<Kt.length;Zt++){var rr=Kt[Zt];rr.enumerable=rr.enumerable||!1,rr.configurable=!0,"value"in rr&&(rr.writable=!0),Object.defineProperty(cr,Ht(rr.key),rr)}}function Ut(cr,Kt,Zt){return Kt&&nr(cr.prototype,Kt),Zt&&nr(cr,Zt),Object.defineProperty(cr,"prototype",{writable:!1}),cr}function Ht(cr){var Kt=Bt(cr,"string");return typeof Kt=="symbol"?Kt:String(Kt)}function Bt(cr,Kt){if(typeof cr!="object"||cr===null)return cr;var Zt=cr[Symbol.toPrimitive];if(Zt!==void 0){var rr=Zt.call(cr,Kt||"default");if(typeof rr!="object")return rr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Kt==="string"?String:Number)(cr)}var Ft=function(){function cr(Zt){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=Zt;var rr=Zt.config;this.bwEstimator=new Dt.default(rr.abrEwmaSlowVoD,rr.abrEwmaFastVoD,rr.abrEwmaDefaultEstimate),this.registerListeners()}var Kt=cr.prototype;return Kt.registerListeners=function(){var rr=this.hls;rr.on(kt.Events.FRAG_LOADING,this.onFragLoading,this),rr.on(kt.Events.FRAG_LOADED,this.onFragLoaded,this),rr.on(kt.Events.FRAG_BUFFERED,this.onFragBuffered,this),rr.on(kt.Events.LEVEL_LOADED,this.onLevelLoaded,this),rr.on(kt.Events.ERROR,this.onError,this)},Kt.unregisterListeners=function(){var rr=this.hls;rr.off(kt.Events.FRAG_LOADING,this.onFragLoading,this),rr.off(kt.Events.FRAG_LOADED,this.onFragLoaded,this),rr.off(kt.Events.FRAG_BUFFERED,this.onFragBuffered,this),rr.off(kt.Events.LEVEL_LOADED,this.onLevelLoaded,this),rr.off(kt.Events.ERROR,this.onError,this)},Kt.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},Kt.onFragLoading=function(rr,ar){var sr=ar.frag;if(sr.type===zt.PlaylistLevelType.MAIN&&!this.timer){var dr;this.fragCurrent=sr,this.partCurrent=(dr=ar.part)!=null?dr:null,this.timer=self.setInterval(this.onCheck,100)}},Kt.onLevelLoaded=function(rr,ar){var sr=this.hls.config;ar.details.live?this.bwEstimator.update(sr.abrEwmaSlowLive,sr.abrEwmaFastLive):this.bwEstimator.update(sr.abrEwmaSlowVoD,sr.abrEwmaFastVoD)},Kt._abandonRulesCheck=function(){var rr=this.fragCurrent,ar=this.partCurrent,sr=this.hls,dr=sr.autoLevelEnabled,fr=sr.media;if(!(!rr||!fr)){var pr=ar?ar.stats:rr.stats,xr=ar?ar.duration:rr.duration;if(pr.aborted||pr.loaded&&pr.loaded===pr.total||rr.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!(!dr||fr.paused||!fr.playbackRate||!fr.readyState)){var lr=sr.mainForwardBufferInfo;if(lr!==null){var hr=performance.now()-pr.loading.start,ur=Math.abs(fr.playbackRate);if(!(hr<=500*xr/ur)){var mr=pr.loaded&&pr.loading.first,ir=this.bwEstimator.getEstimate(),_r=sr.levels,yr=sr.minAutoLevel,gr=_r[rr.level],Sr=pr.total||Math.max(pr.loaded,Math.round(xr*gr.maxBitrate/8)),Tr=mr?pr.loaded*1e3/hr:0,br=Tr?(Sr-pr.loaded)/Tr:Sr*8/ir,Ar=lr.len/ur;if(!(br<=Ar)){var Or=Number.POSITIVE_INFINITY,Ir;for(Ir=rr.level-1;Ir>yr;Ir--){var Cr=_r[Ir].maxBitrate;if(Or=Tr?xr*Cr/(8*.8*Tr):xr*Cr/ir,Or<Ar)break}Or>=br||(Wt.logger.warn("Fragment "+rr.sn+(ar?" part "+ar.index:"")+" of level "+rr.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+Ir+`
      Current BW estimate: `+((0,Rt.isFiniteNumber)(ir)?(ir/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+br.toFixed(3)+` s
      Estimated load time for the next fragment: `+Or.toFixed(3)+` s
      Time to underbuffer: `+Ar.toFixed(3)+" s"),sr.nextLoadLevel=Ir,mr&&this.bwEstimator.sample(hr,pr.loaded),this.clearTimer(),(rr.loader||rr.keyLoader)&&(this.fragCurrent=this.partCurrent=null,rr.abortRequests()),sr.trigger(kt.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:rr,part:ar,stats:pr}))}}}}}},Kt.onFragLoaded=function(rr,ar){var sr=ar.frag,dr=ar.part;if(sr.type===zt.PlaylistLevelType.MAIN&&(0,Rt.isFiniteNumber)(sr.sn)){var fr=dr?dr.stats:sr.stats,pr=dr?dr.duration:sr.duration;if(this.clearTimer(),this.lastLoadedFragLevel=sr.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var xr=this.hls.levels[sr.level],lr=(xr.loaded?xr.loaded.bytes:0)+fr.loaded,hr=(xr.loaded?xr.loaded.duration:0)+pr;xr.loaded={bytes:lr,duration:hr},xr.realBitrate=Math.round(8*lr/hr)}if(sr.bitrateTest){var ur={stats:fr,frag:sr,part:dr,id:sr.type};this.onFragBuffered(kt.Events.FRAG_BUFFERED,ur)}}},Kt.onFragBuffered=function(rr,ar){var sr=ar.frag,dr=ar.part,fr=dr?dr.stats:sr.stats;if(!fr.aborted&&!(sr.type!==zt.PlaylistLevelType.MAIN||sr.sn==="initSegment")){var pr=fr.parsing.end-fr.loading.start;this.bwEstimator.sample(pr,fr.loaded),fr.bwEstimate=this.bwEstimator.getEstimate(),sr.bitrateTest?this.bitrateTestDelay=pr/1e3:this.bitrateTestDelay=0}},Kt.onError=function(rr,ar){var sr;if(((sr=ar.frag)===null||sr===void 0?void 0:sr.type)===zt.PlaylistLevelType.MAIN){if(ar.type===Nt.ErrorTypes.KEY_SYSTEM_ERROR){this.clearTimer();return}switch(ar.details){case Nt.ErrorDetails.FRAG_LOAD_ERROR:case Nt.ErrorDetails.FRAG_LOAD_TIMEOUT:case Nt.ErrorDetails.KEY_LOAD_ERROR:case Nt.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer();break}}},Kt.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},Kt.getNextABRAutoLevel=function(){var rr=this.fragCurrent,ar=this.partCurrent,sr=this.hls,dr=sr.maxAutoLevel,fr=sr.config,pr=sr.minAutoLevel,xr=sr.media,lr=ar?ar.duration:rr?rr.duration:0,hr=xr&&xr.playbackRate!==0?Math.abs(xr.playbackRate):1,ur=this.bwEstimator?this.bwEstimator.getEstimate():fr.abrEwmaDefaultEstimate,mr=sr.mainForwardBufferInfo,ir=(mr?mr.len:0)/hr,_r=this.findBestLevel(ur,pr,dr,ir,fr.abrBandWidthFactor,fr.abrBandWidthUpFactor);if(_r>=0)return _r;Wt.logger.trace((ir?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var yr=lr?Math.min(lr,fr.maxStarvationDelay):fr.maxStarvationDelay,gr=fr.abrBandWidthFactor,Sr=fr.abrBandWidthUpFactor;if(!ir){var Tr=this.bitrateTestDelay;if(Tr){var br=lr?Math.min(lr,fr.maxLoadingDelay):fr.maxLoadingDelay;yr=br-Tr,Wt.logger.trace("bitrate test took "+Math.round(1e3*Tr)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*yr)+" ms"),gr=Sr=1}}return _r=this.findBestLevel(ur,pr,dr,ir+yr,gr,Sr),Math.max(_r,0)},Kt.findBestLevel=function(rr,ar,sr,dr,fr,pr){for(var xr,lr=this.fragCurrent,hr=this.partCurrent,ur=this.lastLoadedFragLevel,mr=this.hls.levels,ir=mr[ur],_r=!!(ir!=null&&(xr=ir.details)!==null&&xr!==void 0&&xr.live),yr=ir==null?void 0:ir.codecSet,gr=hr?hr.duration:lr?lr.duration:0,Sr=sr;Sr>=ar;Sr--){var Tr=mr[Sr];if(!(!Tr||yr&&Tr.codecSet!==yr)){var br=Tr.details,Ar=(hr?br==null?void 0:br.partTarget:br==null?void 0:br.averagetargetduration)||gr,Or=void 0;Sr<=ur?Or=fr*rr:Or=pr*rr;var Ir=mr[Sr].maxBitrate,Cr=Ir*Ar/Or;if(Wt.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+Sr+"/"+Math.round(Or)+"/"+Ir+"/"+Ar+"/"+dr+"/"+Cr),Or>Ir&&(Cr===0||!(0,Rt.isFiniteNumber)(Cr)||_r&&!this.bitrateTestDelay||Cr<dr))return Sr}}return-1},Ut(cr,[{key:"nextAutoLevel",get:function(){var rr=this._nextAutoLevel,ar=this.bwEstimator;if(rr!==-1&&!ar.canEstimate())return rr;var sr=this.getNextABRAutoLevel();return rr!==-1&&this.hls.levels[sr].loadError?rr:(rr!==-1&&(sr=Math.min(rr,sr)),sr)},set:function(rr){this._nextAutoLevel=rr}}]),cr}();const tr=Ft},"./src/controller/audio-stream-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>fr});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/controller/base-stream-controller.ts"),kt=Ct("./src/events.ts"),Nt=Ct("./src/utils/buffer-helper.ts"),zt=Ct("./src/controller/fragment-tracker.ts"),Wt=Ct("./src/types/level.ts"),nr=Ct("./src/types/loader.ts"),Ut=Ct("./src/loader/fragment.ts"),Ht=Ct("./src/demux/chunk-cache.ts"),Bt=Ct("./src/demux/transmuxer-interface.ts"),Ft=Ct("./src/types/transmuxer.ts"),tr=Ct("./src/controller/fragment-finders.ts"),cr=Ct("./src/utils/discontinuities.ts"),Kt=Ct("./src/errors.ts");function Zt(){return Zt=Object.assign?Object.assign.bind():function(pr){for(var xr=1;xr<arguments.length;xr++){var lr=arguments[xr];for(var hr in lr)Object.prototype.hasOwnProperty.call(lr,hr)&&(pr[hr]=lr[hr])}return pr},Zt.apply(this,arguments)}function rr(pr,xr){pr.prototype=Object.create(xr.prototype),pr.prototype.constructor=pr,ar(pr,xr)}function ar(pr,xr){return ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(hr,ur){return hr.__proto__=ur,hr},ar(pr,xr)}var sr=100,dr=function(pr){rr(xr,pr);function xr(hr,ur,mr){var ir;return ir=pr.call(this,hr,ur,mr,"[audio-stream-controller]")||this,ir.videoBuffer=null,ir.videoTrackCC=-1,ir.waitingVideoCC=-1,ir.audioSwitch=!1,ir.trackId=-1,ir.waitingData=null,ir.mainDetails=null,ir.bufferFlushed=!1,ir.cachedTrackLoadedData=null,ir._registerListeners(),ir}var lr=xr.prototype;return lr.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},lr._registerListeners=function(){var ur=this.hls;ur.on(kt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),ur.on(kt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),ur.on(kt.Events.MANIFEST_LOADING,this.onManifestLoading,this),ur.on(kt.Events.LEVEL_LOADED,this.onLevelLoaded,this),ur.on(kt.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),ur.on(kt.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),ur.on(kt.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),ur.on(kt.Events.ERROR,this.onError,this),ur.on(kt.Events.BUFFER_RESET,this.onBufferReset,this),ur.on(kt.Events.BUFFER_CREATED,this.onBufferCreated,this),ur.on(kt.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),ur.on(kt.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),ur.on(kt.Events.FRAG_BUFFERED,this.onFragBuffered,this)},lr._unregisterListeners=function(){var ur=this.hls;ur.off(kt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),ur.off(kt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),ur.off(kt.Events.MANIFEST_LOADING,this.onManifestLoading,this),ur.off(kt.Events.LEVEL_LOADED,this.onLevelLoaded,this),ur.off(kt.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),ur.off(kt.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),ur.off(kt.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),ur.off(kt.Events.ERROR,this.onError,this),ur.off(kt.Events.BUFFER_RESET,this.onBufferReset,this),ur.off(kt.Events.BUFFER_CREATED,this.onBufferCreated,this),ur.off(kt.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),ur.off(kt.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),ur.off(kt.Events.FRAG_BUFFERED,this.onFragBuffered,this)},lr.onInitPtsFound=function(ur,mr){var ir=mr.frag,_r=mr.id,yr=mr.initPTS;if(_r==="main"){var gr=ir.cc;this.initPTS[ir.cc]=yr,this.log("InitPTS for cc: "+gr+" found from main: "+yr),this.videoTrackCC=gr,this.state===Dt.State.WAITING_INIT_PTS&&this.tick()}},lr.startLoad=function(ur){if(!this.levels){this.startPosition=ur,this.state=Dt.State.STOPPED;return}var mr=this.lastCurrentTime;this.stopLoad(),this.setInterval(sr),this.fragLoadError=0,mr>0&&ur===-1?(this.log("Override startPosition with lastCurrentTime @"+mr.toFixed(3)),ur=mr,this.state=Dt.State.IDLE):(this.loadedmetadata=!1,this.state=Dt.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=ur,this.tick()},lr.doTick=function(){switch(this.state){case Dt.State.IDLE:this.doTickIdle();break;case Dt.State.WAITING_TRACK:{var ur,mr=this.levels,ir=this.trackId,_r=mr==null||(ur=mr[ir])===null||ur===void 0?void 0:ur.details;if(_r){if(this.waitForCdnTuneIn(_r))break;this.state=Dt.State.WAITING_INIT_PTS}break}case Dt.State.FRAG_LOADING_WAITING_RETRY:{var yr,gr=performance.now(),Sr=this.retryDate;(!Sr||gr>=Sr||(yr=this.media)!==null&&yr!==void 0&&yr.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=Dt.State.IDLE);break}case Dt.State.WAITING_INIT_PTS:{var Tr=this.waitingData;if(Tr){var br=Tr.frag,Ar=Tr.part,Or=Tr.cache,Ir=Tr.complete;if(this.initPTS[br.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=Dt.State.FRAG_LOADING;var Cr=Or.flush(),Rr={frag:br,part:Ar,payload:Cr,networkDetails:null};this._handleFragmentLoadProgress(Rr),Ir&&pr.prototype._handleFragmentLoadComplete.call(this,Rr)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+br.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var Pr=this.getLoadPosition(),wr=Nt.BufferHelper.bufferInfo(this.mediaBuffer,Pr,this.config.maxBufferHole),Dr=(0,tr.fragmentWithinToleranceTest)(wr.end,this.config.maxFragLookUpTolerance,br);Dr<0&&(this.log("Waiting fragment cc ("+br.cc+") @ "+br.start+" cancelled because another fragment at "+wr.end+" is needed"),this.clearWaitingFragment())}}else this.state=Dt.State.IDLE}}this.onTickEnd()},lr.clearWaitingFragment=function(){var ur=this.waitingData;ur&&(this.fragmentTracker.removeFragment(ur.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Dt.State.IDLE)},lr.resetLoadingState=function(){this.clearWaitingFragment(),pr.prototype.resetLoadingState.call(this)},lr.onTickEnd=function(){var ur=this.media;!ur||!ur.readyState||(this.lastCurrentTime=ur.currentTime)},lr.doTickIdle=function(){var ur=this.hls,mr=this.levels,ir=this.media,_r=this.trackId,yr=ur.config;if(!(!mr||!mr[_r])&&!(!ir&&(this.startFragRequested||!yr.startFragPrefetch))){var gr=mr[_r],Sr=gr.details;if(!Sr||Sr.live&&this.levelLastLoaded!==_r||this.waitForCdnTuneIn(Sr)){this.state=Dt.State.WAITING_TRACK;return}var Tr=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&Tr&&(this.bufferFlushed=!1,this.afterBufferFlushed(Tr,Ut.ElementaryStreamTypes.AUDIO,nr.PlaylistLevelType.AUDIO));var br=this.getFwdBufferInfo(Tr,nr.PlaylistLevelType.AUDIO);if(br!==null){var Ar=this.audioSwitch;if(!Ar&&this._streamEnded(br,Sr)){ur.trigger(kt.Events.BUFFER_EOS,{type:"audio"}),this.state=Dt.State.ENDED;return}var Or=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,nr.PlaylistLevelType.MAIN),Ir=br.len,Cr=this.getMaxBufferLength(Or==null?void 0:Or.len);if(!(Ir>=Cr&&!Ar)){var Rr=Sr.fragments,Pr=Rr[0].start,wr=br.end;if(Ar&&ir){var Dr=this.getLoadPosition();wr=Dr,Sr.PTSKnown&&Dr<Pr&&(br.end>Pr||br.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),ir.currentTime=Pr+.05)}if(!(Or&&wr>Or.end+Sr.targetduration)&&!((!Or||!Or.len)&&br.len)){var kr=this.getNextFragment(wr,Sr);if(!kr){this.bufferFlushed=!0;return}this.loadFragment(kr,Sr,wr)}}}}},lr.getMaxBufferLength=function(ur){var mr=pr.prototype.getMaxBufferLength.call(this);return ur?Math.max(mr,ur):mr},lr.onMediaDetaching=function(){this.videoBuffer=null,pr.prototype.onMediaDetaching.call(this)},lr.onAudioTracksUpdated=function(ur,mr){var ir=mr.audioTracks;this.resetTransmuxer(),this.levels=ir.map(function(_r){return new Wt.Level(_r)})},lr.onAudioTrackSwitching=function(ur,mr){var ir=!!mr.url;this.trackId=mr.id;var _r=this.fragCurrent;_r&&_r.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),ir?this.setInterval(sr):this.resetTransmuxer(),ir?(this.audioSwitch=!0,this.state=Dt.State.IDLE):this.state=Dt.State.STOPPED,this.tick()},lr.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},lr.onLevelLoaded=function(ur,mr){this.mainDetails=mr.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(kt.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},lr.onAudioTrackLoaded=function(ur,mr){var ir;if(this.mainDetails==null){this.cachedTrackLoadedData=mr;return}var _r=this.levels,yr=mr.details,gr=mr.id;if(!_r){this.warn("Audio tracks were reset while loading level "+gr);return}this.log("Track "+gr+" loaded ["+yr.startSN+","+yr.endSN+"],duration:"+yr.totalduration);var Sr=_r[gr],Tr=0;if(yr.live||(ir=Sr.details)!==null&&ir!==void 0&&ir.live){var br=this.mainDetails;if(yr.fragments[0]||(yr.deltaUpdateFailed=!0),yr.deltaUpdateFailed||!br)return;!Sr.details&&yr.hasProgramDateTime&&br.hasProgramDateTime?((0,cr.alignMediaPlaylistByPDT)(yr,br),Tr=yr.fragments[0].start):Tr=this.alignPlaylists(yr,Sr.details)}Sr.details=yr,this.levelLastLoaded=gr,!this.startFragRequested&&(this.mainDetails||!yr.live)&&this.setStartPosition(Sr.details,Tr),this.state===Dt.State.WAITING_TRACK&&!this.waitForCdnTuneIn(yr)&&(this.state=Dt.State.IDLE),this.tick()},lr._handleFragmentLoadProgress=function(ur){var mr,ir=ur.frag,_r=ur.part,yr=ur.payload,gr=this.config,Sr=this.trackId,Tr=this.levels;if(!Tr){this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+ir.sn+" of level "+ir.level+" will not be buffered");return}var br=Tr[Sr];console.assert(br,"Audio track is defined on fragment load progress");var Ar=br.details;console.assert(Ar,"Audio track details are defined on fragment load progress");var Or=gr.defaultAudioCodec||br.audioCodec||"mp4a.40.2",Ir=this.transmuxer;Ir||(Ir=this.transmuxer=new Bt.default(this.hls,nr.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var Cr=this.initPTS[ir.cc],Rr=(mr=ir.initSegment)===null||mr===void 0?void 0:mr.data;if(Cr!==void 0){var Pr=!1,wr=_r?_r.index:-1,Dr=wr!==-1,kr=new Ft.ChunkMetadata(ir.level,ir.sn,ir.stats.chunkCount,yr.byteLength,wr,Dr);Ir.push(yr,Rr,Or,"",ir,_r,Ar.totalduration,Pr,kr,Cr)}else{this.log("Unknown video PTS for cc "+ir.cc+", waiting for video PTS before demuxing audio frag "+ir.sn+" of ["+Ar.startSN+" ,"+Ar.endSN+"],track "+Sr);var Fr=this.waitingData=this.waitingData||{frag:ir,part:_r,cache:new Ht.default,complete:!1},Br=Fr.cache;Br.push(new Uint8Array(yr)),this.waitingVideoCC=this.videoTrackCC,this.state=Dt.State.WAITING_INIT_PTS}},lr._handleFragmentLoadComplete=function(ur){if(this.waitingData){this.waitingData.complete=!0;return}pr.prototype._handleFragmentLoadComplete.call(this,ur)},lr.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},lr.onBufferCreated=function(ur,mr){var ir=mr.tracks.audio;ir&&(this.mediaBuffer=ir.buffer||null),mr.tracks.video&&(this.videoBuffer=mr.tracks.video.buffer||null)},lr.onFragBuffered=function(ur,mr){var ir=mr.frag,_r=mr.part;if(ir.type!==nr.PlaylistLevelType.AUDIO){if(!this.loadedmetadata&&ir.type===nr.PlaylistLevelType.MAIN){var yr;(yr=this.videoBuffer||this.media)!==null&&yr!==void 0&&yr.buffered.length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(ir)){this.warn("Fragment "+ir.sn+(_r?" p: "+_r.index:"")+" of level "+ir.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);return}ir.sn!=="initSegment"&&(this.fragPrevious=ir,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(kt.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(ir,_r)},lr.onError=function(ur,mr){if(mr.type===Kt.ErrorTypes.KEY_SYSTEM_ERROR){this.onFragmentOrKeyLoadError(nr.PlaylistLevelType.AUDIO,mr);return}switch(mr.details){case Kt.ErrorDetails.FRAG_LOAD_ERROR:case Kt.ErrorDetails.FRAG_LOAD_TIMEOUT:case Kt.ErrorDetails.FRAG_PARSING_ERROR:case Kt.ErrorDetails.KEY_LOAD_ERROR:case Kt.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(nr.PlaylistLevelType.AUDIO,mr);break;case Kt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case Kt.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==Dt.State.ERROR&&this.state!==Dt.State.STOPPED&&(this.state=mr.fatal?Dt.State.ERROR:Dt.State.IDLE,this.warn(mr.details+" while loading frag, switching to "+this.state+" state"));break;case Kt.ErrorDetails.BUFFER_FULL_ERROR:if(mr.parent==="audio"&&(this.state===Dt.State.PARSING||this.state===Dt.State.PARSED)){var ir=!0,_r=this.getFwdBufferInfo(this.mediaBuffer,nr.PlaylistLevelType.AUDIO);_r&&_r.len>.5&&(ir=!this.reduceMaxBufferLength(_r.len)),ir&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,pr.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}break}},lr.onBufferFlushed=function(ur,mr){var ir=mr.type;ir===Ut.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===Dt.State.ENDED&&(this.state=Dt.State.IDLE))},lr._handleTransmuxComplete=function(ur){var mr,ir="audio",_r=this.hls,yr=ur.remuxResult,gr=ur.chunkMeta,Sr=this.getCurrentContext(gr);if(!Sr){this.warn("The loading context changed while buffering fragment "+gr.sn+" of level "+gr.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(gr.level);return}var Tr=Sr.frag,br=Sr.part,Ar=Sr.level.details,Or=yr.audio,Ir=yr.text,Cr=yr.id3,Rr=yr.initSegment;if(!(this.fragContextChanged(Tr)||!Ar)){if(this.state=Dt.State.PARSING,this.audioSwitch&&Or&&this.completeAudioSwitch(),Rr!=null&&Rr.tracks&&(this._bufferInitSegment(Rr.tracks,Tr,gr),_r.trigger(kt.Events.FRAG_PARSING_INIT_SEGMENT,{frag:Tr,id:ir,tracks:Rr.tracks})),Or){var Pr=Or.startPTS,wr=Or.endPTS,Dr=Or.startDTS,kr=Or.endDTS;br&&(br.elementaryStreams[Ut.ElementaryStreamTypes.AUDIO]={startPTS:Pr,endPTS:wr,startDTS:Dr,endDTS:kr}),Tr.setElementaryStreamInfo(Ut.ElementaryStreamTypes.AUDIO,Pr,wr,Dr,kr),this.bufferFragmentData(Or,Tr,br,gr)}if(Cr!=null&&(mr=Cr.samples)!==null&&mr!==void 0&&mr.length){var Fr=Zt({id:ir,frag:Tr,details:Ar},Cr);_r.trigger(kt.Events.FRAG_PARSING_METADATA,Fr)}if(Ir){var Br=Zt({id:ir,frag:Tr,details:Ar},Ir);_r.trigger(kt.Events.FRAG_PARSING_USERDATA,Br)}}},lr._bufferInitSegment=function(ur,mr,ir){if(this.state===Dt.State.PARSING){ur.video&&delete ur.video;var _r=ur.audio;if(_r){_r.levelCodec=_r.codec,_r.id="audio",this.log("Init audio buffer, container:"+_r.container+", codecs[parsed]=["+_r.codec+"]"),this.hls.trigger(kt.Events.BUFFER_CODECS,ur);var yr=_r.initSegment;if(yr!=null&&yr.byteLength){var gr={type:"audio",frag:mr,part:null,chunkMeta:ir,parent:mr.type,data:yr};this.hls.trigger(kt.Events.BUFFER_APPENDING,gr)}this.tick()}}},lr.loadFragment=function(ur,mr,ir){var _r=this.fragmentTracker.getState(ur);this.fragCurrent=ur,(this.audioSwitch||_r===zt.FragmentState.NOT_LOADED||_r===zt.FragmentState.PARTIAL)&&(ur.sn==="initSegment"?this._loadInitSegment(ur,mr):mr.live&&!(0,Rt.isFiniteNumber)(this.initPTS[ur.cc])?(this.log("Waiting for video PTS in continuity counter "+ur.cc+" of live stream before loading audio fragment "+ur.sn+" of level "+this.trackId),this.state=Dt.State.WAITING_INIT_PTS):(this.startFragRequested=!0,pr.prototype.loadFragment.call(this,ur,mr,ir)))},lr.completeAudioSwitch=function(){var ur=this.hls,mr=this.media,ir=this.trackId;mr&&(this.log("Switching audio track : flushing all audio"),pr.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,ur.trigger(kt.Events.AUDIO_TRACK_SWITCHED,{id:ir})},xr}(Dt.default);const fr=dr},"./src/controller/audio-track-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>tr});var Rt=Ct("./src/events.ts"),Dt=Ct("./src/errors.ts"),kt=Ct("./src/controller/base-playlist-controller.ts"),Nt=Ct("./src/types/loader.ts");function zt(cr,Kt){for(var Zt=0;Zt<Kt.length;Zt++){var rr=Kt[Zt];rr.enumerable=rr.enumerable||!1,rr.configurable=!0,"value"in rr&&(rr.writable=!0),Object.defineProperty(cr,nr(rr.key),rr)}}function Wt(cr,Kt,Zt){return Kt&&zt(cr.prototype,Kt),Zt&&zt(cr,Zt),Object.defineProperty(cr,"prototype",{writable:!1}),cr}function nr(cr){var Kt=Ut(cr,"string");return typeof Kt=="symbol"?Kt:String(Kt)}function Ut(cr,Kt){if(typeof cr!="object"||cr===null)return cr;var Zt=cr[Symbol.toPrimitive];if(Zt!==void 0){var rr=Zt.call(cr,Kt||"default");if(typeof rr!="object")return rr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Kt==="string"?String:Number)(cr)}function Ht(cr,Kt){cr.prototype=Object.create(Kt.prototype),cr.prototype.constructor=cr,Bt(cr,Kt)}function Bt(cr,Kt){return Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rr,ar){return rr.__proto__=ar,rr},Bt(cr,Kt)}var Ft=function(cr){Ht(Kt,cr);function Kt(rr){var ar;return ar=cr.call(this,rr,"[audio-track-controller]")||this,ar.tracks=[],ar.groupId=null,ar.tracksInGroup=[],ar.trackId=-1,ar.trackName="",ar.selectDefaultTrack=!0,ar.registerListeners(),ar}var Zt=Kt.prototype;return Zt.registerListeners=function(){var ar=this.hls;ar.on(Rt.Events.MANIFEST_LOADING,this.onManifestLoading,this),ar.on(Rt.Events.MANIFEST_PARSED,this.onManifestParsed,this),ar.on(Rt.Events.LEVEL_LOADING,this.onLevelLoading,this),ar.on(Rt.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),ar.on(Rt.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),ar.on(Rt.Events.ERROR,this.onError,this)},Zt.unregisterListeners=function(){var ar=this.hls;ar.off(Rt.Events.MANIFEST_LOADING,this.onManifestLoading,this),ar.off(Rt.Events.MANIFEST_PARSED,this.onManifestParsed,this),ar.off(Rt.Events.LEVEL_LOADING,this.onLevelLoading,this),ar.off(Rt.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),ar.off(Rt.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),ar.off(Rt.Events.ERROR,this.onError,this)},Zt.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,cr.prototype.destroy.call(this)},Zt.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},Zt.onManifestParsed=function(ar,sr){this.tracks=sr.audioTracks||[]},Zt.onAudioTrackLoaded=function(ar,sr){var dr=sr.id,fr=sr.details,pr=this.tracksInGroup[dr];if(!pr){this.warn("Invalid audio track id "+dr);return}var xr=pr.details;pr.details=sr.details,this.log("audioTrack "+dr+" loaded ["+fr.startSN+"-"+fr.endSN+"]"),dr===this.trackId&&(this.retryCount=0,this.playlistLoaded(dr,sr,xr))},Zt.onLevelLoading=function(ar,sr){this.switchLevel(sr.level)},Zt.onLevelSwitching=function(ar,sr){this.switchLevel(sr.level)},Zt.switchLevel=function(ar){var sr=this.hls.levels[ar];if(sr!=null&&sr.audioGroupIds){var dr=sr.audioGroupIds[sr.urlId];if(this.groupId!==dr){this.groupId=dr;var fr=this.tracks.filter(function(xr){return!dr||xr.groupId===dr});this.selectDefaultTrack&&!fr.some(function(xr){return xr.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=fr;var pr={audioTracks:fr};this.log("Updating audio tracks, "+fr.length+' track(s) found in "'+dr+'" group-id'),this.hls.trigger(Rt.Events.AUDIO_TRACKS_UPDATED,pr),this.selectInitialTrack()}}},Zt.onError=function(ar,sr){cr.prototype.onError.call(this,ar,sr),!(sr.fatal||!sr.context)&&sr.context.type===Nt.PlaylistContextType.AUDIO_TRACK&&sr.context.id===this.trackId&&sr.context.groupId===this.groupId&&this.retryLoadingOrFail(sr)},Zt.setAudioTrack=function(ar){var sr=this.tracksInGroup;if(ar<0||ar>=sr.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();var dr=sr[this.trackId];this.log("Now switching to audio-track index "+ar);var fr=sr[ar],pr=fr.id,xr=fr.groupId,lr=xr===void 0?"":xr,hr=fr.name,ur=fr.type,mr=fr.url;if(this.trackId=ar,this.trackName=hr,this.selectDefaultTrack=!1,this.hls.trigger(Rt.Events.AUDIO_TRACK_SWITCHING,{id:pr,groupId:lr,name:hr,type:ur,url:mr}),!(fr.details&&!fr.details.live)){var ir=this.switchParams(fr.url,dr==null?void 0:dr.details);this.loadPlaylist(ir)}},Zt.selectInitialTrack=function(){var ar=this.tracksInGroup;console.assert(ar.length,"Initial audio track should be selected when tracks are known");var sr=this.trackName,dr=this.findTrackId(sr)||this.findTrackId();dr!==-1?this.setAudioTrack(dr):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(Rt.Events.ERROR,{type:Dt.ErrorTypes.MEDIA_ERROR,details:Dt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},Zt.findTrackId=function(ar){for(var sr=this.tracksInGroup,dr=0;dr<sr.length;dr++){var fr=sr[dr];if((!this.selectDefaultTrack||fr.default)&&(!ar||ar===fr.name))return fr.id}return-1},Zt.loadPlaylist=function(ar){cr.prototype.loadPlaylist.call(this);var sr=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(sr)){var dr=sr.id,fr=sr.groupId,pr=sr.url;if(ar)try{pr=ar.addDirectives(pr)}catch(xr){this.warn("Could not construct new URL with HLS Delivery Directives: "+xr)}this.log("loading audio-track playlist for id: "+dr),this.clearTimer(),this.hls.trigger(Rt.Events.AUDIO_TRACK_LOADING,{url:pr,id:dr,groupId:fr,deliveryDirectives:ar||null})}},Wt(Kt,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(ar){this.selectDefaultTrack=!1,this.setAudioTrack(ar)}}]),Kt}(kt.default);const tr=Ft},"./src/controller/base-playlist-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>zt});var Rt=Ct("./src/types/level.ts"),Dt=Ct("./src/controller/level-helper.ts"),kt=Ct("./src/utils/logger.ts"),Nt=Ct("./src/errors.ts"),zt=function(){function Wt(Ut,Ht){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=kt.logger.log.bind(kt.logger,Ht+":"),this.warn=kt.logger.warn.bind(kt.logger,Ht+":"),this.hls=Ut}var nr=Wt.prototype;return nr.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},nr.onError=function(Ht,Bt){Bt.fatal&&(Bt.type===Nt.ErrorTypes.NETWORK_ERROR||Bt.type===Nt.ErrorTypes.KEY_SYSTEM_ERROR)&&this.stopLoad()},nr.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},nr.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},nr.stopLoad=function(){this.canLoad=!1,this.clearTimer()},nr.switchParams=function(Ht,Bt){var Ft=Bt==null?void 0:Bt.renditionReports;if(Ft)for(var tr=0;tr<Ft.length;tr++){var cr=Ft[tr],Kt=void 0;try{Kt=new self.URL(cr.URI,Bt.url).href}catch(sr){kt.logger.warn("Could not construct new URL for Rendition Report: "+sr),Kt=cr.URI||""}if(Kt===Ht.slice(-Kt.length)){var Zt=parseInt(cr["LAST-MSN"])||(Bt==null?void 0:Bt.lastPartSn),rr=parseInt(cr["LAST-PART"])||(Bt==null?void 0:Bt.lastPartIndex);if(this.hls.config.lowLatencyMode){var ar=Math.min(Bt.age-Bt.partTarget,Bt.targetduration);rr>=0&&ar>Bt.partTarget&&(rr+=1)}return new Rt.HlsUrlParameters(Zt,rr>=0?rr:void 0,Rt.HlsSkip.No)}}},nr.loadPlaylist=function(Ht){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())},nr.shouldLoadTrack=function(Ht){return this.canLoad&&Ht&&!!Ht.url&&(!Ht.details||Ht.details.live)},nr.playlistLoaded=function(Ht,Bt,Ft){var tr=this,cr=Bt.details,Kt=Bt.stats,Zt=self.performance.now(),rr=Kt.loading.first?Math.max(0,Zt-Kt.loading.first):0;if(cr.advancedDateTime=Date.now()-rr,cr.live||Ft!=null&&Ft.live){if(cr.reloaded(Ft),Ft&&this.log("live playlist "+Ht+" "+(cr.advanced?"REFRESHED "+cr.lastPartSn+"-"+cr.lastPartIndex:"MISSED")),Ft&&cr.fragments.length>0&&(0,Dt.mergeDetails)(Ft,cr),!this.canLoad||!cr.live)return;var ar,sr=void 0,dr=void 0;if(cr.canBlockReload&&cr.endSN&&cr.advanced){var fr=this.hls.config.lowLatencyMode,pr=cr.lastPartSn,xr=cr.endSN,lr=cr.lastPartIndex,hr=lr!==-1,ur=pr===xr,mr=fr?0:lr;hr?(sr=ur?xr+1:pr,dr=ur?mr:lr+1):sr=xr+1;var ir=cr.age,_r=ir+cr.ageHeader,yr=Math.min(_r-cr.partTarget,cr.targetduration*1.5);if(yr>0){if(Ft&&yr>Ft.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+Ft.tuneInGoal+" to: "+yr+" with playlist age: "+cr.age),yr=0;else{var gr=Math.floor(yr/cr.targetduration);if(sr+=gr,dr!==void 0){var Sr=Math.round(yr%cr.targetduration/cr.partTarget);dr+=Sr}this.log("CDN Tune-in age: "+cr.ageHeader+"s last advanced "+ir.toFixed(2)+"s goal: "+yr+" skip sn "+gr+" to part "+dr)}cr.tuneInGoal=yr}if(ar=this.getDeliveryDirectives(cr,Bt.deliveryDirectives,sr,dr),fr||!ur){this.loadPlaylist(ar);return}}else ar=this.getDeliveryDirectives(cr,Bt.deliveryDirectives,sr,dr);var Tr=this.hls.mainForwardBufferInfo,br=Tr?Tr.end-Tr.len:0,Ar=(cr.edge-br)*1e3,Or=(0,Dt.computeReloadInterval)(cr,Ar);cr.updated?Zt>this.requestScheduled+Or&&(this.requestScheduled=Kt.loading.start):this.requestScheduled=-1,sr!==void 0&&cr.canBlockReload?this.requestScheduled=Kt.loading.first+Or-(cr.partTarget*1e3||1e3):this.requestScheduled=(this.requestScheduled===-1?Zt:this.requestScheduled)+Or;var Ir=this.requestScheduled-Zt;Ir=Math.max(0,Ir),this.log("reload live playlist "+Ht+" in "+Math.round(Ir)+" ms"),this.timer=self.setTimeout(function(){return tr.loadPlaylist(ar)},Ir)}else this.clearTimer()},nr.getDeliveryDirectives=function(Ht,Bt,Ft,tr){var cr=(0,Rt.getSkipValue)(Ht,Ft);return Bt!=null&&Bt.skip&&Ht.deltaUpdateFailed&&(Ft=Bt.msn,tr=Bt.part,cr=Rt.HlsSkip.No),new Rt.HlsUrlParameters(Ft,tr,cr)},nr.retryLoadingOrFail=function(Ht){var Bt=this,Ft=this.hls.config,tr=this.retryCount<Ft.levelLoadingMaxRetry;if(tr){var cr;if(this.requestScheduled=-1,this.retryCount++,Ht.details.indexOf("LoadTimeOut")>-1&&(cr=Ht.context)!==null&&cr!==void 0&&cr.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+Ht.details+'"'),this.loadPlaylist();else{var Kt=Math.min(Math.pow(2,this.retryCount)*Ft.levelLoadingRetryDelay,Ft.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return Bt.loadPlaylist()},Kt),this.warn("retry playlist loading #"+this.retryCount+" in "+Kt+' ms after "'+Ht.details+'"')}}else this.warn('cannot recover from error "'+Ht.details+'"'),this.clearTimer(),Ht.fatal=!0;return tr},Wt}()},"./src/controller/base-stream-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{State:()=>hr,default:()=>ur});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/task-loop.ts"),kt=Ct("./src/controller/fragment-tracker.ts"),Nt=Ct("./src/utils/buffer-helper.ts"),zt=Ct("./src/utils/logger.ts"),Wt=Ct("./src/events.ts"),nr=Ct("./src/errors.ts"),Ut=Ct("./src/types/transmuxer.ts"),Ht=Ct("./src/utils/mp4-tools.ts"),Bt=Ct("./src/utils/discontinuities.ts"),Ft=Ct("./src/controller/fragment-finders.ts"),tr=Ct("./src/controller/level-helper.ts"),cr=Ct("./src/loader/fragment-loader.ts"),Kt=Ct("./src/crypt/decrypter.ts"),Zt=Ct("./src/utils/time-ranges.ts"),rr=Ct("./src/types/loader.ts");function ar(mr,ir){for(var _r=0;_r<ir.length;_r++){var yr=ir[_r];yr.enumerable=yr.enumerable||!1,yr.configurable=!0,"value"in yr&&(yr.writable=!0),Object.defineProperty(mr,dr(yr.key),yr)}}function sr(mr,ir,_r){return ir&&ar(mr.prototype,ir),_r&&ar(mr,_r),Object.defineProperty(mr,"prototype",{writable:!1}),mr}function dr(mr){var ir=fr(mr,"string");return typeof ir=="symbol"?ir:String(ir)}function fr(mr,ir){if(typeof mr!="object"||mr===null)return mr;var _r=mr[Symbol.toPrimitive];if(_r!==void 0){var yr=_r.call(mr,ir||"default");if(typeof yr!="object")return yr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ir==="string"?String:Number)(mr)}function pr(mr){if(mr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return mr}function xr(mr,ir){mr.prototype=Object.create(ir.prototype),mr.prototype.constructor=mr,lr(mr,ir)}function lr(mr,ir){return lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(yr,gr){return yr.__proto__=gr,yr},lr(mr,ir)}var hr={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},ur=function(mr){xr(ir,mr);function ir(yr,gr,Sr,Tr){var br;return br=mr.call(this)||this,br.hls=void 0,br.fragPrevious=null,br.fragCurrent=null,br.fragmentTracker=void 0,br.transmuxer=null,br._state=hr.STOPPED,br.media=null,br.mediaBuffer=null,br.config=void 0,br.bitrateTest=!1,br.lastCurrentTime=0,br.nextLoadPosition=0,br.startPosition=0,br.loadedmetadata=!1,br.fragLoadError=0,br.retryDate=0,br.levels=null,br.fragmentLoader=void 0,br.keyLoader=void 0,br.levelLastLoaded=null,br.startFragRequested=!1,br.decrypter=void 0,br.initPTS=[],br.onvseeking=null,br.onvended=null,br.logPrefix="",br.log=void 0,br.warn=void 0,br.logPrefix=Tr,br.log=zt.logger.log.bind(zt.logger,Tr+":"),br.warn=zt.logger.warn.bind(zt.logger,Tr+":"),br.hls=yr,br.fragmentLoader=new cr.default(yr.config),br.keyLoader=Sr,br.fragmentTracker=gr,br.config=yr.config,br.decrypter=new Kt.default(yr.config),yr.on(Wt.Events.LEVEL_SWITCHING,br.onLevelSwitching,pr(br)),br}var _r=ir.prototype;return _r.doTick=function(){this.onTickEnd()},_r.onTickEnd=function(){},_r.startLoad=function(gr){},_r.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var gr=this.fragCurrent;gr&&(gr.abortRequests(),this.fragmentTracker.removeFragment(gr)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=hr.STOPPED},_r._streamEnded=function(gr,Sr){if(Sr.live||gr.nextStart||!gr.end||!this.media)return!1;var Tr=Sr.partList;if(Tr!=null&&Tr.length){var br=Tr[Tr.length-1],Ar=Nt.BufferHelper.isBuffered(this.media,br.start+br.duration/2);return Ar}var Or=Sr.fragments[Sr.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(Or)},_r.getLevelDetails=function(){if(this.levels&&this.levelLastLoaded!==null){var gr;return(gr=this.levels[this.levelLastLoaded])===null||gr===void 0?void 0:gr.details}},_r.onMediaAttached=function(gr,Sr){var Tr=this.media=this.mediaBuffer=Sr.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),Tr.addEventListener("seeking",this.onvseeking),Tr.addEventListener("ended",this.onvended);var br=this.config;this.levels&&br.autoStartLoad&&this.state===hr.STOPPED&&this.startLoad(br.startPosition)},_r.onMediaDetaching=function(){var gr=this.media;gr!=null&&gr.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),gr&&this.onvseeking&&this.onvended&&(gr.removeEventListener("seeking",this.onvseeking),gr.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},_r.onMediaSeeking=function(){var gr=this.config,Sr=this.fragCurrent,Tr=this.media,br=this.mediaBuffer,Ar=this.state,Or=Tr?Tr.currentTime:0,Ir=Nt.BufferHelper.bufferInfo(br||Tr,Or,gr.maxBufferHole);if(this.log("media seeking to "+((0,Rt.isFiniteNumber)(Or)?Or.toFixed(3):Or)+", state: "+Ar),this.state===hr.ENDED)this.resetLoadingState();else if(Sr){var Cr=gr.maxFragLookUpTolerance,Rr=Sr.start-Cr,Pr=Sr.start+Sr.duration+Cr;if(!Ir.len||Pr<Ir.start||Rr>Ir.end){var wr=Or>Pr;(Or<Rr||wr)&&(wr&&Sr.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),Sr.abortRequests()),this.resetLoadingState())}}Tr&&(this.lastCurrentTime=Or),!this.loadedmetadata&&!Ir.len&&(this.nextLoadPosition=this.startPosition=Or),this.tickImmediate()},_r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},_r.onLevelSwitching=function(gr,Sr){this.fragLoadError=0},_r.onHandlerDestroying=function(){this.stopLoad(),mr.prototype.onHandlerDestroying.call(this)},_r.onHandlerDestroyed=function(){this.state=hr.STOPPED,this.hls.off(Wt.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,mr.prototype.onHandlerDestroyed.call(this)},_r.loadFragment=function(gr,Sr,Tr){this._loadFragForPlayback(gr,Sr,Tr)},_r._loadFragForPlayback=function(gr,Sr,Tr){var br=this,Ar=function(Ir){if(br.fragContextChanged(gr)){br.warn("Fragment "+gr.sn+(Ir.part?" p: "+Ir.part.index:"")+" of level "+gr.level+" was dropped during download."),br.fragmentTracker.removeFragment(gr);return}gr.stats.chunkCount++,br._handleFragmentLoadProgress(Ir)};this._doFragLoad(gr,Sr,Tr,Ar).then(function(Or){if(Or){br.fragLoadError=0;var Ir=br.state;if(br.fragContextChanged(gr)){(Ir===hr.FRAG_LOADING||!br.fragCurrent&&Ir===hr.PARSING)&&(br.fragmentTracker.removeFragment(gr),br.state=hr.IDLE);return}"payload"in Or&&(br.log("Loaded fragment "+gr.sn+" of level "+gr.level),br.hls.trigger(Wt.Events.FRAG_LOADED,Or)),br._handleFragmentLoadComplete(Or)}}).catch(function(Or){br.state===hr.STOPPED||br.state===hr.ERROR||(br.warn(Or),br.resetFragmentLoading(gr))})},_r.flushMainBuffer=function(gr,Sr,Tr){if(Tr===void 0&&(Tr=null),!!(gr-Sr)){var br={startOffset:gr,endOffset:Sr,type:Tr};this.fragLoadError=0,this.hls.trigger(Wt.Events.BUFFER_FLUSHING,br)}},_r._loadInitSegment=function(gr,Sr){var Tr=this;this._doFragLoad(gr,Sr).then(function(br){if(!br||Tr.fragContextChanged(gr)||!Tr.levels)throw new Error("init load aborted");return br}).then(function(br){var Ar=Tr.hls,Or=br.payload,Ir=gr.decryptdata;if(Or&&Or.byteLength>0&&Ir&&Ir.key&&Ir.iv&&Ir.method==="AES-128"){var Cr=self.performance.now();return Tr.decrypter.decrypt(new Uint8Array(Or),Ir.key.buffer,Ir.iv.buffer).then(function(Rr){var Pr=self.performance.now();return Ar.trigger(Wt.Events.FRAG_DECRYPTED,{frag:gr,payload:Rr,stats:{tstart:Cr,tdecrypt:Pr}}),br.payload=Rr,br})}return br}).then(function(br){var Ar=Tr.fragCurrent,Or=Tr.hls,Ir=Tr.levels;if(!Ir)throw new Error("init load aborted, missing levels");var Cr=Ir[gr.level].details;console.assert(Cr,"Level details are defined when init segment is loaded");var Rr=gr.stats;Tr.state=hr.IDLE,Tr.fragLoadError=0,gr.data=new Uint8Array(br.payload),Rr.parsing.start=Rr.buffering.start=self.performance.now(),Rr.parsing.end=Rr.buffering.end=self.performance.now(),br.frag===Ar&&Or.trigger(Wt.Events.FRAG_BUFFERED,{stats:Rr,frag:Ar,part:null,id:gr.type}),Tr.tick()}).catch(function(br){Tr.state===hr.STOPPED||Tr.state===hr.ERROR||(Tr.warn(br),Tr.resetFragmentLoading(gr))})},_r.fragContextChanged=function(gr){var Sr=this.fragCurrent;return!gr||!Sr||gr.level!==Sr.level||gr.sn!==Sr.sn||gr.urlId!==Sr.urlId},_r.fragBufferedComplete=function(gr,Sr){var Tr,br,Ar,Or,Ir=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+gr.type+" sn: "+gr.sn+(Sr?" part: "+Sr.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+gr.level+" (frag:["+((Tr=gr.startPTS)!=null?Tr:NaN).toFixed(3)+"-"+((br=gr.endPTS)!=null?br:NaN).toFixed(3)+"] > buffer:"+(Ir?Zt.default.toString(Nt.BufferHelper.getBuffered(Ir)):"(detached)")+")"),this.state=hr.IDLE,Ir&&(!this.loadedmetadata&&gr.type==rr.PlaylistLevelType.MAIN&&Ir.buffered.length&&((Ar=this.fragCurrent)===null||Ar===void 0?void 0:Ar.sn)===((Or=this.fragPrevious)===null||Or===void 0?void 0:Or.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},_r.seekToStartPos=function(){},_r._handleFragmentLoadComplete=function(gr){var Sr=this.transmuxer;if(Sr){var Tr=gr.frag,br=gr.part,Ar=gr.partsLoaded,Or=!Ar||Ar.length===0||Ar.some(function(Cr){return!Cr}),Ir=new Ut.ChunkMetadata(Tr.level,Tr.sn,Tr.stats.chunkCount+1,0,br?br.index:-1,!Or);Sr.flush(Ir)}},_r._handleFragmentLoadProgress=function(gr){},_r._doFragLoad=function(gr,Sr,Tr,br){var Ar,Or=this;if(Tr===void 0&&(Tr=null),!this.levels)throw new Error("frag load aborted, missing levels");var Ir=null;if(gr.encrypted&&!((Ar=gr.decryptdata)!==null&&Ar!==void 0&&Ar.key)?(this.log("Loading key for "+gr.sn+" of ["+Sr.startSN+"-"+Sr.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+gr.level),this.state=hr.KEY_LOADING,this.fragCurrent=gr,Ir=this.keyLoader.load(gr).then(function(Dr){if(!Or.fragContextChanged(Dr.frag))return Or.hls.trigger(Wt.Events.KEY_LOADED,Dr),Or.state===hr.KEY_LOADING&&(Or.state=hr.IDLE),Dr}),this.hls.trigger(Wt.Events.KEY_LOADING,{frag:gr}),this.throwIfFragContextChanged("KEY_LOADING")):!gr.encrypted&&Sr.encryptedFragments.length&&this.keyLoader.loadClear(gr,Sr.encryptedFragments),Tr=Math.max(gr.start,Tr||0),this.config.lowLatencyMode&&Sr){var Cr=Sr.partList;if(Cr&&br){Tr>gr.end&&Sr.fragmentHint&&(gr=Sr.fragmentHint);var Rr=this.getNextPart(Cr,gr,Tr);if(Rr>-1){var Pr=Cr[Rr];return this.log("Loading part sn: "+gr.sn+" p: "+Pr.index+" cc: "+gr.cc+" of playlist ["+Sr.startSN+"-"+Sr.endSN+"] parts [0-"+Rr+"-"+(Cr.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+gr.level+", target: "+parseFloat(Tr.toFixed(3))),this.nextLoadPosition=Pr.start+Pr.duration,this.state=hr.FRAG_LOADING,this.hls.trigger(Wt.Events.FRAG_LOADING,{frag:gr,part:Cr[Rr],targetBufferTime:Tr}),this.throwIfFragContextChanged("FRAG_LOADING parts"),Ir?Ir.then(function(Dr){return!Dr||Or.fragContextChanged(Dr.frag)?null:Or.doFragPartsLoad(gr,Cr,Rr,br)}).catch(function(Dr){return Or.handleFragLoadError(Dr)}):this.doFragPartsLoad(gr,Cr,Rr,br).catch(function(Dr){return Or.handleFragLoadError(Dr)})}else if(!gr.url||this.loadedEndOfParts(Cr,Tr))return Promise.resolve(null)}}this.log("Loading fragment "+gr.sn+" cc: "+gr.cc+" "+(Sr?"of ["+Sr.startSN+"-"+Sr.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+gr.level+", target: "+parseFloat(Tr.toFixed(3))),(0,Rt.isFiniteNumber)(gr.sn)&&!this.bitrateTest&&(this.nextLoadPosition=gr.start+gr.duration),this.state=hr.FRAG_LOADING,this.hls.trigger(Wt.Events.FRAG_LOADING,{frag:gr,targetBufferTime:Tr}),this.throwIfFragContextChanged("FRAG_LOADING");var wr=this.config.progressive;return wr&&Ir?Ir.then(function(Dr){return!Dr||Or.fragContextChanged(Dr==null?void 0:Dr.frag)?null:Or.fragmentLoader.load(gr,br)}).catch(function(Dr){return Or.handleFragLoadError(Dr)}):Promise.all([this.fragmentLoader.load(gr,wr?br:void 0),Ir]).then(function(Dr){var kr=Dr[0];return!wr&&kr&&br&&br(kr),kr}).catch(function(Dr){return Or.handleFragLoadError(Dr)})},_r.throwIfFragContextChanged=function(gr){if(this.fragCurrent===null)throw new Error("frag load aborted, context changed in "+gr)},_r.doFragPartsLoad=function(gr,Sr,Tr,br){var Ar=this;return new Promise(function(Or,Ir){var Cr=[],Rr=function Pr(wr){var Dr=Sr[wr];Ar.fragmentLoader.loadPart(gr,Dr,br).then(function(kr){Cr[Dr.index]=kr;var Fr=kr.part;Ar.hls.trigger(Wt.Events.FRAG_LOADED,kr);var Br=Sr[wr+1];if(Br&&Br.fragment===gr)Pr(wr+1);else return Or({frag:gr,part:Fr,partsLoaded:Cr})}).catch(Ir)};Rr(Tr)})},_r.handleFragLoadError=function(gr){if("data"in gr){var Sr=gr.data;gr.data&&Sr.details===nr.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(Sr.frag,Sr.part):this.hls.trigger(Wt.Events.ERROR,Sr)}else this.hls.trigger(Wt.Events.ERROR,{type:nr.ErrorTypes.OTHER_ERROR,details:nr.ErrorDetails.INTERNAL_EXCEPTION,err:gr,fatal:!0});return null},_r._handleTransmuxerFlush=function(gr){var Sr=this.getCurrentContext(gr);if(!Sr||this.state!==hr.PARSING){!this.fragCurrent&&this.state!==hr.STOPPED&&this.state!==hr.ERROR&&(this.state=hr.IDLE);return}var Tr=Sr.frag,br=Sr.part,Ar=Sr.level,Or=self.performance.now();Tr.stats.parsing.end=Or,br&&(br.stats.parsing.end=Or),this.updateLevelTiming(Tr,br,Ar,gr.partial)},_r.getCurrentContext=function(gr){var Sr=this.levels,Tr=gr.level,br=gr.sn,Ar=gr.part;if(!Sr||!Sr[Tr])return this.warn("Levels object was unset while buffering fragment "+br+" of level "+Tr+". The current chunk will not be buffered."),null;var Or=Sr[Tr],Ir=Ar>-1?(0,tr.getPartWith)(Or,br,Ar):null,Cr=Ir?Ir.fragment:(0,tr.getFragmentWithSN)(Or,br,this.fragCurrent);return Cr?{frag:Cr,part:Ir,level:Or}:null},_r.bufferFragmentData=function(gr,Sr,Tr,br){if(!(!gr||this.state!==hr.PARSING)){var Ar=gr.data1,Or=gr.data2,Ir=Ar;if(Ar&&Or&&(Ir=(0,Ht.appendUint8Array)(Ar,Or)),!(!Ir||!Ir.length)){var Cr={type:gr.type,frag:Sr,part:Tr,chunkMeta:br,parent:Sr.type,data:Ir};this.hls.trigger(Wt.Events.BUFFER_APPENDING,Cr),gr.dropped&&gr.independent&&!Tr&&this.flushBufferGap(Sr)}}},_r.flushBufferGap=function(gr){var Sr=this.media;if(Sr){if(!Nt.BufferHelper.isBuffered(Sr,Sr.currentTime)){this.flushMainBuffer(0,gr.start);return}var Tr=Sr.currentTime,br=Nt.BufferHelper.bufferInfo(Sr,Tr,0),Ar=gr.duration,Or=Math.min(this.config.maxFragLookUpTolerance*2,Ar*.25),Ir=Math.max(Math.min(gr.start-Or,br.end-Or),Tr+Or);gr.start-Ir>Or&&this.flushMainBuffer(Ir,gr.start)}},_r.getFwdBufferInfo=function(gr,Sr){var Tr=this.config,br=this.getLoadPosition();if(!(0,Rt.isFiniteNumber)(br))return null;var Ar=Nt.BufferHelper.bufferInfo(gr,br,Tr.maxBufferHole);if(Ar.len===0&&Ar.nextStart!==void 0){var Or=this.fragmentTracker.getBufferedFrag(br,Sr);if(Or&&Ar.nextStart<Or.end)return Nt.BufferHelper.bufferInfo(gr,br,Math.max(Ar.nextStart,Tr.maxBufferHole))}return Ar},_r.getMaxBufferLength=function(gr){var Sr=this.config,Tr;return gr?Tr=Math.max(8*Sr.maxBufferSize/gr,Sr.maxBufferLength):Tr=Sr.maxBufferLength,Math.min(Tr,Sr.maxMaxBufferLength)},_r.reduceMaxBufferLength=function(gr){var Sr=this.config,Tr=gr||Sr.maxBufferLength;return Sr.maxMaxBufferLength>=Tr?(Sr.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+Sr.maxMaxBufferLength+"s"),!0):!1},_r.getNextFragment=function(gr,Sr){var Tr=Sr.fragments,br=Tr.length;if(!br)return null;var Ar=this.config,Or=Tr[0].start,Ir;if(Sr.live){var Cr=Ar.initialLiveManifestSize;if(br<Cr)return this.warn("Not enough fragments to start playback (have: "+br+", need: "+Cr+")"),null;!Sr.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(Ir=this.getInitialLiveFragment(Sr,Tr),this.startPosition=Ir?this.hls.liveSyncPosition||Ir.start:gr)}else gr<=Or&&(Ir=Tr[0]);if(!Ir){var Rr=Ar.lowLatencyMode?Sr.partEnd:Sr.fragmentEnd;Ir=this.getFragmentAtPosition(gr,Rr,Sr)}return this.mapToInitFragWhenRequired(Ir)},_r.mapToInitFragWhenRequired=function(gr){return gr!=null&&gr.initSegment&&!(gr!=null&&gr.initSegment.data)&&!this.bitrateTest?gr.initSegment:gr},_r.getNextPart=function(gr,Sr,Tr){for(var br=-1,Ar=!1,Or=!0,Ir=0,Cr=gr.length;Ir<Cr;Ir++){var Rr=gr[Ir];if(Or=Or&&!Rr.independent,br>-1&&Tr<Rr.start)break;var Pr=Rr.loaded;Pr?br=-1:(Ar||Rr.independent||Or)&&Rr.fragment===Sr&&(br=Ir),Ar=Pr}return br},_r.loadedEndOfParts=function(gr,Sr){var Tr=gr[gr.length-1];return Tr&&Sr>Tr.start&&Tr.loaded},_r.getInitialLiveFragment=function(gr,Sr){var Tr=this.fragPrevious,br=null;if(Tr){if(gr.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+Tr.programDateTime),br=(0,Ft.findFragmentByPDT)(Sr,Tr.endProgramDateTime,this.config.maxFragLookUpTolerance)),!br){var Ar=Tr.sn+1;if(Ar>=gr.startSN&&Ar<=gr.endSN){var Or=Sr[Ar-gr.startSN];Tr.cc===Or.cc&&(br=Or,this.log("Live playlist, switching playlist, load frag with next SN: "+br.sn))}br||(br=(0,Ft.findFragWithCC)(Sr,Tr.cc),br&&this.log("Live playlist, switching playlist, load frag with same CC: "+br.sn))}}else{var Ir=this.hls.liveSyncPosition;Ir!==null&&(br=this.getFragmentAtPosition(Ir,this.bitrateTest?gr.fragmentEnd:gr.edge,gr))}return br},_r.getFragmentAtPosition=function(gr,Sr,Tr){var br=this.config,Ar=this.fragPrevious,Or=Tr.fragments,Ir=Tr.endSN,Cr=Tr.fragmentHint,Rr=br.maxFragLookUpTolerance,Pr=!!(br.lowLatencyMode&&Tr.partList&&Cr);Pr&&Cr&&!this.bitrateTest&&(Or=Or.concat(Cr),Ir=Cr.sn);var wr;if(gr<Sr){var Dr=gr>Sr-Rr?0:Rr;wr=(0,Ft.findFragmentByPTS)(Ar,Or,gr,Dr)}else wr=Or[Or.length-1];if(wr){var kr=wr.sn-Tr.startSN;if(this.fragmentTracker.getState(wr)===kt.FragmentState.OK&&(Ar=wr),Ar&&wr.sn===Ar.sn&&!Pr){var Fr=Ar&&wr.level===Ar.level;if(Fr){var Br=Or[kr+1];wr.sn<Ir&&this.fragmentTracker.getState(Br)!==kt.FragmentState.OK?(this.log("SN "+wr.sn+" just loaded, load next one: "+Br.sn),wr=Br):wr=null}}}return wr},_r.synchronizeToLiveEdge=function(gr){var Sr=this.config,Tr=this.media;if(Tr){var br=this.hls.liveSyncPosition,Ar=Tr.currentTime,Or=gr.fragments[0].start,Ir=gr.edge,Cr=Ar>=Or-Sr.maxFragLookUpTolerance&&Ar<=Ir;if(br!==null&&Tr.duration>br&&(Ar<br||!Cr)){var Rr=Sr.liveMaxLatencyDuration!==void 0?Sr.liveMaxLatencyDuration:Sr.liveMaxLatencyDurationCount*gr.targetduration;(!Cr&&Tr.readyState<4||Ar<Ir-Rr)&&(this.loadedmetadata||(this.nextLoadPosition=br),Tr.readyState&&(this.warn("Playback: "+Ar.toFixed(3)+" is located too far from the end of live sliding playlist: "+Ir+", reset currentTime to : "+br.toFixed(3)),Tr.currentTime=br))}}},_r.alignPlaylists=function(gr,Sr){var Tr=this.levels,br=this.levelLastLoaded,Ar=this.fragPrevious,Or=br!==null?Tr[br]:null,Ir=gr.fragments.length;if(!Ir)return this.warn("No fragments in live playlist"),0;var Cr=gr.fragments[0].start,Rr=!Sr,Pr=gr.alignedSliding&&(0,Rt.isFiniteNumber)(Cr);if(Rr||!Pr&&!Cr){(0,Bt.alignStream)(Ar,Or,gr);var wr=gr.fragments[0].start;return this.log("Live playlist sliding: "+wr.toFixed(2)+" start-sn: "+(Sr?Sr.startSN:"na")+"->"+gr.startSN+" prev-sn: "+(Ar?Ar.sn:"na")+" fragments: "+Ir),wr}return Cr},_r.waitForCdnTuneIn=function(gr){var Sr=3;return gr.live&&gr.canBlockReload&&gr.partTarget&&gr.tuneInGoal>Math.max(gr.partHoldBack,gr.partTarget*Sr)},_r.setStartPosition=function(gr,Sr){var Tr=this.startPosition;if(Tr<Sr&&(Tr=-1),Tr===-1||this.lastCurrentTime===-1){var br=gr.startTimeOffset;(0,Rt.isFiniteNumber)(br)?(Tr=Sr+br,br<0&&(Tr+=gr.totalduration),Tr=Math.min(Math.max(Sr,Tr),Sr+gr.totalduration),this.log("Start time offset "+br+" found in playlist, adjust startPosition to "+Tr),this.startPosition=Tr):gr.live?Tr=this.hls.liveSyncPosition||Sr:this.startPosition=Tr=0,this.lastCurrentTime=Tr}this.nextLoadPosition=Tr},_r.getLoadPosition=function(){var gr=this.media,Sr=0;return this.loadedmetadata&&gr?Sr=gr.currentTime:this.nextLoadPosition&&(Sr=this.nextLoadPosition),Sr},_r.handleFragLoadAborted=function(gr,Sr){this.transmuxer&&gr.sn!=="initSegment"&&gr.stats.aborted&&(this.warn("Fragment "+gr.sn+(Sr?" part"+Sr.index:"")+" of level "+gr.level+" was aborted"),this.resetFragmentLoading(gr))},_r.resetFragmentLoading=function(gr){(!this.fragCurrent||!this.fragContextChanged(gr)&&this.state!==hr.FRAG_LOADING_WAITING_RETRY)&&(this.state=hr.IDLE)},_r.onFragmentOrKeyLoadError=function(gr,Sr){if(Sr.fatal){this.stopLoad(),this.state=hr.ERROR;return}var Tr=this.config;if(Sr.chunkMeta){var br=this.getCurrentContext(Sr.chunkMeta);br&&(Sr.frag=br.frag,Sr.levelRetry=!0,this.fragLoadError=Tr.fragLoadingMaxRetry)}var Ar=Sr.frag;if(!(!Ar||Ar.type!==gr)){var Or=this.fragCurrent;if(console.assert(Or&&Ar.sn===Or.sn&&Ar.level===Or.level&&Ar.urlId===Or.urlId,"Frag load error must match current frag to retry"),this.fragLoadError+1<=Tr.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var Ir=Math.min(Math.pow(2,this.fragLoadError)*Tr.fragLoadingRetryDelay,Tr.fragLoadingMaxRetryTimeout);this.warn("Fragment "+Ar.sn+" of "+gr+" "+Ar.level+" failed to load, retrying in "+Ir+"ms"),this.retryDate=self.performance.now()+Ir,this.fragLoadError++,this.state=hr.FRAG_LOADING_WAITING_RETRY}else Sr.levelRetry?(gr===rr.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=hr.IDLE):(zt.logger.error(Sr.details+" reaches max retry, redispatch as fatal ..."),Sr.fatal=!0,this.hls.stopLoad(),this.state=hr.ERROR)}},_r.afterBufferFlushed=function(gr,Sr,Tr){if(gr){var br=Nt.BufferHelper.getBuffered(gr);this.fragmentTracker.detectEvictedFragments(Sr,br,Tr),this.state===hr.ENDED&&this.resetLoadingState()}},_r.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=hr.IDLE},_r.resetStartWhenNotLoaded=function(gr){if(!this.loadedmetadata){this.startFragRequested=!1;var Sr=this.levels?this.levels[gr].details:null;Sr!=null&&Sr.live?(this.startPosition=-1,this.setStartPosition(Sr,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},_r.updateLevelTiming=function(gr,Sr,Tr,br){var Ar=this,Or=Tr.details;console.assert(!!Or,"level.details must be defined");var Ir=Object.keys(gr.elementaryStreams).reduce(function(Cr,Rr){var Pr=gr.elementaryStreams[Rr];if(Pr){var wr=Pr.endPTS-Pr.startPTS;if(wr<=0)return Ar.warn("Could not parse fragment "+gr.sn+" "+Rr+" duration reliably ("+wr+")"),Cr||!1;var Dr=br?0:(0,tr.updateFragPTSDTS)(Or,gr,Pr.startPTS,Pr.endPTS,Pr.startDTS,Pr.endDTS);return Ar.hls.trigger(Wt.Events.LEVEL_PTS_UPDATED,{details:Or,level:Tr,drift:Dr,type:Rr,frag:gr,start:Pr.startPTS,end:Pr.endPTS}),!0}return Cr},!1);Ir||(this.warn("Found no media in fragment "+gr.sn+" of level "+Tr.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=hr.PARSED,this.hls.trigger(Wt.Events.FRAG_PARSED,{frag:gr,part:Sr})},_r.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},sr(ir,[{key:"state",get:function(){return this._state},set:function(gr){var Sr=this._state;Sr!==gr&&(this._state=gr,this.log(Sr+"->"+gr))}}]),ir}(Dt.default)},"./src/controller/buffer-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Ft});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/events.ts"),kt=Ct("./src/utils/logger.ts"),Nt=Ct("./src/errors.ts"),zt=Ct("./src/utils/buffer-helper.ts"),Wt=Ct("./src/utils/mediasource-helper.ts"),nr=Ct("./src/loader/fragment.ts"),Ut=Ct("./src/controller/buffer-operation-queue.ts"),Ht=(0,Wt.getMediaSource)(),Bt=/([ha]vc.)(?:\.[^.,]+)+/,Ft=function(){function tr(Kt){var Zt=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var rr=Zt.media,ar=Zt.mediaSource;kt.logger.log("[buffer-controller]: Media source opened"),rr&&(rr.removeEventListener("emptied",Zt._onMediaEmptied),Zt.updateMediaElementDuration(),Zt.hls.trigger(Dt.Events.MEDIA_ATTACHED,{media:rr})),ar&&ar.removeEventListener("sourceopen",Zt._onMediaSourceOpen),Zt.checkPendingTracks()},this._onMediaSourceClose=function(){kt.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){kt.logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var rr=Zt.media,ar=Zt._objectUrl;rr&&rr.src!==ar&&kt.logger.error("Media element src was set while attaching MediaSource ("+ar+" > "+rr.src+")")},this.hls=Kt,this._initSourceBuffer(),this.registerListeners()}var cr=tr.prototype;return cr.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},cr.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},cr.registerListeners=function(){var Zt=this.hls;Zt.on(Dt.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Zt.on(Dt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),Zt.on(Dt.Events.MANIFEST_PARSED,this.onManifestParsed,this),Zt.on(Dt.Events.BUFFER_RESET,this.onBufferReset,this),Zt.on(Dt.Events.BUFFER_APPENDING,this.onBufferAppending,this),Zt.on(Dt.Events.BUFFER_CODECS,this.onBufferCodecs,this),Zt.on(Dt.Events.BUFFER_EOS,this.onBufferEos,this),Zt.on(Dt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Zt.on(Dt.Events.LEVEL_UPDATED,this.onLevelUpdated,this),Zt.on(Dt.Events.FRAG_PARSED,this.onFragParsed,this),Zt.on(Dt.Events.FRAG_CHANGED,this.onFragChanged,this)},cr.unregisterListeners=function(){var Zt=this.hls;Zt.off(Dt.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Zt.off(Dt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),Zt.off(Dt.Events.MANIFEST_PARSED,this.onManifestParsed,this),Zt.off(Dt.Events.BUFFER_RESET,this.onBufferReset,this),Zt.off(Dt.Events.BUFFER_APPENDING,this.onBufferAppending,this),Zt.off(Dt.Events.BUFFER_CODECS,this.onBufferCodecs,this),Zt.off(Dt.Events.BUFFER_EOS,this.onBufferEos,this),Zt.off(Dt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),Zt.off(Dt.Events.LEVEL_UPDATED,this.onLevelUpdated,this),Zt.off(Dt.Events.FRAG_PARSED,this.onFragParsed,this),Zt.off(Dt.Events.FRAG_CHANGED,this.onFragChanged,this)},cr._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new Ut.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},cr.onManifestParsed=function(Zt,rr){var ar=2;(rr.audio&&!rr.video||!rr.altAudio)&&(ar=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=ar,this.details=null,kt.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},cr.onMediaAttaching=function(Zt,rr){var ar=this.media=rr.media;if(ar&&Ht){var sr=this.mediaSource=new Ht;sr.addEventListener("sourceopen",this._onMediaSourceOpen),sr.addEventListener("sourceended",this._onMediaSourceEnded),sr.addEventListener("sourceclose",this._onMediaSourceClose),ar.src=self.URL.createObjectURL(sr),this._objectUrl=ar.src,ar.addEventListener("emptied",this._onMediaEmptied)}},cr.onMediaDetaching=function(){var Zt=this.media,rr=this.mediaSource,ar=this._objectUrl;if(rr){if(kt.logger.log("[buffer-controller]: media source detaching"),rr.readyState==="open")try{rr.endOfStream()}catch(sr){kt.logger.warn("[buffer-controller]: onMediaDetaching: "+sr.message+" while calling endOfStream")}this.onBufferReset(),rr.removeEventListener("sourceopen",this._onMediaSourceOpen),rr.removeEventListener("sourceended",this._onMediaSourceEnded),rr.removeEventListener("sourceclose",this._onMediaSourceClose),Zt&&(Zt.removeEventListener("emptied",this._onMediaEmptied),ar&&self.URL.revokeObjectURL(ar),Zt.src===ar?(Zt.removeAttribute("src"),Zt.load()):kt.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(Dt.Events.MEDIA_DETACHED,void 0)},cr.onBufferReset=function(){var Zt=this;this.getSourceBufferTypes().forEach(function(rr){var ar=Zt.sourceBuffer[rr];try{ar&&(Zt.removeBufferListeners(rr),Zt.mediaSource&&Zt.mediaSource.removeSourceBuffer(ar),Zt.sourceBuffer[rr]=void 0)}catch(sr){kt.logger.warn("[buffer-controller]: Failed to reset the "+rr+" buffer",sr)}}),this._initSourceBuffer()},cr.onBufferCodecs=function(Zt,rr){var ar=this,sr=this.getSourceBufferTypes().length;Object.keys(rr).forEach(function(dr){if(sr){var fr=ar.tracks[dr];if(fr&&typeof fr.buffer.changeType=="function"){var pr=rr[dr],xr=pr.id,lr=pr.codec,hr=pr.levelCodec,ur=pr.container,mr=pr.metadata,ir=(fr.levelCodec||fr.codec).replace(Bt,"$1"),_r=(hr||lr).replace(Bt,"$1");if(ir!==_r){var yr=ur+";codecs="+(hr||lr);ar.appendChangeType(dr,yr),kt.logger.log("[buffer-controller]: switching codec "+ir+" to "+_r),ar.tracks[dr]={buffer:fr.buffer,codec:lr,container:ur,levelCodec:hr,metadata:mr,id:xr}}}}else ar.pendingTracks[dr]=rr[dr]}),!sr&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},cr.appendChangeType=function(Zt,rr){var ar=this,sr=this.operationQueue,dr={execute:function(){var pr=ar.sourceBuffer[Zt];pr&&(kt.logger.log("[buffer-controller]: changing "+Zt+" sourceBuffer type to "+rr),pr.changeType(rr)),sr.shiftAndExecuteNext(Zt)},onStart:function(){},onComplete:function(){},onError:function(pr){kt.logger.warn("[buffer-controller]: Failed to change "+Zt+" SourceBuffer type",pr)}};sr.append(dr,Zt)},cr.onBufferAppending=function(Zt,rr){var ar=this,sr=this.hls,dr=this.operationQueue,fr=this.tracks,pr=rr.data,xr=rr.type,lr=rr.frag,hr=rr.part,ur=rr.chunkMeta,mr=ur.buffering[xr],ir=self.performance.now();mr.start=ir;var _r=lr.stats.buffering,yr=hr?hr.stats.buffering:null;_r.start===0&&(_r.start=ir),yr&&yr.start===0&&(yr.start=ir);var gr=fr.audio,Sr=!1;xr==="audio"&&(gr==null?void 0:gr.container)==="audio/mpeg"&&(Sr=!this.lastMpegAudioChunk||ur.id===1||this.lastMpegAudioChunk.sn!==ur.sn,this.lastMpegAudioChunk=ur);var Tr=lr.start,br={execute:function(){if(mr.executeStart=self.performance.now(),Sr){var Or=ar.sourceBuffer[xr];if(Or){var Ir=Tr-Or.timestampOffset;Math.abs(Ir)>=.1&&(kt.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+Tr+" (delta: "+Ir+") sn: "+lr.sn+")"),Or.timestampOffset=Tr)}}ar.appendExecutor(pr,xr)},onStart:function(){},onComplete:function(){var Or=self.performance.now();mr.executeEnd=mr.end=Or,_r.first===0&&(_r.first=Or),yr&&yr.first===0&&(yr.first=Or);var Ir=ar.sourceBuffer,Cr={};for(var Rr in Ir)Cr[Rr]=zt.BufferHelper.getBuffered(Ir[Rr]);ar.appendError=0,ar.hls.trigger(Dt.Events.BUFFER_APPENDED,{type:xr,frag:lr,part:hr,chunkMeta:ur,parent:lr.type,timeRanges:Cr})},onError:function(Or){kt.logger.error("[buffer-controller]: Error encountered while trying to append to the "+xr+" SourceBuffer",Or);var Ir={type:Nt.ErrorTypes.MEDIA_ERROR,parent:lr.type,details:Nt.ErrorDetails.BUFFER_APPEND_ERROR,err:Or,fatal:!1};Or.code===DOMException.QUOTA_EXCEEDED_ERR?Ir.details=Nt.ErrorDetails.BUFFER_FULL_ERROR:(ar.appendError++,Ir.details=Nt.ErrorDetails.BUFFER_APPEND_ERROR,ar.appendError>sr.config.appendErrorMaxRetry&&(kt.logger.error("[buffer-controller]: Failed "+sr.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),Ir.fatal=!0,sr.stopLoad())),sr.trigger(Dt.Events.ERROR,Ir)}};dr.append(br,xr)},cr.onBufferFlushing=function(Zt,rr){var ar=this,sr=this.operationQueue,dr=function(pr){return{execute:ar.removeExecutor.bind(ar,pr,rr.startOffset,rr.endOffset),onStart:function(){},onComplete:function(){ar.hls.trigger(Dt.Events.BUFFER_FLUSHED,{type:pr})},onError:function(lr){kt.logger.warn("[buffer-controller]: Failed to remove from "+pr+" SourceBuffer",lr)}}};rr.type?sr.append(dr(rr.type),rr.type):this.getSourceBufferTypes().forEach(function(fr){sr.append(dr(fr),fr)})},cr.onFragParsed=function(Zt,rr){var ar=this,sr=rr.frag,dr=rr.part,fr=[],pr=dr?dr.elementaryStreams:sr.elementaryStreams;pr[nr.ElementaryStreamTypes.AUDIOVIDEO]?fr.push("audiovideo"):(pr[nr.ElementaryStreamTypes.AUDIO]&&fr.push("audio"),pr[nr.ElementaryStreamTypes.VIDEO]&&fr.push("video"));var xr=function(){var hr=self.performance.now();sr.stats.buffering.end=hr,dr&&(dr.stats.buffering.end=hr);var ur=dr?dr.stats:sr.stats;ar.hls.trigger(Dt.Events.FRAG_BUFFERED,{frag:sr,part:dr,stats:ur,id:sr.type})};fr.length===0&&kt.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+sr.type+" level: "+sr.level+" sn: "+sr.sn),this.blockBuffers(xr,fr)},cr.onFragChanged=function(Zt,rr){this.flushBackBuffer()},cr.onBufferEos=function(Zt,rr){var ar=this,sr=this.getSourceBufferTypes().reduce(function(dr,fr){var pr=ar.sourceBuffer[fr];return pr&&(!rr.type||rr.type===fr)&&(pr.ending=!0,pr.ended||(pr.ended=!0,kt.logger.log("[buffer-controller]: "+fr+" sourceBuffer now EOS"))),dr&&!!(!pr||pr.ended)},!0);sr&&(kt.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){ar.getSourceBufferTypes().forEach(function(fr){var pr=ar.sourceBuffer[fr];pr&&(pr.ending=!1)});var dr=ar.mediaSource;if(!dr||dr.readyState!=="open"){dr&&kt.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+dr.readyState);return}kt.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),dr.endOfStream()}))},cr.onLevelUpdated=function(Zt,rr){var ar=rr.details;ar.fragments.length&&(this.details=ar,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},cr.flushBackBuffer=function(){var Zt=this.hls,rr=this.details,ar=this.media,sr=this.sourceBuffer;if(!(!ar||rr===null)){var dr=this.getSourceBufferTypes();if(dr.length){var fr=rr.live&&Zt.config.liveBackBufferLength!==null?Zt.config.liveBackBufferLength:Zt.config.backBufferLength;if(!(!(0,Rt.isFiniteNumber)(fr)||fr<0)){var pr=ar.currentTime,xr=rr.levelTargetDuration,lr=Math.max(fr,xr),hr=Math.floor(pr/xr)*xr-lr;dr.forEach(function(ur){var mr=sr[ur];if(mr){var ir=zt.BufferHelper.getBuffered(mr);if(ir.length>0&&hr>ir.start(0)){if(Zt.trigger(Dt.Events.BACK_BUFFER_REACHED,{bufferEnd:hr}),rr.live)Zt.trigger(Dt.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:hr});else if(mr.ended&&ir.end(ir.length-1)-pr<xr*2){kt.logger.info("[buffer-controller]: Cannot flush "+ur+" back buffer while SourceBuffer is in ended state");return}Zt.trigger(Dt.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:hr,type:ur})}}})}}}},cr.updateMediaElementDuration=function(){if(!(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")){var Zt=this.details,rr=this.hls,ar=this.media,sr=this.mediaSource,dr=Zt.fragments[0].start+Zt.totalduration,fr=ar.duration,pr=(0,Rt.isFiniteNumber)(sr.duration)?sr.duration:0;Zt.live&&rr.config.liveDurationInfinity?(kt.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),sr.duration=1/0,this.updateSeekableRange(Zt)):(dr>pr&&dr>fr||!(0,Rt.isFiniteNumber)(fr))&&(kt.logger.log("[buffer-controller]: Updating Media Source duration to "+dr.toFixed(3)),sr.duration=dr)}},cr.updateSeekableRange=function(Zt){var rr=this.mediaSource,ar=Zt.fragments,sr=ar.length;if(sr&&Zt.live&&rr!==null&&rr!==void 0&&rr.setLiveSeekableRange){var dr=Math.max(0,ar[0].start),fr=Math.max(dr,dr+Zt.totalduration);rr.setLiveSeekableRange(dr,fr)}},cr.checkPendingTracks=function(){var Zt=this.bufferCodecEventsExpected,rr=this.operationQueue,ar=this.pendingTracks,sr=Object.keys(ar).length;if(sr&&!Zt||sr===2){this.createSourceBuffers(ar),this.pendingTracks={};var dr=this.getSourceBufferTypes();if(dr.length===0){this.hls.trigger(Dt.Events.ERROR,{type:Nt.ErrorTypes.MEDIA_ERROR,details:Nt.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});return}dr.forEach(function(fr){rr.executeNext(fr)})}},cr.createSourceBuffers=function(Zt){var rr=this.sourceBuffer,ar=this.mediaSource;if(!ar)throw Error("createSourceBuffers called when mediaSource was null");var sr=0;for(var dr in Zt)if(!rr[dr]){var fr=Zt[dr];if(!fr)throw Error("source buffer exists for track "+dr+", however track does not");var pr=fr.levelCodec||fr.codec,xr=fr.container+";codecs="+pr;kt.logger.log("[buffer-controller]: creating sourceBuffer("+xr+")");try{var lr=rr[dr]=ar.addSourceBuffer(xr),hr=dr;this.addBufferListener(hr,"updatestart",this._onSBUpdateStart),this.addBufferListener(hr,"updateend",this._onSBUpdateEnd),this.addBufferListener(hr,"error",this._onSBUpdateError),this.tracks[dr]={buffer:lr,codec:pr,container:fr.container,levelCodec:fr.levelCodec,metadata:fr.metadata,id:fr.id},sr++}catch(ur){kt.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+ur.message),this.hls.trigger(Dt.Events.ERROR,{type:Nt.ErrorTypes.MEDIA_ERROR,details:Nt.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:ur,mimeType:xr})}}sr&&this.hls.trigger(Dt.Events.BUFFER_CREATED,{tracks:this.tracks})},cr._onSBUpdateStart=function(Zt){var rr=this.operationQueue,ar=rr.current(Zt);ar.onStart()},cr._onSBUpdateEnd=function(Zt){var rr=this.operationQueue,ar=rr.current(Zt);ar.onComplete(),rr.shiftAndExecuteNext(Zt)},cr._onSBUpdateError=function(Zt,rr){kt.logger.error("[buffer-controller]: "+Zt+" SourceBuffer error",rr),this.hls.trigger(Dt.Events.ERROR,{type:Nt.ErrorTypes.MEDIA_ERROR,details:Nt.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var ar=this.operationQueue.current(Zt);ar&&ar.onError(rr)},cr.removeExecutor=function(Zt,rr,ar){var sr=this.media,dr=this.mediaSource,fr=this.operationQueue,pr=this.sourceBuffer,xr=pr[Zt];if(!sr||!dr||!xr){kt.logger.warn("[buffer-controller]: Attempting to remove from the "+Zt+" SourceBuffer, but it does not exist"),fr.shiftAndExecuteNext(Zt);return}var lr=(0,Rt.isFiniteNumber)(sr.duration)?sr.duration:1/0,hr=(0,Rt.isFiniteNumber)(dr.duration)?dr.duration:1/0,ur=Math.max(0,rr),mr=Math.min(ar,lr,hr);mr>ur&&!xr.ending?(xr.ended=!1,kt.logger.log("[buffer-controller]: Removing ["+ur+","+mr+"] from the "+Zt+" SourceBuffer"),console.assert(!xr.updating,Zt+" sourceBuffer must not be updating"),xr.remove(ur,mr)):fr.shiftAndExecuteNext(Zt)},cr.appendExecutor=function(Zt,rr){var ar=this.operationQueue,sr=this.sourceBuffer,dr=sr[rr];if(!dr){kt.logger.warn("[buffer-controller]: Attempting to append to the "+rr+" SourceBuffer, but it does not exist"),ar.shiftAndExecuteNext(rr);return}dr.ended=!1,console.assert(!dr.updating,rr+" sourceBuffer must not be updating"),dr.appendBuffer(Zt)},cr.blockBuffers=function(Zt,rr){var ar=this;if(rr===void 0&&(rr=this.getSourceBufferTypes()),!rr.length){kt.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(Zt);return}var sr=this.operationQueue,dr=rr.map(function(fr){return sr.appendBlocker(fr)});Promise.all(dr).then(function(){Zt(),rr.forEach(function(fr){var pr=ar.sourceBuffer[fr];(!pr||!pr.updating)&&sr.shiftAndExecuteNext(fr)})})},cr.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},cr.addBufferListener=function(Zt,rr,ar){var sr=this.sourceBuffer[Zt];if(sr){var dr=ar.bind(this,Zt);this.listeners[Zt].push({event:rr,listener:dr}),sr.addEventListener(rr,dr)}},cr.removeBufferListeners=function(Zt){var rr=this.sourceBuffer[Zt];rr&&this.listeners[Zt].forEach(function(ar){rr.removeEventListener(ar.event,ar.listener)})},tr}()},"./src/controller/buffer-operation-queue.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Dt});var Rt=Ct("./src/utils/logger.ts"),Dt=function(){function kt(zt){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=zt}var Nt=kt.prototype;return Nt.append=function(Wt,nr){var Ut=this.queues[nr];Ut.push(Wt),Ut.length===1&&this.buffers[nr]&&this.executeNext(nr)},Nt.insertAbort=function(Wt,nr){var Ut=this.queues[nr];Ut.unshift(Wt),this.executeNext(nr)},Nt.appendBlocker=function(Wt){var nr,Ut=new Promise(function(Bt){nr=Bt}),Ht={execute:nr,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(Ht,Wt),Ut},Nt.executeNext=function(Wt){var nr=this.buffers,Ut=this.queues,Ht=nr[Wt],Bt=Ut[Wt];if(Bt.length){var Ft=Bt[0];try{Ft.execute()}catch(tr){Rt.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),Ft.onError(tr),(!Ht||!Ht.updating)&&(Bt.shift(),this.executeNext(Wt))}}},Nt.shiftAndExecuteNext=function(Wt){this.queues[Wt].shift(),this.executeNext(Wt)},Nt.current=function(Wt){return this.queues[Wt][0]},kt}()},"./src/controller/cap-level-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>nr});var Rt=Ct("./src/events.ts");function Dt(Ut,Ht){for(var Bt=0;Bt<Ht.length;Bt++){var Ft=Ht[Bt];Ft.enumerable=Ft.enumerable||!1,Ft.configurable=!0,"value"in Ft&&(Ft.writable=!0),Object.defineProperty(Ut,Nt(Ft.key),Ft)}}function kt(Ut,Ht,Bt){return Ht&&Dt(Ut.prototype,Ht),Bt&&Dt(Ut,Bt),Object.defineProperty(Ut,"prototype",{writable:!1}),Ut}function Nt(Ut){var Ht=zt(Ut,"string");return typeof Ht=="symbol"?Ht:String(Ht)}function zt(Ut,Ht){if(typeof Ut!="object"||Ut===null)return Ut;var Bt=Ut[Symbol.toPrimitive];if(Bt!==void 0){var Ft=Bt.call(Ut,Ht||"default");if(typeof Ft!="object")return Ft;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ht==="string"?String:Number)(Ut)}var Wt=function(){function Ut(Bt){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=Bt,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var Ht=Ut.prototype;return Ht.setStreamController=function(Ft){this.streamController=Ft},Ht.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},Ht.registerListeners=function(){var Ft=this.hls;Ft.on(Rt.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),Ft.on(Rt.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Ft.on(Rt.Events.MANIFEST_PARSED,this.onManifestParsed,this),Ft.on(Rt.Events.BUFFER_CODECS,this.onBufferCodecs,this),Ft.on(Rt.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},Ht.unregisterListener=function(){var Ft=this.hls;Ft.off(Rt.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),Ft.off(Rt.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),Ft.off(Rt.Events.MANIFEST_PARSED,this.onManifestParsed,this),Ft.off(Rt.Events.BUFFER_CODECS,this.onBufferCodecs,this),Ft.off(Rt.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},Ht.onFpsDropLevelCapping=function(Ft,tr){Ut.isLevelAllowed(tr.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(tr.droppedLevel)},Ht.onMediaAttaching=function(Ft,tr){this.media=tr.media instanceof HTMLVideoElement?tr.media:null,this.clientRect=null},Ht.onManifestParsed=function(Ft,tr){var cr=this.hls;this.restrictedLevels=[],this.firstLevel=tr.firstLevel,cr.config.capLevelToPlayerSize&&tr.video&&this.startCapping()},Ht.onBufferCodecs=function(Ft,tr){var cr=this.hls;cr.config.capLevelToPlayerSize&&tr.video&&this.startCapping()},Ht.onMediaDetaching=function(){this.stopCapping()},Ht.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var Ft=this.hls.levels;if(Ft.length){var tr=this.hls;tr.autoLevelCapping=this.getMaxLevel(Ft.length-1),tr.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=tr.autoLevelCapping}}},Ht.getMaxLevel=function(Ft){var tr=this,cr=this.hls.levels;if(!cr.length)return-1;var Kt=cr.filter(function(Zt,rr){return Ut.isLevelAllowed(rr,tr.restrictedLevels)&&rr<=Ft});return this.clientRect=null,Ut.getMaxLevelByMediaSize(Kt,this.mediaWidth,this.mediaHeight)},Ht.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},Ht.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},Ht.getDimensions=function(){if(this.clientRect)return this.clientRect;var Ft=this.media,tr={width:0,height:0};if(Ft){var cr=Ft.getBoundingClientRect();tr.width=cr.width,tr.height=cr.height,!tr.width&&!tr.height&&(tr.width=cr.right-cr.left||Ft.width||0,tr.height=cr.bottom-cr.top||Ft.height||0)}return this.clientRect=tr,tr},Ut.isLevelAllowed=function(Ft,tr){return tr===void 0&&(tr=[]),tr.indexOf(Ft)===-1},Ut.getMaxLevelByMediaSize=function(Ft,tr,cr){if(!Ft||!Ft.length)return-1;for(var Kt=function(dr,fr){return fr?dr.width!==fr.width||dr.height!==fr.height:!0},Zt=Ft.length-1,rr=0;rr<Ft.length;rr+=1){var ar=Ft[rr];if((ar.width>=tr||ar.height>=cr)&&Kt(ar,Ft[rr+1])){Zt=rr;break}}return Zt},kt(Ut,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var Ft=1;if(!this.hls.config.ignoreDevicePixelRatio)try{Ft=self.devicePixelRatio}catch{}return Ft}}]),Ut}();const nr=Wt},"./src/controller/cmcd-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>cr});var Rt=Ct("./src/events.ts"),Dt=Ct("./src/types/cmcd.ts"),kt=Ct("./src/utils/buffer-helper.ts"),Nt=Ct("./src/utils/logger.ts");function zt(Kt,Zt){for(var rr=0;rr<Zt.length;rr++){var ar=Zt[rr];ar.enumerable=ar.enumerable||!1,ar.configurable=!0,"value"in ar&&(ar.writable=!0),Object.defineProperty(Kt,nr(ar.key),ar)}}function Wt(Kt,Zt,rr){return Zt&&zt(Kt.prototype,Zt),rr&&zt(Kt,rr),Object.defineProperty(Kt,"prototype",{writable:!1}),Kt}function nr(Kt){var Zt=Ut(Kt,"string");return typeof Zt=="symbol"?Zt:String(Zt)}function Ut(Kt,Zt){if(typeof Kt!="object"||Kt===null)return Kt;var rr=Kt[Symbol.toPrimitive];if(rr!==void 0){var ar=rr.call(Kt,Zt||"default");if(typeof ar!="object")return ar;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Zt==="string"?String:Number)(Kt)}function Ht(Kt,Zt){var rr=typeof Symbol<"u"&&Kt[Symbol.iterator]||Kt["@@iterator"];if(rr)return(rr=rr.call(Kt)).next.bind(rr);if(Array.isArray(Kt)||(rr=Bt(Kt))||Zt&&Kt&&typeof Kt.length=="number"){rr&&(Kt=rr);var ar=0;return function(){return ar>=Kt.length?{done:!0}:{done:!1,value:Kt[ar++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bt(Kt,Zt){if(Kt){if(typeof Kt=="string")return Ft(Kt,Zt);var rr=Object.prototype.toString.call(Kt).slice(8,-1);if(rr==="Object"&&Kt.constructor&&(rr=Kt.constructor.name),rr==="Map"||rr==="Set")return Array.from(Kt);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return Ft(Kt,Zt)}}function Ft(Kt,Zt){(Zt==null||Zt>Kt.length)&&(Zt=Kt.length);for(var rr=0,ar=new Array(Zt);rr<Zt;rr++)ar[rr]=Kt[rr];return ar}function tr(){return tr=Object.assign?Object.assign.bind():function(Kt){for(var Zt=1;Zt<arguments.length;Zt++){var rr=arguments[Zt];for(var ar in rr)Object.prototype.hasOwnProperty.call(rr,ar)&&(Kt[ar]=rr[ar])}return Kt},tr.apply(this,arguments)}var cr=function(){function Kt(rr){var ar=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){ar.initialized&&(ar.starved=!0),ar.buffering=!0},this.onPlaying=function(){ar.initialized||(ar.initialized=!0),ar.buffering=!1},this.applyPlaylistData=function(fr){try{ar.apply(fr,{ot:Dt.CMCDObjectType.MANIFEST,su:!ar.initialized})}catch(pr){Nt.logger.warn("Could not generate manifest CMCD data.",pr)}},this.applyFragmentData=function(fr){try{var pr=fr.frag,xr=ar.hls.levels[pr.level],lr=ar.getObjectType(pr),hr={d:pr.duration*1e3,ot:lr};(lr===Dt.CMCDObjectType.VIDEO||lr===Dt.CMCDObjectType.AUDIO||lr==Dt.CMCDObjectType.MUXED)&&(hr.br=xr.bitrate/1e3,hr.tb=ar.getTopBandwidth(lr)/1e3,hr.bl=ar.getBufferLength(lr)),ar.apply(fr,hr)}catch(ur){Nt.logger.warn("Could not generate segment CMCD data.",ur)}},this.hls=rr;var sr=this.config=rr.config,dr=sr.cmcd;dr!=null&&(sr.pLoader=this.createPlaylistLoader(),sr.fLoader=this.createFragmentLoader(),this.sid=dr.sessionId||Kt.uuid(),this.cid=dr.contentId,this.useHeaders=dr.useHeaders===!0,this.registerListeners())}var Zt=Kt.prototype;return Zt.registerListeners=function(){var ar=this.hls;ar.on(Rt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),ar.on(Rt.Events.MEDIA_DETACHED,this.onMediaDetached,this),ar.on(Rt.Events.BUFFER_CREATED,this.onBufferCreated,this)},Zt.unregisterListeners=function(){var ar=this.hls;ar.off(Rt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),ar.off(Rt.Events.MEDIA_DETACHED,this.onMediaDetached,this),ar.off(Rt.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},Zt.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},Zt.onMediaAttached=function(ar,sr){this.media=sr.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},Zt.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},Zt.onBufferCreated=function(ar,sr){var dr,fr;this.audioBuffer=(dr=sr.tracks.audio)===null||dr===void 0?void 0:dr.buffer,this.videoBuffer=(fr=sr.tracks.video)===null||fr===void 0?void 0:fr.buffer},Zt.createData=function(){var ar;return{v:Dt.CMCDVersion,sf:Dt.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(ar=this.media)===null||ar===void 0?void 0:ar.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},Zt.apply=function(ar,sr){sr===void 0&&(sr={}),tr(sr,this.createData());var dr=sr.ot===Dt.CMCDObjectType.INIT||sr.ot===Dt.CMCDObjectType.VIDEO||sr.ot===Dt.CMCDObjectType.MUXED;if(this.starved&&dr&&(sr.bs=!0,sr.su=!0,this.starved=!1),sr.su==null&&(sr.su=this.buffering),this.useHeaders){var fr=Kt.toHeaders(sr);if(!Object.keys(fr).length)return;ar.headers||(ar.headers={}),tr(ar.headers,fr)}else{var pr=Kt.toQuery(sr);if(!pr)return;ar.url=Kt.appendQueryToUri(ar.url,pr)}},Zt.getObjectType=function(ar){var sr=ar.type;if(sr==="subtitle")return Dt.CMCDObjectType.TIMED_TEXT;if(ar.sn==="initSegment")return Dt.CMCDObjectType.INIT;if(sr==="audio")return Dt.CMCDObjectType.AUDIO;if(sr==="main")return this.hls.audioTracks.length?Dt.CMCDObjectType.VIDEO:Dt.CMCDObjectType.MUXED},Zt.getTopBandwidth=function(ar){var sr=0,dr,fr=this.hls;if(ar===Dt.CMCDObjectType.AUDIO)dr=fr.audioTracks;else{var pr=fr.maxAutoLevel,xr=pr>-1?pr+1:fr.levels.length;dr=fr.levels.slice(0,xr)}for(var lr=Ht(dr),hr;!(hr=lr()).done;){var ur=hr.value;ur.bitrate>sr&&(sr=ur.bitrate)}return sr>0?sr:NaN},Zt.getBufferLength=function(ar){var sr=this.hls.media,dr=ar===Dt.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;if(!dr||!sr)return NaN;var fr=kt.BufferHelper.bufferInfo(dr,sr.currentTime,this.config.maxBufferHole);return fr.len*1e3},Zt.createPlaylistLoader=function(){var ar=this.config.pLoader,sr=this.applyPlaylistData,dr=ar||this.config.loader;return function(){function fr(xr){this.loader=void 0,this.loader=new dr(xr)}var pr=fr.prototype;return pr.destroy=function(){this.loader.destroy()},pr.abort=function(){this.loader.abort()},pr.load=function(lr,hr,ur){sr(lr),this.loader.load(lr,hr,ur)},Wt(fr,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),fr}()},Zt.createFragmentLoader=function(){var ar=this.config.fLoader,sr=this.applyFragmentData,dr=ar||this.config.loader;return function(){function fr(xr){this.loader=void 0,this.loader=new dr(xr)}var pr=fr.prototype;return pr.destroy=function(){this.loader.destroy()},pr.abort=function(){this.loader.abort()},pr.load=function(lr,hr,ur){sr(lr),this.loader.load(lr,hr,ur)},Wt(fr,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),fr}()},Kt.uuid=function(){var ar=URL.createObjectURL(new Blob),sr=ar.toString();return URL.revokeObjectURL(ar),sr.slice(sr.lastIndexOf("/")+1)},Kt.serialize=function(ar){for(var sr=[],dr=function(br){return!Number.isNaN(br)&&br!=null&&br!==""&&br!==!1},fr=function(br){return Math.round(br)},pr=function(br){return fr(br/100)*100},xr=function(br){return encodeURIComponent(br)},lr={br:fr,d:fr,bl:pr,dl:pr,mtp:pr,nor:xr,rtp:pr,tb:fr},hr=Object.keys(ar||{}).sort(),ur=Ht(hr),mr;!(mr=ur()).done;){var ir=mr.value,_r=ar[ir];if(dr(_r)&&!(ir==="v"&&_r===1)&&!(ir=="pr"&&_r===1)){var yr=lr[ir];yr&&(_r=yr(_r));var gr=typeof _r,Sr=void 0;ir==="ot"||ir==="sf"||ir==="st"?Sr=ir+"="+_r:gr==="boolean"?Sr=ir:gr==="number"?Sr=ir+"="+_r:Sr=ir+"="+JSON.stringify(_r),sr.push(Sr)}}return sr.join(",")},Kt.toHeaders=function(ar){for(var sr=Object.keys(ar),dr={},fr=["Object","Request","Session","Status"],pr=[{},{},{},{}],xr={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},lr=0,hr=sr;lr<hr.length;lr++){var ur=hr[lr],mr=xr[ur]!=null?xr[ur]:1;pr[mr][ur]=ar[ur]}for(var ir=0;ir<pr.length;ir++){var _r=Kt.serialize(pr[ir]);_r&&(dr["CMCD-"+fr[ir]]=_r)}return dr},Kt.toQuery=function(ar){return"CMCD="+encodeURIComponent(Kt.serialize(ar))},Kt.appendQueryToUri=function(ar,sr){if(!sr)return ar;var dr=ar.includes("?")?"&":"?";return""+ar+dr+sr},Kt}()},"./src/controller/eme-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>lr});var Rt=Ct("./src/events.ts"),Dt=Ct("./src/errors.ts"),kt=Ct("./src/utils/logger.ts"),Nt=Ct("./src/utils/mediakeys-helper.ts"),zt=Ct("./src/utils/keysystem-util.ts"),Wt=Ct("./src/utils/numeric-encoding-utils.ts"),nr=Ct("./src/loader/level-key.ts"),Ut=Ct("./src/utils/hex.ts"),Ht=Ct("./src/utils/mp4-tools.ts"),Bt=Ct("./node_modules/eventemitter3/index.js"),Ft=Ct.n(Bt);function tr(hr,ur){hr.prototype=Object.create(ur.prototype),hr.prototype.constructor=hr,ar(hr,ur)}function cr(hr){var ur=typeof Map=="function"?new Map:void 0;return cr=function(ir){if(ir===null||!rr(ir))return ir;if(typeof ir!="function")throw new TypeError("Super expression must either be null or a function");if(typeof ur<"u"){if(ur.has(ir))return ur.get(ir);ur.set(ir,_r)}function _r(){return Kt(ir,arguments,sr(this).constructor)}return _r.prototype=Object.create(ir.prototype,{constructor:{value:_r,enumerable:!1,writable:!0,configurable:!0}}),ar(_r,ir)},cr(hr)}function Kt(hr,ur,mr){return Zt()?Kt=Reflect.construct.bind():Kt=function(_r,yr,gr){var Sr=[null];Sr.push.apply(Sr,yr);var Tr=Function.bind.apply(_r,Sr),br=new Tr;return gr&&ar(br,gr.prototype),br},Kt.apply(null,arguments)}function Zt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rr(hr){return Function.toString.call(hr).indexOf("[native code]")!==-1}function ar(hr,ur){return ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ir,_r){return ir.__proto__=_r,ir},ar(hr,ur)}function sr(hr){return sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(mr){return mr.__proto__||Object.getPrototypeOf(mr)},sr(hr)}var dr=3,fr="[eme]",pr=function(){function hr(mr){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=hr.CDMCleanupPromise?[hr.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=kt.logger.debug.bind(kt.logger,fr),this.log=kt.logger.log.bind(kt.logger,fr),this.warn=kt.logger.warn.bind(kt.logger,fr),this.error=kt.logger.error.bind(kt.logger,fr),this.hls=mr,this.config=mr.config,this.registerListeners()}var ur=hr.prototype;return ur.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},ur.registerListeners=function(){this.hls.on(Rt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Rt.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(Rt.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},ur.unregisterListeners=function(){this.hls.off(Rt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(Rt.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(Rt.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},ur.getLicenseServerUrl=function(ir){var _r=this.config,yr=_r.drmSystems,gr=_r.widevineLicenseUrl,Sr=yr[ir];if(Sr)return Sr.licenseUrl;if(ir===Nt.KeySystems.WIDEVINE&&gr)return gr;throw new Error('no license server URL configured for key-system "'+ir+'"')},ur.getServerCertificateUrl=function(ir){var _r=this.config.drmSystems,yr=_r[ir];if(yr)return yr.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+ir+'"]')},ur.attemptKeySystemAccess=function(ir){var _r=this,yr=this.hls.levels,gr=function(Ar,Or,Ir){return!!Ar&&Ir.indexOf(Ar)===Or},Sr=yr.map(function(br){return br.audioCodec}).filter(gr),Tr=yr.map(function(br){return br.videoCodec}).filter(gr);return Sr.length+Tr.length===0&&Tr.push("avc1.42e01e"),new Promise(function(br,Ar){var Or=function Ir(Cr){var Rr=Cr.shift();_r.getMediaKeysPromise(Rr,Sr,Tr).then(function(Pr){return br({keySystem:Rr,mediaKeys:Pr})}).catch(function(Pr){Cr.length?Ir(Cr):Pr instanceof xr?Ar(Pr):Ar(new xr({type:Dt.ErrorTypes.KEY_SYSTEM_ERROR,details:Dt.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:Pr,fatal:!0},Pr.message))})};Or(ir)})},ur.requestMediaKeySystemAccess=function(ir,_r){var yr=this.config.requestMediaKeySystemAccessFunc;if(typeof yr!="function"){var gr="Configured requestMediaKeySystemAccess is not a function "+yr;return Nt.requestMediaKeySystemAccess===null&&self.location.protocol==="http:"&&(gr="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(gr))}return yr(ir,_r)},ur.getMediaKeysPromise=function(ir,_r,yr){var gr=this,Sr=(0,Nt.getSupportedMediaKeySystemConfigurations)(ir,_r,yr,this.config.drmSystemOptions),Tr=this.keySystemAccessPromises[ir],br=Tr==null?void 0:Tr.keySystemAccess;if(!br){this.log('Requesting encrypted media "'+ir+'" key-system access with config: '+JSON.stringify(Sr)),br=this.requestMediaKeySystemAccess(ir,Sr);var Ar=this.keySystemAccessPromises[ir]={keySystemAccess:br};return br.catch(function(Or){gr.log('Failed to obtain access to key-system "'+ir+'": '+Or)}),br.then(function(Or){gr.log('Access for key-system "'+Or.keySystem+'" obtained');var Ir=gr.fetchServerCertificate(ir);return gr.log('Create media-keys for "'+ir+'"'),Ar.mediaKeys=Or.createMediaKeys().then(function(Cr){return gr.log('Media-keys created for "'+ir+'"'),Ir.then(function(Rr){return Rr?gr.setMediaKeysServerCertificate(Cr,ir,Rr):Cr})}),Ar.mediaKeys.catch(function(Cr){gr.error('Failed to create media-keys for "'+ir+'"}: '+Cr)}),Ar.mediaKeys})}return br.then(function(){return Tr.mediaKeys})},ur.createMediaKeySessionContext=function(ir){var _r=ir.decryptdata,yr=ir.keySystem,gr=ir.mediaKeys;console.assert(!!gr,"mediaKeys is defined"),this.log('Creating key-system session "'+yr+'" keyId: '+Ut.default.hexDump(_r.keyId||[]));var Sr=gr.createSession(),Tr={decryptdata:_r,keySystem:yr,mediaKeys:gr,mediaKeysSession:Sr,keyStatus:"status-pending"};return this.mediaKeySessions.push(Tr),Tr},ur.renewKeySession=function(ir){var _r=ir.decryptdata;if(_r.pssh){var yr=this.createMediaKeySessionContext(ir),gr=this.getKeyIdString(_r),Sr="cenc";this.keyIdToKeySessionPromise[gr]=this.generateRequestWithPreferredKeySession(yr,Sr,_r.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(ir)},ur.getKeyIdString=function(ir){if(!ir)throw new Error("Could not read keyId of undefined decryptdata");if(ir.keyId===null)throw new Error("keyId is null");return Ut.default.hexDump(ir.keyId)},ur.updateKeySession=function(ir,_r){var yr,gr=ir.mediaKeysSession;return this.log('Updating key-session "'+gr.sessionId+'" for keyID '+Ut.default.hexDump(((yr=ir.decryptdata)===null||yr===void 0?void 0:yr.keyId)||[])+`
      } (data length: `+(_r&&_r.byteLength)+")"),gr.update(_r)},ur.selectKeySystemFormat=function(ir){var _r=Object.keys(ir.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+ir.sn+" "+ir.type+": "+ir.level+") key formats "+_r.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(_r)),this.keyFormatPromise},ur.getKeyFormatPromise=function(ir){var _r=this;return new Promise(function(yr,gr){var Sr=(0,Nt.getKeySystemsForConfig)(_r.config),Tr=ir.map(Nt.keySystemFormatToKeySystemDomain).filter(function(br){return!!br&&Sr.indexOf(br)!==-1});return _r.getKeySystemSelectionPromise(Tr).then(function(br){var Ar=br.keySystem,Or=(0,Nt.keySystemDomainToKeySystemFormat)(Ar);Or?yr(Or):gr(new Error('Unable to find format for key-system "'+Ar+'"'))}).catch(gr)})},ur.loadKey=function(ir){var _r=this,yr=ir.keyInfo.decryptdata,gr=this.getKeyIdString(yr),Sr="(keyId: "+gr+' format: "'+yr.keyFormat+'" method: '+yr.method+" uri: "+yr.uri+")";this.log("Starting session for key "+Sr);var Tr=this.keyIdToKeySessionPromise[gr];return Tr||(Tr=this.keyIdToKeySessionPromise[gr]=this.getKeySystemForKeyPromise(yr).then(function(br){var Ar=br.keySystem,Or=br.mediaKeys;return _r.throwIfDestroyed(),_r.log("Handle encrypted media sn: "+ir.frag.sn+" "+ir.frag.type+": "+ir.frag.level+" using key "+Sr),_r.attemptSetMediaKeys(Ar,Or).then(function(){_r.throwIfDestroyed();var Ir=_r.createMediaKeySessionContext({keySystem:Ar,mediaKeys:Or,decryptdata:yr}),Cr="cenc";return _r.generateRequestWithPreferredKeySession(Ir,Cr,yr.pssh,"playlist-key")})}),Tr.catch(function(br){return _r.handleError(br)})),Tr},ur.throwIfDestroyed=function(ir){if(!this.hls)throw new Error("invalid state")},ur.handleError=function(ir){this.hls&&(this.error(ir.message),ir instanceof xr?this.hls.trigger(Rt.Events.ERROR,ir.data):this.hls.trigger(Rt.Events.ERROR,{type:Dt.ErrorTypes.KEY_SYSTEM_ERROR,details:Dt.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:ir,fatal:!0}))},ur.getKeySystemForKeyPromise=function(ir){var _r=this.getKeyIdString(ir),yr=this.keyIdToKeySessionPromise[_r];if(!yr){var gr=(0,Nt.keySystemFormatToKeySystemDomain)(ir.keyFormat),Sr=gr?[gr]:(0,Nt.getKeySystemsForConfig)(this.config);return this.attemptKeySystemAccess(Sr)}return yr},ur.getKeySystemSelectionPromise=function(ir){if(ir.length||(ir=(0,Nt.getKeySystemsForConfig)(this.config)),ir.length===0)throw new xr({type:Dt.ErrorTypes.KEY_SYSTEM_ERROR,details:Dt.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(ir)},ur._onMediaEncrypted=function(ir){var _r=this,yr=ir.initDataType,gr=ir.initData;if(this.debug('"'+ir.type+'" event: init data type: "'+yr+'"'),gr!==null){var Sr,Tr;if(yr==="sinf"&&this.config.drmSystems[Nt.KeySystems.FAIRPLAY]){var br=(0,Ht.bin2str)(new Uint8Array(gr));try{var Ar=(0,Wt.base64Decode)(JSON.parse(br).sinf),Or=(0,Ht.parseSinf)(new Uint8Array(Ar));if(!Or)return;Sr=Or.subarray(8,24),Tr=Nt.KeySystems.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{var Ir=(0,Ht.parsePssh)(gr);if(Ir===null)return;Ir.version===0&&Ir.systemId===Nt.KeySystemIds.WIDEVINE&&Ir.data&&(Sr=Ir.data.subarray(8,24)),Tr=(0,Nt.keySystemIdToKeySystemDomain)(Ir.systemId)}if(!(!Tr||!Sr)){for(var Cr=Ut.default.hexDump(Sr),Rr=this.keyIdToKeySessionPromise,Pr=this.mediaKeySessions,wr=Rr[Cr],Dr=function(Kr){var Vr=Pr[Kr],Gr=Vr.decryptdata;if(Gr.pssh||!Gr.keyId)return"continue";var jr=Ut.default.hexDump(Gr.keyId);if(Cr===jr||Gr.uri.replace(/-/g,"").indexOf(Cr)!==-1)return wr=Rr[jr],delete Rr[jr],Gr.pssh=new Uint8Array(gr),Gr.keyId=Sr,wr=Rr[Cr]=wr.then(function(){return _r.generateRequestWithPreferredKeySession(Vr,yr,gr,"encrypted-event-key-match")}),"break"},kr=0;kr<Pr.length;kr++){var Fr=Dr(kr);if(Fr!=="continue"&&Fr==="break")break}wr||(wr=Rr[Cr]=this.getKeySystemSelectionPromise([Tr]).then(function(Br){var Kr,Vr=Br.keySystem,Gr=Br.mediaKeys;_r.throwIfDestroyed();var jr=new nr.LevelKey("ISO-23001-7",Cr,(Kr=(0,Nt.keySystemDomainToKeySystemFormat)(Vr))!=null?Kr:"");return jr.pssh=new Uint8Array(gr),jr.keyId=Sr,_r.attemptSetMediaKeys(Vr,Gr).then(function(){_r.throwIfDestroyed();var zr=_r.createMediaKeySessionContext({decryptdata:jr,keySystem:Vr,mediaKeys:Gr});return _r.generateRequestWithPreferredKeySession(zr,yr,gr,"encrypted-event-no-match")})})),wr.catch(function(Br){return _r.handleError(Br)})}}},ur._onWaitingForKey=function(ir){this.log('"'+ir.type+'" event')},ur.attemptSetMediaKeys=function(ir,_r){var yr=this,gr=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+ir+'"');var Sr=Promise.all(gr).then(function(){if(!yr.media)throw new Error("Attempted to set mediaKeys without media element attached");return yr.media.setMediaKeys(_r)});return this.setMediaKeysQueue.push(Sr),Sr.then(function(){yr.log('Media-keys set for "'+ir+'"'),gr.push(Sr),yr.setMediaKeysQueue=yr.setMediaKeysQueue.filter(function(Tr){return gr.indexOf(Tr)===-1})})},ur.generateRequestWithPreferredKeySession=function(ir,_r,yr,gr){var Sr,Tr,br=this,Ar=(Sr=this.config.drmSystems)===null||Sr===void 0||(Tr=Sr[ir.keySystem])===null||Tr===void 0?void 0:Tr.generateRequest;if(Ar)try{var Or=Ar.call(this.hls,_r,yr,ir);if(!Or)throw new Error("Invalid response from configured generateRequest filter");_r=Or.initDataType,yr=ir.decryptdata.pssh=Or.initData?new Uint8Array(Or.initData):null}catch(wr){var Ir;if(this.warn(wr.message),(Ir=this.hls)!==null&&Ir!==void 0&&Ir.config.debug)throw wr}if(yr===null)return this.log('Skipping key-session request for "'+gr+'" (no initData)'),Promise.resolve(ir);var Cr=this.getKeyIdString(ir.decryptdata);this.log('Generating key-session request for "'+gr+'": '+Cr+" (init data type: "+_r+" length: "+(yr?yr.byteLength:null)+")");var Rr=new(Ft());ir.mediaKeysSession.onmessage=function(wr){var Dr=ir.mediaKeysSession;if(!Dr){Rr.emit("error",new Error("invalid state"));return}var kr=wr.messageType,Fr=wr.message;br.log('"'+kr+'" message event for session "'+Dr.sessionId+'" message size: '+Fr.byteLength),kr==="license-request"||kr==="license-renewal"?br.renewLicense(ir,Fr).catch(function(Br){br.handleError(Br),Rr.emit("error",Br)}):kr==="license-release"?ir.keySystem===Nt.KeySystems.FAIRPLAY&&(br.updateKeySession(ir,(0,zt.strToUtf8array)("acknowledged")),br.removeSession(ir)):br.warn('unhandled media key message type "'+kr+'"')},ir.mediaKeysSession.onkeystatuseschange=function(wr){var Dr=ir.mediaKeysSession;if(!Dr){Rr.emit("error",new Error("invalid state"));return}br.onKeyStatusChange(ir);var kr=ir.keyStatus;Rr.emit("keyStatus",kr),kr==="expired"&&(br.warn(ir.keySystem+" expired for key "+Cr),br.renewKeySession(ir))};var Pr=new Promise(function(wr,Dr){Rr.on("error",Dr),Rr.on("keyStatus",function(kr){kr.startsWith("usable")?wr():kr==="output-restricted"?Dr(new xr({type:Dt.ErrorTypes.KEY_SYSTEM_ERROR,details:Dt.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):kr==="internal-error"?Dr(new xr({type:Dt.ErrorTypes.KEY_SYSTEM_ERROR,details:Dt.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+kr+'"')):kr==="expired"?Dr(new Error("key expired while generating request")):br.warn('unhandled key status change "'+kr+'"')})});return ir.mediaKeysSession.generateRequest(_r,yr).then(function(){var wr;br.log('Request generated for key-session "'+((wr=ir.mediaKeysSession)===null||wr===void 0?void 0:wr.sessionId)+'" keyId: '+Cr)}).catch(function(wr){throw new xr({type:Dt.ErrorTypes.KEY_SYSTEM_ERROR,details:Dt.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:wr,fatal:!1},"Error generating key-session request: "+wr)}).then(function(){return Pr}).catch(function(wr){throw Rr.removeAllListeners(),br.removeSession(ir),wr}).then(function(){return Rr.removeAllListeners(),ir})},ur.onKeyStatusChange=function(ir){var _r=this;ir.mediaKeysSession.keyStatuses.forEach(function(yr,gr){_r.log('key status change "'+yr+'" for keyStatuses keyId: '+Ut.default.hexDump("buffer"in gr?new Uint8Array(gr.buffer,gr.byteOffset,gr.byteLength):new Uint8Array(gr))+" session keyId: "+Ut.default.hexDump(new Uint8Array(ir.decryptdata.keyId||[]))+" uri: "+ir.decryptdata.uri),ir.keyStatus=yr})},ur.fetchServerCertificate=function(ir){var _r=this;return new Promise(function(yr,gr){var Sr=_r.getServerCertificateUrl(ir);if(!Sr)return yr();_r.log('Fetching serverCertificate for "'+ir+'"');var Tr=new XMLHttpRequest;Tr.open("GET",Sr,!0),Tr.responseType="arraybuffer",Tr.onreadystatechange=function(){Tr.readyState===XMLHttpRequest.DONE&&(Tr.status===200?yr(Tr.response):gr(new xr({type:Dt.ErrorTypes.KEY_SYSTEM_ERROR,details:Dt.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:Tr},'"'+ir+'" certificate request XHR failed ('+Sr+"). Status: "+Tr.status+" ("+Tr.statusText+")")))},Tr.send()})},ur.setMediaKeysServerCertificate=function(ir,_r,yr){var gr=this;return new Promise(function(Sr,Tr){ir.setServerCertificate(yr).then(function(br){gr.log("setServerCertificate "+(br?"success":"not supported by CDM")+" ("+(yr==null?void 0:yr.byteLength)+') on "'+_r+'"'),Sr(ir)}).catch(function(br){Tr(new xr({type:Dt.ErrorTypes.KEY_SYSTEM_ERROR,details:Dt.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:br,fatal:!0},br.message))})})},ur.renewLicense=function(ir,_r){var yr=this;return this.requestLicense(ir,new Uint8Array(_r)).then(function(gr){return yr.updateKeySession(ir,new Uint8Array(gr)).catch(function(Sr){throw new xr({type:Dt.ErrorTypes.KEY_SYSTEM_ERROR,details:Dt.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:Sr,fatal:!0},Sr.message)})})},ur.setupLicenseXHR=function(ir,_r,yr,gr){var Sr=this,Tr=this.config.licenseXhrSetup;return Tr?Promise.resolve().then(function(){if(!yr.decryptdata)throw new Error("Key removed");return Tr.call(Sr.hls,ir,_r,yr,gr)}).catch(function(br){if(!yr.decryptdata)throw br;return ir.open("POST",_r,!0),Tr.call(Sr.hls,ir,_r,yr,gr)}).then(function(br){ir.readyState||ir.open("POST",_r,!0);var Ar=br||gr;return{xhr:ir,licenseChallenge:Ar}}):(ir.open("POST",_r,!0),Promise.resolve({xhr:ir,licenseChallenge:gr}))},ur.requestLicense=function(ir,_r){var yr=this;return new Promise(function(gr,Sr){var Tr=yr.getLicenseServerUrl(ir.keySystem);yr.log("Sending license request to URL: "+Tr);var br=new XMLHttpRequest;br.responseType="arraybuffer",br.onreadystatechange=function(){if(!yr.hls||!ir.mediaKeysSession)return Sr(new Error("invalid state"));if(br.readyState===4)if(br.status===200){yr._requestLicenseFailureCount=0;var Ar=br.response;yr.log("License received "+(Ar instanceof ArrayBuffer?Ar.byteLength:Ar));var Or=yr.config.licenseResponseCallback;if(Or)try{Ar=Or.call(yr.hls,br,Tr,ir)}catch(Cr){yr.error(Cr)}gr(Ar)}else if(yr._requestLicenseFailureCount++,yr._requestLicenseFailureCount>dr||br.status>=400&&br.status<500)Sr(new xr({type:Dt.ErrorTypes.KEY_SYSTEM_ERROR,details:Dt.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:br},"License Request XHR failed ("+Tr+"). Status: "+br.status+" ("+br.statusText+")"));else{var Ir=dr-yr._requestLicenseFailureCount+1;yr.warn("Retrying license request, "+Ir+" attempts left"),yr.requestLicense(ir,_r).then(gr,Sr)}},ir.licenseXhr&&ir.licenseXhr.readyState!==XMLHttpRequest.DONE&&ir.licenseXhr.abort(),ir.licenseXhr=br,yr.setupLicenseXHR(br,Tr,ir,_r).then(function(Ar){var Or=Ar.xhr,Ir=Ar.licenseChallenge;Or.send(Ir)})})},ur.onMediaAttached=function(ir,_r){if(this.config.emeEnabled){var yr=_r.media;this.media=yr,yr.addEventListener("encrypted",this.onMediaEncrypted),yr.addEventListener("waitingforkey",this.onWaitingForKey)}},ur.onMediaDetached=function(){var ir=this,_r=this.media,yr=this.mediaKeySessions;_r&&(_r.removeEventListener("encrypted",this.onMediaEncrypted),_r.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},nr.LevelKey.clearKeyUriToKeyIdMap();var gr=yr.length;hr.CDMCleanupPromise=Promise.all(yr.map(function(Sr){return ir.removeSession(Sr)}).concat(_r==null?void 0:_r.setMediaKeys(null).catch(function(Sr){ir.log("Could not clear media keys: "+Sr+". media.src: "+(_r==null?void 0:_r.src))}))).then(function(){gr&&(ir.log("finished closing key sessions and clearing media keys"),yr.length=0)}).catch(function(Sr){ir.log("Could not close sessions and clear media keys: "+Sr+". media.src: "+(_r==null?void 0:_r.src))})},ur.onManifestLoaded=function(ir,_r){var yr=_r.sessionKeys;if(!(!yr||!this.config.emeEnabled)&&!this.keyFormatPromise){var gr=yr.reduce(function(Sr,Tr){return Sr.indexOf(Tr.keyFormat)===-1&&Sr.push(Tr.keyFormat),Sr},[]);this.log("Selecting key-system from session-keys "+gr.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(gr)}},ur.removeSession=function(ir){var _r=this,yr=ir.mediaKeysSession,gr=ir.licenseXhr;if(yr){this.log("Remove licenses and keys and close session "+yr.sessionId),yr.onmessage=null,yr.onkeystatuseschange=null,gr&&gr.readyState!==XMLHttpRequest.DONE&&gr.abort(),ir.mediaKeysSession=ir.decryptdata=ir.licenseXhr=void 0;var Sr=this.mediaKeySessions.indexOf(ir);return Sr>-1&&this.mediaKeySessions.splice(Sr,1),yr.remove().catch(function(Tr){_r.log("Could not remove session: "+Tr)}).then(function(){return yr.close()}).catch(function(Tr){_r.log("Could not close session: "+Tr)})}},hr}();pr.CDMCleanupPromise=void 0;var xr=function(hr){tr(ur,hr);function ur(mr,ir){var _r;return _r=hr.call(this,ir)||this,_r.data=void 0,_r.data=mr,mr.err=mr.error,_r}return ur}(cr(Error));const lr=pr},"./src/controller/fps-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Nt});var Rt=Ct("./src/events.ts"),Dt=Ct("./src/utils/logger.ts"),kt=function(){function zt(nr){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=nr,this.registerListeners()}var Wt=zt.prototype;return Wt.setStreamController=function(Ut){this.streamController=Ut},Wt.registerListeners=function(){this.hls.on(Rt.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},Wt.unregisterListeners=function(){this.hls.off(Rt.Events.MEDIA_ATTACHING,this.onMediaAttaching)},Wt.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},Wt.onMediaAttaching=function(Ut,Ht){var Bt=this.hls.config;if(Bt.capLevelOnFPSDrop){var Ft=Ht.media instanceof self.HTMLVideoElement?Ht.media:null;this.media=Ft,Ft&&typeof Ft.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),Bt.fpsDroppedMonitoringPeriod)}},Wt.checkFPS=function(Ut,Ht,Bt){var Ft=performance.now();if(Ht){if(this.lastTime){var tr=Ft-this.lastTime,cr=Bt-this.lastDroppedFrames,Kt=Ht-this.lastDecodedFrames,Zt=1e3*cr/tr,rr=this.hls;if(rr.trigger(Rt.Events.FPS_DROP,{currentDropped:cr,currentDecoded:Kt,totalDroppedFrames:Bt}),Zt>0&&cr>rr.config.fpsDroppedMonitoringThreshold*Kt){var ar=rr.currentLevel;Dt.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+ar),ar>0&&(rr.autoLevelCapping===-1||rr.autoLevelCapping>=ar)&&(ar=ar-1,rr.trigger(Rt.Events.FPS_DROP_LEVEL_CAPPING,{level:ar,droppedLevel:rr.currentLevel}),rr.autoLevelCapping=ar,this.streamController.nextLevelSwitch())}}this.lastTime=Ft,this.lastDroppedFrames=Bt,this.lastDecodedFrames=Ht}},Wt.checkFPSInterval=function(){var Ut=this.media;if(Ut)if(this.isVideoPlaybackQualityAvailable){var Ht=Ut.getVideoPlaybackQuality();this.checkFPS(Ut,Ht.totalVideoFrames,Ht.droppedVideoFrames)}else this.checkFPS(Ut,Ut.webkitDecodedFrameCount,Ut.webkitDroppedFrameCount)},zt}();const Nt=kt},"./src/controller/fragment-finders.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{findFragWithCC:()=>nr,findFragmentByPDT:()=>kt,findFragmentByPTS:()=>Nt,fragmentWithinToleranceTest:()=>zt,pdtWithinToleranceTest:()=>Wt});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/utils/binary-search.ts");function kt(Ut,Ht,Bt){if(Ht===null||!Array.isArray(Ut)||!Ut.length||!(0,Rt.isFiniteNumber)(Ht))return null;var Ft=Ut[0].programDateTime;if(Ht<(Ft||0))return null;var tr=Ut[Ut.length-1].endProgramDateTime;if(Ht>=(tr||0))return null;Bt=Bt||0;for(var cr=0;cr<Ut.length;++cr){var Kt=Ut[cr];if(Wt(Ht,Bt,Kt))return Kt}return null}function Nt(Ut,Ht,Bt,Ft){Bt===void 0&&(Bt=0),Ft===void 0&&(Ft=0);var tr=null;if(Ut?tr=Ht[Ut.sn-Ht[0].sn+1]||null:Bt===0&&Ht[0].start===0&&(tr=Ht[0]),tr&&zt(Bt,Ft,tr)===0)return tr;var cr=Dt.default.search(Ht,zt.bind(null,Bt,Ft));return cr&&(cr!==Ut||!tr)?cr:tr}function zt(Ut,Ht,Bt){if(Ut===void 0&&(Ut=0),Ht===void 0&&(Ht=0),Bt.start<=Ut&&Bt.start+Bt.duration>Ut)return 0;var Ft=Math.min(Ht,Bt.duration+(Bt.deltaPTS?Bt.deltaPTS:0));return Bt.start+Bt.duration-Ft<=Ut?1:Bt.start-Ft>Ut&&Bt.start?-1:0}function Wt(Ut,Ht,Bt){var Ft=Math.min(Ht,Bt.duration+(Bt.deltaPTS?Bt.deltaPTS:0))*1e3,tr=Bt.endProgramDateTime||0;return tr-Ft>Ut}function nr(Ut,Ht){return Dt.default.search(Ut,function(Bt){return Bt.cc<Ht?1:Bt.cc>Ht?-1:0})}},"./src/controller/fragment-tracker.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{FragmentState:()=>kt,FragmentTracker:()=>Nt});var Rt=Ct("./src/events.ts"),Dt=Ct("./src/types/loader.ts"),kt;(function(nr){nr.NOT_LOADED="NOT_LOADED",nr.APPENDING="APPENDING",nr.PARTIAL="PARTIAL",nr.OK="OK"})(kt||(kt={}));var Nt=function(){function nr(Ht){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=Ht,this._registerListeners()}var Ut=nr.prototype;return Ut._registerListeners=function(){var Bt=this.hls;Bt.on(Rt.Events.BUFFER_APPENDED,this.onBufferAppended,this),Bt.on(Rt.Events.FRAG_BUFFERED,this.onFragBuffered,this),Bt.on(Rt.Events.FRAG_LOADED,this.onFragLoaded,this)},Ut._unregisterListeners=function(){var Bt=this.hls;Bt.off(Rt.Events.BUFFER_APPENDED,this.onBufferAppended,this),Bt.off(Rt.Events.FRAG_BUFFERED,this.onFragBuffered,this),Bt.off(Rt.Events.FRAG_LOADED,this.onFragLoaded,this)},Ut.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},Ut.getAppendedFrag=function(Bt,Ft){if(Ft===Dt.PlaylistLevelType.MAIN){var tr=this.activeFragment,cr=this.activeParts;if(!tr)return null;if(cr)for(var Kt=cr.length;Kt--;){var Zt=cr[Kt],rr=Zt?Zt.end:tr.appendedPTS;if(Zt.start<=Bt&&rr!==void 0&&Bt<=rr)return Kt>9&&(this.activeParts=cr.slice(Kt-9)),Zt}else if(tr.start<=Bt&&tr.appendedPTS!==void 0&&Bt<=tr.appendedPTS)return tr}return this.getBufferedFrag(Bt,Ft)},Ut.getBufferedFrag=function(Bt,Ft){for(var tr=this.fragments,cr=Object.keys(tr),Kt=cr.length;Kt--;){var Zt=tr[cr[Kt]];if((Zt==null?void 0:Zt.body.type)===Ft&&Zt.buffered){var rr=Zt.body;if(rr.start<=Bt&&Bt<=rr.end)return rr}}return null},Ut.detectEvictedFragments=function(Bt,Ft,tr){var cr=this;this.timeRanges&&(this.timeRanges[Bt]=Ft),Object.keys(this.fragments).forEach(function(Kt){var Zt=cr.fragments[Kt];if(Zt){if(!Zt.buffered&&!Zt.loaded){Zt.body.type===tr&&cr.removeFragment(Zt.body);return}var rr=Zt.range[Bt];rr&&rr.time.some(function(ar){var sr=!cr.isTimeBuffered(ar.startPTS,ar.endPTS,Ft);return sr&&cr.removeFragment(Zt.body),sr})}})},Ut.detectPartialFragments=function(Bt){var Ft=this,tr=this.timeRanges,cr=Bt.frag,Kt=Bt.part;if(!(!tr||cr.sn==="initSegment")){var Zt=Wt(cr),rr=this.fragments[Zt];rr&&(Object.keys(tr).forEach(function(ar){var sr=cr.elementaryStreams[ar];if(sr){var dr=tr[ar],fr=Kt!==null||sr.partial===!0;rr.range[ar]=Ft.getBufferedTimes(cr,Kt,fr,dr)}}),rr.loaded=null,Object.keys(rr.range).length?(rr.buffered=!0,rr.body.endList&&(this.endListFragments[rr.body.type]=rr)):this.removeFragment(rr.body))}},Ut.fragBuffered=function(Bt){var Ft=Wt(Bt),tr=this.fragments[Ft];tr&&(tr.loaded=null,tr.buffered=!0)},Ut.getBufferedTimes=function(Bt,Ft,tr,cr){for(var Kt={time:[],partial:tr},Zt=Ft?Ft.start:Bt.start,rr=Ft?Ft.end:Bt.end,ar=Bt.minEndPTS||rr,sr=Bt.maxStartPTS||Zt,dr=0;dr<cr.length;dr++){var fr=cr.start(dr)-this.bufferPadding,pr=cr.end(dr)+this.bufferPadding;if(sr>=fr&&ar<=pr){Kt.time.push({startPTS:Math.max(Zt,cr.start(dr)),endPTS:Math.min(rr,cr.end(dr))});break}else if(Zt<pr&&rr>fr)Kt.partial=!0,Kt.time.push({startPTS:Math.max(Zt,cr.start(dr)),endPTS:Math.min(rr,cr.end(dr))});else if(rr<=fr)break}return Kt},Ut.getPartialFragment=function(Bt){var Ft=null,tr,cr,Kt,Zt=0,rr=this.bufferPadding,ar=this.fragments;return Object.keys(ar).forEach(function(sr){var dr=ar[sr];dr&&zt(dr)&&(cr=dr.body.start-rr,Kt=dr.body.end+rr,Bt>=cr&&Bt<=Kt&&(tr=Math.min(Bt-cr,Kt-Bt),Zt<=tr&&(Ft=dr.body,Zt=tr)))}),Ft},Ut.isEndListAppended=function(Bt){var Ft=this.endListFragments[Bt];return Ft!==void 0&&(Ft.buffered||zt(Ft))},Ut.getState=function(Bt){var Ft=Wt(Bt),tr=this.fragments[Ft];return tr?tr.buffered?zt(tr)?kt.PARTIAL:kt.OK:kt.APPENDING:kt.NOT_LOADED},Ut.isTimeBuffered=function(Bt,Ft,tr){for(var cr,Kt,Zt=0;Zt<tr.length;Zt++){if(cr=tr.start(Zt)-this.bufferPadding,Kt=tr.end(Zt)+this.bufferPadding,Bt>=cr&&Ft<=Kt)return!0;if(Ft<=cr)return!1}return!1},Ut.onFragLoaded=function(Bt,Ft){var tr=Ft.frag,cr=Ft.part;if(!(tr.sn==="initSegment"||tr.bitrateTest||cr)){var Kt=Wt(tr);this.fragments[Kt]={body:tr,loaded:Ft,buffered:!1,range:Object.create(null)}}},Ut.onBufferAppended=function(Bt,Ft){var tr=this,cr=Ft.frag,Kt=Ft.part,Zt=Ft.timeRanges;if(cr.type===Dt.PlaylistLevelType.MAIN)if(this.activeFragment!==cr&&(this.activeFragment=cr,cr.appendedPTS=void 0),Kt){var rr=this.activeParts;rr||(this.activeParts=rr=[]),rr.push(Kt)}else this.activeParts=null;this.timeRanges=Zt,Object.keys(Zt).forEach(function(ar){var sr=Zt[ar];if(tr.detectEvictedFragments(ar,sr),!Kt&&cr.type===Dt.PlaylistLevelType.MAIN){var dr=cr.elementaryStreams[ar];if(!dr)return;for(var fr=0;fr<sr.length;fr++){var pr=sr.end(fr);pr<=dr.endPTS&&pr>dr.startPTS?cr.appendedPTS=Math.max(pr,cr.appendedPTS||0):cr.appendedPTS=dr.endPTS}}})},Ut.onFragBuffered=function(Bt,Ft){this.detectPartialFragments(Ft)},Ut.hasFragment=function(Bt){var Ft=Wt(Bt);return!!this.fragments[Ft]},Ut.removeFragmentsInRange=function(Bt,Ft,tr){var cr=this;Object.keys(this.fragments).forEach(function(Kt){var Zt=cr.fragments[Kt];if(Zt&&Zt.buffered){var rr=Zt.body;rr.type===tr&&rr.start<Ft&&rr.end>Bt&&cr.removeFragment(rr)}})},Ut.removeFragment=function(Bt){var Ft=Wt(Bt);Bt.stats.loaded=0,Bt.clearElementaryStreamInfo(),Bt.appendedPTS=void 0,delete this.fragments[Ft],Bt.endList&&delete this.endListFragments[Bt.type]},Ut.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},nr}();function zt(nr){var Ut,Ht;return nr.buffered&&(((Ut=nr.range.video)===null||Ut===void 0?void 0:Ut.partial)||((Ht=nr.range.audio)===null||Ht===void 0?void 0:Ht.partial))}function Wt(nr){return nr.type+"_"+nr.level+"_"+nr.urlId+"_"+nr.sn}},"./src/controller/gap-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{MAX_START_GAP_JUMP:()=>Wt,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>nr,SKIP_BUFFER_RANGE_START:()=>Ut,STALL_MINIMUM_DURATION_MS:()=>zt,default:()=>Ht});var Rt=Ct("./src/utils/buffer-helper.ts"),Dt=Ct("./src/errors.ts"),kt=Ct("./src/events.ts"),Nt=Ct("./src/utils/logger.ts"),zt=250,Wt=2,nr=.1,Ut=.05,Ht=function(){function Bt(tr,cr,Kt,Zt){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=tr,this.media=cr,this.fragmentTracker=Kt,this.hls=Zt}var Ft=Bt.prototype;return Ft.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},Ft.poll=function(cr,Kt){var Zt=this.config,rr=this.media,ar=this.stalled;if(rr!==null){var sr=rr.currentTime,dr=rr.seeking,fr=this.seeking&&!dr,pr=!this.seeking&&dr;if(this.seeking=dr,sr!==cr){if(this.moved=!0,ar!==null){if(this.stallReported){var xr=self.performance.now()-ar;Nt.logger.warn("playback not stuck anymore @"+sr+", after "+Math.round(xr)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((pr||fr)&&(this.stalled=null),!(rr.paused&&!dr||rr.ended||rr.playbackRate===0||!Rt.BufferHelper.getBuffered(rr).length)){var lr=Rt.BufferHelper.bufferInfo(rr,sr,0),hr=lr.len>0,ur=lr.nextStart||0;if(!(!hr&&!ur)){if(dr){var mr=lr.len>Wt,ir=!ur||Kt&&Kt.start<=sr||ur-sr>Wt&&!this.fragmentTracker.getPartialFragment(sr);if(mr||ir)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var _r,yr=Math.max(ur,lr.start||0)-sr,gr=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,Sr=gr==null||(_r=gr.details)===null||_r===void 0?void 0:_r.live,Tr=Sr?gr.details.targetduration*2:Wt;if(yr>0&&yr<=Tr){this._trySkipBufferHole(null);return}}var br=self.performance.now();if(ar===null){this.stalled=br;return}var Ar=br-ar;if(!(!dr&&Ar>=zt&&(this._reportStall(lr),!this.media))){var Or=Rt.BufferHelper.bufferInfo(rr,sr,Zt.maxBufferHole);this._tryFixBufferStall(Or,Ar)}}}}},Ft._tryFixBufferStall=function(cr,Kt){var Zt=this.config,rr=this.fragmentTracker,ar=this.media;if(ar!==null){var sr=ar.currentTime,dr=rr.getPartialFragment(sr);if(dr){var fr=this._trySkipBufferHole(dr);if(fr||!this.media)return}cr.len>Zt.maxBufferHole&&Kt>Zt.highBufferWatchdogPeriod*1e3&&(Nt.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},Ft._reportStall=function(cr){var Kt=this.hls,Zt=this.media,rr=this.stallReported;!rr&&Zt&&(this.stallReported=!0,Nt.logger.warn("Playback stalling at @"+Zt.currentTime+" due to low buffer ("+JSON.stringify(cr)+")"),Kt.trigger(kt.Events.ERROR,{type:Dt.ErrorTypes.MEDIA_ERROR,details:Dt.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:cr.len}))},Ft._trySkipBufferHole=function(cr){var Kt=this.config,Zt=this.hls,rr=this.media;if(rr===null)return 0;for(var ar=rr.currentTime,sr=0,dr=Rt.BufferHelper.getBuffered(rr),fr=0;fr<dr.length;fr++){var pr=dr.start(fr);if(ar+Kt.maxBufferHole>=sr&&ar<pr){var xr=Math.max(pr+Ut,rr.currentTime+nr);return Nt.logger.warn("skipping hole, adjusting currentTime from "+ar+" to "+xr),this.moved=!0,this.stalled=null,rr.currentTime=xr,cr&&Zt.trigger(kt.Events.ERROR,{type:Dt.ErrorTypes.MEDIA_ERROR,details:Dt.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+ar+" to "+xr,frag:cr}),xr}sr=dr.end(fr)}return 0},Ft._tryNudgeBuffer=function(){var cr=this.config,Kt=this.hls,Zt=this.media,rr=this.nudgeRetry;if(Zt!==null){var ar=Zt.currentTime;if(this.nudgeRetry++,rr<cr.nudgeMaxRetry){var sr=ar+(rr+1)*cr.nudgeOffset;Nt.logger.warn("Nudging 'currentTime' from "+ar+" to "+sr),Zt.currentTime=sr,Kt.trigger(kt.Events.ERROR,{type:Dt.ErrorTypes.MEDIA_ERROR,details:Dt.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else Nt.logger.error("Playhead still not moving while enough data buffered @"+ar+" after "+cr.nudgeMaxRetry+" nudges"),Kt.trigger(kt.Events.ERROR,{type:Dt.ErrorTypes.MEDIA_ERROR,details:Dt.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},Bt}()},"./src/controller/id3-track-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>cr});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/events.ts"),kt=Ct("./src/utils/texttrack-utils.ts"),Nt=Ct("./src/demux/id3.ts"),zt=Ct("./src/loader/date-range.ts"),Wt=Ct("./src/types/demuxer.ts"),nr=.25;function Ut(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var Ht=function(){var Kt=Ut();try{new Kt(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function Bt(Kt,Zt){return Kt.getTime()/1e3-Zt}function Ft(Kt){return Uint8Array.from(Kt.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var tr=function(){function Kt(rr){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=rr,this._registerListeners()}var Zt=Kt.prototype;return Zt.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},Zt._registerListeners=function(){var ar=this.hls;ar.on(Dt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),ar.on(Dt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),ar.on(Dt.Events.MANIFEST_LOADING,this.onManifestLoading,this),ar.on(Dt.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),ar.on(Dt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),ar.on(Dt.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},Zt._unregisterListeners=function(){var ar=this.hls;ar.off(Dt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),ar.off(Dt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),ar.off(Dt.Events.MANIFEST_LOADING,this.onManifestLoading,this),ar.off(Dt.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),ar.off(Dt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),ar.off(Dt.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},Zt.onMediaAttached=function(ar,sr){this.media=sr.media},Zt.onMediaDetaching=function(){this.id3Track&&((0,kt.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},Zt.onManifestLoading=function(){this.dateRangeCuesAppended={}},Zt.createTrack=function(ar){var sr=this.getID3Track(ar.textTracks);return sr.mode="hidden",sr},Zt.getID3Track=function(ar){if(this.media){for(var sr=0;sr<ar.length;sr++){var dr=ar[sr];if(dr.kind==="metadata"&&dr.label==="id3")return(0,kt.sendAddTrackEvent)(dr,this.media),dr}return this.media.addTextTrack("metadata","id3")}},Zt.onFragParsingMetadata=function(ar,sr){if(this.media){var dr=this.hls.config,fr=dr.enableEmsgMetadataCues,pr=dr.enableID3MetadataCues;if(!(!fr&&!pr)){var xr=sr.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var lr=Ut(),hr=0;hr<xr.length;hr++){var ur=xr[hr].type;if(!(ur===Wt.MetadataSchema.emsg&&!fr||!pr)){var mr=Nt.getID3Frames(xr[hr].data);if(mr){var ir=xr[hr].pts,_r=ir+xr[hr].duration;_r>Ht&&(_r=Ht);var yr=_r-ir;yr<=0&&(_r=ir+nr);for(var gr=0;gr<mr.length;gr++){var Sr=mr[gr];if(!Nt.isTimeStampFrame(Sr)){this.updateId3CueEnds(ir);var Tr=new lr(ir,_r,"");Tr.value=Sr,ur&&(Tr.type=ur),this.id3Track.addCue(Tr)}}}}}}}},Zt.updateId3CueEnds=function(ar){var sr,dr=(sr=this.id3Track)===null||sr===void 0?void 0:sr.cues;if(dr)for(var fr=dr.length;fr--;){var pr=dr[fr];pr.startTime<ar&&pr.endTime===Ht&&(pr.endTime=ar)}},Zt.onBufferFlushing=function(ar,sr){var dr=sr.startOffset,fr=sr.endOffset,pr=sr.type,xr=this.id3Track,lr=this.hls;if(lr){var hr=lr.config,ur=hr.enableEmsgMetadataCues,mr=hr.enableID3MetadataCues;if(xr&&(ur||mr)){var ir;pr==="audio"?ir=function(yr){return yr.type===Wt.MetadataSchema.audioId3&&mr}:pr==="video"?ir=function(yr){return yr.type===Wt.MetadataSchema.emsg&&ur}:ir=function(yr){return yr.type===Wt.MetadataSchema.audioId3&&mr||yr.type===Wt.MetadataSchema.emsg&&ur},(0,kt.removeCuesInRange)(xr,dr,fr,ir)}}},Zt.onLevelUpdated=function(ar,sr){var dr=this,fr=sr.details;if(!(!this.media||!fr.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)){var pr=this.dateRangeCuesAppended,xr=this.id3Track,lr=fr.dateRanges,hr=Object.keys(lr);if(xr)for(var ur=Object.keys(pr).filter(function(br){return!hr.includes(br)}),mr=function(Ar){var Or=ur[Ar];Object.keys(pr[Or].cues).forEach(function(Ir){xr.removeCue(pr[Or].cues[Ir])}),delete pr[Or]},ir=ur.length;ir--;)mr(ir);var _r=fr.fragments[fr.fragments.length-1];if(!(hr.length===0||!(0,Rt.isFiniteNumber)(_r==null?void 0:_r.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var yr=_r.programDateTime/1e3-_r.start,gr=Ut(),Sr=function(Ar){var Or=hr[Ar],Ir=lr[Or],Cr=pr[Or],Rr=(Cr==null?void 0:Cr.cues)||{},Pr=(Cr==null?void 0:Cr.durationKnown)||!1,wr=Bt(Ir.startDate,yr),Dr=Ht,kr=Ir.endDate;if(kr)Dr=Bt(kr,yr),Pr=!0;else if(Ir.endOnNext&&!Pr){var Fr=hr.reduce(function(zr,Xr){var Zr=lr[Xr];return Zr.class===Ir.class&&Zr.id!==Xr&&Zr.startDate>Ir.startDate&&zr.push(Zr),zr},[]).sort(function(zr,Xr){return zr.startDate.getTime()-Xr.startDate.getTime()})[0];Fr&&(Dr=Bt(Fr.startDate,yr),Pr=!0)}for(var Br=Object.keys(Ir.attr),Kr=0;Kr<Br.length;Kr++){var Vr=Br[Kr];if(!(Vr===zt.DateRangeAttribute.ID||Vr===zt.DateRangeAttribute.CLASS||Vr===zt.DateRangeAttribute.START_DATE||Vr===zt.DateRangeAttribute.DURATION||Vr===zt.DateRangeAttribute.END_DATE||Vr===zt.DateRangeAttribute.END_ON_NEXT)){var Gr=Rr[Vr];if(Gr)Pr&&!Cr.durationKnown&&(Gr.endTime=Dr);else{var jr=Ir.attr[Vr];Gr=new gr(wr,Dr,""),(Vr===zt.DateRangeAttribute.SCTE35_OUT||Vr===zt.DateRangeAttribute.SCTE35_IN)&&(jr=Ft(jr)),Gr.value={key:Vr,data:jr},Gr.type=Wt.MetadataSchema.dateRange,dr.id3Track.addCue(Gr),Rr[Vr]=Gr}}}pr[Or]={cues:Rr,dateRange:Ir,durationKnown:Pr}},Tr=0;Tr<hr.length;Tr++)Sr(Tr)}}},Kt}();const cr=tr},"./src/controller/latency-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Ut});var Rt=Ct("./src/errors.ts"),Dt=Ct("./src/events.ts"),kt=Ct("./src/utils/logger.ts");function Nt(Ht,Bt){for(var Ft=0;Ft<Bt.length;Ft++){var tr=Bt[Ft];tr.enumerable=tr.enumerable||!1,tr.configurable=!0,"value"in tr&&(tr.writable=!0),Object.defineProperty(Ht,Wt(tr.key),tr)}}function zt(Ht,Bt,Ft){return Bt&&Nt(Ht.prototype,Bt),Ft&&Nt(Ht,Ft),Object.defineProperty(Ht,"prototype",{writable:!1}),Ht}function Wt(Ht){var Bt=nr(Ht,"string");return typeof Bt=="symbol"?Bt:String(Bt)}function nr(Ht,Bt){if(typeof Ht!="object"||Ht===null)return Ht;var Ft=Ht[Symbol.toPrimitive];if(Ft!==void 0){var tr=Ft.call(Ht,Bt||"default");if(typeof tr!="object")return tr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Bt==="string"?String:Number)(Ht)}var Ut=function(){function Ht(Ft){var tr=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return tr.timeupdate()},this.hls=Ft,this.config=Ft.config,this.registerListeners()}var Bt=Ht.prototype;return Bt.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},Bt.registerListeners=function(){this.hls.on(Dt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(Dt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(Dt.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(Dt.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(Dt.Events.ERROR,this.onError,this)},Bt.unregisterListeners=function(){this.hls.off(Dt.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(Dt.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(Dt.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(Dt.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(Dt.Events.ERROR,this.onError)},Bt.onMediaAttached=function(tr,cr){this.media=cr.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},Bt.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},Bt.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},Bt.onLevelUpdated=function(tr,cr){var Kt=cr.details;this.levelDetails=Kt,Kt.advanced&&this.timeupdate(),!Kt.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},Bt.onError=function(tr,cr){cr.details===Rt.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,kt.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},Bt.timeupdate=function(){var tr=this.media,cr=this.levelDetails;if(!(!tr||!cr)){this.currentTime=tr.currentTime;var Kt=this.computeLatency();if(Kt!==null){this._latency=Kt;var Zt=this.config,rr=Zt.lowLatencyMode,ar=Zt.maxLiveSyncPlaybackRate;if(!(!rr||ar===1)){var sr=this.targetLatency;if(sr!==null){var dr=Kt-sr,fr=Math.min(this.maxLatency,sr+cr.targetduration),pr=dr<fr;if(cr.live&&pr&&dr>.05&&this.forwardBufferLength>1){var xr=Math.min(2,Math.max(1,ar)),lr=Math.round(2/(1+Math.exp(-.75*dr-this.edgeStalled))*20)/20;tr.playbackRate=Math.min(xr,Math.max(1,lr))}else tr.playbackRate!==1&&tr.playbackRate!==0&&(tr.playbackRate=1)}}}}},Bt.estimateLiveEdge=function(){var tr=this.levelDetails;return tr===null?null:tr.edge+tr.age},Bt.computeLatency=function(){var tr=this.estimateLiveEdge();return tr===null?null:tr-this.currentTime},zt(Ht,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var tr=this.config,cr=this.levelDetails;return tr.liveMaxLatencyDuration!==void 0?tr.liveMaxLatencyDuration:cr?tr.liveMaxLatencyDurationCount*cr.targetduration:0}},{key:"targetLatency",get:function(){var tr=this.levelDetails;if(tr===null)return null;var cr=tr.holdBack,Kt=tr.partHoldBack,Zt=tr.targetduration,rr=this.config,ar=rr.liveSyncDuration,sr=rr.liveSyncDurationCount,dr=rr.lowLatencyMode,fr=this.hls.userConfig,pr=dr&&Kt||cr;(fr.liveSyncDuration||fr.liveSyncDurationCount||pr===0)&&(pr=ar!==void 0?ar:sr*Zt);var xr=Zt,lr=1;return pr+Math.min(this.stallCount*lr,xr)}},{key:"liveSyncPosition",get:function(){var tr=this.estimateLiveEdge(),cr=this.targetLatency,Kt=this.levelDetails;if(tr===null||cr===null||Kt===null)return null;var Zt=Kt.edge,rr=tr-cr-this.edgeStalled,ar=Zt-Kt.totalduration,sr=Zt-(this.config.lowLatencyMode&&Kt.partTarget||Kt.targetduration);return Math.min(Math.max(ar,rr),sr)}},{key:"drift",get:function(){var tr=this.levelDetails;return tr===null?1:tr.drift}},{key:"edgeStalled",get:function(){var tr=this.levelDetails;if(tr===null)return 0;var cr=(this.config.lowLatencyMode&&tr.partTarget||tr.targetduration)*3;return Math.max(tr.age-cr,0)}},{key:"forwardBufferLength",get:function(){var tr=this.media,cr=this.levelDetails;if(!tr||!cr)return 0;var Kt=tr.buffered.length;return(Kt?tr.buffered.end(Kt-1):cr.edge)-this.currentTime}}]),Ht}()},"./src/controller/level-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>rr});var Rt=Ct("./src/types/level.ts"),Dt=Ct("./src/events.ts"),kt=Ct("./src/errors.ts"),Nt=Ct("./src/utils/codecs.ts"),zt=Ct("./src/controller/level-helper.ts"),Wt=Ct("./src/controller/base-playlist-controller.ts"),nr=Ct("./src/types/loader.ts");function Ut(){return Ut=Object.assign?Object.assign.bind():function(ar){for(var sr=1;sr<arguments.length;sr++){var dr=arguments[sr];for(var fr in dr)Object.prototype.hasOwnProperty.call(dr,fr)&&(ar[fr]=dr[fr])}return ar},Ut.apply(this,arguments)}function Ht(ar,sr){for(var dr=0;dr<sr.length;dr++){var fr=sr[dr];fr.enumerable=fr.enumerable||!1,fr.configurable=!0,"value"in fr&&(fr.writable=!0),Object.defineProperty(ar,Ft(fr.key),fr)}}function Bt(ar,sr,dr){return sr&&Ht(ar.prototype,sr),dr&&Ht(ar,dr),Object.defineProperty(ar,"prototype",{writable:!1}),ar}function Ft(ar){var sr=tr(ar,"string");return typeof sr=="symbol"?sr:String(sr)}function tr(ar,sr){if(typeof ar!="object"||ar===null)return ar;var dr=ar[Symbol.toPrimitive];if(dr!==void 0){var fr=dr.call(ar,sr||"default");if(typeof fr!="object")return fr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(sr==="string"?String:Number)(ar)}function cr(ar,sr){ar.prototype=Object.create(sr.prototype),ar.prototype.constructor=ar,Kt(ar,sr)}function Kt(ar,sr){return Kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(fr,pr){return fr.__proto__=pr,fr},Kt(ar,sr)}var Zt=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),rr=function(ar){cr(sr,ar);function sr(fr){var pr;return pr=ar.call(this,fr,"[level-controller]")||this,pr._levels=[],pr._firstLevel=-1,pr._startLevel=void 0,pr.currentLevelIndex=-1,pr.manualLevelIndex=-1,pr.onParsedComplete=void 0,pr._registerListeners(),pr}var dr=sr.prototype;return dr._registerListeners=function(){var pr=this.hls;pr.on(Dt.Events.MANIFEST_LOADED,this.onManifestLoaded,this),pr.on(Dt.Events.LEVEL_LOADED,this.onLevelLoaded,this),pr.on(Dt.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),pr.on(Dt.Events.FRAG_LOADED,this.onFragLoaded,this),pr.on(Dt.Events.ERROR,this.onError,this)},dr._unregisterListeners=function(){var pr=this.hls;pr.off(Dt.Events.MANIFEST_LOADED,this.onManifestLoaded,this),pr.off(Dt.Events.LEVEL_LOADED,this.onLevelLoaded,this),pr.off(Dt.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),pr.off(Dt.Events.FRAG_LOADED,this.onFragLoaded,this),pr.off(Dt.Events.ERROR,this.onError,this)},dr.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,ar.prototype.destroy.call(this)},dr.startLoad=function(){var pr=this._levels;pr.forEach(function(xr){xr.loadError=0}),ar.prototype.startLoad.call(this)},dr.onManifestLoaded=function(pr,xr){var lr=[],hr=[],ur=[],mr,ir={},_r,yr=!1,gr=!1,Sr=!1;if(xr.levels.forEach(function(Or){var Ir=Or.attrs;yr=yr||!!(Or.width&&Or.height),gr=gr||!!Or.videoCodec,Sr=Sr||!!Or.audioCodec,Zt&&Or.audioCodec&&Or.audioCodec.indexOf("mp4a.40.34")!==-1&&(Or.audioCodec=void 0);var Cr=Or.bitrate+"-"+Or.attrs.RESOLUTION+"-"+Or.attrs.CODECS;_r=ir[Cr],_r?_r.url.push(Or.url):(_r=new Rt.Level(Or),ir[Cr]=_r,lr.push(_r)),Ir&&(Ir.AUDIO&&(0,zt.addGroupId)(_r,"audio",Ir.AUDIO),Ir.SUBTITLES&&(0,zt.addGroupId)(_r,"text",Ir.SUBTITLES))}),(yr||gr)&&Sr&&(lr=lr.filter(function(Or){var Ir=Or.videoCodec,Cr=Or.width,Rr=Or.height;return!!Ir||!!(Cr&&Rr)})),lr=lr.filter(function(Or){var Ir=Or.audioCodec,Cr=Or.videoCodec;return(!Ir||(0,Nt.isCodecSupportedInMp4)(Ir,"audio"))&&(!Cr||(0,Nt.isCodecSupportedInMp4)(Cr,"video"))}),xr.audioTracks&&(hr=xr.audioTracks.filter(function(Or){return!Or.audioCodec||(0,Nt.isCodecSupportedInMp4)(Or.audioCodec,"audio")}),(0,zt.assignTrackIdsByGroup)(hr)),xr.subtitles&&(ur=xr.subtitles,(0,zt.assignTrackIdsByGroup)(ur)),lr.length>0){mr=lr[0].bitrate,lr.sort(function(Or,Ir){return Or.attrs["HDCP-LEVEL"]!==Ir.attrs["HDCP-LEVEL"]?(Or.attrs["HDCP-LEVEL"]||"")>(Ir.attrs["HDCP-LEVEL"]||"")?1:-1:Or.bitrate!==Ir.bitrate?Or.bitrate-Ir.bitrate:Or.attrs.SCORE!==Ir.attrs.SCORE?Or.attrs.decimalFloatingPoint("SCORE")-Ir.attrs.decimalFloatingPoint("SCORE"):yr&&Or.height!==Ir.height?Or.height-Ir.height:0}),this._levels=lr;for(var Tr=0;Tr<lr.length;Tr++)if(lr[Tr].bitrate===mr){this._firstLevel=Tr,this.log("manifest loaded, "+lr.length+" level(s) found, first bitrate: "+mr);break}var br=Sr&&!gr,Ar={levels:lr,audioTracks:hr,subtitleTracks:ur,sessionData:xr.sessionData,sessionKeys:xr.sessionKeys,firstLevel:this._firstLevel,stats:xr.stats,audio:Sr,video:gr,altAudio:!br&&hr.some(function(Or){return!!Or.url})};this.hls.trigger(Dt.Events.MANIFEST_PARSED,Ar),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(Dt.Events.ERROR,{type:kt.ErrorTypes.MEDIA_ERROR,details:kt.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:xr.url,reason:"no level with compatible codecs found in manifest"})},dr.onError=function(pr,xr){var lr,hr;if(ar.prototype.onError.call(this,pr,xr),!xr.fatal){var ur=xr.context,mr=this._levels[this.currentLevelIndex];if(ur&&(ur.type===nr.PlaylistContextType.AUDIO_TRACK&&mr.audioGroupIds&&ur.groupId===mr.audioGroupIds[mr.urlId]||ur.type===nr.PlaylistContextType.SUBTITLE_TRACK&&mr.textGroupIds&&ur.groupId===mr.textGroupIds[mr.urlId])){this.redundantFailover(this.currentLevelIndex);return}var ir=!1,_r=!0,yr;switch(xr.details){case kt.ErrorDetails.FRAG_LOAD_ERROR:case kt.ErrorDetails.FRAG_LOAD_TIMEOUT:case kt.ErrorDetails.KEY_LOAD_ERROR:case kt.ErrorDetails.KEY_LOAD_TIMEOUT:if(xr.frag){var gr=xr.frag.type===nr.PlaylistLevelType.MAIN?xr.frag.level:this.currentLevelIndex,Sr=this._levels[gr];Sr?(Sr.fragmentError++,Sr.fragmentError>this.hls.config.fragLoadingMaxRetry&&(yr=gr)):yr=gr}break;case kt.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{var Tr=mr.attrs["HDCP-LEVEL"];Tr&&(this.hls.maxHdcpLevel=Rt.HdcpLevels[Rt.HdcpLevels.indexOf(Tr)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'))}case kt.ErrorDetails.FRAG_PARSING_ERROR:case kt.ErrorDetails.KEY_SYSTEM_NO_SESSION:yr=((lr=xr.frag)===null||lr===void 0?void 0:lr.type)===nr.PlaylistLevelType.MAIN?xr.frag.level:this.currentLevelIndex,xr.levelRetry=!1;break;case kt.ErrorDetails.LEVEL_LOAD_ERROR:case kt.ErrorDetails.LEVEL_LOAD_TIMEOUT:ur&&(ur.deliveryDirectives&&(_r=!1),yr=ur.level),ir=!0;break;case kt.ErrorDetails.REMUX_ALLOC_ERROR:yr=(hr=xr.level)!=null?hr:this.currentLevelIndex,ir=!0;break}yr!==void 0&&this.recoverLevel(xr,yr,ir,_r)}},dr.recoverLevel=function(pr,xr,lr,hr){var ur=pr.details,mr=this._levels[xr];if(mr.loadError++,lr){var ir=this.retryLoadingOrFail(pr);if(ir)pr.levelRetry=!0;else{this.currentLevelIndex=-1;return}}if(hr){var _r=mr.url.length;if(_r>1&&mr.loadError<_r)pr.levelRetry=!0,this.redundantFailover(xr);else if(this.manualLevelIndex===-1){for(var yr=-1,gr=this._levels,Sr=gr.length;Sr--;){var Tr=(Sr+this.currentLevelIndex)%gr.length;if(Tr!==this.currentLevelIndex&&gr[Tr].loadError===0){yr=Tr;break}}yr>-1&&this.currentLevelIndex!==yr?(this.warn(ur+": switch to "+yr),pr.levelRetry=!0,this.hls.nextAutoLevel=yr):pr.levelRetry===!1&&(pr.fatal=!0)}}},dr.redundantFailover=function(pr){var xr=this._levels[pr],lr=xr.url.length;if(lr>1){var hr=(xr.urlId+1)%lr;this.warn("Switching to redundant URL-id "+hr),this._levels.forEach(function(ur){ur.urlId=hr}),this.level=pr}},dr.onFragLoaded=function(pr,xr){var lr=xr.frag;if(lr!==void 0&&lr.type===nr.PlaylistLevelType.MAIN){var hr=this._levels[lr.level];hr!==void 0&&(hr.fragmentError=0,hr.loadError=0)}},dr.onLevelLoaded=function(pr,xr){var lr,hr=xr.level,ur=xr.details,mr=this._levels[hr];if(!mr){var ir;this.warn("Invalid level index "+hr),(ir=xr.deliveryDirectives)!==null&&ir!==void 0&&ir.skip&&(ur.deltaUpdateFailed=!0);return}hr===this.currentLevelIndex?(mr.fragmentError===0&&(mr.loadError=0,this.retryCount=0),this.playlistLoaded(hr,xr,mr.details)):(lr=xr.deliveryDirectives)!==null&&lr!==void 0&&lr.skip&&(ur.deltaUpdateFailed=!0)},dr.onAudioTrackSwitched=function(pr,xr){var lr=this.hls.levels[this.currentLevelIndex];if(lr&&lr.audioGroupIds){for(var hr=-1,ur=this.hls.audioTracks[xr.id].groupId,mr=0;mr<lr.audioGroupIds.length;mr++)if(lr.audioGroupIds[mr]===ur){hr=mr;break}hr!==lr.urlId&&(lr.urlId=hr,this.startLoad())}},dr.loadPlaylist=function(pr){ar.prototype.loadPlaylist.call(this);var xr=this.currentLevelIndex,lr=this._levels[xr];if(this.canLoad&&lr&&lr.url.length>0){var hr=lr.urlId,ur=lr.url[hr];if(pr)try{ur=pr.addDirectives(ur)}catch(mr){this.warn("Could not construct new URL with HLS Delivery Directives: "+mr)}this.log("Attempt loading level index "+xr+((pr==null?void 0:pr.msn)!==void 0?" at sn "+pr.msn+" part "+pr.part:"")+" with URL-id "+hr+" "+ur),this.clearTimer(),this.hls.trigger(Dt.Events.LEVEL_LOADING,{url:ur,level:xr,id:hr,deliveryDirectives:pr||null})}},dr.removeLevel=function(pr,xr){var lr=function(mr,ir){return ir!==xr},hr=this._levels.filter(function(ur,mr){return mr!==pr?!0:ur.url.length>1&&xr!==void 0?(ur.url=ur.url.filter(lr),ur.audioGroupIds&&(ur.audioGroupIds=ur.audioGroupIds.filter(lr)),ur.textGroupIds&&(ur.textGroupIds=ur.textGroupIds.filter(lr)),ur.urlId=0,!0):!1}).map(function(ur,mr){var ir=ur.details;return ir!=null&&ir.fragments&&ir.fragments.forEach(function(_r){_r.level=mr}),ur});this._levels=hr,this.hls.trigger(Dt.Events.LEVELS_UPDATED,{levels:hr})},Bt(sr,[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(pr){var xr,lr=this._levels;if(lr.length!==0&&!(this.currentLevelIndex===pr&&(xr=lr[pr])!==null&&xr!==void 0&&xr.details)){if(pr<0||pr>=lr.length){var hr=pr<0;if(this.hls.trigger(Dt.Events.ERROR,{type:kt.ErrorTypes.OTHER_ERROR,details:kt.ErrorDetails.LEVEL_SWITCH_ERROR,level:pr,fatal:hr,reason:"invalid level idx"}),hr)return;pr=Math.min(pr,lr.length-1)}this.clearTimer();var ur=this.currentLevelIndex,mr=lr[ur],ir=lr[pr];this.log("switching to level "+pr+" from "+ur),this.currentLevelIndex=pr;var _r=Ut({},ir,{level:pr,maxBitrate:ir.maxBitrate,uri:ir.uri,urlId:ir.urlId});delete _r._urlId,this.hls.trigger(Dt.Events.LEVEL_SWITCHING,_r);var yr=ir.details;if(!yr||yr.live){var gr=this.switchParams(ir.uri,mr==null?void 0:mr.details);this.loadPlaylist(gr)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(pr){this.manualLevelIndex=pr,this._startLevel===void 0&&(this._startLevel=pr),pr!==-1&&(this.level=pr)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(pr){this._firstLevel=pr}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var pr=this.hls.config.startLevel;return pr!==void 0?pr:this._firstLevel}else return this._startLevel},set:function(pr){this._startLevel=pr}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(pr){this.level=pr,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=pr)}}]),sr}(Wt.default)},"./src/controller/level-helper.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{addGroupId:()=>zt,addSliding:()=>Zt,adjustSliding:()=>Kt,assignTrackIdsByGroup:()=>Wt,computeReloadInterval:()=>rr,getFragmentWithSN:()=>ar,getPartWith:()=>sr,mapFragmentIntersection:()=>cr,mapPartIntersection:()=>tr,mergeDetails:()=>Bt,updateFragPTSDTS:()=>Ht,updatePTS:()=>nr});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/utils/logger.ts"),kt=Ct("./src/loader/date-range.ts");function Nt(){return Nt=Object.assign?Object.assign.bind():function(dr){for(var fr=1;fr<arguments.length;fr++){var pr=arguments[fr];for(var xr in pr)Object.prototype.hasOwnProperty.call(pr,xr)&&(dr[xr]=pr[xr])}return dr},Nt.apply(this,arguments)}function zt(dr,fr,pr){switch(fr){case"audio":dr.audioGroupIds||(dr.audioGroupIds=[]),dr.audioGroupIds.push(pr);break;case"text":dr.textGroupIds||(dr.textGroupIds=[]),dr.textGroupIds.push(pr);break}}function Wt(dr){var fr={};dr.forEach(function(pr){var xr=pr.groupId||"";pr.id=fr[xr]=fr[xr]||0,fr[xr]++})}function nr(dr,fr,pr){var xr=dr[fr],lr=dr[pr];Ut(xr,lr)}function Ut(dr,fr){var pr=fr.startPTS;if((0,Rt.isFiniteNumber)(pr)){var xr=0,lr;fr.sn>dr.sn?(xr=pr-dr.start,lr=dr):(xr=dr.start-pr,lr=fr),lr.duration!==xr&&(lr.duration=xr)}else if(fr.sn>dr.sn){var hr=dr.cc===fr.cc;hr&&dr.minEndPTS?fr.start=dr.start+(dr.minEndPTS-dr.start):fr.start=dr.start+dr.duration}else fr.start=Math.max(dr.start-fr.duration,0)}function Ht(dr,fr,pr,xr,lr,hr){var ur=xr-pr;ur<=0&&(Dt.logger.warn("Fragment should have a positive duration",fr),xr=pr+fr.duration,hr=lr+fr.duration);var mr=pr,ir=xr,_r=fr.startPTS,yr=fr.endPTS;if((0,Rt.isFiniteNumber)(_r)){var gr=Math.abs(_r-pr);(0,Rt.isFiniteNumber)(fr.deltaPTS)?fr.deltaPTS=Math.max(gr,fr.deltaPTS):fr.deltaPTS=gr,mr=Math.max(pr,_r),pr=Math.min(pr,_r),lr=Math.min(lr,fr.startDTS),ir=Math.min(xr,yr),xr=Math.max(xr,yr),hr=Math.max(hr,fr.endDTS)}fr.duration=xr-pr;var Sr=pr-fr.start;fr.start=fr.startPTS=pr,fr.maxStartPTS=mr,fr.startDTS=lr,fr.endPTS=xr,fr.minEndPTS=ir,fr.endDTS=hr;var Tr=fr.sn;if(!dr||Tr<dr.startSN||Tr>dr.endSN)return 0;var br,Ar=Tr-dr.startSN,Or=dr.fragments;for(Or[Ar]=fr,br=Ar;br>0;br--)Ut(Or[br],Or[br-1]);for(br=Ar;br<Or.length-1;br++)Ut(Or[br],Or[br+1]);return dr.fragmentHint&&Ut(Or[Or.length-1],dr.fragmentHint),dr.PTSKnown=dr.alignedSliding=!0,Sr}function Bt(dr,fr){for(var pr=null,xr=dr.fragments,lr=xr.length-1;lr>=0;lr--){var hr=xr[lr].initSegment;if(hr){pr=hr;break}}dr.fragmentHint&&delete dr.fragmentHint.endPTS;var ur=0,mr;if(cr(dr,fr,function(br,Ar){br.relurl&&(ur=br.cc-Ar.cc),(0,Rt.isFiniteNumber)(br.startPTS)&&(0,Rt.isFiniteNumber)(br.endPTS)&&(Ar.start=Ar.startPTS=br.startPTS,Ar.startDTS=br.startDTS,Ar.appendedPTS=br.appendedPTS,Ar.maxStartPTS=br.maxStartPTS,Ar.endPTS=br.endPTS,Ar.endDTS=br.endDTS,Ar.minEndPTS=br.minEndPTS,Ar.duration=br.endPTS-br.startPTS,Ar.duration&&(mr=Ar),fr.PTSKnown=fr.alignedSliding=!0),Ar.elementaryStreams=br.elementaryStreams,Ar.loader=br.loader,Ar.stats=br.stats,Ar.urlId=br.urlId,br.initSegment&&(Ar.initSegment=br.initSegment,pr=br.initSegment)}),pr){var ir=fr.fragmentHint?fr.fragments.concat(fr.fragmentHint):fr.fragments;ir.forEach(function(br){var Ar;(!br.initSegment||br.initSegment.relurl===((Ar=pr)===null||Ar===void 0?void 0:Ar.relurl))&&(br.initSegment=pr)})}if(fr.skippedSegments)if(fr.deltaUpdateFailed=fr.fragments.some(function(br){return!br}),fr.deltaUpdateFailed){Dt.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var _r=fr.skippedSegments;_r--;)fr.fragments.shift();fr.startSN=fr.fragments[0].sn,fr.startCC=fr.fragments[0].cc}else fr.canSkipDateRanges&&(fr.dateRanges=Ft(dr.dateRanges,fr.dateRanges,fr.recentlyRemovedDateranges));var yr=fr.fragments;if(ur){Dt.logger.warn("discontinuity sliding from playlist, take drift into account");for(var gr=0;gr<yr.length;gr++)yr[gr].cc+=ur}fr.skippedSegments&&(fr.startCC=fr.fragments[0].cc),tr(dr.partList,fr.partList,function(br,Ar){Ar.elementaryStreams=br.elementaryStreams,Ar.stats=br.stats}),mr?Ht(fr,mr,mr.startPTS,mr.endPTS,mr.startDTS,mr.endDTS):Kt(dr,fr),yr.length&&(fr.totalduration=fr.edge-yr[0].start),fr.driftStartTime=dr.driftStartTime,fr.driftStart=dr.driftStart;var Sr=fr.advancedDateTime;if(fr.advanced&&Sr){var Tr=fr.edge;fr.driftStart||(fr.driftStartTime=Sr,fr.driftStart=Tr),fr.driftEndTime=Sr,fr.driftEnd=Tr}else fr.driftEndTime=dr.driftEndTime,fr.driftEnd=dr.driftEnd,fr.advancedDateTime=dr.advancedDateTime}function Ft(dr,fr,pr){var xr=Nt({},dr);return pr&&pr.forEach(function(lr){delete xr[lr]}),Object.keys(fr).forEach(function(lr){var hr=new kt.DateRange(fr[lr].attr,xr[lr]);hr.isValid?xr[lr]=hr:Dt.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(fr[lr].attr)+'"')}),xr}function tr(dr,fr,pr){if(dr&&fr)for(var xr=0,lr=0,hr=dr.length;lr<=hr;lr++){var ur=dr[lr],mr=fr[lr+xr];ur&&mr&&ur.index===mr.index&&ur.fragment.sn===mr.fragment.sn?pr(ur,mr):xr--}}function cr(dr,fr,pr){for(var xr=fr.skippedSegments,lr=Math.max(dr.startSN,fr.startSN)-fr.startSN,hr=(dr.fragmentHint?1:0)+(xr?fr.endSN:Math.min(dr.endSN,fr.endSN))-fr.startSN,ur=fr.startSN-dr.startSN,mr=fr.fragmentHint?fr.fragments.concat(fr.fragmentHint):fr.fragments,ir=dr.fragmentHint?dr.fragments.concat(dr.fragmentHint):dr.fragments,_r=lr;_r<=hr;_r++){var yr=ir[ur+_r],gr=mr[_r];xr&&!gr&&_r<xr&&(gr=fr.fragments[_r]=yr),yr&&gr&&pr(yr,gr)}}function Kt(dr,fr){var pr=fr.startSN+fr.skippedSegments-dr.startSN,xr=dr.fragments;pr<0||pr>=xr.length||Zt(fr,xr[pr].start)}function Zt(dr,fr){if(fr){for(var pr=dr.fragments,xr=dr.skippedSegments;xr<pr.length;xr++)pr[xr].start+=fr;dr.fragmentHint&&(dr.fragmentHint.start+=fr)}}function rr(dr,fr){fr===void 0&&(fr=1/0);var pr=1e3*dr.targetduration;if(dr.updated){var xr=dr.fragments,lr=4;if(xr.length&&pr*lr>fr){var hr=xr[xr.length-1].duration*1e3;hr<pr&&(pr=hr)}}else pr/=2;return Math.round(pr)}function ar(dr,fr,pr){if(!dr||!dr.details)return null;var xr=dr.details,lr=xr.fragments[fr-xr.startSN];return lr||(lr=xr.fragmentHint,lr&&lr.sn===fr)?lr:fr<xr.startSN&&pr&&pr.sn===fr?pr:null}function sr(dr,fr,pr){if(!dr||!dr.details)return null;var xr=dr.details.partList;if(xr)for(var lr=xr.length;lr--;){var hr=xr[lr];if(hr.index===pr&&hr.fragment.sn===fr)return hr}return null}},"./src/controller/stream-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>fr});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/controller/base-stream-controller.ts"),kt=Ct("./src/is-supported.ts"),Nt=Ct("./src/events.ts"),zt=Ct("./src/utils/buffer-helper.ts"),Wt=Ct("./src/controller/fragment-tracker.ts"),nr=Ct("./src/types/loader.ts"),Ut=Ct("./src/loader/fragment.ts"),Ht=Ct("./src/demux/transmuxer-interface.ts"),Bt=Ct("./src/types/transmuxer.ts"),Ft=Ct("./src/controller/gap-controller.ts"),tr=Ct("./src/errors.ts");function cr(pr,xr){for(var lr=0;lr<xr.length;lr++){var hr=xr[lr];hr.enumerable=hr.enumerable||!1,hr.configurable=!0,"value"in hr&&(hr.writable=!0),Object.defineProperty(pr,Zt(hr.key),hr)}}function Kt(pr,xr,lr){return xr&&cr(pr.prototype,xr),lr&&cr(pr,lr),Object.defineProperty(pr,"prototype",{writable:!1}),pr}function Zt(pr){var xr=rr(pr,"string");return typeof xr=="symbol"?xr:String(xr)}function rr(pr,xr){if(typeof pr!="object"||pr===null)return pr;var lr=pr[Symbol.toPrimitive];if(lr!==void 0){var hr=lr.call(pr,xr||"default");if(typeof hr!="object")return hr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(xr==="string"?String:Number)(pr)}function ar(pr,xr){pr.prototype=Object.create(xr.prototype),pr.prototype.constructor=pr,sr(pr,xr)}function sr(pr,xr){return sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(hr,ur){return hr.__proto__=ur,hr},sr(pr,xr)}var dr=100,fr=function(pr){ar(xr,pr);function xr(hr,ur,mr){var ir;return ir=pr.call(this,hr,ur,mr,"[stream-controller]")||this,ir.audioCodecSwap=!1,ir.gapController=null,ir.level=-1,ir._forceStartLoad=!1,ir.altAudio=!1,ir.audioOnly=!1,ir.fragPlaying=null,ir.onvplaying=null,ir.onvseeked=null,ir.fragLastKbps=0,ir.couldBacktrack=!1,ir.backtrackFragment=null,ir.audioCodecSwitch=!1,ir.videoBuffer=null,ir._registerListeners(),ir}var lr=xr.prototype;return lr._registerListeners=function(){var ur=this.hls;ur.on(Nt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),ur.on(Nt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),ur.on(Nt.Events.MANIFEST_LOADING,this.onManifestLoading,this),ur.on(Nt.Events.MANIFEST_PARSED,this.onManifestParsed,this),ur.on(Nt.Events.LEVEL_LOADING,this.onLevelLoading,this),ur.on(Nt.Events.LEVEL_LOADED,this.onLevelLoaded,this),ur.on(Nt.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),ur.on(Nt.Events.ERROR,this.onError,this),ur.on(Nt.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),ur.on(Nt.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),ur.on(Nt.Events.BUFFER_CREATED,this.onBufferCreated,this),ur.on(Nt.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),ur.on(Nt.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),ur.on(Nt.Events.FRAG_BUFFERED,this.onFragBuffered,this)},lr._unregisterListeners=function(){var ur=this.hls;ur.off(Nt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),ur.off(Nt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),ur.off(Nt.Events.MANIFEST_LOADING,this.onManifestLoading,this),ur.off(Nt.Events.MANIFEST_PARSED,this.onManifestParsed,this),ur.off(Nt.Events.LEVEL_LOADED,this.onLevelLoaded,this),ur.off(Nt.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),ur.off(Nt.Events.ERROR,this.onError,this),ur.off(Nt.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),ur.off(Nt.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),ur.off(Nt.Events.BUFFER_CREATED,this.onBufferCreated,this),ur.off(Nt.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),ur.off(Nt.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),ur.off(Nt.Events.FRAG_BUFFERED,this.onFragBuffered,this)},lr.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},lr.startLoad=function(ur){if(this.levels){var mr=this.lastCurrentTime,ir=this.hls;if(this.stopLoad(),this.setInterval(dr),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var _r=ir.startLevel;_r===-1&&(ir.config.testBandwidth&&this.levels.length>1?(_r=0,this.bitrateTest=!0):_r=ir.nextAutoLevel),this.level=ir.nextLoadLevel=_r,this.loadedmetadata=!1}mr>0&&ur===-1&&(this.log("Override startPosition with lastCurrentTime @"+mr.toFixed(3)),ur=mr),this.state=Dt.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=ur,this.tick()}else this._forceStartLoad=!0,this.state=Dt.State.STOPPED},lr.stopLoad=function(){this._forceStartLoad=!1,pr.prototype.stopLoad.call(this)},lr.doTick=function(){switch(this.state){case Dt.State.IDLE:this.doTickIdle();break;case Dt.State.WAITING_LEVEL:{var ur,mr=this.levels,ir=this.level,_r=mr==null||(ur=mr[ir])===null||ur===void 0?void 0:ur.details;if(_r&&(!_r.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(_r))break;this.state=Dt.State.IDLE;break}break}case Dt.State.FRAG_LOADING_WAITING_RETRY:{var yr,gr=self.performance.now(),Sr=this.retryDate;(!Sr||gr>=Sr||(yr=this.media)!==null&&yr!==void 0&&yr.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=Dt.State.IDLE)}break}this.onTickEnd()},lr.onTickEnd=function(){pr.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},lr.doTickIdle=function(){var ur=this.hls,mr=this.levelLastLoaded,ir=this.levels,_r=this.media,yr=ur.config,gr=ur.nextLoadLevel;if(!(mr===null||!_r&&(this.startFragRequested||!yr.startFragPrefetch))&&!(this.altAudio&&this.audioOnly)&&!(!ir||!ir[gr])){var Sr=ir[gr],Tr=this.getMainFwdBufferInfo();if(Tr!==null){var br=this.getLevelDetails();if(br&&this._streamEnded(Tr,br)){var Ar={};this.altAudio&&(Ar.type="video"),this.hls.trigger(Nt.Events.BUFFER_EOS,Ar),this.state=Dt.State.ENDED;return}this.level=ur.nextLoadLevel=gr;var Or=Sr.details;if(!Or||this.state===Dt.State.WAITING_LEVEL||Or.live&&this.levelLastLoaded!==gr){this.level=gr,this.state=Dt.State.WAITING_LEVEL;return}var Ir=Tr.len,Cr=this.getMaxBufferLength(Sr.maxBitrate);if(!(Ir>=Cr)){this.backtrackFragment&&this.backtrackFragment.start>Tr.end&&(this.backtrackFragment=null);var Rr=this.backtrackFragment?this.backtrackFragment.start:Tr.end,Pr=this.getNextFragment(Rr,Or);if(this.couldBacktrack&&!this.fragPrevious&&Pr&&Pr.sn!=="initSegment"&&this.fragmentTracker.getState(Pr)!==Wt.FragmentState.OK){var wr,Dr=((wr=this.backtrackFragment)!=null?wr:Pr).sn,kr=Dr-Or.startSN,Fr=Or.fragments[kr-1];Fr&&Pr.cc===Fr.cc&&(Pr=Fr,this.fragmentTracker.removeFragment(Fr))}else this.backtrackFragment&&Tr.len&&(this.backtrackFragment=null);if(Pr&&this.fragmentTracker.getState(Pr)===Wt.FragmentState.OK&&this.nextLoadPosition>Rr){var Br=this.audioOnly&&!this.altAudio?Ut.ElementaryStreamTypes.AUDIO:Ut.ElementaryStreamTypes.VIDEO,Kr=(Br===Ut.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;Kr&&this.afterBufferFlushed(Kr,Br,nr.PlaylistLevelType.MAIN),Pr=this.getNextFragment(this.nextLoadPosition,Or)}Pr&&(Pr.initSegment&&!Pr.initSegment.data&&!this.bitrateTest&&(Pr=Pr.initSegment),this.loadFragment(Pr,Or,Rr))}}}},lr.loadFragment=function(ur,mr,ir){var _r,yr=this.fragmentTracker.getState(ur);this.fragCurrent=ur,yr===Wt.FragmentState.NOT_LOADED?ur.sn==="initSegment"?this._loadInitSegment(ur,mr):this.bitrateTest?(this.log("Fragment "+ur.sn+" of level "+ur.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(ur,mr)):(this.startFragRequested=!0,pr.prototype.loadFragment.call(this,ur,mr,ir)):yr===Wt.FragmentState.APPENDING?this.reduceMaxBufferLength(ur.duration)&&this.fragmentTracker.removeFragment(ur):((_r=this.media)===null||_r===void 0?void 0:_r.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},lr.getAppendedFrag=function(ur){var mr=this.fragmentTracker.getAppendedFrag(ur,nr.PlaylistLevelType.MAIN);return mr&&"fragment"in mr?mr.fragment:mr},lr.getBufferedFrag=function(ur){return this.fragmentTracker.getBufferedFrag(ur,nr.PlaylistLevelType.MAIN)},lr.followingBufferedFrag=function(ur){return ur?this.getBufferedFrag(ur.end+.5):null},lr.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},lr.nextLevelSwitch=function(){var ur=this.levels,mr=this.media;if(mr!=null&&mr.readyState){var ir,_r=this.getAppendedFrag(mr.currentTime);if(_r&&_r.start>1&&this.flushMainBuffer(0,_r.start-1),!mr.paused&&ur){var yr=this.hls.nextLoadLevel,gr=ur[yr],Sr=this.fragLastKbps;Sr&&this.fragCurrent?ir=this.fragCurrent.duration*gr.maxBitrate/(1e3*Sr)+1:ir=0}else ir=0;var Tr=this.getBufferedFrag(mr.currentTime+ir);if(Tr){var br=this.followingBufferedFrag(Tr);if(br){this.abortCurrentFrag();var Ar=br.maxStartPTS?br.maxStartPTS:br.start,Or=br.duration,Ir=Math.max(Tr.end,Ar+Math.min(Math.max(Or-this.config.maxFragLookUpTolerance,Or*.5),Or*.75));this.flushMainBuffer(Ir,Number.POSITIVE_INFINITY)}}}},lr.abortCurrentFrag=function(){var ur=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,ur&&ur.abortRequests(),this.state){case Dt.State.KEY_LOADING:case Dt.State.FRAG_LOADING:case Dt.State.FRAG_LOADING_WAITING_RETRY:case Dt.State.PARSING:case Dt.State.PARSED:this.state=Dt.State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()},lr.flushMainBuffer=function(ur,mr){pr.prototype.flushMainBuffer.call(this,ur,mr,this.altAudio?"video":null)},lr.onMediaAttached=function(ur,mr){pr.prototype.onMediaAttached.call(this,ur,mr);var ir=mr.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),ir.addEventListener("playing",this.onvplaying),ir.addEventListener("seeked",this.onvseeked),this.gapController=new Ft.default(this.config,ir,this.fragmentTracker,this.hls)},lr.onMediaDetaching=function(){var ur=this.media;ur&&this.onvplaying&&this.onvseeked&&(ur.removeEventListener("playing",this.onvplaying),ur.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),pr.prototype.onMediaDetaching.call(this)},lr.onMediaPlaying=function(){this.tick()},lr.onMediaSeeked=function(){var ur=this.media,mr=ur?ur.currentTime:null;(0,Rt.isFiniteNumber)(mr)&&this.log("Media seeked to "+mr.toFixed(3)),this.tick()},lr.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(Nt.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},lr.onManifestParsed=function(ur,mr){var ir=!1,_r=!1,yr;mr.levels.forEach(function(gr){yr=gr.audioCodec,yr&&(yr.indexOf("mp4a.40.2")!==-1&&(ir=!0),yr.indexOf("mp4a.40.5")!==-1&&(_r=!0))}),this.audioCodecSwitch=ir&&_r&&!(0,kt.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=mr.levels,this.startFragRequested=!1},lr.onLevelLoading=function(ur,mr){var ir=this.levels;if(!(!ir||this.state!==Dt.State.IDLE)){var _r=ir[mr.level];(!_r.details||_r.details.live&&this.levelLastLoaded!==mr.level||this.waitForCdnTuneIn(_r.details))&&(this.state=Dt.State.WAITING_LEVEL)}},lr.onLevelLoaded=function(ur,mr){var ir,_r=this.levels,yr=mr.level,gr=mr.details,Sr=gr.totalduration;if(!_r){this.warn("Levels were reset while loading level "+yr);return}this.log("Level "+yr+" loaded ["+gr.startSN+","+gr.endSN+"], cc ["+gr.startCC+", "+gr.endCC+"] duration:"+Sr);var Tr=this.fragCurrent;Tr&&(this.state===Dt.State.FRAG_LOADING||this.state===Dt.State.FRAG_LOADING_WAITING_RETRY)&&Tr.level!==mr.level&&Tr.loader&&(this.state=Dt.State.IDLE,this.backtrackFragment=null,Tr.abortRequests());var br=_r[yr],Ar=0;if(gr.live||(ir=br.details)!==null&&ir!==void 0&&ir.live){if(gr.fragments[0]||(gr.deltaUpdateFailed=!0),gr.deltaUpdateFailed)return;Ar=this.alignPlaylists(gr,br.details)}if(br.details=gr,this.levelLastLoaded=yr,this.hls.trigger(Nt.Events.LEVEL_UPDATED,{details:gr,level:yr}),this.state===Dt.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(gr))return;this.state=Dt.State.IDLE}this.startFragRequested?gr.live&&this.synchronizeToLiveEdge(gr):this.setStartPosition(gr,Ar),this.tick()},lr._handleFragmentLoadProgress=function(ur){var mr,ir=ur.frag,_r=ur.part,yr=ur.payload,gr=this.levels;if(!gr){this.warn("Levels were reset while fragment load was in progress. Fragment "+ir.sn+" of level "+ir.level+" will not be buffered");return}var Sr=gr[ir.level],Tr=Sr.details;if(!Tr){this.warn("Dropping fragment "+ir.sn+" of level "+ir.level+" after level details were reset");return}var br=Sr.videoCodec,Ar=Tr.PTSKnown||!Tr.live,Or=(mr=ir.initSegment)===null||mr===void 0?void 0:mr.data,Ir=this._getAudioCodec(Sr),Cr=this.transmuxer=this.transmuxer||new Ht.default(this.hls,nr.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),Rr=_r?_r.index:-1,Pr=Rr!==-1,wr=new Bt.ChunkMetadata(ir.level,ir.sn,ir.stats.chunkCount,yr.byteLength,Rr,Pr),Dr=this.initPTS[ir.cc];Cr.push(yr,Or,Ir,br,ir,_r,Tr.totalduration,Ar,wr,Dr)},lr.onAudioTrackSwitching=function(ur,mr){var ir=this.altAudio,_r=!!mr.url,yr=mr.id;if(!_r){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var gr=this.fragCurrent;gr&&(this.log("Switching to main audio track, cancel main fragment load"),gr.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var Sr=this.hls;ir&&Sr.trigger(Nt.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),Sr.trigger(Nt.Events.AUDIO_TRACK_SWITCHED,{id:yr})}},lr.onAudioTrackSwitched=function(ur,mr){var ir=mr.id,_r=!!this.hls.audioTracks[ir].url;if(_r){var yr=this.videoBuffer;yr&&this.mediaBuffer!==yr&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=yr)}this.altAudio=_r,this.tick()},lr.onBufferCreated=function(ur,mr){var ir=mr.tracks,_r,yr,gr=!1;for(var Sr in ir){var Tr=ir[Sr];if(Tr.id==="main"){if(yr=Sr,_r=Tr,Sr==="video"){var br=ir[Sr];br&&(this.videoBuffer=br.buffer)}}else gr=!0}gr&&_r?(this.log("Alternate track found, use "+yr+".buffered to schedule main fragment loading"),this.mediaBuffer=_r.buffer):this.mediaBuffer=this.media},lr.onFragBuffered=function(ur,mr){var ir=mr.frag,_r=mr.part;if(!(ir&&ir.type!==nr.PlaylistLevelType.MAIN)){if(this.fragContextChanged(ir)){this.warn("Fragment "+ir.sn+(_r?" p: "+_r.index:"")+" of level "+ir.level+" finished buffering, but was aborted. state: "+this.state),this.state===Dt.State.PARSED&&(this.state=Dt.State.IDLE);return}var yr=_r?_r.stats:ir.stats;this.fragLastKbps=Math.round(8*yr.total/(yr.buffering.end-yr.loading.first)),ir.sn!=="initSegment"&&(this.fragPrevious=ir),this.fragBufferedComplete(ir,_r)}},lr.onError=function(ur,mr){if(mr.type===tr.ErrorTypes.KEY_SYSTEM_ERROR){this.onFragmentOrKeyLoadError(nr.PlaylistLevelType.MAIN,mr);return}switch(mr.details){case tr.ErrorDetails.FRAG_LOAD_ERROR:case tr.ErrorDetails.FRAG_LOAD_TIMEOUT:case tr.ErrorDetails.FRAG_PARSING_ERROR:case tr.ErrorDetails.KEY_LOAD_ERROR:case tr.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(nr.PlaylistLevelType.MAIN,mr);break;case tr.ErrorDetails.LEVEL_LOAD_ERROR:case tr.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Dt.State.ERROR&&(mr.fatal?(this.warn(""+mr.details),this.state=Dt.State.ERROR):!mr.levelRetry&&this.state===Dt.State.WAITING_LEVEL&&(this.state=Dt.State.IDLE));break;case tr.ErrorDetails.BUFFER_FULL_ERROR:if(mr.parent==="main"&&(this.state===Dt.State.PARSING||this.state===Dt.State.PARSED)){var ir=!0,_r=this.getFwdBufferInfo(this.media,nr.PlaylistLevelType.MAIN);_r&&_r.len>.5&&(ir=!this.reduceMaxBufferLength(_r.len)),ir&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}break}},lr.checkBuffer=function(){var ur=this.media,mr=this.gapController;if(!(!ur||!mr||!ur.readyState)){if(this.loadedmetadata||!zt.BufferHelper.getBuffered(ur).length){var ir=this.state!==Dt.State.IDLE?this.fragCurrent:null;mr.poll(this.lastCurrentTime,ir)}this.lastCurrentTime=ur.currentTime}},lr.onFragLoadEmergencyAborted=function(){this.state=Dt.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},lr.onBufferFlushed=function(ur,mr){var ir=mr.type;if(ir!==Ut.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var _r=(ir===Ut.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(_r,ir,nr.PlaylistLevelType.MAIN)}},lr.onLevelsUpdated=function(ur,mr){this.levels=mr.levels},lr.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},lr.seekToStartPos=function(){var ur=this.media;if(ur){var mr=ur.currentTime,ir=this.startPosition;if(ir>=0&&mr<ir){if(ur.seeking){this.log("could not seek to "+ir+", already seeking at "+mr);return}var _r=zt.BufferHelper.getBuffered(ur),yr=_r.length?_r.start(0):0,gr=yr-ir;gr>0&&(gr<this.config.maxBufferHole||gr<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+gr+" to match buffer start"),ir+=gr,this.startPosition=ir),this.log("seek to target start position "+ir+" from current time "+mr),ur.currentTime=ir}}},lr._getAudioCodec=function(ur){var mr=this.config.defaultAudioCodec||ur.audioCodec;return this.audioCodecSwap&&mr&&(this.log("Swapping audio codec"),mr.indexOf("mp4a.40.5")!==-1?mr="mp4a.40.2":mr="mp4a.40.5"),mr},lr._loadBitrateTestFrag=function(ur,mr){var ir=this;ur.bitrateTest=!0,this._doFragLoad(ur,mr).then(function(_r){var yr=ir.hls;if(!(!_r||ir.fragContextChanged(ur))){ir.fragLoadError=0,ir.state=Dt.State.IDLE,ir.startFragRequested=!1,ir.bitrateTest=!1;var gr=ur.stats;gr.parsing.start=gr.parsing.end=gr.buffering.start=gr.buffering.end=self.performance.now(),yr.trigger(Nt.Events.FRAG_LOADED,_r),ur.bitrateTest=!1}})},lr._handleTransmuxComplete=function(ur){var mr,ir="main",_r=this.hls,yr=ur.remuxResult,gr=ur.chunkMeta,Sr=this.getCurrentContext(gr);if(!Sr){this.warn("The loading context changed while buffering fragment "+gr.sn+" of level "+gr.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(gr.level);return}var Tr=Sr.frag,br=Sr.part,Ar=Sr.level,Or=yr.video,Ir=yr.text,Cr=yr.id3,Rr=yr.initSegment,Pr=Ar.details,wr=this.altAudio?void 0:yr.audio;if(!this.fragContextChanged(Tr)){if(this.state=Dt.State.PARSING,Rr){Rr.tracks&&(this._bufferInitSegment(Ar,Rr.tracks,Tr,gr),_r.trigger(Nt.Events.FRAG_PARSING_INIT_SEGMENT,{frag:Tr,id:ir,tracks:Rr.tracks}));var Dr=Rr.initPTS,kr=Rr.timescale;(0,Rt.isFiniteNumber)(Dr)&&(this.initPTS[Tr.cc]=Dr,_r.trigger(Nt.Events.INIT_PTS_FOUND,{frag:Tr,id:ir,initPTS:Dr,timescale:kr}))}if(Or&&yr.independent!==!1){if(Pr){var Fr=Or.startPTS,Br=Or.endPTS,Kr=Or.startDTS,Vr=Or.endDTS;if(br)br.elementaryStreams[Or.type]={startPTS:Fr,endPTS:Br,startDTS:Kr,endDTS:Vr};else if(Or.firstKeyFrame&&Or.independent&&gr.id===1&&(this.couldBacktrack=!0),Or.dropped&&Or.independent){var Gr=this.getMainFwdBufferInfo(),jr=(Gr?Gr.end:this.getLoadPosition())+this.config.maxBufferHole,zr=Or.firstKeyFramePTS?Or.firstKeyFramePTS:Fr;if(jr<zr-this.config.maxBufferHole){this.backtrack(Tr);return}Tr.setElementaryStreamInfo(Or.type,Tr.start,Br,Tr.start,Vr,!0)}Tr.setElementaryStreamInfo(Or.type,Fr,Br,Kr,Vr),this.backtrackFragment&&(this.backtrackFragment=Tr),this.bufferFragmentData(Or,Tr,br,gr)}}else if(yr.independent===!1){this.backtrack(Tr);return}if(wr){var Xr=wr.startPTS,Zr=wr.endPTS,ln=wr.startDTS,Qr=wr.endDTS;br&&(br.elementaryStreams[Ut.ElementaryStreamTypes.AUDIO]={startPTS:Xr,endPTS:Zr,startDTS:ln,endDTS:Qr}),Tr.setElementaryStreamInfo(Ut.ElementaryStreamTypes.AUDIO,Xr,Zr,ln,Qr),this.bufferFragmentData(wr,Tr,br,gr)}if(Pr&&Cr!==null&&Cr!==void 0&&(mr=Cr.samples)!==null&&mr!==void 0&&mr.length){var an={id:ir,frag:Tr,details:Pr,samples:Cr.samples};_r.trigger(Nt.Events.FRAG_PARSING_METADATA,an)}if(Pr&&Ir){var Jr={id:ir,frag:Tr,details:Pr,samples:Ir.samples};_r.trigger(Nt.Events.FRAG_PARSING_USERDATA,Jr)}}},lr._bufferInitSegment=function(ur,mr,ir,_r){var yr=this;if(this.state===Dt.State.PARSING){this.audioOnly=!!mr.audio&&!mr.video,this.altAudio&&!this.audioOnly&&delete mr.audio;var gr=mr.audio,Sr=mr.video,Tr=mr.audiovideo;if(gr){var br=ur.audioCodec,Ar=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(br&&(br.indexOf("mp4a.40.5")!==-1?br="mp4a.40.2":br="mp4a.40.5"),gr.metadata.channelCount!==1&&Ar.indexOf("firefox")===-1&&(br="mp4a.40.5")),Ar.indexOf("android")!==-1&&gr.container!=="audio/mpeg"&&(br="mp4a.40.2",this.log("Android: force audio codec to "+br)),ur.audioCodec&&ur.audioCodec!==br&&this.log('Swapping manifest audio codec "'+ur.audioCodec+'" for "'+br+'"'),gr.levelCodec=br,gr.id="main",this.log("Init audio buffer, container:"+gr.container+", codecs[selected/level/parsed]=["+(br||"")+"/"+(ur.audioCodec||"")+"/"+gr.codec+"]")}Sr&&(Sr.levelCodec=ur.videoCodec,Sr.id="main",this.log("Init video buffer, container:"+Sr.container+", codecs[level/parsed]=["+(ur.videoCodec||"")+"/"+Sr.codec+"]")),Tr&&this.log("Init audiovideo buffer, container:"+Tr.container+", codecs[level/parsed]=["+(ur.attrs.CODECS||"")+"/"+Tr.codec+"]"),this.hls.trigger(Nt.Events.BUFFER_CODECS,mr),Object.keys(mr).forEach(function(Or){var Ir=mr[Or],Cr=Ir.initSegment;Cr!=null&&Cr.byteLength&&yr.hls.trigger(Nt.Events.BUFFER_APPENDING,{type:Or,data:Cr,frag:ir,part:null,chunkMeta:_r,parent:ir.type})}),this.tick()}},lr.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,nr.PlaylistLevelType.MAIN)},lr.backtrack=function(ur){this.couldBacktrack=!0,this.backtrackFragment=ur,this.resetTransmuxer(),this.flushBufferGap(ur),this.fragmentTracker.removeFragment(ur),this.fragPrevious=null,this.nextLoadPosition=ur.start,this.state=Dt.State.IDLE},lr.checkFragmentChanged=function(){var ur=this.media,mr=null;if(ur&&ur.readyState>1&&ur.seeking===!1){var ir=ur.currentTime;if(zt.BufferHelper.isBuffered(ur,ir)?mr=this.getAppendedFrag(ir):zt.BufferHelper.isBuffered(ur,ir+.1)&&(mr=this.getAppendedFrag(ir+.1)),mr){this.backtrackFragment=null;var _r=this.fragPlaying,yr=mr.level;(!_r||mr.sn!==_r.sn||_r.level!==yr||mr.urlId!==_r.urlId)&&(this.fragPlaying=mr,this.hls.trigger(Nt.Events.FRAG_CHANGED,{frag:mr}),(!_r||_r.level!==yr)&&this.hls.trigger(Nt.Events.LEVEL_SWITCHED,{level:yr}))}}},Kt(xr,[{key:"nextLevel",get:function(){var ur=this.nextBufferedFrag;return ur?ur.level:-1}},{key:"currentFrag",get:function(){var ur=this.media;return ur?this.fragPlaying||this.getAppendedFrag(ur.currentTime):null}},{key:"currentProgramDateTime",get:function(){var ur=this.media;if(ur){var mr=ur.currentTime,ir=this.currentFrag;if(ir&&(0,Rt.isFiniteNumber)(mr)&&(0,Rt.isFiniteNumber)(ir.programDateTime)){var _r=ir.programDateTime+(mr-ir.start)*1e3;return new Date(_r)}}return null}},{key:"currentLevel",get:function(){var ur=this.currentFrag;return ur?ur.level:-1}},{key:"nextBufferedFrag",get:function(){var ur=this.currentFrag;return ur?this.followingBufferedFrag(ur):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),xr}(Dt.default)},"./src/controller/subtitle-stream-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{SubtitleStreamController:()=>ar});var Rt=Ct("./src/events.ts"),Dt=Ct("./src/utils/buffer-helper.ts"),kt=Ct("./src/controller/fragment-finders.ts"),Nt=Ct("./src/utils/discontinuities.ts"),zt=Ct("./src/controller/level-helper.ts"),Wt=Ct("./src/controller/fragment-tracker.ts"),nr=Ct("./src/controller/base-stream-controller.ts"),Ut=Ct("./src/types/loader.ts"),Ht=Ct("./src/types/level.ts");function Bt(dr,fr){for(var pr=0;pr<fr.length;pr++){var xr=fr[pr];xr.enumerable=xr.enumerable||!1,xr.configurable=!0,"value"in xr&&(xr.writable=!0),Object.defineProperty(dr,tr(xr.key),xr)}}function Ft(dr,fr,pr){return fr&&Bt(dr.prototype,fr),pr&&Bt(dr,pr),Object.defineProperty(dr,"prototype",{writable:!1}),dr}function tr(dr){var fr=cr(dr,"string");return typeof fr=="symbol"?fr:String(fr)}function cr(dr,fr){if(typeof dr!="object"||dr===null)return dr;var pr=dr[Symbol.toPrimitive];if(pr!==void 0){var xr=pr.call(dr,fr||"default");if(typeof xr!="object")return xr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(fr==="string"?String:Number)(dr)}function Kt(dr,fr){dr.prototype=Object.create(fr.prototype),dr.prototype.constructor=dr,Zt(dr,fr)}function Zt(dr,fr){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(xr,lr){return xr.__proto__=lr,xr},Zt(dr,fr)}var rr=500,ar=function(dr){Kt(fr,dr);function fr(xr,lr,hr){var ur;return ur=dr.call(this,xr,lr,hr,"[subtitle-stream-controller]")||this,ur.levels=[],ur.currentTrackId=-1,ur.tracksBuffered=[],ur.mainDetails=null,ur._registerListeners(),ur}var pr=fr.prototype;return pr.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},pr._registerListeners=function(){var lr=this.hls;lr.on(Rt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),lr.on(Rt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),lr.on(Rt.Events.MANIFEST_LOADING,this.onManifestLoading,this),lr.on(Rt.Events.LEVEL_LOADED,this.onLevelLoaded,this),lr.on(Rt.Events.ERROR,this.onError,this),lr.on(Rt.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),lr.on(Rt.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),lr.on(Rt.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),lr.on(Rt.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),lr.on(Rt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),lr.on(Rt.Events.FRAG_BUFFERED,this.onFragBuffered,this)},pr._unregisterListeners=function(){var lr=this.hls;lr.off(Rt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),lr.off(Rt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),lr.off(Rt.Events.MANIFEST_LOADING,this.onManifestLoading,this),lr.off(Rt.Events.LEVEL_LOADED,this.onLevelLoaded,this),lr.off(Rt.Events.ERROR,this.onError,this),lr.off(Rt.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),lr.off(Rt.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),lr.off(Rt.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),lr.off(Rt.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),lr.off(Rt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),lr.off(Rt.Events.FRAG_BUFFERED,this.onFragBuffered,this)},pr.startLoad=function(lr){this.stopLoad(),this.state=nr.State.IDLE,this.setInterval(rr),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=lr,this.tick()},pr.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},pr.onLevelLoaded=function(lr,hr){this.mainDetails=hr.details},pr.onSubtitleFragProcessed=function(lr,hr){var ur=hr.frag,mr=hr.success;if(this.fragPrevious=ur,this.state=nr.State.IDLE,!!mr){var ir=this.tracksBuffered[this.currentTrackId];if(ir){for(var _r,yr=ur.start,gr=0;gr<ir.length;gr++)if(yr>=ir[gr].start&&yr<=ir[gr].end){_r=ir[gr];break}var Sr=ur.start+ur.duration;_r?_r.end=Sr:(_r={start:yr,end:Sr},ir.push(_r)),this.fragmentTracker.fragBuffered(ur)}}},pr.onBufferFlushing=function(lr,hr){var ur=hr.startOffset,mr=hr.endOffset;if(ur===0&&mr!==Number.POSITIVE_INFINITY){var ir=this.currentTrackId,_r=this.levels;if(!_r.length||!_r[ir]||!_r[ir].details)return;var yr=_r[ir].details,gr=yr.targetduration,Sr=mr-gr;if(Sr<=0)return;hr.endOffsetSubtitles=Math.max(0,Sr),this.tracksBuffered.forEach(function(Tr){for(var br=0;br<Tr.length;){if(Tr[br].end<=Sr){Tr.shift();continue}else if(Tr[br].start<Sr)Tr[br].start=Sr;else break;br++}}),this.fragmentTracker.removeFragmentsInRange(ur,Sr,Ut.PlaylistLevelType.SUBTITLE)}},pr.onFragBuffered=function(lr,hr){if(!this.loadedmetadata&&hr.frag.type===Ut.PlaylistLevelType.MAIN){var ur;(ur=this.media)!==null&&ur!==void 0&&ur.buffered.length&&(this.loadedmetadata=!0)}},pr.onError=function(lr,hr){var ur=hr.frag;!ur||ur.type!==Ut.PlaylistLevelType.SUBTITLE||(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=nr.State.IDLE)},pr.onSubtitleTracksUpdated=function(lr,hr){var ur=this,mr=hr.subtitleTracks;this.tracksBuffered=[],this.levels=mr.map(function(ir){return new Ht.Level(ir)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(ir){ur.tracksBuffered[ir.id]=[]}),this.mediaBuffer=null},pr.onSubtitleTrackSwitch=function(lr,hr){if(this.currentTrackId=hr.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}var ur=this.levels[this.currentTrackId];ur!=null&&ur.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,ur&&this.setInterval(rr)},pr.onSubtitleTrackLoaded=function(lr,hr){var ur,mr=hr.details,ir=hr.id,_r=this.currentTrackId,yr=this.levels;if(yr.length){var gr=yr[_r];if(!(ir>=yr.length||ir!==_r||!gr)){this.mediaBuffer=this.mediaBufferTimeRanges;var Sr=0;if(mr.live||(ur=gr.details)!==null&&ur!==void 0&&ur.live){var Tr=this.mainDetails;if(mr.deltaUpdateFailed||!Tr)return;var br=Tr.fragments[0];gr.details?(Sr=this.alignPlaylists(mr,gr.details),Sr===0&&br&&(Sr=br.start,(0,zt.addSliding)(mr,Sr))):mr.hasProgramDateTime&&Tr.hasProgramDateTime?((0,Nt.alignMediaPlaylistByPDT)(mr,Tr),Sr=mr.fragments[0].start):br&&(Sr=br.start,(0,zt.addSliding)(mr,Sr))}if(gr.details=mr,this.levelLastLoaded=ir,!this.startFragRequested&&(this.mainDetails||!mr.live)&&this.setStartPosition(gr.details,Sr),this.tick(),mr.live&&!this.fragCurrent&&this.media&&this.state===nr.State.IDLE){var Ar=(0,kt.findFragmentByPTS)(null,mr.fragments,this.media.currentTime,0);Ar||(this.warn("Subtitle playlist not aligned with playback"),gr.details=void 0)}}}},pr._handleFragmentLoadComplete=function(lr){var hr=this,ur=lr.frag,mr=lr.payload,ir=ur.decryptdata,_r=this.hls;if(!this.fragContextChanged(ur)&&mr&&mr.byteLength>0&&ir&&ir.key&&ir.iv&&ir.method==="AES-128"){var yr=performance.now();this.decrypter.decrypt(new Uint8Array(mr),ir.key.buffer,ir.iv.buffer).then(function(gr){var Sr=performance.now();_r.trigger(Rt.Events.FRAG_DECRYPTED,{frag:ur,payload:gr,stats:{tstart:yr,tdecrypt:Sr}})}).catch(function(gr){hr.warn(gr.name+": "+gr.message),hr.state=nr.State.IDLE})}},pr.doTick=function(){if(!this.media){this.state=nr.State.IDLE;return}if(this.state===nr.State.IDLE){var lr=this.currentTrackId,hr=this.levels;if(!hr.length||!hr[lr]||!hr[lr].details)return;var ur=hr[lr].details,mr=ur.targetduration,ir=this.config,_r=this.getLoadPosition(),yr=Dt.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],_r-mr,ir.maxBufferHole),gr=yr.end,Sr=yr.len,Tr=this.getFwdBufferInfo(this.media,Ut.PlaylistLevelType.MAIN),br=this.getMaxBufferLength(Tr==null?void 0:Tr.len)+mr;if(Sr>br)return;console.assert(ur,"Subtitle track details are defined on idle subtitle stream controller tick");var Ar=ur.fragments,Or=Ar.length,Ir=ur.edge,Cr=null,Rr=this.fragPrevious;if(gr<Ir){var Pr=ir.maxFragLookUpTolerance;Cr=(0,kt.findFragmentByPTS)(Rr,Ar,Math.max(Ar[0].start,gr),Pr),!Cr&&Rr&&Rr.start<Ar[0].start&&(Cr=Ar[0])}else Cr=Ar[Or-1];if(!Cr)return;Cr=this.mapToInitFragWhenRequired(Cr),this.fragmentTracker.getState(Cr)===Wt.FragmentState.NOT_LOADED&&this.loadFragment(Cr,ur,gr)}},pr.getMaxBufferLength=function(lr){var hr=dr.prototype.getMaxBufferLength.call(this);return lr?Math.max(hr,lr):hr},pr.loadFragment=function(lr,hr,ur){this.fragCurrent=lr,lr.sn==="initSegment"?this._loadInitSegment(lr,hr):(this.startFragRequested=!0,dr.prototype.loadFragment.call(this,lr,hr,ur))},Ft(fr,[{key:"mediaBufferTimeRanges",get:function(){return new sr(this.tracksBuffered[this.currentTrackId]||[])}}]),fr}(nr.default),sr=function(fr){this.buffered=void 0;var pr=function(lr,hr,ur){if(hr=hr>>>0,hr>ur-1)throw new DOMException("Failed to execute '"+lr+"' on 'TimeRanges': The index provided ("+hr+") is greater than the maximum bound ("+ur+")");return fr[hr][lr]};this.buffered={get length(){return fr.length},end:function(lr){return pr("end",lr,fr.length)},start:function(lr){return pr("start",lr,fr.length)}}}},"./src/controller/subtitle-track-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>cr});var Rt=Ct("./src/events.ts"),Dt=Ct("./src/utils/texttrack-utils.ts"),kt=Ct("./src/controller/base-playlist-controller.ts"),Nt=Ct("./src/types/loader.ts");function zt(Kt,Zt){for(var rr=0;rr<Zt.length;rr++){var ar=Zt[rr];ar.enumerable=ar.enumerable||!1,ar.configurable=!0,"value"in ar&&(ar.writable=!0),Object.defineProperty(Kt,nr(ar.key),ar)}}function Wt(Kt,Zt,rr){return Zt&&zt(Kt.prototype,Zt),rr&&zt(Kt,rr),Object.defineProperty(Kt,"prototype",{writable:!1}),Kt}function nr(Kt){var Zt=Ut(Kt,"string");return typeof Zt=="symbol"?Zt:String(Zt)}function Ut(Kt,Zt){if(typeof Kt!="object"||Kt===null)return Kt;var rr=Kt[Symbol.toPrimitive];if(rr!==void 0){var ar=rr.call(Kt,Zt||"default");if(typeof ar!="object")return ar;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Zt==="string"?String:Number)(Kt)}function Ht(Kt,Zt){Kt.prototype=Object.create(Zt.prototype),Kt.prototype.constructor=Kt,Bt(Kt,Zt)}function Bt(Kt,Zt){return Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ar,sr){return ar.__proto__=sr,ar},Bt(Kt,Zt)}var Ft=function(Kt){Ht(Zt,Kt);function Zt(ar){var sr;return sr=Kt.call(this,ar,"[subtitle-track-controller]")||this,sr.media=null,sr.tracks=[],sr.groupId=null,sr.tracksInGroup=[],sr.trackId=-1,sr.selectDefaultTrack=!0,sr.queuedDefaultTrack=-1,sr.trackChangeListener=function(){return sr.onTextTracksChanged()},sr.asyncPollTrackChange=function(){return sr.pollTrackChange(0)},sr.useTextTrackPolling=!1,sr.subtitlePollingInterval=-1,sr._subtitleDisplay=!0,sr.registerListeners(),sr}var rr=Zt.prototype;return rr.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,Kt.prototype.destroy.call(this)},rr.registerListeners=function(){var sr=this.hls;sr.on(Rt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),sr.on(Rt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),sr.on(Rt.Events.MANIFEST_LOADING,this.onManifestLoading,this),sr.on(Rt.Events.MANIFEST_PARSED,this.onManifestParsed,this),sr.on(Rt.Events.LEVEL_LOADING,this.onLevelLoading,this),sr.on(Rt.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),sr.on(Rt.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),sr.on(Rt.Events.ERROR,this.onError,this)},rr.unregisterListeners=function(){var sr=this.hls;sr.off(Rt.Events.MEDIA_ATTACHED,this.onMediaAttached,this),sr.off(Rt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),sr.off(Rt.Events.MANIFEST_LOADING,this.onManifestLoading,this),sr.off(Rt.Events.MANIFEST_PARSED,this.onManifestParsed,this),sr.off(Rt.Events.LEVEL_LOADING,this.onLevelLoading,this),sr.off(Rt.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),sr.off(Rt.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),sr.off(Rt.Events.ERROR,this.onError,this)},rr.onMediaAttached=function(sr,dr){this.media=dr.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},rr.pollTrackChange=function(sr){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,sr)},rr.onMediaDetaching=function(){if(this.media){self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);var sr=tr(this.media.textTracks);sr.forEach(function(dr){(0,Dt.clearCurrentCues)(dr)}),this.subtitleTrack=-1,this.media=null}},rr.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},rr.onManifestParsed=function(sr,dr){this.tracks=dr.subtitleTracks},rr.onSubtitleTrackLoaded=function(sr,dr){var fr=dr.id,pr=dr.details,xr=this.trackId,lr=this.tracksInGroup[xr];if(!lr){this.warn("Invalid subtitle track id "+fr);return}var hr=lr.details;lr.details=dr.details,this.log("subtitle track "+fr+" loaded ["+pr.startSN+"-"+pr.endSN+"]"),fr===this.trackId&&(this.retryCount=0,this.playlistLoaded(fr,dr,hr))},rr.onLevelLoading=function(sr,dr){this.switchLevel(dr.level)},rr.onLevelSwitching=function(sr,dr){this.switchLevel(dr.level)},rr.switchLevel=function(sr){var dr=this.hls.levels[sr];if(dr!=null&&dr.textGroupIds){var fr=dr.textGroupIds[dr.urlId];if(this.groupId!==fr){var pr=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,xr=this.tracks.filter(function(ur){return!fr||ur.groupId===fr});this.tracksInGroup=xr;var lr=this.findTrackId(pr==null?void 0:pr.name)||this.findTrackId();this.groupId=fr;var hr={subtitleTracks:xr};this.log("Updating subtitle tracks, "+xr.length+' track(s) found in "'+fr+'" group-id'),this.hls.trigger(Rt.Events.SUBTITLE_TRACKS_UPDATED,hr),lr!==-1&&this.setSubtitleTrack(lr,pr)}}},rr.findTrackId=function(sr){for(var dr=this.tracksInGroup,fr=0;fr<dr.length;fr++){var pr=dr[fr];if((!this.selectDefaultTrack||pr.default)&&(!sr||sr===pr.name))return pr.id}return-1},rr.onError=function(sr,dr){Kt.prototype.onError.call(this,sr,dr),!(dr.fatal||!dr.context)&&dr.context.type===Nt.PlaylistContextType.SUBTITLE_TRACK&&dr.context.id===this.trackId&&dr.context.groupId===this.groupId&&this.retryLoadingOrFail(dr)},rr.loadPlaylist=function(sr){Kt.prototype.loadPlaylist.call(this);var dr=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(dr)){var fr=dr.id,pr=dr.groupId,xr=dr.url;if(sr)try{xr=sr.addDirectives(xr)}catch(lr){this.warn("Could not construct new URL with HLS Delivery Directives: "+lr)}this.log("Loading subtitle playlist for id "+fr),this.hls.trigger(Rt.Events.SUBTITLE_TRACK_LOADING,{url:xr,id:fr,groupId:pr,deliveryDirectives:sr||null})}},rr.toggleTrackModes=function(sr){var dr=this,fr=this.media,pr=this.trackId;if(fr){var xr=tr(fr.textTracks),lr=xr.filter(function(mr){return mr.groupId===dr.groupId});if(sr===-1)[].slice.call(xr).forEach(function(mr){mr.mode="disabled"});else{var hr=lr[pr];hr&&(hr.mode="disabled")}var ur=lr[sr];ur&&(ur.mode=this.subtitleDisplay?"showing":"hidden")}},rr.setSubtitleTrack=function(sr,dr){var fr,pr=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=sr;return}if(this.trackId!==sr&&this.toggleTrackModes(sr),!(this.trackId===sr&&(sr===-1||(fr=pr[sr])!==null&&fr!==void 0&&fr.details)||sr<-1||sr>=pr.length)){this.clearTimer();var xr=pr[sr];if(this.log("Switching to subtitle track "+sr),this.trackId=sr,xr){var lr=xr.id,hr=xr.groupId,ur=hr===void 0?"":hr,mr=xr.name,ir=xr.type,_r=xr.url;this.hls.trigger(Rt.Events.SUBTITLE_TRACK_SWITCH,{id:lr,groupId:ur,name:mr,type:ir,url:_r});var yr=this.switchParams(xr.url,dr==null?void 0:dr.details);this.loadPlaylist(yr)}else this.hls.trigger(Rt.Events.SUBTITLE_TRACK_SWITCH,{id:sr})}},rr.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var sr=-1,dr=tr(this.media.textTracks),fr=0;fr<dr.length;fr++)if(dr[fr].mode==="hidden")sr=fr;else if(dr[fr].mode==="showing"){sr=fr;break}this.subtitleTrack!==sr&&(this.subtitleTrack=sr)}},Wt(Zt,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(sr){this._subtitleDisplay=sr,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(sr){this.selectDefaultTrack=!1;var dr=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(sr,dr)}}]),Zt}(kt.default);function tr(Kt){for(var Zt=[],rr=0;rr<Kt.length;rr++){var ar=Kt[rr];(ar.kind==="subtitles"||ar.kind==="captions")&&ar.label&&Zt.push(Kt[rr])}return Zt}const cr=Ft},"./src/controller/timeline-controller.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{TimelineController:()=>Ft});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/events.ts"),kt=Ct("./src/utils/cea-608-parser.ts"),Nt=Ct("./src/utils/output-filter.ts"),zt=Ct("./src/utils/webvtt-parser.ts"),Wt=Ct("./src/utils/texttrack-utils.ts"),nr=Ct("./src/utils/imsc1-ttml-parser.ts"),Ut=Ct("./src/utils/mp4-tools.ts"),Ht=Ct("./src/types/loader.ts"),Bt=Ct("./src/utils/logger.ts"),Ft=function(){function Zt(ar){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Kt(),this.captionsProperties=void 0,this.hls=ar,this.config=ar.config,this.Cues=ar.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var sr=new Nt.default(this,"textTrack1"),dr=new Nt.default(this,"textTrack2"),fr=new Nt.default(this,"textTrack3"),pr=new Nt.default(this,"textTrack4");this.cea608Parser1=new kt.default(1,sr,dr),this.cea608Parser2=new kt.default(3,fr,pr)}ar.on(Dt.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),ar.on(Dt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),ar.on(Dt.Events.MANIFEST_LOADING,this.onManifestLoading,this),ar.on(Dt.Events.MANIFEST_LOADED,this.onManifestLoaded,this),ar.on(Dt.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),ar.on(Dt.Events.FRAG_LOADING,this.onFragLoading,this),ar.on(Dt.Events.FRAG_LOADED,this.onFragLoaded,this),ar.on(Dt.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),ar.on(Dt.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),ar.on(Dt.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),ar.on(Dt.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),ar.on(Dt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var rr=Zt.prototype;return rr.destroy=function(){var sr=this.hls;sr.off(Dt.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),sr.off(Dt.Events.MEDIA_DETACHING,this.onMediaDetaching,this),sr.off(Dt.Events.MANIFEST_LOADING,this.onManifestLoading,this),sr.off(Dt.Events.MANIFEST_LOADED,this.onManifestLoaded,this),sr.off(Dt.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),sr.off(Dt.Events.FRAG_LOADING,this.onFragLoading,this),sr.off(Dt.Events.FRAG_LOADED,this.onFragLoaded,this),sr.off(Dt.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),sr.off(Dt.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),sr.off(Dt.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),sr.off(Dt.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),sr.off(Dt.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},rr.addCues=function(sr,dr,fr,pr,xr){for(var lr=!1,hr=xr.length;hr--;){var ur=xr[hr],mr=cr(ur[0],ur[1],dr,fr);if(mr>=0&&(ur[0]=Math.min(ur[0],dr),ur[1]=Math.max(ur[1],fr),lr=!0,mr/(fr-dr)>.5))return}if(lr||xr.push([dr,fr]),this.config.renderTextTracksNatively){var ir=this.captionsTracks[sr];this.Cues.newCue(ir,dr,fr,pr)}else{var _r=this.Cues.newCue(null,dr,fr,pr);this.hls.trigger(Dt.Events.CUES_PARSED,{type:"captions",cues:_r,track:sr})}},rr.onInitPtsFound=function(sr,dr){var fr=this,pr=dr.frag,xr=dr.id,lr=dr.initPTS,hr=dr.timescale,ur=this.unparsedVttFrags;xr==="main"&&(this.initPTS[pr.cc]=lr,this.timescale[pr.cc]=hr),ur.length&&(this.unparsedVttFrags=[],ur.forEach(function(mr){fr.onFragLoaded(Dt.Events.FRAG_LOADED,mr)}))},rr.getExistingTrack=function(sr){var dr=this.media;if(dr)for(var fr=0;fr<dr.textTracks.length;fr++){var pr=dr.textTracks[fr];if(pr[sr])return pr}return null},rr.createCaptionsTrack=function(sr){this.config.renderTextTracksNatively?this.createNativeTrack(sr):this.createNonNativeTrack(sr)},rr.createNativeTrack=function(sr){if(!this.captionsTracks[sr]){var dr=this.captionsProperties,fr=this.captionsTracks,pr=this.media,xr=dr[sr],lr=xr.label,hr=xr.languageCode,ur=this.getExistingTrack(sr);if(ur)fr[sr]=ur,(0,Wt.clearCurrentCues)(fr[sr]),(0,Wt.sendAddTrackEvent)(fr[sr],pr);else{var mr=this.createTextTrack("captions",lr,hr);mr&&(mr[sr]=!0,fr[sr]=mr)}}},rr.createNonNativeTrack=function(sr){if(!this.nonNativeCaptionsTracks[sr]){var dr=this.captionsProperties[sr];if(dr){var fr=dr.label,pr={_id:sr,label:fr,kind:"captions",default:dr.media?!!dr.media.default:!1,closedCaptions:dr.media};this.nonNativeCaptionsTracks[sr]=pr,this.hls.trigger(Dt.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[pr]})}}},rr.createTextTrack=function(sr,dr,fr){var pr=this.media;if(pr)return pr.addTextTrack(sr,dr,fr)},rr.onMediaAttaching=function(sr,dr){this.media=dr.media,this._cleanTracks()},rr.onMediaDetaching=function(){var sr=this.captionsTracks;Object.keys(sr).forEach(function(dr){(0,Wt.clearCurrentCues)(sr[dr]),delete sr[dr]}),this.nonNativeCaptionsTracks={}},rr.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Kt(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},rr._cleanTracks=function(){var sr=this.media;if(sr){var dr=sr.textTracks;if(dr)for(var fr=0;fr<dr.length;fr++)(0,Wt.clearCurrentCues)(dr[fr])}},rr.onSubtitleTracksUpdated=function(sr,dr){var fr=this;this.textTracks=[];var pr=dr.subtitleTracks||[],xr=pr.some(function(mr){return mr.textCodec===nr.IMSC1_CODEC});if(this.config.enableWebVTT||xr&&this.config.enableIMSC1){var lr=this.tracks&&pr&&this.tracks.length===pr.length;if(this.tracks=pr||[],this.config.renderTextTracksNatively){var hr=this.media?this.media.textTracks:[];this.tracks.forEach(function(mr,ir){var _r;if(ir<hr.length){for(var yr=null,gr=0;gr<hr.length;gr++)if(tr(hr[gr],mr)){yr=hr[gr];break}yr&&(_r=yr)}if(_r)(0,Wt.clearCurrentCues)(_r);else{var Sr=fr._captionsOrSubtitlesFromCharacteristics(mr);_r=fr.createTextTrack(Sr,mr.name,mr.lang),_r&&(_r.mode="disabled")}_r&&(_r.groupId=mr.groupId,fr.textTracks.push(_r))})}else if(!lr&&this.tracks&&this.tracks.length){var ur=this.tracks.map(function(mr){return{label:mr.name,kind:mr.type.toLowerCase(),default:mr.default,subtitleTrack:mr}});this.hls.trigger(Dt.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:ur})}}},rr._captionsOrSubtitlesFromCharacteristics=function(sr){var dr;if((dr=sr.attrs)!==null&&dr!==void 0&&dr.CHARACTERISTICS){var fr=/transcribes-spoken-dialog/gi.test(sr.attrs.CHARACTERISTICS),pr=/describes-music-and-sound/gi.test(sr.attrs.CHARACTERISTICS);if(fr&&pr)return"captions"}return"subtitles"},rr.onManifestLoaded=function(sr,dr){var fr=this;this.config.enableCEA708Captions&&dr.captions&&dr.captions.forEach(function(pr){var xr=/(?:CC|SERVICE)([1-4])/.exec(pr.instreamId);if(xr){var lr="textTrack"+xr[1],hr=fr.captionsProperties[lr];hr&&(hr.label=pr.name,pr.lang&&(hr.languageCode=pr.lang),hr.media=pr)}})},rr.closedCaptionsForLevel=function(sr){var dr=this.hls.levels[sr.level];return dr==null?void 0:dr.attrs["CLOSED-CAPTIONS"]},rr.onFragLoading=function(sr,dr){var fr=this.cea608Parser1,pr=this.cea608Parser2,xr=this.lastSn,lr=this.lastPartIndex;if(!(!this.enabled||!(fr&&pr))&&dr.frag.type===Ht.PlaylistLevelType.MAIN){var hr,ur,mr=dr.frag.sn,ir=(hr=dr==null||(ur=dr.part)===null||ur===void 0?void 0:ur.index)!=null?hr:-1;mr===xr+1||mr===xr&&ir===lr+1||(fr.reset(),pr.reset()),this.lastSn=mr,this.lastPartIndex=ir}},rr.onFragLoaded=function(sr,dr){var fr=dr.frag,pr=dr.payload,xr=this.initPTS,lr=this.unparsedVttFrags;if(fr.type===Ht.PlaylistLevelType.SUBTITLE)if(pr.byteLength){if(!(0,Rt.isFiniteNumber)(xr[fr.cc])){lr.push(dr),xr.length&&this.hls.trigger(Dt.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:fr,error:new Error("Missing initial subtitle PTS")});return}var hr=fr.decryptdata,ur="stats"in dr;if(hr==null||!hr.encrypted||ur){var mr=this.tracks[fr.level],ir=this.vttCCs;ir[fr.cc]||(ir[fr.cc]={start:fr.start,prevCC:this.prevCC,new:!0},this.prevCC=fr.cc),mr&&mr.textCodec===nr.IMSC1_CODEC?this._parseIMSC1(fr,pr):this._parseVTTs(fr,pr,ir)}}else this.hls.trigger(Dt.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:fr,error:new Error("Empty subtitle payload")})},rr._parseIMSC1=function(sr,dr){var fr=this,pr=this.hls;(0,nr.parseIMSC1)(dr,this.initPTS[sr.cc],this.timescale[sr.cc],function(xr){fr._appendCues(xr,sr.level),pr.trigger(Dt.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:sr})},function(xr){Bt.logger.log("Failed to parse IMSC1: "+xr),pr.trigger(Dt.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:sr,error:xr})})},rr._parseVTTs=function(sr,dr,fr){var pr,xr=this,lr=this.hls,hr=(pr=sr.initSegment)!==null&&pr!==void 0&&pr.data?(0,Ut.appendUint8Array)(sr.initSegment.data,new Uint8Array(dr)):dr;(0,zt.parseWebVTT)(hr,this.initPTS[sr.cc],this.timescale[sr.cc],fr,sr.cc,sr.start,function(ur){xr._appendCues(ur,sr.level),lr.trigger(Dt.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:sr})},function(ur){xr._fallbackToIMSC1(sr,dr),Bt.logger.log("Failed to parse VTT cue: "+ur),lr.trigger(Dt.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:sr,error:ur})})},rr._fallbackToIMSC1=function(sr,dr){var fr=this,pr=this.tracks[sr.level];pr.textCodec||(0,nr.parseIMSC1)(dr,this.initPTS[sr.cc],this.timescale[sr.cc],function(){pr.textCodec=nr.IMSC1_CODEC,fr._parseIMSC1(sr,dr)},function(){pr.textCodec="wvtt"})},rr._appendCues=function(sr,dr){var fr=this.hls;if(this.config.renderTextTracksNatively){var pr=this.textTracks[dr];if(!pr||pr.mode==="disabled")return;sr.forEach(function(hr){return(0,Wt.addCueToTrack)(pr,hr)})}else{var xr=this.tracks[dr];if(!xr)return;var lr=xr.default?"default":"subtitles"+dr;fr.trigger(Dt.Events.CUES_PARSED,{type:"subtitles",cues:sr,track:lr})}},rr.onFragDecrypted=function(sr,dr){var fr=dr.frag;if(fr.type===Ht.PlaylistLevelType.SUBTITLE){if(!(0,Rt.isFiniteNumber)(this.initPTS[fr.cc])){this.unparsedVttFrags.push(dr);return}this.onFragLoaded(Dt.Events.FRAG_LOADED,dr)}},rr.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},rr.onFragParsingUserdata=function(sr,dr){var fr=this.cea608Parser1,pr=this.cea608Parser2;if(!(!this.enabled||!(fr&&pr))){var xr=dr.frag,lr=dr.samples;if(!(xr.type===Ht.PlaylistLevelType.MAIN&&this.closedCaptionsForLevel(xr)==="NONE"))for(var hr=0;hr<lr.length;hr++){var ur=lr[hr].bytes;if(ur){var mr=this.extractCea608Data(ur);fr.addData(lr[hr].pts,mr[0]),pr.addData(lr[hr].pts,mr[1])}}}},rr.onBufferFlushing=function(sr,dr){var fr=dr.startOffset,pr=dr.endOffset,xr=dr.endOffsetSubtitles,lr=dr.type,hr=this.media;if(!(!hr||hr.currentTime<pr)){if(!lr||lr==="video"){var ur=this.captionsTracks;Object.keys(ur).forEach(function(ir){return(0,Wt.removeCuesInRange)(ur[ir],fr,pr)})}if(this.config.renderTextTracksNatively&&fr===0&&xr!==void 0){var mr=this.textTracks;Object.keys(mr).forEach(function(ir){return(0,Wt.removeCuesInRange)(mr[ir],fr,xr)})}}},rr.extractCea608Data=function(sr){for(var dr=[[],[]],fr=sr[0]&31,pr=2,xr=0;xr<fr;xr++){var lr=sr[pr++],hr=127&sr[pr++],ur=127&sr[pr++];if(!(hr===0&&ur===0)){var mr=(4&lr)!==0;if(mr){var ir=3&lr;(ir===0||ir===1)&&(dr[ir].push(hr),dr[ir].push(ur))}}}return dr},Zt}();function tr(Zt,rr){return Zt&&Zt.label===rr.name&&!(Zt.textTrack1||Zt.textTrack2)}function cr(Zt,rr,ar,sr){return Math.min(rr,sr)-Math.max(Zt,ar)}function Kt(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}},"./src/crypt/aes-crypto.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Rt});var Rt=function(){function Dt(Nt,zt){this.subtle=void 0,this.aesIV=void 0,this.subtle=Nt,this.aesIV=zt}var kt=Dt.prototype;return kt.decrypt=function(zt,Wt){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},Wt,zt)},Dt}()},"./src/crypt/aes-decryptor.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>kt,removePadding:()=>Dt});var Rt=Ct("./src/utils/typed-array.ts");function Dt(Nt){var zt=Nt.byteLength,Wt=zt&&new DataView(Nt.buffer).getUint8(zt-1);return Wt?(0,Rt.sliceUint8)(Nt,0,zt-Wt):Nt}var kt=function(){function Nt(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var zt=Nt.prototype;return zt.uint8ArrayToUint32Array_=function(nr){for(var Ut=new DataView(nr),Ht=new Uint32Array(4),Bt=0;Bt<4;Bt++)Ht[Bt]=Ut.getUint32(Bt*4);return Ht},zt.initTable=function(){var nr=this.sBox,Ut=this.invSBox,Ht=this.subMix,Bt=Ht[0],Ft=Ht[1],tr=Ht[2],cr=Ht[3],Kt=this.invSubMix,Zt=Kt[0],rr=Kt[1],ar=Kt[2],sr=Kt[3],dr=new Uint32Array(256),fr=0,pr=0,xr=0;for(xr=0;xr<256;xr++)xr<128?dr[xr]=xr<<1:dr[xr]=xr<<1^283;for(xr=0;xr<256;xr++){var lr=pr^pr<<1^pr<<2^pr<<3^pr<<4;lr=lr>>>8^lr&255^99,nr[fr]=lr,Ut[lr]=fr;var hr=dr[fr],ur=dr[hr],mr=dr[ur],ir=dr[lr]*257^lr*16843008;Bt[fr]=ir<<24|ir>>>8,Ft[fr]=ir<<16|ir>>>16,tr[fr]=ir<<8|ir>>>24,cr[fr]=ir,ir=mr*16843009^ur*65537^hr*257^fr*16843008,Zt[lr]=ir<<24|ir>>>8,rr[lr]=ir<<16|ir>>>16,ar[lr]=ir<<8|ir>>>24,sr[lr]=ir,fr?(fr=hr^dr[dr[dr[mr^hr]]],pr^=dr[dr[pr]]):fr=pr=1}},zt.expandKey=function(nr){for(var Ut=this.uint8ArrayToUint32Array_(nr),Ht=!0,Bt=0;Bt<Ut.length&&Ht;)Ht=Ut[Bt]===this.key[Bt],Bt++;if(!Ht){this.key=Ut;var Ft=this.keySize=Ut.length;if(Ft!==4&&Ft!==6&&Ft!==8)throw new Error("Invalid aes key size="+Ft);var tr=this.ksRows=(Ft+6+1)*4,cr,Kt,Zt=this.keySchedule=new Uint32Array(tr),rr=this.invKeySchedule=new Uint32Array(tr),ar=this.sBox,sr=this.rcon,dr=this.invSubMix,fr=dr[0],pr=dr[1],xr=dr[2],lr=dr[3],hr,ur;for(cr=0;cr<tr;cr++){if(cr<Ft){hr=Zt[cr]=Ut[cr];continue}ur=hr,cr%Ft===0?(ur=ur<<8|ur>>>24,ur=ar[ur>>>24]<<24|ar[ur>>>16&255]<<16|ar[ur>>>8&255]<<8|ar[ur&255],ur^=sr[cr/Ft|0]<<24):Ft>6&&cr%Ft===4&&(ur=ar[ur>>>24]<<24|ar[ur>>>16&255]<<16|ar[ur>>>8&255]<<8|ar[ur&255]),Zt[cr]=hr=(Zt[cr-Ft]^ur)>>>0}for(Kt=0;Kt<tr;Kt++)cr=tr-Kt,Kt&3?ur=Zt[cr]:ur=Zt[cr-4],Kt<4||cr<=4?rr[Kt]=ur:rr[Kt]=fr[ar[ur>>>24]]^pr[ar[ur>>>16&255]]^xr[ar[ur>>>8&255]]^lr[ar[ur&255]],rr[Kt]=rr[Kt]>>>0}},zt.networkToHostOrderSwap=function(nr){return nr<<24|(nr&65280)<<8|(nr&16711680)>>8|nr>>>24},zt.decrypt=function(nr,Ut,Ht){for(var Bt=this.keySize+6,Ft=this.invKeySchedule,tr=this.invSBox,cr=this.invSubMix,Kt=cr[0],Zt=cr[1],rr=cr[2],ar=cr[3],sr=this.uint8ArrayToUint32Array_(Ht),dr=sr[0],fr=sr[1],pr=sr[2],xr=sr[3],lr=new Int32Array(nr),hr=new Int32Array(lr.length),ur,mr,ir,_r,yr,gr,Sr,Tr,br,Ar,Or,Ir,Cr,Rr,Pr=this.networkToHostOrderSwap;Ut<lr.length;){for(br=Pr(lr[Ut]),Ar=Pr(lr[Ut+1]),Or=Pr(lr[Ut+2]),Ir=Pr(lr[Ut+3]),yr=br^Ft[0],gr=Ir^Ft[1],Sr=Or^Ft[2],Tr=Ar^Ft[3],Cr=4,Rr=1;Rr<Bt;Rr++)ur=Kt[yr>>>24]^Zt[gr>>16&255]^rr[Sr>>8&255]^ar[Tr&255]^Ft[Cr],mr=Kt[gr>>>24]^Zt[Sr>>16&255]^rr[Tr>>8&255]^ar[yr&255]^Ft[Cr+1],ir=Kt[Sr>>>24]^Zt[Tr>>16&255]^rr[yr>>8&255]^ar[gr&255]^Ft[Cr+2],_r=Kt[Tr>>>24]^Zt[yr>>16&255]^rr[gr>>8&255]^ar[Sr&255]^Ft[Cr+3],yr=ur,gr=mr,Sr=ir,Tr=_r,Cr=Cr+4;ur=tr[yr>>>24]<<24^tr[gr>>16&255]<<16^tr[Sr>>8&255]<<8^tr[Tr&255]^Ft[Cr],mr=tr[gr>>>24]<<24^tr[Sr>>16&255]<<16^tr[Tr>>8&255]<<8^tr[yr&255]^Ft[Cr+1],ir=tr[Sr>>>24]<<24^tr[Tr>>16&255]<<16^tr[yr>>8&255]<<8^tr[gr&255]^Ft[Cr+2],_r=tr[Tr>>>24]<<24^tr[yr>>16&255]<<16^tr[gr>>8&255]<<8^tr[Sr&255]^Ft[Cr+3],hr[Ut]=Pr(ur^dr),hr[Ut+1]=Pr(_r^fr),hr[Ut+2]=Pr(ir^pr),hr[Ut+3]=Pr(mr^xr),dr=br,fr=Ar,pr=Or,xr=Ir,Ut=Ut+4}return hr.buffer},Nt}()},"./src/crypt/decrypter.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Ut});var Rt=Ct("./src/crypt/aes-crypto.ts"),Dt=Ct("./src/crypt/fast-aes-key.ts"),kt=Ct("./src/crypt/aes-decryptor.ts"),Nt=Ct("./src/utils/logger.ts"),zt=Ct("./src/utils/mp4-tools.ts"),Wt=Ct("./src/utils/typed-array.ts"),nr=16,Ut=function(){function Ht(Ft,tr){var cr=tr===void 0?{}:tr,Kt=cr.removePKCS7Padding,Zt=Kt===void 0?!0:Kt;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=Ft.enableSoftwareAES,this.removePKCS7Padding=Zt,Zt)try{var rr=self.crypto;rr&&(this.subtle=rr.subtle||rr.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}var Bt=Ht.prototype;return Bt.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},Bt.isSync=function(){return this.useSoftware},Bt.flush=function(){var tr=this.currentResult,cr=this.remainderData;if(!tr||cr)return this.reset(),null;var Kt=new Uint8Array(tr);return this.reset(),this.removePKCS7Padding?(0,kt.removePadding)(Kt):Kt},Bt.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},Bt.decrypt=function(tr,cr,Kt){var Zt=this;return this.useSoftware?new Promise(function(rr,ar){Zt.softwareDecrypt(new Uint8Array(tr),cr,Kt);var sr=Zt.flush();sr?rr(sr.buffer):ar(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(tr),cr,Kt)},Bt.softwareDecrypt=function(tr,cr,Kt){var Zt=this.currentIV,rr=this.currentResult,ar=this.remainderData;this.logOnce("JS AES decrypt"),ar&&(tr=(0,zt.appendUint8Array)(ar,tr),this.remainderData=null);var sr=this.getValidChunk(tr);if(!sr.length)return null;Zt&&(Kt=Zt);var dr=this.softwareDecrypter;dr||(dr=this.softwareDecrypter=new kt.default),dr.expandKey(cr);var fr=rr;return this.currentResult=dr.decrypt(sr.buffer,0,Kt),this.currentIV=(0,Wt.sliceUint8)(sr,-16).buffer,fr||null},Bt.webCryptoDecrypt=function(tr,cr,Kt){var Zt=this,rr=this.subtle;return(this.key!==cr||!this.fastAesKey)&&(this.key=cr,this.fastAesKey=new Dt.default(rr,cr)),this.fastAesKey.expandKey().then(function(ar){if(!rr)return Promise.reject(new Error("web crypto not initialized"));Zt.logOnce("WebCrypto AES decrypt");var sr=new Rt.default(rr,new Uint8Array(Kt));return sr.decrypt(tr.buffer,ar)}).catch(function(ar){return Nt.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+ar.name+": "+ar.message),Zt.onWebCryptoError(tr,cr,Kt)})},Bt.onWebCryptoError=function(tr,cr,Kt){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(tr,cr,Kt);var Zt=this.flush();if(Zt)return Zt.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},Bt.getValidChunk=function(tr){var cr=tr,Kt=tr.length-tr.length%nr;return Kt!==tr.length&&(cr=(0,Wt.sliceUint8)(tr,0,Kt),this.remainderData=(0,Wt.sliceUint8)(tr,Kt)),cr},Bt.logOnce=function(tr){this.logEnabled&&(Nt.logger.log("[decrypter]: "+tr),this.logEnabled=!1)},Ht}()},"./src/crypt/fast-aes-key.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Rt});var Rt=function(){function Dt(Nt,zt){this.subtle=void 0,this.key=void 0,this.subtle=Nt,this.key=zt}var kt=Dt.prototype;return kt.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},Dt}()},"./src/demux/aacdemuxer.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Ut});var Rt=Ct("./src/demux/base-audio-demuxer.ts"),Dt=Ct("./src/demux/adts.ts"),kt=Ct("./src/utils/logger.ts"),Nt=Ct("./src/demux/id3.ts");function zt(Ht,Bt){Ht.prototype=Object.create(Bt.prototype),Ht.prototype.constructor=Ht,Wt(Ht,Bt)}function Wt(Ht,Bt){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tr,cr){return tr.__proto__=cr,tr},Wt(Ht,Bt)}var nr=function(Ht){zt(Bt,Ht);function Bt(tr,cr){var Kt;return Kt=Ht.call(this)||this,Kt.observer=void 0,Kt.config=void 0,Kt.observer=tr,Kt.config=cr,Kt}var Ft=Bt.prototype;return Ft.resetInitSegment=function(cr,Kt,Zt,rr){Ht.prototype.resetInitSegment.call(this,cr,Kt,Zt,rr),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:Kt,duration:rr,inputTimeScale:9e4,dropped:0}},Bt.probe=function(cr){if(!cr)return!1;for(var Kt=Nt.getID3Data(cr,0)||[],Zt=Kt.length,rr=cr.length;Zt<rr;Zt++)if(Dt.probe(cr,Zt))return kt.logger.log("ADTS sync word found !"),!0;return!1},Ft.canParse=function(cr,Kt){return Dt.canParse(cr,Kt)},Ft.appendFrame=function(cr,Kt,Zt){Dt.initTrackConfig(cr,this.observer,Kt,Zt,cr.manifestCodec);var rr=Dt.appendFrame(cr,Kt,Zt,this.basePTS,this.frameIndex);if(rr&&rr.missing===0)return rr},Bt}(Rt.default);const Ut=nr},"./src/demux/adts.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{appendFrame:()=>Zt,canGetFrameLength:()=>Ut,canParse:()=>Bt,getAudioConfig:()=>Nt,getFrameDuration:()=>cr,getFullFrameLength:()=>nr,getHeaderLength:()=>Wt,initTrackConfig:()=>tr,isHeader:()=>Ht,isHeaderPattern:()=>zt,parseFrameHeader:()=>Kt,probe:()=>Ft});var Rt=Ct("./src/utils/logger.ts"),Dt=Ct("./src/errors.ts"),kt=Ct("./src/events.ts");function Nt(rr,ar,sr,dr){var fr,pr,xr,lr,hr=navigator.userAgent.toLowerCase(),ur=dr,mr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];fr=((ar[sr+2]&192)>>>6)+1;var ir=(ar[sr+2]&60)>>>2;if(ir>mr.length-1){rr.trigger(kt.Events.ERROR,{type:Dt.ErrorTypes.MEDIA_ERROR,details:Dt.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+ir});return}return xr=(ar[sr+2]&1)<<2,xr|=(ar[sr+3]&192)>>>6,Rt.logger.log("manifest codec:"+dr+", ADTS type:"+fr+", samplingIndex:"+ir),/firefox/i.test(hr)?ir>=6?(fr=5,lr=new Array(4),pr=ir-3):(fr=2,lr=new Array(2),pr=ir):hr.indexOf("android")!==-1?(fr=2,lr=new Array(2),pr=ir):(fr=5,lr=new Array(4),dr&&(dr.indexOf("mp4a.40.29")!==-1||dr.indexOf("mp4a.40.5")!==-1)||!dr&&ir>=6?pr=ir-3:((dr&&dr.indexOf("mp4a.40.2")!==-1&&(ir>=6&&xr===1||/vivaldi/i.test(hr))||!dr&&xr===1)&&(fr=2,lr=new Array(2)),pr=ir)),lr[0]=fr<<3,lr[0]|=(ir&14)>>1,lr[1]|=(ir&1)<<7,lr[1]|=xr<<3,fr===5&&(lr[1]|=(pr&14)>>1,lr[2]=(pr&1)<<7,lr[2]|=8,lr[3]=0),{config:lr,samplerate:mr[ir],channelCount:xr,codec:"mp4a.40."+fr,manifestCodec:ur}}function zt(rr,ar){return rr[ar]===255&&(rr[ar+1]&246)===240}function Wt(rr,ar){return rr[ar+1]&1?7:9}function nr(rr,ar){return(rr[ar+3]&3)<<11|rr[ar+4]<<3|(rr[ar+5]&224)>>>5}function Ut(rr,ar){return ar+5<rr.length}function Ht(rr,ar){return ar+1<rr.length&&zt(rr,ar)}function Bt(rr,ar){return Ut(rr,ar)&&zt(rr,ar)&&nr(rr,ar)<=rr.length-ar}function Ft(rr,ar){if(Ht(rr,ar)){var sr=Wt(rr,ar);if(ar+sr>=rr.length)return!1;var dr=nr(rr,ar);if(dr<=sr)return!1;var fr=ar+dr;return fr===rr.length||Ht(rr,fr)}return!1}function tr(rr,ar,sr,dr,fr){if(!rr.samplerate){var pr=Nt(ar,sr,dr,fr);if(!pr)return;rr.config=pr.config,rr.samplerate=pr.samplerate,rr.channelCount=pr.channelCount,rr.codec=pr.codec,rr.manifestCodec=pr.manifestCodec,Rt.logger.log("parsed codec:"+rr.codec+", rate:"+pr.samplerate+", channels:"+pr.channelCount)}}function cr(rr){return 9216e4/rr}function Kt(rr,ar){var sr=Wt(rr,ar);if(ar+sr<=rr.length){var dr=nr(rr,ar)-sr;if(dr>0)return{headerLength:sr,frameLength:dr}}}function Zt(rr,ar,sr,dr,fr){var pr=cr(rr.samplerate),xr=dr+fr*pr,lr=Kt(ar,sr),hr;if(lr){var ur=lr.frameLength,mr=lr.headerLength,ir=mr+ur,_r=Math.max(0,sr+ir-ar.length);_r?(hr=new Uint8Array(ir-mr),hr.set(ar.subarray(sr+mr,ar.length),0)):hr=ar.subarray(sr+mr,sr+ir);var yr={unit:hr,pts:xr};return _r||rr.samples.push(yr),{sample:yr,length:ir,missing:_r}}var gr=ar.length-sr;hr=new Uint8Array(gr),hr.set(ar.subarray(sr,ar.length),0);var Sr={unit:hr,pts:xr};return{sample:Sr,length:gr,missing:-1}}},"./src/demux/base-audio-demuxer.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Ht,initPTSFn:()=>Ut});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/demux/id3.ts"),kt=Ct("./src/types/demuxer.ts"),Nt=Ct("./src/demux/dummy-demuxed-track.ts"),zt=Ct("./src/utils/mp4-tools.ts"),Wt=Ct("./src/utils/typed-array.ts"),nr=function(){function Bt(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var Ft=Bt.prototype;return Ft.resetInitSegment=function(cr,Kt,Zt,rr){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},Ft.resetTimeStamp=function(cr){this.initPTS=cr,this.resetContiguity()},Ft.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},Ft.canParse=function(cr,Kt){return!1},Ft.appendFrame=function(cr,Kt,Zt){},Ft.demux=function(cr,Kt){this.cachedData&&(cr=(0,zt.appendUint8Array)(this.cachedData,cr),this.cachedData=null);var Zt=Dt.getID3Data(cr,0),rr=Zt?Zt.length:0,ar,sr=this._audioTrack,dr=this._id3Track,fr=Zt?Dt.getTimeStamp(Zt):void 0,pr=cr.length;for((this.basePTS===null||this.frameIndex===0&&(0,Rt.isFiniteNumber)(fr))&&(this.basePTS=Ut(fr,Kt,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),Zt&&Zt.length>0&&dr.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:Zt,type:kt.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});rr<pr;){if(this.canParse(cr,rr)){var xr=this.appendFrame(sr,cr,rr);xr?(this.frameIndex++,this.lastPTS=xr.sample.pts,rr+=xr.length,ar=rr):rr=pr}else Dt.canParse(cr,rr)?(Zt=Dt.getID3Data(cr,rr),dr.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:Zt,type:kt.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),rr+=Zt.length,ar=rr):rr++;if(rr===pr&&ar!==pr){var lr=(0,Wt.sliceUint8)(cr,ar);this.cachedData?this.cachedData=(0,zt.appendUint8Array)(this.cachedData,lr):this.cachedData=lr}}return{audioTrack:sr,videoTrack:(0,Nt.dummyTrack)(),id3Track:dr,textTrack:(0,Nt.dummyTrack)()}},Ft.demuxSampleAes=function(cr,Kt,Zt){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},Ft.flush=function(cr){var Kt=this.cachedData;return Kt&&(this.cachedData=null,this.demux(Kt,0)),{audioTrack:this._audioTrack,videoTrack:(0,Nt.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,Nt.dummyTrack)()}},Ft.destroy=function(){},Bt}(),Ut=function(Ft,tr,cr){return(0,Rt.isFiniteNumber)(Ft)?Ft*90:tr*9e4+(cr||0)};const Ht=nr},"./src/demux/chunk-cache.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Rt});var Rt=function(){function kt(){this.chunks=[],this.dataLength=0}var Nt=kt.prototype;return Nt.push=function(Wt){this.chunks.push(Wt),this.dataLength+=Wt.length},Nt.flush=function(){var Wt=this.chunks,nr=this.dataLength,Ut;if(Wt.length)Wt.length===1?Ut=Wt[0]:Ut=Dt(Wt,nr);else return new Uint8Array(0);return this.reset(),Ut},Nt.reset=function(){this.chunks.length=0,this.dataLength=0},kt}();function Dt(kt,Nt){for(var zt=new Uint8Array(Nt),Wt=0,nr=0;nr<kt.length;nr++){var Ut=kt[nr];zt.set(Ut,Wt),Wt+=Ut.length}return zt}},"./src/demux/dummy-demuxed-track.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{dummyTrack:()=>Rt});function Rt(Dt,kt){return Dt===void 0&&(Dt=""),kt===void 0&&(kt=9e4),{type:Dt,id:-1,pid:-1,inputTimeScale:kt,sequenceNumber:-1,samples:[],dropped:0}}},"./src/demux/exp-golomb.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>kt});var Rt=Ct("./src/utils/logger.ts"),Dt=function(){function Nt(Wt){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=Wt,this.bytesAvailable=Wt.byteLength,this.word=0,this.bitsAvailable=0}var zt=Nt.prototype;return zt.loadWord=function(){var nr=this.data,Ut=this.bytesAvailable,Ht=nr.byteLength-Ut,Bt=new Uint8Array(4),Ft=Math.min(4,Ut);if(Ft===0)throw new Error("no bytes available");Bt.set(nr.subarray(Ht,Ht+Ft)),this.word=new DataView(Bt.buffer).getUint32(0),this.bitsAvailable=Ft*8,this.bytesAvailable-=Ft},zt.skipBits=function(nr){var Ut;nr=Math.min(nr,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>nr?(this.word<<=nr,this.bitsAvailable-=nr):(nr-=this.bitsAvailable,Ut=nr>>3,nr-=Ut<<3,this.bytesAvailable-=Ut,this.loadWord(),this.word<<=nr,this.bitsAvailable-=nr)},zt.readBits=function(nr){var Ut=Math.min(this.bitsAvailable,nr),Ht=this.word>>>32-Ut;if(nr>32&&Rt.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=Ut,this.bitsAvailable>0)this.word<<=Ut;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return Ut=nr-Ut,Ut>0&&this.bitsAvailable?Ht<<Ut|this.readBits(Ut):Ht},zt.skipLZ=function(){var nr;for(nr=0;nr<this.bitsAvailable;++nr)if(this.word&2147483648>>>nr)return this.word<<=nr,this.bitsAvailable-=nr,nr;return this.loadWord(),nr+this.skipLZ()},zt.skipUEG=function(){this.skipBits(1+this.skipLZ())},zt.skipEG=function(){this.skipBits(1+this.skipLZ())},zt.readUEG=function(){var nr=this.skipLZ();return this.readBits(nr+1)-1},zt.readEG=function(){var nr=this.readUEG();return 1&nr?1+nr>>>1:-1*(nr>>>1)},zt.readBoolean=function(){return this.readBits(1)===1},zt.readUByte=function(){return this.readBits(8)},zt.readUShort=function(){return this.readBits(16)},zt.readUInt=function(){return this.readBits(32)},zt.skipScalingList=function(nr){for(var Ut=8,Ht=8,Bt,Ft=0;Ft<nr;Ft++)Ht!==0&&(Bt=this.readEG(),Ht=(Ut+Bt+256)%256),Ut=Ht===0?Ut:Ht},zt.readSPS=function(){var nr=0,Ut=0,Ht=0,Bt=0,Ft,tr,cr,Kt=this.readUByte.bind(this),Zt=this.readBits.bind(this),rr=this.readUEG.bind(this),ar=this.readBoolean.bind(this),sr=this.skipBits.bind(this),dr=this.skipEG.bind(this),fr=this.skipUEG.bind(this),pr=this.skipScalingList.bind(this);Kt();var xr=Kt();if(Zt(5),sr(3),Kt(),fr(),xr===100||xr===110||xr===122||xr===244||xr===44||xr===83||xr===86||xr===118||xr===128){var lr=rr();if(lr===3&&sr(1),fr(),fr(),sr(1),ar())for(tr=lr!==3?8:12,cr=0;cr<tr;cr++)ar()&&(cr<6?pr(16):pr(64))}fr();var hr=rr();if(hr===0)rr();else if(hr===1)for(sr(1),dr(),dr(),Ft=rr(),cr=0;cr<Ft;cr++)dr();fr(),sr(1);var ur=rr(),mr=rr(),ir=Zt(1);ir===0&&sr(1),sr(1),ar()&&(nr=rr(),Ut=rr(),Ht=rr(),Bt=rr());var _r=[1,1];if(ar()&&ar()){var yr=Kt();switch(yr){case 1:_r=[1,1];break;case 2:_r=[12,11];break;case 3:_r=[10,11];break;case 4:_r=[16,11];break;case 5:_r=[40,33];break;case 6:_r=[24,11];break;case 7:_r=[20,11];break;case 8:_r=[32,11];break;case 9:_r=[80,33];break;case 10:_r=[18,11];break;case 11:_r=[15,11];break;case 12:_r=[64,33];break;case 13:_r=[160,99];break;case 14:_r=[4,3];break;case 15:_r=[3,2];break;case 16:_r=[2,1];break;case 255:{_r=[Kt()<<8|Kt(),Kt()<<8|Kt()];break}}}return{width:Math.ceil((ur+1)*16-nr*2-Ut*2),height:(2-ir)*(mr+1)*16-(ir?2:4)*(Ht+Bt),pixelRatio:_r}},zt.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},Nt}();const kt=Dt},"./src/demux/id3.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{canParse:()=>zt,decodeFrame:()=>Bt,getID3Data:()=>kt,getID3Frames:()=>Ht,getTimeStamp:()=>Wt,isFooter:()=>Dt,isHeader:()=>Rt,isTimeStampFrame:()=>nr,testables:()=>rr,utf8ArrayToStr:()=>Zt});var Rt=function(fr,pr){return pr+10<=fr.length&&fr[pr]===73&&fr[pr+1]===68&&fr[pr+2]===51&&fr[pr+3]<255&&fr[pr+4]<255&&fr[pr+6]<128&&fr[pr+7]<128&&fr[pr+8]<128&&fr[pr+9]<128},Dt=function(fr,pr){return pr+10<=fr.length&&fr[pr]===51&&fr[pr+1]===68&&fr[pr+2]===73&&fr[pr+3]<255&&fr[pr+4]<255&&fr[pr+6]<128&&fr[pr+7]<128&&fr[pr+8]<128&&fr[pr+9]<128},kt=function(fr,pr){for(var xr=pr,lr=0;Rt(fr,pr);){lr+=10;var hr=Nt(fr,pr+6);lr+=hr,Dt(fr,pr+10)&&(lr+=10),pr+=lr}if(lr>0)return fr.subarray(xr,xr+lr)},Nt=function(fr,pr){var xr=0;return xr=(fr[pr]&127)<<21,xr|=(fr[pr+1]&127)<<14,xr|=(fr[pr+2]&127)<<7,xr|=fr[pr+3]&127,xr},zt=function(fr,pr){return Rt(fr,pr)&&Nt(fr,pr+6)+10<=fr.length-pr},Wt=function(fr){for(var pr=Ht(fr),xr=0;xr<pr.length;xr++){var lr=pr[xr];if(nr(lr))return Kt(lr)}},nr=function(fr){return fr&&fr.key==="PRIV"&&fr.info==="com.apple.streaming.transportStreamTimestamp"},Ut=function(fr){var pr=String.fromCharCode(fr[0],fr[1],fr[2],fr[3]),xr=Nt(fr,4),lr=10;return{type:pr,size:xr,data:fr.subarray(lr,lr+xr)}},Ht=function(fr){for(var pr=0,xr=[];Rt(fr,pr);){var lr=Nt(fr,pr+6);pr+=10;for(var hr=pr+lr;pr+8<hr;){var ur=Ut(fr.subarray(pr)),mr=Bt(ur);mr&&xr.push(mr),pr+=ur.size+10}Dt(fr,pr)&&(pr+=10)}return xr},Bt=function(fr){return fr.type==="PRIV"?Ft(fr):fr.type[0]==="W"?cr(fr):tr(fr)},Ft=function(fr){if(!(fr.size<2)){var pr=Zt(fr.data,!0),xr=new Uint8Array(fr.data.subarray(pr.length+1));return{key:fr.type,info:pr,data:xr.buffer}}},tr=function(fr){if(!(fr.size<2)){if(fr.type==="TXXX"){var pr=1,xr=Zt(fr.data.subarray(pr),!0);pr+=xr.length+1;var lr=Zt(fr.data.subarray(pr));return{key:fr.type,info:xr,data:lr}}var hr=Zt(fr.data.subarray(1));return{key:fr.type,data:hr}}},cr=function(fr){if(fr.type==="WXXX"){if(fr.size<2)return;var pr=1,xr=Zt(fr.data.subarray(pr),!0);pr+=xr.length+1;var lr=Zt(fr.data.subarray(pr));return{key:fr.type,info:xr,data:lr}}var hr=Zt(fr.data);return{key:fr.type,data:hr}},Kt=function(fr){if(fr.data.byteLength===8){var pr=new Uint8Array(fr.data),xr=pr[3]&1,lr=(pr[4]<<23)+(pr[5]<<15)+(pr[6]<<7)+pr[7];return lr/=45,xr&&(lr+=4772185884e-2),Math.round(lr)}},Zt=function(fr,pr){pr===void 0&&(pr=!1);var xr=sr();if(xr){var lr=xr.decode(fr);if(pr){var hr=lr.indexOf("\0");return hr!==-1?lr.substring(0,hr):lr}return lr.replace(/\0/g,"")}for(var ur=fr.length,mr,ir,_r,yr="",gr=0;gr<ur;){if(mr=fr[gr++],mr===0&&pr)return yr;if(mr===0||mr===3)continue;switch(mr>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:yr+=String.fromCharCode(mr);break;case 12:case 13:ir=fr[gr++],yr+=String.fromCharCode((mr&31)<<6|ir&63);break;case 14:ir=fr[gr++],_r=fr[gr++],yr+=String.fromCharCode((mr&15)<<12|(ir&63)<<6|(_r&63)<<0);break}}return yr},rr={decodeTextFrame:tr},ar;function sr(){return!ar&&typeof self.TextDecoder<"u"&&(ar=new self.TextDecoder("utf-8")),ar}},"./src/demux/mp3demuxer.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Ut});var Rt=Ct("./src/demux/base-audio-demuxer.ts"),Dt=Ct("./src/demux/id3.ts"),kt=Ct("./src/utils/logger.ts"),Nt=Ct("./src/demux/mpegaudio.ts");function zt(Ht,Bt){Ht.prototype=Object.create(Bt.prototype),Ht.prototype.constructor=Ht,Wt(Ht,Bt)}function Wt(Ht,Bt){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tr,cr){return tr.__proto__=cr,tr},Wt(Ht,Bt)}var nr=function(Ht){zt(Bt,Ht);function Bt(){return Ht.apply(this,arguments)||this}var Ft=Bt.prototype;return Ft.resetInitSegment=function(cr,Kt,Zt,rr){Ht.prototype.resetInitSegment.call(this,cr,Kt,Zt,rr),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:Kt,duration:rr,inputTimeScale:9e4,dropped:0}},Bt.probe=function(cr){if(!cr)return!1;for(var Kt=Dt.getID3Data(cr,0)||[],Zt=Kt.length,rr=cr.length;Zt<rr;Zt++)if(Nt.probe(cr,Zt))return kt.logger.log("MPEG Audio sync word found !"),!0;return!1},Ft.canParse=function(cr,Kt){return Nt.canParse(cr,Kt)},Ft.appendFrame=function(cr,Kt,Zt){if(this.basePTS!==null)return Nt.appendFrame(cr,Kt,Zt,this.basePTS,this.frameIndex)},Bt}(Rt.default);const Ut=nr},"./src/demux/mp4demuxer.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>nr});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/types/demuxer.ts"),kt=Ct("./src/utils/mp4-tools.ts"),Nt=Ct("./src/demux/dummy-demuxed-track.ts"),zt=/\/emsg[-/]ID3/i,Wt=function(){function Ut(Bt,Ft){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=Ft}var Ht=Ut.prototype;return Ht.resetTimeStamp=function(){},Ht.resetInitSegment=function(Ft,tr,cr,Kt){var Zt=this.videoTrack=(0,Nt.dummyTrack)("video",1),rr=this.audioTrack=(0,Nt.dummyTrack)("audio",1),ar=this.txtTrack=(0,Nt.dummyTrack)("text",1);if(this.id3Track=(0,Nt.dummyTrack)("id3",1),this.timeOffset=0,!(!Ft||!Ft.byteLength)){var sr=(0,kt.parseInitSegment)(Ft);if(sr.video){var dr=sr.video,fr=dr.id,pr=dr.timescale,xr=dr.codec;Zt.id=fr,Zt.timescale=ar.timescale=pr,Zt.codec=xr}if(sr.audio){var lr=sr.audio,hr=lr.id,ur=lr.timescale,mr=lr.codec;rr.id=hr,rr.timescale=ur,rr.codec=mr}ar.id=kt.RemuxerTrackIdConfig.text,Zt.sampleDuration=0,Zt.duration=rr.duration=Kt}},Ht.resetContiguity=function(){},Ut.probe=function(Ft){return Ft=Ft.length>16384?Ft.subarray(0,16384):Ft,(0,kt.findBox)(Ft,["moof"]).length>0},Ht.demux=function(Ft,tr){this.timeOffset=tr;var cr=Ft,Kt=this.videoTrack,Zt=this.txtTrack;if(this.config.progressive){this.remainderData&&(cr=(0,kt.appendUint8Array)(this.remainderData,Ft));var rr=(0,kt.segmentValidRange)(cr);this.remainderData=rr.remainder,Kt.samples=rr.valid||new Uint8Array}else Kt.samples=cr;var ar=this.extractID3Track(Kt,tr);return Zt.samples=(0,kt.parseSamples)(tr,Kt),{videoTrack:Kt,audioTrack:this.audioTrack,id3Track:ar,textTrack:this.txtTrack}},Ht.flush=function(){var Ft=this.timeOffset,tr=this.videoTrack,cr=this.txtTrack;tr.samples=this.remainderData||new Uint8Array,this.remainderData=null;var Kt=this.extractID3Track(tr,this.timeOffset);return cr.samples=(0,kt.parseSamples)(Ft,tr),{videoTrack:tr,audioTrack:(0,Nt.dummyTrack)(),id3Track:Kt,textTrack:(0,Nt.dummyTrack)()}},Ht.extractID3Track=function(Ft,tr){var cr=this.id3Track;if(Ft.samples.length){var Kt=(0,kt.findBox)(Ft.samples,["emsg"]);Kt&&Kt.forEach(function(Zt){var rr=(0,kt.parseEmsg)(Zt);if(zt.test(rr.schemeIdUri)){var ar=(0,Rt.isFiniteNumber)(rr.presentationTime)?rr.presentationTime/rr.timeScale:tr+rr.presentationTimeDelta/rr.timeScale,sr=rr.eventDuration===4294967295?Number.POSITIVE_INFINITY:rr.eventDuration/rr.timeScale;sr<=.001&&(sr=Number.POSITIVE_INFINITY);var dr=rr.payload;cr.samples.push({data:dr,len:dr.byteLength,dts:ar,pts:ar,type:Dt.MetadataSchema.emsg,duration:sr})}})}return cr},Ht.demuxSampleAes=function(Ft,tr,cr){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},Ht.destroy=function(){},Ut}();const nr=Wt},"./src/demux/mpegaudio.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{appendFrame:()=>Wt,canParse:()=>Bt,isHeader:()=>Ht,isHeaderPattern:()=>Ut,parseHeader:()=>nr,probe:()=>Ft});var Rt=null,Dt=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],kt=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Nt=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],zt=[0,1,1,4];function Wt(tr,cr,Kt,Zt,rr){if(!(Kt+24>cr.length)){var ar=nr(cr,Kt);if(ar&&Kt+ar.frameLength<=cr.length){var sr=ar.samplesPerFrame*9e4/ar.sampleRate,dr=Zt+rr*sr,fr={unit:cr.subarray(Kt,Kt+ar.frameLength),pts:dr,dts:dr};return tr.config=[],tr.channelCount=ar.channelCount,tr.samplerate=ar.sampleRate,tr.samples.push(fr),{sample:fr,length:ar.frameLength,missing:0}}}}function nr(tr,cr){var Kt=tr[cr+1]>>3&3,Zt=tr[cr+1]>>1&3,rr=tr[cr+2]>>4&15,ar=tr[cr+2]>>2&3;if(Kt!==1&&rr!==0&&rr!==15&&ar!==3){var sr=tr[cr+2]>>1&1,dr=tr[cr+3]>>6,fr=Kt===3?3-Zt:Zt===3?3:4,pr=Dt[fr*14+rr-1]*1e3,xr=Kt===3?0:Kt===2?1:2,lr=kt[xr*3+ar],hr=dr===3?1:2,ur=Nt[Kt][Zt],mr=zt[Zt],ir=ur*8*mr,_r=Math.floor(ur*pr/lr+sr)*mr;if(Rt===null){var yr=navigator.userAgent||"",gr=yr.match(/Chrome\/(\d+)/i);Rt=gr?parseInt(gr[1]):0}var Sr=!!Rt&&Rt<=87;return Sr&&Zt===2&&pr>=224e3&&dr===0&&(tr[cr+3]=tr[cr+3]|128),{sampleRate:lr,channelCount:hr,frameLength:_r,samplesPerFrame:ir}}}function Ut(tr,cr){return tr[cr]===255&&(tr[cr+1]&224)===224&&(tr[cr+1]&6)!==0}function Ht(tr,cr){return cr+1<tr.length&&Ut(tr,cr)}function Bt(tr,cr){var Kt=4;return Ut(tr,cr)&&Kt<=tr.length-cr}function Ft(tr,cr){if(cr+1<tr.length&&Ut(tr,cr)){var Kt=4,Zt=nr(tr,cr),rr=Kt;Zt!=null&&Zt.frameLength&&(rr=Zt.frameLength);var ar=cr+rr;return ar===tr.length||Ht(tr,ar)}return!1}},"./src/demux/sample-aes.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Nt});var Rt=Ct("./src/crypt/decrypter.ts"),Dt=Ct("./src/utils/mp4-tools.ts"),kt=function(){function zt(nr,Ut,Ht){this.keyData=void 0,this.decrypter=void 0,this.keyData=Ht,this.decrypter=new Rt.default(Ut,{removePKCS7Padding:!1})}var Wt=zt.prototype;return Wt.decryptBuffer=function(Ut){return this.decrypter.decrypt(Ut,this.keyData.key.buffer,this.keyData.iv.buffer)},Wt.decryptAacSample=function(Ut,Ht,Bt){var Ft=this,tr=Ut[Ht].unit;if(!(tr.length<=16)){var cr=tr.subarray(16,tr.length-tr.length%16),Kt=cr.buffer.slice(cr.byteOffset,cr.byteOffset+cr.length);this.decryptBuffer(Kt).then(function(Zt){var rr=new Uint8Array(Zt);tr.set(rr,16),Ft.decrypter.isSync()||Ft.decryptAacSamples(Ut,Ht+1,Bt)})}},Wt.decryptAacSamples=function(Ut,Ht,Bt){for(;;Ht++){if(Ht>=Ut.length){Bt();return}if(!(Ut[Ht].unit.length<32)&&(this.decryptAacSample(Ut,Ht,Bt),!this.decrypter.isSync()))return}},Wt.getAvcEncryptedData=function(Ut){for(var Ht=Math.floor((Ut.length-48)/160)*16+16,Bt=new Int8Array(Ht),Ft=0,tr=32;tr<Ut.length-16;tr+=160,Ft+=16)Bt.set(Ut.subarray(tr,tr+16),Ft);return Bt},Wt.getAvcDecryptedUnit=function(Ut,Ht){for(var Bt=new Uint8Array(Ht),Ft=0,tr=32;tr<Ut.length-16;tr+=160,Ft+=16)Ut.set(Bt.subarray(Ft,Ft+16),tr);return Ut},Wt.decryptAvcSample=function(Ut,Ht,Bt,Ft,tr){var cr=this,Kt=(0,Dt.discardEPB)(tr.data),Zt=this.getAvcEncryptedData(Kt);this.decryptBuffer(Zt.buffer).then(function(rr){tr.data=cr.getAvcDecryptedUnit(Kt,rr),cr.decrypter.isSync()||cr.decryptAvcSamples(Ut,Ht,Bt+1,Ft)})},Wt.decryptAvcSamples=function(Ut,Ht,Bt,Ft){if(Ut instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;Ht++,Bt=0){if(Ht>=Ut.length){Ft();return}for(var tr=Ut[Ht].units;!(Bt>=tr.length);Bt++){var cr=tr[Bt];if(!(cr.data.length<=48||cr.type!==1&&cr.type!==5)&&(this.decryptAvcSample(Ut,Ht,Bt,Ft,cr),!this.decrypter.isSync()))return}}},zt}();const Nt=kt},"./src/demux/transmuxer-interface.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Ht});var Rt=Ct("./src/demux/webworkify-webpack.js"),Dt=Ct("./src/events.ts"),kt=Ct("./src/demux/transmuxer.ts"),Nt=Ct("./src/utils/logger.ts"),zt=Ct("./src/errors.ts"),Wt=Ct("./src/utils/mediasource-helper.ts"),nr=Ct("./node_modules/eventemitter3/index.js"),Ut=(0,Wt.getMediaSource)()||{isTypeSupported:function(){return!1}},Ht=function(){function Bt(tr,cr,Kt,Zt){var rr=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var ar=tr.config;this.hls=tr,this.id=cr,this.useWorker=!!ar.enableWorker,this.onTransmuxComplete=Kt,this.onFlush=Zt;var sr=function(lr,hr){hr=hr||{},hr.frag=rr.frag,hr.id=rr.id,rr.hls.trigger(lr,hr)};this.observer=new nr.EventEmitter,this.observer.on(Dt.Events.FRAG_DECRYPTED,sr),this.observer.on(Dt.Events.ERROR,sr);var dr={mp4:Ut.isTypeSupported("video/mp4"),mpeg:Ut.isTypeSupported("audio/mpeg"),mp3:Ut.isTypeSupported('audio/mp4; codecs="mp3"')},fr=navigator.vendor;if(this.useWorker&&typeof Worker<"u"){Nt.logger.log("demuxing in webworker");var pr;try{pr=this.worker=(0,Rt.default)("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),pr.addEventListener("message",this.onwmsg),pr.onerror=function(xr){rr.useWorker=!1,Nt.logger.warn("Exception in webworker, fallback to inline"),rr.hls.trigger(Dt.Events.ERROR,{type:zt.ErrorTypes.OTHER_ERROR,details:zt.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(xr.message+"  ("+xr.filename+":"+xr.lineno+")")})},pr.postMessage({cmd:"init",typeSupported:dr,vendor:fr,id:cr,config:JSON.stringify(ar)})}catch(xr){Nt.logger.warn("Error in worker:",xr),Nt.logger.error("Error while initializing DemuxerWorker, fallback to inline"),pr&&self.URL.revokeObjectURL(pr.objectURL),this.transmuxer=new kt.default(this.observer,dr,ar,fr,cr),this.worker=null}}else this.transmuxer=new kt.default(this.observer,dr,ar,fr,cr)}var Ft=Bt.prototype;return Ft.destroy=function(){var cr=this.worker;if(cr)cr.removeEventListener("message",this.onwmsg),cr.terminate(),this.worker=null,this.onwmsg=void 0;else{var Kt=this.transmuxer;Kt&&(Kt.destroy(),this.transmuxer=null)}var Zt=this.observer;Zt&&Zt.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},Ft.push=function(cr,Kt,Zt,rr,ar,sr,dr,fr,pr,xr){var lr,hr,ur=this;pr.transmuxing.start=self.performance.now();var mr=this.transmuxer,ir=this.worker,_r=sr?sr.start:ar.start,yr=ar.decryptdata,gr=this.frag,Sr=!(gr&&ar.cc===gr.cc),Tr=!(gr&&pr.level===gr.level),br=gr?pr.sn-gr.sn:-1,Ar=this.part?pr.part-this.part.index:-1,Or=br===0&&pr.id>1&&pr.id===(gr==null?void 0:gr.stats.chunkCount),Ir=!Tr&&(br===1||br===0&&(Ar===1||Or&&Ar<=0)),Cr=self.performance.now();(Tr||br||ar.stats.parsing.start===0)&&(ar.stats.parsing.start=Cr),sr&&(Ar||!Ir)&&(sr.stats.parsing.start=Cr);var Rr=!(gr&&((lr=ar.initSegment)===null||lr===void 0?void 0:lr.url)===((hr=gr.initSegment)===null||hr===void 0?void 0:hr.url)),Pr=new kt.TransmuxState(Sr,Ir,fr,Tr,_r,Rr);if(!Ir||Sr||Rr){Nt.logger.log("[transmuxer-interface, "+ar.type+"]: Starting new transmux session for sn: "+pr.sn+" p: "+pr.part+" level: "+pr.level+" id: "+pr.id+`
        discontinuity: `+Sr+`
        trackSwitch: `+Tr+`
        contiguous: `+Ir+`
        accurateTimeOffset: `+fr+`
        timeOffset: `+_r+`
        initSegmentChange: `+Rr);var wr=new kt.TransmuxConfig(Zt,rr,Kt,dr,xr);this.configureTransmuxer(wr)}if(this.frag=ar,this.part=sr,ir)ir.postMessage({cmd:"demux",data:cr,decryptdata:yr,chunkMeta:pr,state:Pr},cr instanceof ArrayBuffer?[cr]:[]);else if(mr){var Dr=mr.push(cr,yr,pr,Pr);(0,kt.isPromise)(Dr)?(mr.async=!0,Dr.then(function(kr){ur.handleTransmuxComplete(kr)}).catch(function(kr){ur.transmuxerError(kr,pr,"transmuxer-interface push error")})):(mr.async=!1,this.handleTransmuxComplete(Dr))}},Ft.flush=function(cr){var Kt=this;cr.transmuxing.start=self.performance.now();var Zt=this.transmuxer,rr=this.worker;if(rr)rr.postMessage({cmd:"flush",chunkMeta:cr});else if(Zt){var ar=Zt.flush(cr),sr=(0,kt.isPromise)(ar);sr||Zt.async?((0,kt.isPromise)(ar)||(ar=Promise.resolve(ar)),ar.then(function(dr){Kt.handleFlushResult(dr,cr)}).catch(function(dr){Kt.transmuxerError(dr,cr,"transmuxer-interface flush error")})):this.handleFlushResult(ar,cr)}},Ft.transmuxerError=function(cr,Kt,Zt){this.hls&&this.hls.trigger(Dt.Events.ERROR,{type:zt.ErrorTypes.MEDIA_ERROR,details:zt.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:Kt,fatal:!1,error:cr,err:cr,reason:Zt})},Ft.handleFlushResult=function(cr,Kt){var Zt=this;cr.forEach(function(rr){Zt.handleTransmuxComplete(rr)}),this.onFlush(Kt)},Ft.onWorkerMessage=function(cr){var Kt=cr.data,Zt=this.hls;switch(Kt.event){case"init":{self.URL.revokeObjectURL(this.worker.objectURL);break}case"transmuxComplete":{this.handleTransmuxComplete(Kt.data);break}case"flush":{this.onFlush(Kt.data);break}case"workerLog":Nt.logger[Kt.data.logType]&&Nt.logger[Kt.data.logType](Kt.data.message);break;default:{Kt.data=Kt.data||{},Kt.data.frag=this.frag,Kt.data.id=this.id,Zt.trigger(Kt.event,Kt.data);break}}},Ft.configureTransmuxer=function(cr){var Kt=this.worker,Zt=this.transmuxer;Kt?Kt.postMessage({cmd:"configure",config:cr}):Zt&&Zt.configure(cr)},Ft.handleTransmuxComplete=function(cr){cr.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(cr)},Bt}()},"./src/demux/transmuxer-worker.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Wt});var Rt=Ct("./src/demux/transmuxer.ts"),Dt=Ct("./src/events.ts"),kt=Ct("./src/utils/logger.ts"),Nt=Ct("./node_modules/eventemitter3/index.js"),zt=Ct("./src/errors.ts");function Wt(Ft){var tr=new Nt.EventEmitter,cr=function(rr,ar){Ft.postMessage({event:rr,data:ar})};tr.on(Dt.Events.FRAG_DECRYPTED,cr),tr.on(Dt.Events.ERROR,cr);var Kt=function(){var rr=function(dr){var fr=function(xr){cr("workerLog",{logType:dr,message:xr})};kt.logger[dr]=fr};for(var ar in kt.logger)rr(ar)};Ft.addEventListener("message",function(Zt){var rr=Zt.data;switch(rr.cmd){case"init":{var ar=JSON.parse(rr.config);Ft.transmuxer=new Rt.default(tr,rr.typeSupported,ar,rr.vendor,rr.id),(0,kt.enableLogs)(ar.debug,rr.id),Kt(),cr("init",null);break}case"configure":{Ft.transmuxer.configure(rr.config);break}case"demux":{var sr=Ft.transmuxer.push(rr.data,rr.decryptdata,rr.chunkMeta,rr.state);(0,Rt.isPromise)(sr)?(Ft.transmuxer.async=!0,sr.then(function(xr){nr(Ft,xr)}).catch(function(xr){cr(Dt.Events.ERROR,{type:zt.ErrorTypes.MEDIA_ERROR,details:zt.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:rr.chunkMeta,fatal:!1,error:xr,err:xr,reason:"transmuxer-worker push error"})})):(Ft.transmuxer.async=!1,nr(Ft,sr));break}case"flush":{var dr=rr.chunkMeta,fr=Ft.transmuxer.flush(dr),pr=(0,Rt.isPromise)(fr);pr||Ft.transmuxer.async?((0,Rt.isPromise)(fr)||(fr=Promise.resolve(fr)),fr.then(function(xr){Ht(Ft,xr,dr)}).catch(function(xr){cr(Dt.Events.ERROR,{type:zt.ErrorTypes.MEDIA_ERROR,details:zt.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:rr.chunkMeta,fatal:!1,error:xr,err:xr,reason:"transmuxer-worker flush error"})})):Ht(Ft,fr,dr);break}}})}function nr(Ft,tr){if(Bt(tr.remuxResult))return!1;var cr=[],Kt=tr.remuxResult,Zt=Kt.audio,rr=Kt.video;return Zt&&Ut(cr,Zt),rr&&Ut(cr,rr),Ft.postMessage({event:"transmuxComplete",data:tr},cr),!0}function Ut(Ft,tr){tr.data1&&Ft.push(tr.data1.buffer),tr.data2&&Ft.push(tr.data2.buffer)}function Ht(Ft,tr,cr){var Kt=tr.reduce(function(Zt,rr){return nr(Ft,rr)||Zt},!1);Kt||Ft.postMessage({event:"transmuxComplete",data:tr[0]}),Ft.postMessage({event:"flush",data:cr})}function Bt(Ft){return!Ft.audio&&!Ft.video&&!Ft.text&&!Ft.id3&&!Ft.initSegment}},"./src/demux/transmuxer.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{TransmuxConfig:()=>ar,TransmuxState:()=>sr,default:()=>cr,isPromise:()=>rr});var Rt=Ct("./src/events.ts"),Dt=Ct("./src/errors.ts"),kt=Ct("./src/crypt/decrypter.ts"),Nt=Ct("./src/demux/aacdemuxer.ts"),zt=Ct("./src/demux/mp4demuxer.ts"),Wt=Ct("./src/demux/tsdemuxer.ts"),nr=Ct("./src/demux/mp3demuxer.ts"),Ut=Ct("./src/remux/mp4-remuxer.ts"),Ht=Ct("./src/remux/passthrough-remuxer.ts"),Bt=Ct("./src/utils/logger.ts"),Ft;try{Ft=self.performance.now.bind(self.performance)}catch{Bt.logger.debug("Unable to use Performance API on this environment"),Ft=self.Date.now}var tr=[{demux:zt.default,remux:Ht.default},{demux:Wt.default,remux:Ut.default},{demux:Nt.default,remux:Ut.default},{demux:nr.default,remux:Ut.default}],cr=function(){function dr(pr,xr,lr,hr,ur){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=pr,this.typeSupported=xr,this.config=lr,this.vendor=hr,this.id=ur}var fr=dr.prototype;return fr.configure=function(xr){this.transmuxConfig=xr,this.decrypter&&this.decrypter.reset()},fr.push=function(xr,lr,hr,ur){var mr=this,ir=hr.transmuxing;ir.executeStart=Ft();var _r=new Uint8Array(xr),yr=this.currentTransmuxState,gr=this.transmuxConfig;ur&&(this.currentTransmuxState=ur);var Sr=ur||yr,Tr=Sr.contiguous,br=Sr.discontinuity,Ar=Sr.trackSwitch,Or=Sr.accurateTimeOffset,Ir=Sr.timeOffset,Cr=Sr.initSegmentChange,Rr=gr.audioCodec,Pr=gr.videoCodec,wr=gr.defaultInitPts,Dr=gr.duration,kr=gr.initSegmentData,Fr=Kt(_r,lr);if(Fr&&Fr.method==="AES-128"){var Br=this.getDecrypter();if(Br.isSync()){var Kr=Br.softwareDecrypt(_r,Fr.key.buffer,Fr.iv.buffer),Vr=hr.part>-1;if(Vr&&(Kr=Br.flush()),!Kr)return ir.executeEnd=Ft(),Zt(hr);_r=new Uint8Array(Kr)}else return this.decryptionPromise=Br.webCryptoDecrypt(_r,Fr.key.buffer,Fr.iv.buffer).then(function(Xr){var Zr=mr.push(Xr,null,hr);return mr.decryptionPromise=null,Zr}),this.decryptionPromise}var Gr=this.needsProbing(br,Ar);Gr&&this.configureTransmuxer(_r),(br||Ar||Cr||Gr)&&this.resetInitSegment(kr,Rr,Pr,Dr,lr),(br||Cr||Gr)&&this.resetInitialTimestamp(wr),Tr||this.resetContiguity();var jr=this.transmux(_r,Fr,Ir,Or,hr),zr=this.currentTransmuxState;return zr.contiguous=!0,zr.discontinuity=!1,zr.trackSwitch=!1,ir.executeEnd=Ft(),jr},fr.flush=function(xr){var lr=this,hr=xr.transmuxing;hr.executeStart=Ft();var ur=this.decrypter,mr=this.currentTransmuxState,ir=this.decryptionPromise;if(ir)return ir.then(function(){return lr.flush(xr)});var _r=[],yr=mr.timeOffset;if(ur){var gr=ur.flush();gr&&_r.push(this.push(gr,null,xr))}var Sr=this.demuxer,Tr=this.remuxer;if(!Sr||!Tr)return this.observer.emit(Rt.Events.ERROR,Rt.Events.ERROR,{type:Dt.ErrorTypes.MEDIA_ERROR,details:Dt.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),hr.executeEnd=Ft(),[Zt(xr)];var br=Sr.flush(yr);return rr(br)?br.then(function(Ar){return lr.flushRemux(_r,Ar,xr),_r}):(this.flushRemux(_r,br,xr),_r)},fr.flushRemux=function(xr,lr,hr){var ur=lr.audioTrack,mr=lr.videoTrack,ir=lr.id3Track,_r=lr.textTrack,yr=this.currentTransmuxState,gr=yr.accurateTimeOffset,Sr=yr.timeOffset;Bt.logger.log("[transmuxer.ts]: Flushed fragment "+hr.sn+(hr.part>-1?" p: "+hr.part:"")+" of level "+hr.level);var Tr=this.remuxer.remux(ur,mr,ir,_r,Sr,gr,!0,this.id);xr.push({remuxResult:Tr,chunkMeta:hr}),hr.transmuxing.executeEnd=Ft()},fr.resetInitialTimestamp=function(xr){var lr=this.demuxer,hr=this.remuxer;!lr||!hr||(lr.resetTimeStamp(xr),hr.resetTimeStamp(xr))},fr.resetContiguity=function(){var xr=this.demuxer,lr=this.remuxer;!xr||!lr||(xr.resetContiguity(),lr.resetNextTimestamp())},fr.resetInitSegment=function(xr,lr,hr,ur,mr){var ir=this.demuxer,_r=this.remuxer;!ir||!_r||(ir.resetInitSegment(xr,lr,hr,ur),_r.resetInitSegment(xr,lr,hr,mr))},fr.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},fr.transmux=function(xr,lr,hr,ur,mr){var ir;return lr&&lr.method==="SAMPLE-AES"?ir=this.transmuxSampleAes(xr,lr,hr,ur,mr):ir=this.transmuxUnencrypted(xr,hr,ur,mr),ir},fr.transmuxUnencrypted=function(xr,lr,hr,ur){var mr=this.demuxer.demux(xr,lr,!1,!this.config.progressive),ir=mr.audioTrack,_r=mr.videoTrack,yr=mr.id3Track,gr=mr.textTrack,Sr=this.remuxer.remux(ir,_r,yr,gr,lr,hr,!1,this.id);return{remuxResult:Sr,chunkMeta:ur}},fr.transmuxSampleAes=function(xr,lr,hr,ur,mr){var ir=this;return this.demuxer.demuxSampleAes(xr,lr,hr).then(function(_r){var yr=ir.remuxer.remux(_r.audioTrack,_r.videoTrack,_r.id3Track,_r.textTrack,hr,ur,!1,ir.id);return{remuxResult:yr,chunkMeta:mr}})},fr.configureTransmuxer=function(xr){for(var lr=this.config,hr=this.observer,ur=this.typeSupported,mr=this.vendor,ir,_r=0,yr=tr.length;_r<yr;_r++)if(tr[_r].demux.probe(xr)){ir=tr[_r];break}ir||(Bt.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),ir={demux:zt.default,remux:Ht.default});var gr=this.demuxer,Sr=this.remuxer,Tr=ir.remux,br=ir.demux;(!Sr||!(Sr instanceof Tr))&&(this.remuxer=new Tr(hr,lr,ur,mr)),(!gr||!(gr instanceof br))&&(this.demuxer=new br(hr,lr,ur),this.probe=br.probe)},fr.needsProbing=function(xr,lr){return!this.demuxer||!this.remuxer||xr||lr},fr.getDecrypter=function(){var xr=this.decrypter;return xr||(xr=this.decrypter=new kt.default(this.config)),xr},dr}();function Kt(dr,fr){var pr=null;return dr.byteLength>0&&fr!=null&&fr.key!=null&&fr.iv!==null&&fr.method!=null&&(pr=fr),pr}var Zt=function(fr){return{remuxResult:{},chunkMeta:fr}};function rr(dr){return"then"in dr&&dr.then instanceof Function}var ar=function(fr,pr,xr,lr,hr){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=fr,this.videoCodec=pr,this.initSegmentData=xr,this.duration=lr,this.defaultInitPts=hr},sr=function(fr,pr,xr,lr,hr,ur){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=fr,this.contiguous=pr,this.accurateTimeOffset=xr,this.trackSwitch=lr,this.timeOffset=hr,this.initSegmentChange=ur}},"./src/demux/tsdemuxer.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>dr});var Rt=Ct("./src/demux/adts.ts"),Dt=Ct("./src/demux/mpegaudio.ts"),kt=Ct("./src/demux/exp-golomb.ts"),Nt=Ct("./src/demux/sample-aes.ts"),zt=Ct("./src/events.ts"),Wt=Ct("./src/utils/mp4-tools.ts"),nr=Ct("./src/utils/logger.ts"),Ut=Ct("./src/errors.ts"),Ht=Ct("./src/types/demuxer.ts");function Bt(){return Bt=Object.assign?Object.assign.bind():function(fr){for(var pr=1;pr<arguments.length;pr++){var xr=arguments[pr];for(var lr in xr)Object.prototype.hasOwnProperty.call(xr,lr)&&(fr[lr]=xr[lr])}return fr},Bt.apply(this,arguments)}var Ft=188,tr=function(){function fr(xr,lr,hr){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=xr,this.config=lr,this.typeSupported=hr}fr.probe=function(lr){var hr=fr.syncOffset(lr);return hr>0&&nr.logger.warn("MPEG2-TS detected but first sync word found @ offset "+hr),hr!==-1},fr.syncOffset=function(lr){for(var hr=lr.length,ur=Math.min(Ft*5,lr.length-Ft)+1,mr=0;mr<ur;){for(var ir=!1,_r=mr;_r<hr&&lr[_r]===71;_r+=Ft)if(!ir&&Kt(lr,_r)===0&&(ir=!0),ir&&_r+Ft>ur)return mr;mr++}return-1},fr.createTrack=function(lr,hr){return{container:lr==="video"||lr==="audio"?"video/mp2t":void 0,type:lr,id:Wt.RemuxerTrackIdConfig[lr],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:lr==="audio"?hr:void 0}};var pr=fr.prototype;return pr.resetInitSegment=function(lr,hr,ur,mr){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=fr.createTrack("video"),this._audioTrack=fr.createTrack("audio",mr),this._id3Track=fr.createTrack("id3"),this._txtTrack=fr.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=hr,this.videoCodec=ur,this._duration=mr},pr.resetTimeStamp=function(){},pr.resetContiguity=function(){var lr=this._audioTrack,hr=this._avcTrack,ur=this._id3Track;lr&&(lr.pesData=null),hr&&(hr.pesData=null),ur&&(ur.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},pr.demux=function(lr,hr,ur,mr){ur===void 0&&(ur=!1),mr===void 0&&(mr=!1),ur||(this.sampleAes=null);var ir,_r=this._avcTrack,yr=this._audioTrack,gr=this._id3Track,Sr=this._txtTrack,Tr=_r.pid,br=_r.pesData,Ar=yr.pid,Or=gr.pid,Ir=yr.pesData,Cr=gr.pesData,Rr=null,Pr=this.pmtParsed,wr=this._pmtId,Dr=lr.length;if(this.remainderData&&(lr=(0,Wt.appendUint8Array)(this.remainderData,lr),Dr=lr.length,this.remainderData=null),Dr<Ft&&!mr)return this.remainderData=lr,{audioTrack:yr,videoTrack:_r,id3Track:gr,textTrack:Sr};var kr=Math.max(0,fr.syncOffset(lr));Dr-=(Dr-kr)%Ft,Dr<lr.byteLength&&!mr&&(this.remainderData=new Uint8Array(lr.buffer,Dr,lr.buffer.byteLength-Dr));for(var Fr=0,Br=kr;Br<Dr;Br+=Ft)if(lr[Br]===71){var Kr=!!(lr[Br+1]&64),Vr=Kt(lr,Br),Gr=(lr[Br+3]&48)>>4,jr=void 0;if(Gr>1){if(jr=Br+5+lr[Br+4],jr===Br+Ft)continue}else jr=Br+4;switch(Vr){case Tr:Kr&&(br&&(ir=ar(br))&&this.parseAVCPES(_r,Sr,ir,!1),br={data:[],size:0}),br&&(br.data.push(lr.subarray(jr,Br+Ft)),br.size+=Br+Ft-jr);break;case Ar:if(Kr){if(Ir&&(ir=ar(Ir)))switch(yr.segmentCodec){case"aac":this.parseAACPES(yr,ir);break;case"mp3":this.parseMPEGPES(yr,ir);break}Ir={data:[],size:0}}Ir&&(Ir.data.push(lr.subarray(jr,Br+Ft)),Ir.size+=Br+Ft-jr);break;case Or:Kr&&(Cr&&(ir=ar(Cr))&&this.parseID3PES(gr,ir),Cr={data:[],size:0}),Cr&&(Cr.data.push(lr.subarray(jr,Br+Ft)),Cr.size+=Br+Ft-jr);break;case 0:Kr&&(jr+=lr[jr]+1),wr=this._pmtId=Zt(lr,jr);break;case wr:{Kr&&(jr+=lr[jr]+1);var zr=rr(lr,jr,this.typeSupported,ur);Tr=zr.avc,Tr>0&&(_r.pid=Tr),Ar=zr.audio,Ar>0&&(yr.pid=Ar,yr.segmentCodec=zr.segmentCodec),Or=zr.id3,Or>0&&(gr.pid=Or),Rr!==null&&!Pr&&(nr.logger.warn("MPEG-TS PMT found at "+Br+" after unknown PID '"+Rr+"'. Backtracking to sync byte @"+kr+" to parse all TS packets."),Rr=null,Br=kr-188),Pr=this.pmtParsed=!0;break}case 17:case 8191:break;default:Rr=Vr;break}}else Fr++;Fr>0&&this.observer.emit(zt.Events.ERROR,zt.Events.ERROR,{type:Ut.ErrorTypes.MEDIA_ERROR,details:Ut.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+Fr+" TS packet/s that do not start with 0x47"}),_r.pesData=br,yr.pesData=Ir,gr.pesData=Cr;var Xr={audioTrack:yr,videoTrack:_r,id3Track:gr,textTrack:Sr};return mr&&this.extractRemainingSamples(Xr),Xr},pr.flush=function(){var lr=this.remainderData;this.remainderData=null;var hr;return lr?hr=this.demux(lr,-1,!1,!0):hr={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(hr),this.sampleAes?this.decrypt(hr,this.sampleAes):hr},pr.extractRemainingSamples=function(lr){var hr=lr.audioTrack,ur=lr.videoTrack,mr=lr.id3Track,ir=lr.textTrack,_r=ur.pesData,yr=hr.pesData,gr=mr.pesData,Sr;if(_r&&(Sr=ar(_r))?(this.parseAVCPES(ur,ir,Sr,!0),ur.pesData=null):ur.pesData=_r,yr&&(Sr=ar(yr))){switch(hr.segmentCodec){case"aac":this.parseAACPES(hr,Sr);break;case"mp3":this.parseMPEGPES(hr,Sr);break}hr.pesData=null}else yr!=null&&yr.size&&nr.logger.log("last AAC PES packet truncated,might overlap between fragments"),hr.pesData=yr;gr&&(Sr=ar(gr))?(this.parseID3PES(mr,Sr),mr.pesData=null):mr.pesData=gr},pr.demuxSampleAes=function(lr,hr,ur){var mr=this.demux(lr,ur,!0,!this.config.progressive),ir=this.sampleAes=new Nt.default(this.observer,this.config,hr);return this.decrypt(mr,ir)},pr.decrypt=function(lr,hr){return new Promise(function(ur){var mr=lr.audioTrack,ir=lr.videoTrack;mr.samples&&mr.segmentCodec==="aac"?hr.decryptAacSamples(mr.samples,0,function(){ir.samples?hr.decryptAvcSamples(ir.samples,0,0,function(){ur(lr)}):ur(lr)}):ir.samples&&hr.decryptAvcSamples(ir.samples,0,0,function(){ur(lr)})})},pr.destroy=function(){this._duration=0},pr.parseAVCPES=function(lr,hr,ur,mr){var ir=this,_r=this.parseAVCNALu(lr,ur.data),yr=this.avcSample,gr,Sr=!1;ur.data=null,yr&&_r.length&&!lr.audFound&&(sr(yr,lr),yr=this.avcSample=cr(!1,ur.pts,ur.dts,"")),_r.forEach(function(Tr){switch(Tr.type){case 1:{gr=!0,yr||(yr=ir.avcSample=cr(!0,ur.pts,ur.dts,"")),yr.frame=!0;var br=Tr.data;if(Sr&&br.length>4){var Ar=new kt.default(br).readSliceType();(Ar===2||Ar===4||Ar===7||Ar===9)&&(yr.key=!0)}break}case 5:gr=!0,yr||(yr=ir.avcSample=cr(!0,ur.pts,ur.dts,"")),yr.key=!0,yr.frame=!0;break;case 6:{gr=!0,(0,Wt.parseSEIMessageFromNALu)(Tr.data,1,ur.pts,hr.samples);break}case 7:if(gr=!0,Sr=!0,!lr.sps){var Or=new kt.default(Tr.data),Ir=Or.readSPS();lr.width=Ir.width,lr.height=Ir.height,lr.pixelRatio=Ir.pixelRatio,lr.sps=[Tr.data],lr.duration=ir._duration;for(var Cr=Tr.data.subarray(1,4),Rr="avc1.",Pr=0;Pr<3;Pr++){var wr=Cr[Pr].toString(16);wr.length<2&&(wr="0"+wr),Rr+=wr}lr.codec=Rr}break;case 8:gr=!0,lr.pps||(lr.pps=[Tr.data]);break;case 9:gr=!1,lr.audFound=!0,yr&&sr(yr,lr),yr=ir.avcSample=cr(!1,ur.pts,ur.dts,"");break;case 12:gr=!0;break;default:gr=!1,yr&&(yr.debug+="unknown NAL "+Tr.type+" ");break}if(yr&&gr){var Dr=yr.units;Dr.push(Tr)}}),mr&&yr&&(sr(yr,lr),this.avcSample=null)},pr.getLastNalUnit=function(lr){var hr,ur=this.avcSample,mr;if((!ur||ur.units.length===0)&&(ur=lr[lr.length-1]),(hr=ur)!==null&&hr!==void 0&&hr.units){var ir=ur.units;mr=ir[ir.length-1]}return mr},pr.parseAVCNALu=function(lr,hr){var ur=hr.byteLength,mr=lr.naluState||0,ir=mr,_r=[],yr=0,gr,Sr,Tr,br=-1,Ar=0;for(mr===-1&&(br=0,Ar=hr[0]&31,mr=0,yr=1);yr<ur;){if(gr=hr[yr++],!mr){mr=gr?0:1;continue}if(mr===1){mr=gr?0:2;continue}if(!gr)mr=3;else if(gr===1){if(br>=0){var Or={data:hr.subarray(br,yr-mr-1),type:Ar};_r.push(Or)}else{var Ir=this.getLastNalUnit(lr.samples);if(Ir&&(ir&&yr<=4-ir&&Ir.state&&(Ir.data=Ir.data.subarray(0,Ir.data.byteLength-ir)),Sr=yr-mr-1,Sr>0)){var Cr=new Uint8Array(Ir.data.byteLength+Sr);Cr.set(Ir.data,0),Cr.set(hr.subarray(0,Sr),Ir.data.byteLength),Ir.data=Cr,Ir.state=0}}yr<ur?(Tr=hr[yr]&31,br=yr,Ar=Tr,mr=0):mr=-1}else mr=0}if(br>=0&&mr>=0){var Rr={data:hr.subarray(br,ur),type:Ar,state:mr};_r.push(Rr)}if(_r.length===0){var Pr=this.getLastNalUnit(lr.samples);if(Pr){var wr=new Uint8Array(Pr.data.byteLength+hr.byteLength);wr.set(Pr.data,0),wr.set(hr,Pr.data.byteLength),Pr.data=wr}}return lr.naluState=mr,_r},pr.parseAACPES=function(lr,hr){var ur=0,mr=this.aacOverFlow,ir=hr.data;if(mr){this.aacOverFlow=null;var _r=mr.missing,yr=mr.sample.unit.byteLength;if(_r===-1){var gr=new Uint8Array(yr+ir.byteLength);gr.set(mr.sample.unit,0),gr.set(ir,yr),ir=gr}else{var Sr=yr-_r;mr.sample.unit.set(ir.subarray(0,_r),Sr),lr.samples.push(mr.sample),ur=mr.missing}}var Tr,br;for(Tr=ur,br=ir.length;Tr<br-1&&!Rt.isHeader(ir,Tr);Tr++);if(Tr!==ur){var Ar,Or;if(Tr<br-1?(Ar="AAC PES did not start with ADTS header,offset:"+Tr,Or=!1):(Ar="no ADTS header found in AAC PES",Or=!0),nr.logger.warn("parsing error:"+Ar),this.observer.emit(zt.Events.ERROR,zt.Events.ERROR,{type:Ut.ErrorTypes.MEDIA_ERROR,details:Ut.ErrorDetails.FRAG_PARSING_ERROR,fatal:Or,reason:Ar}),Or)return}Rt.initTrackConfig(lr,this.observer,ir,Tr,this.audioCodec);var Ir;if(hr.pts!==void 0)Ir=hr.pts;else if(mr){var Cr=Rt.getFrameDuration(lr.samplerate);Ir=mr.sample.pts+Cr}else{nr.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}for(var Rr=0,Pr;Tr<br;)if(Pr=Rt.appendFrame(lr,ir,Tr,Ir,Rr),Tr+=Pr.length,Pr.missing){this.aacOverFlow=Pr;break}else for(Rr++;Tr<br-1&&!Rt.isHeader(ir,Tr);Tr++);},pr.parseMPEGPES=function(lr,hr){var ur=hr.data,mr=ur.length,ir=0,_r=0,yr=hr.pts;if(yr===void 0){nr.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;_r<mr;)if(Dt.isHeader(ur,_r)){var gr=Dt.appendFrame(lr,ur,_r,yr,ir);if(gr)_r+=gr.length,ir++;else break}else _r++},pr.parseID3PES=function(lr,hr){if(hr.pts===void 0){nr.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}var ur=Bt({},hr,{type:this._avcTrack?Ht.MetadataSchema.emsg:Ht.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});lr.samples.push(ur)},fr}();function cr(fr,pr,xr,lr){return{key:fr,frame:!1,pts:pr,dts:xr,units:[],debug:lr,length:0}}function Kt(fr,pr){return((fr[pr+1]&31)<<8)+fr[pr+2]}function Zt(fr,pr){return(fr[pr+10]&31)<<8|fr[pr+11]}function rr(fr,pr,xr,lr){var hr={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},ur=(fr[pr+1]&15)<<8|fr[pr+2],mr=pr+3+ur-4,ir=(fr[pr+10]&15)<<8|fr[pr+11];for(pr+=12+ir;pr<mr;){var _r=Kt(fr,pr);switch(fr[pr]){case 207:if(!lr){nr.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:hr.audio===-1&&(hr.audio=_r);break;case 21:hr.id3===-1&&(hr.id3=_r);break;case 219:if(!lr){nr.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:hr.avc===-1&&(hr.avc=_r);break;case 3:case 4:xr.mpeg!==!0&&xr.mp3!==!0?nr.logger.log("MPEG audio found, not supported in this browser"):hr.audio===-1&&(hr.audio=_r,hr.segmentCodec="mp3");break;case 36:nr.logger.warn("Unsupported HEVC stream type found");break}pr+=((fr[pr+3]&15)<<8|fr[pr+4])+5}return hr}function ar(fr){var pr=0,xr,lr,hr,ur,mr,ir=fr.data;if(!fr||fr.size===0)return null;for(;ir[0].length<19&&ir.length>1;){var _r=new Uint8Array(ir[0].length+ir[1].length);_r.set(ir[0]),_r.set(ir[1],ir[0].length),ir[0]=_r,ir.splice(1,1)}xr=ir[0];var yr=(xr[0]<<16)+(xr[1]<<8)+xr[2];if(yr===1){if(lr=(xr[4]<<8)+xr[5],lr&&lr>fr.size-6)return null;var gr=xr[7];gr&192&&(ur=(xr[9]&14)*536870912+(xr[10]&255)*4194304+(xr[11]&254)*16384+(xr[12]&255)*128+(xr[13]&254)/2,gr&64?(mr=(xr[14]&14)*536870912+(xr[15]&255)*4194304+(xr[16]&254)*16384+(xr[17]&255)*128+(xr[18]&254)/2,ur-mr>54e5&&(nr.logger.warn(Math.round((ur-mr)/9e4)+"s delta between PTS and DTS, align them"),ur=mr)):mr=ur),hr=xr[8];var Sr=hr+9;if(fr.size<=Sr)return null;fr.size-=Sr;for(var Tr=new Uint8Array(fr.size),br=0,Ar=ir.length;br<Ar;br++){xr=ir[br];var Or=xr.byteLength;if(Sr)if(Sr>Or){Sr-=Or;continue}else xr=xr.subarray(Sr),Or-=Sr,Sr=0;Tr.set(xr,pr),pr+=Or}return lr&&(lr-=hr+3),{data:Tr,pts:ur,dts:mr,len:lr}}return null}function sr(fr,pr){if(fr.units.length&&fr.frame){if(fr.pts===void 0){var xr=pr.samples,lr=xr.length;if(lr){var hr=xr[lr-1];fr.pts=hr.pts,fr.dts=hr.dts}else{pr.dropped++;return}}pr.samples.push(fr)}fr.debug.length&&nr.logger.log(fr.pts+"/"+fr.dts+":"+fr.debug)}const dr=tr},"./src/demux/webworkify-webpack.js":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Ft});var Rt=function(){var cr=ENTRY_MODULE,Kt={},Zt=function ar(sr){var dr=Kt[sr];if(dr!==void 0)return dr.exports;var fr=Kt[sr]={exports:{}};return cr[sr].call(fr.exports,fr,fr.exports,ar),fr.exports};Zt.m=cr,function(){Zt.n=function(ar){var sr=ar&&ar.__esModule?function(){return ar.default}:function(){return ar};return Zt.d(sr,{a:sr}),sr}}(),function(){Zt.d=function(ar,sr){for(var dr in sr)Zt.o(sr,dr)&&!Zt.o(ar,dr)&&Object.defineProperty(ar,dr,{enumerable:!0,get:sr[dr]})}}(),function(){Zt.o=function(ar,sr){return Object.prototype.hasOwnProperty.call(ar,sr)}}(),function(){Zt.r=function(ar){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ar,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ar,"__esModule",{value:!0})}}();var rr=Zt(ENTRY_MODULE);return rr.default||rr},Dt=Rt.toString().split("ENTRY_MODULE"),kt="[\\.|\\-|\\+|\\w|/|@]+",Nt="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+kt+").*?\\)";function zt(tr){return(tr+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function Wt(tr){return!isNaN(1*tr)}function nr(tr,cr,Kt){var Zt={};Zt[Kt]=[];var rr=cr.toString().replace(/^"[^"]+"/,"function"),ar=rr.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||rr.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!ar)return Zt;for(var sr=ar[1],dr=new RegExp("(\\\\n|\\W)"+zt(sr)+Nt,"g"),fr;fr=dr.exec(rr);)fr[3]!=="dll-reference"&&Zt[Kt].push(fr[3]);for(dr=new RegExp("\\("+zt(sr)+'\\("(dll-reference\\s('+kt+'))"\\)\\)'+Nt,"g");fr=dr.exec(rr);)tr[fr[2]]||(Zt[Kt].push(fr[1]),tr[fr[2]]=Ct(fr[1]).m),Zt[fr[2]]=Zt[fr[2]]||[],Zt[fr[2]].push(fr[4]);for(var pr=Object.keys(Zt),xr=0;xr<pr.length;xr++)for(var lr=0;lr<Zt[pr[xr]].length;lr++)Wt(Zt[pr[xr]][lr])&&(Zt[pr[xr]][lr]=1*Zt[pr[xr]][lr]);return Zt}function Ut(tr){var cr=Object.keys(tr);return cr.reduce(function(Kt,Zt){return Kt||tr[Zt].length>0},!1)}function Ht(tr,cr){for(var Kt={main:[cr]},Zt={main:[]},rr={main:{}};Ut(Kt);)for(var ar=Object.keys(Kt),sr=0;sr<ar.length;sr++){var dr=ar[sr],fr=Kt[dr],pr=fr.pop();if(rr[dr]=rr[dr]||{},!(rr[dr][pr]||!tr[dr][pr])){rr[dr][pr]=!0,Zt[dr]=Zt[dr]||[],Zt[dr].push(pr);for(var xr=nr(tr,tr[dr][pr],dr),lr=Object.keys(xr),hr=0;hr<lr.length;hr++)Kt[lr[hr]]=Kt[lr[hr]]||[],Kt[lr[hr]]=Kt[lr[hr]].concat(xr[lr[hr]])}}return Zt}function Bt(tr,cr,Kt,Zt){var rr=tr[Zt].map(function(ar){return'"'+ar+'": '+cr[Zt][ar].toString().replace(/^"[^"]+"/,"function")}).join(",");return Dt[0]+"{"+rr+"}"+Dt[1]+'"'+Kt+'"'+Dt[2]}function Ft(tr,cr){cr=cr||{};var Kt={main:Ct.m},Zt=cr.all?{main:Object.keys(Kt.main)}:Ht(Kt,tr),rr="";Object.keys(Zt).filter(function(pr){return pr!=="main"}).forEach(function(pr){for(var xr=0;Zt[pr][xr];)xr++;Zt[pr].push(xr),Kt[pr][xr]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",rr=rr+("var "+pr+" = ("+Bt(Zt,Kt,xr,modules)+`)();
`)}),rr=rr+("new (("+Bt(Zt,Kt,tr,"main")+")())(self);");var ar=new window.Blob([rr],{type:"text/javascript"}),sr=window.URL||window.webkitURL||window.mozURL||window.msURL,dr=sr.createObjectURL(ar),fr=new window.Worker(dr);return fr.objectURL=dr,fr}},"./src/errors.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{ErrorDetails:()=>Dt,ErrorTypes:()=>Rt});var Rt;(function(kt){kt.NETWORK_ERROR="networkError",kt.MEDIA_ERROR="mediaError",kt.KEY_SYSTEM_ERROR="keySystemError",kt.MUX_ERROR="muxError",kt.OTHER_ERROR="otherError"})(Rt||(Rt={}));var Dt;(function(kt){kt.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",kt.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",kt.KEY_SYSTEM_NO_SESSION="keySystemNoSession",kt.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",kt.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",kt.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",kt.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",kt.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",kt.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",kt.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",kt.MANIFEST_LOAD_ERROR="manifestLoadError",kt.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",kt.MANIFEST_PARSING_ERROR="manifestParsingError",kt.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",kt.LEVEL_EMPTY_ERROR="levelEmptyError",kt.LEVEL_LOAD_ERROR="levelLoadError",kt.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",kt.LEVEL_SWITCH_ERROR="levelSwitchError",kt.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",kt.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",kt.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",kt.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",kt.FRAG_LOAD_ERROR="fragLoadError",kt.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",kt.FRAG_DECRYPT_ERROR="fragDecryptError",kt.FRAG_PARSING_ERROR="fragParsingError",kt.REMUX_ALLOC_ERROR="remuxAllocError",kt.KEY_LOAD_ERROR="keyLoadError",kt.KEY_LOAD_TIMEOUT="keyLoadTimeOut",kt.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",kt.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",kt.BUFFER_APPEND_ERROR="bufferAppendError",kt.BUFFER_APPENDING_ERROR="bufferAppendingError",kt.BUFFER_STALLED_ERROR="bufferStalledError",kt.BUFFER_FULL_ERROR="bufferFullError",kt.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",kt.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",kt.INTERNAL_EXCEPTION="internalException",kt.INTERNAL_ABORTED="aborted",kt.UNKNOWN="unknown"})(Dt||(Dt={}))},"./src/events.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{Events:()=>Rt});var Rt;(function(Dt){Dt.MEDIA_ATTACHING="hlsMediaAttaching",Dt.MEDIA_ATTACHED="hlsMediaAttached",Dt.MEDIA_DETACHING="hlsMediaDetaching",Dt.MEDIA_DETACHED="hlsMediaDetached",Dt.BUFFER_RESET="hlsBufferReset",Dt.BUFFER_CODECS="hlsBufferCodecs",Dt.BUFFER_CREATED="hlsBufferCreated",Dt.BUFFER_APPENDING="hlsBufferAppending",Dt.BUFFER_APPENDED="hlsBufferAppended",Dt.BUFFER_EOS="hlsBufferEos",Dt.BUFFER_FLUSHING="hlsBufferFlushing",Dt.BUFFER_FLUSHED="hlsBufferFlushed",Dt.MANIFEST_LOADING="hlsManifestLoading",Dt.MANIFEST_LOADED="hlsManifestLoaded",Dt.MANIFEST_PARSED="hlsManifestParsed",Dt.LEVEL_SWITCHING="hlsLevelSwitching",Dt.LEVEL_SWITCHED="hlsLevelSwitched",Dt.LEVEL_LOADING="hlsLevelLoading",Dt.LEVEL_LOADED="hlsLevelLoaded",Dt.LEVEL_UPDATED="hlsLevelUpdated",Dt.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",Dt.LEVELS_UPDATED="hlsLevelsUpdated",Dt.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",Dt.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",Dt.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",Dt.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",Dt.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",Dt.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",Dt.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",Dt.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",Dt.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",Dt.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",Dt.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",Dt.CUES_PARSED="hlsCuesParsed",Dt.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",Dt.INIT_PTS_FOUND="hlsInitPtsFound",Dt.FRAG_LOADING="hlsFragLoading",Dt.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",Dt.FRAG_LOADED="hlsFragLoaded",Dt.FRAG_DECRYPTED="hlsFragDecrypted",Dt.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",Dt.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",Dt.FRAG_PARSING_METADATA="hlsFragParsingMetadata",Dt.FRAG_PARSED="hlsFragParsed",Dt.FRAG_BUFFERED="hlsFragBuffered",Dt.FRAG_CHANGED="hlsFragChanged",Dt.FPS_DROP="hlsFpsDrop",Dt.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",Dt.ERROR="hlsError",Dt.DESTROYING="hlsDestroying",Dt.KEY_LOADING="hlsKeyLoading",Dt.KEY_LOADED="hlsKeyLoaded",Dt.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",Dt.BACK_BUFFER_REACHED="hlsBackBufferReached"})(Rt||(Rt={}))},"./src/hls.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>fr});var Rt=Ct("./node_modules/url-toolkit/src/url-toolkit.js"),Dt=Ct("./src/loader/playlist-loader.ts"),kt=Ct("./src/controller/id3-track-controller.ts"),Nt=Ct("./src/controller/latency-controller.ts"),zt=Ct("./src/controller/level-controller.ts"),Wt=Ct("./src/controller/fragment-tracker.ts"),nr=Ct("./src/loader/key-loader.ts"),Ut=Ct("./src/controller/stream-controller.ts"),Ht=Ct("./src/is-supported.ts"),Bt=Ct("./src/utils/logger.ts"),Ft=Ct("./src/config.ts"),tr=Ct("./node_modules/eventemitter3/index.js"),cr=Ct("./src/events.ts"),Kt=Ct("./src/errors.ts"),Zt=Ct("./src/types/level.ts");function rr(pr,xr){for(var lr=0;lr<xr.length;lr++){var hr=xr[lr];hr.enumerable=hr.enumerable||!1,hr.configurable=!0,"value"in hr&&(hr.writable=!0),Object.defineProperty(pr,sr(hr.key),hr)}}function ar(pr,xr,lr){return xr&&rr(pr.prototype,xr),lr&&rr(pr,lr),Object.defineProperty(pr,"prototype",{writable:!1}),pr}function sr(pr){var xr=dr(pr,"string");return typeof xr=="symbol"?xr:String(xr)}function dr(pr,xr){if(typeof pr!="object"||pr===null)return pr;var lr=pr[Symbol.toPrimitive];if(lr!==void 0){var hr=lr.call(pr,xr||"default");if(typeof hr!="object")return hr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(xr==="string"?String:Number)(pr)}var fr=function(){pr.isSupported=function(){return(0,Ht.isSupported)()};function pr(lr){lr===void 0&&(lr={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new tr.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var hr=this.config=(0,Ft.mergeConfig)(pr.DefaultConfig,lr);this.userConfig=lr,(0,Bt.enableLogs)(hr.debug,"Hls instance"),this._autoLevelCapping=-1,hr.progressive&&(0,Ft.enableStreamingMode)(hr);var ur=hr.abrController,mr=hr.bufferController,ir=hr.capLevelController,_r=hr.fpsController,yr=this.abrController=new ur(this),gr=this.bufferController=new mr(this),Sr=this.capLevelController=new ir(this),Tr=new _r(this),br=new Dt.default(this),Ar=new kt.default(this),Or=this.levelController=new zt.default(this),Ir=new Wt.FragmentTracker(this),Cr=new nr.default(this.config),Rr=this.streamController=new Ut.default(this,Ir,Cr);Sr.setStreamController(Rr),Tr.setStreamController(Rr);var Pr=[br,Or,Rr];this.networkControllers=Pr;var wr=[yr,gr,Sr,Tr,Ar,Ir];this.audioTrackController=this.createController(hr.audioTrackController,Pr);var Dr=hr.audioStreamController;Dr&&Pr.push(new Dr(this,Ir,Cr)),this.subtitleTrackController=this.createController(hr.subtitleTrackController,Pr);var kr=hr.subtitleStreamController;kr&&Pr.push(new kr(this,Ir,Cr)),this.createController(hr.timelineController,wr),Cr.emeController=this.emeController=this.createController(hr.emeController,wr),this.cmcdController=this.createController(hr.cmcdController,wr),this.latencyController=this.createController(Nt.default,wr),this.coreComponents=wr}var xr=pr.prototype;return xr.createController=function(hr,ur){if(hr){var mr=new hr(this);return ur&&ur.push(mr),mr}return null},xr.on=function(hr,ur,mr){mr===void 0&&(mr=this),this._emitter.on(hr,ur,mr)},xr.once=function(hr,ur,mr){mr===void 0&&(mr=this),this._emitter.once(hr,ur,mr)},xr.removeAllListeners=function(hr){this._emitter.removeAllListeners(hr)},xr.off=function(hr,ur,mr,ir){mr===void 0&&(mr=this),this._emitter.off(hr,ur,mr,ir)},xr.listeners=function(hr){return this._emitter.listeners(hr)},xr.emit=function(hr,ur,mr){return this._emitter.emit(hr,ur,mr)},xr.trigger=function(hr,ur){if(this.config.debug)return this.emit(hr,hr,ur);try{return this.emit(hr,hr,ur)}catch(mr){Bt.logger.error("An internal error happened while handling event "+hr+'. Error message: "'+mr.message+'". Here is a stacktrace:',mr),this.trigger(cr.Events.ERROR,{type:Kt.ErrorTypes.OTHER_ERROR,details:Kt.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:hr,error:mr})}return!1},xr.listenerCount=function(hr){return this._emitter.listenerCount(hr)},xr.destroy=function(){Bt.logger.log("destroy"),this.trigger(cr.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(hr){return hr.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(hr){return hr.destroy()}),this.coreComponents.length=0},xr.attachMedia=function(hr){Bt.logger.log("attachMedia"),this._media=hr,this.trigger(cr.Events.MEDIA_ATTACHING,{media:hr})},xr.detachMedia=function(){Bt.logger.log("detachMedia"),this.trigger(cr.Events.MEDIA_DETACHING,void 0),this._media=null},xr.loadSource=function(hr){this.stopLoad();var ur=this.media,mr=this.url,ir=this.url=Rt.buildAbsoluteURL(self.location.href,hr,{alwaysNormalize:!0});Bt.logger.log("loadSource:"+ir),ur&&mr&&mr!==ir&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(ur)),this.trigger(cr.Events.MANIFEST_LOADING,{url:hr})},xr.startLoad=function(hr){hr===void 0&&(hr=-1),Bt.logger.log("startLoad("+hr+")"),this.networkControllers.forEach(function(ur){ur.startLoad(hr)})},xr.stopLoad=function(){Bt.logger.log("stopLoad"),this.networkControllers.forEach(function(hr){hr.stopLoad()})},xr.swapAudioCodec=function(){Bt.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},xr.recoverMediaError=function(){Bt.logger.log("recoverMediaError");var hr=this._media;this.detachMedia(),hr&&this.attachMedia(hr)},xr.removeLevel=function(hr,ur){ur===void 0&&(ur=0),this.levelController.removeLevel(hr,ur)},ar(pr,[{key:"levels",get:function(){var hr=this.levelController.levels;return hr||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(hr){Bt.logger.log("set currentLevel:"+hr),this.loadLevel=hr,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(hr){Bt.logger.log("set nextLevel:"+hr),this.levelController.manualLevel=hr,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(hr){Bt.logger.log("set loadLevel:"+hr),this.levelController.manualLevel=hr}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(hr){this.levelController.nextLoadLevel=hr}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(hr){Bt.logger.log("set firstLevel:"+hr),this.levelController.firstLevel=hr}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(hr){Bt.logger.log("set startLevel:"+hr),hr!==-1&&(hr=Math.max(hr,this.minAutoLevel)),this.levelController.startLevel=hr}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(hr){var ur=!!hr;ur!==this.config.capLevelToPlayerSize&&(ur?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=ur)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(hr){this._autoLevelCapping!==hr&&(Bt.logger.log("set autoLevelCapping:"+hr),this._autoLevelCapping=hr)}},{key:"bandwidthEstimate",get:function(){var hr=this.abrController.bwEstimator;return hr?hr.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(hr){Zt.HdcpLevels.indexOf(hr)>-1&&(this._maxHdcpLevel=hr)}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var hr=this.levels,ur=this.config.minAutoBitrate;if(!hr)return 0;for(var mr=hr.length,ir=0;ir<mr;ir++)if(hr[ir].maxBitrate>=ur)return ir;return 0}},{key:"maxAutoLevel",get:function(){var hr=this.levels,ur=this.autoLevelCapping,mr=this.maxHdcpLevel,ir;if(ur===-1&&hr&&hr.length?ir=hr.length-1:ir=ur,mr)for(var _r=ir;_r--;){var yr=hr[_r].attrs["HDCP-LEVEL"];if(yr&&yr<=mr)return _r}return ir}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(hr){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,hr)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var hr=this.audioTrackController;return hr?hr.audioTracks:[]}},{key:"audioTrack",get:function(){var hr=this.audioTrackController;return hr?hr.audioTrack:-1},set:function(hr){var ur=this.audioTrackController;ur&&(ur.audioTrack=hr)}},{key:"subtitleTracks",get:function(){var hr=this.subtitleTrackController;return hr?hr.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var hr=this.subtitleTrackController;return hr?hr.subtitleTrack:-1},set:function(hr){var ur=this.subtitleTrackController;ur&&(ur.subtitleTrack=hr)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var hr=this.subtitleTrackController;return hr?hr.subtitleDisplay:!1},set:function(hr){var ur=this.subtitleTrackController;ur&&(ur.subtitleDisplay=hr)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(hr){this.config.lowLatencyMode=hr}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.3.5"}},{key:"Events",get:function(){return cr.Events}},{key:"ErrorTypes",get:function(){return Kt.ErrorTypes}},{key:"ErrorDetails",get:function(){return Kt.ErrorDetails}},{key:"DefaultConfig",get:function(){return pr.defaultConfig?pr.defaultConfig:Ft.hlsDefaultConfig},set:function(hr){pr.defaultConfig=hr}}]),pr}();fr.defaultConfig=void 0},"./src/is-supported.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{changeTypeSupported:()=>Nt,isSupported:()=>kt});var Rt=Ct("./src/utils/mediasource-helper.ts");function Dt(){return self.SourceBuffer||self.WebKitSourceBuffer}function kt(){var zt=(0,Rt.getMediaSource)();if(!zt)return!1;var Wt=Dt(),nr=zt&&typeof zt.isTypeSupported=="function"&&zt.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),Ut=!Wt||Wt.prototype&&typeof Wt.prototype.appendBuffer=="function"&&typeof Wt.prototype.remove=="function";return!!nr&&!!Ut}function Nt(){var zt,Wt=Dt();return typeof(Wt==null||(zt=Wt.prototype)===null||zt===void 0?void 0:zt.changeType)=="function"}},"./src/loader/date-range.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{DateRange:()=>Bt,DateRangeAttribute:()=>Ht});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/utils/attr-list.ts"),kt=Ct("./src/utils/logger.ts");function Nt(){return Nt=Object.assign?Object.assign.bind():function(Ft){for(var tr=1;tr<arguments.length;tr++){var cr=arguments[tr];for(var Kt in cr)Object.prototype.hasOwnProperty.call(cr,Kt)&&(Ft[Kt]=cr[Kt])}return Ft},Nt.apply(this,arguments)}function zt(Ft,tr){for(var cr=0;cr<tr.length;cr++){var Kt=tr[cr];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(Ft,nr(Kt.key),Kt)}}function Wt(Ft,tr,cr){return tr&&zt(Ft.prototype,tr),cr&&zt(Ft,cr),Object.defineProperty(Ft,"prototype",{writable:!1}),Ft}function nr(Ft){var tr=Ut(Ft,"string");return typeof tr=="symbol"?tr:String(tr)}function Ut(Ft,tr){if(typeof Ft!="object"||Ft===null)return Ft;var cr=Ft[Symbol.toPrimitive];if(cr!==void 0){var Kt=cr.call(Ft,tr||"default");if(typeof Kt!="object")return Kt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(tr==="string"?String:Number)(Ft)}var Ht;(function(Ft){Ft.ID="ID",Ft.CLASS="CLASS",Ft.START_DATE="START-DATE",Ft.DURATION="DURATION",Ft.END_DATE="END-DATE",Ft.END_ON_NEXT="END-ON-NEXT",Ft.PLANNED_DURATION="PLANNED-DURATION",Ft.SCTE35_OUT="SCTE35-OUT",Ft.SCTE35_IN="SCTE35-IN"})(Ht||(Ht={}));var Bt=function(){function Ft(tr,cr){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,cr){var Kt=cr.attr;for(var Zt in Kt)if(Object.prototype.hasOwnProperty.call(tr,Zt)&&tr[Zt]!==Kt[Zt]){kt.logger.warn('DATERANGE tag attribute: "'+Zt+'" does not match for tags with ID: "'+tr.ID+'"'),this._badValueForSameId=Zt;break}tr=Nt(new Dt.AttrList({}),Kt,tr)}if(this.attr=tr,this._startDate=new Date(tr[Ht.START_DATE]),Ht.END_DATE in this.attr){var rr=new Date(this.attr[Ht.END_DATE]);(0,Rt.isFiniteNumber)(rr.getTime())&&(this._endDate=rr)}}return Wt(Ft,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var cr=this.duration;return cr!==null?new Date(this._startDate.getTime()+cr*1e3):null}},{key:"duration",get:function(){if(Ht.DURATION in this.attr){var cr=this.attr.decimalFloatingPoint(Ht.DURATION);if((0,Rt.isFiniteNumber)(cr))return cr}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return Ht.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(Ht.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(Ht.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,Rt.isFiniteNumber)(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),Ft}()},"./src/loader/fragment-loader.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{LoadError:()=>cr,default:()=>Ft});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/errors.ts");function kt(Kt,Zt){Kt.prototype=Object.create(Zt.prototype),Kt.prototype.constructor=Kt,Ut(Kt,Zt)}function Nt(Kt){var Zt=typeof Map=="function"?new Map:void 0;return Nt=function(ar){if(ar===null||!nr(ar))return ar;if(typeof ar!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Zt<"u"){if(Zt.has(ar))return Zt.get(ar);Zt.set(ar,sr)}function sr(){return zt(ar,arguments,Ht(this).constructor)}return sr.prototype=Object.create(ar.prototype,{constructor:{value:sr,enumerable:!1,writable:!0,configurable:!0}}),Ut(sr,ar)},Nt(Kt)}function zt(Kt,Zt,rr){return Wt()?zt=Reflect.construct.bind():zt=function(sr,dr,fr){var pr=[null];pr.push.apply(pr,dr);var xr=Function.bind.apply(sr,pr),lr=new xr;return fr&&Ut(lr,fr.prototype),lr},zt.apply(null,arguments)}function Wt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nr(Kt){return Function.toString.call(Kt).indexOf("[native code]")!==-1}function Ut(Kt,Zt){return Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ar,sr){return ar.__proto__=sr,ar},Ut(Kt,Zt)}function Ht(Kt){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},Ht(Kt)}var Bt=Math.pow(2,17),Ft=function(){function Kt(rr){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=rr}var Zt=Kt.prototype;return Zt.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},Zt.abort=function(){this.loader&&this.loader.abort()},Zt.load=function(ar,sr){var dr=this,fr=ar.url;if(!fr)return Promise.reject(new cr({type:Dt.ErrorTypes.NETWORK_ERROR,details:Dt.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:ar,networkDetails:null},"Fragment does not have a "+(fr?"part list":"url")));this.abort();var pr=this.config,xr=pr.fLoader,lr=pr.loader;return new Promise(function(hr,ur){dr.loader&&dr.loader.destroy();var mr=dr.loader=ar.loader=xr?new xr(pr):new lr(pr),ir=tr(ar),_r={timeout:pr.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:pr.fragLoadingMaxRetryTimeout,highWaterMark:ar.sn==="initSegment"?1/0:Bt};ar.stats=mr.stats,mr.load(ir,_r,{onSuccess:function(gr,Sr,Tr,br){dr.resetLoader(ar,mr);var Ar=gr.data;Tr.resetIV&&ar.decryptdata&&(ar.decryptdata.iv=new Uint8Array(Ar.slice(0,16)),Ar=Ar.slice(16)),hr({frag:ar,part:null,payload:Ar,networkDetails:br})},onError:function(gr,Sr,Tr){dr.resetLoader(ar,mr),ur(new cr({type:Dt.ErrorTypes.NETWORK_ERROR,details:Dt.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:ar,response:gr,networkDetails:Tr}))},onAbort:function(gr,Sr,Tr){dr.resetLoader(ar,mr),ur(new cr({type:Dt.ErrorTypes.NETWORK_ERROR,details:Dt.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:ar,networkDetails:Tr}))},onTimeout:function(gr,Sr,Tr){dr.resetLoader(ar,mr),ur(new cr({type:Dt.ErrorTypes.NETWORK_ERROR,details:Dt.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:ar,networkDetails:Tr}))},onProgress:function(gr,Sr,Tr,br){sr&&sr({frag:ar,part:null,payload:Tr,networkDetails:br})}})})},Zt.loadPart=function(ar,sr,dr){var fr=this;this.abort();var pr=this.config,xr=pr.fLoader,lr=pr.loader;return new Promise(function(hr,ur){fr.loader&&fr.loader.destroy();var mr=fr.loader=ar.loader=xr?new xr(pr):new lr(pr),ir=tr(ar,sr),_r={timeout:pr.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:pr.fragLoadingMaxRetryTimeout,highWaterMark:Bt};sr.stats=mr.stats,mr.load(ir,_r,{onSuccess:function(gr,Sr,Tr,br){fr.resetLoader(ar,mr),fr.updateStatsFromPart(ar,sr);var Ar={frag:ar,part:sr,payload:gr.data,networkDetails:br};dr(Ar),hr(Ar)},onError:function(gr,Sr,Tr){fr.resetLoader(ar,mr),ur(new cr({type:Dt.ErrorTypes.NETWORK_ERROR,details:Dt.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:ar,part:sr,response:gr,networkDetails:Tr}))},onAbort:function(gr,Sr,Tr){ar.stats.aborted=sr.stats.aborted,fr.resetLoader(ar,mr),ur(new cr({type:Dt.ErrorTypes.NETWORK_ERROR,details:Dt.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:ar,part:sr,networkDetails:Tr}))},onTimeout:function(gr,Sr,Tr){fr.resetLoader(ar,mr),ur(new cr({type:Dt.ErrorTypes.NETWORK_ERROR,details:Dt.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:ar,part:sr,networkDetails:Tr}))}})})},Zt.updateStatsFromPart=function(ar,sr){var dr=ar.stats,fr=sr.stats,pr=fr.total;if(dr.loaded+=fr.loaded,pr){var xr=Math.round(ar.duration/sr.duration),lr=Math.min(Math.round(dr.loaded/pr),xr),hr=xr-lr,ur=hr*Math.round(dr.loaded/lr);dr.total=dr.loaded+ur}else dr.total=Math.max(dr.loaded,dr.total);var mr=dr.loading,ir=fr.loading;mr.start?mr.first+=ir.first-ir.start:(mr.start=ir.start,mr.first=ir.first),mr.end=ir.end},Zt.resetLoader=function(ar,sr){ar.loader=null,this.loader===sr&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),sr.destroy()},Kt}();function tr(Kt,Zt){Zt===void 0&&(Zt=null);var rr=Zt||Kt,ar={frag:Kt,part:Zt,responseType:"arraybuffer",url:rr.url,headers:{},rangeStart:0,rangeEnd:0},sr=rr.byteRangeStartOffset,dr=rr.byteRangeEndOffset;if((0,Rt.isFiniteNumber)(sr)&&(0,Rt.isFiniteNumber)(dr)){var fr,pr=sr,xr=dr;if(Kt.sn==="initSegment"&&((fr=Kt.decryptdata)===null||fr===void 0?void 0:fr.method)==="AES-128"){var lr=dr-sr;lr%16&&(xr=dr+(16-lr%16)),sr!==0&&(ar.resetIV=!0,pr=sr-16)}ar.rangeStart=pr,ar.rangeEnd=xr}return ar}var cr=function(Kt){kt(Zt,Kt);function Zt(rr){for(var ar,sr=arguments.length,dr=new Array(sr>1?sr-1:0),fr=1;fr<sr;fr++)dr[fr-1]=arguments[fr];return ar=Kt.call.apply(Kt,[this].concat(dr))||this,ar.data=void 0,ar.data=rr,ar}return Zt}(Nt(Error))},"./src/loader/fragment.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{BaseSegment:()=>Ft,ElementaryStreamTypes:()=>Bt,Fragment:()=>tr,Part:()=>cr});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./node_modules/url-toolkit/src/url-toolkit.js"),kt=Ct("./src/loader/load-stats.ts");function Nt(Kt,Zt){Kt.prototype=Object.create(Zt.prototype),Kt.prototype.constructor=Kt,zt(Kt,Zt)}function zt(Kt,Zt){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ar,sr){return ar.__proto__=sr,ar},zt(Kt,Zt)}function Wt(Kt,Zt){for(var rr=0;rr<Zt.length;rr++){var ar=Zt[rr];ar.enumerable=ar.enumerable||!1,ar.configurable=!0,"value"in ar&&(ar.writable=!0),Object.defineProperty(Kt,Ut(ar.key),ar)}}function nr(Kt,Zt,rr){return Zt&&Wt(Kt.prototype,Zt),rr&&Wt(Kt,rr),Object.defineProperty(Kt,"prototype",{writable:!1}),Kt}function Ut(Kt){var Zt=Ht(Kt,"string");return typeof Zt=="symbol"?Zt:String(Zt)}function Ht(Kt,Zt){if(typeof Kt!="object"||Kt===null)return Kt;var rr=Kt[Symbol.toPrimitive];if(rr!==void 0){var ar=rr.call(Kt,Zt||"default");if(typeof ar!="object")return ar;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Zt==="string"?String:Number)(Kt)}var Bt;(function(Kt){Kt.AUDIO="audio",Kt.VIDEO="video",Kt.AUDIOVIDEO="audiovideo"})(Bt||(Bt={}));var Ft=function(){function Kt(rr){var ar;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=(ar={},ar[Bt.AUDIO]=null,ar[Bt.VIDEO]=null,ar[Bt.AUDIOVIDEO]=null,ar),this.baseurl=rr}var Zt=Kt.prototype;return Zt.setByteRange=function(ar,sr){var dr=ar.split("@",2),fr=[];dr.length===1?fr[0]=sr?sr.byteRangeEndOffset:0:fr[0]=parseInt(dr[1]),fr[1]=parseInt(dr[0])+fr[0],this._byteRange=fr},nr(Kt,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,Dt.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(ar){this._url=ar}}]),Kt}(),tr=function(Kt){Nt(Zt,Kt);function Zt(ar,sr){var dr;return dr=Kt.call(this,sr)||this,dr._decryptdata=null,dr.rawProgramDateTime=null,dr.programDateTime=null,dr.tagList=[],dr.duration=0,dr.sn=0,dr.levelkeys=void 0,dr.type=void 0,dr.loader=null,dr.keyLoader=null,dr.level=-1,dr.cc=0,dr.startPTS=void 0,dr.endPTS=void 0,dr.appendedPTS=void 0,dr.startDTS=void 0,dr.endDTS=void 0,dr.start=0,dr.deltaPTS=void 0,dr.maxStartPTS=void 0,dr.minEndPTS=void 0,dr.stats=new kt.LoadStats,dr.urlId=0,dr.data=void 0,dr.bitrateTest=!1,dr.title=null,dr.initSegment=null,dr.endList=void 0,dr.type=ar,dr}var rr=Zt.prototype;return rr.setKeyFormat=function(sr){if(this.levelkeys){var dr=this.levelkeys[sr];dr&&!this._decryptdata&&(this._decryptdata=dr.getDecryptData(this.sn))}},rr.abortRequests=function(){var sr,dr;(sr=this.loader)===null||sr===void 0||sr.abort(),(dr=this.keyLoader)===null||dr===void 0||dr.abort()},rr.setElementaryStreamInfo=function(sr,dr,fr,pr,xr,lr){lr===void 0&&(lr=!1);var hr=this.elementaryStreams,ur=hr[sr];if(!ur){hr[sr]={startPTS:dr,endPTS:fr,startDTS:pr,endDTS:xr,partial:lr};return}ur.startPTS=Math.min(ur.startPTS,dr),ur.endPTS=Math.max(ur.endPTS,fr),ur.startDTS=Math.min(ur.startDTS,pr),ur.endDTS=Math.max(ur.endDTS,xr)},rr.clearElementaryStreamInfo=function(){var sr=this.elementaryStreams;sr[Bt.AUDIO]=null,sr[Bt.VIDEO]=null,sr[Bt.AUDIOVIDEO]=null},nr(Zt,[{key:"decryptdata",get:function(){var sr=this.levelkeys;if(!sr&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var dr=this.levelkeys.identity;if(dr)this._decryptdata=dr.getDecryptData(this.sn);else{var fr=Object.keys(this.levelkeys);if(fr.length===1)return this._decryptdata=this.levelkeys[fr[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!(0,Rt.isFiniteNumber)(this.programDateTime))return null;var sr=(0,Rt.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+sr*1e3}},{key:"encrypted",get:function(){var sr;if((sr=this._decryptdata)!==null&&sr!==void 0&&sr.encrypted)return!0;if(this.levelkeys){var dr=Object.keys(this.levelkeys),fr=dr.length;if(fr>1||fr===1&&this.levelkeys[dr[0]].encrypted)return!0}return!1}}]),Zt}(Ft),cr=function(Kt){Nt(Zt,Kt);function Zt(rr,ar,sr,dr,fr){var pr;pr=Kt.call(this,sr)||this,pr.fragOffset=0,pr.duration=0,pr.gap=!1,pr.independent=!1,pr.relurl=void 0,pr.fragment=void 0,pr.index=void 0,pr.stats=new kt.LoadStats,pr.duration=rr.decimalFloatingPoint("DURATION"),pr.gap=rr.bool("GAP"),pr.independent=rr.bool("INDEPENDENT"),pr.relurl=rr.enumeratedString("URI"),pr.fragment=ar,pr.index=dr;var xr=rr.enumeratedString("BYTERANGE");return xr&&pr.setByteRange(xr,fr),fr&&(pr.fragOffset=fr.fragOffset+fr.duration),pr}return nr(Zt,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var ar=this.elementaryStreams;return!!(ar.audio||ar.video||ar.audiovideo)}}]),Zt}(Ft)},"./src/loader/key-loader.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>kt});var Rt=Ct("./src/errors.ts"),Dt=Ct("./src/loader/fragment-loader.ts"),kt=function(){function Nt(Wt){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=Wt}var zt=Nt.prototype;return zt.abort=function(){for(var nr in this.keyUriToKeyInfo){var Ut=this.keyUriToKeyInfo[nr].loader;Ut&&Ut.abort()}},zt.detach=function(){for(var nr in this.keyUriToKeyInfo){var Ut=this.keyUriToKeyInfo[nr];(Ut.mediaKeySessionContext||Ut.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[nr]}},zt.destroy=function(){this.detach();for(var nr in this.keyUriToKeyInfo){var Ut=this.keyUriToKeyInfo[nr].loader;Ut&&Ut.destroy()}this.keyUriToKeyInfo={}},zt.createKeyLoadError=function(nr,Ut,Ht,Bt){return Ut===void 0&&(Ut=Rt.ErrorDetails.KEY_LOAD_ERROR),new Dt.LoadError({type:Rt.ErrorTypes.NETWORK_ERROR,details:Ut,fatal:!1,frag:nr,networkDetails:Ht})},zt.loadClear=function(nr,Ut){var Ht=this;if(this.emeController&&this.config.emeEnabled)for(var Bt=nr.sn,Ft=nr.cc,tr=function(rr){var ar=Ut[rr];if(Ft<=ar.cc&&(Bt==="initSegment"||Bt<ar.sn))return Ht.emeController.selectKeySystemFormat(ar).then(function(sr){ar.setKeyFormat(sr)}),"break"},cr=0;cr<Ut.length;cr++){var Kt=tr(cr);if(Kt==="break")break}},zt.load=function(nr){var Ut=this;return!nr.decryptdata&&nr.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(nr).then(function(Ht){return Ut.loadInternal(nr,Ht)}):this.loadInternal(nr)},zt.loadInternal=function(nr,Ut){var Ht,Bt;Ut&&nr.setKeyFormat(Ut);var Ft=nr.decryptdata;if(!Ft){var tr=Ut?"Expected frag.decryptdata to be defined after setting format "+Ut:"Missing decryption data on fragment in onKeyLoading";return Promise.reject(this.createKeyLoadError(nr,Rt.ErrorDetails.KEY_LOAD_ERROR,null,tr))}var cr=Ft.uri;if(!cr)return Promise.reject(this.createKeyLoadError(nr,Rt.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+cr+'"'));var Kt=this.keyUriToKeyInfo[cr];if((Ht=Kt)!==null&&Ht!==void 0&&Ht.decryptdata.key)return Ft.key=Kt.decryptdata.key,Promise.resolve({frag:nr,keyInfo:Kt});if((Bt=Kt)!==null&&Bt!==void 0&&Bt.keyLoadPromise){var Zt;switch((Zt=Kt.mediaKeySessionContext)===null||Zt===void 0?void 0:Zt.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return Kt.keyLoadPromise.then(function(rr){return Ft.key=rr.keyInfo.decryptdata.key,{frag:nr,keyInfo:Kt}})}}switch(Kt=this.keyUriToKeyInfo[cr]={decryptdata:Ft,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},Ft.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return Ft.keyFormat==="identity"?this.loadKeyHTTP(Kt,nr):this.loadKeyEME(Kt,nr);case"AES-128":return this.loadKeyHTTP(Kt,nr);default:return Promise.reject(this.createKeyLoadError(nr,Rt.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+Ft.method+'"'))}},zt.loadKeyEME=function(nr,Ut){var Ht={frag:Ut,keyInfo:nr};if(this.emeController&&this.config.emeEnabled){var Bt=this.emeController.loadKey(Ht);if(Bt)return(nr.keyLoadPromise=Bt.then(function(Ft){return nr.mediaKeySessionContext=Ft,Ht})).catch(function(Ft){throw nr.keyLoadPromise=null,Ft})}return Promise.resolve(Ht)},zt.loadKeyHTTP=function(nr,Ut){var Ht=this,Bt=this.config,Ft=Bt.loader,tr=new Ft(Bt);return Ut.keyLoader=nr.loader=tr,nr.keyLoadPromise=new Promise(function(cr,Kt){var Zt={keyInfo:nr,frag:Ut,responseType:"arraybuffer",url:nr.decryptdata.uri},rr={timeout:Bt.fragLoadingTimeOut,maxRetry:0,retryDelay:Bt.fragLoadingRetryDelay,maxRetryDelay:Bt.fragLoadingMaxRetryTimeout,highWaterMark:0},ar={onSuccess:function(dr,fr,pr,xr){var lr=pr.frag,hr=pr.keyInfo,ur=pr.url;if(!lr.decryptdata||hr!==Ht.keyUriToKeyInfo[ur])return Kt(Ht.createKeyLoadError(lr,Rt.ErrorDetails.KEY_LOAD_ERROR,xr,"after key load, decryptdata unset or changed"));hr.decryptdata.key=lr.decryptdata.key=new Uint8Array(dr.data),lr.keyLoader=null,hr.loader=null,cr({frag:lr,keyInfo:hr})},onError:function(dr,fr,pr){Ht.resetLoader(fr),Kt(Ht.createKeyLoadError(Ut,Rt.ErrorDetails.KEY_LOAD_ERROR,pr))},onTimeout:function(dr,fr,pr){Ht.resetLoader(fr),Kt(Ht.createKeyLoadError(Ut,Rt.ErrorDetails.KEY_LOAD_TIMEOUT,pr))},onAbort:function(dr,fr,pr){Ht.resetLoader(fr),Kt(Ht.createKeyLoadError(Ut,Rt.ErrorDetails.INTERNAL_ABORTED,pr))}};tr.load(Zt,rr,ar)})},zt.resetLoader=function(nr){var Ut=nr.frag,Ht=nr.keyInfo,Bt=nr.url,Ft=Ht.loader;Ut.keyLoader===Ft&&(Ut.keyLoader=null,Ht.loader=null),delete this.keyUriToKeyInfo[Bt],Ft&&Ft.destroy()},Nt}()},"./src/loader/level-details.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{LevelDetails:()=>nr});var Rt=Ct("./src/polyfills/number.ts");function Dt(Ut,Ht){for(var Bt=0;Bt<Ht.length;Bt++){var Ft=Ht[Bt];Ft.enumerable=Ft.enumerable||!1,Ft.configurable=!0,"value"in Ft&&(Ft.writable=!0),Object.defineProperty(Ut,Nt(Ft.key),Ft)}}function kt(Ut,Ht,Bt){return Ht&&Dt(Ut.prototype,Ht),Bt&&Dt(Ut,Bt),Object.defineProperty(Ut,"prototype",{writable:!1}),Ut}function Nt(Ut){var Ht=zt(Ut,"string");return typeof Ht=="symbol"?Ht:String(Ht)}function zt(Ut,Ht){if(typeof Ut!="object"||Ut===null)return Ut;var Bt=Ut[Symbol.toPrimitive];if(Bt!==void 0){var Ft=Bt.call(Ut,Ht||"default");if(typeof Ft!="object")return Ft;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ht==="string"?String:Number)(Ut)}var Wt=10,nr=function(){function Ut(Bt){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=Bt}var Ht=Ut.prototype;return Ht.reloaded=function(Ft){if(!Ft){this.advanced=!0,this.updated=!0;return}var tr=this.lastPartSn-Ft.lastPartSn,cr=this.lastPartIndex-Ft.lastPartIndex;this.updated=this.endSN!==Ft.endSN||!!cr||!!tr,this.advanced=this.endSN>Ft.endSN||tr>0||tr===0&&cr>0,this.updated||this.advanced?this.misses=Math.floor(Ft.misses*.6):this.misses=Ft.misses+1,this.availabilityDelay=Ft.availabilityDelay},kt(Ut,[{key:"hasProgramDateTime",get:function(){return this.fragments.length?(0,Rt.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime):!1}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||Wt}},{key:"drift",get:function(){var Ft=this.driftEndTime-this.driftStartTime;if(Ft>0){var tr=this.driftEnd-this.driftStart;return tr*1e3/Ft}return 1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var Ft;return(Ft=this.partList)!==null&&Ft!==void 0&&Ft.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var Ft;return(Ft=this.fragments)!==null&&Ft!==void 0&&Ft.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var Ft;return(Ft=this.partList)!==null&&Ft!==void 0&&Ft.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var Ft;return(Ft=this.partList)!==null&&Ft!==void 0&&Ft.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),Ut}()},"./src/loader/level-key.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{LevelKey:()=>nr});var Rt=Ct("./src/utils/keysystem-util.ts"),Dt=Ct("./src/utils/mediakeys-helper.ts"),kt=Ct("./src/utils/mp4-tools.ts"),Nt=Ct("./src/utils/logger.ts"),zt=Ct("./src/utils/numeric-encoding-utils.ts"),Wt={},nr=function(){Ht.clearKeyUriToKeyIdMap=function(){Wt={}};function Ht(Ft,tr,cr,Kt,Zt){Kt===void 0&&(Kt=[1]),Zt===void 0&&(Zt=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=Ft,this.uri=tr,this.keyFormat=cr,this.keyFormatVersions=Kt,this.iv=Zt,this.encrypted=Ft?Ft!=="NONE":!1,this.isCommonEncryption=this.encrypted&&Ft!=="AES-128"}var Bt=Ht.prototype;return Bt.isSupported=function(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;switch(this.keyFormat){case"identity":return this.method==="SAMPLE-AES";case Dt.KeySystemFormats.FAIRPLAY:case Dt.KeySystemFormats.WIDEVINE:case Dt.KeySystemFormats.PLAYREADY:case Dt.KeySystemFormats.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1},Bt.getDecryptData=function(tr){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof tr!="number"&&(this.method==="AES-128"&&!this.iv&&Nt.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),tr=0);var cr=Ut(tr),Kt=new Ht(this.method,this.uri,"identity",this.keyFormatVersions,cr);return Kt}var Zt=(0,Rt.convertDataUriToArrayBytes)(this.uri);if(Zt)switch(this.keyFormat){case Dt.KeySystemFormats.WIDEVINE:this.pssh=Zt,Zt.length>=22&&(this.keyId=Zt.subarray(Zt.length-22,Zt.length-6));break;case Dt.KeySystemFormats.PLAYREADY:{var rr=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,kt.mp4pssh)(rr,null,Zt);var ar=new Uint16Array(Zt.buffer,Zt.byteOffset,Zt.byteLength/2),sr=String.fromCharCode.apply(null,Array.from(ar)),dr=sr.substring(sr.indexOf("<"),sr.length),fr=new DOMParser,pr=fr.parseFromString(dr,"text/xml"),xr=pr.getElementsByTagName("KID")[0];if(xr){var lr=xr.childNodes[0]?xr.childNodes[0].nodeValue:xr.getAttribute("VALUE");if(lr){var hr=(0,zt.base64Decode)(lr).subarray(0,16);(0,Rt.changeEndianness)(hr),this.keyId=hr}}break}default:{var ur=Zt.subarray(0,16);if(ur.length!==16){var mr=new Uint8Array(16);mr.set(ur,16-ur.length),ur=mr}this.keyId=ur;break}}if(!this.keyId||this.keyId.byteLength!==16){var ir=Wt[this.uri];if(!ir){var _r=Object.keys(Wt).length%Number.MAX_SAFE_INTEGER;ir=new Uint8Array(16);var yr=new DataView(ir.buffer,12,4);yr.setUint32(0,_r),Wt[this.uri]=ir}this.keyId=ir}return this},Ht}();function Ut(Ht){for(var Bt=new Uint8Array(16),Ft=12;Ft<16;Ft++)Bt[Ft]=Ht>>8*(15-Ft)&255;return Bt}},"./src/loader/load-stats.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{LoadStats:()=>Rt});var Rt=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Zt});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./node_modules/url-toolkit/src/url-toolkit.js"),kt=Ct("./src/loader/date-range.ts"),Nt=Ct("./src/loader/fragment.ts"),zt=Ct("./src/loader/level-details.ts"),Wt=Ct("./src/loader/level-key.ts"),nr=Ct("./src/utils/attr-list.ts"),Ut=Ct("./src/utils/logger.ts"),Ht=Ct("./src/utils/codecs.ts");function Bt(){return Bt=Object.assign?Object.assign.bind():function(lr){for(var hr=1;hr<arguments.length;hr++){var ur=arguments[hr];for(var mr in ur)Object.prototype.hasOwnProperty.call(ur,mr)&&(lr[mr]=ur[mr])}return lr},Bt.apply(this,arguments)}var Ft=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,tr=/#EXT-X-MEDIA:(.*)/g,cr=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Kt=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Zt=function(){function lr(){}return lr.findGroup=function(ur,mr){for(var ir=0;ir<ur.length;ir++){var _r=ur[ir];if(_r.id===mr)return _r}},lr.convertAVC1ToAVCOTI=function(ur){var mr=ur.split(".");if(mr.length>2){var ir=mr.shift()+".";return ir+=parseInt(mr.shift()).toString(16),ir+=("000"+parseInt(mr.shift()).toString(16)).slice(-4),ir}return ur},lr.resolve=function(ur,mr){return(0,Dt.buildAbsoluteURL)(mr,ur,{alwaysNormalize:!0})},lr.parseMasterPlaylist=function(ur,mr){var ir=[],_r=[],yr={},gr=[],Sr=!1;Ft.lastIndex=0;for(var Tr;(Tr=Ft.exec(ur))!=null;)if(Tr[1]){var br,Ar=new nr.AttrList(Tr[1]),Or={attrs:Ar,bitrate:Ar.decimalInteger("AVERAGE-BANDWIDTH")||Ar.decimalInteger("BANDWIDTH"),name:Ar.NAME,url:lr.resolve(Tr[2],mr)},Ir=Ar.decimalResolution("RESOLUTION");Ir&&(Or.width=Ir.width,Or.height=Ir.height),ar((Ar.CODECS||"").split(/[ ,]+/).filter(function(Dr){return Dr}),Or),Or.videoCodec&&Or.videoCodec.indexOf("avc1")!==-1&&(Or.videoCodec=lr.convertAVC1ToAVCOTI(Or.videoCodec)),(br=Or.unknownCodecs)!==null&&br!==void 0&&br.length||_r.push(Or),ir.push(Or)}else if(Tr[3]){var Cr=new nr.AttrList(Tr[3]);Cr["DATA-ID"]&&(Sr=!0,yr[Cr["DATA-ID"]]=Cr)}else if(Tr[4]){var Rr=Tr[4],Pr=rr(Rr,mr);Pr.encrypted&&Pr.isSupported()?gr.push(Pr):Ut.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+Rr+'"')}var wr=_r.length>0&&_r.length<ir.length;return{levels:wr?_r:ir,sessionData:Sr?yr:null,sessionKeys:gr.length?gr:null}},lr.parseMasterPlaylistMedia=function(ur,mr,ir,_r){_r===void 0&&(_r=[]);var yr,gr=[],Sr=0;for(tr.lastIndex=0;(yr=tr.exec(ur))!==null;){var Tr=new nr.AttrList(yr[1]);if(Tr.TYPE===ir){var br={attrs:Tr,bitrate:0,id:Sr++,groupId:Tr["GROUP-ID"],instreamId:Tr["INSTREAM-ID"],name:Tr.NAME||Tr.LANGUAGE||"",type:ir,default:Tr.bool("DEFAULT"),autoselect:Tr.bool("AUTOSELECT"),forced:Tr.bool("FORCED"),lang:Tr.LANGUAGE,url:Tr.URI?lr.resolve(Tr.URI,mr):""};if(_r.length){var Ar=lr.findGroup(_r,br.groupId)||_r[0];sr(br,Ar,"audioCodec"),sr(br,Ar,"textCodec")}gr.push(br)}}return gr},lr.parseLevelPlaylist=function(ur,mr,ir,_r,yr){var gr=new zt.LevelDetails(mr),Sr=gr.fragments,Tr=null,br=0,Ar=0,Or=0,Ir=0,Cr=null,Rr=new Nt.Fragment(_r,mr),Pr,wr,Dr,kr=-1,Fr=!1;for(cr.lastIndex=0,gr.m3u8=ur;(Pr=cr.exec(ur))!==null;){Fr&&(Fr=!1,Rr=new Nt.Fragment(_r,mr),Rr.start=Or,Rr.sn=br,Rr.cc=Ir,Rr.level=ir,Tr&&(Rr.initSegment=Tr,Rr.rawProgramDateTime=Tr.rawProgramDateTime,Tr.rawProgramDateTime=null));var Br=Pr[1];if(Br){Rr.duration=parseFloat(Br);var Kr=(" "+Pr[2]).slice(1);Rr.title=Kr||null,Rr.tagList.push(Kr?["INF",Br,Kr]:["INF",Br])}else if(Pr[3])(0,Rt.isFiniteNumber)(Rr.duration)&&(Rr.start=Or,Dr&&xr(Rr,Dr,gr),Rr.sn=br,Rr.level=ir,Rr.cc=Ir,Rr.urlId=yr,Sr.push(Rr),Rr.relurl=(" "+Pr[3]).slice(1),fr(Rr,Cr),Cr=Rr,Or+=Rr.duration,br++,Ar=0,Fr=!0);else if(Pr[4]){var Vr=(" "+Pr[4]).slice(1);Cr?Rr.setByteRange(Vr,Cr):Rr.setByteRange(Vr)}else if(Pr[5])Rr.rawProgramDateTime=(" "+Pr[5]).slice(1),Rr.tagList.push(["PROGRAM-DATE-TIME",Rr.rawProgramDateTime]),kr===-1&&(kr=Sr.length);else{if(Pr=Pr[0].match(Kt),!Pr){Ut.logger.warn("No matches on slow regex match for level playlist!");continue}for(wr=1;wr<Pr.length&&!(typeof Pr[wr]<"u");wr++);var Gr=(" "+Pr[wr]).slice(1),jr=(" "+Pr[wr+1]).slice(1),zr=Pr[wr+2]?(" "+Pr[wr+2]).slice(1):"";switch(Gr){case"PLAYLIST-TYPE":gr.type=jr.toUpperCase();break;case"MEDIA-SEQUENCE":br=gr.startSN=parseInt(jr);break;case"SKIP":{var Xr=new nr.AttrList(jr),Zr=Xr.decimalInteger("SKIPPED-SEGMENTS");if((0,Rt.isFiniteNumber)(Zr)){gr.skippedSegments=Zr;for(var ln=Zr;ln--;)Sr.unshift(null);br+=Zr}var Qr=Xr.enumeratedString("RECENTLY-REMOVED-DATERANGES");Qr&&(gr.recentlyRemovedDateranges=Qr.split("	"));break}case"TARGETDURATION":gr.targetduration=parseFloat(jr);break;case"VERSION":gr.version=parseInt(jr);break;case"EXTM3U":break;case"ENDLIST":gr.live=!1;break;case"#":(jr||zr)&&Rr.tagList.push(zr?[jr,zr]:[jr]);break;case"DISCONTINUITY":Ir++,Rr.tagList.push(["DIS"]);break;case"GAP":Rr.tagList.push([Gr]);break;case"BITRATE":Rr.tagList.push([Gr,jr]);break;case"DATERANGE":{var an=new nr.AttrList(jr),Jr=new kt.DateRange(an,gr.dateRanges[an.ID]);Jr.isValid||gr.skippedSegments?gr.dateRanges[Jr.id]=Jr:Ut.logger.warn('Ignoring invalid DATERANGE tag: "'+jr+'"'),Rr.tagList.push(["EXT-X-DATERANGE",jr]);break}case"DISCONTINUITY-SEQUENCE":Ir=parseInt(jr);break;case"KEY":{var cn=rr(jr,mr);if(cn.isSupported()){if(cn.method==="NONE"){Dr=void 0;break}Dr||(Dr={}),Dr[cn.keyFormat]&&(Dr=Bt({},Dr)),Dr[cn.keyFormat]=cn}else Ut.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+jr+'"');break}case"START":{var un=new nr.AttrList(jr),vn=un.decimalFloatingPoint("TIME-OFFSET");(0,Rt.isFiniteNumber)(vn)&&(gr.startTimeOffset=vn);break}case"MAP":{var hn=new nr.AttrList(jr);if(Rr.duration){var fn=new Nt.Fragment(_r,mr);pr(fn,hn,ir,Dr),Tr=fn,Rr.initSegment=Tr,Tr.rawProgramDateTime&&!Rr.rawProgramDateTime&&(Rr.rawProgramDateTime=Tr.rawProgramDateTime)}else pr(Rr,hn,ir,Dr),Tr=Rr,Fr=!0;break}case"SERVER-CONTROL":{var pn=new nr.AttrList(jr);gr.canBlockReload=pn.bool("CAN-BLOCK-RELOAD"),gr.canSkipUntil=pn.optionalFloat("CAN-SKIP-UNTIL",0),gr.canSkipDateRanges=gr.canSkipUntil>0&&pn.bool("CAN-SKIP-DATERANGES"),gr.partHoldBack=pn.optionalFloat("PART-HOLD-BACK",0),gr.holdBack=pn.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{var Tn=new nr.AttrList(jr);gr.partTarget=Tn.decimalFloatingPoint("PART-TARGET");break}case"PART":{var $n=gr.partList;$n||($n=gr.partList=[]);var Ln=Ar>0?$n[$n.length-1]:void 0,Dn=Ar++,mn=new Nt.Part(new nr.AttrList(jr),Rr,mr,Dn,Ln);$n.push(mn),Rr.duration+=mn.duration;break}case"PRELOAD-HINT":{var On=new nr.AttrList(jr);gr.preloadHint=On;break}case"RENDITION-REPORT":{var xn=new nr.AttrList(jr);gr.renditionReports=gr.renditionReports||[],gr.renditionReports.push(xn);break}default:Ut.logger.warn("line parsed but not handled: "+Pr);break}}}Cr&&!Cr.relurl?(Sr.pop(),Or-=Cr.duration,gr.partList&&(gr.fragmentHint=Cr)):gr.partList&&(fr(Rr,Cr),Rr.cc=Ir,gr.fragmentHint=Rr,Dr&&xr(Rr,Dr,gr));var tn=Sr.length,En=Sr[0],Mn=Sr[tn-1];if(Or+=gr.skippedSegments*gr.targetduration,Or>0&&tn&&Mn){gr.averagetargetduration=Or/tn;var gn=Mn.sn;gr.endSN=gn!=="initSegment"?gn:0,gr.live||(Mn.endList=!0),En&&(gr.startCC=En.cc)}else gr.endSN=0,gr.startCC=0;return gr.fragmentHint&&(Or+=gr.fragmentHint.duration),gr.totalduration=Or,gr.endCC=Ir,kr>0&&dr(Sr,kr),gr},lr}();function rr(lr,hr){var ur,mr,ir=new nr.AttrList(lr),_r=(ur=ir.enumeratedString("METHOD"))!=null?ur:"",yr=ir.URI,gr=ir.hexadecimalInteger("IV"),Sr=ir.enumeratedString("KEYFORMATVERSIONS"),Tr=(mr=ir.enumeratedString("KEYFORMAT"))!=null?mr:"identity";yr&&ir.IV&&!gr&&Ut.logger.error("Invalid IV: "+ir.IV);var br=yr?Zt.resolve(yr,hr):"",Ar=(Sr||"1").split("/").map(Number).filter(Number.isFinite);return new Wt.LevelKey(_r,br,Tr,Ar,gr)}function ar(lr,hr){["video","audio","text"].forEach(function(ur){var mr=lr.filter(function(_r){return(0,Ht.isCodecType)(_r,ur)});if(mr.length){var ir=mr.filter(function(_r){return _r.lastIndexOf("avc1",0)===0||_r.lastIndexOf("mp4a",0)===0});hr[ur+"Codec"]=ir.length>0?ir[0]:mr[0],lr=lr.filter(function(_r){return mr.indexOf(_r)===-1})}}),hr.unknownCodecs=lr}function sr(lr,hr,ur){var mr=hr[ur];mr&&(lr[ur]=mr)}function dr(lr,hr){for(var ur=lr[hr],mr=hr;mr--;){var ir=lr[mr];if(!ir)return;ir.programDateTime=ur.programDateTime-ir.duration*1e3,ur=ir}}function fr(lr,hr){lr.rawProgramDateTime?lr.programDateTime=Date.parse(lr.rawProgramDateTime):hr!=null&&hr.programDateTime&&(lr.programDateTime=hr.endProgramDateTime),(0,Rt.isFiniteNumber)(lr.programDateTime)||(lr.programDateTime=null,lr.rawProgramDateTime=null)}function pr(lr,hr,ur,mr){lr.relurl=hr.URI,hr.BYTERANGE&&lr.setByteRange(hr.BYTERANGE),lr.level=ur,lr.sn="initSegment",mr&&(lr.levelkeys=mr),lr.initSegment=null}function xr(lr,hr,ur){lr.levelkeys=hr;var mr=ur.encryptedFragments;(!mr.length||mr[mr.length-1].levelkeys!==hr)&&Object.keys(hr).some(function(ir){return hr[ir].isCommonEncryption})&&mr.push(lr)}},"./src/loader/playlist-loader.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Ft});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/events.ts"),kt=Ct("./src/errors.ts"),Nt=Ct("./src/utils/logger.ts"),zt=Ct("./src/loader/m3u8-parser.ts"),Wt=Ct("./src/types/loader.ts"),nr=Ct("./src/utils/attr-list.ts");function Ut(tr){var cr=tr.type;switch(cr){case Wt.PlaylistContextType.AUDIO_TRACK:return Wt.PlaylistLevelType.AUDIO;case Wt.PlaylistContextType.SUBTITLE_TRACK:return Wt.PlaylistLevelType.SUBTITLE;default:return Wt.PlaylistLevelType.MAIN}}function Ht(tr,cr){var Kt=tr.url;return(Kt===void 0||Kt.indexOf("data:")===0)&&(Kt=cr.url),Kt}var Bt=function(){function tr(Kt){this.hls=void 0,this.loaders=Object.create(null),this.hls=Kt,this.registerListeners()}var cr=tr.prototype;return cr.startLoad=function(Zt){},cr.stopLoad=function(){this.destroyInternalLoaders()},cr.registerListeners=function(){var Zt=this.hls;Zt.on(Dt.Events.MANIFEST_LOADING,this.onManifestLoading,this),Zt.on(Dt.Events.LEVEL_LOADING,this.onLevelLoading,this),Zt.on(Dt.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),Zt.on(Dt.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},cr.unregisterListeners=function(){var Zt=this.hls;Zt.off(Dt.Events.MANIFEST_LOADING,this.onManifestLoading,this),Zt.off(Dt.Events.LEVEL_LOADING,this.onLevelLoading,this),Zt.off(Dt.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),Zt.off(Dt.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},cr.createInternalLoader=function(Zt){var rr=this.hls.config,ar=rr.pLoader,sr=rr.loader,dr=ar||sr,fr=new dr(rr);return Zt.loader=fr,this.loaders[Zt.type]=fr,fr},cr.getInternalLoader=function(Zt){return this.loaders[Zt.type]},cr.resetInternalLoader=function(Zt){this.loaders[Zt]&&delete this.loaders[Zt]},cr.destroyInternalLoaders=function(){for(var Zt in this.loaders){var rr=this.loaders[Zt];rr&&rr.destroy(),this.resetInternalLoader(Zt)}},cr.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},cr.onManifestLoading=function(Zt,rr){var ar=rr.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:Wt.PlaylistContextType.MANIFEST,url:ar,deliveryDirectives:null})},cr.onLevelLoading=function(Zt,rr){var ar=rr.id,sr=rr.level,dr=rr.url,fr=rr.deliveryDirectives;this.load({id:ar,groupId:null,level:sr,responseType:"text",type:Wt.PlaylistContextType.LEVEL,url:dr,deliveryDirectives:fr})},cr.onAudioTrackLoading=function(Zt,rr){var ar=rr.id,sr=rr.groupId,dr=rr.url,fr=rr.deliveryDirectives;this.load({id:ar,groupId:sr,level:null,responseType:"text",type:Wt.PlaylistContextType.AUDIO_TRACK,url:dr,deliveryDirectives:fr})},cr.onSubtitleTrackLoading=function(Zt,rr){var ar=rr.id,sr=rr.groupId,dr=rr.url,fr=rr.deliveryDirectives;this.load({id:ar,groupId:sr,level:null,responseType:"text",type:Wt.PlaylistContextType.SUBTITLE_TRACK,url:dr,deliveryDirectives:fr})},cr.load=function(Zt){var rr,ar=this.hls.config,sr=this.getInternalLoader(Zt);if(sr){var dr=sr.context;if(dr&&dr.url===Zt.url){Nt.logger.trace("[playlist-loader]: playlist request ongoing");return}Nt.logger.log("[playlist-loader]: aborting previous loader for type: "+Zt.type),sr.abort()}var fr,pr,xr,lr;switch(Zt.type){case Wt.PlaylistContextType.MANIFEST:fr=ar.manifestLoadingMaxRetry,pr=ar.manifestLoadingTimeOut,xr=ar.manifestLoadingRetryDelay,lr=ar.manifestLoadingMaxRetryTimeout;break;case Wt.PlaylistContextType.LEVEL:case Wt.PlaylistContextType.AUDIO_TRACK:case Wt.PlaylistContextType.SUBTITLE_TRACK:fr=0,pr=ar.levelLoadingTimeOut;break;default:fr=ar.levelLoadingMaxRetry,pr=ar.levelLoadingTimeOut,xr=ar.levelLoadingRetryDelay,lr=ar.levelLoadingMaxRetryTimeout;break}if(sr=this.createInternalLoader(Zt),(rr=Zt.deliveryDirectives)!==null&&rr!==void 0&&rr.part){var hr;if(Zt.type===Wt.PlaylistContextType.LEVEL&&Zt.level!==null?hr=this.hls.levels[Zt.level].details:Zt.type===Wt.PlaylistContextType.AUDIO_TRACK&&Zt.id!==null?hr=this.hls.audioTracks[Zt.id].details:Zt.type===Wt.PlaylistContextType.SUBTITLE_TRACK&&Zt.id!==null&&(hr=this.hls.subtitleTracks[Zt.id].details),hr){var ur=hr.partTarget,mr=hr.targetduration;ur&&mr&&(pr=Math.min(Math.max(ur*3,mr*.8)*1e3,pr))}}var ir={timeout:pr,maxRetry:fr,retryDelay:xr,maxRetryDelay:lr,highWaterMark:0},_r={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};sr.load(Zt,ir,_r)},cr.loadsuccess=function(Zt,rr,ar,sr){sr===void 0&&(sr=null),this.resetInternalLoader(ar.type);var dr=Zt.data;if(dr.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(Zt,ar,"no EXTM3U delimiter",sr);return}rr.parsing.start=performance.now(),dr.indexOf("#EXTINF:")>0||dr.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(Zt,rr,ar,sr):this.handleMasterPlaylist(Zt,rr,ar,sr)},cr.loaderror=function(Zt,rr,ar){ar===void 0&&(ar=null),this.handleNetworkError(rr,ar,!1,Zt)},cr.loadtimeout=function(Zt,rr,ar){ar===void 0&&(ar=null),this.handleNetworkError(rr,ar,!0)},cr.handleMasterPlaylist=function(Zt,rr,ar,sr){var dr=this.hls,fr=Zt.data,pr=Ht(Zt,ar),xr=zt.default.parseMasterPlaylist(fr,pr),lr=xr.levels,hr=xr.sessionData,ur=xr.sessionKeys;if(!lr.length){this.handleManifestParsingError(Zt,ar,"no level found in manifest",sr);return}var mr=lr.map(function(Tr){return{id:Tr.attrs.AUDIO,audioCodec:Tr.audioCodec}}),ir=lr.map(function(Tr){return{id:Tr.attrs.SUBTITLES,textCodec:Tr.textCodec}}),_r=zt.default.parseMasterPlaylistMedia(fr,pr,"AUDIO",mr),yr=zt.default.parseMasterPlaylistMedia(fr,pr,"SUBTITLES",ir),gr=zt.default.parseMasterPlaylistMedia(fr,pr,"CLOSED-CAPTIONS");if(_r.length){var Sr=_r.some(function(Tr){return!Tr.url});!Sr&&lr[0].audioCodec&&!lr[0].attrs.AUDIO&&(Nt.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),_r.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new nr.AttrList({}),bitrate:0,url:""}))}dr.trigger(Dt.Events.MANIFEST_LOADED,{levels:lr,audioTracks:_r,subtitles:yr,captions:gr,url:pr,stats:rr,networkDetails:sr,sessionData:hr,sessionKeys:ur})},cr.handleTrackOrLevelPlaylist=function(Zt,rr,ar,sr){var dr=this.hls,fr=ar.id,pr=ar.level,xr=ar.type,lr=Ht(Zt,ar),hr=(0,Rt.isFiniteNumber)(fr)?fr:0,ur=(0,Rt.isFiniteNumber)(pr)?pr:hr,mr=Ut(ar),ir=zt.default.parseLevelPlaylist(Zt.data,lr,ur,mr,hr);if(!ir.fragments.length){dr.trigger(Dt.Events.ERROR,{type:kt.ErrorTypes.NETWORK_ERROR,details:kt.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:lr,reason:"no fragments found in level",level:typeof ar.level=="number"?ar.level:void 0});return}if(xr===Wt.PlaylistContextType.MANIFEST){var _r={attrs:new nr.AttrList({}),bitrate:0,details:ir,name:"",url:lr};dr.trigger(Dt.Events.MANIFEST_LOADED,{levels:[_r],audioTracks:[],url:lr,stats:rr,networkDetails:sr,sessionData:null,sessionKeys:null})}rr.parsing.end=performance.now(),ar.levelDetails=ir,this.handlePlaylistLoaded(Zt,rr,ar,sr)},cr.handleManifestParsingError=function(Zt,rr,ar,sr){this.hls.trigger(Dt.Events.ERROR,{type:kt.ErrorTypes.NETWORK_ERROR,details:kt.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:rr.type===Wt.PlaylistContextType.MANIFEST,url:Zt.url,reason:ar,response:Zt,context:rr,networkDetails:sr})},cr.handleNetworkError=function(Zt,rr,ar,sr){ar===void 0&&(ar=!1),Nt.logger.warn("[playlist-loader]: A network "+(ar?"timeout":"error")+" occurred while loading "+Zt.type+" level: "+Zt.level+" id: "+Zt.id+' group-id: "'+Zt.groupId+'"');var dr=kt.ErrorDetails.UNKNOWN,fr=!1,pr=this.getInternalLoader(Zt);switch(Zt.type){case Wt.PlaylistContextType.MANIFEST:dr=ar?kt.ErrorDetails.MANIFEST_LOAD_TIMEOUT:kt.ErrorDetails.MANIFEST_LOAD_ERROR,fr=!0;break;case Wt.PlaylistContextType.LEVEL:dr=ar?kt.ErrorDetails.LEVEL_LOAD_TIMEOUT:kt.ErrorDetails.LEVEL_LOAD_ERROR,fr=!1;break;case Wt.PlaylistContextType.AUDIO_TRACK:dr=ar?kt.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:kt.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fr=!1;break;case Wt.PlaylistContextType.SUBTITLE_TRACK:dr=ar?kt.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:kt.ErrorDetails.SUBTITLE_LOAD_ERROR,fr=!1;break}pr&&this.resetInternalLoader(Zt.type);var xr={type:kt.ErrorTypes.NETWORK_ERROR,details:dr,fatal:fr,url:Zt.url,loader:pr,context:Zt,networkDetails:rr};sr&&(xr.response=sr),this.hls.trigger(Dt.Events.ERROR,xr)},cr.handlePlaylistLoaded=function(Zt,rr,ar,sr){var dr=ar.type,fr=ar.level,pr=ar.id,xr=ar.groupId,lr=ar.loader,hr=ar.levelDetails,ur=ar.deliveryDirectives;if(!(hr!=null&&hr.targetduration)){this.handleManifestParsingError(Zt,ar,"invalid target duration",sr);return}if(lr)switch(hr.live&&(lr.getCacheAge&&(hr.ageHeader=lr.getCacheAge()||0),(!lr.getCacheAge||isNaN(hr.ageHeader))&&(hr.ageHeader=0)),dr){case Wt.PlaylistContextType.MANIFEST:case Wt.PlaylistContextType.LEVEL:this.hls.trigger(Dt.Events.LEVEL_LOADED,{details:hr,level:fr||0,id:pr||0,stats:rr,networkDetails:sr,deliveryDirectives:ur});break;case Wt.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(Dt.Events.AUDIO_TRACK_LOADED,{details:hr,id:pr||0,groupId:xr||"",stats:rr,networkDetails:sr,deliveryDirectives:ur});break;case Wt.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(Dt.Events.SUBTITLE_TRACK_LOADED,{details:hr,id:pr||0,groupId:xr||"",stats:rr,networkDetails:sr,deliveryDirectives:ur});break}},tr}();const Ft=Bt},"./src/polyfills/number.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{MAX_SAFE_INTEGER:()=>Dt,isFiniteNumber:()=>Rt});var Rt=Number.isFinite||function(kt){return typeof kt=="number"&&isFinite(kt)},Dt=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Dt});var Rt=function(){function kt(){}return kt.getSilentFrame=function(zt,Wt){switch(zt){case"mp4a.40.2":if(Wt===1)return new Uint8Array([0,200,0,128,35,128]);if(Wt===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(Wt===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(Wt===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(Wt===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(Wt===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(Wt===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(Wt===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(Wt===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}},kt}();const Dt=Rt},"./src/remux/mp4-generator.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>kt});var Rt=Math.pow(2,32)-1,Dt=function(){function Nt(){}return Nt.init=function(){Nt.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var Wt;for(Wt in Nt.types)Nt.types.hasOwnProperty(Wt)&&(Nt.types[Wt]=[Wt.charCodeAt(0),Wt.charCodeAt(1),Wt.charCodeAt(2),Wt.charCodeAt(3)]);var nr=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ut=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Nt.HDLR_TYPES={video:nr,audio:Ut};var Ht=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Bt=new Uint8Array([0,0,0,0,0,0,0,0]);Nt.STTS=Nt.STSC=Nt.STCO=Bt,Nt.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Nt.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Nt.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Nt.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var Ft=new Uint8Array([105,115,111,109]),tr=new Uint8Array([97,118,99,49]),cr=new Uint8Array([0,0,0,1]);Nt.FTYP=Nt.box(Nt.types.ftyp,Ft,cr,Ft,tr),Nt.DINF=Nt.box(Nt.types.dinf,Nt.box(Nt.types.dref,Ht))},Nt.box=function(Wt){for(var nr=8,Ut=arguments.length,Ht=new Array(Ut>1?Ut-1:0),Bt=1;Bt<Ut;Bt++)Ht[Bt-1]=arguments[Bt];for(var Ft=Ht.length,tr=Ft;Ft--;)nr+=Ht[Ft].byteLength;var cr=new Uint8Array(nr);for(cr[0]=nr>>24&255,cr[1]=nr>>16&255,cr[2]=nr>>8&255,cr[3]=nr&255,cr.set(Wt,4),Ft=0,nr=8;Ft<tr;Ft++)cr.set(Ht[Ft],nr),nr+=Ht[Ft].byteLength;return cr},Nt.hdlr=function(Wt){return Nt.box(Nt.types.hdlr,Nt.HDLR_TYPES[Wt])},Nt.mdat=function(Wt){return Nt.box(Nt.types.mdat,Wt)},Nt.mdhd=function(Wt,nr){nr*=Wt;var Ut=Math.floor(nr/(Rt+1)),Ht=Math.floor(nr%(Rt+1));return Nt.box(Nt.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Wt>>24&255,Wt>>16&255,Wt>>8&255,Wt&255,Ut>>24,Ut>>16&255,Ut>>8&255,Ut&255,Ht>>24,Ht>>16&255,Ht>>8&255,Ht&255,85,196,0,0]))},Nt.mdia=function(Wt){return Nt.box(Nt.types.mdia,Nt.mdhd(Wt.timescale,Wt.duration),Nt.hdlr(Wt.type),Nt.minf(Wt))},Nt.mfhd=function(Wt){return Nt.box(Nt.types.mfhd,new Uint8Array([0,0,0,0,Wt>>24,Wt>>16&255,Wt>>8&255,Wt&255]))},Nt.minf=function(Wt){return Wt.type==="audio"?Nt.box(Nt.types.minf,Nt.box(Nt.types.smhd,Nt.SMHD),Nt.DINF,Nt.stbl(Wt)):Nt.box(Nt.types.minf,Nt.box(Nt.types.vmhd,Nt.VMHD),Nt.DINF,Nt.stbl(Wt))},Nt.moof=function(Wt,nr,Ut){return Nt.box(Nt.types.moof,Nt.mfhd(Wt),Nt.traf(Ut,nr))},Nt.moov=function(Wt){for(var nr=Wt.length,Ut=[];nr--;)Ut[nr]=Nt.trak(Wt[nr]);return Nt.box.apply(null,[Nt.types.moov,Nt.mvhd(Wt[0].timescale,Wt[0].duration)].concat(Ut).concat(Nt.mvex(Wt)))},Nt.mvex=function(Wt){for(var nr=Wt.length,Ut=[];nr--;)Ut[nr]=Nt.trex(Wt[nr]);return Nt.box.apply(null,[Nt.types.mvex].concat(Ut))},Nt.mvhd=function(Wt,nr){nr*=Wt;var Ut=Math.floor(nr/(Rt+1)),Ht=Math.floor(nr%(Rt+1)),Bt=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,Wt>>24&255,Wt>>16&255,Wt>>8&255,Wt&255,Ut>>24,Ut>>16&255,Ut>>8&255,Ut&255,Ht>>24,Ht>>16&255,Ht>>8&255,Ht&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Nt.box(Nt.types.mvhd,Bt)},Nt.sdtp=function(Wt){var nr=Wt.samples||[],Ut=new Uint8Array(4+nr.length),Ht,Bt;for(Ht=0;Ht<nr.length;Ht++)Bt=nr[Ht].flags,Ut[Ht+4]=Bt.dependsOn<<4|Bt.isDependedOn<<2|Bt.hasRedundancy;return Nt.box(Nt.types.sdtp,Ut)},Nt.stbl=function(Wt){return Nt.box(Nt.types.stbl,Nt.stsd(Wt),Nt.box(Nt.types.stts,Nt.STTS),Nt.box(Nt.types.stsc,Nt.STSC),Nt.box(Nt.types.stsz,Nt.STSZ),Nt.box(Nt.types.stco,Nt.STCO))},Nt.avc1=function(Wt){var nr=[],Ut=[],Ht,Bt,Ft;for(Ht=0;Ht<Wt.sps.length;Ht++)Bt=Wt.sps[Ht],Ft=Bt.byteLength,nr.push(Ft>>>8&255),nr.push(Ft&255),nr=nr.concat(Array.prototype.slice.call(Bt));for(Ht=0;Ht<Wt.pps.length;Ht++)Bt=Wt.pps[Ht],Ft=Bt.byteLength,Ut.push(Ft>>>8&255),Ut.push(Ft&255),Ut=Ut.concat(Array.prototype.slice.call(Bt));var tr=Nt.box(Nt.types.avcC,new Uint8Array([1,nr[3],nr[4],nr[5],255,224|Wt.sps.length].concat(nr).concat([Wt.pps.length]).concat(Ut))),cr=Wt.width,Kt=Wt.height,Zt=Wt.pixelRatio[0],rr=Wt.pixelRatio[1];return Nt.box(Nt.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,cr>>8&255,cr&255,Kt>>8&255,Kt&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),tr,Nt.box(Nt.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Nt.box(Nt.types.pasp,new Uint8Array([Zt>>24,Zt>>16&255,Zt>>8&255,Zt&255,rr>>24,rr>>16&255,rr>>8&255,rr&255])))},Nt.esds=function(Wt){var nr=Wt.config.length;return new Uint8Array([0,0,0,0,3,23+nr,0,1,0,4,15+nr,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([nr]).concat(Wt.config).concat([6,1,2]))},Nt.mp4a=function(Wt){var nr=Wt.samplerate;return Nt.box(Nt.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,Wt.channelCount,0,16,0,0,0,0,nr>>8&255,nr&255,0,0]),Nt.box(Nt.types.esds,Nt.esds(Wt)))},Nt.mp3=function(Wt){var nr=Wt.samplerate;return Nt.box(Nt.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,Wt.channelCount,0,16,0,0,0,0,nr>>8&255,nr&255,0,0]))},Nt.stsd=function(Wt){return Wt.type==="audio"?Wt.segmentCodec==="mp3"&&Wt.codec==="mp3"?Nt.box(Nt.types.stsd,Nt.STSD,Nt.mp3(Wt)):Nt.box(Nt.types.stsd,Nt.STSD,Nt.mp4a(Wt)):Nt.box(Nt.types.stsd,Nt.STSD,Nt.avc1(Wt))},Nt.tkhd=function(Wt){var nr=Wt.id,Ut=Wt.duration*Wt.timescale,Ht=Wt.width,Bt=Wt.height,Ft=Math.floor(Ut/(Rt+1)),tr=Math.floor(Ut%(Rt+1));return Nt.box(Nt.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,nr>>24&255,nr>>16&255,nr>>8&255,nr&255,0,0,0,0,Ft>>24,Ft>>16&255,Ft>>8&255,Ft&255,tr>>24,tr>>16&255,tr>>8&255,tr&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,Ht>>8&255,Ht&255,0,0,Bt>>8&255,Bt&255,0,0]))},Nt.traf=function(Wt,nr){var Ut=Nt.sdtp(Wt),Ht=Wt.id,Bt=Math.floor(nr/(Rt+1)),Ft=Math.floor(nr%(Rt+1));return Nt.box(Nt.types.traf,Nt.box(Nt.types.tfhd,new Uint8Array([0,0,0,0,Ht>>24,Ht>>16&255,Ht>>8&255,Ht&255])),Nt.box(Nt.types.tfdt,new Uint8Array([1,0,0,0,Bt>>24,Bt>>16&255,Bt>>8&255,Bt&255,Ft>>24,Ft>>16&255,Ft>>8&255,Ft&255])),Nt.trun(Wt,Ut.length+16+20+8+16+8+8),Ut)},Nt.trak=function(Wt){return Wt.duration=Wt.duration||4294967295,Nt.box(Nt.types.trak,Nt.tkhd(Wt),Nt.mdia(Wt))},Nt.trex=function(Wt){var nr=Wt.id;return Nt.box(Nt.types.trex,new Uint8Array([0,0,0,0,nr>>24,nr>>16&255,nr>>8&255,nr&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},Nt.trun=function(Wt,nr){var Ut=Wt.samples||[],Ht=Ut.length,Bt=12+16*Ht,Ft=new Uint8Array(Bt),tr,cr,Kt,Zt,rr,ar;for(nr+=8+Bt,Ft.set([Wt.type==="video"?1:0,0,15,1,Ht>>>24&255,Ht>>>16&255,Ht>>>8&255,Ht&255,nr>>>24&255,nr>>>16&255,nr>>>8&255,nr&255],0),tr=0;tr<Ht;tr++)cr=Ut[tr],Kt=cr.duration,Zt=cr.size,rr=cr.flags,ar=cr.cts,Ft.set([Kt>>>24&255,Kt>>>16&255,Kt>>>8&255,Kt&255,Zt>>>24&255,Zt>>>16&255,Zt>>>8&255,Zt&255,rr.isLeading<<2|rr.dependsOn,rr.isDependedOn<<6|rr.hasRedundancy<<4|rr.paddingValue<<1|rr.isNonSync,rr.degradPrio&240<<8,rr.degradPrio&15,ar>>>24&255,ar>>>16&255,ar>>>8&255,ar&255],12+16*tr);return Nt.box(Nt.types.trun,Ft)},Nt.initSegment=function(Wt){Nt.types||Nt.init();var nr=Nt.moov(Wt),Ut=new Uint8Array(Nt.FTYP.byteLength+nr.byteLength);return Ut.set(Nt.FTYP),Ut.set(nr,Nt.FTYP.byteLength),Ut},Nt}();Dt.types=void 0,Dt.HDLR_TYPES=void 0,Dt.STTS=void 0,Dt.STSC=void 0,Dt.STCO=void 0,Dt.STSZ=void 0,Dt.VMHD=void 0,Dt.SMHD=void 0,Dt.STSD=void 0,Dt.FTYP=void 0,Dt.DINF=void 0;const kt=Dt},"./src/remux/mp4-remuxer.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Zt,flushTextTrackMetadataCueSamples:()=>sr,flushTextTrackUserdataCueSamples:()=>dr,normalizePts:()=>rr});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/remux/aac-helper.ts"),kt=Ct("./src/remux/mp4-generator.ts"),Nt=Ct("./src/events.ts"),zt=Ct("./src/errors.ts"),Wt=Ct("./src/utils/logger.ts"),nr=Ct("./src/types/loader.ts"),Ut=Ct("./src/utils/timescale-conversion.ts");function Ht(){return Ht=Object.assign?Object.assign.bind():function(xr){for(var lr=1;lr<arguments.length;lr++){var hr=arguments[lr];for(var ur in hr)Object.prototype.hasOwnProperty.call(hr,ur)&&(xr[ur]=hr[ur])}return xr},Ht.apply(this,arguments)}var Bt=10*1e3,Ft=1024,tr=1152,cr=null,Kt=null,Zt=function(){function xr(hr,ur,mr,ir){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=hr,this.config=ur,this.typeSupported=mr,this.ISGenerated=!1,cr===null){var _r=navigator.userAgent||"",yr=_r.match(/Chrome\/(\d+)/i);cr=yr?parseInt(yr[1]):0}if(Kt===null){var gr=navigator.userAgent.match(/Safari\/(\d+)/i);Kt=gr?parseInt(gr[1]):0}}var lr=xr.prototype;return lr.destroy=function(){},lr.resetTimeStamp=function(ur){Wt.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=ur},lr.resetNextTimestamp=function(){Wt.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},lr.resetInitSegment=function(){Wt.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},lr.getVideoStartPts=function(ur){var mr=!1,ir=ur.reduce(function(_r,yr){var gr=yr.pts-_r;return gr<-4294967296?(mr=!0,rr(_r,yr.pts)):gr>0?_r:yr.pts},ur[0].pts);return mr&&Wt.logger.debug("PTS rollover detected"),ir},lr.remux=function(ur,mr,ir,_r,yr,gr,Sr,Tr){var br,Ar,Or,Ir,Cr,Rr,Pr=yr,wr=yr,Dr=ur.pid>-1,kr=mr.pid>-1,Fr=mr.samples.length,Br=ur.samples.length>0,Kr=Sr&&Fr>0||Fr>1,Vr=(!Dr||Br)&&(!kr||Kr)||this.ISGenerated||Sr;if(Vr){this.ISGenerated||(Or=this.generateIS(ur,mr,yr));var Gr=this.isVideoContiguous,jr=-1,zr;if(Kr&&(jr=ar(mr.samples),!Gr&&this.config.forceKeyFrameOnDiscontinuity))if(Rr=!0,jr>0){Wt.logger.warn("[mp4-remuxer]: Dropped "+jr+" out of "+Fr+" video samples due to a missing keyframe");var Xr=this.getVideoStartPts(mr.samples);mr.samples=mr.samples.slice(jr),mr.dropped+=jr,wr+=(mr.samples[0].pts-Xr)/mr.inputTimeScale,zr=wr}else jr===-1&&(Wt.logger.warn("[mp4-remuxer]: No keyframe found out of "+Fr+" video samples"),Rr=!1);if(this.ISGenerated){if(Br&&Kr){var Zr=this.getVideoStartPts(mr.samples),ln=rr(ur.samples[0].pts,Zr)-Zr,Qr=ln/mr.inputTimeScale;Pr+=Math.max(0,Qr),wr+=Math.max(0,-Qr)}if(Br){if(ur.samplerate||(Wt.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),Or=this.generateIS(ur,mr,yr)),Ar=this.remuxAudio(ur,Pr,this.isAudioContiguous,gr,kr||Kr||Tr===nr.PlaylistLevelType.AUDIO?wr:void 0),Kr){var an=Ar?Ar.endPTS-Ar.startPTS:0;mr.inputTimeScale||(Wt.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),Or=this.generateIS(ur,mr,yr)),br=this.remuxVideo(mr,wr,Gr,an)}}else Kr&&(br=this.remuxVideo(mr,wr,Gr,0));br&&(br.firstKeyFrame=jr,br.independent=jr!==-1,br.firstKeyFramePTS=zr)}}return this.ISGenerated&&(ir.samples.length&&(Cr=sr(ir,yr,this._initPTS,this._initDTS)),_r.samples.length&&(Ir=dr(_r,yr,this._initPTS))),{audio:Ar,video:br,initSegment:Or,independent:Rr,text:Ir,id3:Cr}},lr.generateIS=function(ur,mr,ir){var _r=ur.samples,yr=mr.samples,gr=this.typeSupported,Sr={},Tr=!(0,Rt.isFiniteNumber)(this._initPTS),br="audio/mp4",Ar,Or,Ir;if(Tr&&(Ar=Or=1/0),ur.config&&_r.length){switch(ur.timescale=ur.samplerate,ur.segmentCodec){case"mp3":gr.mpeg?(br="audio/mpeg",ur.codec=""):gr.mp3&&(ur.codec="mp3");break}Sr.audio={id:"audio",container:br,codec:ur.codec,initSegment:ur.segmentCodec==="mp3"&&gr.mpeg?new Uint8Array(0):kt.default.initSegment([ur]),metadata:{channelCount:ur.channelCount}},Tr&&(Ir=ur.inputTimeScale,Ar=Or=_r[0].pts-Math.round(Ir*ir))}if(mr.sps&&mr.pps&&yr.length&&(mr.timescale=mr.inputTimeScale,Sr.video={id:"main",container:"video/mp4",codec:mr.codec,initSegment:kt.default.initSegment([mr]),metadata:{width:mr.width,height:mr.height}},Tr)){Ir=mr.inputTimeScale;var Cr=this.getVideoStartPts(yr),Rr=Math.round(Ir*ir);Or=Math.min(Or,rr(yr[0].dts,Cr)-Rr),Ar=Math.min(Ar,Cr-Rr)}if(Object.keys(Sr).length)return this.ISGenerated=!0,Tr&&(this._initPTS=Ar,this._initDTS=Or),{tracks:Sr,initPTS:Ar,timescale:Ir}},lr.remuxVideo=function(ur,mr,ir,_r){var yr=ur.inputTimeScale,gr=ur.samples,Sr=[],Tr=gr.length,br=this._initPTS,Ar=this.nextAvcDts,Or=8,Ir=this.videoSampleDuration,Cr,Rr,Pr=Number.POSITIVE_INFINITY,wr=Number.NEGATIVE_INFINITY,Dr=!1;if(!ir||Ar===null){var kr=mr*yr,Fr=gr[0].pts-rr(gr[0].dts,gr[0].pts);Ar=kr-Fr}for(var Br=0;Br<Tr;Br++){var Kr=gr[Br];Kr.pts=rr(Kr.pts-br,Ar),Kr.dts=rr(Kr.dts-br,Ar),Kr.dts<gr[Br>0?Br-1:Br].dts&&(Dr=!0)}Dr&&gr.sort(function(Nr,Hr){var Wr=Nr.dts-Hr.dts,dn=Nr.pts-Hr.pts;return Wr||dn}),Cr=gr[0].dts,Rr=gr[gr.length-1].dts;var Vr=Rr-Cr,Gr=Vr?Math.round(Vr/(Tr-1)):Ir||ur.inputTimeScale/30;if(ir){var jr=Cr-Ar,zr=jr>Gr,Xr=jr<-1;if((zr||Xr)&&(zr?Wt.logger.warn("AVC: "+(0,Ut.toMsFromMpegTsClock)(jr,!0)+" ms ("+jr+"dts) hole between fragments detected, filling it"):Wt.logger.warn("AVC: "+(0,Ut.toMsFromMpegTsClock)(-jr,!0)+" ms ("+jr+"dts) overlapping between fragments detected"),!Xr||Ar>gr[0].pts)){Cr=Ar;var Zr=gr[0].pts-jr;gr[0].dts=Cr,gr[0].pts=Zr,Wt.logger.log("Video: First PTS/DTS adjusted: "+(0,Ut.toMsFromMpegTsClock)(Zr,!0)+"/"+(0,Ut.toMsFromMpegTsClock)(Cr,!0)+", delta: "+(0,Ut.toMsFromMpegTsClock)(jr,!0)+" ms")}}Cr=Math.max(0,Cr);for(var ln=0,Qr=0,an=0;an<Tr;an++){for(var Jr=gr[an],cn=Jr.units,un=cn.length,vn=0,hn=0;hn<un;hn++)vn+=cn[hn].data.length;Qr+=vn,ln+=un,Jr.length=vn,Jr.dts=Math.max(Jr.dts,Cr),Pr=Math.min(Jr.pts,Pr),wr=Math.max(Jr.pts,wr)}Rr=gr[Tr-1].dts;var fn=Qr+4*ln+8,pn;try{pn=new Uint8Array(fn)}catch{this.observer.emit(Nt.Events.ERROR,Nt.Events.ERROR,{type:zt.ErrorTypes.MUX_ERROR,details:zt.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:fn,reason:"fail allocating video mdat "+fn});return}var Tn=new DataView(pn.buffer);Tn.setUint32(0,fn),pn.set(kt.default.types.mdat,4);for(var $n=!1,Ln=Number.POSITIVE_INFINITY,Dn=Number.POSITIVE_INFINITY,mn=Number.NEGATIVE_INFINITY,On=Number.NEGATIVE_INFINITY,xn=0;xn<Tr;xn++){for(var tn=gr[xn],En=tn.units,Mn=0,gn=0,In=En.length;gn<In;gn++){var bn=En[gn],Kn=bn.data,Hn=bn.data.byteLength;Tn.setUint32(Or,Hn),Or+=4,pn.set(Kn,Or),Or+=Hn,Mn+=4+Hn}var Nn=void 0;if(xn<Tr-1)Ir=gr[xn+1].dts-tn.dts,Nn=gr[xn+1].pts-tn.pts;else{var Vn=this.config,Gn=xn>0?tn.dts-gr[xn-1].dts:Gr;if(Nn=xn>0?tn.pts-gr[xn-1].pts:Gr,Vn.stretchShortVideoTrack&&this.nextAudioPts!==null){var yn=Math.floor(Vn.maxBufferHole*yr),Cn=(_r?Pr+_r*yr:this.nextAudioPts)-tn.pts;Cn>yn?(Ir=Cn-Gn,Ir<0?Ir=Gn:$n=!0,Wt.logger.log("[mp4-remuxer]: It is approximately "+Cn/90+" ms to the next segment; using duration "+Ir/90+" ms for the last video frame.")):Ir=Gn}else Ir=Gn}var Wn=Math.round(tn.pts-tn.dts);Ln=Math.min(Ln,Ir),mn=Math.max(mn,Ir),Dn=Math.min(Dn,Nn),On=Math.max(On,Nn),Sr.push(new fr(tn.key,Ir,Mn,Wn))}if(Sr.length){if(cr){if(cr<70){var zn=Sr[0].flags;zn.dependsOn=2,zn.isNonSync=0}}else if(Kt&&On-Dn<mn-Ln&&Gr/mn<.025&&Sr[0].cts===0){Wt.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var Xn=Cr,Rn=0,jn=Sr.length;Rn<jn;Rn++){var qn=Xn+Sr[Rn].duration,Zn=Xn+Sr[Rn].cts;if(Rn<jn-1){var Qn=qn+Sr[Rn+1].cts;Sr[Rn].duration=Qn-Zn}else Sr[Rn].duration=Rn?Sr[Rn-1].duration:Gr;Sr[Rn].cts=0,Xn=qn}}}console.assert(Ir!==null,"mp4SampleDuration must be computed"),Ir=$n||!Ir?Gr:Ir,this.nextAvcDts=Ar=Rr+Ir,this.videoSampleDuration=Ir,this.isVideoContiguous=!0;var Jn=kt.default.moof(ur.sequenceNumber++,Cr,Ht({},ur,{samples:Sr})),va="video",qr={data1:Jn,data2:pn,startPTS:Pr/yr,endPTS:(wr+Ir)/yr,startDTS:Cr/yr,endDTS:Ar/yr,type:va,hasAudio:!1,hasVideo:!0,nb:Sr.length,dropped:ur.dropped};return ur.samples=[],ur.dropped=0,console.assert(pn.length,"MDAT length must not be zero"),qr},lr.remuxAudio=function(ur,mr,ir,_r,yr){var gr=ur.inputTimeScale,Sr=ur.samplerate?ur.samplerate:gr,Tr=gr/Sr,br=ur.segmentCodec==="aac"?Ft:tr,Ar=br*Tr,Or=this._initPTS,Ir=ur.segmentCodec==="mp3"&&this.typeSupported.mpeg,Cr=[],Rr=yr!==void 0,Pr=ur.samples,wr=Ir?0:8,Dr=this.nextAudioPts||-1,kr=mr*gr;if(this.isAudioContiguous=ir=ir||Pr.length&&Dr>0&&(_r&&Math.abs(kr-Dr)<9e3||Math.abs(rr(Pr[0].pts-Or,kr)-Dr)<20*Ar),Pr.forEach(function(bn){bn.pts=rr(bn.pts-Or,kr)}),!ir||Dr<0){if(Pr=Pr.filter(function(bn){return bn.pts>=0}),!Pr.length)return;yr===0?Dr=0:_r&&!Rr?Dr=Math.max(0,kr):Dr=Pr[0].pts}if(ur.segmentCodec==="aac")for(var Fr=this.config.maxAudioFramesDrift,Br=0,Kr=Dr;Br<Pr.length;Br++){var Vr=Pr[Br],Gr=Vr.pts,jr=Gr-Kr,zr=Math.abs(1e3*jr/gr);if(jr<=-Fr*Ar&&Rr)Br===0&&(Wt.logger.warn("Audio frame @ "+(Gr/gr).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*jr/gr)+" ms."),this.nextAudioPts=Dr=Kr=Gr);else if(jr>=Fr*Ar&&zr<Bt&&Rr){var Xr=Math.round(jr/Ar);Kr=Gr-Xr*Ar,Kr<0&&(Xr--,Kr+=Ar),Br===0&&(this.nextAudioPts=Dr=Kr),Wt.logger.warn("[mp4-remuxer]: Injecting "+Xr+" audio frame @ "+(Kr/gr).toFixed(3)+"s due to "+Math.round(1e3*jr/gr)+" ms gap.");for(var Zr=0;Zr<Xr;Zr++){var ln=Math.max(Kr,0),Qr=Dt.default.getSilentFrame(ur.manifestCodec||ur.codec,ur.channelCount);Qr||(Wt.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Qr=Vr.unit.subarray()),Pr.splice(Br,0,{unit:Qr,pts:ln}),Kr+=Ar,Br++}}Vr.pts=Kr,Kr+=Ar}for(var an=null,Jr=null,cn,un=0,vn=Pr.length;vn--;)un+=Pr[vn].unit.byteLength;for(var hn=0,fn=Pr.length;hn<fn;hn++){var pn=Pr[hn],Tn=pn.unit,$n=pn.pts;if(Jr!==null){var Ln=Cr[hn-1];Ln.duration=Math.round(($n-Jr)/Tr)}else if(ir&&ur.segmentCodec==="aac"&&($n=Dr),an=$n,un>0){un+=wr;try{cn=new Uint8Array(un)}catch{this.observer.emit(Nt.Events.ERROR,Nt.Events.ERROR,{type:zt.ErrorTypes.MUX_ERROR,details:zt.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:un,reason:"fail allocating audio mdat "+un});return}if(!Ir){var Dn=new DataView(cn.buffer);Dn.setUint32(0,un),cn.set(kt.default.types.mdat,4)}}else return;cn.set(Tn,wr);var mn=Tn.byteLength;wr+=mn,Cr.push(new fr(!0,br,mn,0)),Jr=$n}var On=Cr.length;if(On){var xn=Cr[Cr.length-1];this.nextAudioPts=Dr=Jr+Tr*xn.duration;var tn=Ir?new Uint8Array(0):kt.default.moof(ur.sequenceNumber++,an/Tr,Ht({},ur,{samples:Cr}));ur.samples=[];var En=an/gr,Mn=Dr/gr,gn="audio",In={data1:tn,data2:cn,startPTS:En,endPTS:Mn,startDTS:En,endDTS:Mn,type:gn,hasAudio:!0,hasVideo:!1,nb:On};return this.isAudioContiguous=!0,console.assert(cn.length,"MDAT length must not be zero"),In}},lr.remuxEmptyAudio=function(ur,mr,ir,_r){var yr=ur.inputTimeScale,gr=ur.samplerate?ur.samplerate:yr,Sr=yr/gr,Tr=this.nextAudioPts,br=(Tr!==null?Tr:_r.startDTS*yr)+this._initDTS,Ar=_r.endDTS*yr+this._initDTS,Or=Sr*Ft,Ir=Math.ceil((Ar-br)/Or),Cr=Dt.default.getSilentFrame(ur.manifestCodec||ur.codec,ur.channelCount);if(Wt.logger.warn("[mp4-remuxer]: remux empty Audio"),!Cr){Wt.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}for(var Rr=[],Pr=0;Pr<Ir;Pr++){var wr=br+Pr*Or;Rr.push({unit:Cr,pts:wr,dts:wr})}return ur.samples=Rr,this.remuxAudio(ur,mr,ir,!1)},xr}();function rr(xr,lr){var hr;if(lr===null)return xr;for(lr<xr?hr=-8589934592:hr=8589934592;Math.abs(xr-lr)>4294967296;)xr+=hr;return xr}function ar(xr){for(var lr=0;lr<xr.length;lr++)if(xr[lr].key)return lr;return-1}function sr(xr,lr,hr,ur){var mr=xr.samples.length;if(mr){for(var ir=xr.inputTimeScale,_r=0;_r<mr;_r++){var yr=xr.samples[_r];yr.pts=rr(yr.pts-hr,lr*ir)/ir,yr.dts=rr(yr.dts-ur,lr*ir)/ir}var gr=xr.samples;return xr.samples=[],{samples:gr}}}function dr(xr,lr,hr){var ur=xr.samples.length;if(ur){for(var mr=xr.inputTimeScale,ir=0;ir<ur;ir++){var _r=xr.samples[ir];_r.pts=rr(_r.pts-hr,lr*mr)/mr}xr.samples.sort(function(gr,Sr){return gr.pts-Sr.pts});var yr=xr.samples;return xr.samples=[],{samples:yr}}}var fr=function(lr,hr,ur,mr){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=hr,this.size=ur,this.cts=mr,this.flags=new pr(lr)},pr=function(lr){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=lr?2:1,this.isNonSync=lr?0:1}},"./src/remux/passthrough-remuxer.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Ut});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/remux/mp4-remuxer.ts"),kt=Ct("./src/utils/mp4-tools.ts"),Nt=Ct("./src/loader/fragment.ts"),zt=Ct("./src/utils/logger.ts"),Wt=function(){function Ht(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var Bt=Ht.prototype;return Bt.destroy=function(){},Bt.resetTimeStamp=function(tr){this.initPTS=tr,this.lastEndTime=null},Bt.resetNextTimestamp=function(){this.lastEndTime=null},Bt.resetInitSegment=function(tr,cr,Kt,Zt){this.audioCodec=cr,this.videoCodec=Kt,this.generateInitSegment((0,kt.patchEncyptionData)(tr,Zt)),this.emitInitSegment=!0},Bt.generateInitSegment=function(tr){var cr=this.audioCodec,Kt=this.videoCodec;if(!tr||!tr.byteLength){this.initTracks=void 0,this.initData=void 0;return}var Zt=this.initData=(0,kt.parseInitSegment)(tr);cr||(cr=nr(Zt.audio,Nt.ElementaryStreamTypes.AUDIO)),Kt||(Kt=nr(Zt.video,Nt.ElementaryStreamTypes.VIDEO));var rr={};Zt.audio&&Zt.video?rr.audiovideo={container:"video/mp4",codec:cr+","+Kt,initSegment:tr,id:"main"}:Zt.audio?rr.audio={container:"audio/mp4",codec:cr,initSegment:tr,id:"audio"}:Zt.video?rr.video={container:"video/mp4",codec:Kt,initSegment:tr,id:"main"}:zt.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=rr},Bt.remux=function(tr,cr,Kt,Zt,rr){var ar,sr=this.initPTS,dr=this.lastEndTime,fr={audio:void 0,video:void 0,text:Zt,id3:Kt,initSegment:void 0};(0,Rt.isFiniteNumber)(dr)||(dr=this.lastEndTime=rr||0);var pr=cr.samples;if(!pr||!pr.length)return fr;var xr={initPTS:void 0,timescale:1},lr=this.initData;if((!lr||!lr.length)&&(this.generateInitSegment(pr),lr=this.initData),!lr||!lr.length)return zt.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),fr;this.emitInitSegment&&(xr.tracks=this.initTracks,this.emitInitSegment=!1);var hr=(0,kt.getStartDTS)(lr,pr);(0,Rt.isFiniteNumber)(sr)||(this.initPTS=xr.initPTS=sr=hr-rr);var ur=(0,kt.getDuration)(pr,lr),mr=tr?hr-sr:dr,ir=mr+ur;(0,kt.offsetStartDTS)(lr,pr,sr),ur>0?this.lastEndTime=ir:(zt.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var _r=!!lr.audio,yr=!!lr.video,gr="";_r&&(gr+="audio"),yr&&(gr+="video");var Sr={data1:pr,startPTS:mr,startDTS:mr,endPTS:ir,endDTS:ir,type:gr,hasAudio:_r,hasVideo:yr,nb:1,dropped:0};fr.audio=Sr.type==="audio"?Sr:void 0,fr.video=Sr.type!=="audio"?Sr:void 0,fr.initSegment=xr;var Tr=(ar=this.initPTS)!=null?ar:0;return fr.id3=(0,Dt.flushTextTrackMetadataCueSamples)(Kt,rr,Tr,Tr),Zt.samples.length&&(fr.text=(0,Dt.flushTextTrackUserdataCueSamples)(Zt,rr,Tr)),fr},Ht}();function nr(Ht,Bt){var Ft=Ht==null?void 0:Ht.codec;return Ft&&Ft.length>4?Ft:Ft==="hvc1"||Ft==="hev1"?"hvc1.1.c.L120.90":Ft==="av01"?"av01.0.04M.08":Ft==="avc1"||Bt===Nt.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const Ut=Wt},"./src/task-loop.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Rt});var Rt=function(){function Dt(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var kt=Dt.prototype;return kt.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},kt.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},kt.onHandlerDestroyed=function(){},kt.hasInterval=function(){return!!this._tickInterval},kt.hasNextTick=function(){return!!this._tickTimer},kt.setInterval=function(zt){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,zt),!0)},kt.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},kt.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},kt.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},kt.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},kt.doTick=function(){},Dt}()},"./src/types/cmcd.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{CMCDObjectType:()=>Dt,CMCDStreamType:()=>Nt,CMCDStreamingFormat:()=>kt,CMCDVersion:()=>Rt});var Rt=1,Dt;(function(zt){zt.MANIFEST="m",zt.AUDIO="a",zt.VIDEO="v",zt.MUXED="av",zt.INIT="i",zt.CAPTION="c",zt.TIMED_TEXT="tt",zt.KEY="k",zt.OTHER="o"})(Dt||(Dt={}));var kt;(function(zt){zt.DASH="d",zt.HLS="h",zt.SMOOTH="s",zt.OTHER="o"})(kt||(kt={}));var Nt;(function(zt){zt.VOD="v",zt.LIVE="l"})(Nt||(Nt={}))},"./src/types/demuxer.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{MetadataSchema:()=>Rt});var Rt;(function(Dt){Dt.audioId3="org.id3",Dt.dateRange="com.apple.quicktime.HLS",Dt.emsg="https://aomedia.org/emsg/ID3"})(Rt||(Rt={}))},"./src/types/level.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{HdcpLevels:()=>zt,HlsSkip:()=>Wt,HlsUrlParameters:()=>Ut,Level:()=>Ht,getSkipValue:()=>nr});function Rt(Bt,Ft){for(var tr=0;tr<Ft.length;tr++){var cr=Ft[tr];cr.enumerable=cr.enumerable||!1,cr.configurable=!0,"value"in cr&&(cr.writable=!0),Object.defineProperty(Bt,kt(cr.key),cr)}}function Dt(Bt,Ft,tr){return Ft&&Rt(Bt.prototype,Ft),tr&&Rt(Bt,tr),Object.defineProperty(Bt,"prototype",{writable:!1}),Bt}function kt(Bt){var Ft=Nt(Bt,"string");return typeof Ft=="symbol"?Ft:String(Ft)}function Nt(Bt,Ft){if(typeof Bt!="object"||Bt===null)return Bt;var tr=Bt[Symbol.toPrimitive];if(tr!==void 0){var cr=tr.call(Bt,Ft||"default");if(typeof cr!="object")return cr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ft==="string"?String:Number)(Bt)}var zt=["NONE","TYPE-0","TYPE-1","TYPE-2",null],Wt;(function(Bt){Bt.No="",Bt.Yes="YES",Bt.v2="v2"})(Wt||(Wt={}));function nr(Bt,Ft){var tr=Bt.canSkipUntil,cr=Bt.canSkipDateRanges,Kt=Bt.endSN,Zt=Ft!==void 0?Ft-Kt:0;return tr&&Zt<tr?cr?Wt.v2:Wt.Yes:Wt.No}var Ut=function(){function Bt(tr,cr,Kt){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=tr,this.part=cr,this.skip=Kt}var Ft=Bt.prototype;return Ft.addDirectives=function(cr){var Kt=new self.URL(cr);return this.msn!==void 0&&Kt.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&Kt.searchParams.set("_HLS_part",this.part.toString()),this.skip&&Kt.searchParams.set("_HLS_skip",this.skip),Kt.href},Bt}(),Ht=function(){function Bt(Ft){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[Ft.url],this.attrs=Ft.attrs,this.bitrate=Ft.bitrate,Ft.details&&(this.details=Ft.details),this.id=Ft.id||0,this.name=Ft.name,this.width=Ft.width||0,this.height=Ft.height||0,this.audioCodec=Ft.audioCodec,this.videoCodec=Ft.videoCodec,this.unknownCodecs=Ft.unknownCodecs,this.codecSet=[Ft.videoCodec,Ft.audioCodec].filter(function(tr){return tr}).join(",").replace(/\.[^.,]+/g,"")}return Dt(Bt,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(tr){var cr=tr%this.url.length;this._urlId!==cr&&(this.details=void 0,this._urlId=cr)}}]),Bt}()},"./src/types/loader.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{PlaylistContextType:()=>Rt,PlaylistLevelType:()=>Dt});var Rt;(function(kt){kt.MANIFEST="manifest",kt.LEVEL="level",kt.AUDIO_TRACK="audioTrack",kt.SUBTITLE_TRACK="subtitleTrack"})(Rt||(Rt={}));var Dt;(function(kt){kt.MAIN="main",kt.AUDIO="audio",kt.SUBTITLE="subtitle"})(Dt||(Dt={}))},"./src/types/transmuxer.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{ChunkMetadata:()=>Rt});var Rt=function(Nt,zt,Wt,nr,Ut,Ht){nr===void 0&&(nr=0),Ut===void 0&&(Ut=-1),Ht===void 0&&(Ht=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Dt(),this.buffering={audio:Dt(),video:Dt(),audiovideo:Dt()},this.level=Nt,this.sn=zt,this.id=Wt,this.size=nr,this.part=Ut,this.partial=Ht};function Dt(){return{start:0,executeStart:0,executeEnd:0,end:0}}},"./src/utils/attr-list.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{AttrList:()=>kt});var Rt=/^(\d+)x(\d+)$/,Dt=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,kt=function(){function Nt(Wt){typeof Wt=="string"&&(Wt=Nt.parseAttrList(Wt));for(var nr in Wt)Wt.hasOwnProperty(nr)&&(this[nr]=Wt[nr])}var zt=Nt.prototype;return zt.decimalInteger=function(nr){var Ut=parseInt(this[nr],10);return Ut>Number.MAX_SAFE_INTEGER?1/0:Ut},zt.hexadecimalInteger=function(nr){if(this[nr]){var Ut=(this[nr]||"0x").slice(2);Ut=(Ut.length&1?"0":"")+Ut;for(var Ht=new Uint8Array(Ut.length/2),Bt=0;Bt<Ut.length/2;Bt++)Ht[Bt]=parseInt(Ut.slice(Bt*2,Bt*2+2),16);return Ht}else return null},zt.hexadecimalIntegerAsNumber=function(nr){var Ut=parseInt(this[nr],16);return Ut>Number.MAX_SAFE_INTEGER?1/0:Ut},zt.decimalFloatingPoint=function(nr){return parseFloat(this[nr])},zt.optionalFloat=function(nr,Ut){var Ht=this[nr];return Ht?parseFloat(Ht):Ut},zt.enumeratedString=function(nr){return this[nr]},zt.bool=function(nr){return this[nr]==="YES"},zt.decimalResolution=function(nr){var Ut=Rt.exec(this[nr]);if(Ut!==null)return{width:parseInt(Ut[1],10),height:parseInt(Ut[2],10)}},Nt.parseAttrList=function(nr){var Ut,Ht={},Bt='"';for(Dt.lastIndex=0;(Ut=Dt.exec(nr))!==null;){var Ft=Ut[2];Ft.indexOf(Bt)===0&&Ft.lastIndexOf(Bt)===Ft.length-1&&(Ft=Ft.slice(1,-1)),Ht[Ut[1]]=Ft}return Ht},Nt}()},"./src/utils/binary-search.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Dt});var Rt={search:function(Nt,zt){for(var Wt=0,nr=Nt.length-1,Ut=null,Ht=null;Wt<=nr;){Ut=(Wt+nr)/2|0,Ht=Nt[Ut];var Bt=zt(Ht);if(Bt>0)Wt=Ut+1;else if(Bt<0)nr=Ut-1;else return Ht}return null}};const Dt=Rt},"./src/utils/buffer-helper.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{BufferHelper:()=>kt});var Rt=Ct("./src/utils/logger.ts"),Dt={length:0,start:function(){return 0},end:function(){return 0}},kt=function(){function Nt(){}return Nt.isBuffered=function(Wt,nr){try{if(Wt){for(var Ut=Nt.getBuffered(Wt),Ht=0;Ht<Ut.length;Ht++)if(nr>=Ut.start(Ht)&&nr<=Ut.end(Ht))return!0}}catch{}return!1},Nt.bufferInfo=function(Wt,nr,Ut){try{if(Wt){var Ht=Nt.getBuffered(Wt),Bt=[],Ft;for(Ft=0;Ft<Ht.length;Ft++)Bt.push({start:Ht.start(Ft),end:Ht.end(Ft)});return this.bufferedInfo(Bt,nr,Ut)}}catch{}return{len:0,start:nr,end:nr,nextStart:void 0}},Nt.bufferedInfo=function(Wt,nr,Ut){nr=Math.max(0,nr),Wt.sort(function(fr,pr){var xr=fr.start-pr.start;return xr||pr.end-fr.end});var Ht=[];if(Ut)for(var Bt=0;Bt<Wt.length;Bt++){var Ft=Ht.length;if(Ft){var tr=Ht[Ft-1].end;Wt[Bt].start-tr<Ut?Wt[Bt].end>tr&&(Ht[Ft-1].end=Wt[Bt].end):Ht.push(Wt[Bt])}else Ht.push(Wt[Bt])}else Ht=Wt;for(var cr=0,Kt,Zt=nr,rr=nr,ar=0;ar<Ht.length;ar++){var sr=Ht[ar].start,dr=Ht[ar].end;if(nr+Ut>=sr&&nr<dr)Zt=sr,rr=dr,cr=rr-nr;else if(nr+Ut<sr){Kt=sr;break}}return{len:cr,start:Zt||0,end:rr||0,nextStart:Kt}},Nt.getBuffered=function(Wt){try{return Wt.buffered}catch(nr){return Rt.logger.log("failed to get media.buffered",nr),Dt}},Nt}()},"./src/utils/cea-608-parser.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{CaptionScreen:()=>ar,Row:()=>rr,default:()=>lr});var Rt=Ct("./src/utils/logger.ts"),Dt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},kt=function(ur){var mr=ur;return Dt.hasOwnProperty(ur)&&(mr=Dt[ur]),String.fromCharCode(mr)},Nt=15,zt=100,Wt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},nr={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Ut={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ht={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Bt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Ft;(function(hr){hr[hr.ERROR=0]="ERROR",hr[hr.TEXT=1]="TEXT",hr[hr.WARNING=2]="WARNING",hr[hr.INFO=2]="INFO",hr[hr.DEBUG=3]="DEBUG",hr[hr.DATA=3]="DATA"})(Ft||(Ft={}));var tr=function(){function hr(){this.time=null,this.verboseLevel=Ft.ERROR}var ur=hr.prototype;return ur.log=function(ir,_r){if(this.verboseLevel>=ir){var yr=typeof _r=="function"?_r():_r;Rt.logger.log(this.time+" ["+ir+"] "+yr)}},hr}(),cr=function(ur){for(var mr=[],ir=0;ir<ur.length;ir++)mr.push(ur[ir].toString(16));return mr},Kt=function(){function hr(mr,ir,_r,yr,gr){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=mr||"white",this.underline=ir||!1,this.italics=_r||!1,this.background=yr||"black",this.flash=gr||!1}var ur=hr.prototype;return ur.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},ur.setStyles=function(ir){for(var _r=["foreground","underline","italics","background","flash"],yr=0;yr<_r.length;yr++){var gr=_r[yr];ir.hasOwnProperty(gr)&&(this[gr]=ir[gr])}},ur.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},ur.equals=function(ir){return this.foreground===ir.foreground&&this.underline===ir.underline&&this.italics===ir.italics&&this.background===ir.background&&this.flash===ir.flash},ur.copy=function(ir){this.foreground=ir.foreground,this.underline=ir.underline,this.italics=ir.italics,this.background=ir.background,this.flash=ir.flash},ur.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},hr}(),Zt=function(){function hr(mr,ir,_r,yr,gr,Sr){this.uchar=void 0,this.penState=void 0,this.uchar=mr||" ",this.penState=new Kt(ir,_r,yr,gr,Sr)}var ur=hr.prototype;return ur.reset=function(){this.uchar=" ",this.penState.reset()},ur.setChar=function(ir,_r){this.uchar=ir,this.penState.copy(_r)},ur.setPenState=function(ir){this.penState.copy(ir)},ur.equals=function(ir){return this.uchar===ir.uchar&&this.penState.equals(ir.penState)},ur.copy=function(ir){this.uchar=ir.uchar,this.penState.copy(ir.penState)},ur.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},hr}(),rr=function(){function hr(mr){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var ir=0;ir<zt;ir++)this.chars.push(new Zt);this.logger=mr,this.pos=0,this.currPenState=new Kt}var ur=hr.prototype;return ur.equals=function(ir){for(var _r=!0,yr=0;yr<zt;yr++)if(!this.chars[yr].equals(ir.chars[yr])){_r=!1;break}return _r},ur.copy=function(ir){for(var _r=0;_r<zt;_r++)this.chars[_r].copy(ir.chars[_r])},ur.isEmpty=function(){for(var ir=!0,_r=0;_r<zt;_r++)if(!this.chars[_r].isEmpty()){ir=!1;break}return ir},ur.setCursor=function(ir){this.pos!==ir&&(this.pos=ir),this.pos<0?(this.logger.log(Ft.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>zt&&(this.logger.log(Ft.DEBUG,"Too large cursor position "+this.pos),this.pos=zt)},ur.moveCursor=function(ir){var _r=this.pos+ir;if(ir>1)for(var yr=this.pos+1;yr<_r+1;yr++)this.chars[yr].setPenState(this.currPenState);this.setCursor(_r)},ur.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},ur.insertChar=function(ir){var _r=this;ir>=144&&this.backSpace();var yr=kt(ir);if(this.pos>=zt){this.logger.log(Ft.ERROR,function(){return"Cannot insert "+ir.toString(16)+" ("+yr+") at position "+_r.pos+". Skipping it!"});return}this.chars[this.pos].setChar(yr,this.currPenState),this.moveCursor(1)},ur.clearFromPos=function(ir){var _r;for(_r=ir;_r<zt;_r++)this.chars[_r].reset()},ur.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},ur.clearToEndOfRow=function(){this.clearFromPos(this.pos)},ur.getTextString=function(){for(var ir=[],_r=!0,yr=0;yr<zt;yr++){var gr=this.chars[yr].uchar;gr!==" "&&(_r=!1),ir.push(gr)}return _r?"":ir.join("")},ur.setPenStyles=function(ir){this.currPenState.setStyles(ir);var _r=this.chars[this.pos];_r.setPenState(this.currPenState)},hr}(),ar=function(){function hr(mr){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var ir=0;ir<Nt;ir++)this.rows.push(new rr(mr));this.logger=mr,this.currRow=Nt-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var ur=hr.prototype;return ur.reset=function(){for(var ir=0;ir<Nt;ir++)this.rows[ir].clear();this.currRow=Nt-1},ur.equals=function(ir){for(var _r=!0,yr=0;yr<Nt;yr++)if(!this.rows[yr].equals(ir.rows[yr])){_r=!1;break}return _r},ur.copy=function(ir){for(var _r=0;_r<Nt;_r++)this.rows[_r].copy(ir.rows[_r])},ur.isEmpty=function(){for(var ir=!0,_r=0;_r<Nt;_r++)if(!this.rows[_r].isEmpty()){ir=!1;break}return ir},ur.backSpace=function(){var ir=this.rows[this.currRow];ir.backSpace()},ur.clearToEndOfRow=function(){var ir=this.rows[this.currRow];ir.clearToEndOfRow()},ur.insertChar=function(ir){var _r=this.rows[this.currRow];_r.insertChar(ir)},ur.setPen=function(ir){var _r=this.rows[this.currRow];_r.setPenStyles(ir)},ur.moveCursor=function(ir){var _r=this.rows[this.currRow];_r.moveCursor(ir)},ur.setCursor=function(ir){this.logger.log(Ft.INFO,"setCursor: "+ir);var _r=this.rows[this.currRow];_r.setCursor(ir)},ur.setPAC=function(ir){this.logger.log(Ft.INFO,function(){return"pacData = "+JSON.stringify(ir)});var _r=ir.row-1;if(this.nrRollUpRows&&_r<this.nrRollUpRows-1&&(_r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==_r){for(var yr=0;yr<Nt;yr++)this.rows[yr].clear();var gr=this.currRow+1-this.nrRollUpRows,Sr=this.lastOutputScreen;if(Sr){var Tr=Sr.rows[gr].cueStartTime,br=this.logger.time;if(Tr&&br!==null&&Tr<br)for(var Ar=0;Ar<this.nrRollUpRows;Ar++)this.rows[_r-this.nrRollUpRows+Ar+1].copy(Sr.rows[gr+Ar])}}this.currRow=_r;var Or=this.rows[this.currRow];if(ir.indent!==null){var Ir=ir.indent,Cr=Math.max(Ir-1,0);Or.setCursor(ir.indent),ir.color=Or.chars[Cr].penState.foreground}var Rr={foreground:ir.color,underline:ir.underline,italics:ir.italics,background:"black",flash:!1};this.setPen(Rr)},ur.setBkgData=function(ir){this.logger.log(Ft.INFO,function(){return"bkgData = "+JSON.stringify(ir)}),this.backSpace(),this.setPen(ir),this.insertChar(32)},ur.setRollUpRows=function(ir){this.nrRollUpRows=ir},ur.rollUp=function(){var ir=this;if(this.nrRollUpRows===null){this.logger.log(Ft.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(Ft.TEXT,function(){return ir.getDisplayText()});var _r=this.currRow+1-this.nrRollUpRows,yr=this.rows.splice(_r,1)[0];yr.clear(),this.rows.splice(this.currRow,0,yr),this.logger.log(Ft.INFO,"Rolling up")},ur.getDisplayText=function(ir){ir=ir||!1;for(var _r=[],yr="",gr=-1,Sr=0;Sr<Nt;Sr++){var Tr=this.rows[Sr].getTextString();Tr&&(gr=Sr+1,ir?_r.push("Row "+gr+": '"+Tr+"'"):_r.push(Tr.trim()))}return _r.length>0&&(ir?yr="["+_r.join(" | ")+"]":yr=_r.join(`
`)),yr},ur.getTextAndFormat=function(){return this.rows},hr}(),sr=function(){function hr(mr,ir,_r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=mr,this.outputFilter=ir,this.mode=null,this.verbose=0,this.displayedMemory=new ar(_r),this.nonDisplayedMemory=new ar(_r),this.lastOutputScreen=new ar(_r),this.currRollUpRow=this.displayedMemory.rows[Nt-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=_r}var ur=hr.prototype;return ur.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Nt-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},ur.getHandler=function(){return this.outputFilter},ur.setHandler=function(ir){this.outputFilter=ir},ur.setPAC=function(ir){this.writeScreen.setPAC(ir)},ur.setBkgData=function(ir){this.writeScreen.setBkgData(ir)},ur.setMode=function(ir){ir!==this.mode&&(this.mode=ir,this.logger.log(Ft.INFO,function(){return"MODE="+ir}),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=ir)},ur.insertChars=function(ir){for(var _r=this,yr=0;yr<ir.length;yr++)this.writeScreen.insertChar(ir[yr]);var gr=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(Ft.INFO,function(){return gr+": "+_r.writeScreen.getDisplayText(!0)}),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(Ft.TEXT,function(){return"DISPLAYED: "+_r.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},ur.ccRCL=function(){this.logger.log(Ft.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},ur.ccBS=function(){this.logger.log(Ft.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},ur.ccAOF=function(){},ur.ccAON=function(){},ur.ccDER=function(){this.logger.log(Ft.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},ur.ccRU=function(ir){this.logger.log(Ft.INFO,"RU("+ir+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(ir)},ur.ccFON=function(){this.logger.log(Ft.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},ur.ccRDC=function(){this.logger.log(Ft.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},ur.ccTR=function(){this.logger.log(Ft.INFO,"TR"),this.setMode("MODE_TEXT")},ur.ccRTD=function(){this.logger.log(Ft.INFO,"RTD"),this.setMode("MODE_TEXT")},ur.ccEDM=function(){this.logger.log(Ft.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},ur.ccCR=function(){this.logger.log(Ft.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},ur.ccENM=function(){this.logger.log(Ft.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},ur.ccEOC=function(){var ir=this;if(this.logger.log(Ft.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var _r=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=_r,this.writeScreen=this.nonDisplayedMemory,this.logger.log(Ft.TEXT,function(){return"DISP: "+ir.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},ur.ccTO=function(ir){this.logger.log(Ft.INFO,"TO("+ir+") - Tab Offset"),this.writeScreen.moveCursor(ir)},ur.ccMIDROW=function(ir){var _r={flash:!1};if(_r.underline=ir%2===1,_r.italics=ir>=46,_r.italics)_r.foreground="white";else{var yr=Math.floor(ir/2)-16,gr=["white","green","blue","cyan","red","yellow","magenta"];_r.foreground=gr[yr]}this.logger.log(Ft.INFO,"MIDROW: "+JSON.stringify(_r)),this.writeScreen.setPen(_r)},ur.outputDataUpdate=function(ir){ir===void 0&&(ir=!1);var _r=this.logger.time;_r!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=_r:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,_r,this.lastOutputScreen),ir&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:_r),this.lastOutputScreen.copy(this.displayedMemory))},ur.cueSplitAtTime=function(ir){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,ir,this.displayedMemory),this.cueStartTime=ir))},hr}(),dr=function(){function hr(mr,ir,_r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var yr=new tr;this.channels=[null,new sr(mr,ir,yr),new sr(mr+1,_r,yr)],this.cmdHistory=xr(),this.logger=yr}var ur=hr.prototype;return ur.getHandler=function(ir){return this.channels[ir].getHandler()},ur.setHandler=function(ir,_r){this.channels[ir].setHandler(_r)},ur.addData=function(ir,_r){var yr,gr,Sr,Tr=!1;this.logger.time=ir;for(var br=0;br<_r.length;br+=2)if(gr=_r[br]&127,Sr=_r[br+1]&127,!(gr===0&&Sr===0)){if(this.logger.log(Ft.DATA,"["+cr([_r[br],_r[br+1]])+"] -> ("+cr([gr,Sr])+")"),yr=this.parseCmd(gr,Sr),yr||(yr=this.parseMidrow(gr,Sr)),yr||(yr=this.parsePAC(gr,Sr)),yr||(yr=this.parseBackgroundAttributes(gr,Sr)),!yr&&(Tr=this.parseChars(gr,Sr),Tr)){var Ar=this.currentChannel;if(Ar&&Ar>0){var Or=this.channels[Ar];Or.insertChars(Tr)}else this.logger.log(Ft.WARNING,"No channel found yet. TEXT-MODE?")}!yr&&!Tr&&this.logger.log(Ft.WARNING,"Couldn't parse cleaned data "+cr([gr,Sr])+" orig: "+cr([_r[br],_r[br+1]]))}},ur.parseCmd=function(ir,_r){var yr=this.cmdHistory,gr=(ir===20||ir===28||ir===21||ir===29)&&_r>=32&&_r<=47,Sr=(ir===23||ir===31)&&_r>=33&&_r<=35;if(!(gr||Sr))return!1;if(pr(ir,_r,yr))return fr(null,null,yr),this.logger.log(Ft.DEBUG,"Repeated command ("+cr([ir,_r])+") is dropped"),!0;var Tr=ir===20||ir===21||ir===23?1:2,br=this.channels[Tr];return ir===20||ir===21||ir===28||ir===29?_r===32?br.ccRCL():_r===33?br.ccBS():_r===34?br.ccAOF():_r===35?br.ccAON():_r===36?br.ccDER():_r===37?br.ccRU(2):_r===38?br.ccRU(3):_r===39?br.ccRU(4):_r===40?br.ccFON():_r===41?br.ccRDC():_r===42?br.ccTR():_r===43?br.ccRTD():_r===44?br.ccEDM():_r===45?br.ccCR():_r===46?br.ccENM():_r===47&&br.ccEOC():br.ccTO(_r-32),fr(ir,_r,yr),this.currentChannel=Tr,!0},ur.parseMidrow=function(ir,_r){var yr=0;if((ir===17||ir===25)&&_r>=32&&_r<=47){if(ir===17?yr=1:yr=2,yr!==this.currentChannel)return this.logger.log(Ft.ERROR,"Mismatch channel in midrow parsing"),!1;var gr=this.channels[yr];return gr?(gr.ccMIDROW(_r),this.logger.log(Ft.DEBUG,"MIDROW ("+cr([ir,_r])+")"),!0):!1}return!1},ur.parsePAC=function(ir,_r){var yr,gr=this.cmdHistory,Sr=(ir>=17&&ir<=23||ir>=25&&ir<=31)&&_r>=64&&_r<=127,Tr=(ir===16||ir===24)&&_r>=64&&_r<=95;if(!(Sr||Tr))return!1;if(pr(ir,_r,gr))return fr(null,null,gr),!0;var br=ir<=23?1:2;_r>=64&&_r<=95?yr=br===1?Wt[ir]:Ut[ir]:yr=br===1?nr[ir]:Ht[ir];var Ar=this.channels[br];return Ar?(Ar.setPAC(this.interpretPAC(yr,_r)),fr(ir,_r,gr),this.currentChannel=br,!0):!1},ur.interpretPAC=function(ir,_r){var yr,gr={color:null,italics:!1,indent:null,underline:!1,row:ir};return _r>95?yr=_r-96:yr=_r-64,gr.underline=(yr&1)===1,yr<=13?gr.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(yr/2)]:yr<=15?(gr.italics=!0,gr.color="white"):gr.indent=Math.floor((yr-16)/2)*4,gr},ur.parseChars=function(ir,_r){var yr,gr=null,Sr=null;if(ir>=25?(yr=2,Sr=ir-8):(yr=1,Sr=ir),Sr>=17&&Sr<=19){var Tr;Sr===17?Tr=_r+80:Sr===18?Tr=_r+112:Tr=_r+144,this.logger.log(Ft.INFO,"Special char '"+kt(Tr)+"' in channel "+yr),gr=[Tr]}else ir>=32&&ir<=127&&(gr=_r===0?[ir]:[ir,_r]);if(gr){var br=cr(gr);this.logger.log(Ft.DEBUG,"Char codes =  "+br.join(",")),fr(ir,_r,this.cmdHistory)}return gr},ur.parseBackgroundAttributes=function(ir,_r){var yr=(ir===16||ir===24)&&_r>=32&&_r<=47,gr=(ir===23||ir===31)&&_r>=45&&_r<=47;if(!(yr||gr))return!1;var Sr,Tr={};ir===16||ir===24?(Sr=Math.floor((_r-32)/2),Tr.background=Bt[Sr],_r%2===1&&(Tr.background=Tr.background+"_semi")):_r===45?Tr.background="transparent":(Tr.foreground="black",_r===47&&(Tr.underline=!0));var br=ir<=23?1:2,Ar=this.channels[br];return Ar.setBkgData(Tr),fr(ir,_r,this.cmdHistory),!0},ur.reset=function(){for(var ir=0;ir<Object.keys(this.channels).length;ir++){var _r=this.channels[ir];_r&&_r.reset()}this.cmdHistory=xr()},ur.cueSplitAtTime=function(ir){for(var _r=0;_r<this.channels.length;_r++){var yr=this.channels[_r];yr&&yr.cueSplitAtTime(ir)}},hr}();function fr(hr,ur,mr){mr.a=hr,mr.b=ur}function pr(hr,ur,mr){return mr.a===hr&&mr.b===ur}function xr(){return{a:null,b:null}}const lr=dr},"./src/utils/codecs.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{isCodecSupportedInMp4:()=>kt,isCodecType:()=>Dt});var Rt={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function Dt(Nt,zt){var Wt=Rt[zt];return!!Wt&&Wt[Nt.slice(0,4)]===!0}function kt(Nt,zt){return MediaSource.isTypeSupported((zt||"video")+'/mp4;codecs="'+Nt+'"')}},"./src/utils/cues.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Wt});var Rt=Ct("./src/utils/vttparser.ts"),Dt=Ct("./src/utils/webvtt-parser.ts"),kt=Ct("./src/utils/texttrack-utils.ts"),Nt=/\s/,zt={newCue:function(Ut,Ht,Bt,Ft){for(var tr=[],cr,Kt,Zt,rr,ar,sr=self.VTTCue||self.TextTrackCue,dr=0;dr<Ft.rows.length;dr++)if(cr=Ft.rows[dr],Zt=!0,rr=0,ar="",!cr.isEmpty()){for(var fr=0;fr<cr.chars.length;fr++)Nt.test(cr.chars[fr].uchar)&&Zt?rr++:(ar+=cr.chars[fr].uchar,Zt=!1);cr.cueStartTime=Ht,Ht===Bt&&(Bt+=1e-4),rr>=16?rr--:rr++;var pr=(0,Rt.fixLineBreaks)(ar.trim()),xr=(0,Dt.generateCueId)(Ht,Bt,pr);(!Ut||!Ut.cues||!Ut.cues.getCueById(xr))&&(Kt=new sr(Ht,Bt,pr),Kt.id=xr,Kt.line=dr+1,Kt.align="left",Kt.position=10+Math.min(80,Math.floor(rr*8/32)*10),tr.push(Kt))}return Ut&&tr.length&&(tr.sort(function(lr,hr){return lr.line==="auto"||hr.line==="auto"?0:lr.line>8&&hr.line>8?hr.line-lr.line:lr.line-hr.line}),tr.forEach(function(lr){return(0,kt.addCueToTrack)(Ut,lr)})),tr}};const Wt=zt},"./src/utils/discontinuities.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{adjustSlidingStart:()=>Ut,alignMediaPlaylistByPDT:()=>tr,alignPDT:()=>Ft,alignStream:()=>Ht,findDiscontinuousReferenceFrag:()=>Wt,findFirstFragWithCC:()=>Nt,shouldAlignOnDiscontinuities:()=>zt});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/utils/logger.ts"),kt=Ct("./src/controller/level-helper.ts");function Nt(cr,Kt){for(var Zt=null,rr=0,ar=cr.length;rr<ar;rr++){var sr=cr[rr];if(sr&&sr.cc===Kt){Zt=sr;break}}return Zt}function zt(cr,Kt,Zt){return!!(Kt.details&&(Zt.endCC>Zt.startCC||cr&&cr.cc<Zt.startCC))}function Wt(cr,Kt,Zt){var rr=cr.fragments,ar=Kt.fragments;if(!ar.length||!rr.length){Dt.logger.log("No fragments to align");return}var sr=Nt(rr,ar[0].cc);if(!sr||sr&&!sr.startPTS){Dt.logger.log("No frag in previous level to align on");return}return sr}function nr(cr,Kt){if(cr){var Zt=cr.start+Kt;cr.start=cr.startPTS=Zt,cr.endPTS=Zt+cr.duration}}function Ut(cr,Kt){for(var Zt=Kt.fragments,rr=0,ar=Zt.length;rr<ar;rr++)nr(Zt[rr],cr);Kt.fragmentHint&&nr(Kt.fragmentHint,cr),Kt.alignedSliding=!0}function Ht(cr,Kt,Zt){Kt&&(Bt(cr,Zt,Kt),!Zt.alignedSliding&&Kt.details&&Ft(Zt,Kt.details),!Zt.alignedSliding&&Kt.details&&!Zt.skippedSegments&&(0,kt.adjustSliding)(Kt.details,Zt))}function Bt(cr,Kt,Zt){if(zt(cr,Zt,Kt)){var rr=Wt(Zt.details,Kt);rr&&(0,Rt.isFiniteNumber)(rr.start)&&(Dt.logger.log("Adjusting PTS using last level due to CC increase within current level "+Kt.url),Ut(rr.start,Kt))}}function Ft(cr,Kt){if(!(!Kt.fragments.length||!cr.hasProgramDateTime||!Kt.hasProgramDateTime)){var Zt=Kt.fragments[0].programDateTime,rr=cr.fragments[0].programDateTime,ar=(rr-Zt)/1e3+Kt.fragments[0].start;ar&&(0,Rt.isFiniteNumber)(ar)&&(Dt.logger.log("Adjusting PTS using programDateTime delta "+(rr-Zt)+"ms, sliding:"+ar.toFixed(3)+" "+cr.url+" "),Ut(ar,cr))}}function tr(cr,Kt){if(!(!cr.hasProgramDateTime||!Kt.hasProgramDateTime)){var Zt=cr.fragments,rr=Kt.fragments;if(!(!Zt.length||!rr.length)){var ar=Math.round(rr.length/2)-1,sr=rr[ar],dr=Nt(Zt,sr.cc)||Zt[Math.round(Zt.length/2)-1],fr=sr.programDateTime,pr=dr.programDateTime;if(!(fr===null||pr===null)){var xr=(pr-fr)/1e3-(dr.start-sr.start);Ut(xr,cr)}}}}},"./src/utils/ewma-bandwidth-estimator.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>kt});var Rt=Ct("./src/utils/ewma.ts"),Dt=function(){function Nt(Wt,nr,Ut){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=Ut,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Rt.default(Wt),this.fast_=new Rt.default(nr)}var zt=Nt.prototype;return zt.update=function(nr,Ut){var Ht=this.slow_,Bt=this.fast_;this.slow_.halfLife!==nr&&(this.slow_=new Rt.default(nr,Ht.getEstimate(),Ht.getTotalWeight())),this.fast_.halfLife!==Ut&&(this.fast_=new Rt.default(Ut,Bt.getEstimate(),Bt.getTotalWeight()))},zt.sample=function(nr,Ut){nr=Math.max(nr,this.minDelayMs_);var Ht=8*Ut,Bt=nr/1e3,Ft=Ht/Bt;this.fast_.sample(Bt,Ft),this.slow_.sample(Bt,Ft)},zt.canEstimate=function(){var nr=this.fast_;return nr&&nr.getTotalWeight()>=this.minWeight_},zt.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},zt.destroy=function(){},Nt}();const kt=Dt},"./src/utils/ewma.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Dt});var Rt=function(){function kt(zt,Wt,nr){Wt===void 0&&(Wt=0),nr===void 0&&(nr=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=zt,this.alpha_=zt?Math.exp(Math.log(.5)/zt):0,this.estimate_=Wt,this.totalWeight_=nr}var Nt=kt.prototype;return Nt.sample=function(Wt,nr){var Ut=Math.pow(this.alpha_,Wt);this.estimate_=nr*(1-Ut)+Ut*this.estimate_,this.totalWeight_+=Wt},Nt.getTotalWeight=function(){return this.totalWeight_},Nt.getEstimate=function(){if(this.alpha_){var Wt=1-Math.pow(this.alpha_,this.totalWeight_);if(Wt)return this.estimate_/Wt}return this.estimate_},kt}();const Dt=Rt},"./src/utils/fetch-loader.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>ar,fetchSupported:()=>tr});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/loader/load-stats.ts"),kt=Ct("./src/demux/chunk-cache.ts");function Nt(sr,dr){sr.prototype=Object.create(dr.prototype),sr.prototype.constructor=sr,Ht(sr,dr)}function zt(sr){var dr=typeof Map=="function"?new Map:void 0;return zt=function(pr){if(pr===null||!Ut(pr))return pr;if(typeof pr!="function")throw new TypeError("Super expression must either be null or a function");if(typeof dr<"u"){if(dr.has(pr))return dr.get(pr);dr.set(pr,xr)}function xr(){return Wt(pr,arguments,Bt(this).constructor)}return xr.prototype=Object.create(pr.prototype,{constructor:{value:xr,enumerable:!1,writable:!0,configurable:!0}}),Ht(xr,pr)},zt(sr)}function Wt(sr,dr,fr){return nr()?Wt=Reflect.construct.bind():Wt=function(xr,lr,hr){var ur=[null];ur.push.apply(ur,lr);var mr=Function.bind.apply(xr,ur),ir=new mr;return hr&&Ht(ir,hr.prototype),ir},Wt.apply(null,arguments)}function nr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ut(sr){return Function.toString.call(sr).indexOf("[native code]")!==-1}function Ht(sr,dr){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(pr,xr){return pr.__proto__=xr,pr},Ht(sr,dr)}function Bt(sr){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(fr){return fr.__proto__||Object.getPrototypeOf(fr)},Bt(sr)}function Ft(){return Ft=Object.assign?Object.assign.bind():function(sr){for(var dr=1;dr<arguments.length;dr++){var fr=arguments[dr];for(var pr in fr)Object.prototype.hasOwnProperty.call(fr,pr)&&(sr[pr]=fr[pr])}return sr},Ft.apply(this,arguments)}function tr(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var cr=function(){function sr(fr){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=fr.fetchSetup||Zt,this.controller=new self.AbortController,this.stats=new Dt.LoadStats}var dr=sr.prototype;return dr.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},dr.abortInternal=function(){var pr=this.response;(!pr||!pr.ok)&&(this.stats.aborted=!0,this.controller.abort())},dr.abort=function(){var pr;this.abortInternal(),(pr=this.callbacks)!==null&&pr!==void 0&&pr.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},dr.load=function(pr,xr,lr){var hr=this,ur=this.stats;if(ur.loading.start)throw new Error("Loader can only be used once.");ur.loading.start=self.performance.now();var mr=Kt(pr,this.controller.signal),ir=lr.onProgress,_r=pr.responseType==="arraybuffer",yr=_r?"byteLength":"length";this.context=pr,this.config=xr,this.callbacks=lr,this.request=this.fetchSetup(pr,mr),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){hr.abortInternal(),lr.onTimeout(ur,pr,hr.response)},xr.timeout),self.fetch(this.request).then(function(gr){if(hr.response=hr.loader=gr,!gr.ok){var Sr=gr.status,Tr=gr.statusText;throw new rr(Tr||"fetch, bad network response",Sr,gr)}return ur.loading.first=Math.max(self.performance.now(),ur.loading.start),ur.total=parseInt(gr.headers.get("Content-Length")||"0"),ir&&(0,Rt.isFiniteNumber)(xr.highWaterMark)?hr.loadProgressively(gr,ur,pr,xr.highWaterMark,ir):_r?gr.arrayBuffer():gr.text()}).then(function(gr){var Sr=hr.response;self.clearTimeout(hr.requestTimeout),ur.loading.end=Math.max(self.performance.now(),ur.loading.first);var Tr=gr[yr];Tr&&(ur.loaded=ur.total=Tr);var br={url:Sr.url,data:gr};ir&&!(0,Rt.isFiniteNumber)(xr.highWaterMark)&&ir(ur,pr,gr,Sr),lr.onSuccess(br,ur,pr,Sr)}).catch(function(gr){if(self.clearTimeout(hr.requestTimeout),!ur.aborted){var Sr=gr&&gr.code||0,Tr=gr?gr.message:null;lr.onError({code:Sr,text:Tr},pr,gr?gr.details:null)}})},dr.getCacheAge=function(){var pr=null;if(this.response){var xr=this.response.headers.get("age");pr=xr?parseFloat(xr):null}return pr},dr.loadProgressively=function(pr,xr,lr,hr,ur){hr===void 0&&(hr=0);var mr=new kt.default,ir=pr.body.getReader(),_r=function yr(){return ir.read().then(function(gr){if(gr.done)return mr.dataLength&&ur(xr,lr,mr.flush(),pr),Promise.resolve(new ArrayBuffer(0));var Sr=gr.value,Tr=Sr.length;return xr.loaded+=Tr,Tr<hr||mr.dataLength?(mr.push(Sr),mr.dataLength>=hr&&ur(xr,lr,mr.flush(),pr)):ur(xr,lr,Sr,pr),yr()}).catch(function(){return Promise.reject()})};return _r()},sr}();function Kt(sr,dr){var fr={method:"GET",mode:"cors",credentials:"same-origin",signal:dr,headers:new self.Headers(Ft({},sr.headers))};return sr.rangeEnd&&fr.headers.set("Range","bytes="+sr.rangeStart+"-"+String(sr.rangeEnd-1)),fr}function Zt(sr,dr){return new self.Request(sr.url,dr)}var rr=function(sr){Nt(dr,sr);function dr(fr,pr,xr){var lr;return lr=sr.call(this,fr)||this,lr.code=void 0,lr.details=void 0,lr.code=pr,lr.details=xr,lr}return dr}(zt(Error));const ar=cr},"./src/utils/hex.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Dt});var Rt={hexDump:function(Nt){for(var zt="",Wt=0;Wt<Nt.length;Wt++){var nr=Nt[Wt].toString(16);nr.length<2&&(nr="0"+nr),zt+=nr}return zt}};const Dt=Rt},"./src/utils/imsc1-ttml-parser.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{IMSC1_CODEC:()=>Ut,parseIMSC1:()=>tr});var Rt=Ct("./src/utils/mp4-tools.ts"),Dt=Ct("./src/utils/vttparser.ts"),kt=Ct("./src/utils/vttcue.ts"),Nt=Ct("./src/demux/id3.ts"),zt=Ct("./src/utils/timescale-conversion.ts"),Wt=Ct("./src/utils/webvtt-parser.ts");function nr(){return nr=Object.assign?Object.assign.bind():function(lr){for(var hr=1;hr<arguments.length;hr++){var ur=arguments[hr];for(var mr in ur)Object.prototype.hasOwnProperty.call(ur,mr)&&(lr[mr]=ur[mr])}return lr},nr.apply(this,arguments)}var Ut="stpp.ttml.im1t",Ht=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Bt=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Ft={left:"start",center:"center",right:"end",start:"start",end:"end"};function tr(lr,hr,ur,mr,ir){var _r=(0,Rt.findBox)(new Uint8Array(lr),["mdat"]);if(_r.length===0){ir(new Error("Could not parse IMSC1 mdat"));return}var yr=_r.map(function(Sr){return(0,Nt.utf8ArrayToStr)(Sr)}),gr=(0,zt.toTimescaleFromScale)(hr,1,ur);try{yr.forEach(function(Sr){return mr(cr(Sr,gr))})}catch(Sr){ir(Sr)}}function cr(lr,hr){var ur=new DOMParser,mr=ur.parseFromString(lr,"text/xml"),ir=mr.getElementsByTagName("tt")[0];if(!ir)throw new Error("Invalid ttml");var _r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},yr=Object.keys(_r).reduce(function(Ar,Or){return Ar[Or]=ir.getAttribute("ttp:"+Or)||_r[Or],Ar},{}),gr=ir.getAttribute("xml:space")!=="preserve",Sr=Zt(Kt(ir,"styling","style")),Tr=Zt(Kt(ir,"layout","region")),br=Kt(ir,"body","[begin]");return[].map.call(br,function(Ar){var Or=rr(Ar,gr);if(!Or||!Ar.hasAttribute("begin"))return null;var Ir=fr(Ar.getAttribute("begin"),yr),Cr=fr(Ar.getAttribute("dur"),yr),Rr=fr(Ar.getAttribute("end"),yr);if(Ir===null)throw dr(Ar);if(Rr===null){if(Cr===null)throw dr(Ar);Rr=Ir+Cr}var Pr=new kt.default(Ir-hr,Rr-hr,Or);Pr.id=(0,Wt.generateCueId)(Pr.startTime,Pr.endTime,Pr.text);var wr=Tr[Ar.getAttribute("region")],Dr=Sr[Ar.getAttribute("style")],kr=ar(wr,Dr,Sr),Fr=kr.textAlign;if(Fr){var Br=Ft[Fr];Br&&(Pr.lineAlign=Br),Pr.align=Fr}return nr(Pr,kr),Pr}).filter(function(Ar){return Ar!==null})}function Kt(lr,hr,ur){var mr=lr.getElementsByTagName(hr)[0];return mr?[].slice.call(mr.querySelectorAll(ur)):[]}function Zt(lr){return lr.reduce(function(hr,ur){var mr=ur.getAttribute("xml:id");return mr&&(hr[mr]=ur),hr},{})}function rr(lr,hr){return[].slice.call(lr.childNodes).reduce(function(ur,mr,ir){var _r;return mr.nodeName==="br"&&ir?ur+`
`:(_r=mr.childNodes)!==null&&_r!==void 0&&_r.length?rr(mr,hr):hr?ur+mr.textContent.trim().replace(/\s+/g," "):ur+mr.textContent},"")}function ar(lr,hr,ur){var mr="http://www.w3.org/ns/ttml#styling",ir=null,_r=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],yr=lr!=null&&lr.hasAttribute("style")?lr.getAttribute("style"):null;return yr&&ur.hasOwnProperty(yr)&&(ir=ur[yr]),_r.reduce(function(gr,Sr){var Tr=sr(hr,mr,Sr)||sr(lr,mr,Sr)||sr(ir,mr,Sr);return Tr&&(gr[Sr]=Tr),gr},{})}function sr(lr,hr,ur){return lr&&lr.hasAttributeNS(hr,ur)?lr.getAttributeNS(hr,ur):null}function dr(lr){return new Error("Could not parse ttml timestamp "+lr)}function fr(lr,hr){if(!lr)return null;var ur=(0,Dt.parseTimeStamp)(lr);return ur===null&&(Ht.test(lr)?ur=pr(lr,hr):Bt.test(lr)&&(ur=xr(lr,hr))),ur}function pr(lr,hr){var ur=Ht.exec(lr),mr=(ur[4]|0)+(ur[5]|0)/hr.subFrameRate;return(ur[1]|0)*3600+(ur[2]|0)*60+(ur[3]|0)+mr/hr.frameRate}function xr(lr,hr){var ur=Bt.exec(lr),mr=Number(ur[1]),ir=ur[2];switch(ir){case"h":return mr*3600;case"m":return mr*60;case"ms":return mr*1e3;case"f":return mr/hr.frameRate;case"t":return mr/hr.tickRate}return mr}},"./src/utils/keysystem-util.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{changeEndianness:()=>kt,convertDataUriToArrayBytes:()=>Nt,strToUtf8array:()=>zt});var Rt=Ct("./src/utils/numeric-encoding-utils.ts");function Dt(Wt){var nr=zt(Wt).subarray(0,16),Ut=new Uint8Array(16);return Ut.set(nr,16-nr.length),Ut}function kt(Wt){var nr=function(Ht,Bt,Ft){var tr=Ht[Bt];Ht[Bt]=Ht[Ft],Ht[Ft]=tr};nr(Wt,0,3),nr(Wt,1,2),nr(Wt,4,5),nr(Wt,6,7)}function Nt(Wt){var nr=Wt.split(":"),Ut=null;if(nr[0]==="data"&&nr.length===2){var Ht=nr[1].split(";"),Bt=Ht[Ht.length-1].split(",");if(Bt.length===2){var Ft=Bt[0]==="base64",tr=Bt[1];Ft?(Ht.splice(-1,1),Ut=(0,Rt.base64Decode)(tr)):Ut=Dt(tr)}}return Ut}function zt(Wt){return Uint8Array.from(unescape(encodeURIComponent(Wt)),function(nr){return nr.charCodeAt(0)})}},"./src/utils/logger.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{enableLogs:()=>Wt,logger:()=>nr});var Rt=function(){},Dt={trace:Rt,debug:Rt,log:Rt,warn:Rt,info:Rt,error:Rt},kt=Dt;function Nt(Ut){var Ht=self.console[Ut];return Ht?Ht.bind(self.console,"["+Ut+"] >"):Rt}function zt(Ut){for(var Ht=arguments.length,Bt=new Array(Ht>1?Ht-1:0),Ft=1;Ft<Ht;Ft++)Bt[Ft-1]=arguments[Ft];Bt.forEach(function(tr){kt[tr]=Ut[tr]?Ut[tr].bind(Ut):Nt(tr)})}function Wt(Ut,Ht){if(self.console&&Ut===!0||typeof Ut=="object"){zt(Ut,"debug","log","info","warn","error");try{kt.log('Debug logs enabled for "'+Ht+'"')}catch{kt=Dt}}else kt=Dt}var nr=kt},"./src/utils/mediakeys-helper.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{KeySystemFormats:()=>Dt,KeySystemIds:()=>Nt,KeySystems:()=>Rt,getKeySystemsForConfig:()=>nr,getSupportedMediaKeySystemConfigurations:()=>Ht,keySystemDomainToKeySystemFormat:()=>Wt,keySystemFormatToKeySystemDomain:()=>kt,keySystemIdToKeySystemDomain:()=>zt,requestMediaKeySystemAccess:()=>Ut});var Rt;(function(Ft){Ft.CLEARKEY="org.w3.clearkey",Ft.FAIRPLAY="com.apple.fps",Ft.PLAYREADY="com.microsoft.playready",Ft.WIDEVINE="com.widevine.alpha"})(Rt||(Rt={}));var Dt;(function(Ft){Ft.CLEARKEY="org.w3.clearkey",Ft.FAIRPLAY="com.apple.streamingkeydelivery",Ft.PLAYREADY="com.microsoft.playready",Ft.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"})(Dt||(Dt={}));function kt(Ft){switch(Ft){case Dt.FAIRPLAY:return Rt.FAIRPLAY;case Dt.PLAYREADY:return Rt.PLAYREADY;case Dt.WIDEVINE:return Rt.WIDEVINE;case Dt.CLEARKEY:return Rt.CLEARKEY}}var Nt;(function(Ft){Ft.WIDEVINE="edef8ba979d64acea3c827dcd51d21ed"})(Nt||(Nt={}));function zt(Ft){if(Ft===Nt.WIDEVINE)return Rt.WIDEVINE}function Wt(Ft){switch(Ft){case Rt.FAIRPLAY:return Dt.FAIRPLAY;case Rt.PLAYREADY:return Dt.PLAYREADY;case Rt.WIDEVINE:return Dt.WIDEVINE;case Rt.CLEARKEY:return Dt.CLEARKEY}}function nr(Ft){var tr=Ft.drmSystems,cr=Ft.widevineLicenseUrl,Kt=tr?[Rt.FAIRPLAY,Rt.WIDEVINE,Rt.PLAYREADY,Rt.CLEARKEY].filter(function(Zt){return!!tr[Zt]}):[];return!Kt[Rt.WIDEVINE]&&cr&&Kt.push(Rt.WIDEVINE),Kt}var Ut=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function Ht(Ft,tr,cr,Kt){var Zt;switch(Ft){case Rt.FAIRPLAY:Zt=["cenc","sinf"];break;case Rt.WIDEVINE:case Rt.PLAYREADY:Zt=["cenc"];break;case Rt.CLEARKEY:Zt=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+Ft)}return Bt(Zt,tr,cr,Kt)}function Bt(Ft,tr,cr,Kt){var Zt={initDataTypes:Ft,persistentState:Kt.persistentState||"not-allowed",distinctiveIdentifier:Kt.distinctiveIdentifier||"not-allowed",sessionTypes:Kt.sessionTypes||[Kt.sessionType||"temporary"],audioCapabilities:tr.map(function(rr){return{contentType:'audio/mp4; codecs="'+rr+'"',robustness:Kt.audioRobustness||"",encryptionScheme:Kt.audioEncryptionScheme||null}}),videoCapabilities:cr.map(function(rr){return{contentType:'video/mp4; codecs="'+rr+'"',robustness:Kt.videoRobustness||"",encryptionScheme:Kt.videoEncryptionScheme||null}})};return[Zt]}},"./src/utils/mediasource-helper.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{getMediaSource:()=>Rt});function Rt(){return self.MediaSource||self.WebKitMediaSource}},"./src/utils/mp4-tools.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{RemuxerTrackIdConfig:()=>Ut,appendUint8Array:()=>hr,bin2str:()=>Ht,computeRawDurationFromSamples:()=>pr,discardEPB:()=>yr,findBox:()=>Kt,getDuration:()=>fr,getStartDTS:()=>dr,mp4Box:()=>Sr,mp4pssh:()=>Tr,offsetStartDTS:()=>xr,parseEmsg:()=>gr,parseInitSegment:()=>rr,parsePssh:()=>br,parseSEIMessageFromNALu:()=>_r,parseSamples:()=>ur,parseSegmentIndex:()=>Zt,parseSinf:()=>sr,patchEncyptionData:()=>ar,readSint32:()=>tr,readUint16:()=>Bt,readUint32:()=>Ft,segmentValidRange:()=>lr,writeUint32:()=>cr});var Rt=Ct("./src/loader/fragment.ts"),Dt=Ct("./src/utils/typed-array.ts"),kt=Ct("./src/demux/id3.ts"),Nt=Ct("./src/utils/logger.ts"),zt=Ct("./src/utils/hex.ts"),Wt=Math.pow(2,32)-1,nr=[].push,Ut={video:1,audio:2,id3:3,text:4};function Ht(Ar){return String.fromCharCode.apply(null,Ar)}function Bt(Ar,Or){var Ir=Ar[Or]<<8|Ar[Or+1];return Ir<0?65536+Ir:Ir}function Ft(Ar,Or){var Ir=tr(Ar,Or);return Ir<0?4294967296+Ir:Ir}function tr(Ar,Or){return Ar[Or]<<24|Ar[Or+1]<<16|Ar[Or+2]<<8|Ar[Or+3]}function cr(Ar,Or,Ir){Ar[Or]=Ir>>24,Ar[Or+1]=Ir>>16&255,Ar[Or+2]=Ir>>8&255,Ar[Or+3]=Ir&255}function Kt(Ar,Or){var Ir=[];if(!Or.length)return Ir;for(var Cr=Ar.byteLength,Rr=0;Rr<Cr;){var Pr=Ft(Ar,Rr),wr=Ht(Ar.subarray(Rr+4,Rr+8)),Dr=Pr>1?Rr+Pr:Cr;if(wr===Or[0])if(Or.length===1)Ir.push(Ar.subarray(Rr+8,Dr));else{var kr=Kt(Ar.subarray(Rr+8,Dr),Or.slice(1));kr.length&&nr.apply(Ir,kr)}Rr=Dr}return Ir}function Zt(Ar){var Or=[],Ir=Ar[0],Cr=8,Rr=Ft(Ar,Cr);Cr+=4;var Pr=0,wr=0;Ir===0?Cr+=8:Cr+=16,Cr+=2;var Dr=Ar.length+wr,kr=Bt(Ar,Cr);Cr+=2;for(var Fr=0;Fr<kr;Fr++){var Br=Cr,Kr=Ft(Ar,Br);Br+=4;var Vr=Kr&2147483647,Gr=(Kr&2147483648)>>>31;if(Gr===1)return console.warn("SIDX has hierarchical references (not supported)"),null;var jr=Ft(Ar,Br);Br+=4,Or.push({referenceSize:Vr,subsegmentDuration:jr,info:{duration:jr/Rr,start:Dr,end:Dr+Vr-1}}),Dr+=Vr,Br+=4,Cr=Br}return{earliestPresentationTime:Pr,timescale:Rr,version:Ir,referencesCount:kr,references:Or}}function rr(Ar){for(var Or=[],Ir=Kt(Ar,["moov","trak"]),Cr=0;Cr<Ir.length;Cr++){var Rr=Ir[Cr],Pr=Kt(Rr,["tkhd"])[0];if(Pr){var wr=Pr[0],Dr=wr===0?12:20,kr=Ft(Pr,Dr),Fr=Kt(Rr,["mdia","mdhd"])[0];if(Fr){wr=Fr[0],Dr=wr===0?12:20;var Br=Ft(Fr,Dr),Kr=Kt(Rr,["mdia","hdlr"])[0];if(Kr){var Vr=Ht(Kr.subarray(8,12)),Gr={soun:Rt.ElementaryStreamTypes.AUDIO,vide:Rt.ElementaryStreamTypes.VIDEO}[Vr];if(Gr){var jr=Kt(Rr,["mdia","minf","stbl","stsd"])[0],zr=void 0;jr&&(zr=Ht(jr.subarray(12,16))),Or[kr]={timescale:Br,type:Gr},Or[Gr]={timescale:Br,id:kr,codec:zr}}}}}}var Xr=Kt(Ar,["moov","mvex","trex"]);return Xr.forEach(function(Zr){var ln=Ft(Zr,4),Qr=Or[ln];Qr&&(Qr.default={duration:Ft(Zr,12),flags:Ft(Zr,20)})}),Or}function ar(Ar,Or){if(!Ar||!Or)return Ar;var Ir=Or.keyId;if(Ir&&Or.isCommonEncryption){var Cr=Kt(Ar,["moov","trak"]);Cr.forEach(function(Rr){var Pr=Kt(Rr,["mdia","minf","stbl","stsd"])[0],wr=Pr.subarray(8),Dr=Kt(wr,["enca"]),kr=Dr.length>0;kr||(Dr=Kt(wr,["encv"])),Dr.forEach(function(Fr){var Br=kr?Fr.subarray(28):Fr.subarray(78),Kr=Kt(Br,["sinf"]);Kr.forEach(function(Vr){var Gr=sr(Vr);if(Gr){var jr=Gr.subarray(8,24);jr.some(function(zr){return zr!==0})||(Nt.logger.log("[eme] Patching keyId in 'enc"+(kr?"a":"v")+">sinf>>tenc' box: "+zt.default.hexDump(jr)+" -> "+zt.default.hexDump(Ir)),Gr.set(Ir,8))}})})})}return Ar}function sr(Ar){var Or=Kt(Ar,["schm"])[0];if(Or){var Ir=Ht(Or.subarray(4,8));if(Ir==="cbcs"||Ir==="cenc")return Kt(Ar,["schi","tenc"])[0]}return Nt.logger.error("[eme] missing 'schm' box"),null}function dr(Ar,Or){return Kt(Or,["moof","traf"]).reduce(function(Ir,Cr){var Rr=Kt(Cr,["tfdt"])[0],Pr=Rr[0],wr=Kt(Cr,["tfhd"]).reduce(function(Dr,kr){var Fr=Ft(kr,4),Br=Ar[Fr];if(Br){var Kr=Ft(Rr,4);Pr===1&&(Kr*=Math.pow(2,32),Kr+=Ft(Rr,8));var Vr=Br.timescale||9e4,Gr=Kr/Vr;if(isFinite(Gr)&&(Dr===null||Gr<Dr))return Gr}return Dr},null);return wr!==null&&isFinite(wr)&&(Ir===null||wr<Ir)?wr:Ir},null)||0}function fr(Ar,Or){for(var Ir=0,Cr=0,Rr=0,Pr=Kt(Ar,["moof","traf"]),wr=0;wr<Pr.length;wr++){var Dr=Pr[wr],kr=Kt(Dr,["tfhd"])[0],Fr=Ft(kr,4),Br=Or[Fr];if(Br){var Kr=Br.default,Vr=Ft(kr,0)|(Kr==null?void 0:Kr.flags),Gr=Kr==null?void 0:Kr.duration;Vr&8&&(Vr&2?Gr=Ft(kr,12):Gr=Ft(kr,8));for(var jr=Br.timescale||9e4,zr=Kt(Dr,["trun"]),Xr=0;Xr<zr.length;Xr++){if(Ir=pr(zr[Xr]),!Ir&&Gr){var Zr=Ft(zr[Xr],4);Ir=Gr*Zr}Br.type===Rt.ElementaryStreamTypes.VIDEO?Cr+=Ir/jr:Br.type===Rt.ElementaryStreamTypes.AUDIO&&(Rr+=Ir/jr)}}}if(Cr===0&&Rr===0){for(var ln=0,Qr=Kt(Ar,["sidx"]),an=0;an<Qr.length;an++){var Jr=Zt(Qr[an]);Jr!=null&&Jr.references&&(ln+=Jr.references.reduce(function(cn,un){return cn+un.info.duration||0},0))}return ln}return Cr||Rr}function pr(Ar){var Or=Ft(Ar,0),Ir=8;Or&1&&(Ir+=4),Or&4&&(Ir+=4);for(var Cr=0,Rr=Ft(Ar,4),Pr=0;Pr<Rr;Pr++){if(Or&256){var wr=Ft(Ar,Ir);Cr+=wr,Ir+=4}Or&512&&(Ir+=4),Or&1024&&(Ir+=4),Or&2048&&(Ir+=4)}return Cr}function xr(Ar,Or,Ir){Kt(Or,["moof","traf"]).forEach(function(Cr){Kt(Cr,["tfhd"]).forEach(function(Rr){var Pr=Ft(Rr,4),wr=Ar[Pr];if(wr){var Dr=wr.timescale||9e4;Kt(Cr,["tfdt"]).forEach(function(kr){var Fr=kr[0],Br=Ft(kr,4);if(Fr===0)Br-=Ir*Dr,Br=Math.max(Br,0),cr(kr,4,Br);else{Br*=Math.pow(2,32),Br+=Ft(kr,8),Br-=Ir*Dr,Br=Math.max(Br,0);var Kr=Math.floor(Br/(Wt+1)),Vr=Math.floor(Br%(Wt+1));cr(kr,4,Kr),cr(kr,8,Vr)}})}})})}function lr(Ar){var Or={valid:null,remainder:null},Ir=Kt(Ar,["moof"]);if(Ir){if(Ir.length<2)return Or.remainder=Ar,Or}else return Or;var Cr=Ir[Ir.length-1];return Or.valid=(0,Dt.sliceUint8)(Ar,0,Cr.byteOffset-8),Or.remainder=(0,Dt.sliceUint8)(Ar,Cr.byteOffset-8),Or}function hr(Ar,Or){var Ir=new Uint8Array(Ar.length+Or.length);return Ir.set(Ar),Ir.set(Or,Ar.length),Ir}function ur(Ar,Or){var Ir=[],Cr=Or.samples,Rr=Or.timescale,Pr=Or.id,wr=!1,Dr=Kt(Cr,["moof"]);return Dr.map(function(kr){var Fr=kr.byteOffset-8,Br=Kt(kr,["traf"]);Br.map(function(Kr){var Vr=Kt(Kr,["tfdt"]).map(function(Gr){var jr=Gr[0],zr=Ft(Gr,4);return jr===1&&(zr*=Math.pow(2,32),zr+=Ft(Gr,8)),zr/Rr})[0];return Vr!==void 0&&(Ar=Vr),Kt(Kr,["tfhd"]).map(function(Gr){var jr=Ft(Gr,4),zr=Ft(Gr,0)&16777215,Xr=(zr&1)!==0,Zr=(zr&2)!==0,ln=(zr&8)!==0,Qr=0,an=(zr&16)!==0,Jr=0,cn=(zr&32)!==0,un=8;jr===Pr&&(Xr&&(un+=8),Zr&&(un+=4),ln&&(Qr=Ft(Gr,un),un+=4),an&&(Jr=Ft(Gr,un),un+=4),cn&&(un+=4),Or.type==="video"&&(wr=mr(Or.codec)),Kt(Kr,["trun"]).map(function(vn){var hn=vn[0],fn=Ft(vn,0)&16777215,pn=(fn&1)!==0,Tn=0,$n=(fn&4)!==0,Ln=(fn&256)!==0,Dn=0,mn=(fn&512)!==0,On=0,xn=(fn&1024)!==0,tn=(fn&2048)!==0,En=0,Mn=Ft(vn,4),gn=8;pn&&(Tn=Ft(vn,gn),gn+=4),$n&&(gn+=4);for(var In=Tn+Fr,bn=0;bn<Mn;bn++){if(Ln?(Dn=Ft(vn,gn),gn+=4):Dn=Qr,mn?(On=Ft(vn,gn),gn+=4):On=Jr,xn&&(gn+=4),tn&&(hn===0?En=Ft(vn,gn):En=tr(vn,gn),gn+=4),Or.type===Rt.ElementaryStreamTypes.VIDEO)for(var Kn=0;Kn<On;){var Hn=Ft(Cr,In);if(In+=4,ir(wr,Cr[In])){var Nn=Cr.subarray(In,In+Hn);_r(Nn,wr?2:1,Ar+En/Rr,Ir)}In+=Hn,Kn+=Hn+4}Ar+=Dn/Rr}}))})})}),Ir}function mr(Ar){if(!Ar)return!1;var Or=Ar.indexOf("."),Ir=Or<0?Ar:Ar.substring(0,Or);return Ir==="hvc1"||Ir==="hev1"||Ir==="dvh1"||Ir==="dvhe"}function ir(Ar,Or){if(Ar){var Ir=Or>>1&63;return Ir===39||Ir===40}else{var Cr=Or&31;return Cr===6}}function _r(Ar,Or,Ir,Cr){var Rr=yr(Ar),Pr=0;Pr+=Or;for(var wr=0,Dr=0,kr=!1,Fr=0;Pr<Rr.length;){wr=0;do{if(Pr>=Rr.length)break;Fr=Rr[Pr++],wr+=Fr}while(Fr===255);Dr=0;do{if(Pr>=Rr.length)break;Fr=Rr[Pr++],Dr+=Fr}while(Fr===255);var Br=Rr.length-Pr;if(!kr&&wr===4&&Pr<Rr.length){kr=!0;var Kr=Rr[Pr++];if(Kr===181){var Vr=Bt(Rr,Pr);if(Pr+=2,Vr===49){var Gr=Ft(Rr,Pr);if(Pr+=4,Gr===1195456820){var jr=Rr[Pr++];if(jr===3){var zr=Rr[Pr++],Xr=31&zr,Zr=64&zr,ln=Zr?2+Xr*3:0,Qr=new Uint8Array(ln);if(Zr){Qr[0]=zr;for(var an=1;an<ln;an++)Qr[an]=Rr[Pr++]}Cr.push({type:jr,payloadType:wr,pts:Ir,bytes:Qr})}}}}}else if(wr===5&&Dr<Br){if(kr=!0,Dr>16){for(var Jr=[],cn=0;cn<16;cn++){var un=Rr[Pr++].toString(16);Jr.push(un.length==1?"0"+un:un),(cn===3||cn===5||cn===7||cn===9)&&Jr.push("-")}for(var vn=Dr-16,hn=new Uint8Array(vn),fn=0;fn<vn;fn++)hn[fn]=Rr[Pr++];Cr.push({payloadType:wr,pts:Ir,uuid:Jr.join(""),userData:(0,kt.utf8ArrayToStr)(hn),userDataBytes:hn})}}else if(Dr<Br)Pr+=Dr;else if(Dr>Br)break}}function yr(Ar){for(var Or=Ar.byteLength,Ir=[],Cr=1;Cr<Or-2;)Ar[Cr]===0&&Ar[Cr+1]===0&&Ar[Cr+2]===3?(Ir.push(Cr+2),Cr+=2):Cr++;if(Ir.length===0)return Ar;var Rr=Or-Ir.length,Pr=new Uint8Array(Rr),wr=0;for(Cr=0;Cr<Rr;wr++,Cr++)wr===Ir[0]&&(wr++,Ir.shift()),Pr[Cr]=Ar[wr];return Pr}function gr(Ar){var Or=Ar[0],Ir="",Cr="",Rr=0,Pr=0,wr=0,Dr=0,kr=0,Fr=0;if(Or===0){for(;Ht(Ar.subarray(Fr,Fr+1))!=="\0";)Ir+=Ht(Ar.subarray(Fr,Fr+1)),Fr+=1;for(Ir+=Ht(Ar.subarray(Fr,Fr+1)),Fr+=1;Ht(Ar.subarray(Fr,Fr+1))!=="\0";)Cr+=Ht(Ar.subarray(Fr,Fr+1)),Fr+=1;Cr+=Ht(Ar.subarray(Fr,Fr+1)),Fr+=1,Rr=Ft(Ar,12),Pr=Ft(Ar,16),Dr=Ft(Ar,20),kr=Ft(Ar,24),Fr=28}else if(Or===1){Fr+=4,Rr=Ft(Ar,Fr),Fr+=4;var Br=Ft(Ar,Fr);Fr+=4;var Kr=Ft(Ar,Fr);for(Fr+=4,wr=Math.pow(2,32)*Br+Kr,Number.isSafeInteger(wr)||(wr=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),Dr=Ft(Ar,Fr),Fr+=4,kr=Ft(Ar,Fr),Fr+=4;Ht(Ar.subarray(Fr,Fr+1))!=="\0";)Ir+=Ht(Ar.subarray(Fr,Fr+1)),Fr+=1;for(Ir+=Ht(Ar.subarray(Fr,Fr+1)),Fr+=1;Ht(Ar.subarray(Fr,Fr+1))!=="\0";)Cr+=Ht(Ar.subarray(Fr,Fr+1)),Fr+=1;Cr+=Ht(Ar.subarray(Fr,Fr+1)),Fr+=1}var Vr=Ar.subarray(Fr,Ar.byteLength);return{schemeIdUri:Ir,value:Cr,timeScale:Rr,presentationTime:wr,presentationTimeDelta:Pr,eventDuration:Dr,id:kr,payload:Vr}}function Sr(Ar){for(var Or=arguments.length,Ir=new Array(Or>1?Or-1:0),Cr=1;Cr<Or;Cr++)Ir[Cr-1]=arguments[Cr];for(var Rr=Ir.length,Pr=8,wr=Rr;wr--;)Pr+=Ir[wr].byteLength;var Dr=new Uint8Array(Pr);for(Dr[0]=Pr>>24&255,Dr[1]=Pr>>16&255,Dr[2]=Pr>>8&255,Dr[3]=Pr&255,Dr.set(Ar,4),wr=0,Pr=8;wr<Rr;wr++)Dr.set(Ir[wr],Pr),Pr+=Ir[wr].byteLength;return Dr}function Tr(Ar,Or,Ir){if(Ar.byteLength!==16)throw new RangeError("Invalid system id");var Cr,Rr;if(Or){Cr=1,Rr=new Uint8Array(Or.length*16);for(var Pr=0;Pr<Or.length;Pr++){var wr=Or[Pr];if(wr.byteLength!==16)throw new RangeError("Invalid key");Rr.set(wr,Pr*16)}}else Cr=0,Rr=new Uint8Array;var Dr;Cr>0?(Dr=new Uint8Array(4),Or.length>0&&new DataView(Dr.buffer).setUint32(0,Or.length,!1)):Dr=new Uint8Array;var kr=new Uint8Array(4);return Ir&&Ir.byteLength>0&&new DataView(kr.buffer).setUint32(0,Ir.byteLength,!1),Sr([112,115,115,104],new Uint8Array([Cr,0,0,0]),Ar,Dr,Rr,kr,Ir||new Uint8Array)}function br(Ar){if(!(Ar instanceof ArrayBuffer)||Ar.byteLength<32)return null;var Or={version:0,systemId:"",kids:null,data:null},Ir=new DataView(Ar),Cr=Ir.getUint32(0);if(Ar.byteLength!==Cr&&Cr>44)return null;var Rr=Ir.getUint32(4);if(Rr!==1886614376||(Or.version=Ir.getUint32(8)>>>24,Or.version>1))return null;Or.systemId=zt.default.hexDump(new Uint8Array(Ar,12,16));var Pr=Ir.getUint32(28);if(Or.version===0){if(Cr-32<Pr)return null;Or.data=new Uint8Array(Ar,32,Pr)}else if(Or.version===1){Or.kids=[];for(var wr=0;wr<Pr;wr++)Or.kids.push(new Uint8Array(Ar,32+wr*16,16))}return Or}},"./src/utils/numeric-encoding-utils.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{base64Decode:()=>Wt,base64DecodeToStr:()=>kt,base64Encode:()=>Nt,base64ToBase64Url:()=>Rt,base64UrlEncode:()=>zt,strToBase64Encode:()=>Dt});function Rt(nr){return nr.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Dt(nr){return btoa(nr)}function kt(nr){return atob(nr)}function Nt(nr){return btoa(String.fromCharCode.apply(String,nr))}function zt(nr){return Rt(Nt(nr))}function Wt(nr){return Uint8Array.from(atob(nr),function(Ut){return Ut.charCodeAt(0)})}},"./src/utils/output-filter.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Rt});var Rt=function(){function Dt(Nt,zt){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=Nt,this.trackName=zt}var kt=Dt.prototype;return kt.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},kt.newCue=function(zt,Wt,nr){(this.startTime===null||this.startTime>zt)&&(this.startTime=zt),this.endTime=Wt,this.screen=nr,this.timelineController.createCaptionsTrack(this.trackName)},kt.reset=function(){this.cueRanges=[],this.startTime=null},Dt}()},"./src/utils/texttrack-utils.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{addCueToTrack:()=>kt,clearCurrentCues:()=>Nt,getCuesInRange:()=>nr,removeCuesInRange:()=>zt,sendAddTrackEvent:()=>Dt});var Rt=Ct("./src/utils/logger.ts");function Dt(Ut,Ht){var Bt;try{Bt=new Event("addtrack")}catch{Bt=document.createEvent("Event"),Bt.initEvent("addtrack",!1,!1)}Bt.track=Ut,Ht.dispatchEvent(Bt)}function kt(Ut,Ht){var Bt=Ut.mode;if(Bt==="disabled"&&(Ut.mode="hidden"),Ut.cues&&!Ut.cues.getCueById(Ht.id))try{if(Ut.addCue(Ht),!Ut.cues.getCueById(Ht.id))throw new Error("addCue is failed for: "+Ht)}catch(tr){Rt.logger.debug("[texttrack-utils]: "+tr);var Ft=new self.TextTrackCue(Ht.startTime,Ht.endTime,Ht.text);Ft.id=Ht.id,Ut.addCue(Ft)}Bt==="disabled"&&(Ut.mode=Bt)}function Nt(Ut){var Ht=Ut.mode;if(Ht==="disabled"&&(Ut.mode="hidden"),Ut.cues)for(var Bt=Ut.cues.length;Bt--;)Ut.removeCue(Ut.cues[Bt]);Ht==="disabled"&&(Ut.mode=Ht)}function zt(Ut,Ht,Bt,Ft){var tr=Ut.mode;if(tr==="disabled"&&(Ut.mode="hidden"),Ut.cues&&Ut.cues.length>0)for(var cr=nr(Ut.cues,Ht,Bt),Kt=0;Kt<cr.length;Kt++)(!Ft||Ft(cr[Kt]))&&Ut.removeCue(cr[Kt]);tr==="disabled"&&(Ut.mode=tr)}function Wt(Ut,Ht){if(Ht<Ut[0].startTime)return 0;var Bt=Ut.length-1;if(Ht>Ut[Bt].endTime)return-1;for(var Ft=0,tr=Bt;Ft<=tr;){var cr=Math.floor((tr+Ft)/2);if(Ht<Ut[cr].startTime)tr=cr-1;else if(Ht>Ut[cr].startTime&&Ft<Bt)Ft=cr+1;else return cr}return Ut[Ft].startTime-Ht<Ht-Ut[tr].startTime?Ft:tr}function nr(Ut,Ht,Bt){var Ft=[],tr=Wt(Ut,Ht);if(tr>-1)for(var cr=tr,Kt=Ut.length;cr<Kt;cr++){var Zt=Ut[cr];if(Zt.startTime>=Ht&&Zt.endTime<=Bt)Ft.push(Zt);else if(Zt.startTime>Bt)return Ft}return Ft}},"./src/utils/time-ranges.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Dt});var Rt={toString:function(Nt){for(var zt="",Wt=Nt.length,nr=0;nr<Wt;nr++)zt+="["+Nt.start(nr).toFixed(3)+"-"+Nt.end(nr).toFixed(3)+"]";return zt}};const Dt=Rt},"./src/utils/timescale-conversion.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{toMpegTsClockFromTimescale:()=>zt,toMsFromMpegTsClock:()=>Nt,toTimescaleFromBase:()=>Dt,toTimescaleFromScale:()=>kt});var Rt=9e4;function Dt(Wt,nr,Ut,Ht){Ut===void 0&&(Ut=1),Ht===void 0&&(Ht=!1);var Bt=Wt*nr*Ut;return Ht?Math.round(Bt):Bt}function kt(Wt,nr,Ut,Ht){return Ut===void 0&&(Ut=1),Ht===void 0&&(Ht=!1),Dt(Wt,nr,1/Ut,Ht)}function Nt(Wt,nr){return nr===void 0&&(nr=!1),Dt(Wt,1e3,1/Rt,nr)}function zt(Wt,nr){return nr===void 0&&(nr=1),Dt(Wt,Rt,1/nr)}},"./src/utils/typed-array.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{sliceUint8:()=>Rt});function Rt(Dt,kt,Nt){return Uint8Array.prototype.slice?Dt.slice(kt,Nt):new Uint8Array(Array.prototype.slice.call(Dt,kt,Nt))}},"./src/utils/vttcue.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>Rt});const Rt=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var Dt=["","lr","rl"],kt=["start","middle","end","left","right"];function Nt(Ht,Bt){if(typeof Bt!="string"||!Array.isArray(Ht))return!1;var Ft=Bt.toLowerCase();return~Ht.indexOf(Ft)?Ft:!1}function zt(Ht){return Nt(Dt,Ht)}function Wt(Ht){return Nt(kt,Ht)}function nr(Ht){for(var Bt=arguments.length,Ft=new Array(Bt>1?Bt-1:0),tr=1;tr<Bt;tr++)Ft[tr-1]=arguments[tr];for(var cr=1;cr<arguments.length;cr++){var Kt=arguments[cr];for(var Zt in Kt)Ht[Zt]=Kt[Zt]}return Ht}function Ut(Ht,Bt,Ft){var tr=this,cr={enumerable:!0};tr.hasBeenReset=!1;var Kt="",Zt=!1,rr=Ht,ar=Bt,sr=Ft,dr=null,fr="",pr=!0,xr="auto",lr="start",hr=50,ur="middle",mr=50,ir="middle";Object.defineProperty(tr,"id",nr({},cr,{get:function(){return Kt},set:function(yr){Kt=""+yr}})),Object.defineProperty(tr,"pauseOnExit",nr({},cr,{get:function(){return Zt},set:function(yr){Zt=!!yr}})),Object.defineProperty(tr,"startTime",nr({},cr,{get:function(){return rr},set:function(yr){if(typeof yr!="number")throw new TypeError("Start time must be set to a number.");rr=yr,this.hasBeenReset=!0}})),Object.defineProperty(tr,"endTime",nr({},cr,{get:function(){return ar},set:function(yr){if(typeof yr!="number")throw new TypeError("End time must be set to a number.");ar=yr,this.hasBeenReset=!0}})),Object.defineProperty(tr,"text",nr({},cr,{get:function(){return sr},set:function(yr){sr=""+yr,this.hasBeenReset=!0}})),Object.defineProperty(tr,"region",nr({},cr,{get:function(){return dr},set:function(yr){dr=yr,this.hasBeenReset=!0}})),Object.defineProperty(tr,"vertical",nr({},cr,{get:function(){return fr},set:function(yr){var gr=zt(yr);if(gr===!1)throw new SyntaxError("An invalid or illegal string was specified.");fr=gr,this.hasBeenReset=!0}})),Object.defineProperty(tr,"snapToLines",nr({},cr,{get:function(){return pr},set:function(yr){pr=!!yr,this.hasBeenReset=!0}})),Object.defineProperty(tr,"line",nr({},cr,{get:function(){return xr},set:function(yr){if(typeof yr!="number"&&yr!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");xr=yr,this.hasBeenReset=!0}})),Object.defineProperty(tr,"lineAlign",nr({},cr,{get:function(){return lr},set:function(yr){var gr=Wt(yr);if(!gr)throw new SyntaxError("An invalid or illegal string was specified.");lr=gr,this.hasBeenReset=!0}})),Object.defineProperty(tr,"position",nr({},cr,{get:function(){return hr},set:function(yr){if(yr<0||yr>100)throw new Error("Position must be between 0 and 100.");hr=yr,this.hasBeenReset=!0}})),Object.defineProperty(tr,"positionAlign",nr({},cr,{get:function(){return ur},set:function(yr){var gr=Wt(yr);if(!gr)throw new SyntaxError("An invalid or illegal string was specified.");ur=gr,this.hasBeenReset=!0}})),Object.defineProperty(tr,"size",nr({},cr,{get:function(){return mr},set:function(yr){if(yr<0||yr>100)throw new Error("Size must be between 0 and 100.");mr=yr,this.hasBeenReset=!0}})),Object.defineProperty(tr,"align",nr({},cr,{get:function(){return ir},set:function(yr){var gr=Wt(yr);if(!gr)throw new SyntaxError("An invalid or illegal string was specified.");ir=gr,this.hasBeenReset=!0}})),tr.displayState=void 0}return Ut.prototype.getCueAsHTML=function(){var Ht=self.WebVTT;return Ht.convertCueToDOMTree(self,this.text)},Ut}()},"./src/utils/vttparser.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{VTTParser:()=>Bt,fixLineBreaks:()=>Ht,parseTimeStamp:()=>kt});var Rt=Ct("./src/utils/vttcue.ts"),Dt=function(){function Ft(){}var tr=Ft.prototype;return tr.decode=function(Kt,Zt){if(!Kt)return"";if(typeof Kt!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(Kt))},Ft}();function kt(Ft){function tr(Kt,Zt,rr,ar){return(Kt|0)*3600+(Zt|0)*60+(rr|0)+parseFloat(ar||0)}var cr=Ft.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return cr?parseFloat(cr[2])>59?tr(cr[2],cr[3],0,cr[4]):tr(cr[1],cr[2],cr[3],cr[4]):null}var Nt=function(){function Ft(){this.values=Object.create(null)}var tr=Ft.prototype;return tr.set=function(Kt,Zt){!this.get(Kt)&&Zt!==""&&(this.values[Kt]=Zt)},tr.get=function(Kt,Zt,rr){return rr?this.has(Kt)?this.values[Kt]:Zt[rr]:this.has(Kt)?this.values[Kt]:Zt},tr.has=function(Kt){return Kt in this.values},tr.alt=function(Kt,Zt,rr){for(var ar=0;ar<rr.length;++ar)if(Zt===rr[ar]){this.set(Kt,Zt);break}},tr.integer=function(Kt,Zt){/^-?\d+$/.test(Zt)&&this.set(Kt,parseInt(Zt,10))},tr.percent=function(Kt,Zt){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(Zt)){var rr=parseFloat(Zt);if(rr>=0&&rr<=100)return this.set(Kt,rr),!0}return!1},Ft}();function zt(Ft,tr,cr,Kt){var Zt=Kt?Ft.split(Kt):[Ft];for(var rr in Zt)if(typeof Zt[rr]=="string"){var ar=Zt[rr].split(cr);if(ar.length===2){var sr=ar[0],dr=ar[1];tr(sr,dr)}}}var Wt=new Rt.default(0,0,""),nr=Wt.align==="middle"?"middle":"center";function Ut(Ft,tr,cr){var Kt=Ft;function Zt(){var sr=kt(Ft);if(sr===null)throw new Error("Malformed timestamp: "+Kt);return Ft=Ft.replace(/^[^\sa-zA-Z-]+/,""),sr}function rr(sr,dr){var fr=new Nt;zt(sr,function(lr,hr){var ur;switch(lr){case"region":for(var mr=cr.length-1;mr>=0;mr--)if(cr[mr].id===hr){fr.set(lr,cr[mr].region);break}break;case"vertical":fr.alt(lr,hr,["rl","lr"]);break;case"line":ur=hr.split(","),fr.integer(lr,ur[0]),fr.percent(lr,ur[0])&&fr.set("snapToLines",!1),fr.alt(lr,ur[0],["auto"]),ur.length===2&&fr.alt("lineAlign",ur[1],["start",nr,"end"]);break;case"position":ur=hr.split(","),fr.percent(lr,ur[0]),ur.length===2&&fr.alt("positionAlign",ur[1],["start",nr,"end","line-left","line-right","auto"]);break;case"size":fr.percent(lr,hr);break;case"align":fr.alt(lr,hr,["start",nr,"end","left","right"]);break}},/:/,/\s/),dr.region=fr.get("region",null),dr.vertical=fr.get("vertical","");var pr=fr.get("line","auto");pr==="auto"&&Wt.line===-1&&(pr=-1),dr.line=pr,dr.lineAlign=fr.get("lineAlign","start"),dr.snapToLines=fr.get("snapToLines",!0),dr.size=fr.get("size",100),dr.align=fr.get("align",nr);var xr=fr.get("position","auto");xr==="auto"&&Wt.position===50&&(xr=dr.align==="start"||dr.align==="left"?0:dr.align==="end"||dr.align==="right"?100:50),dr.position=xr}function ar(){Ft=Ft.replace(/^\s+/,"")}if(ar(),tr.startTime=Zt(),ar(),Ft.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+Kt);Ft=Ft.slice(3),ar(),tr.endTime=Zt(),ar(),rr(Ft,tr)}function Ht(Ft){return Ft.replace(/<br(?: \/)?>/gi,`
`)}var Bt=function(){function Ft(){this.state="INITIAL",this.buffer="",this.decoder=new Dt,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var tr=Ft.prototype;return tr.parse=function(Kt){var Zt=this;Kt&&(Zt.buffer+=Zt.decoder.decode(Kt,{stream:!0}));function rr(){var xr=Zt.buffer,lr=0;for(xr=Ht(xr);lr<xr.length&&xr[lr]!=="\r"&&xr[lr]!==`
`;)++lr;var hr=xr.slice(0,lr);return xr[lr]==="\r"&&++lr,xr[lr]===`
`&&++lr,Zt.buffer=xr.slice(lr),hr}function ar(xr){zt(xr,function(lr,hr){},/:/)}try{var sr="";if(Zt.state==="INITIAL"){if(!/\r\n|\n/.test(Zt.buffer))return this;sr=rr();var dr=sr.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!dr||!dr[0])throw new Error("Malformed WebVTT signature.");Zt.state="HEADER"}for(var fr=!1;Zt.buffer;){if(!/\r\n|\n/.test(Zt.buffer))return this;switch(fr?fr=!1:sr=rr(),Zt.state){case"HEADER":/:/.test(sr)?ar(sr):sr||(Zt.state="ID");continue;case"NOTE":sr||(Zt.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(sr)){Zt.state="NOTE";break}if(!sr)continue;if(Zt.cue=new Rt.default(0,0,""),Zt.state="CUE",sr.indexOf("-->")===-1){Zt.cue.id=sr;continue}case"CUE":if(!Zt.cue){Zt.state="BADCUE";continue}try{Ut(sr,Zt.cue,Zt.regionList)}catch{Zt.cue=null,Zt.state="BADCUE";continue}Zt.state="CUETEXT";continue;case"CUETEXT":{var pr=sr.indexOf("-->")!==-1;if(!sr||pr&&(fr=!0)){Zt.oncue&&Zt.cue&&Zt.oncue(Zt.cue),Zt.cue=null,Zt.state="ID";continue}if(Zt.cue===null)continue;Zt.cue.text&&(Zt.cue.text+=`
`),Zt.cue.text+=sr}continue;case"BADCUE":sr||(Zt.state="ID")}}}catch{Zt.state==="CUETEXT"&&Zt.cue&&Zt.oncue&&Zt.oncue(Zt.cue),Zt.cue=null,Zt.state=Zt.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},tr.flush=function(){var Kt=this;try{if((Kt.cue||Kt.state==="HEADER")&&(Kt.buffer+=`

`,Kt.parse()),Kt.state==="INITIAL"||Kt.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(Zt){Kt.onparsingerror&&Kt.onparsingerror(Zt)}return Kt.onflush&&Kt.onflush(),this},Ft}()},"./src/utils/webvtt-parser.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{generateCueId:()=>Bt,parseWebVTT:()=>tr});var Rt=Ct("./src/polyfills/number.ts"),Dt=Ct("./src/utils/vttparser.ts"),kt=Ct("./src/demux/id3.ts"),Nt=Ct("./src/utils/timescale-conversion.ts"),zt=Ct("./src/remux/mp4-remuxer.ts"),Wt=/\r\n|\n\r|\n|\r/g,nr=function(Kt,Zt,rr){return rr===void 0&&(rr=0),Kt.slice(rr,rr+Zt.length)===Zt},Ut=function(Kt){var Zt=parseInt(Kt.slice(-3)),rr=parseInt(Kt.slice(-6,-4)),ar=parseInt(Kt.slice(-9,-7)),sr=Kt.length>9?parseInt(Kt.substring(0,Kt.indexOf(":"))):0;if(!(0,Rt.isFiniteNumber)(Zt)||!(0,Rt.isFiniteNumber)(rr)||!(0,Rt.isFiniteNumber)(ar)||!(0,Rt.isFiniteNumber)(sr))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+Kt);return Zt+=1e3*rr,Zt+=60*1e3*ar,Zt+=60*60*1e3*sr,Zt},Ht=function(Kt){for(var Zt=5381,rr=Kt.length;rr;)Zt=Zt*33^Kt.charCodeAt(--rr);return(Zt>>>0).toString()};function Bt(cr,Kt,Zt){return Ht(cr.toString())+Ht(Kt.toString())+Ht(Zt)}var Ft=function(Kt,Zt,rr){var ar=Kt[Zt],sr=Kt[ar.prevCC];if(!sr||!sr.new&&ar.new){Kt.ccOffset=Kt.presentationOffset=ar.start,ar.new=!1;return}for(;(dr=sr)!==null&&dr!==void 0&&dr.new;){var dr;Kt.ccOffset+=ar.start-sr.start,ar.new=!1,ar=sr,sr=Kt[ar.prevCC]}Kt.presentationOffset=rr};function tr(cr,Kt,Zt,rr,ar,sr,dr,fr){var pr=new Dt.VTTParser,xr=(0,kt.utf8ArrayToStr)(new Uint8Array(cr)).trim().replace(Wt,`
`).split(`
`),lr=[],hr=(0,Nt.toMpegTsClockFromTimescale)(Kt,Zt),ur="00:00.000",mr=0,ir=0,_r,yr=!0;pr.oncue=function(gr){var Sr=rr[ar],Tr=rr.ccOffset,br=(mr-hr)/9e4;Sr!=null&&Sr.new&&(ir!==void 0?Tr=rr.ccOffset=Sr.start:Ft(rr,ar,br)),br&&(Tr=br-rr.presentationOffset);var Ar=gr.endTime-gr.startTime,Or=(0,zt.normalizePts)((gr.startTime+Tr-ir)*9e4,sr*9e4)/9e4;gr.startTime=Math.max(Or,0),gr.endTime=Math.max(Or+Ar,0);var Ir=gr.text.trim();gr.text=decodeURIComponent(encodeURIComponent(Ir)),gr.id||(gr.id=Bt(gr.startTime,gr.endTime,Ir)),gr.endTime>0&&lr.push(gr)},pr.onparsingerror=function(gr){_r=gr},pr.onflush=function(){if(_r){fr(_r);return}dr(lr)},xr.forEach(function(gr){if(yr)if(nr(gr,"X-TIMESTAMP-MAP=")){yr=!1,gr.slice(16).split(",").forEach(function(Sr){nr(Sr,"LOCAL:")?ur=Sr.slice(6):nr(Sr,"MPEGTS:")&&(mr=parseInt(Sr.slice(7)))});try{ir=Ut(ur)/1e3}catch(Sr){_r=Sr}return}else gr===""&&(yr=!1);pr.parse(gr+`
`)}),pr.flush()}},"./src/utils/xhr-loader.ts":(Tt,At,Ct)=>{Ct.r(At),Ct.d(At,{default:()=>zt});var Rt=Ct("./src/utils/logger.ts"),Dt=Ct("./src/loader/load-stats.ts"),kt=/^age:\s*[\d.]+\s*$/m,Nt=function(){function Wt(Ut){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=Ut?Ut.xhrSetup:null,this.stats=new Dt.LoadStats,this.retryDelay=0}var nr=Wt.prototype;return nr.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},nr.abortInternal=function(){var Ht=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),Ht&&(Ht.onreadystatechange=null,Ht.onprogress=null,Ht.readyState!==4&&(this.stats.aborted=!0,Ht.abort()))},nr.abort=function(){var Ht;this.abortInternal(),(Ht=this.callbacks)!==null&&Ht!==void 0&&Ht.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},nr.load=function(Ht,Bt,Ft){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=Ht,this.config=Bt,this.callbacks=Ft,this.retryDelay=Bt.retryDelay,this.loadInternal()},nr.loadInternal=function(){var Ht=this.config,Bt=this.context;if(Ht){var Ft=this.loader=new self.XMLHttpRequest,tr=this.stats;tr.loading.first=0,tr.loaded=0;var cr=this.xhrSetup;try{if(cr)try{cr(Ft,Bt.url)}catch{Ft.open("GET",Bt.url,!0),cr(Ft,Bt.url)}Ft.readyState||Ft.open("GET",Bt.url,!0);var Kt=this.context.headers;if(Kt)for(var Zt in Kt)Ft.setRequestHeader(Zt,Kt[Zt])}catch(rr){this.callbacks.onError({code:Ft.status,text:rr.message},Bt,Ft);return}Bt.rangeEnd&&Ft.setRequestHeader("Range","bytes="+Bt.rangeStart+"-"+(Bt.rangeEnd-1)),Ft.onreadystatechange=this.readystatechange.bind(this),Ft.onprogress=this.loadprogress.bind(this),Ft.responseType=Bt.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),Ht.timeout),Ft.send()}},nr.readystatechange=function(){var Ht=this.context,Bt=this.loader,Ft=this.stats;if(!(!Ht||!Bt)){var tr=Bt.readyState,cr=this.config;if(!Ft.aborted&&tr>=2)if(self.clearTimeout(this.requestTimeout),Ft.loading.first===0&&(Ft.loading.first=Math.max(self.performance.now(),Ft.loading.start)),tr===4){Bt.onreadystatechange=null,Bt.onprogress=null;var Kt=Bt.status,Zt=Bt.responseType==="arraybuffer";if(Kt>=200&&Kt<300&&(Zt&&Bt.response||Bt.responseText!==null)){Ft.loading.end=Math.max(self.performance.now(),Ft.loading.first);var rr,ar;if(Zt?(rr=Bt.response,ar=rr.byteLength):(rr=Bt.responseText,ar=rr.length),Ft.loaded=Ft.total=ar,!this.callbacks)return;var sr=this.callbacks.onProgress;if(sr&&sr(Ft,Ht,rr,Bt),!this.callbacks)return;var dr={url:Bt.responseURL,data:rr};this.callbacks.onSuccess(dr,Ft,Ht,Bt)}else Ft.retry>=cr.maxRetry||Kt>=400&&Kt<499?(Rt.logger.error(Kt+" while loading "+Ht.url),this.callbacks.onError({code:Kt,text:Bt.statusText},Ht,Bt)):(Rt.logger.warn(Kt+" while loading "+Ht.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,cr.maxRetryDelay),Ft.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),cr.timeout)}},nr.loadtimeout=function(){Rt.logger.warn("timeout while loading "+this.context.url);var Ht=this.callbacks;Ht&&(this.abortInternal(),Ht.onTimeout(this.stats,this.context,this.loader))},nr.loadprogress=function(Ht){var Bt=this.stats;Bt.loaded=Ht.loaded,Ht.lengthComputable&&(Bt.total=Ht.total)},nr.getCacheAge=function(){var Ht=null;if(this.loader&&kt.test(this.loader.getAllResponseHeaders())){var Bt=this.loader.getResponseHeader("age");Ht=Bt?parseFloat(Bt):null}return Ht},Wt}();const zt=Nt},"./node_modules/eventemitter3/index.js":Tt=>{var At=Object.prototype.hasOwnProperty,Ct="~";function Rt(){}Object.create&&(Rt.prototype=Object.create(null),new Rt().__proto__||(Ct=!1));function Dt(Wt,nr,Ut){this.fn=Wt,this.context=nr,this.once=Ut||!1}function kt(Wt,nr,Ut,Ht,Bt){if(typeof Ut!="function")throw new TypeError("The listener must be a function");var Ft=new Dt(Ut,Ht||Wt,Bt),tr=Ct?Ct+nr:nr;return Wt._events[tr]?Wt._events[tr].fn?Wt._events[tr]=[Wt._events[tr],Ft]:Wt._events[tr].push(Ft):(Wt._events[tr]=Ft,Wt._eventsCount++),Wt}function Nt(Wt,nr){--Wt._eventsCount===0?Wt._events=new Rt:delete Wt._events[nr]}function zt(){this._events=new Rt,this._eventsCount=0}zt.prototype.eventNames=function(){var nr=[],Ut,Ht;if(this._eventsCount===0)return nr;for(Ht in Ut=this._events)At.call(Ut,Ht)&&nr.push(Ct?Ht.slice(1):Ht);return Object.getOwnPropertySymbols?nr.concat(Object.getOwnPropertySymbols(Ut)):nr},zt.prototype.listeners=function(nr){var Ut=Ct?Ct+nr:nr,Ht=this._events[Ut];if(!Ht)return[];if(Ht.fn)return[Ht.fn];for(var Bt=0,Ft=Ht.length,tr=new Array(Ft);Bt<Ft;Bt++)tr[Bt]=Ht[Bt].fn;return tr},zt.prototype.listenerCount=function(nr){var Ut=Ct?Ct+nr:nr,Ht=this._events[Ut];return Ht?Ht.fn?1:Ht.length:0},zt.prototype.emit=function(nr,Ut,Ht,Bt,Ft,tr){var cr=Ct?Ct+nr:nr;if(!this._events[cr])return!1;var Kt=this._events[cr],Zt=arguments.length,rr,ar;if(Kt.fn){switch(Kt.once&&this.removeListener(nr,Kt.fn,void 0,!0),Zt){case 1:return Kt.fn.call(Kt.context),!0;case 2:return Kt.fn.call(Kt.context,Ut),!0;case 3:return Kt.fn.call(Kt.context,Ut,Ht),!0;case 4:return Kt.fn.call(Kt.context,Ut,Ht,Bt),!0;case 5:return Kt.fn.call(Kt.context,Ut,Ht,Bt,Ft),!0;case 6:return Kt.fn.call(Kt.context,Ut,Ht,Bt,Ft,tr),!0}for(ar=1,rr=new Array(Zt-1);ar<Zt;ar++)rr[ar-1]=arguments[ar];Kt.fn.apply(Kt.context,rr)}else{var sr=Kt.length,dr;for(ar=0;ar<sr;ar++)switch(Kt[ar].once&&this.removeListener(nr,Kt[ar].fn,void 0,!0),Zt){case 1:Kt[ar].fn.call(Kt[ar].context);break;case 2:Kt[ar].fn.call(Kt[ar].context,Ut);break;case 3:Kt[ar].fn.call(Kt[ar].context,Ut,Ht);break;case 4:Kt[ar].fn.call(Kt[ar].context,Ut,Ht,Bt);break;default:if(!rr)for(dr=1,rr=new Array(Zt-1);dr<Zt;dr++)rr[dr-1]=arguments[dr];Kt[ar].fn.apply(Kt[ar].context,rr)}}return!0},zt.prototype.on=function(nr,Ut,Ht){return kt(this,nr,Ut,Ht,!1)},zt.prototype.once=function(nr,Ut,Ht){return kt(this,nr,Ut,Ht,!0)},zt.prototype.removeListener=function(nr,Ut,Ht,Bt){var Ft=Ct?Ct+nr:nr;if(!this._events[Ft])return this;if(!Ut)return Nt(this,Ft),this;var tr=this._events[Ft];if(tr.fn)tr.fn===Ut&&(!Bt||tr.once)&&(!Ht||tr.context===Ht)&&Nt(this,Ft);else{for(var cr=0,Kt=[],Zt=tr.length;cr<Zt;cr++)(tr[cr].fn!==Ut||Bt&&!tr[cr].once||Ht&&tr[cr].context!==Ht)&&Kt.push(tr[cr]);Kt.length?this._events[Ft]=Kt.length===1?Kt[0]:Kt:Nt(this,Ft)}return this},zt.prototype.removeAllListeners=function(nr){var Ut;return nr?(Ut=Ct?Ct+nr:nr,this._events[Ut]&&Nt(this,Ut)):(this._events=new Rt,this._eventsCount=0),this},zt.prototype.off=zt.prototype.removeListener,zt.prototype.addListener=zt.prototype.on,zt.prefixed=Ct,zt.EventEmitter=zt,Tt.exports=zt},"./node_modules/url-toolkit/src/url-toolkit.js":function(Tt){(function(At){var Ct=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,Rt=/^(?=([^\/?#]*))\1([^]*)$/,Dt=/(?:\/|^)\.(?=\/)/g,kt=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Nt={buildAbsoluteURL:function(zt,Wt,nr){if(nr=nr||{},zt=zt.trim(),Wt=Wt.trim(),!Wt){if(!nr.alwaysNormalize)return zt;var Ut=Nt.parseURL(zt);if(!Ut)throw new Error("Error trying to parse base URL.");return Ut.path=Nt.normalizePath(Ut.path),Nt.buildURLFromParts(Ut)}var Ht=Nt.parseURL(Wt);if(!Ht)throw new Error("Error trying to parse relative URL.");if(Ht.scheme)return nr.alwaysNormalize?(Ht.path=Nt.normalizePath(Ht.path),Nt.buildURLFromParts(Ht)):Wt;var Bt=Nt.parseURL(zt);if(!Bt)throw new Error("Error trying to parse base URL.");if(!Bt.netLoc&&Bt.path&&Bt.path[0]!=="/"){var Ft=Rt.exec(Bt.path);Bt.netLoc=Ft[1],Bt.path=Ft[2]}Bt.netLoc&&!Bt.path&&(Bt.path="/");var tr={scheme:Bt.scheme,netLoc:Ht.netLoc,path:null,params:Ht.params,query:Ht.query,fragment:Ht.fragment};if(!Ht.netLoc&&(tr.netLoc=Bt.netLoc,Ht.path[0]!=="/"))if(!Ht.path)tr.path=Bt.path,Ht.params||(tr.params=Bt.params,Ht.query||(tr.query=Bt.query));else{var cr=Bt.path,Kt=cr.substring(0,cr.lastIndexOf("/")+1)+Ht.path;tr.path=Nt.normalizePath(Kt)}return tr.path===null&&(tr.path=nr.alwaysNormalize?Nt.normalizePath(Ht.path):Ht.path),Nt.buildURLFromParts(tr)},parseURL:function(zt){var Wt=Ct.exec(zt);return Wt?{scheme:Wt[1]||"",netLoc:Wt[2]||"",path:Wt[3]||"",params:Wt[4]||"",query:Wt[5]||"",fragment:Wt[6]||""}:null},normalizePath:function(zt){for(zt=zt.split("").reverse().join("").replace(Dt,"");zt.length!==(zt=zt.replace(kt,"")).length;);return zt.split("").reverse().join("")},buildURLFromParts:function(zt){return zt.scheme+zt.netLoc+zt.path+zt.params+zt.query+zt.fragment}};Tt.exports=Nt})()}},vt={};function Et(Tt){var At=vt[Tt];if(At!==void 0)return At.exports;var Ct=vt[Tt]={exports:{}};return dt[Tt].call(Ct.exports,Ct,Ct.exports,Et),Ct.exports}Et.m=dt,Et.n=Tt=>{var At=Tt&&Tt.__esModule?()=>Tt.default:()=>Tt;return Et.d(At,{a:At}),At},Et.d=(Tt,At)=>{for(var Ct in At)Et.o(At,Ct)&&!Et.o(Tt,Ct)&&Object.defineProperty(Tt,Ct,{enumerable:!0,get:At[Ct]})},Et.o=(Tt,At)=>Object.prototype.hasOwnProperty.call(Tt,At),Et.r=Tt=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Tt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Tt,"__esModule",{value:!0})};var St=Et("./src/hls.ts");return St=St.default,St})())})(hls);const Hls=getDefaultExportFromCjs(hlsExports);var MWStreamType=(lt=>(lt.MP4="mp4",lt.HLS="hls",lt))(MWStreamType||{}),MWCaptionType=(lt=>(lt.VTT="vtt",lt.SRT="srt",lt.UNKNOWN="unknown",lt))(MWCaptionType||{}),MWStreamQuality=(lt=>(lt.Q360P="360p",lt.Q540P="540p",lt.Q480P="480p",lt.Q720P="720p",lt.Q1080P="1080p",lt.QUNKNOWN="unknown",lt))(MWStreamQuality||{});function errorMessage(lt){switch(lt.code){case MediaError.MEDIA_ERR_ABORTED:return{code:"ABORTED",description:"Video was aborted"};case MediaError.MEDIA_ERR_NETWORK:return{code:"NETWORK_ERROR",description:"A network error occured, the video failed to stream"};case MediaError.MEDIA_ERR_DECODE:return{code:"DECODE_ERROR",description:"Video stream could not be decoded"};case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return{code:"SRC_NOT_SUPPORTED",description:"The video type is not supported by your browser"};default:return{code:"UNKNOWN_ERROR",description:"Unknown media error occured"}}}function createVideoStateProvider(lt,ft){const dt=ft,vt=getPlayerState(lt);return{getId(){return"video"},play(){dt.play()},pause(){dt.pause()},exitFullscreen(){fscreen$1.fullscreenElement&&fscreen$1.exitFullscreen()},enterFullscreen(){if(!(!canFullscreen()||fscreen$1.fullscreenElement)){if(canFullscreenAnyElement()){vt.wrapperElement&&fscreen$1.requestFullscreen(vt.wrapperElement);return}canWebkitFullscreen()&&dt.webkitEnterFullscreen()}},startAirplay(){const Et=dt;Et.webkitShowPlaybackTargetPicker&&Et.webkitShowPlaybackTargetPicker()},setTime(Et){let St=Math.min(Et,dt.duration);St=Math.max(0,St),!Number.isNaN(St)&&(dt.currentTime=St,vt.progress.time=St,updateProgress(lt,vt))},setSeeking(Et){if(vt.mediaPlaying.isSeeking=Et,vt.mediaPlaying.isDragSeeking=Et,updateMediaPlaying(lt,vt),!Et){vt.pausedWhenSeeking||this.play();return}vt.pausedWhenSeeking=vt.mediaPlaying.isPaused,this.pause()},async setVolume(Et){let St=Math.min(Et,1);St=Math.max(0,St),await canChangeVolume()&&(dt.volume=St),vt.mediaPlaying.volume=St,updateMediaPlaying(lt,vt),setStoredVolume(St)},setSource(Et){if(!Et){resetStateForSource(lt,vt),dt.removeAttribute("src"),dt.load(),vt.source=null,updateSource(lt,vt);return}if(resetStateForSource(lt,vt),(Et==null?void 0:Et.type)===MWStreamType.HLS)if(dt.canPlayType("application/vnd.apple.mpegurl"))dt.src=Et.source;else{if(!Hls.isSupported()){vt.error={name:"Not supported",description:"Your browser does not support HLS video"},updateError(lt,vt);return}const St=new Hls({enableWorker:!1});vt.hlsInstance=St,St.on(Hls.Events.ERROR,(Tt,At)=>{var Ct;At.fatal&&(vt.error={name:`error ${At.details}`,description:((Ct=At.error)==null?void 0:Ct.message)??"Something went wrong"},updateError(lt,vt)),console.error("HLS error",At)}),St.attachMedia(dt),St.loadSource(Et.source)}else Et.type===MWStreamType.MP4&&(dt.src=Et.source);vt.source={quality:Et.quality,type:Et.type,url:Et.source,caption:null,embedId:Et.embedId,providerId:Et.providerId},updateSource(lt,vt)},setCaption(Et,St){var Tt;vt.source&&(revokeCaptionBlob((Tt=vt.source.caption)==null?void 0:Tt.url),vt.source.caption={id:Et,url:St},updateSource(lt,vt))},clearCaption(){var Et;vt.source&&(revokeCaptionBlob((Et=vt.source.caption)==null?void 0:Et.url),vt.source.caption=null,updateSource(lt,vt))},togglePictureInPicture(){if(canWebkitPictureInPicture()){const Et=dt;Et.webkitSetPresentationMode(Et.webkitPresentationMode==="picture-in-picture"?"inline":"picture-in-picture")}canPictureInPicture()&&(dt!==document.pictureInPictureElement?dt.requestPictureInPicture():document.exitPictureInPicture())},setPlaybackSpeed(Et){dt.playbackRate=Et,vt.mediaPlaying.playbackSpeed=Et,updateMediaPlaying(lt,vt)},providerStart(){var Ft,tr,cr;this.setVolume(getStoredVolume());const Et=()=>{vt.mediaPlaying.isPaused=!0,vt.mediaPlaying.isPlaying=!1,updateMediaPlaying(lt,vt)},St=()=>{vt.mediaPlaying.isPaused=!1,vt.mediaPlaying.isPlaying=!0,vt.mediaPlaying.isLoading=!1,vt.mediaPlaying.hasPlayedOnce=!0,updateMediaPlaying(lt,vt)},Tt=()=>{vt.mediaPlaying.isLoading=!0,updateMediaPlaying(lt,vt)},At=()=>{vt.mediaPlaying.isSeeking=!0,updateMediaPlaying(lt,vt)},Ct=()=>{vt.mediaPlaying.isSeeking=!1,updateMediaPlaying(lt,vt)},Rt=()=>{vt.progress.duration=dt.duration,updateProgress(lt,vt)},Dt=()=>{vt.progress.duration=dt.duration,vt.progress.time=dt.currentTime,updateProgress(lt,vt)},kt=()=>{vt.progress.buffered=handleBuffered(dt.currentTime,dt.buffered),updateProgress(lt,vt)},Nt=()=>{vt.mediaPlaying.isFirstLoading=!1,vt.mediaPlaying.isLoading=!1,updateMediaPlaying(lt,vt)},zt=()=>{vt.mediaPlaying.playbackSpeed=dt.playbackRate,updateMediaPlaying(lt,vt)},Wt=()=>{vt.interface.isFullscreen=!!document.fullscreenElement||!!document.webkitFullscreenElement,updateInterface(lt,vt)},nr=async()=>{await canChangeVolume()&&(vt.mediaPlaying.volume=dt.volume,updateMediaPlaying(lt,vt))},Ut=Kt=>{vt.interface.isFocused=Kt.type!=="mouseleave",updateInterface(lt,vt)},Ht=Kt=>{Kt.availability==="available"&&(vt.canAirplay=!0,updateMisc(lt,vt))},Bt=()=>{if(dt.error){const Kt=errorMessage(dt.error);console.error("Native video player threw error",dt.error),vt.error={description:Kt.description,name:`Error ${Kt.code}`},this.pause()}else vt.error=null;updateError(lt,vt)};return(Ft=vt.wrapperElement)==null||Ft.addEventListener("click",Ut),(tr=vt.wrapperElement)==null||tr.addEventListener("mouseenter",Ut),(cr=vt.wrapperElement)==null||cr.addEventListener("mouseleave",Ut),dt.addEventListener("volumechange",nr),dt.addEventListener("pause",Et),dt.addEventListener("playing",St),dt.addEventListener("seeking",At),dt.addEventListener("seeked",Ct),dt.addEventListener("progress",kt),dt.addEventListener("waiting",Tt),dt.addEventListener("timeupdate",Dt),dt.addEventListener("loadedmetadata",Rt),dt.addEventListener("canplay",Nt),dt.addEventListener("ratechange",zt),fscreen$1.addEventListener("fullscreenchange",Wt),dt.addEventListener("error",Bt),dt.addEventListener("webkitplaybacktargetavailabilitychanged",Ht),vt.source&&this.setSource({quality:vt.source.quality,source:vt.source.url,type:vt.source.type,embedId:vt.source.embedId,providerId:vt.source.providerId}),{destroy:()=>{var Kt,Zt,rr;dt.removeEventListener("pause",Et),dt.removeEventListener("playing",St),dt.removeEventListener("seeking",At),dt.removeEventListener("volumechange",nr),dt.removeEventListener("seeked",Ct),dt.removeEventListener("timeupdate",Dt),dt.removeEventListener("loadedmetadata",Rt),dt.removeEventListener("progress",kt),dt.removeEventListener("waiting",Tt),dt.removeEventListener("error",Bt),dt.removeEventListener("canplay",Nt),fscreen$1.removeEventListener("fullscreenchange",Wt),(Kt=vt.wrapperElement)==null||Kt.removeEventListener("click",Ut),(Zt=vt.wrapperElement)==null||Zt.removeEventListener("mouseenter",Ut),(rr=vt.wrapperElement)==null||rr.removeEventListener("mouseleave",Ut),dt.removeEventListener("webkitplaybacktargetavailabilitychanged",Ht)}}}}}function VideoElement(lt){const ft=useVideoPlayerDescriptor(),dt=useMediaPlaying(ft),vt=useMisc(ft),Et=reactExports.useRef(null),St=reactExports.useMemo(()=>!!vt.wrapperInitialized,[vt]),Tt=reactExports.useMemo(()=>vt.stateProviderId,[vt]);return reactExports.useEffect(()=>{if(!St||!Et.current)return;const At=createVideoStateProvider(ft,Et.current);setProvider(ft,At);const{destroy:Ct}=At.providerStart();return()=>{try{unsetStateProvider(ft,At.getId())}catch{}Ct()}},[ft,St,Tt]),jsx("video",{ref:Et,autoPlay:lt.autoPlay,muted:dt.volume===0,playsInline:!0,className:"z-0 h-full w-full"})}function VideoElementInternal(lt){const ft=useVideoPlayerDescriptor();return useMisc(ft).stateProviderId!=="video"?null:jsx(VideoElement,{...lt})}function VideoPlayerBaseWithState(lt){const ft=reactExports.useRef(null),dt=useVideoPlayerDescriptor(),vt=useInterface(dt),Et=useMeta(dt),St=typeof lt.children=="function"?lt.children({isFullscreen:vt.isFullscreen}):lt.children;return jsx(VideoErrorBoundary,{onGoBack:lt.onGoBack,media:Et==null?void 0:Et.meta.meta,children:jsxs("div",{ref:ft,className:["is-video-player popout-location relative h-full w-full select-none overflow-hidden bg-black",lt.includeSafeArea||vt.isFullscreen?"[border-left:env(safe-area-inset-left)_solid_transparent] [border-right:env(safe-area-inset-right)_solid_transparent]":""].join(" "),children:[jsx(MetaAction,{}),jsx(VideoElementInternal,{autoPlay:lt.autoPlay}),jsx(CastingInternal,{}),jsx(WrapperRegisterInternal,{wrapper:ft.current}),jsx("div",{className:"absolute inset-0",children:St})]})})}function VideoPlayerBase(lt){return jsx(VideoPlayerContextProvider,{children:jsx(VideoPlayerBaseWithState,{...lt})})}function syncRouteToPopout(lt,ft){const vt=new URLSearchParams(lt.search).get("modal");vt?ft.openPopout(vt):ft.closePopout()}function useSyncPopouts(lt){const ft=useHistory(),dt=useInterface(lt),vt=useControls(lt),Et=useLocation(),St=reactExports.useRef(null),Tt=reactExports.useRef(vt);reactExports.useEffect(()=>{Tt.current=vt},[vt]),reactExports.useEffect(()=>{const Ct=dt.popout;if(St.current!==Ct)if(St.current=Ct,Ct){const Rt=new URLSearchParams([["modal",Ct]]).toString();ft.push({search:Rt,state:"popout"})}else{if(!new URLSearchParams(ft.location.search).has("modal"))return;ft.length>0?ft.goBack():ft.replace({search:"",state:"popout"})}},[dt,ft]),reactExports.useEffect(()=>{Et.state!=="popout"&&syncRouteToPopout(Et,Tt.current)},[Et]);const At=reactExports.useRef(!1);reactExports.useEffect(()=>{At.current||(syncRouteToPopout(Et,Tt.current),At.current=!0)},[Et])}function FloatingView(lt){const{isMobile:ft}=useIsMobile(),dt=ft?"100%":`${lt.width}px`;return jsx(Transition,{animation:lt.active?"slide-full-left":"slide-full-right",className:"absolute inset-0",durationClass:"duration-[400ms]",show:lt.show,children:jsx("div",{className:[lt.className??"","grid grid-rows-[auto,minmax(0,1fr)]"].join(" "),"data-floating-page":lt.show?"true":void 0,style:{height:lt.height?`${lt.height}px`:void 0,maxHeight:"70vh",width:lt.width?dt:void 0},children:lt.children})})}function useFloatingRouter(lt="/"){const[ft,dt]=reactExports.useState(lt.split("/").filter(Nt=>Nt.length>0)),[vt,Et]=reactExports.useState(ft),St=ft[ft.length-1]??"/";reactExports.useLayoutEffect(()=>{vt.length!==ft.length&&setTimeout(()=>{Et(ft)},20)},[ft,vt]);function Tt(Nt){const zt=Nt.split("/").filter(Wt=>Wt.length>0);zt.length>vt.length&&Et(zt),dt(zt)}function At(Nt){if(Nt==="/")return!0;const zt=vt.indexOf(Nt);return!(zt===-1||zt===vt.length-1)}function Ct(Nt){return Nt===St}function Rt(Nt){return Nt==="/"?!0:ft.includes(Nt)}function Dt(Nt){return{show:Ct(Nt),active:At(Nt)}}function kt(){Tt("/")}return{navigate:Tt,reset:kt,isLoaded:Rt,isCurrentPage:Ct,pageProps:Dt,isActive:At}}function FloatingCardAnchorPosition(lt){const ft=reactExports.useRef(null),[dt,vt]=reactExports.useState(0),[Et,St]=reactExports.useState(0),[Tt,At]=reactExports.useState(null),[Ct,Rt]=reactExports.useState(null),Dt=reactExports.useCallback((kt,Nt)=>{const zt=kt.left+kt.width/2,Wt=window.innerHeight-kt.bottom;St(window.innerHeight-Wt-kt.height-Nt.height-30),vt(Math.min(zt-Nt.width/2,window.innerWidth-Nt.width-30))},[]);return reactExports.useEffect(()=>{!Ct||!Tt||Dt(Ct,Tt)},[Ct,Dt,Tt]),reactExports.useEffect(()=>{if(!ft.current)return;function kt(){var Wt;const zt=(Wt=ft.current)==null?void 0:Wt.getBoundingClientRect();At(zt??null)}kt();const Nt=new ResizeObserver(kt);return Nt.observe(ft.current),()=>{Nt.disconnect()}},[]),reactExports.useEffect(()=>{const kt=createFloatingAnchorEvent(lt.id);window[kt]&&Rt(window[kt]);function Nt(zt){Rt(zt.detail)}return document.addEventListener(kt,Nt),()=>{document.removeEventListener(kt,Nt)}},[lt.id]),jsx("div",{ref:ft,style:{transform:`translateX(${dt}px) translateY(${Et}px)`},className:["pointer-events-auto z-10 inline-block origin-top-left touch-none overflow-hidden",lt.className??""].join(" "),children:lt.children})}var f$1=l$2(),n=lt=>c$3(lt,f$1),m$1=l$2();n.write=lt=>c$3(lt,m$1);var d$2=l$2();n.onStart=lt=>c$3(lt,d$2);var h$3=l$2();n.onFrame=lt=>c$3(lt,h$3);var p$1=l$2();n.onFinish=lt=>c$3(lt,p$1);var i$1=[];n.setTimeout=(lt,ft)=>{let dt=n.now()+ft,vt=()=>{let St=i$1.findIndex(Tt=>Tt.cancel==vt);~St&&i$1.splice(St,1),u$2-=~St?1:0},Et={time:dt,handler:lt,cancel:vt};return i$1.splice(w(dt),0,Et),u$2+=1,v$2(),Et};var w=lt=>~(~i$1.findIndex(ft=>ft.time>lt)||~i$1.length);n.cancel=lt=>{d$2.delete(lt),h$3.delete(lt),p$1.delete(lt),f$1.delete(lt),m$1.delete(lt)};n.sync=lt=>{T=!0,n.batchedUpdates(lt),T=!1};n.throttle=lt=>{let ft;function dt(){try{lt(...ft)}finally{ft=null}}function vt(...Et){ft=Et,n.onStart(dt)}return vt.handler=lt,vt.cancel=()=>{d$2.delete(dt),ft=null},vt};var y$3=typeof window<"u"?window.requestAnimationFrame:()=>{};n.use=lt=>y$3=lt;n.now=typeof performance<"u"?()=>performance.now():Date.now;n.batchedUpdates=lt=>lt();n.catch=console.error;n.frameLoop="always";n.advance=()=>{n.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):x$2()};var r=-1,u$2=0,T=!1;function c$3(lt,ft){T?(ft.delete(lt),lt(0)):(ft.add(lt),v$2())}function v$2(){r<0&&(r=0,n.frameLoop!=="demand"&&y$3(b$2))}function R(){r=-1}function b$2(){~r&&(y$3(b$2),n.batchedUpdates(x$2))}function x$2(){let lt=r;r=n.now();let ft=w(r);if(ft&&(Q$2(i$1.splice(0,ft),dt=>dt.handler()),u$2-=ft),!u$2){R();return}d$2.flush(),f$1.flush(lt?Math.min(64,r-lt):16.667),h$3.flush(),m$1.flush(),p$1.flush()}function l$2(){let lt=new Set,ft=lt;return{add(dt){u$2+=ft==lt&&!lt.has(dt)?1:0,lt.add(dt)},delete(dt){return u$2-=ft==lt&&lt.has(dt)?1:0,lt.delete(dt)},flush(dt){ft.size&&(lt=new Set,u$2-=ft.size,Q$2(ft,vt=>vt(dt)&&lt.add(vt)),u$2+=lt.size,ft=lt)}}}function Q$2(lt,ft){lt.forEach(dt=>{try{ft(dt)}catch(vt){n.catch(vt)}})}var ze$1=Object.defineProperty,Le$2=(lt,ft)=>{for(var dt in ft)ze$1(lt,dt,{get:ft[dt],enumerable:!0})},p={};Le$2(p,{assign:()=>U,colors:()=>c$2,createStringInterpolator:()=>k$2,skipAnimation:()=>ee,to:()=>J$1,willAdvance:()=>S});function Y(){}var mt$1=(lt,ft,dt)=>Object.defineProperty(lt,ft,{value:dt,writable:!0,configurable:!0}),l$1={arr:Array.isArray,obj:lt=>!!lt&&lt.constructor.name==="Object",fun:lt=>typeof lt=="function",str:lt=>typeof lt=="string",num:lt=>typeof lt=="number",und:lt=>lt===void 0};function bt$1(lt,ft){if(l$1.arr(lt)){if(!l$1.arr(ft)||lt.length!==ft.length)return!1;for(let dt=0;dt<lt.length;dt++)if(lt[dt]!==ft[dt])return!1;return!0}return lt===ft}var Ve=(lt,ft)=>lt.forEach(ft);function xt(lt,ft,dt){if(l$1.arr(lt)){for(let vt=0;vt<lt.length;vt++)ft.call(dt,lt[vt],`${vt}`);return}for(let vt in lt)lt.hasOwnProperty(vt)&&ft.call(dt,lt[vt],vt)}var ht$1=lt=>l$1.und(lt)?[]:l$1.arr(lt)?lt:[lt];function Pe$1(lt,ft){if(lt.size){let dt=Array.from(lt);lt.clear(),Ve(dt,ft)}}var yt$1=(lt,...ft)=>Pe$1(lt,dt=>dt(...ft)),h$2=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),k$2,J$1,c$2=null,ee=!1,S=Y,U=lt=>{lt.to&&(J$1=lt.to),lt.now&&(n.now=lt.now),lt.colors!==void 0&&(c$2=lt.colors),lt.skipAnimation!=null&&(ee=lt.skipAnimation),lt.createStringInterpolator&&(k$2=lt.createStringInterpolator),lt.requestAnimationFrame&&n.use(lt.requestAnimationFrame),lt.batchedUpdates&&(n.batchedUpdates=lt.batchedUpdates),lt.willAdvance&&(S=lt.willAdvance),lt.frameLoop&&(n.frameLoop=lt.frameLoop)},E$1=new Set,u$1=[],H$1=[],A=0,qe$1={get idle(){return!E$1.size&&!u$1.length},start(lt){A>lt.priority?(E$1.add(lt),n.onStart($e)):(te$1(lt),n(B))},advance:B,sort(lt){if(A)n.onFrame(()=>qe$1.sort(lt));else{let ft=u$1.indexOf(lt);~ft&&(u$1.splice(ft,1),re(lt))}},clear(){u$1=[],E$1.clear()}};function $e(){E$1.forEach(te$1),E$1.clear(),n(B)}function te$1(lt){u$1.includes(lt)||re(lt)}function re(lt){u$1.splice(Ge$1(u$1,ft=>ft.priority>lt.priority),0,lt)}function B(lt){let ft=H$1;for(let dt=0;dt<u$1.length;dt++){let vt=u$1[dt];A=vt.priority,vt.idle||(S(vt),vt.advance(lt),vt.idle||ft.push(vt))}return A=0,H$1=u$1,H$1.length=0,u$1=ft,u$1.length>0}function Ge$1(lt,ft){let dt=lt.findIndex(ft);return dt<0?lt.length:dt}var ne$2=(lt,ft,dt)=>Math.min(Math.max(dt,lt),ft),It={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},d$1="[-+]?\\d*\\.?\\d+",M$1=d$1+"%";function C$1(...lt){return"\\(\\s*("+lt.join(")\\s*,\\s*(")+")\\s*\\)"}var oe$1=new RegExp("rgb"+C$1(d$1,d$1,d$1)),fe$1=new RegExp("rgba"+C$1(d$1,d$1,d$1,d$1)),ae$1=new RegExp("hsl"+C$1(d$1,M$1,M$1)),ie=new RegExp("hsla"+C$1(d$1,M$1,M$1,d$1)),se$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ue$1=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,le$1=/^#([0-9a-fA-F]{6})$/,ce=/^#([0-9a-fA-F]{8})$/;function be$1(lt){let ft;return typeof lt=="number"?lt>>>0===lt&&lt>=0&&lt<=4294967295?lt:null:(ft=le$1.exec(lt))?parseInt(ft[1]+"ff",16)>>>0:c$2&&c$2[lt]!==void 0?c$2[lt]:(ft=oe$1.exec(lt))?(y$2(ft[1])<<24|y$2(ft[2])<<16|y$2(ft[3])<<8|255)>>>0:(ft=fe$1.exec(lt))?(y$2(ft[1])<<24|y$2(ft[2])<<16|y$2(ft[3])<<8|me$1(ft[4]))>>>0:(ft=se$1.exec(lt))?parseInt(ft[1]+ft[1]+ft[2]+ft[2]+ft[3]+ft[3]+"ff",16)>>>0:(ft=ce.exec(lt))?parseInt(ft[1],16)>>>0:(ft=ue$1.exec(lt))?parseInt(ft[1]+ft[1]+ft[2]+ft[2]+ft[3]+ft[3]+ft[4]+ft[4],16)>>>0:(ft=ae$1.exec(lt))?(de$1(pe(ft[1]),z$1(ft[2]),z$1(ft[3]))|255)>>>0:(ft=ie.exec(lt))?(de$1(pe(ft[1]),z$1(ft[2]),z$1(ft[3]))|me$1(ft[4]))>>>0:null}function j$1(lt,ft,dt){return dt<0&&(dt+=1),dt>1&&(dt-=1),dt<1/6?lt+(ft-lt)*6*dt:dt<1/2?ft:dt<2/3?lt+(ft-lt)*(2/3-dt)*6:lt}function de$1(lt,ft,dt){let vt=dt<.5?dt*(1+ft):dt+ft-dt*ft,Et=2*dt-vt,St=j$1(Et,vt,lt+1/3),Tt=j$1(Et,vt,lt),At=j$1(Et,vt,lt-1/3);return Math.round(St*255)<<24|Math.round(Tt*255)<<16|Math.round(At*255)<<8}function y$2(lt){let ft=parseInt(lt,10);return ft<0?0:ft>255?255:ft}function pe(lt){return(parseFloat(lt)%360+360)%360/360}function me$1(lt){let ft=parseFloat(lt);return ft<0?0:ft>1?255:Math.round(ft*255)}function z$1(lt){let ft=parseFloat(lt);return ft<0?0:ft>100?1:ft/100}function D$1(lt){let ft=be$1(lt);if(ft===null)return lt;ft=ft||0;let dt=(ft&4278190080)>>>24,vt=(ft&16711680)>>>16,Et=(ft&65280)>>>8,St=(ft&255)/255;return`rgba(${dt}, ${vt}, ${Et}, ${St})`}var W$1=(lt,ft,dt)=>{if(l$1.fun(lt))return lt;if(l$1.arr(lt))return W$1({range:lt,output:ft,extrapolate:dt});if(l$1.str(lt.output[0]))return k$2(lt);let vt=lt,Et=vt.output,St=vt.range||[0,1],Tt=vt.extrapolateLeft||vt.extrapolate||"extend",At=vt.extrapolateRight||vt.extrapolate||"extend",Ct=vt.easing||(Rt=>Rt);return Rt=>{let Dt=He$1(Rt,St);return Ue$1(Rt,St[Dt],St[Dt+1],Et[Dt],Et[Dt+1],Ct,Tt,At,vt.map)}};function Ue$1(lt,ft,dt,vt,Et,St,Tt,At,Ct){let Rt=Ct?Ct(lt):lt;if(Rt<ft){if(Tt==="identity")return Rt;Tt==="clamp"&&(Rt=ft)}if(Rt>dt){if(At==="identity")return Rt;At==="clamp"&&(Rt=dt)}return vt===Et?vt:ft===dt?lt<=ft?vt:Et:(ft===-1/0?Rt=-Rt:dt===1/0?Rt=Rt-ft:Rt=(Rt-ft)/(dt-ft),Rt=St(Rt),vt===-1/0?Rt=-Rt:Et===1/0?Rt=Rt+vt:Rt=Rt*(Et-vt)+vt,Rt)}function He$1(lt,ft){for(var dt=1;dt<ft.length-1&&!(ft[dt]>=lt);++dt);return dt-1}var Be=(lt,ft="end")=>dt=>{dt=ft==="end"?Math.min(dt,.999):Math.max(dt,.001);let vt=dt*lt,Et=ft==="end"?Math.floor(vt):Math.ceil(vt);return ne$2(0,1,Et/lt)},P=1.70158,L$1=P*1.525,xe$1=P+1,he$1=2*Math.PI/3,ye$1=2*Math.PI/4.5,V$2=lt=>lt<1/2.75?7.5625*lt*lt:lt<2/2.75?7.5625*(lt-=1.5/2.75)*lt+.75:lt<2.5/2.75?7.5625*(lt-=2.25/2.75)*lt+.9375:7.5625*(lt-=2.625/2.75)*lt+.984375,Lt$1={linear:lt=>lt,easeInQuad:lt=>lt*lt,easeOutQuad:lt=>1-(1-lt)*(1-lt),easeInOutQuad:lt=>lt<.5?2*lt*lt:1-Math.pow(-2*lt+2,2)/2,easeInCubic:lt=>lt*lt*lt,easeOutCubic:lt=>1-Math.pow(1-lt,3),easeInOutCubic:lt=>lt<.5?4*lt*lt*lt:1-Math.pow(-2*lt+2,3)/2,easeInQuart:lt=>lt*lt*lt*lt,easeOutQuart:lt=>1-Math.pow(1-lt,4),easeInOutQuart:lt=>lt<.5?8*lt*lt*lt*lt:1-Math.pow(-2*lt+2,4)/2,easeInQuint:lt=>lt*lt*lt*lt*lt,easeOutQuint:lt=>1-Math.pow(1-lt,5),easeInOutQuint:lt=>lt<.5?16*lt*lt*lt*lt*lt:1-Math.pow(-2*lt+2,5)/2,easeInSine:lt=>1-Math.cos(lt*Math.PI/2),easeOutSine:lt=>Math.sin(lt*Math.PI/2),easeInOutSine:lt=>-(Math.cos(Math.PI*lt)-1)/2,easeInExpo:lt=>lt===0?0:Math.pow(2,10*lt-10),easeOutExpo:lt=>lt===1?1:1-Math.pow(2,-10*lt),easeInOutExpo:lt=>lt===0?0:lt===1?1:lt<.5?Math.pow(2,20*lt-10)/2:(2-Math.pow(2,-20*lt+10))/2,easeInCirc:lt=>1-Math.sqrt(1-Math.pow(lt,2)),easeOutCirc:lt=>Math.sqrt(1-Math.pow(lt-1,2)),easeInOutCirc:lt=>lt<.5?(1-Math.sqrt(1-Math.pow(2*lt,2)))/2:(Math.sqrt(1-Math.pow(-2*lt+2,2))+1)/2,easeInBack:lt=>xe$1*lt*lt*lt-P*lt*lt,easeOutBack:lt=>1+xe$1*Math.pow(lt-1,3)+P*Math.pow(lt-1,2),easeInOutBack:lt=>lt<.5?Math.pow(2*lt,2)*((L$1+1)*2*lt-L$1)/2:(Math.pow(2*lt-2,2)*((L$1+1)*(lt*2-2)+L$1)+2)/2,easeInElastic:lt=>lt===0?0:lt===1?1:-Math.pow(2,10*lt-10)*Math.sin((lt*10-10.75)*he$1),easeOutElastic:lt=>lt===0?0:lt===1?1:Math.pow(2,-10*lt)*Math.sin((lt*10-.75)*he$1)+1,easeInOutElastic:lt=>lt===0?0:lt===1?1:lt<.5?-(Math.pow(2,20*lt-10)*Math.sin((20*lt-11.125)*ye$1))/2:Math.pow(2,-20*lt+10)*Math.sin((20*lt-11.125)*ye$1)/2+1,easeInBounce:lt=>1-V$2(1-lt),easeOutBounce:V$2,easeInOutBounce:lt=>lt<.5?(1-V$2(1-2*lt))/2:(1+V$2(2*lt-1))/2,steps:Be},g$1=Symbol.for("FluidValue.get"),m=Symbol.for("FluidValue.observers"),Pt=lt=>!!(lt&&lt[g$1]),ve=lt=>lt&&lt[g$1]?lt[g$1]():lt,qt=lt=>lt[m]||null;function je(lt,ft){lt.eventObserved?lt.eventObserved(ft):lt(ft)}function $t(lt,ft){let dt=lt[m];dt&&dt.forEach(vt=>{je(vt,ft)})}var no,ao,_i,ge=(_i=class{constructor(lt){Yr(this,no);Yr(this,ao);if(!lt&&!(lt=this.get))throw Error("Unknown getter");De$1(this,lt)}},no=g$1,ao=m,_i),De$1=(lt,ft)=>Ee$1(lt,g$1,ft);function Gt(lt,ft){if(lt[g$1]){let dt=lt[m];dt||Ee$1(lt,m,dt=new Set),dt.has(ft)||(dt.add(ft),lt.observerAdded&&lt.observerAdded(dt.size,ft))}return ft}function Qt(lt,ft){let dt=lt[m];if(dt&&dt.has(ft)){let vt=dt.size-1;vt?dt.delete(ft):lt[m]=null,lt.observerRemoved&&lt.observerRemoved(vt,ft)}}var Ee$1=(lt,ft,dt)=>Object.defineProperty(lt,ft,{value:dt,writable:!0,configurable:!0}),O=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Oe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,K=new RegExp(`(${O.source})(%|[a-z]+)`,"i"),we$1=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,b$1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,N=lt=>{let[ft,dt]=We(lt);if(!ft||h$2())return lt;let vt=window.getComputedStyle(document.documentElement).getPropertyValue(ft);return vt?vt.trim():dt&&dt.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(dt)||lt:dt&&b$1.test(dt)?N(dt):dt||lt},We=lt=>{let ft=b$1.exec(lt);if(!ft)return[,];let[,dt,vt]=ft;return[dt,vt]},_$1,Ke$1=(lt,ft,dt,vt,Et)=>`rgba(${Math.round(ft)}, ${Math.round(dt)}, ${Math.round(vt)}, ${Et})`,Xt=lt=>{_$1||(_$1=c$2?new RegExp(`(${Object.keys(c$2).join("|")})(?!\\w)`,"g"):/^\b$/);let ft=lt.output.map(Et=>ve(Et).replace(b$1,N).replace(Oe,D$1).replace(_$1,D$1)),dt=ft.map(Et=>Et.match(O).map(Number)),vt=dt[0].map((Et,St)=>dt.map(Tt=>{if(!(St in Tt))throw Error('The arity of each "output" value must be equal');return Tt[St]})).map(Et=>W$1({...lt,output:Et}));return Et=>{var At;let St=!K.test(ft[0])&&((At=ft.find(Ct=>K.test(Ct)))==null?void 0:At.replace(O,"")),Tt=0;return ft[0].replace(O,()=>`${vt[Tt++](Et)}${St||""}`).replace(we$1,Ke$1)}},Z="react-spring: ",Te=lt=>{let ft=lt,dt=!1;if(typeof ft!="function")throw new TypeError(`${Z}once requires a function parameter`);return(...vt)=>{dt||(ft(...vt),dt=!0)}},Ne$1=Te(console.warn);function Jt(){Ne$1(`${Z}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var _e$1=Te(console.warn);function er(){_e$1(`${Z}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function or(lt){return l$1.str(lt)&&(lt[0]=="#"||/\d/.test(lt)||!h$2()&&b$1.test(lt)||lt in(c$2||{}))}function Er(lt){let ft=reactExports.useRef(null);return ft.current===null&&(ft.current=lt()),ft.current}var Q$1=h$2()?reactExports.useEffect:reactExports.useLayoutEffect,Ce$1=()=>{let lt=reactExports.useRef(!1);return Q$1(()=>(lt.current=!0,()=>{lt.current=!1}),[]),lt};function Mr(){let lt=reactExports.useState()[1],ft=Ce$1();return()=>{ft.current&&lt(Math.random())}}function Lr(lt,ft){let[dt]=reactExports.useState(()=>({inputs:ft,result:lt()})),vt=reactExports.useRef(),Et=vt.current,St=Et;return St?ft&&St.inputs&&it$2(ft,St.inputs)||(St={inputs:ft,result:lt()}):St=dt,reactExports.useEffect(()=>{vt.current=St,Et==dt&&(dt.inputs=dt.result=void 0)},[St]),St.result}function it$2(lt,ft){if(lt.length!==ft.length)return!1;for(let dt=0;dt<lt.length;dt++)if(lt[dt]!==ft[dt])return!1;return!0}var $r=lt=>reactExports.useEffect(lt,ut),ut=[];function Ur(lt){let ft=reactExports.useRef();return reactExports.useEffect(()=>{ft.current=lt}),ft.current}var h$1=Symbol.for("Animated:node"),v$1=lt=>!!lt&&lt[h$1]===lt,k$1=lt=>lt&&lt[h$1],D=(lt,ft)=>mt$1(lt,h$1,ft),F$1=lt=>lt&&lt[h$1]&&lt[h$1].getPayload(),c$1=class{constructor(){Yr(this,"payload");D(this,this)}getPayload(){return this.payload||[]}},l=class extends c$1{constructor(ft){super();Yr(this,"done",!0);Yr(this,"elapsedTime");Yr(this,"lastPosition");Yr(this,"lastVelocity");Yr(this,"v0");Yr(this,"durationProgress",0);this._value=ft,l$1.num(this._value)&&(this.lastPosition=this._value)}static create(ft){return new l(ft)}getPayload(){return[this]}getValue(){return this._value}setValue(ft,dt){return l$1.num(ft)&&(this.lastPosition=ft,dt&&(ft=Math.round(ft/dt)*dt,this.done&&(this.lastPosition=ft))),this._value===ft?!1:(this._value=ft,!0)}reset(){let{done:ft}=this;this.done=!1,l$1.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,ft&&(this.lastVelocity=null),this.v0=null)}},d=class extends l{constructor(ft){super(0);Yr(this,"_string",null);Yr(this,"_toString");this._toString=W$1({output:[ft,ft]})}static create(ft){return new d(ft)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(ft){if(l$1.str(ft)){if(ft==this._string)return!1;this._string=ft,this._value=1}else if(super.setValue(ft))this._string=null;else return!1;return!0}reset(ft){ft&&(this._toString=W$1({output:[this.getValue(),ft]})),this._value=0,super.reset()}},f={dependencies:null},u=class extends c$1{constructor(lt){super(),this.source=lt,this.setValue(lt)}getValue(lt){let ft={};return xt(this.source,(dt,vt)=>{v$1(dt)?ft[vt]=dt.getValue(lt):Pt(dt)?ft[vt]=ve(dt):lt||(ft[vt]=dt)}),ft}setValue(lt){this.source=lt,this.payload=this._makePayload(lt)}reset(){this.payload&&Ve(this.payload,lt=>lt.reset())}_makePayload(lt){if(lt){let ft=new Set;return xt(lt,this._addToPayload,ft),Array.from(ft)}}_addToPayload(lt){f.dependencies&&Pt(lt)&&f.dependencies.add(lt);let ft=F$1(lt);ft&&Ve(ft,dt=>this.add(dt))}},y$1=class extends u{constructor(ft){super(ft)}static create(ft){return new y$1(ft)}getValue(){return this.source.map(ft=>ft.getValue())}setValue(ft){let dt=this.getPayload();return ft.length==dt.length?dt.map((vt,Et)=>vt.setValue(ft[Et])).some(Boolean):(super.setValue(ft.map(z)),!0)}};function z(lt){return(or(lt)?d:l).create(lt)}function Le$1(lt){let ft=k$1(lt);return ft?ft.constructor:l$1.arr(lt)?y$1:or(lt)?d:l}var x$1=(lt,ft)=>{let dt=!l$1.fun(lt)||lt.prototype&&lt.prototype.isReactComponent;return reactExports.forwardRef((vt,Et)=>{let St=reactExports.useRef(null),Tt=dt&&reactExports.useCallback(Wt=>{St.current=ae(Et,Wt)},[Et]),[At,Ct]=ne$1(vt,ft),Rt=Mr(),Dt=()=>{let Wt=St.current;dt&&!Wt||(Wt?ft.applyAnimatedValues(Wt,At.getValue(!0)):!1)===!1&&Rt()},kt=new b(Dt,Ct),Nt=reactExports.useRef();Q$1(()=>(Nt.current=kt,Ve(Ct,Wt=>Gt(Wt,kt)),()=>{Nt.current&&(Ve(Nt.current.deps,Wt=>Qt(Wt,Nt.current)),n.cancel(Nt.current.update))})),reactExports.useEffect(Dt,[]),$r(()=>()=>{let Wt=Nt.current;Ve(Wt.deps,nr=>Qt(nr,Wt))});let zt=ft.getComponentProps(At.getValue());return reactExports.createElement(lt,{...zt,ref:Tt})})},b=class{constructor(lt,ft){this.update=lt,this.deps=ft}eventObserved(lt){lt.type=="change"&&n.write(this.update)}};function ne$1(lt,ft){let dt=new Set;return f.dependencies=dt,lt.style&&(lt={...lt,style:ft.createAnimatedStyle(lt.style)}),lt=new u(lt),f.dependencies=null,[lt,dt]}function ae(lt,ft){return lt&&(l$1.fun(lt)?lt(ft):lt.current=ft),ft}var j=Symbol.for("AnimatedComponent"),Ke=(lt,{applyAnimatedValues:ft=()=>!1,createAnimatedStyle:dt=Et=>new u(Et),getComponentProps:vt=Et=>Et}={})=>{let Et={applyAnimatedValues:ft,createAnimatedStyle:dt,getComponentProps:vt},St=Tt=>{let At=I$2(Tt)||"Anonymous";return l$1.str(Tt)?Tt=St[Tt]||(St[Tt]=x$1(Tt,Et)):Tt=Tt[j]||(Tt[j]=x$1(Tt,Et)),Tt.displayName=`Animated(${At})`,Tt};return xt(lt,(Tt,At)=>{l$1.arr(lt)&&(At=I$2(Tt)),St[At]=St(Tt)}),{animated:St}},I$2=lt=>l$1.str(lt)?lt:lt&&l$1.str(lt.displayName)?lt.displayName:l$1.fun(lt)&&lt.name||null;function I$1(lt,...ft){return l$1.fun(lt)?lt(...ft):lt}var te=(lt,ft)=>lt===!0||!!(ft&&lt&&(l$1.fun(lt)?lt(ft):ht$1(lt).includes(ft))),et=(lt,ft)=>l$1.obj(lt)?ft&&lt[ft]:lt,ke=(lt,ft)=>lt.default===!0?lt[ft]:lt.default?lt.default[ft]:void 0,nn=lt=>lt,ne=(lt,ft=nn)=>{let dt=rn;lt.default&&lt.default!==!0&&(lt=lt.default,dt=Object.keys(lt));let vt={};for(let Et of dt){let St=ft(lt[Et],Et);l$1.und(St)||(vt[Et]=St)}return vt},rn=["config","onProps","onStart","onChange","onPause","onResume","onRest"],on={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function sn(lt){let ft={},dt=0;if(xt(lt,(vt,Et)=>{on[Et]||(ft[Et]=vt,dt++)}),dt)return ft}function de(lt){let ft=sn(lt);if(ft){let dt={to:ft};return xt(lt,(vt,Et)=>Et in ft||(dt[Et]=vt)),dt}return{...lt}}function me(lt){return lt=ve(lt),l$1.arr(lt)?lt.map(me):or(lt)?p.createStringInterpolator({range:[0,1],output:[lt,lt]})(1):lt}function Ue(lt){for(let ft in lt)return!0;return!1}function Ee(lt){return l$1.fun(lt)||l$1.arr(lt)&&l$1.obj(lt[0])}function xe(lt,ft){var dt;(dt=lt.ref)==null||dt.delete(lt),ft==null||ft.delete(lt)}function he(lt,ft){var dt;ft&&lt.ref!==ft&&((dt=lt.ref)==null||dt.delete(lt),ft.add(lt),lt.ref=ft)}var mt={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},tt={...mt.default,mass:1,damping:1,easing:Lt$1.linear,clamp:!1},we=class{constructor(){Yr(this,"tension");Yr(this,"friction");Yr(this,"frequency");Yr(this,"damping");Yr(this,"mass");Yr(this,"velocity",0);Yr(this,"restVelocity");Yr(this,"precision");Yr(this,"progress");Yr(this,"duration");Yr(this,"easing");Yr(this,"clamp");Yr(this,"bounce");Yr(this,"decay");Yr(this,"round");Object.assign(this,tt)}};function gt(lt,ft,dt){dt&&(dt={...dt},ht(dt,ft),ft={...dt,...ft}),ht(lt,ft),Object.assign(lt,ft);for(let Tt in tt)lt[Tt]==null&&(lt[Tt]=tt[Tt]);let{mass:vt,frequency:Et,damping:St}=lt;return l$1.und(Et)||(Et<.01&&(Et=.01),St<0&&(St=0),lt.tension=Math.pow(2*Math.PI/Et,2)*vt,lt.friction=4*Math.PI*St*vt/Et),lt}function ht(lt,ft){if(!l$1.und(ft.decay))lt.duration=void 0;else{let dt=!l$1.und(ft.tension)||!l$1.und(ft.friction);(dt||!l$1.und(ft.frequency)||!l$1.und(ft.damping)||!l$1.und(ft.mass))&&(lt.duration=void 0,lt.decay=void 0),dt&&(lt.frequency=void 0)}}var yt=[],Le=class{constructor(){Yr(this,"changed",!1);Yr(this,"values",yt);Yr(this,"toValues",null);Yr(this,"fromValues",yt);Yr(this,"to");Yr(this,"from");Yr(this,"config",new we);Yr(this,"immediate",!1)}};function Me(lt,{key:ft,props:dt,defaultProps:vt,state:Et,actions:St}){return new Promise((Tt,At)=>{let Ct,Rt,Dt=te(dt.cancel??(vt==null?void 0:vt.cancel),ft);if(Dt)zt();else{l$1.und(dt.pause)||(Et.paused=te(dt.pause,ft));let Wt=vt==null?void 0:vt.pause;Wt!==!0&&(Wt=Et.paused||te(Wt,ft)),Ct=I$1(dt.delay||0,ft),Wt?(Et.resumeQueue.add(Nt),St.pause()):(St.resume(),Nt())}function kt(){Et.resumeQueue.add(Nt),Et.timeouts.delete(Rt),Rt.cancel(),Ct=Rt.time-n.now()}function Nt(){Ct>0&&!p.skipAnimation?(Et.delayed=!0,Rt=n.setTimeout(zt,Ct),Et.pauseQueue.add(kt),Et.timeouts.add(Rt)):zt()}function zt(){Et.delayed&&(Et.delayed=!1),Et.pauseQueue.delete(kt),Et.timeouts.delete(Rt),lt<=(Et.cancelId||0)&&(Dt=!0);try{St.start({...dt,callId:lt,cancel:Dt},Tt)}catch(Wt){At(Wt)}}})}var be=(lt,ft)=>ft.length==1?ft[0]:ft.some(dt=>dt.cancelled)?q$1(lt.get()):ft.every(dt=>dt.noop)?nt(lt.get()):E(lt.get(),ft.every(dt=>dt.finished)),nt=lt=>({value:lt,noop:!0,finished:!0,cancelled:!1}),E=(lt,ft,dt=!1)=>({value:lt,finished:ft,cancelled:dt}),q$1=lt=>({value:lt,cancelled:!0,finished:!1});function De(lt,ft,dt,vt){let{callId:Et,parentId:St,onRest:Tt}=ft,{asyncTo:At,promise:Ct}=dt;return!St&&lt===At&&!ft.reset?Ct:dt.promise=(async()=>{dt.asyncId=Et,dt.asyncTo=lt;let Rt=ne(ft,(Ut,Ht)=>Ht==="onRest"?void 0:Ut),Dt,kt,Nt=new Promise((Ut,Ht)=>(Dt=Ut,kt=Ht)),zt=Ut=>{let Ht=Et<=(dt.cancelId||0)&&q$1(vt)||Et!==dt.asyncId&&E(vt,!1);if(Ht)throw Ut.result=Ht,kt(Ut),Ut},Wt=(Ut,Ht)=>{let Bt=new Ae,Ft=new Ne;return(async()=>{if(p.skipAnimation)throw oe(dt),Ft.result=E(vt,!1),kt(Ft),Ft;zt(Bt);let tr=l$1.obj(Ut)?{...Ut}:{...Ht,to:Ut};tr.parentId=Et,xt(Rt,(Kt,Zt)=>{l$1.und(tr[Zt])&&(tr[Zt]=Kt)});let cr=await vt.start(tr);return zt(Bt),dt.paused&&await new Promise(Kt=>{dt.resumeQueue.add(Kt)}),cr})()},nr;if(p.skipAnimation)return oe(dt),E(vt,!1);try{let Ut;l$1.arr(lt)?Ut=(async Ht=>{for(let Bt of Ht)await Wt(Bt)})(lt):Ut=Promise.resolve(lt(Wt,vt.stop.bind(vt))),await Promise.all([Ut.then(Dt),Nt]),nr=E(vt.get(),!0,!1)}catch(Ut){if(Ut instanceof Ae)nr=Ut.result;else if(Ut instanceof Ne)nr=Ut.result;else throw Ut}finally{Et==dt.asyncId&&(dt.asyncId=St,dt.asyncTo=St?At:void 0,dt.promise=St?Ct:void 0)}return l$1.fun(Tt)&&n.batchedUpdates(()=>{Tt(nr,vt,vt.item)}),nr})()}function oe(lt,ft){Pe$1(lt.timeouts,dt=>dt.cancel()),lt.pauseQueue.clear(),lt.resumeQueue.clear(),lt.asyncId=lt.asyncTo=lt.promise=void 0,ft&&(lt.cancelId=ft)}var Ae=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.");Yr(this,"result")}},Ne=class extends Error{constructor(){super("SkipAnimationSignal");Yr(this,"result")}},Re=lt=>lt instanceof X,Sn=1,X=class extends ge{constructor(){super(...arguments);Yr(this,"id",Sn++);Yr(this,"_priority",0)}get priority(){return this._priority}set priority(ft){this._priority!=ft&&(this._priority=ft,this._onPriorityChange(ft))}get(){let ft=k$1(this);return ft&&ft.getValue()}to(...ft){return p.to(this,ft)}interpolate(...ft){return Jt(),p.to(this,ft)}toJSON(){return this.get()}observerAdded(ft){ft==1&&this._attach()}observerRemoved(ft){ft==0&&this._detach()}_attach(){}_detach(){}_onChange(ft,dt=!1){$t(this,{type:"change",parent:this,value:ft,idle:dt})}_onPriorityChange(ft){this.idle||qe$1.sort(this),$t(this,{type:"priority",parent:this,priority:ft})}},se=Symbol.for("SpringPhase"),bt=1,rt=2,ot=4,qe=lt=>(lt[se]&bt)>0,Q=lt=>(lt[se]&rt)>0,ye=lt=>(lt[se]&ot)>0,st=(lt,ft)=>ft?lt[se]|=rt|bt:lt[se]&=~rt,it$1=(lt,ft)=>ft?lt[se]|=ot:lt[se]&=~ot,ue=class extends X{constructor(ft,dt){super();Yr(this,"key");Yr(this,"animation",new Le);Yr(this,"queue");Yr(this,"defaultProps",{});Yr(this,"_state",{paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});Yr(this,"_pendingCalls",new Set);Yr(this,"_lastCallId",0);Yr(this,"_lastToId",0);Yr(this,"_memoizedDuration",0);if(!l$1.und(ft)||!l$1.und(dt)){let vt=l$1.obj(ft)?{...ft}:{...dt,from:ft};l$1.und(vt.default)&&(vt.default=!0),this.start(vt)}}get idle(){return!(Q(this)||this._state.asyncTo)||ye(this)}get goal(){return ve(this.animation.to)}get velocity(){let ft=k$1(this);return ft instanceof l?ft.lastVelocity||0:ft.getPayload().map(dt=>dt.lastVelocity||0)}get hasAnimated(){return qe(this)}get isAnimating(){return Q(this)}get isPaused(){return ye(this)}get isDelayed(){return this._state.delayed}advance(ft){let dt=!0,vt=!1,Et=this.animation,{config:St,toValues:Tt}=Et,At=F$1(Et.to);!At&&Pt(Et.to)&&(Tt=ht$1(ve(Et.to))),Et.values.forEach((Dt,kt)=>{if(Dt.done)return;let Nt=Dt.constructor==d?1:At?At[kt].lastPosition:Tt[kt],zt=Et.immediate,Wt=Nt;if(!zt){if(Wt=Dt.lastPosition,St.tension<=0){Dt.done=!0;return}let nr=Dt.elapsedTime+=ft,Ut=Et.fromValues[kt],Ht=Dt.v0!=null?Dt.v0:Dt.v0=l$1.arr(St.velocity)?St.velocity[kt]:St.velocity,Bt,Ft=St.precision||(Ut==Nt?.005:Math.min(1,Math.abs(Nt-Ut)*.001));if(l$1.und(St.duration))if(St.decay){let tr=St.decay===!0?.998:St.decay,cr=Math.exp(-(1-tr)*nr);Wt=Ut+Ht/(1-tr)*(1-cr),zt=Math.abs(Dt.lastPosition-Wt)<=Ft,Bt=Ht*cr}else{Bt=Dt.lastVelocity==null?Ht:Dt.lastVelocity;let tr=St.restVelocity||Ft/10,cr=St.clamp?0:St.bounce,Kt=!l$1.und(cr),Zt=Ut==Nt?Dt.v0>0:Ut<Nt,rr,ar=!1,sr=1,dr=Math.ceil(ft/sr);for(let fr=0;fr<dr&&(rr=Math.abs(Bt)>tr,!(!rr&&(zt=Math.abs(Nt-Wt)<=Ft,zt)));++fr){Kt&&(ar=Wt==Nt||Wt>Nt==Zt,ar&&(Bt=-Bt*cr,Wt=Nt));let pr=-St.tension*1e-6*(Wt-Nt),xr=-St.friction*.001*Bt,lr=(pr+xr)/St.mass;Bt=Bt+lr*sr,Wt=Wt+Bt*sr}}else{let tr=1;St.duration>0&&(this._memoizedDuration!==St.duration&&(this._memoizedDuration=St.duration,Dt.durationProgress>0&&(Dt.elapsedTime=St.duration*Dt.durationProgress,nr=Dt.elapsedTime+=ft)),tr=(St.progress||0)+nr/this._memoizedDuration,tr=tr>1?1:tr<0?0:tr,Dt.durationProgress=tr),Wt=Ut+St.easing(tr)*(Nt-Ut),Bt=(Wt-Dt.lastPosition)/ft,zt=tr==1}Dt.lastVelocity=Bt,Number.isNaN(Wt)&&(console.warn("Got NaN while animating:",this),zt=!0)}At&&!At[kt].done&&(zt=!1),zt?Dt.done=!0:dt=!1,Dt.setValue(Wt,St.round)&&(vt=!0)});let Ct=k$1(this),Rt=Ct.getValue();if(dt){let Dt=ve(Et.to);(Rt!==Dt||vt)&&!St.decay?(Ct.setValue(Dt),this._onChange(Dt)):vt&&St.decay&&this._onChange(Rt),this._stop()}else vt&&this._onChange(Rt)}set(ft){return n.batchedUpdates(()=>{this._stop(),this._focus(ft),this._set(ft)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Q(this)){let{to:ft,config:dt}=this.animation;n.batchedUpdates(()=>{this._onStart(),dt.decay||this._set(ft,!1),this._stop()})}return this}update(ft){return(this.queue||(this.queue=[])).push(ft),this}start(ft,dt){let vt;return l$1.und(ft)?(vt=this.queue||[],this.queue=[]):vt=[l$1.obj(ft)?ft:{...dt,to:ft}],Promise.all(vt.map(Et=>this._update(Et))).then(Et=>be(this,Et))}stop(ft){let{to:dt}=this.animation;return this._focus(this.get()),oe(this._state,ft&&this._lastCallId),n.batchedUpdates(()=>this._stop(dt,ft)),this}reset(){this._update({reset:!0})}eventObserved(ft){ft.type=="change"?this._start():ft.type=="priority"&&(this.priority=ft.priority+1)}_prepareNode(ft){let dt=this.key||"",{to:vt,from:Et}=ft;vt=l$1.obj(vt)?vt[dt]:vt,(vt==null||Ee(vt))&&(vt=void 0),Et=l$1.obj(Et)?Et[dt]:Et,Et==null&&(Et=void 0);let St={to:vt,from:Et};return qe(this)||(ft.reverse&&([vt,Et]=[Et,vt]),Et=ve(Et),l$1.und(Et)?k$1(this)||this._set(vt):this._set(Et)),St}_update({...ft},dt){let{key:vt,defaultProps:Et}=this;ft.default&&Object.assign(Et,ne(ft,(At,Ct)=>/^on/.test(Ct)?et(At,vt):At)),_t(this,ft,"onProps"),Ie(this,"onProps",ft,this);let St=this._prepareNode(ft);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let Tt=this._state;return Me(++this._lastCallId,{key:vt,props:ft,defaultProps:Et,state:Tt,actions:{pause:()=>{ye(this)||(it$1(this,!0),yt$1(Tt.pauseQueue),Ie(this,"onPause",E(this,Ce(this,this.animation.to)),this))},resume:()=>{ye(this)&&(it$1(this,!1),Q(this)&&this._resume(),yt$1(Tt.resumeQueue),Ie(this,"onResume",E(this,Ce(this,this.animation.to)),this))},start:this._merge.bind(this,St)}}).then(At=>{if(ft.loop&&At.finished&&!(dt&&At.noop)){let Ct=at(ft);if(Ct)return this._update(Ct,!0)}return At})}_merge(ft,dt,vt){if(dt.cancel)return this.stop(!0),vt(q$1(this));let Et=!l$1.und(ft.to),St=!l$1.und(ft.from);if(Et||St)if(dt.callId>this._lastToId)this._lastToId=dt.callId;else return vt(q$1(this));let{key:Tt,defaultProps:At,animation:Ct}=this,{to:Rt,from:Dt}=Ct,{to:kt=Rt,from:Nt=Dt}=ft;St&&!Et&&(!dt.default||l$1.und(kt))&&(kt=Nt),dt.reverse&&([kt,Nt]=[Nt,kt]);let zt=!bt$1(Nt,Dt);zt&&(Ct.from=Nt),Nt=ve(Nt);let Wt=!bt$1(kt,Rt);Wt&&this._focus(kt);let nr=Ee(dt.to),{config:Ut}=Ct,{decay:Ht,velocity:Bt}=Ut;(Et||St)&&(Ut.velocity=0),dt.config&&!nr&&gt(Ut,I$1(dt.config,Tt),dt.config!==At.config?I$1(At.config,Tt):void 0);let Ft=k$1(this);if(!Ft||l$1.und(kt))return vt(E(this,!0));let tr=l$1.und(dt.reset)?St&&!dt.default:!l$1.und(Nt)&&te(dt.reset,Tt),cr=tr?Nt:this.get(),Kt=me(kt),Zt=l$1.num(Kt)||l$1.arr(Kt)||or(Kt),rr=!nr&&(!Zt||te(At.immediate||dt.immediate,Tt));if(Wt){let fr=Le$1(kt);if(fr!==Ft.constructor)if(rr)Ft=this._set(Kt);else throw Error(`Cannot animate between ${Ft.constructor.name} and ${fr.name}, as the "to" prop suggests`)}let ar=Ft.constructor,sr=Pt(kt),dr=!1;if(!sr){let fr=tr||!qe(this)&&zt;(Wt||fr)&&(dr=bt$1(me(cr),Kt),sr=!dr),(!bt$1(Ct.immediate,rr)&&!rr||!bt$1(Ut.decay,Ht)||!bt$1(Ut.velocity,Bt))&&(sr=!0)}if(dr&&Q(this)&&(Ct.changed&&!tr?sr=!0:sr||this._stop(Rt)),!nr&&((sr||Pt(Rt))&&(Ct.values=Ft.getPayload(),Ct.toValues=Pt(kt)?null:ar==d?[1]:ht$1(Kt)),Ct.immediate!=rr&&(Ct.immediate=rr,!rr&&!tr&&this._set(Rt)),sr)){let{onRest:fr}=Ct;Ve(_n,xr=>_t(this,dt,xr));let pr=E(this,Ce(this,Rt));yt$1(this._pendingCalls,pr),this._pendingCalls.add(vt),Ct.changed&&n.batchedUpdates(()=>{var xr;Ct.changed=!tr,fr==null||fr(pr,this),tr?I$1(At.onRest,pr):(xr=Ct.onStart)==null||xr.call(Ct,pr,this)})}tr&&this._set(cr),nr?vt(De(dt.to,dt,this._state,this)):sr?this._start():Q(this)&&!Wt?this._pendingCalls.add(vt):vt(nt(cr))}_focus(ft){let dt=this.animation;ft!==dt.to&&(qt(this)&&this._detach(),dt.to=ft,qt(this)&&this._attach())}_attach(){let ft=0,{to:dt}=this.animation;Pt(dt)&&(Gt(dt,this),Re(dt)&&(ft=dt.priority+1)),this.priority=ft}_detach(){let{to:ft}=this.animation;Pt(ft)&&Qt(ft,this)}_set(ft,dt=!0){let vt=ve(ft);if(!l$1.und(vt)){let Et=k$1(this);if(!Et||!bt$1(vt,Et.getValue())){let St=Le$1(vt);!Et||Et.constructor!=St?D(this,St.create(vt)):Et.setValue(vt),Et&&n.batchedUpdates(()=>{this._onChange(vt,dt)})}}return k$1(this)}_onStart(){let ft=this.animation;ft.changed||(ft.changed=!0,Ie(this,"onStart",E(this,Ce(this,ft.to)),this))}_onChange(ft,dt){dt||(this._onStart(),I$1(this.animation.onChange,ft,this)),I$1(this.defaultProps.onChange,ft,this),super._onChange(ft,dt)}_start(){let ft=this.animation;k$1(this).reset(ve(ft.to)),ft.immediate||(ft.fromValues=ft.values.map(dt=>dt.lastPosition)),Q(this)||(st(this,!0),ye(this)||this._resume())}_resume(){p.skipAnimation?this.finish():qe$1.start(this)}_stop(ft,dt){if(Q(this)){st(this,!1);let vt=this.animation;Ve(vt.values,St=>{St.done=!0}),vt.toValues&&(vt.onChange=vt.onPause=vt.onResume=void 0),$t(this,{type:"idle",parent:this});let Et=dt?q$1(this.get()):E(this.get(),Ce(this,ft??vt.to));yt$1(this._pendingCalls,Et),vt.changed&&(vt.changed=!1,Ie(this,"onRest",Et,this))}}};function Ce(lt,ft){let dt=me(ft),vt=me(lt.get());return bt$1(vt,dt)}function at(lt,ft=lt.loop,dt=lt.to){let vt=I$1(ft);if(vt){let Et=vt!==!0&&de(vt),St=(Et||lt).reverse,Tt=!Et||Et.reset;return Pe({...lt,loop:ft,default:!1,pause:void 0,to:!St||Ee(dt)?dt:void 0,from:Tt?lt.from:void 0,reset:Tt,...Et})}}function Pe(lt){let{to:ft,from:dt}=lt=de(lt),vt=new Set;return l$1.obj(ft)&&Vt(ft,vt),l$1.obj(dt)&&Vt(dt,vt),lt.keys=vt.size?Array.from(vt):null,lt}function Ot(lt){let ft=Pe(lt);return l$1.und(ft.default)&&(ft.default=ne(ft)),ft}function Vt(lt,ft){xt(lt,(dt,vt)=>dt!=null&&ft.add(vt))}var _n=["onStart","onRest","onChange","onPause","onResume"];function _t(lt,ft,dt){lt.animation[dt]=ft[dt]!==ke(ft,dt)?et(ft[dt],lt.key):void 0}function Ie(lt,ft,...dt){var vt,Et,St,Tt;(Et=(vt=lt.animation)[ft])==null||Et.call(vt,...dt),(Tt=(St=lt.defaultProps)[ft])==null||Tt.call(St,...dt)}var Fn=["onStart","onChange","onRest"],kn=1,le=class{constructor(lt,ft){Yr(this,"id",kn++);Yr(this,"springs",{});Yr(this,"queue",[]);Yr(this,"ref");Yr(this,"_flush");Yr(this,"_initialProps");Yr(this,"_lastAsyncId",0);Yr(this,"_active",new Set);Yr(this,"_changed",new Set);Yr(this,"_started",!1);Yr(this,"_item");Yr(this,"_state",{paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});Yr(this,"_events",{onStart:new Map,onChange:new Map,onRest:new Map});this._onFrame=this._onFrame.bind(this),ft&&(this._flush=ft),lt&&this.start({default:!0,...lt})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(lt=>lt.idle&&!lt.isDelayed&&!lt.isPaused)}get item(){return this._item}set item(lt){this._item=lt}get(){let lt={};return this.each((ft,dt)=>lt[dt]=ft.get()),lt}set(lt){for(let ft in lt){let dt=lt[ft];l$1.und(dt)||this.springs[ft].set(dt)}}update(lt){return lt&&this.queue.push(Pe(lt)),this}start(lt){let{queue:ft}=this;return lt?ft=ht$1(lt).map(Pe):this.queue=[],this._flush?this._flush(this,ft):(jt(this,ft),ze(this,ft))}stop(lt,ft){if(lt!==!!lt&&(ft=lt),ft){let dt=this.springs;Ve(ht$1(ft),vt=>dt[vt].stop(!!lt))}else oe(this._state,this._lastAsyncId),this.each(dt=>dt.stop(!!lt));return this}pause(lt){if(l$1.und(lt))this.start({pause:!0});else{let ft=this.springs;Ve(ht$1(lt),dt=>ft[dt].pause())}return this}resume(lt){if(l$1.und(lt))this.start({pause:!1});else{let ft=this.springs;Ve(ht$1(lt),dt=>ft[dt].resume())}return this}each(lt){xt(this.springs,lt)}_onFrame(){let{onStart:lt,onChange:ft,onRest:dt}=this._events,vt=this._active.size>0,Et=this._changed.size>0;(vt&&!this._started||Et&&!this._started)&&(this._started=!0,Pe$1(lt,([At,Ct])=>{Ct.value=this.get(),At(Ct,this,this._item)}));let St=!vt&&this._started,Tt=Et||St&&dt.size?this.get():null;Et&&ft.size&&Pe$1(ft,([At,Ct])=>{Ct.value=Tt,At(Ct,this,this._item)}),St&&(this._started=!1,Pe$1(dt,([At,Ct])=>{Ct.value=Tt,At(Ct,this,this._item)}))}eventObserved(lt){if(lt.type=="change")this._changed.add(lt.parent),lt.idle||this._active.add(lt.parent);else if(lt.type=="idle")this._active.delete(lt.parent);else return;n.onFrame(this._onFrame)}};function ze(lt,ft){return Promise.all(ft.map(dt=>wt(lt,dt))).then(dt=>be(lt,dt))}async function wt(lt,ft,dt){let{keys:vt,to:Et,from:St,loop:Tt,onRest:At,onResolve:Ct}=ft,Rt=l$1.obj(ft.default)&&ft.default;Tt&&(ft.loop=!1),Et===!1&&(ft.to=null),St===!1&&(ft.from=null);let Dt=l$1.arr(Et)||l$1.fun(Et)?Et:void 0;Dt?(ft.to=void 0,ft.onRest=void 0,Rt&&(Rt.onRest=void 0)):Ve(Fn,nr=>{let Ut=ft[nr];if(l$1.fun(Ut)){let Ht=lt._events[nr];ft[nr]=({finished:Bt,cancelled:Ft})=>{let tr=Ht.get(Ut);tr?(Bt||(tr.finished=!1),Ft&&(tr.cancelled=!0)):Ht.set(Ut,{value:null,finished:Bt||!1,cancelled:Ft||!1})},Rt&&(Rt[nr]=ft[nr])}});let kt=lt._state;ft.pause===!kt.paused?(kt.paused=ft.pause,yt$1(ft.pause?kt.pauseQueue:kt.resumeQueue)):kt.paused&&(ft.pause=!0);let Nt=(vt||Object.keys(lt.springs)).map(nr=>lt.springs[nr].start(ft)),zt=ft.cancel===!0||ke(ft,"cancel")===!0;(Dt||zt&&kt.asyncId)&&Nt.push(Me(++lt._lastAsyncId,{props:ft,state:kt,actions:{pause:Y,resume:Y,start(nr,Ut){zt?(oe(kt,lt._lastAsyncId),Ut(q$1(lt))):(nr.onRest=At,Ut(De(Dt,nr,kt,lt)))}}})),kt.paused&&await new Promise(nr=>{kt.resumeQueue.add(nr)});let Wt=be(lt,await Promise.all(Nt));if(Tt&&Wt.finished&&!(dt&&Wt.noop)){let nr=at(ft,Tt,Et);if(nr)return jt(lt,[nr]),wt(lt,nr,!0)}return Ct&&n.batchedUpdates(()=>Ct(Wt,lt,lt.item)),Wt}function _e(lt,ft){let dt={...lt.springs};return ft&&Ve(ht$1(ft),vt=>{l$1.und(vt.keys)&&(vt=Pe(vt)),l$1.obj(vt.to)||(vt={...vt,to:void 0}),Mt(dt,vt,Et=>Lt(Et))}),pt(lt,dt),dt}function pt(lt,ft){xt(ft,(dt,vt)=>{lt.springs[vt]||(lt.springs[vt]=dt,Gt(dt,lt))})}function Lt(lt,ft){let dt=new ue;return dt.key=lt,ft&&Gt(dt,ft),dt}function Mt(lt,ft,dt){ft.keys&&Ve(ft.keys,vt=>{(lt[vt]||(lt[vt]=dt(vt)))._prepareNode(ft)})}function jt(lt,ft){Ve(ft,dt=>{Mt(lt.springs,dt,vt=>Lt(vt,lt))})}var H=({children:lt,...ft})=>{let dt=reactExports.useContext(Ge),vt=ft.pause||!!dt.pause,Et=ft.immediate||!!dt.immediate;ft=Lr(()=>({pause:vt,immediate:Et}),[vt,Et]);let{Provider:St}=Ge;return reactExports.createElement(St,{value:ft},lt)},Ge=wn(H,{});H.Provider=Ge.Provider;H.Consumer=Ge.Consumer;function wn(lt,ft){return Object.assign(lt,reactExports.createContext(ft)),lt.Provider._context=lt,lt.Consumer._context=lt,lt}var fe=()=>{let lt=[],ft=function(vt){er();let Et=[];return Ve(lt,(St,Tt)=>{if(l$1.und(vt))Et.push(St.start());else{let At=dt(vt,St,Tt);At&&Et.push(St.start(At))}}),Et};ft.current=lt,ft.add=function(vt){lt.includes(vt)||lt.push(vt)},ft.delete=function(vt){let Et=lt.indexOf(vt);~Et&&lt.splice(Et,1)},ft.pause=function(){return Ve(lt,vt=>vt.pause(...arguments)),this},ft.resume=function(){return Ve(lt,vt=>vt.resume(...arguments)),this},ft.set=function(vt){Ve(lt,(Et,St)=>{let Tt=l$1.fun(vt)?vt(St,Et):vt;Tt&&Et.set(Tt)})},ft.start=function(vt){let Et=[];return Ve(lt,(St,Tt)=>{if(l$1.und(vt))Et.push(St.start());else{let At=this._getProps(vt,St,Tt);At&&Et.push(St.start(At))}}),Et},ft.stop=function(){return Ve(lt,vt=>vt.stop(...arguments)),this},ft.update=function(vt){return Ve(lt,(Et,St)=>Et.update(this._getProps(vt,Et,St))),this};let dt=function(vt,Et,St){return l$1.fun(vt)?vt(St,Et):vt};return ft._getProps=dt,ft};function He(lt,ft,dt){let vt=l$1.fun(ft)&&ft;vt&&!dt&&(dt=[]);let Et=reactExports.useMemo(()=>vt||arguments.length==3?fe():void 0,[]),St=reactExports.useRef(0),Tt=Mr(),At=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(Ht,Bt){let Ft=_e(Ht,Bt);return St.current>0&&!At.queue.length&&!Object.keys(Ft).some(tr=>!Ht.springs[tr])?ze(Ht,Bt):new Promise(tr=>{pt(Ht,Ft),At.queue.push(()=>{tr(ze(Ht,Bt))}),Tt()})}}),[]),Ct=reactExports.useRef([...At.ctrls]),Rt=[],Dt=Ur(lt)||0;reactExports.useMemo(()=>{Ve(Ct.current.slice(lt,Dt),Ht=>{xe(Ht,Et),Ht.stop(!0)}),Ct.current.length=lt,kt(Dt,lt)},[lt]),reactExports.useMemo(()=>{kt(0,Math.min(Dt,lt))},dt);function kt(Ht,Bt){for(let Ft=Ht;Ft<Bt;Ft++){let tr=Ct.current[Ft]||(Ct.current[Ft]=new le(null,At.flush)),cr=vt?vt(Ft,tr):ft[Ft];cr&&(Rt[Ft]=Ot(cr))}}let Nt=Ct.current.map((Ht,Bt)=>_e(Ht,Rt[Bt])),zt=reactExports.useContext(H),Wt=Ur(zt),nr=zt!==Wt&&Ue(zt);Q$1(()=>{St.current++,At.ctrls=Ct.current;let{queue:Ht}=At;Ht.length&&(At.queue=[],Ve(Ht,Bt=>Bt())),Ve(Ct.current,(Bt,Ft)=>{Et==null||Et.add(Bt),nr&&Bt.start({default:zt});let tr=Rt[Ft];tr&&(he(Bt,tr.ref),Bt.ref?Bt.queue.push(tr):Bt.start(tr))})}),$r(()=>()=>{Ve(At.ctrls,Ht=>Ht.stop(!0))});let Ut=Nt.map(Ht=>({...Ht}));return Et?[Ut,Et]:Ut}function J(lt,ft){let dt=l$1.fun(lt),[[vt],Et]=He(1,dt?lt:[lt],dt?ft||[]:ft);return dt||arguments.length==2?[vt,Et]:vt}var Wo=(lt,ft)=>{let dt=Er(()=>new ue(lt,ft));return $r(()=>()=>{dt.stop()}),dt},W=class extends X{constructor(ft,dt){super();Yr(this,"key");Yr(this,"idle",!0);Yr(this,"calc");Yr(this,"_active",new Set);this.source=ft,this.calc=W$1(...dt);let vt=this._get(),Et=Le$1(vt);D(this,Et.create(vt))}advance(ft){let dt=this._get(),vt=this.get();bt$1(dt,vt)||(k$1(this).setValue(dt),this._onChange(dt,this.idle)),!this.idle&&Yt(this._active)&&ct(this)}_get(){let ft=l$1.arr(this.source)?this.source.map(ve):ht$1(ve(this.source));return this.calc(...ft)}_start(){this.idle&&!Yt(this._active)&&(this.idle=!1,Ve(F$1(this),ft=>{ft.done=!1}),p.skipAnimation?(n.batchedUpdates(()=>this.advance()),ct(this)):qe$1.start(this))}_attach(){let ft=1;Ve(ht$1(this.source),dt=>{Pt(dt)&&Gt(dt,this),Re(dt)&&(dt.idle||this._active.add(dt),ft=Math.max(ft,dt.priority+1))}),this.priority=ft,this._start()}_detach(){Ve(ht$1(this.source),ft=>{Pt(ft)&&Qt(ft,this)}),this._active.clear(),ct(this)}eventObserved(ft){ft.type=="change"?ft.idle?this.advance():(this._active.add(ft.parent),this._start()):ft.type=="idle"?this._active.delete(ft.parent):ft.type=="priority"&&(this.priority=ht$1(this.source).reduce((dt,vt)=>Math.max(dt,(Re(vt)?vt.priority:0)+1),0))}};function vr(lt){return lt.idle!==!1}function Yt(lt){return!lt.size||Array.from(lt).every(vr)}function ct(lt){lt.idle||(lt.idle=!0,Ve(F$1(lt),ft=>{ft.done=!0}),$t(lt,{type:"idle",parent:lt}))}p.assign({createStringInterpolator:Xt,to:(lt,ft)=>new W(lt,ft)});var k=/^--/;function I(lt,ft){return ft==null||typeof ft=="boolean"||ft===""?"":typeof ft=="number"&&ft!==0&&!k.test(lt)&&!(c.hasOwnProperty(lt)&&c[lt])?ft+"px":(""+ft).trim()}var v={};function V$1(lt,ft){if(!lt.nodeType||!lt.setAttribute)return!1;let dt=lt.nodeName==="filter"||lt.parentNode&&lt.parentNode.nodeName==="filter",{style:vt,children:Et,scrollTop:St,scrollLeft:Tt,viewBox:At,...Ct}=ft,Rt=Object.values(Ct),Dt=Object.keys(Ct).map(kt=>dt||lt.hasAttribute(kt)?kt:v[kt]||(v[kt]=kt.replace(/([A-Z])/g,Nt=>"-"+Nt.toLowerCase())));Et!==void 0&&(lt.textContent=Et);for(let kt in vt)if(vt.hasOwnProperty(kt)){let Nt=I(kt,vt[kt]);k.test(kt)?lt.style.setProperty(kt,Nt):lt.style[kt]=Nt}Dt.forEach((kt,Nt)=>{lt.setAttribute(kt,Rt[Nt])}),St!==void 0&&(lt.scrollTop=St),Tt!==void 0&&(lt.scrollLeft=Tt),At!==void 0&&lt.setAttribute("viewBox",At)}var c={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F=(lt,ft)=>lt+ft.charAt(0).toUpperCase()+ft.substring(1),L=["Webkit","Ms","Moz","O"];c=Object.keys(c).reduce((lt,ft)=>(L.forEach(dt=>lt[F(dt,ft)]=lt[ft]),lt),c);var _=/^(matrix|translate|scale|rotate|skew)/,$=/^(translate)/,G=/^(rotate|skew)/,y=(lt,ft)=>l$1.num(lt)&&lt!==0?lt+ft:lt,h=(lt,ft)=>l$1.arr(lt)?lt.every(dt=>h(dt,ft)):l$1.num(lt)?lt===ft:parseFloat(lt)===ft,g=class extends u{constructor({x:lt,y:ft,z:dt,...vt}){let Et=[],St=[];(lt||ft||dt)&&(Et.push([lt||0,ft||0,dt||0]),St.push(Tt=>[`translate3d(${Tt.map(At=>y(At,"px")).join(",")})`,h(Tt,0)])),xt(vt,(Tt,At)=>{if(At==="transform")Et.push([Tt||""]),St.push(Ct=>[Ct,Ct===""]);else if(_.test(At)){if(delete vt[At],l$1.und(Tt))return;let Ct=$.test(At)?"px":G.test(At)?"deg":"";Et.push(ht$1(Tt)),St.push(At==="rotate3d"?([Rt,Dt,kt,Nt])=>[`rotate3d(${Rt},${Dt},${kt},${y(Nt,Ct)})`,h(Nt,0)]:Rt=>[`${At}(${Rt.map(Dt=>y(Dt,Ct)).join(",")})`,h(Rt,At.startsWith("scale")?1:0)])}}),Et.length&&(vt.transform=new x(Et,St)),super(vt)}},x=class extends ge{constructor(ft,dt){super();Yr(this,"_value",null);this.inputs=ft,this.transforms=dt}get(){return this._value||(this._value=this._get())}_get(){let ft="",dt=!0;return Ve(this.inputs,(vt,Et)=>{let St=ve(vt[0]),[Tt,At]=this.transforms[Et](l$1.arr(St)?St:vt.map(ve));ft+=" "+Tt,dt=dt&&At}),dt?"none":ft}observerAdded(ft){ft==1&&Ve(this.inputs,dt=>Ve(dt,vt=>Pt(vt)&&Gt(vt,this)))}observerRemoved(ft){ft==0&&Ve(this.inputs,dt=>Ve(dt,vt=>Pt(vt)&&Qt(vt,this)))}eventObserved(ft){ft.type=="change"&&(this._value=null),$t(this,ft)}},C=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];p.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:Xt,colors:It});var q=Ke(C,{applyAnimatedValues:V$1,createAnimatedStyle:lt=>new g(lt),getComponentProps:({scrollTop:lt,scrollLeft:ft,...dt})=>dt}),it=q.animated;function clamp(lt,ft,dt){return Math.max(ft,Math.min(lt,dt))}const V={toVector(lt,ft){return lt===void 0&&(lt=ft),Array.isArray(lt)?lt:[lt,lt]},add(lt,ft){return[lt[0]+ft[0],lt[1]+ft[1]]},sub(lt,ft){return[lt[0]-ft[0],lt[1]-ft[1]]},addTo(lt,ft){lt[0]+=ft[0],lt[1]+=ft[1]},subTo(lt,ft){lt[0]-=ft[0],lt[1]-=ft[1]}};function rubberband(lt,ft,dt){return ft===0||Math.abs(ft)===1/0?Math.pow(lt,dt*5):lt*ft*dt/(ft+dt*lt)}function rubberbandIfOutOfBounds(lt,ft,dt,vt=.15){return vt===0?clamp(lt,ft,dt):lt<ft?-rubberband(ft-lt,dt-ft,vt)+ft:lt>dt?+rubberband(lt-dt,dt-ft,vt)+dt:lt}function computeRubberband(lt,[ft,dt],[vt,Et]){const[[St,Tt],[At,Ct]]=lt;return[rubberbandIfOutOfBounds(ft,St,Tt,vt),rubberbandIfOutOfBounds(dt,At,Ct,Et)]}function _toPrimitive(lt,ft){if(typeof lt!="object"||lt===null)return lt;var dt=lt[Symbol.toPrimitive];if(dt!==void 0){var vt=dt.call(lt,ft||"default");if(typeof vt!="object")return vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ft==="string"?String:Number)(lt)}function _toPropertyKey(lt){var ft=_toPrimitive(lt,"string");return typeof ft=="symbol"?ft:String(ft)}function _defineProperty$2(lt,ft,dt){return ft=_toPropertyKey(ft),ft in lt?Object.defineProperty(lt,ft,{value:dt,enumerable:!0,configurable:!0,writable:!0}):lt[ft]=dt,lt}function ownKeys$7(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread2(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys$7(Object(dt),!0).forEach(function(vt){_defineProperty$2(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys$7(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize$1(lt){return lt?lt[0].toUpperCase()+lt.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function hasCapture(lt=!1,ft){return lt&&!actionsWithoutCaptureSupported.includes(ft)}function toHandlerProp(lt,ft="",dt=!1){const vt=EVENT_TYPE_MAP[lt],Et=vt&&vt[ft]||ft;return"on"+capitalize$1(lt)+capitalize$1(Et)+(hasCapture(dt,Et)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(lt){let ft=lt.substring(2).toLowerCase();const dt=!!~ft.indexOf("passive");dt&&(ft=ft.replace("passive",""));const vt=pointerCaptureEvents.includes(ft)?"capturecapture":"capture",Et=!!~ft.indexOf(vt);return Et&&(ft=ft.replace("capture","")),{device:ft,capture:Et,passive:dt}}function toDomEventType(lt,ft=""){const dt=EVENT_TYPE_MAP[lt],vt=dt&&dt[ft]||ft;return lt+vt}function isTouch(lt){return"touches"in lt}function getPointerType(lt){return isTouch(lt)?"touch":"pointerType"in lt?lt.pointerType:"mouse"}function getCurrentTargetTouchList(lt){return Array.from(lt.touches).filter(ft=>{var dt,vt;return ft.target===lt.currentTarget||((dt=lt.currentTarget)===null||dt===void 0||(vt=dt.contains)===null||vt===void 0?void 0:vt.call(dt,ft.target))})}function getTouchList(lt){return lt.type==="touchend"||lt.type==="touchcancel"?lt.changedTouches:lt.targetTouches}function getValueEvent(lt){return isTouch(lt)?getTouchList(lt)[0]:lt}function touchIds(lt){return getCurrentTargetTouchList(lt).map(ft=>ft.identifier)}function pointerId(lt){const ft=getValueEvent(lt);return isTouch(lt)?ft.identifier:ft.pointerId}function pointerValues(lt){const ft=getValueEvent(lt);return[ft.clientX,ft.clientY]}function getEventDetails(lt){const ft={};if("buttons"in lt&&(ft.buttons=lt.buttons),"shiftKey"in lt){const{shiftKey:dt,altKey:vt,metaKey:Et,ctrlKey:St}=lt;Object.assign(ft,{shiftKey:dt,altKey:vt,metaKey:Et,ctrlKey:St})}return ft}function call(lt,...ft){return typeof lt=="function"?lt(...ft):lt}function noop$2(){}function chain(...lt){return lt.length===0?noop$2:lt.length===1?lt[0]:function(){let ft;for(const dt of lt)ft=dt.apply(this,arguments)||ft;return ft}}function assignDefault(lt,ft){return Object.assign({},ft,lt||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor(ft,dt,vt){this.ctrl=ft,this.args=dt,this.key=vt,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(ft){this.ctrl.state[this.key]=ft}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:ft,shared:dt,ingKey:vt,args:Et}=this;dt[vt]=ft._active=ft.active=ft._blocked=ft._force=!1,ft._step=[!1,!1],ft.intentional=!1,ft._movement=[0,0],ft._distance=[0,0],ft._direction=[0,0],ft._delta=[0,0],ft._bounds=[[-1/0,1/0],[-1/0,1/0]],ft.args=Et,ft.axis=void 0,ft.memo=void 0,ft.elapsedTime=0,ft.direction=[0,0],ft.distance=[0,0],ft.overflow=[0,0],ft._movementBound=[!1,!1],ft.velocity=[0,0],ft.movement=[0,0],ft.delta=[0,0],ft.timeStamp=0}start(ft){const dt=this.state,vt=this.config;dt._active||(this.reset(),this.computeInitial(),dt._active=!0,dt.target=ft.target,dt.currentTarget=ft.currentTarget,dt.lastOffset=vt.from?call(vt.from,dt):dt.offset,dt.offset=dt.lastOffset),dt.startTime=dt.timeStamp=ft.timeStamp}computeValues(ft){const dt=this.state;dt._values=ft,dt.values=this.config.transform(ft)}computeInitial(){const ft=this.state;ft._initial=ft._values,ft.initial=ft.values}compute(ft){const{state:dt,config:vt,shared:Et}=this;dt.args=this.args;let St=0;if(ft&&(dt.event=ft,vt.preventDefault&&ft.cancelable&&dt.event.preventDefault(),dt.type=ft.type,Et.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,Et.locked=!!document.pointerLockElement,Object.assign(Et,getEventDetails(ft)),Et.down=Et.pressed=Et.buttons%2===1||Et.touches>0,St=ft.timeStamp-dt.timeStamp,dt.timeStamp=ft.timeStamp,dt.elapsedTime=dt.timeStamp-dt.startTime),dt._active){const Kt=dt._delta.map(Math.abs);V.addTo(dt._distance,Kt)}this.axisIntent&&this.axisIntent(ft);const[Tt,At]=dt._movement,[Ct,Rt]=vt.threshold,{_step:Dt,values:kt}=dt;if(vt.hasCustomTransform?(Dt[0]===!1&&(Dt[0]=Math.abs(Tt)>=Ct&&kt[0]),Dt[1]===!1&&(Dt[1]=Math.abs(At)>=Rt&&kt[1])):(Dt[0]===!1&&(Dt[0]=Math.abs(Tt)>=Ct&&Math.sign(Tt)*Ct),Dt[1]===!1&&(Dt[1]=Math.abs(At)>=Rt&&Math.sign(At)*Rt)),dt.intentional=Dt[0]!==!1||Dt[1]!==!1,!dt.intentional)return;const Nt=[0,0];if(vt.hasCustomTransform){const[Kt,Zt]=kt;Nt[0]=Dt[0]!==!1?Kt-Dt[0]:0,Nt[1]=Dt[1]!==!1?Zt-Dt[1]:0}else Nt[0]=Dt[0]!==!1?Tt-Dt[0]:0,Nt[1]=Dt[1]!==!1?At-Dt[1]:0;this.restrictToAxis&&!dt._blocked&&this.restrictToAxis(Nt);const zt=dt.offset,Wt=dt._active&&!dt._blocked||dt.active;Wt&&(dt.first=dt._active&&!dt.active,dt.last=!dt._active&&dt.active,dt.active=Et[this.ingKey]=dt._active,ft&&(dt.first&&("bounds"in vt&&(dt._bounds=call(vt.bounds,dt)),this.setup&&this.setup()),dt.movement=Nt,this.computeOffset()));const[nr,Ut]=dt.offset,[[Ht,Bt],[Ft,tr]]=dt._bounds;dt.overflow=[nr<Ht?-1:nr>Bt?1:0,Ut<Ft?-1:Ut>tr?1:0],dt._movementBound[0]=dt.overflow[0]?dt._movementBound[0]===!1?dt._movement[0]:dt._movementBound[0]:!1,dt._movementBound[1]=dt.overflow[1]?dt._movementBound[1]===!1?dt._movement[1]:dt._movementBound[1]:!1;const cr=dt._active?vt.rubberband||[0,0]:[0,0];if(dt.offset=computeRubberband(dt._bounds,dt.offset,cr),dt.delta=V.sub(dt.offset,zt),this.computeMovement(),Wt&&(!dt.last||St>BEFORE_LAST_KINEMATICS_DELAY)){dt.delta=V.sub(dt.offset,zt);const Kt=dt.delta.map(Math.abs);V.addTo(dt.distance,Kt),dt.direction=dt.delta.map(Math.sign),dt._direction=dt._delta.map(Math.sign),!dt.first&&St>0&&(dt.velocity=[Kt[0]/St,Kt[1]/St])}}emit(){const ft=this.state,dt=this.shared,vt=this.config;if(ft._active||this.clean(),(ft._blocked||!ft.intentional)&&!ft._force&&!vt.triggerAllEvents)return;const Et=this.handler(_objectSpread2(_objectSpread2(_objectSpread2({},dt),ft),{},{[this.aliasKey]:ft.values}));Et!==void 0&&(ft.memo=Et)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([lt,ft],dt){const vt=Math.abs(lt),Et=Math.abs(ft);if(vt>Et&&vt>dt)return"x";if(Et>vt&&Et>dt)return"y"}class CoordinatesEngine extends Engine{constructor(...ft){super(...ft),_defineProperty$2(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V.sub(this.state.offset,this.state.lastOffset)}axisIntent(ft){const dt=this.state,vt=this.config;if(!dt.axis&&ft){const Et=typeof vt.axisThreshold=="object"?vt.axisThreshold[getPointerType(ft)]:vt.axisThreshold;dt.axis=selectAxis(dt._movement,Et)}dt._blocked=(vt.lockDirection||!!vt.axis)&&!dt.axis||!!vt.axis&&vt.axis!==dt.axis}restrictToAxis(ft){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":ft[1]=0;break;case"y":ft[0]=0;break}}}const identity$3=lt=>lt,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled(lt=!0){return lt},eventOptions(lt,ft,dt){return _objectSpread2(_objectSpread2({},dt.shared.eventOptions),lt)},preventDefault(lt=!1){return lt},triggerAllEvents(lt=!1){return lt},rubberband(lt=0){switch(lt){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V.toVector(lt)}},from(lt){if(typeof lt=="function")return lt;if(lt!=null)return V.toVector(lt)},transform(lt,ft,dt){const vt=lt||dt.shared.transform;return this.hasCustomTransform=!!vt,vt||identity$3},threshold(lt){return V.toVector(lt,0)}},DEFAULT_AXIS_THRESHOLD=0,coordinatesConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{axis(lt,ft,{axis:dt}){if(this.lockDirection=dt==="lock",!this.lockDirection)return dt},axisThreshold(lt=DEFAULT_AXIS_THRESHOLD){return lt},bounds(lt={}){if(typeof lt=="function")return St=>coordinatesConfigResolver.bounds(lt(St));if("current"in lt)return()=>lt.current;if(typeof HTMLElement=="function"&&lt instanceof HTMLElement)return lt;const{left:ft=-1/0,right:dt=1/0,top:vt=-1/0,bottom:Et=1/0}=lt;return[[ft,dt],[vt,Et]]}}),KEYS_DELTA_MAP={ArrowRight:(lt,ft=1)=>[lt*ft,0],ArrowLeft:(lt,ft=1)=>[-1*lt*ft,0],ArrowUp:(lt,ft=1)=>[0,-1*lt*ft],ArrowDown:(lt,ft=1)=>[0,lt*ft]};class DragEngine extends CoordinatesEngine{constructor(...ft){super(...ft),_defineProperty$2(this,"ingKey","dragging")}reset(){super.reset();const ft=this.state;ft._pointerId=void 0,ft._pointerActive=!1,ft._keyboardActive=!1,ft._preventScroll=!1,ft._delayed=!1,ft.swipe=[0,0],ft.tap=!1,ft.canceled=!1,ft.cancel=this.cancel.bind(this)}setup(){const ft=this.state;if(ft._bounds instanceof HTMLElement){const dt=ft._bounds.getBoundingClientRect(),vt=ft.currentTarget.getBoundingClientRect(),Et={left:dt.left-vt.left+ft.offset[0],right:dt.right-vt.right+ft.offset[0],top:dt.top-vt.top+ft.offset[1],bottom:dt.bottom-vt.bottom+ft.offset[1]};ft._bounds=coordinatesConfigResolver.bounds(Et)}}cancel(){const ft=this.state;ft.canceled||(ft.canceled=!0,ft._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(ft){const dt=this.config,vt=this.state;if(ft.buttons!=null&&(Array.isArray(dt.pointerButtons)?!dt.pointerButtons.includes(ft.buttons):dt.pointerButtons!==-1&&dt.pointerButtons!==ft.buttons))return;const Et=this.ctrl.setEventIds(ft);dt.pointerCapture&&ft.target.setPointerCapture(ft.pointerId),!(Et&&Et.size>1&&vt._pointerActive)&&(this.start(ft),this.setupPointer(ft),vt._pointerId=pointerId(ft),vt._pointerActive=!0,this.computeValues(pointerValues(ft)),this.computeInitial(),dt.preventScrollAxis&&getPointerType(ft)!=="mouse"?(vt._active=!1,this.setupScrollPrevention(ft)):dt.delay>0?(this.setupDelayTrigger(ft),dt.triggerAllEvents&&(this.compute(ft),this.emit())):this.startPointerDrag(ft))}startPointerDrag(ft){const dt=this.state;dt._active=!0,dt._preventScroll=!0,dt._delayed=!1,this.compute(ft),this.emit()}pointerMove(ft){const dt=this.state,vt=this.config;if(!dt._pointerActive||dt.type===ft.type&&ft.timeStamp===dt.timeStamp)return;const Et=pointerId(ft);if(dt._pointerId!==void 0&&Et!==dt._pointerId)return;const St=pointerValues(ft);if(document.pointerLockElement===ft.target?dt._delta=[ft.movementX,ft.movementY]:(dt._delta=V.sub(St,dt._values),this.computeValues(St)),V.addTo(dt._movement,dt._delta),this.compute(ft),dt._delayed&&dt.intentional){this.timeoutStore.remove("dragDelay"),dt.active=!1,this.startPointerDrag(ft);return}if(vt.preventScrollAxis&&!dt._preventScroll)if(dt.axis)if(dt.axis===vt.preventScrollAxis||vt.preventScrollAxis==="xy"){dt._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(ft);return}else return;this.emit()}pointerUp(ft){this.ctrl.setEventIds(ft);try{this.config.pointerCapture&&ft.target.hasPointerCapture(ft.pointerId)&&ft.target.releasePointerCapture(ft.pointerId)}catch{}const dt=this.state,vt=this.config;if(!dt._active||!dt._pointerActive)return;const Et=pointerId(ft);if(dt._pointerId!==void 0&&Et!==dt._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(ft);const[St,Tt]=dt._distance;if(dt.tap=St<=vt.tapsThreshold&&Tt<=vt.tapsThreshold,dt.tap&&vt.filterTaps)dt._force=!0;else{const[At,Ct]=dt.direction,[Rt,Dt]=dt.velocity,[kt,Nt]=dt.movement,[zt,Wt]=vt.swipe.velocity,[nr,Ut]=vt.swipe.distance,Ht=vt.swipe.duration;dt.elapsedTime<Ht&&(Math.abs(Rt)>zt&&Math.abs(kt)>nr&&(dt.swipe[0]=At),Math.abs(Dt)>Wt&&Math.abs(Nt)>Ut&&(dt.swipe[1]=Ct))}this.emit()}pointerClick(ft){!this.state.tap&&ft.detail>0&&(ft.preventDefault(),ft.stopPropagation())}setupPointer(ft){const dt=this.config,vt=dt.device;dt.pointerLock&&ft.currentTarget.requestPointerLock(),dt.pointerCapture||(this.eventStore.add(this.sharedConfig.window,vt,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,vt,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,vt,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(ft){this.state._preventScroll&&ft.cancelable&&ft.preventDefault()}setupScrollPrevention(ft){this.state._preventScroll=!1,persistEvent(ft);const dt=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",dt),this.eventStore.add(this.sharedConfig.window,"touch","cancel",dt),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,ft)}setupDelayTrigger(ft){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(ft)},this.config.delay)}keyDown(ft){const dt=KEYS_DELTA_MAP[ft.key];if(dt){const vt=this.state,Et=ft.shiftKey?10:ft.altKey?.1:1;this.start(ft),vt._delta=dt(this.config.keyboardDisplacement,Et),vt._keyboardActive=!0,V.addTo(vt._movement,vt._delta),this.compute(ft),this.emit()}}keyUp(ft){ft.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(ft),this.emit())}bind(ft){const dt=this.config.device;ft(dt,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(ft(dt,"change",this.pointerMove.bind(this)),ft(dt,"end",this.pointerUp.bind(this)),ft(dt,"cancel",this.pointerUp.bind(this)),ft("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(ft("key","down",this.keyDown.bind(this)),ft("key","up",this.keyUp.bind(this))),this.config.filterTaps&&ft("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(lt){"persist"in lt&&typeof lt.persist=="function"&&lt.persist()}const isBrowser=typeof window<"u"&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch{return!1}}const SUPPORT={isBrowser,gesture:supportsGestureEvents(),touch:isTouchScreen(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,DEFAULT_KEYBOARD_DISPLACEMENT=10,DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8},dragConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{device(lt,ft,{pointer:{touch:dt=!1,lock:vt=!1,mouse:Et=!1}={}}){return this.pointerLock=vt&&SUPPORT.pointerLock,SUPPORT.touch&&dt?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!Et?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(lt,ft,{preventScroll:dt}){if(this.preventScrollDelay=typeof dt=="number"?dt:dt||dt===void 0&&lt?DEFAULT_PREVENT_SCROLL_DELAY:void 0,!(!SUPPORT.touchscreen||dt===!1))return lt||(dt!==void 0?"y":void 0)},pointerCapture(lt,ft,{pointer:{capture:dt=!0,buttons:vt=1,keys:Et=!0}={}}){return this.pointerButtons=vt,this.keys=Et,!this.pointerLock&&this.device==="pointer"&&dt},threshold(lt,ft,{filterTaps:dt=!1,tapsThreshold:vt=3,axis:Et=void 0}){const St=V.toVector(lt,dt?vt:Et?1:0);return this.filterTaps=dt,this.tapsThreshold=vt,St},swipe({velocity:lt=DEFAULT_SWIPE_VELOCITY,distance:ft=DEFAULT_SWIPE_DISTANCE,duration:dt=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V.toVector(lt)),distance:this.transform(V.toVector(ft)),duration:dt}},delay(lt=0){switch(lt){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return lt}},axisThreshold(lt){return lt?_objectSpread2(_objectSpread2({},DEFAULT_DRAG_AXIS_THRESHOLD),lt):DEFAULT_DRAG_AXIS_THRESHOLD},keyboardDisplacement(lt=DEFAULT_KEYBOARD_DISPLACEMENT){return lt}});_objectSpread2(_objectSpread2({},commonConfigResolver),{},{device(lt,ft,{shared:dt,pointer:{touch:vt=!1}={}}){if(dt.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&vt)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(lt,ft,{scaleBounds:dt={},angleBounds:vt={}}){const Et=Tt=>{const At=assignDefault(call(dt,Tt),{min:-1/0,max:1/0});return[At.min,At.max]},St=Tt=>{const At=assignDefault(call(vt,Tt),{min:-1/0,max:1/0});return[At.min,At.max]};return typeof dt!="function"&&typeof vt!="function"?[Et(),St()]:Tt=>[Et(Tt),St(Tt)]},threshold(lt,ft,dt){return this.lockDirection=dt.axis==="lock",V.toVector(lt,this.lockDirection?[.1,3]:0)},modifierKey(lt){return lt===void 0?"ctrlKey":lt},pinchOnWheel(lt=!0){return lt}});_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(lt=!0)=>lt});_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(lt=!0)=>lt});const EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(lt){EngineMap.set(lt.key,lt.engine),ConfigResolverMap.set(lt.key,lt.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver};function _objectWithoutPropertiesLoose(lt,ft){if(lt==null)return{};var dt={},vt=Object.keys(lt),Et,St;for(St=0;St<vt.length;St++)Et=vt[St],!(ft.indexOf(Et)>=0)&&(dt[Et]=lt[Et]);return dt}function _objectWithoutProperties(lt,ft){if(lt==null)return{};var dt=_objectWithoutPropertiesLoose(lt,ft),vt,Et;if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(lt);for(Et=0;Et<St.length;Et++)vt=St[Et],!(ft.indexOf(vt)>=0)&&Object.prototype.propertyIsEnumerable.call(lt,vt)&&(dt[vt]=lt[vt])}return dt}const sharedConfigResolver={target(lt){if(lt)return()=>"current"in lt?lt.current:lt},enabled(lt=!0){return lt},window(lt=SUPPORT.isBrowser?window:void 0){return lt},eventOptions({passive:lt=!0,capture:ft=!1}={}){return{passive:lt,capture:ft}},transform(lt){return lt}},_excluded=["target","eventOptions","window","enabled","transform"];function resolveWith(lt={},ft){const dt={};for(const[vt,Et]of Object.entries(ft))switch(typeof Et){case"function":dt[vt]=Et.call(dt,lt[vt],vt,lt);break;case"object":dt[vt]=resolveWith(lt[vt],Et);break;case"boolean":Et&&(dt[vt]=lt[vt]);break}return dt}function parse(lt,ft,dt={}){const vt=lt,{target:Et,eventOptions:St,window:Tt,enabled:At,transform:Ct}=vt,Rt=_objectWithoutProperties(vt,_excluded);if(dt.shared=resolveWith({target:Et,eventOptions:St,window:Tt,enabled:At,transform:Ct},sharedConfigResolver),ft){const Dt=ConfigResolverMap.get(ft);dt[ft]=resolveWith(_objectSpread2({shared:dt.shared},Rt),Dt)}else for(const Dt in Rt){const kt=ConfigResolverMap.get(Dt);kt&&(dt[Dt]=resolveWith(_objectSpread2({shared:dt.shared},Rt[Dt]),kt))}return dt}class EventStore{constructor(ft,dt){_defineProperty$2(this,"_listeners",new Set),this._ctrl=ft,this._gestureKey=dt}add(ft,dt,vt,Et,St){const Tt=this._listeners,At=toDomEventType(dt,vt),Ct=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},Rt=_objectSpread2(_objectSpread2({},Ct),St);ft.addEventListener(At,Et,Rt);const Dt=()=>{ft.removeEventListener(At,Et,Rt),Tt.delete(Dt)};return Tt.add(Dt),Dt}clean(){this._listeners.forEach(ft=>ft()),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty$2(this,"_timeouts",new Map)}add(ft,dt,vt=140,...Et){this.remove(ft),this._timeouts.set(ft,window.setTimeout(dt,vt,...Et))}remove(ft){const dt=this._timeouts.get(ft);dt&&window.clearTimeout(dt)}clean(){this._timeouts.forEach(ft=>void window.clearTimeout(ft)),this._timeouts.clear()}}class Controller{constructor(ft){_defineProperty$2(this,"gestures",new Set),_defineProperty$2(this,"_targetEventStore",new EventStore(this)),_defineProperty$2(this,"gestureEventStores",{}),_defineProperty$2(this,"gestureTimeoutStores",{}),_defineProperty$2(this,"handlers",{}),_defineProperty$2(this,"config",{}),_defineProperty$2(this,"pointerIds",new Set),_defineProperty$2(this,"touchIds",new Set),_defineProperty$2(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,ft)}setEventIds(ft){if(isTouch(ft))return this.touchIds=new Set(touchIds(ft)),this.touchIds;if("pointerId"in ft)return ft.type==="pointerup"||ft.type==="pointercancel"?this.pointerIds.delete(ft.pointerId):ft.type==="pointerdown"&&this.pointerIds.add(ft.pointerId),this.pointerIds}applyHandlers(ft,dt){this.handlers=ft,this.nativeHandlers=dt}applyConfig(ft,dt){this.config=parse(ft,dt,this.config)}clean(){this._targetEventStore.clean();for(const ft of this.gestures)this.gestureEventStores[ft].clean(),this.gestureTimeoutStores[ft].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...ft){const dt=this.config.shared,vt={};let Et;if(!(dt.target&&(Et=dt.target(),!Et))){if(dt.enabled){for(const Tt of this.gestures){const At=this.config[Tt],Ct=bindToProps(vt,At.eventOptions,!!Et);if(At.enabled){const Rt=EngineMap.get(Tt);new Rt(this,ft,Tt).bind(Ct)}}const St=bindToProps(vt,dt.eventOptions,!!Et);for(const Tt in this.nativeHandlers)St(Tt,"",At=>this.nativeHandlers[Tt](_objectSpread2(_objectSpread2({},this.state.shared),{},{event:At,args:ft})),void 0,!0)}for(const St in vt)vt[St]=chain(...vt[St]);if(!Et)return vt;for(const St in vt){const{device:Tt,capture:At,passive:Ct}=parseProp(St);this._targetEventStore.add(Et,Tt,"",vt[St],{capture:At,passive:Ct})}}}}function setupGesture(lt,ft){lt.gestures.add(ft),lt.gestureEventStores[ft]=new EventStore(lt,ft),lt.gestureTimeoutStores[ft]=new TimeoutStore}function resolveGestures(lt,ft){ft.drag&&setupGesture(lt,"drag"),ft.wheel&&setupGesture(lt,"wheel"),ft.scroll&&setupGesture(lt,"scroll"),ft.move&&setupGesture(lt,"move"),ft.pinch&&setupGesture(lt,"pinch"),ft.hover&&setupGesture(lt,"hover")}const bindToProps=(lt,ft,dt)=>(vt,Et,St,Tt={},At=!1)=>{var Ct,Rt;const Dt=(Ct=Tt.capture)!==null&&Ct!==void 0?Ct:ft.capture,kt=(Rt=Tt.passive)!==null&&Rt!==void 0?Rt:ft.passive;let Nt=At?vt:toHandlerProp(vt,Et,Dt);dt&&kt&&(Nt+="Passive"),lt[Nt]=lt[Nt]||[],lt[Nt].push(St)};function useRecognizers(lt,ft={},dt,vt){const Et=React$1.useMemo(()=>new Controller(lt),[]);if(Et.applyHandlers(lt,vt),Et.applyConfig(ft,dt),React$1.useEffect(Et.effect.bind(Et)),React$1.useEffect(()=>Et.clean.bind(Et),[]),ft.target===void 0)return Et.bind.bind(Et)}function useDrag(lt,ft){return registerAction(dragAction),useRecognizers({drag:lt},ft||{},"drag")}function FloatingCardMobilePosition(lt){const ft=reactExports.useRef(null),dt=reactExports.useRef(!1),[vt,Et]=reactExports.useState(null),[{y:St},Tt]=J(()=>({y:0,onRest(){dt.current&&lt.onClose&&lt.onClose()}})),At=useDrag(({last:Ct,velocity:[,Rt],direction:[,Dt],movement:[,kt],...Nt})=>{if(dt.current||Nt.target.closest(".overflow-y-auto"))return;const Wt=(vt==null?void 0:vt.height)??0;Ct?kt>Wt*.5||Rt>.5&&Dt>0&&kt>20?(Tt.start({y:Wt*1.2,immediate:!1,config:{...mt.wobbly,velocity:Rt,clamp:!0}}),dt.current=!0):Tt.start({y:0,immediate:!1,config:mt.wobbly}):Tt.start({y:kt,immediate:!0})},{from:()=>[0,St.get()],filterTaps:!0,bounds:{top:0},rubberband:!0});return reactExports.useEffect(()=>{if(!ft.current)return;function Ct(){var kt;const Dt=(kt=ft.current)==null?void 0:kt.getBoundingClientRect();Et(Dt??null)}Ct();const Rt=new ResizeObserver(Ct);return Rt.observe(ft.current),()=>{Rt.disconnect()}},[]),jsx("div",{className:"is-mobile-view absolute inset-x-0 mx-auto max-w-[400px] origin-bottom-left touch-none",style:{transform:`translateY(${window.innerHeight-((vt==null?void 0:vt.height)??0)+200}px)`},children:jsx(it.div,{ref:ft,className:[lt.className??"","touch-none"].join(" "),style:{y:St},...At(),children:lt.children})})}function ProgressRing(lt){const ft=lt.radius??40;return jsxs("svg",{className:`${lt.className??""} -rotate-90`,viewBox:"0 0 100 100",children:[jsx("circle",{className:`fill-transparent stroke-denim-700 stroke-[15] opacity-25 ${lt.backingRingClassname??""}`,r:ft,cx:"50",cy:"50"}),jsx("circle",{className:"fill-transparent stroke-current stroke-[15] transition-[stroke-dashoffset] duration-150",r:ft,cx:"50",cy:"50",style:{strokeDasharray:`${2*Math.PI*ft} ${2*Math.PI*ft}`,strokeDashoffset:`${2*Math.PI*ft-lt.percentage/100*(2*Math.PI*ft)}`}})]})}function ScrollToActive(lt){const ft=reactExports.createRef(),dt=reactExports.useRef(!1),vt=30;return reactExports.useEffect(()=>{if(dt.current||!ft.current)return;const Et=ft.current,St=Et.classList.contains("overflow-y-auto")?Et:Et.closest(".overflow-y-auto"),Tt=St==null?void 0:St.querySelector(".active");if(St&&Tt){let At=0,Ct=0,Rt=0,Dt=0;if((()=>{const zt=Tt.getBoundingClientRect(),Wt=St.getBoundingClientRect();At=Wt.height,Rt=zt.height,Ct=zt.top-Wt.top+St.scrollTop,Dt=St.scrollTop})(),Ct+Rt<Dt+At-vt||Ct>Dt+vt){const zt=Ct+Rt/2,Wt=At/2,nr=zt-Wt;St.scrollTo({top:nr})}}dt.current=!0},[ft]),jsx("div",{className:lt.className,ref:ft,children:lt.children})}function PopoutSection(lt){return jsx(ScrollToActive,{className:["p-5",lt.className||""].join(" "),children:lt.children})}function PopoutListEntryBase(lt){const ft=lt.isOnDarkBackground?"bg-ash-200":"bg-ash-400",dt=lt.isOnDarkBackground?"hover:bg-ash-200":"hover:bg-ash-400";return jsxs("div",{className:["group -mx-2 flex cursor-pointer items-center justify-between space-x-1 rounded p-2 font-semibold transition-[background-color,color] duration-150",dt,lt.active?`${ft} active text-white outline-denim-700`:"text-denim-700 hover:text-white"].join(" "),onClick:lt.onClick,children:[lt.active&&jsx("div",{className:"absolute left-0 h-8 w-0.5 bg-bink-500"}),jsx("span",{className:"truncate",children:lt.children}),jsxs("div",{className:"relative min-h-[1rem] min-w-[1rem]",children:[!lt.noChevron&&jsx(Icon,{className:"absolute inset-0 translate-x-2 text-white opacity-0 transition-[opacity,transform] duration-100 group-hover:translate-x-0 group-hover:opacity-100",icon:Icons.CHEVRON_RIGHT}),lt.right]})]})}function PopoutListEntry(lt){return jsx(PopoutListEntryBase,{isOnDarkBackground:lt.isOnDarkBackground,active:lt.active,onClick:lt.onClick,noChevron:lt.loading||lt.errored,right:jsxs(Fragment,{children:[lt.errored&&jsx(Icon,{icon:Icons.WARNING,className:"absolute inset-0 text-rose-400"}),lt.loading&&!lt.errored&&jsx(Spinner,{className:"absolute inset-0 text-base [--color:#9C93B5]"}),lt.percentageCompleted&&!lt.loading&&!lt.errored?jsx(ProgressRing,{className:"absolute inset-0 text-bink-600 opacity-100 transition-[opacity] group-hover:opacity-0",backingRingClassname:"stroke-ash-500",percentage:lt.percentageCompleted>90?100:lt.percentageCompleted}):""]}),children:lt.children})}function PopoutListAction(lt){const ft=jsx(PopoutListEntryBase,{active:lt.active,isOnDarkBackground:lt.isOnDarkBackground,right:lt.right,onClick:lt.href?void 0:lt.onClick,noChevron:lt.noChevron,children:jsxs("div",{className:"flex items-center space-x-3",children:[lt.icon?jsx(Icon,{className:"text-xl",icon:lt.icon}):null,jsx("div",{children:lt.children})]})});return lt.href?jsx("a",{href:lt.href?lt.href:void 0,rel:"noreferrer",target:"_blank",download:lt.download?lt.download:void 0,onClick:lt.onClick,children:ft}):ft}function FloatingDragHandle(){const{isMobile:lt}=useIsMobile();return lt?jsx("div",{className:"relative z-50 mx-auto my-3 -mb-3 h-1 w-12 rounded-full bg-ash-500 bg-opacity-30"}):null}function MobilePopoutSpacer(){const{isMobile:lt}=useIsMobile();return lt?jsx("div",{className:"h-[200px]"}):null}function CardBase(lt){const ft=reactExports.useRef(null),{isMobile:dt}=useIsMobile(),vt=Wo(0,{config:{easing:Lt$1.easeInOutSine,duration:300}}),Et=Wo(0,{config:{easing:Lt$1.easeInOutSine,duration:300}}),[St,Tt]=reactExports.useState(null),At=reactExports.useCallback((Ct=!0)=>{if(!ft.current)return;const Rt=ft.current.querySelectorAll(":scope *[data-floating-page='true']");if(Ct&&Tt(Rt),Rt.length===0){vt.start(0),Et.start(0);return}const Dt=Rt[Rt.length-1],kt=Dt.getBoundingClientRect(),Nt=Dt.scrollHeight;vt.get()===0?(vt.set(Nt),Et.set(kt.width)):(vt.start(Nt),Et.start(kt.width))},[vt,Et]);return reactExports.useEffect(()=>{if(!ft.current)return;At();const Ct=new MutationObserver(()=>{At()});return Ct.observe(ft.current,{attributes:!1,childList:!0,subtree:!1}),()=>{Ct.disconnect()}},[At]),reactExports.useEffect(()=>{const Ct=new ResizeObserver(()=>{At(!1)});return St==null||St.forEach(Rt=>Ct.observe(Rt)),()=>{Ct.disconnect()}},[St,At]),jsx(it.div,{ref:ft,style:{height:vt,width:dt?"100%":Et},className:"relative flex items-center justify-center overflow-hidden",children:lt.children})}function FloatingCard(lt){const{isMobile:ft}=useIsMobile(),dt=jsx(CardBase,{children:lt.children});return ft?jsx(FloatingCardMobilePosition,{className:lt.className,onClose:lt.onClose,children:dt}):jsx(FloatingCardAnchorPosition,{id:lt.for,className:lt.className,children:dt})}function PopoutFloatingCard(lt){return jsx(FloatingCard,{className:"overflow-hidden rounded-md bg-ash-300",...lt})}const FloatingCardView={Header(lt){let ft=jsxs("div",{onClick:lt.goBack,className:"flex cursor-pointer items-center space-x-2 transition-colors duration-200 hover:text-white",children:[jsx(Icon,{icon:Icons.ARROW_LEFT}),jsx("span",{children:lt.backText||"Go back"})]});return lt.close&&(ft=jsxs("div",{onClick:lt.goBack,className:"flex cursor-pointer items-center space-x-2 transition-colors duration-200 hover:text-white",children:[jsx(Icon,{icon:Icons.X}),jsx("span",{children:"Close"})]})),jsxs("div",{className:"flex flex-col bg-[#1C161B]",children:[jsx(FloatingDragHandle,{}),jsxs(PopoutSection,{children:[jsxs("div",{className:"flex justify-between",children:[jsx("div",{children:ft}),jsx("div",{children:lt.action??null})]}),jsx("h2",{className:"mt-8 mb-2 text-3xl font-bold text-white",children:lt.title}),jsx("p",{children:lt.description})]})]})},Content(lt){return jsxs("div",{className:"grid h-full grid-rows-[1fr]",children:[lt.noSection?jsx("div",{className:"relative h-full overflow-y-auto bg-ash-300",children:lt.children}):jsx(PopoutSection,{className:"relative h-full overflow-y-auto bg-ash-300",children:lt.children}),jsx(MobilePopoutSpacer,{})]})}};function EpisodeSelectionPopout(){var tr,cr,Kt,Zt;const lt=useParams(),{t:ft}=useTranslation(),{pageProps:dt,navigate:vt}=useFloatingRouter("/episodes"),Et=useVideoPlayerDescriptor(),St=useMeta(Et),Tt=useControls(Et),[At,Ct]=reactExports.useState(null),[Rt,Dt,kt]=useLoading((rr,ar)=>getMetaFromId(MWMediaType.SERIES,rr,ar)),Nt=reactExports.useCallback(rr=>{var ar;Ct({seasonId:rr,season:void 0}),Rt((ar=decodeJWId(lt.media))==null?void 0:ar.id,rr).then(sr=>{(sr==null?void 0:sr.meta.type)===MWMediaType.SERIES&&Ct({seasonId:rr,season:sr==null?void 0:sr.meta.seasonData})})},[Rt,lt.media]),zt=(At==null?void 0:At.seasonId)??((tr=St==null?void 0:St.episode)==null?void 0:tr.seasonId),Wt=reactExports.useCallback((rr,ar)=>{Tt.closePopout(),setTimeout(()=>{Tt.setCurrentEpisode(rr,ar)},100)},[Tt]),nr=reactExports.useMemo(()=>{var rr;return(rr=St==null?void 0:St.seasons)==null?void 0:rr.find(ar=>ar.id===zt)},[St,zt]),Ut=reactExports.useMemo(()=>{var rr,ar,sr,dr;return At!=null&&At.season?(rr=At==null?void 0:At.season)==null?void 0:rr.episodes:(dr=(sr=(ar=St==null?void 0:St.seasons)==null?void 0:ar.find)==null?void 0:sr.call(ar,fr=>fr&&fr.id===zt))==null?void 0:dr.episodes},[St,zt,At]),Ht=rr=>{Nt(rr),Ct({seasonId:rr}),vt("/episodes")},{watched:Bt}=useWatchedContext(),Ft=()=>{Tt.closePopout()};return jsxs(Fragment,{children:[jsxs(FloatingView,{...dt("seasons"),height:600,width:375,children:[jsx(FloatingCardView.Header,{title:ft("videoPlayer.popouts.seasons"),description:ft("videoPlayer.popouts.descriptions.seasons"),goBack:()=>vt("/episodes"),backText:`To ${nr==null?void 0:nr.title.toLowerCase()}`}),jsx(FloatingCardView.Content,{children:nr?(Kt=(cr=St==null?void 0:St.seasons)==null?void 0:cr.map)==null?void 0:Kt.call(cr,rr=>{var ar;return jsx(PopoutListEntry,{active:((ar=St==null?void 0:St.episode)==null?void 0:ar.seasonId)===rr.id,onClick:()=>Ht(rr.id),children:rr.title},rr.id)}):"No season"})]}),jsxs(FloatingView,{...dt("episodes"),height:600,width:375,children:[jsx(FloatingCardView.Header,{title:(nr==null?void 0:nr.title)??"Unknown season",description:ft("videoPlayer.popouts.descriptions.episode"),goBack:Ft,close:!0,action:jsxs("button",{type:"button",onClick:()=>vt("/episodes/seasons"),className:"flex cursor-pointer items-center space-x-2 transition-colors duration-200 hover:text-white",children:[jsx("span",{children:"Other seasons"}),jsx(Icon,{icon:Icons.CHEVRON_RIGHT})]})}),jsx(FloatingCardView.Content,{children:Dt?jsx("div",{className:"flex h-full w-full items-center justify-center",children:jsx(Loading,{})}):kt?jsx("div",{className:"flex h-full w-full items-center justify-center",children:jsxs("div",{className:"flex flex-col flex-wrap items-center text-slate-400",children:[jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"text-xl text-bink-600"}),jsx("p",{className:"mt-6 w-full text-center",children:ft("videoPlayer.popouts.errors.loadingWentWrong",{seasonTitle:(Zt=nr==null?void 0:nr.title)==null?void 0:Zt.toLowerCase()})})]})}):jsx("div",{children:Ut&&nr?Ut.map(rr=>{var ar,sr;return jsx(PopoutListEntry,{active:rr.id===((ar=St==null?void 0:St.episode)==null?void 0:ar.episodeId),onClick:()=>{var dr;rr.id===((dr=St==null?void 0:St.episode)==null?void 0:dr.episodeId)?Tt.closePopout():Wt(nr.id,rr.id)},percentageCompleted:(sr=Bt.items.find(dr=>{var fr,pr,xr,lr;return((pr=(fr=dr.item)==null?void 0:fr.series)==null?void 0:pr.seasonId)===nr.id&&((lr=(xr=dr.item)==null?void 0:xr.series)==null?void 0:lr.episodeId)===rr.id}))==null?void 0:sr.percentage,children:ft("videoPlayer.popouts.episode",{index:rr.number,title:rr.title})},rr.id)}):"No episodes"})})]})]})}function DownloadAction(){var Tt,At;const lt=useVideoPlayerDescriptor(),ft=useSource(lt),{t:dt}=useTranslation(),vt=useMeta(lt),Et=((Tt=ft.source)==null?void 0:Tt.type)===MWStreamType.HLS;if(Et)return null;const St=vt==null?void 0:vt.meta.meta.title;return jsx(PopoutListAction,{href:Et||(At=ft.source)==null?void 0:At.url,download:St?`${normalizeTitle(St)}.mp4`:void 0,icon:Icons.DOWNLOAD,children:dt("videoPlayer.buttons.download")})}function CaptionsSelectionAction(lt){const{t:ft}=useTranslation();return jsx(PopoutListAction,{icon:Icons.CAPTIONS,onClick:lt.onClick,children:ft("videoPlayer.buttons.captions")})}function QualityDisplayAction(){const lt=useVideoPlayerDescriptor(),ft=useSource(lt);return ft.source?jsx("div",{className:"rounded-md bg-denim-300 py-1 px-2 transition-colors",children:jsx("p",{className:"text-center text-xs font-bold text-slate-300 transition-colors",children:ft.source.quality})}):null}function SourceSelectionAction(lt){const{t:ft}=useTranslation();return jsx(PopoutListAction,{icon:Icons.CLAPPER_BOARD,onClick:lt.onClick,right:jsx(QualityDisplayAction,{}),noChevron:!0,children:ft("videoPlayer.buttons.source")})}function PlaybackSpeedSelectionAction(lt){const{t:ft}=useTranslation();return jsx(PopoutListAction,{icon:Icons.TACHOMETER,onClick:lt.onClick,children:ft("videoPlayer.buttons.playbackSpeed")})}const customCaption="external-custom";function makeCaptionId(lt,ft){return ft?`linked-${lt.langIso}`:`external-${lt.langIso}`}function CaptionSelectionPopout(lt){var zt,Wt;const{t:ft}=useTranslation(),dt=useVideoPlayerDescriptor(),vt=useMeta(dt),Et=useSource(dt),St=useControls(dt),Tt=reactExports.useMemo(()=>(vt==null?void 0:vt.captions.map(nr=>({...nr,id:makeCaptionId(nr,!0)})))??[],[vt]),At=reactExports.useRef(""),[Ct,Rt,Dt]=useLoading(async(nr,Ut)=>{const Ht=makeCaptionId(nr,Ut);At.current=Ht;const Bt=await getCaptionUrl(nr),tr=await(await fetch(Bt)).text();parseSubtitles(tr),St.setCaption(Ht,Bt),setTimeout(()=>{St.closePopout()},100)}),kt=(Wt=(zt=Et.source)==null?void 0:zt.caption)==null?void 0:Wt.id,Nt=reactExports.useRef(null);return jsxs(FloatingView,{...lt.router.pageProps(lt.prefix),width:320,height:500,children:[jsx(FloatingCardView.Header,{title:ft("videoPlayer.popouts.captions"),description:ft("videoPlayer.popouts.descriptions.captions"),goBack:()=>lt.router.navigate("/"),action:jsxs("button",{type:"button",onClick:()=>lt.router.navigate(`${lt.prefix}/caption-settings`),className:"flex cursor-pointer items-center space-x-2 transition-colors duration-200 hover:text-white",children:[jsx("span",{children:ft("videoPlayer.popouts.captionPreferences.title")}),jsx(Icon,{icon:Icons.GEAR})]})}),jsxs(FloatingCardView.Content,{noSection:!0,children:[jsxs(PopoutSection,{children:[jsx(PopoutListEntry,{active:!kt,onClick:()=>{St.clearCaption(),St.closePopout()},children:ft("videoPlayer.popouts.noCaptions")}),jsxs(PopoutListEntry,{active:kt===customCaption,loading:Rt&&At.current===customCaption,errored:Dt&&At.current===customCaption,onClick:()=>{var nr;return(nr=Nt.current)==null?void 0:nr.click()},children:[ft(kt===customCaption?"videoPlayer.popouts.customCaption":"videoPlayer.popouts.uploadCustomCaption"),jsx("input",{className:"hidden",ref:Nt,accept:subtitleTypeList.join(","),type:"file",onChange:nr=>{if(!nr.target.files)return;const Ut={langIso:"custom",url:URL.createObjectURL(nr.target.files[0]),type:MWCaptionType.UNKNOWN};Ct(Ut,!1)}})]},customCaption)]}),jsxs("p",{className:"sticky top-0 z-10 flex items-center space-x-1 bg-ash-300 px-5 py-3 text-xs font-bold uppercase",children:[jsx(Icon,{className:"text-base",icon:Icons.LINK}),jsx("span",{children:ft("videoPlayer.popouts.linkedCaptions")})]}),jsx(PopoutSection,{className:"pt-0",children:jsx("div",{children:Tt.map(nr=>jsx(PopoutListEntry,{active:nr.id===kt,loading:Rt&&nr.id===At.current,errored:Dt&&nr.id===At.current,onClick:()=>{At.current=nr.id,Ct(nr,!0)},children:nr.langIso},nr.langIso))})})]})]})}function EmbedEntry(lt){const[ft,dt,vt]=useLoading(async()=>{const Et=getEmbedScraperByType(lt.type);if(!Et)throw new Error("Embed scraper not found");const St=await runEmbedScraper(Et,{progress:()=>{},url:lt.url});lt.onSelect(St)});return jsx(PopoutListEntry,{isOnDarkBackground:!0,loading:dt,errored:!!vt,active:lt.active,onClick:()=>{ft()},children:lt.name})}function SourceSelectionPopout(lt){const{t:ft}=useTranslation(),dt=useVideoPlayerDescriptor(),vt=useControls(dt),Et=useMeta(dt),{source:St}=useSource(dt),Tt=reactExports.useRef(null),At=reactExports.useMemo(()=>Et?getProviders().filter(Ft=>Ft.type.includes(Et.meta.meta.type)):[],[Et]),[Ct,Rt]=reactExports.useState(null),[Dt,kt]=reactExports.useState(null),Nt=reactExports.useMemo(()=>At.find(Ft=>Ft.id===Ct)??null,[At,Ct]),[zt,Wt,nr]=useLoading(async Ft=>{var cr,Kt;const tr=At.find(Zt=>Zt.id===Ft);if(!tr)throw new Error("Invalid provider");if(!Et)throw new Error("need meta");return runProvider(tr,{media:Et.meta,progress:()=>{},type:Et.meta.meta.type,episode:(cr=Et.episode)==null?void 0:cr.episodeId,season:(Kt=Et.episode)==null?void 0:Kt.seasonId})});function Ut(Ft){vt.setSource({quality:Ft.quality,source:Ft.streamUrl,type:Ft.type,embedId:Ft.embedId,providerId:Tt.current??void 0}),Et&&vt.setMeta({...Et,captions:Ft.captions}),vt.closePopout()}const Ht=Ft=>{if(!Ft){Tt.current=null,Rt(null),lt.router.navigate(`/${lt.prefix}/source`);return}zt(Ft).then(async tr=>{if(Tt.current){if(tr&&tr.embeds.length+(tr.stream?1:0)===1){const Kt=tr.stream;if(!Kt){const Zt=tr==null?void 0:tr.embeds[0];if(!Zt)throw new Error("Embed scraper not found");const rr=getEmbedScraperByType(Zt.type);if(!rr)throw new Error("Embed scraper not found");const ar=await runEmbedScraper(rr,{progress:()=>{},url:Zt.url});Ut(ar);return}Ut(Kt);return}kt(tr??null)}}),Tt.current=Ft,Rt(Ft),lt.router.navigate(`/${lt.prefix}/source/embeds`)},Bt=reactExports.useMemo(()=>{const Ft=(Dt==null?void 0:Dt.embeds)||[],tr={};for(const Kt of Ft)Kt.type&&(tr[Kt.type]||(tr[Kt.type]=[]),tr[Kt.type].push({...Kt,displayName:Kt.type}));return Object.entries(tr).flatMap(([Kt,Zt])=>Zt.length>1?Zt.map((rr,ar)=>({...rr,displayName:`${rr.type} ${ar+1}`})):Zt)},[Dt==null?void 0:Dt.embeds]);return jsxs(Fragment,{children:[jsxs(FloatingView,{...lt.router.pageProps(lt.prefix),width:320,height:500,children:[jsx(FloatingCardView.Header,{title:ft("videoPlayer.popouts.sources"),description:ft("videoPlayer.popouts.descriptions.sources"),goBack:()=>lt.router.navigate("/")}),jsx(FloatingCardView.Content,{children:At.map(Ft=>jsx(PopoutListEntry,{active:Ft.id===(St==null?void 0:St.providerId),onClick:()=>{Ht(Ft.id)},children:Ft.displayName},Ft.id))})]}),jsxs(FloatingView,{...lt.router.pageProps("embeds"),width:320,height:500,children:[jsx(FloatingCardView.Header,{title:(Nt==null?void 0:Nt.displayName)??"",description:ft("videoPlayer.popouts.descriptions.embeds"),goBack:()=>lt.router.navigate(`/${lt.prefix}`)}),jsx(FloatingCardView.Content,{children:Wt?jsx("div",{className:"flex h-full w-full items-center justify-center",children:jsx(Loading,{})}):nr?jsx("div",{className:"flex h-full w-full items-center justify-center",children:jsxs("div",{className:"flex flex-col flex-wrap items-center text-slate-400",children:[jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"text-xl text-bink-600"}),jsx("p",{className:"mt-6 w-full text-center",children:ft("videoPlayer.popouts.errors.embedsError")})]})}):jsxs(Fragment,{children:[Dt!=null&&Dt.stream?jsx(PopoutListEntry,{isOnDarkBackground:!0,onClick:()=>{Dt.stream&&Ut(Dt.stream)},active:(Nt==null?void 0:Nt.id)===(St==null?void 0:St.providerId)&&(Nt==null?void 0:Nt.id)===(St==null?void 0:St.embedId),children:"Native source"}):null,((Bt==null?void 0:Bt.length)||0)>0?Bt==null?void 0:Bt.map(Ft=>jsx(EmbedEntry,{type:Ft.type,name:Ft.displayName??"",url:Ft.url,active:!1,onSelect:tr=>{Ut(tr)}},Ft.url)):jsx("div",{className:"flex h-full w-full items-center justify-center",children:jsxs("div",{className:"flex flex-col flex-wrap items-center text-slate-400",children:[jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"text-xl text-bink-600"}),jsx("p",{className:"mt-6 w-full text-center",children:ft("videoPlayer.popouts.noEmbeds")})]})})]})})]})]})}function Slider(lt){const ft=reactExports.useRef(null);return reactExports.useEffect(()=>{const dt=ft.current;dt.style.setProperty("--value",dt.value),dt.style.setProperty("--min",dt.min===""?"0":dt.min),dt.style.setProperty("--max",dt.max===""?"100":dt.max),dt.addEventListener("input",()=>dt.style.setProperty("--value",dt.value))},[ft]),jsxs("div",{className:"mb-6 flex flex-row gap-4",children:[jsxs("div",{className:"flex w-full flex-col gap-2",children:[lt.label?jsx("label",{className:"font-bold",children:lt.label}):null,jsx("input",{type:"range",ref:ft,className:"styled-slider slider-progress mt-[20px]",onChange:lt.onChange,value:lt.value,max:lt.max,min:lt.min,step:lt.step})]}),jsx("div",{className:"mt-1 aspect-[2/1] h-8 rounded-sm bg-[#1C161B] pt-1",children:jsx("div",{className:"text-center font-bold text-white",children:lt.valueDisplay??lt.value})})]})}function CaptionSettingsPopout(lt){const{t:ft}=useTranslation(),{captionSettings:dt,setCaptionBackgroundColor:vt,setCaptionColor:Et,setCaptionDelay:St,setCaptionFontSize:Tt}=useSettings(),At=["#ffffff","#00ffff","#ffff00"];return jsxs(FloatingView,{...lt.router.pageProps(lt.prefix),width:375,children:[jsx(FloatingCardView.Header,{title:ft("videoPlayer.popouts.captionPreferences.title"),description:ft("videoPlayer.popouts.descriptions.captionPreferences"),goBack:()=>lt.router.navigate("/captions")}),jsxs(FloatingCardView.Content,{children:[jsx(Slider,{label:ft("videoPlayer.popouts.captionPreferences.delay"),max:10,min:-10,step:.1,valueDisplay:`${dt.delay.toFixed(1)}s`,value:dt.delay,onChange:Ct=>St(Ct.target.valueAsNumber)}),jsx(Slider,{label:"Size",min:14,step:1,max:60,value:dt.style.fontSize,onChange:Ct=>Tt(Ct.target.valueAsNumber)}),jsx(Slider,{label:ft("videoPlayer.popouts.captionPreferences.opacity"),step:1,min:0,max:255,valueDisplay:`${(parseInt(dt.style.backgroundColor.substring(7,9),16)/255*100).toFixed(0)}%`,value:parseInt(dt.style.backgroundColor.substring(7,9),16),onChange:Ct=>vt(`${dt.style.backgroundColor.substring(0,7)}${Ct.target.valueAsNumber.toString(16)}`)}),jsxs("div",{className:"flex flex-row justify-between",children:[jsx("label",{className:"font-bold",htmlFor:"color",children:ft("videoPlayer.popouts.captionPreferences.color")}),jsx("div",{className:"flex flex-row gap-2",children:At.map(Ct=>jsxs("div",{className:`flex h-8 w-8 items-center justify-center rounded transition-[background-color,transform] duration-100 hover:bg-[#1c161b79] active:scale-110 ${Ct===dt.style.color?"bg-[#1C161B]":""}`,onClick:()=>Et(Ct),children:[jsx("div",{className:"h-4 w-4 cursor-pointer appearance-none rounded-full",style:{backgroundColor:Ct}}),jsx(Icon,{className:["absolute text-xs text-[#1C161B]",Ct===dt.style.color?"":"hidden"].join(" "),icon:Icons.CHECKMARK})]}))})]})]})]})}const speedSelectionOptions=[.25,.5,.75,1,1.25,1.5,2];function PlaybackSpeedPopout(lt){const{t:ft}=useTranslation(),dt=useVideoPlayerDescriptor(),vt=useControls(dt),Et=useMediaPlaying(dt);return jsxs(FloatingView,{...lt.router.pageProps(lt.prefix),width:320,height:500,children:[jsx(FloatingCardView.Header,{title:ft("videoPlayer.popouts.playbackSpeed"),description:ft("videoPlayer.popouts.descriptions.playbackSpeed"),goBack:()=>lt.router.navigate("/")}),jsxs(FloatingCardView.Content,{noSection:!0,children:[jsx(PopoutSection,{children:speedSelectionOptions.map(St=>jsxs(PopoutListEntry,{active:Et.playbackSpeed===St,onClick:()=>{vt.setPlaybackSpeed(St),vt.closePopout()},children:[St,"x"]},St))}),jsxs("p",{className:"sticky top-0 z-10 flex items-center space-x-1 bg-ash-300 px-5 py-3 text-xs font-bold uppercase",children:[jsx(Icon,{className:"text-base",icon:Icons.TACHOMETER}),jsx("span",{children:ft("videoPlayer.popouts.customPlaybackSpeed")})]}),jsx(PopoutSection,{className:"pt-0",children:jsx("div",{children:jsx(Slider,{min:.1,max:10,step:.1,value:Et.playbackSpeed,valueDisplay:`${Et.playbackSpeed}x`,onChange:St=>vt.setPlaybackSpeed(St.target.valueAsNumber)})})})]})]})}function SettingsPopout(){const lt=useFloatingRouter(),{pageProps:ft,navigate:dt}=lt;return jsxs(Fragment,{children:[jsxs(FloatingView,{...ft("/"),width:320,children:[jsx(FloatingDragHandle,{}),jsxs(FloatingCardView.Content,{children:[jsx(DownloadAction,{}),jsx(SourceSelectionAction,{onClick:()=>dt("/source")}),jsx(CaptionsSelectionAction,{onClick:()=>dt("/captions")}),jsx(PlaybackSpeedSelectionAction,{onClick:()=>dt("/playback-speed")})]})]}),jsx(SourceSelectionPopout,{router:lt,prefix:"source"}),jsx(CaptionSelectionPopout,{router:lt,prefix:"captions"}),jsx(CaptionSettingsPopout,{router:lt,prefix:"caption-settings"}),jsx(PlaybackSpeedPopout,{router:lt,prefix:"playback-speed"})]})}function FloatingContainer(lt){const[ft,dt]=reactExports.useState(null),vt=reactExports.useRef(null),Et=reactExports.useRef(null);reactExports.useEffect(()=>{function Tt(At){Et.current=At.target}return document.addEventListener("mousedown",Tt),()=>{document.removeEventListener("mousedown",Tt)}});const St=reactExports.useCallback(Tt=>{const At=Et.current;Et.current=null,Tt.currentTarget===Tt.target&&At&&At.isEqualNode(Tt.currentTarget)&&lt.onClose&&lt.onClose()},[lt]);return reactExports.useEffect(()=>{var At;const Tt=(At=vt.current)==null?void 0:At.closest(".popout-location");dt(Tt??document.body)},[]),jsx("div",{ref:vt,children:ft?reactDomExports.createPortal(jsx(Transition,{show:lt.show,animation:"none",children:jsxs("div",{className:"popout-wrapper pointer-events-auto fixed inset-0 z-[999] select-none",children:[jsx(Transition,{animation:"fade",isChild:!0,children:jsx("div",{onClick:St,className:["absolute inset-0",lt.darken?"bg-black opacity-90":""].join(" ")})}),jsx(Transition,{animation:"slide-up",className:"h-0",isChild:!0,children:lt.children})]})}),ft):null})}const Popouts="";function ShowPopout(lt){return jsx(Fragment,{children:Object.entries({settings:jsx(SettingsPopout,{}),episodes:jsx(EpisodeSelectionPopout,{})}).map(([dt,vt])=>jsx(FloatingContainer,{show:lt.popoutId===dt,onClose:lt.onClose,children:jsx(PopoutFloatingCard,{for:dt,onClose:lt.onClose,children:vt})},dt))})}function PopoutProviderAction(){const lt=useVideoPlayerDescriptor(),ft=useInterface(lt),dt=useControls(lt);useSyncPopouts(lt);const vt=reactExports.useCallback(()=>{dt.closePopout()},[dt]);return jsx(ShowPopout,{popoutId:ft.popout,onClose:vt})}function CastingTextAction(){const{t:lt}=useTranslation(),ft=useVideoPlayerDescriptor();return useMisc(ft).isCasting?jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[jsx("div",{className:"rounded-full bg-denim-200 p-3 brightness-100 grayscale",children:jsx(Icon,{icon:Icons.CASTING})}),jsx("p",{className:"text-center text-gray-300",children:lt("casting.casting")})]}):null}function PictureInPictureAction(lt){const{isMobile:ft}=useIsMobile(),{t:dt}=useTranslation(),vt=useVideoPlayerDescriptor(),Et=useControls(vt),St=reactExports.useCallback(()=>{Et.togglePictureInPicture()},[Et]);return!canPictureInPicture()&&!canWebkitPictureInPicture()?null:jsx(VideoPlayerIconButton,{className:lt.className,icon:Icons.PICTURE_IN_PICTURE,onClick:St,text:ft?dt("videoPlayer.buttons.pictureInPicture"):""})}function CaptionCue({text:lt}){const{captionSettings:ft}=useSettings(),dt=(lt||"").replaceAll(/\r?\n/g,"<br />"),vt=sanitize(dt,{ALLOWED_TAGS:["c","b","i","u","span","ruby","rt","br"],ADD_TAGS:["v","lang"],ALLOWED_ATTR:["title","lang"]});return jsx("p",{className:"pointer-events-none mb-1 select-none rounded px-4 py-1 text-center [text-shadow:0_2px_4px_rgba(0,0,0,0.5)]",style:{...ft.style},children:jsx("span",{dangerouslySetInnerHTML:{__html:vt},dir:"auto"})})}function CaptionRendererAction({isControlsShown:lt}){var At;const ft=useVideoPlayerDescriptor(),dt=useSource(ft).source,vt=useProgress(ft).time,{captionSettings:Et}=useSettings(),St=reactExports.useRef([]);if(useAsync(async()=>{var Rt;const Ct=(Rt=dt==null?void 0:dt.caption)==null?void 0:Rt.url;if(Ct){const kt=await(await fetch(Ct)).text();try{St.current=parseSubtitles(kt)}catch{St.current=[]}}else St.current=[]},[(At=dt==null?void 0:dt.caption)==null?void 0:At.url]),!St.current.length)return null;const Tt=(Ct,Rt)=>{const Dt=Ct/1e3+Et.delay,kt=Rt/1e3+Et.delay;return Math.max(0,Dt)<=vt&&Math.max(0,kt)>=vt};return jsx(Transition,{className:["pointer-events-none absolute flex w-full flex-col items-center transition-[bottom]",lt?"bottom-24":"bottom-12"].join(" "),animation:"slide-up",show:!0,children:St.current.map(({start:Ct,end:Rt,content:Dt})=>Tt(Ct,Rt)&&jsx(CaptionCue,{text:Dt},`${Ct}-${Rt}`))})}function SettingsAction(lt){const{t:ft}=useTranslation(),dt=useVideoPlayerDescriptor(),vt=useControls(dt),Et=useInterface(dt),{isMobile:St}=useIsMobile(!1);return jsx("div",{className:lt.className,children:jsx("div",{className:"relative",children:jsx(FloatingAnchor,{id:"settings",children:jsx(VideoPlayerIconButton,{active:Et.popout==="settings",className:lt.className,onClick:()=>vt.openPopout("settings"),text:St?ft("videoPlayer.buttons.settings"):void 0,icon:Icons.GEAR})})})})}function DividerAction(){const lt=useVideoPlayerDescriptor(),ft=useMeta(lt);return(ft==null?void 0:ft.meta.meta.type)!==MWMediaType.SERIES?null:jsx("div",{className:"mx-2 h-6 w-px bg-white opacity-50"})}function CenterPosition(lt){return jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:lt.children})}function LeftSideControls(){const lt=useVideoPlayerDescriptor(),ft=useControls(lt),dt=reactExports.useCallback(()=>{ft.setLeftControlsHover(!0)},[ft]),vt=reactExports.useCallback(()=>{ft.setLeftControlsHover(!1)},[ft]);return jsxs(Fragment,{children:[jsxs("div",{className:"flex items-center px-2",onMouseLeave:vt,onMouseEnter:dt,children:[jsx(PauseAction,{}),jsx(SkipTimeAction,{}),jsx(VolumeAction,{className:"mr-2"}),jsx(TimeAction,{})]}),jsx(ShowTitleAction,{})]})}function VideoPlayer(lt){const[ft,dt]=reactExports.useState(!1),{isMobile:vt}=useIsMobile(),Et=reactExports.useCallback(St=>{dt(St)},[dt]);return jsx(VideoPlayerBase,{autoPlay:lt.autoPlay,includeSafeArea:lt.includeSafeArea,onGoBack:lt.onGoBack,children:({isFullscreen:St})=>jsxs(Fragment,{children:[jsx(KeyboardShortcutsAction,{}),jsx(PageTitleAction,{}),jsxs(VideoPlayerError,{onGoBack:lt.onGoBack,children:[jsxs(BackdropAction,{onBackdropChange:Et,children:[jsx(CenterPosition,{children:jsx(LoadingAction,{})}),jsx(CenterPosition,{children:jsx(CastingTextAction,{})}),jsx(CenterPosition,{children:jsx(MiddlePauseAction,{})}),vt?jsx(Transition,{animation:"fade",show:ft,className:"absolute inset-0 flex items-center justify-center",children:jsx(MobileCenterAction,{})}):"",jsx(Transition,{animation:"slide-down",show:ft,className:"pointer-events-auto absolute inset-x-0 top-0 flex flex-col py-6 px-8 pb-2",children:jsx(HeaderAction,{showControls:vt,onClick:lt.onGoBack,isFullScreen:!0})}),jsxs(Transition,{animation:"slide-up",show:ft,className:["pointer-events-auto absolute inset-x-0 bottom-0 flex flex-col px-4 pb-2",lt.includeSafeArea||St?"[margin-bottom:env(safe-area-inset-bottom)]":""].join(" "),children:[jsxs("div",{className:"flex w-full items-center space-x-3",children:[vt&&jsx(TimeAction,{noDuration:!0}),jsx(ProgressAction,{})]}),jsx("div",{className:"flex items-center",children:vt?jsxs("div",{className:"grid w-full grid-cols-[56px,1fr,56px] items-center",children:[jsx("div",{}),jsxs("div",{className:"flex items-center justify-center",children:[jsx(SeriesSelectionAction,{}),jsx(PictureInPictureAction,{}),jsx(SettingsAction,{})]}),jsx(FullscreenAction,{})]}):jsxs(Fragment,{children:[jsx(LeftSideControls,{}),jsx("div",{className:"flex-1"}),jsx(SeriesSelectionAction,{}),jsx(DividerAction,{}),jsx(SettingsAction,{}),jsx(ChromecastAction,{}),jsx(AirplayAction,{}),jsx(PictureInPictureAction,{}),jsx(FullscreenAction,{})]})})]}),ft?jsx(PopoutProviderAction,{}):null]}),jsx(CaptionRendererAction,{isControlsShown:ft}),lt.children]})]})})}function formatMetadata(lt){var dt,vt;const ft=(vt=(dt=lt.data)==null?void 0:dt.seasons)==null?void 0:vt.map(Et=>{var St;return Et.id===((St=lt.seasonData)==null?void 0:St.id)?{...Et,episodes:lt.seasonData.episodes}:Et});if(lt.data)return{meta:lt.data.meta,episode:lt.data.episode,seasons:ft,captions:lt.linkedCaptions??[]}}function MetaController(lt){const ft=useVideoPlayerDescriptor(),dt=useControls(ft);return reactExports.useEffect(()=>{dt.setMeta(formatMetadata(lt))},[lt,dt]),null}function useInitialized(lt){const ft=useMisc(lt);return{initialized:reactExports.useMemo(()=>!!ft.initalized,[ft])}}function SourceController(lt){const ft=useVideoPlayerDescriptor(),dt=useControls(ft),{initialized:vt}=useInitialized(ft),Et=reactExports.useRef(!1);return reactExports.useEffect(()=>{Et.current||vt&&(dt.setSource(lt),Et.current=!0)},[lt,dt,vt]),null}var FUNC_ERROR_TEXT$2="Expected a function",NAN$1=0/0,symbolTag$3="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex$1=/^[-+]0x[0-9a-f]+$/i,reIsBinary$1=/^0b[01]+$/i,reIsOctal$1=/^0o[0-7]+$/i,freeParseInt$1=parseInt,freeGlobal$2=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,freeSelf$1=typeof self=="object"&&self&&self.Object===Object&&self,root$c=freeGlobal$2||freeSelf$1||Function("return this")(),objectProto$e=Object.prototype,objectToString$2=objectProto$e.toString,nativeMax$2=Math.max,nativeMin$1=Math.min,now$3=function(){return root$c.Date.now()};function debounce$2(lt,ft,dt){var vt,Et,St,Tt,At,Ct,Rt=0,Dt=!1,kt=!1,Nt=!0;if(typeof lt!="function")throw new TypeError(FUNC_ERROR_TEXT$2);ft=toNumber$2(ft)||0,isObject$a(dt)&&(Dt=!!dt.leading,kt="maxWait"in dt,St=kt?nativeMax$2(toNumber$2(dt.maxWait)||0,ft):St,Nt="trailing"in dt?!!dt.trailing:Nt);function zt(Kt){var Zt=vt,rr=Et;return vt=Et=void 0,Rt=Kt,Tt=lt.apply(rr,Zt),Tt}function Wt(Kt){return Rt=Kt,At=setTimeout(Ht,ft),Dt?zt(Kt):Tt}function nr(Kt){var Zt=Kt-Ct,rr=Kt-Rt,ar=ft-Zt;return kt?nativeMin$1(ar,St-rr):ar}function Ut(Kt){var Zt=Kt-Ct,rr=Kt-Rt;return Ct===void 0||Zt>=ft||Zt<0||kt&&rr>=St}function Ht(){var Kt=now$3();if(Ut(Kt))return Bt(Kt);At=setTimeout(Ht,nr(Kt))}function Bt(Kt){return At=void 0,Nt&&vt?zt(Kt):(vt=Et=void 0,Tt)}function Ft(){At!==void 0&&clearTimeout(At),Rt=0,vt=Ct=Et=At=void 0}function tr(){return At===void 0?Tt:Bt(now$3())}function cr(){var Kt=now$3(),Zt=Ut(Kt);if(vt=arguments,Et=this,Ct=Kt,Zt){if(At===void 0)return Wt(Ct);if(kt)return At=setTimeout(Ht,ft),zt(Ct)}return At===void 0&&(At=setTimeout(Ht,ft)),Tt}return cr.cancel=Ft,cr.flush=tr,cr}function throttle$1(lt,ft,dt){var vt=!0,Et=!0;if(typeof lt!="function")throw new TypeError(FUNC_ERROR_TEXT$2);return isObject$a(dt)&&(vt="leading"in dt?!!dt.leading:vt,Et="trailing"in dt?!!dt.trailing:Et),debounce$2(lt,ft,{leading:vt,maxWait:ft,trailing:Et})}function isObject$a(lt){var ft=typeof lt;return!!lt&&(ft=="object"||ft=="function")}function isObjectLike$7(lt){return!!lt&&typeof lt=="object"}function isSymbol$2(lt){return typeof lt=="symbol"||isObjectLike$7(lt)&&objectToString$2.call(lt)==symbolTag$3}function toNumber$2(lt){if(typeof lt=="number")return lt;if(isSymbol$2(lt))return NAN$1;if(isObject$a(lt)){var ft=typeof lt.valueOf=="function"?lt.valueOf():lt;lt=isObject$a(ft)?ft+"":ft}if(typeof lt!="string")return lt===0?lt:+lt;lt=lt.replace(reTrim,"");var dt=reIsBinary$1.test(lt);return dt||reIsOctal$1.test(lt)?freeParseInt$1(lt.slice(2),dt?2:8):reIsBadHex$1.test(lt)?NAN$1:+lt}var lodash_throttle=throttle$1;function ProgressListenerController(lt){const ft=useVideoPlayerDescriptor(),dt=useMediaPlaying(ft),vt=useProgress(ft),Et=useControls(ft),St=useMisc(ft),Tt=reactExports.useRef(null),At=reactExports.useRef(lt.startAt??0),Ct=reactExports.useMemo(()=>lodash_throttle((kt,Nt)=>{var zt;At.current=kt,(zt=lt.onProgress)==null||zt.call(lt,kt,Nt)},1e3),[lt]);reactExports.useEffect(()=>{dt.isPlaying&&(vt.duration===0||vt.time===0||Ct(vt.time,vt.duration))},[vt,dt,Ct]),reactExports.useEffect(()=>()=>{Ct.cancel()},[Ct]),reactExports.useEffect(()=>{Tt.current||dt.isFirstLoading||Number.isNaN(vt.duration)||(Et.setTime(At.current),Tt.current=!0)},[Tt,lt,vt,dt,Et]);const Rt=reactExports.useRef(null),Dt=reactExports.useMemo(()=>St.stateProviderId,[St]);return reactExports.useEffect(()=>{Rt.current!==Dt&&(dt.isFirstLoading||(Rt.current=Dt,Et.setTime(At.current)))},[Et,dt,Dt]),reactExports.useEffect(()=>{Tt.current&&dt.isFirstLoading&&(Tt.current=null)},[dt]),null}function SeriesController(lt){const ft=useVideoPlayerDescriptor(),dt=useMeta(ft),vt=useHistory(),Et=reactExports.useRef(null);return reactExports.useEffect(()=>{var Tt,At,Ct,Rt,Dt;const St={episodeId:(Tt=dt==null?void 0:dt.episode)==null?void 0:Tt.episodeId,seasonId:(At=dt==null?void 0:dt.episode)==null?void 0:At.seasonId};if(Et.current===null){if(!dt)return;Et.current=St;return}(St.episodeId!==((Ct=Et.current)==null?void 0:Ct.episodeId)||St.seasonId!==((Rt=Et.current)==null?void 0:Rt.seasonId))&&(Et.current=St,(Dt=lt.onSelect)==null||Dt.call(lt,St))},[dt,lt,vt]),null}function MediaFetchErrorView(){const{t:lt}=useTranslation(),ft=useGoBack();return jsxs("div",{className:"flex-1",children:[jsx(HelmetExport,{children:jsx("title",{children:lt("media.errors.failedMeta")})}),jsx("div",{className:"fixed inset-x-0 top-0 py-6 px-8",children:jsx(VideoPlayerHeader,{onClick:ft})}),jsx(ErrorMessage,{children:jsx("p",{className:"my-6 max-w-lg",children:lt("media.errors.mediaFailed")})})]})}function MediaScrapePillSkeleton(){return jsx("div",{className:"h-9 w-[220px] rounded-full bg-slate-800 opacity-50"})}function MediaScrapePill({event:lt}){return jsxs("div",{className:"flex h-9 w-[220px] items-center rounded-full bg-slate-800 p-3 text-denim-700",children:[jsx("div",{className:"mr-2 flex w-[18px] items-center justify-center",children:lt.errored?jsx(Icon,{icon:Icons.X,className:"text-[0.85em] text-rose-400"}):jsx(ProgressRing,{className:"h-[18px] w-[18px] text-bink-700",percentage:lt.percentage,radius:40})}),jsx("div",{className:"flex-1 overflow-hidden",children:jsx("p",{className:`overflow-hidden text-ellipsis whitespace-nowrap ${lt.errored?"text-rose-400":""}`,children:lt.id})})]})}function MediaScrapeLog(lt){return jsxs("div",{className:"relative h-16 w-[400px] overflow-hidden",children:[jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsx("div",{className:"relative flex h-full w-[220px] items-center",children:jsxs("div",{className:"absolute inset-y-0 left-0 flex items-center gap-[16px] transition-transform duration-200",style:{transform:`translateX(${-1*(220+16)*lt.events.length}px)`},children:[jsx(MediaScrapePillSkeleton,{}),lt.events.map(ft=>jsx(MediaScrapePill,{event:ft},ft.eventId)),jsx(MediaScrapePillSkeleton,{})]})})}),jsx("div",{className:"absolute inset-y-0 left-0 w-40 bg-gradient-to-r from-denim-100 to-transparent"}),jsx("div",{className:"absolute inset-y-0 right-0 w-40 bg-gradient-to-l from-denim-100 to-transparent"})]})}function MediaViewLoading(lt){const{t:ft}=useTranslation();return jsxs("div",{className:"relative flex flex-1 items-center justify-center",children:[jsx(HelmetExport,{children:jsx("title",{children:ft("videoPlayer.loading")})}),jsx("div",{className:"absolute inset-x-0 top-0 py-6 px-8",children:jsx(VideoPlayerHeader,{onClick:lt.onGoBack})}),jsxs("div",{className:"flex flex-col items-center",children:[jsx(Loading,{className:"mb-4"}),jsx("p",{className:"mb-8 text-denim-700",children:ft("videoPlayer.findingBestVideo")})]})]})}function MediaViewScraping(lt){const{eventLog:ft,stream:dt,pending:vt}=useScrape(lt.meta,lt.selected),{t:Et}=useTranslation();return reactExports.useEffect(()=>{dt&&lt.onStream(dt)},[dt,lt]),jsxs("div",{className:"relative flex flex-1 items-center justify-center",children:[jsx(HelmetExport,{children:jsx("title",{children:lt.meta.meta.title})}),jsx("div",{className:"absolute inset-x-0 top-0 py-6 px-8",children:jsx(VideoPlayerHeader,{onClick:lt.onGoBack,media:lt.meta.meta})}),jsxs("div",{className:"flex flex-col items-center transition-opacity duration-200",children:[vt?jsxs(Fragment,{children:[jsx(Loading,{}),jsx("p",{className:"mb-8 text-denim-700",children:Et("videoPlayer.findingBestVideo")})]}):jsxs(Fragment,{children:[jsx(IconPatch,{icon:Icons.EYE_SLASH,className:"mb-8 text-bink-700"}),jsx("p",{className:"mb-8 text-denim-700",children:Et("videoPlayer.noVideos")})]}),jsx("div",{className:`flex flex-col items-center transition-opacity duration-200 ${vt?"opacity-100":"opacity-0"}`,children:jsx(MediaScrapeLog,{events:ft})})]})]})}function MediaViewPlayer(lt){const ft=useGoBack(),{updateProgress:dt,watchedItem:vt}=useWatchedItem(lt.meta,lt.selected.episode),Et=reactExports.useRef(vt==null?void 0:vt.progress);reactExports.useEffect(()=>{Et.current=vt==null?void 0:vt.progress},[lt.stream]);const St={meta:lt.meta,captions:[]};let Tt;return lt.selected.type===MWMediaType.SERIES&&lt.meta.meta.type===MWMediaType.SERIES&&(St.episode={seasonId:lt.selected.season,episodeId:lt.selected.episode},St.seasons=lt.meta.meta.seasons,Tt=lt.meta.meta.seasonData),jsxs("div",{className:"fixed top-0 left-0 h-[100dvh] w-screen",children:[jsx(HelmetExport,{children:jsx("html",{"data-full":"true"})}),jsxs(VideoPlayer,{includeSafeArea:!0,autoPlay:!0,onGoBack:ft,children:[jsx(MetaController,{data:St,seasonData:Tt,linkedCaptions:lt.stream.captions}),jsx(SourceController,{source:lt.stream.streamUrl,type:lt.stream.type,quality:lt.stream.quality,embedId:lt.stream.embedId,providerId:lt.stream.providerId}),jsx(ProgressListenerController,{startAt:Et.current,onProgress:dt}),jsx(SeriesController,{onSelect:At=>{var Ct;return At.seasonId&&At.episodeId&&((Ct=lt.onChangeStream)==null?void 0:Ct.call(lt,At.seasonId,At.episodeId))}})]})]})}function MediaView(){const lt=useParams(),ft=useGoBack(),dt=useHistory(),[vt,Et]=reactExports.useState(null),[St,Tt]=reactExports.useState(null),[At,Ct,Rt]=useLoading(async(zt,Wt)=>{const nr=decodeJWId(zt);return nr?getMetaFromId(nr.type,nr.id,Wt):null}),[Dt,kt]=reactExports.useState(null),Nt=reactExports.useRef(null);return reactExports.useEffect(()=>{const zt=[lt.media,lt.season,lt.episode],Wt=Nt.current,nr=(Wt==null?void 0:Wt[0])===zt[0]&&((Wt==null?void 0:Wt[1])===zt[1]||!(Wt!=null&&Wt[1]))&&((Wt==null?void 0:Wt[2])===zt[2]||!(Wt!=null&&Wt[2]));Nt.current=zt,!(nr&&Wt!==null)&&(Et(null),kt(null),Tt(null),At(lt.media,lt.season).then(Ut=>{if(Et(Ut??null),kt(null),Ut)if(Ut.meta.type!==MWMediaType.SERIES)Tt({type:Ut.meta.type,season:void 0,episode:void 0});else{const Ht=lt.season??Ut.meta.seasonData.id,Bt=lt.episode??Ut.meta.seasonData.episodes[0].id;Tt({type:MWMediaType.SERIES,season:Ht,episode:Bt}),(Ht!==lt.season||Bt!==lt.episode)&&dt.replace(`/media/${encodeURIComponent(lt.media)}/${encodeURIComponent(Ht)}/${encodeURIComponent(Bt)}`)}else Tt(null)}))},[At,dt,lt]),Ct?jsx(MediaViewLoading,{onGoBack:ft}):Rt?jsx(MediaFetchErrorView,{}):!vt||!St?jsx(NotFoundWrapper,{video:!0,children:jsx(NotFoundMedia,{})}):Dt?jsx(MediaViewPlayer,{meta:vt,stream:Dt,selected:St,onChangeStream:(zt,Wt)=>{dt.replace(`/media/${encodeURIComponent(lt.media)}/${encodeURIComponent(zt)}/${encodeURIComponent(Wt)}`)}}):jsx(MediaViewScraping,{meta:vt,selected:St,onGoBack:ft,onStream:kt})}var freeGlobal$1=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$b=freeGlobal||freeSelf||Function("return this")(),_root=root$b,root$a=_root,Symbol$4=root$a.Symbol,_Symbol=Symbol$4,Symbol$3=_Symbol,objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty,nativeObjectToString$1=objectProto$d.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag$1(lt){var ft=hasOwnProperty$a.call(lt,symToStringTag$1),dt=lt[symToStringTag$1];try{lt[symToStringTag$1]=void 0;var vt=!0}catch{}var Et=nativeObjectToString$1.call(lt);return vt&&(ft?lt[symToStringTag$1]=dt:delete lt[symToStringTag$1]),Et}var _getRawTag=getRawTag$1,objectProto$c=Object.prototype,nativeObjectToString=objectProto$c.toString;function objectToString$1(lt){return nativeObjectToString.call(lt)}var _objectToString=objectToString$1,Symbol$2=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag$5(lt){return lt==null?lt===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(lt)?getRawTag(lt):objectToString(lt)}var _baseGetTag=baseGetTag$5;function isObject$9(lt){var ft=typeof lt;return lt!=null&&(ft=="object"||ft=="function")}var isObject_1=isObject$9,baseGetTag$4=_baseGetTag,isObject$8=isObject_1,asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(lt){if(!isObject$8(lt))return!1;var ft=baseGetTag$4(lt);return ft==funcTag$2||ft==genTag$1||ft==asyncTag||ft==proxyTag}var isFunction_1=isFunction$2,root$9=_root,coreJsData$1=root$9["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var lt=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return lt?"Symbol(src)_1."+lt:""}();function isMasked$1(lt){return!!maskSrcKey&&maskSrcKey in lt}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(lt){if(lt!=null){try{return funcToString$1.call(lt)}catch{}try{return lt+""}catch{}}return""}var _toSource=toSource$2,isFunction$1=isFunction_1,isMasked=_isMasked,isObject$7=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$b=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$9=objectProto$b.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$9).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(lt){if(!isObject$7(lt)||isMasked(lt))return!1;var ft=isFunction$1(lt)?reIsNative:reIsHostCtor;return ft.test(toSource$1(lt))}var _baseIsNative=baseIsNative$1;function getValue$1(lt,ft){return lt==null?void 0:lt[ft]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$7(lt,ft){var dt=getValue(lt,ft);return baseIsNative(dt)?dt:void 0}var _getNative=getNative$7,getNative$6=_getNative,defineProperty$2=function(){try{var lt=getNative$6(Object,"defineProperty");return lt({},"",{}),lt}catch{}}(),_defineProperty$1=defineProperty$2,defineProperty$1=_defineProperty$1;function baseAssignValue$2(lt,ft,dt){ft=="__proto__"&&defineProperty$1?defineProperty$1(lt,ft,{configurable:!0,enumerable:!0,value:dt,writable:!0}):lt[ft]=dt}var _baseAssignValue=baseAssignValue$2;function eq$3(lt,ft){return lt===ft||lt!==lt&&ft!==ft}var eq_1=eq$3,baseAssignValue$1=_baseAssignValue,eq$2=eq_1,objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function assignValue$3(lt,ft,dt){var vt=lt[ft];(!(hasOwnProperty$8.call(lt,ft)&&eq$2(vt,dt))||dt===void 0&&!(ft in lt))&&baseAssignValue$1(lt,ft,dt)}var _assignValue=assignValue$3,assignValue$2=_assignValue,baseAssignValue=_baseAssignValue;function copyObject$5(lt,ft,dt,vt){var Et=!dt;dt||(dt={});for(var St=-1,Tt=ft.length;++St<Tt;){var At=ft[St],Ct=vt?vt(dt[At],lt[At],At,dt,lt):void 0;Ct===void 0&&(Ct=lt[At]),Et?baseAssignValue(dt,At,Ct):assignValue$2(dt,At,Ct)}return dt}var _copyObject=copyObject$5;function identity$2(lt){return lt}var identity_1=identity$2;function apply$1(lt,ft,dt){switch(dt.length){case 0:return lt.call(ft);case 1:return lt.call(ft,dt[0]);case 2:return lt.call(ft,dt[0],dt[1]);case 3:return lt.call(ft,dt[0],dt[1],dt[2])}return lt.apply(ft,dt)}var _apply=apply$1,apply=_apply,nativeMax$1=Math.max;function overRest$1(lt,ft,dt){return ft=nativeMax$1(ft===void 0?lt.length-1:ft,0),function(){for(var vt=arguments,Et=-1,St=nativeMax$1(vt.length-ft,0),Tt=Array(St);++Et<St;)Tt[Et]=vt[ft+Et];Et=-1;for(var At=Array(ft+1);++Et<ft;)At[Et]=vt[Et];return At[ft]=dt(Tt),apply(lt,this,At)}}var _overRest=overRest$1;function constant$1(lt){return function(){return lt}}var constant_1=constant$1,constant=constant_1,defineProperty=_defineProperty$1,identity$1=identity_1,baseSetToString$1=defineProperty?function(lt,ft){return defineProperty(lt,"toString",{configurable:!0,enumerable:!1,value:constant(ft),writable:!0})}:identity$1,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(lt){var ft=0,dt=0;return function(){var vt=nativeNow(),Et=HOT_SPAN-(vt-dt);if(dt=vt,Et>0){if(++ft>=HOT_COUNT)return arguments[0]}else ft=0;return lt.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$1=shortOut(baseSetToString),_setToString=setToString$1,identity=identity_1,overRest=_overRest,setToString=_setToString;function baseRest$1(lt,ft){return setToString(overRest(lt,ft,identity),lt+"")}var _baseRest=baseRest$1,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$2(lt){return typeof lt=="number"&&lt>-1&&lt%1==0&&lt<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$2,isFunction=isFunction_1,isLength$1=isLength_1;function isArrayLike$4(lt){return lt!=null&&isLength$1(lt.length)&&!isFunction(lt)}var isArrayLike_1=isArrayLike$4,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$2(lt,ft){var dt=typeof lt;return ft=ft??MAX_SAFE_INTEGER,!!ft&&(dt=="number"||dt!="symbol"&&reIsUint.test(lt))&&lt>-1&&lt%1==0&&lt<ft}var _isIndex=isIndex$2,eq$1=eq_1,isArrayLike$3=isArrayLike_1,isIndex$1=_isIndex,isObject$6=isObject_1;function isIterateeCall$1(lt,ft,dt){if(!isObject$6(dt))return!1;var vt=typeof ft;return(vt=="number"?isArrayLike$3(dt)&&isIndex$1(ft,dt.length):vt=="string"&&ft in dt)?eq$1(dt[ft],lt):!1}var _isIterateeCall=isIterateeCall$1,baseRest=_baseRest,isIterateeCall=_isIterateeCall;function createAssigner$1(lt){return baseRest(function(ft,dt){var vt=-1,Et=dt.length,St=Et>1?dt[Et-1]:void 0,Tt=Et>2?dt[2]:void 0;for(St=lt.length>3&&typeof St=="function"?(Et--,St):void 0,Tt&&isIterateeCall(dt[0],dt[1],Tt)&&(St=Et<3?void 0:St,Et=1),ft=Object(ft);++vt<Et;){var At=dt[vt];At&&lt(ft,At,vt,St)}return ft})}var _createAssigner=createAssigner$1,objectProto$9=Object.prototype;function isPrototype$4(lt){var ft=lt&&lt.constructor,dt=typeof ft=="function"&&ft.prototype||objectProto$9;return lt===dt}var _isPrototype=isPrototype$4;function baseTimes$1(lt,ft){for(var dt=-1,vt=Array(lt);++dt<lt;)vt[dt]=ft(dt);return vt}var _baseTimes=baseTimes$1;function isObjectLike$6(lt){return lt!=null&&typeof lt=="object"}var isObjectLike_1=isObjectLike$6,baseGetTag$3=_baseGetTag,isObjectLike$5=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(lt){return isObjectLike$5(lt)&&baseGetTag$3(lt)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$4=isObjectLike_1,objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty,propertyIsEnumerable$1=objectProto$8.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(lt){return isObjectLike$4(lt)&&hasOwnProperty$7.call(lt,"callee")&&!propertyIsEnumerable$1.call(lt,"callee")},isArguments_1=isArguments$1,isArray$3=Array.isArray,isArray_1=isArray$3,isBufferExports={},isBuffer$2={get exports(){return isBufferExports},set exports(lt){isBufferExports=lt}};function stubFalse(){return!1}var stubFalse_1=stubFalse;(function(lt,ft){var dt=_root,vt=stubFalse_1,Et=ft&&!ft.nodeType&&ft,St=Et&&!0&&lt&&!lt.nodeType&&lt,Tt=St&&St.exports===Et,At=Tt?dt.Buffer:void 0,Ct=At?At.isBuffer:void 0,Rt=Ct||vt;lt.exports=Rt})(isBuffer$2,isBufferExports);var baseGetTag$2=_baseGetTag,isLength=isLength_1,isObjectLike$3=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$2]=typedArrayTags[boolTag$2]=typedArrayTags[dataViewTag$3]=typedArrayTags[dateTag$2]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$4]=typedArrayTags[numberTag$2]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$2]=typedArrayTags[setTag$4]=typedArrayTags[stringTag$2]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray$1(lt){return isObjectLike$3(lt)&&isLength(lt.length)&&!!typedArrayTags[baseGetTag$2(lt)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$3(lt){return function(ft){return lt(ft)}}var _baseUnary=baseUnary$3,_nodeUtilExports={},_nodeUtil={get exports(){return _nodeUtilExports},set exports(lt){_nodeUtilExports=lt}};(function(lt,ft){var dt=_freeGlobal,vt=ft&&!ft.nodeType&&ft,Et=vt&&!0&&lt&&!lt.nodeType&&lt,St=Et&&Et.exports===vt,Tt=St&&dt.process,At=function(){try{var Ct=Et&&Et.require&&Et.require("util").types;return Ct||Tt&&Tt.binding&&Tt.binding("util")}catch{}}();lt.exports=At})(_nodeUtil,_nodeUtilExports);var baseIsTypedArray=_baseIsTypedArray,baseUnary$2=_baseUnary,nodeUtil$2=_nodeUtilExports,nodeIsTypedArray=nodeUtil$2&&nodeUtil$2.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary$2(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$1,baseTimes=_baseTimes,isArguments=isArguments_1,isArray$2=isArray_1,isBuffer$1=isBufferExports,isIndex=_isIndex,isTypedArray=isTypedArray_1,objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function arrayLikeKeys$2(lt,ft){var dt=isArray$2(lt),vt=!dt&&isArguments(lt),Et=!dt&&!vt&&isBuffer$1(lt),St=!dt&&!vt&&!Et&&isTypedArray(lt),Tt=dt||vt||Et||St,At=Tt?baseTimes(lt.length,String):[],Ct=At.length;for(var Rt in lt)(ft||hasOwnProperty$6.call(lt,Rt))&&!(Tt&&(Rt=="length"||Et&&(Rt=="offset"||Rt=="parent")||St&&(Rt=="buffer"||Rt=="byteLength"||Rt=="byteOffset")||isIndex(Rt,Ct)))&&At.push(Rt);return At}var _arrayLikeKeys=arrayLikeKeys$2;function overArg$2(lt,ft){return function(dt){return lt(ft(dt))}}var _overArg=overArg$2,overArg$1=_overArg,nativeKeys$1=overArg$1(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype$3=_isPrototype,nativeKeys=_nativeKeys,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function baseKeys$1(lt){if(!isPrototype$3(lt))return nativeKeys(lt);var ft=[];for(var dt in Object(lt))hasOwnProperty$5.call(lt,dt)&&dt!="constructor"&&ft.push(dt);return ft}var _baseKeys=baseKeys$1,arrayLikeKeys$1=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$2=isArrayLike_1;function keys$4(lt){return isArrayLike$2(lt)?arrayLikeKeys$1(lt):baseKeys(lt)}var keys_1=keys$4,assignValue$1=_assignValue,copyObject$4=_copyObject,createAssigner=_createAssigner,isArrayLike$1=isArrayLike_1,isPrototype$2=_isPrototype,keys$3=keys_1,objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty,assign$1=createAssigner(function(lt,ft){if(isPrototype$2(ft)||isArrayLike$1(ft)){copyObject$4(ft,keys$3(ft),lt);return}for(var dt in ft)hasOwnProperty$4.call(ft,dt)&&assignValue$1(lt,dt,ft[dt])}),assign_1=assign$1,eventemitter3Exports={},eventemitter3={get exports(){return eventemitter3Exports},set exports(lt){eventemitter3Exports=lt}};(function(lt){var ft=Object.prototype.hasOwnProperty,dt="~";function vt(){}Object.create&&(vt.prototype=Object.create(null),new vt().__proto__||(dt=!1));function Et(Ct,Rt,Dt){this.fn=Ct,this.context=Rt,this.once=Dt||!1}function St(Ct,Rt,Dt,kt,Nt){if(typeof Dt!="function")throw new TypeError("The listener must be a function");var zt=new Et(Dt,kt||Ct,Nt),Wt=dt?dt+Rt:Rt;return Ct._events[Wt]?Ct._events[Wt].fn?Ct._events[Wt]=[Ct._events[Wt],zt]:Ct._events[Wt].push(zt):(Ct._events[Wt]=zt,Ct._eventsCount++),Ct}function Tt(Ct,Rt){--Ct._eventsCount===0?Ct._events=new vt:delete Ct._events[Rt]}function At(){this._events=new vt,this._eventsCount=0}At.prototype.eventNames=function(){var Rt=[],Dt,kt;if(this._eventsCount===0)return Rt;for(kt in Dt=this._events)ft.call(Dt,kt)&&Rt.push(dt?kt.slice(1):kt);return Object.getOwnPropertySymbols?Rt.concat(Object.getOwnPropertySymbols(Dt)):Rt},At.prototype.listeners=function(Rt){var Dt=dt?dt+Rt:Rt,kt=this._events[Dt];if(!kt)return[];if(kt.fn)return[kt.fn];for(var Nt=0,zt=kt.length,Wt=new Array(zt);Nt<zt;Nt++)Wt[Nt]=kt[Nt].fn;return Wt},At.prototype.listenerCount=function(Rt){var Dt=dt?dt+Rt:Rt,kt=this._events[Dt];return kt?kt.fn?1:kt.length:0},At.prototype.emit=function(Rt,Dt,kt,Nt,zt,Wt){var nr=dt?dt+Rt:Rt;if(!this._events[nr])return!1;var Ut=this._events[nr],Ht=arguments.length,Bt,Ft;if(Ut.fn){switch(Ut.once&&this.removeListener(Rt,Ut.fn,void 0,!0),Ht){case 1:return Ut.fn.call(Ut.context),!0;case 2:return Ut.fn.call(Ut.context,Dt),!0;case 3:return Ut.fn.call(Ut.context,Dt,kt),!0;case 4:return Ut.fn.call(Ut.context,Dt,kt,Nt),!0;case 5:return Ut.fn.call(Ut.context,Dt,kt,Nt,zt),!0;case 6:return Ut.fn.call(Ut.context,Dt,kt,Nt,zt,Wt),!0}for(Ft=1,Bt=new Array(Ht-1);Ft<Ht;Ft++)Bt[Ft-1]=arguments[Ft];Ut.fn.apply(Ut.context,Bt)}else{var tr=Ut.length,cr;for(Ft=0;Ft<tr;Ft++)switch(Ut[Ft].once&&this.removeListener(Rt,Ut[Ft].fn,void 0,!0),Ht){case 1:Ut[Ft].fn.call(Ut[Ft].context);break;case 2:Ut[Ft].fn.call(Ut[Ft].context,Dt);break;case 3:Ut[Ft].fn.call(Ut[Ft].context,Dt,kt);break;case 4:Ut[Ft].fn.call(Ut[Ft].context,Dt,kt,Nt);break;default:if(!Bt)for(cr=1,Bt=new Array(Ht-1);cr<Ht;cr++)Bt[cr-1]=arguments[cr];Ut[Ft].fn.apply(Ut[Ft].context,Bt)}}return!0},At.prototype.on=function(Rt,Dt,kt){return St(this,Rt,Dt,kt,!1)},At.prototype.once=function(Rt,Dt,kt){return St(this,Rt,Dt,kt,!0)},At.prototype.removeListener=function(Rt,Dt,kt,Nt){var zt=dt?dt+Rt:Rt;if(!this._events[zt])return this;if(!Dt)return Tt(this,zt),this;var Wt=this._events[zt];if(Wt.fn)Wt.fn===Dt&&(!Nt||Wt.once)&&(!kt||Wt.context===kt)&&Tt(this,zt);else{for(var nr=0,Ut=[],Ht=Wt.length;nr<Ht;nr++)(Wt[nr].fn!==Dt||Nt&&!Wt[nr].once||kt&&Wt[nr].context!==kt)&&Ut.push(Wt[nr]);Ut.length?this._events[zt]=Ut.length===1?Ut[0]:Ut:Tt(this,zt)}return this},At.prototype.removeAllListeners=function(Rt){var Dt;return Rt?(Dt=dt?dt+Rt:Rt,this._events[Dt]&&Tt(this,Dt)):(this._events=new vt,this._eventsCount=0),this},At.prototype.off=At.prototype.removeListener,At.prototype.addListener=At.prototype.on,At.prefixed=dt,At.EventEmitter=At,lt.exports=At})(eventemitter3);const EventEmitter$1=eventemitter3Exports;var passiveSupported=!1;if(typeof window<"u")try{var options$1=Object.defineProperty({},"passive",{get:function(){passiveSupported=!0}});window.addEventListener("test",null,options$1),window.removeEventListener("test",null,options$1)}catch{}const supportPassiveEvent$1=passiveSupported,globalVars={connections:{},EE:new EventEmitter$1,enableResizeInfo:!1,enableScrollInfo:!1,listeners:{},removers:[],supportPassiveEvent:supportPassiveEvent$1};var supportPassiveEvent=globalVars.supportPassiveEvent,defaultEventOption={capture:!1,passive:!1};function listen(lt,ft,dt,vt){var Et="addEventListener",St="removeEventListener",Tt=ft,At=supportPassiveEvent?assign_1({},defaultEventOption,vt):!1;return!lt.addEventListener&&lt.attachEvent&&(Et="attachEvent",St="detachEvent",Tt="on"+ft),lt[Et](Tt,dt,At),{remove:function(){lt[St](ft,dt)}}}var leIE8=!1;if(typeof navigator<"u"){var matches=navigator.userAgent.match(/MSIE (\d+\.\d+)/);matches&&(leIE8=parseFloat(matches[1],10)<9)}const leIE8$1=leIE8;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1,eq=eq_1;function assocIndexOf$4(lt,ft){for(var dt=lt.length;dt--;)if(eq(lt[dt][0],ft))return dt;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(lt){var ft=this.__data__,dt=assocIndexOf$3(ft,lt);if(dt<0)return!1;var vt=ft.length-1;return dt==vt?ft.pop():splice.call(ft,dt,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(lt){var ft=this.__data__,dt=assocIndexOf$2(ft,lt);return dt<0?void 0:ft[dt][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(lt){return assocIndexOf$1(this.__data__,lt)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(lt,ft){var dt=this.__data__,vt=assocIndexOf(dt,lt);return vt<0?(++this.size,dt.push([lt,ft])):dt[vt][1]=ft,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(lt){var ft=-1,dt=lt==null?0:lt.length;for(this.clear();++ft<dt;){var vt=lt[ft];this.set(vt[0],vt[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,ListCache$3=_ListCache;function stackClear$1(){this.__data__=new ListCache$3,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(lt){var ft=this.__data__,dt=ft.delete(lt);return this.size=ft.size,dt}var _stackDelete=stackDelete$1;function stackGet$1(lt){return this.__data__.get(lt)}var _stackGet=stackGet$1;function stackHas$1(lt){return this.__data__.has(lt)}var _stackHas=stackHas$1,getNative$5=_getNative,root$8=_root,Map$4=getNative$5(root$8,"Map"),_Map=Map$4,getNative$4=_getNative,nativeCreate$4=getNative$4(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(lt){var ft=this.has(lt)&&delete this.__data__[lt];return this.size-=ft?1:0,ft}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet$1(lt){var ft=this.__data__;if(nativeCreate$2){var dt=ft[lt];return dt===HASH_UNDEFINED$1?void 0:dt}return hasOwnProperty$3.call(ft,lt)?ft[lt]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashHas$1(lt){var ft=this.__data__;return nativeCreate$1?ft[lt]!==void 0:hasOwnProperty$2.call(ft,lt)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet$1(lt,ft){var dt=this.__data__;return this.size+=this.has(lt)?0:1,dt[lt]=nativeCreate&&ft===void 0?HASH_UNDEFINED:ft,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(lt){var ft=-1,dt=lt==null?0:lt.length;for(this.clear();++ft<dt;){var vt=lt[ft];this.set(vt[0],vt[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1,Hash=_Hash,ListCache$2=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$2),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(lt){var ft=typeof lt;return ft=="string"||ft=="number"||ft=="symbol"||ft=="boolean"?lt!=="__proto__":lt===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(lt,ft){var dt=lt.__data__;return isKeyable(ft)?dt[typeof ft=="string"?"string":"hash"]:dt.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(lt){var ft=getMapData$3(this,lt).delete(lt);return this.size-=ft?1:0,ft}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(lt){return getMapData$2(this,lt).get(lt)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(lt){return getMapData$1(this,lt).has(lt)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(lt,ft){var dt=getMapData(this,lt),vt=dt.size;return dt.set(lt,ft),this.size+=dt.size==vt?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$1(lt){var ft=-1,dt=lt==null?0:lt.length;for(this.clear();++ft<dt;){var vt=lt[ft];this.set(vt[0],vt[1])}}MapCache$1.prototype.clear=mapCacheClear;MapCache$1.prototype.delete=mapCacheDelete;MapCache$1.prototype.get=mapCacheGet;MapCache$1.prototype.has=mapCacheHas;MapCache$1.prototype.set=mapCacheSet;var _MapCache=MapCache$1,ListCache$1=_ListCache,Map$2=_Map,MapCache=_MapCache,LARGE_ARRAY_SIZE=200;function stackSet$1(lt,ft){var dt=this.__data__;if(dt instanceof ListCache$1){var vt=dt.__data__;if(!Map$2||vt.length<LARGE_ARRAY_SIZE-1)return vt.push([lt,ft]),this.size=++dt.size,this;dt=this.__data__=new MapCache(vt)}return dt.set(lt,ft),this.size=dt.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$1(lt){var ft=this.__data__=new ListCache(lt);this.size=ft.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;var _Stack=Stack$1;function arrayEach$1(lt,ft){for(var dt=-1,vt=lt==null?0:lt.length;++dt<vt&&ft(lt[dt],dt,lt)!==!1;);return lt}var _arrayEach=arrayEach$1,copyObject$3=_copyObject,keys$2=keys_1;function baseAssign$1(lt,ft){return lt&&copyObject$3(ft,keys$2(ft),lt)}var _baseAssign=baseAssign$1;function nativeKeysIn$1(lt){var ft=[];if(lt!=null)for(var dt in Object(lt))ft.push(dt);return ft}var _nativeKeysIn=nativeKeysIn$1,isObject$5=isObject_1,isPrototype$1=_isPrototype,nativeKeysIn=_nativeKeysIn,objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty;function baseKeysIn$1(lt){if(!isObject$5(lt))return nativeKeysIn(lt);var ft=isPrototype$1(lt),dt=[];for(var vt in lt)vt=="constructor"&&(ft||!hasOwnProperty$1.call(lt,vt))||dt.push(vt);return dt}var _baseKeysIn=baseKeysIn$1,arrayLikeKeys=_arrayLikeKeys,baseKeysIn=_baseKeysIn,isArrayLike=isArrayLike_1;function keysIn$3(lt){return isArrayLike(lt)?arrayLikeKeys(lt,!0):baseKeysIn(lt)}var keysIn_1=keysIn$3,copyObject$2=_copyObject,keysIn$2=keysIn_1;function baseAssignIn$1(lt,ft){return lt&&copyObject$2(ft,keysIn$2(ft),lt)}var _baseAssignIn=baseAssignIn$1,_cloneBufferExports={},_cloneBuffer={get exports(){return _cloneBufferExports},set exports(lt){_cloneBufferExports=lt}};(function(lt,ft){var dt=_root,vt=ft&&!ft.nodeType&&ft,Et=vt&&!0&&lt&&!lt.nodeType&&lt,St=Et&&Et.exports===vt,Tt=St?dt.Buffer:void 0,At=Tt?Tt.allocUnsafe:void 0;function Ct(Rt,Dt){if(Dt)return Rt.slice();var kt=Rt.length,Nt=At?At(kt):new Rt.constructor(kt);return Rt.copy(Nt),Nt}lt.exports=Ct})(_cloneBuffer,_cloneBufferExports);function copyArray$1(lt,ft){var dt=-1,vt=lt.length;for(ft||(ft=Array(vt));++dt<vt;)ft[dt]=lt[dt];return ft}var _copyArray=copyArray$1;function arrayFilter$1(lt,ft){for(var dt=-1,vt=lt==null?0:lt.length,Et=0,St=[];++dt<vt;){var Tt=lt[dt];ft(Tt,dt,lt)&&(St[Et++]=Tt)}return St}var _arrayFilter=arrayFilter$1;function stubArray$2(){return[]}var stubArray_1=stubArray$2,arrayFilter=_arrayFilter,stubArray$1=stubArray_1,objectProto$1=Object.prototype,propertyIsEnumerable=objectProto$1.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols$3=nativeGetSymbols$1?function(lt){return lt==null?[]:(lt=Object(lt),arrayFilter(nativeGetSymbols$1(lt),function(ft){return propertyIsEnumerable.call(lt,ft)}))}:stubArray$1,_getSymbols=getSymbols$3,copyObject$1=_copyObject,getSymbols$2=_getSymbols;function copySymbols$1(lt,ft){return copyObject$1(lt,getSymbols$2(lt),ft)}var _copySymbols=copySymbols$1;function arrayPush$2(lt,ft){for(var dt=-1,vt=ft.length,Et=lt.length;++dt<vt;)lt[Et+dt]=ft[dt];return lt}var _arrayPush=arrayPush$2,overArg=_overArg,getPrototype$2=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$2,arrayPush$1=_arrayPush,getPrototype$1=_getPrototype,getSymbols$1=_getSymbols,stubArray=stubArray_1,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn$2=nativeGetSymbols?function(lt){for(var ft=[];lt;)arrayPush$1(ft,getSymbols$1(lt)),lt=getPrototype$1(lt);return ft}:stubArray,_getSymbolsIn=getSymbolsIn$2,copyObject=_copyObject,getSymbolsIn$1=_getSymbolsIn;function copySymbolsIn$1(lt,ft){return copyObject(lt,getSymbolsIn$1(lt),ft)}var _copySymbolsIn=copySymbolsIn$1,arrayPush=_arrayPush,isArray$1=isArray_1;function baseGetAllKeys$2(lt,ft,dt){var vt=ft(lt);return isArray$1(lt)?vt:arrayPush(vt,dt(lt))}var _baseGetAllKeys=baseGetAllKeys$2,baseGetAllKeys$1=_baseGetAllKeys,getSymbols=_getSymbols,keys$1=keys_1;function getAllKeys$1(lt){return baseGetAllKeys$1(lt,keys$1,getSymbols)}var _getAllKeys=getAllKeys$1,baseGetAllKeys=_baseGetAllKeys,getSymbolsIn=_getSymbolsIn,keysIn$1=keysIn_1;function getAllKeysIn$1(lt){return baseGetAllKeys(lt,keysIn$1,getSymbolsIn)}var _getAllKeysIn=getAllKeysIn$1,getNative$3=_getNative,root$7=_root,DataView$2=getNative$3(root$7,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$6=_root,Promise$2=getNative$2(root$6,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$5=_root,Set$2=getNative$1(root$5,"Set"),_Set=Set$2,getNative=_getNative,root$4=_root,WeakMap$2=getNative(root$4,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$1=_Set,WeakMap$1=_WeakMap,baseGetTag$1=_baseGetTag,toSource=_toSource,mapTag$3="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$3="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag$3=baseGetTag$1;(DataView$1&&getTag$3(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag$3(new Map$1)!=mapTag$3||Promise$1&&getTag$3(Promise$1.resolve())!=promiseTag||Set$1&&getTag$3(new Set$1)!=setTag$3||WeakMap$1&&getTag$3(new WeakMap$1)!=weakMapTag$1)&&(getTag$3=function(lt){var ft=baseGetTag$1(lt),dt=ft==objectTag$1?lt.constructor:void 0,vt=dt?toSource(dt):"";if(vt)switch(vt){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$3;case promiseCtorString:return promiseTag;case setCtorString:return setTag$3;case weakMapCtorString:return weakMapTag$1}return ft});var _getTag=getTag$3,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray$1(lt){var ft=lt.length,dt=new lt.constructor(ft);return ft&&typeof lt[0]=="string"&&hasOwnProperty.call(lt,"index")&&(dt.index=lt.index,dt.input=lt.input),dt}var _initCloneArray=initCloneArray$1,root$3=_root,Uint8Array$2=root$3.Uint8Array,_Uint8Array=Uint8Array$2,Uint8Array$1=_Uint8Array;function cloneArrayBuffer$3(lt){var ft=new lt.constructor(lt.byteLength);return new Uint8Array$1(ft).set(new Uint8Array$1(lt)),ft}var _cloneArrayBuffer=cloneArrayBuffer$3,cloneArrayBuffer$2=_cloneArrayBuffer;function cloneDataView$1(lt,ft){var dt=ft?cloneArrayBuffer$2(lt.buffer):lt.buffer;return new lt.constructor(dt,lt.byteOffset,lt.byteLength)}var _cloneDataView=cloneDataView$1,reFlags=/\w*$/;function cloneRegExp$1(lt){var ft=new lt.constructor(lt.source,reFlags.exec(lt));return ft.lastIndex=lt.lastIndex,ft}var _cloneRegExp=cloneRegExp$1,Symbol$1=_Symbol,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function cloneSymbol$1(lt){return symbolValueOf?Object(symbolValueOf.call(lt)):{}}var _cloneSymbol=cloneSymbol$1,cloneArrayBuffer$1=_cloneArrayBuffer;function cloneTypedArray$1(lt,ft){var dt=ft?cloneArrayBuffer$1(lt.buffer):lt.buffer;return new lt.constructor(dt,lt.byteOffset,lt.length)}var _cloneTypedArray=cloneTypedArray$1,cloneArrayBuffer=_cloneArrayBuffer,cloneDataView=_cloneDataView,cloneRegExp=_cloneRegExp,cloneSymbol=_cloneSymbol,cloneTypedArray=_cloneTypedArray,boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag$1(lt,ft,dt){var vt=lt.constructor;switch(ft){case arrayBufferTag$1:return cloneArrayBuffer(lt);case boolTag$1:case dateTag$1:return new vt(+lt);case dataViewTag$1:return cloneDataView(lt,dt);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(lt,dt);case mapTag$2:return new vt;case numberTag$1:case stringTag$1:return new vt(lt);case regexpTag$1:return cloneRegExp(lt);case setTag$2:return new vt;case symbolTag$2:return cloneSymbol(lt)}}var _initCloneByTag=initCloneByTag$1,isObject$4=isObject_1,objectCreate=Object.create,baseCreate$1=function(){function lt(){}return function(ft){if(!isObject$4(ft))return{};if(objectCreate)return objectCreate(ft);lt.prototype=ft;var dt=new lt;return lt.prototype=void 0,dt}}(),_baseCreate=baseCreate$1,baseCreate=_baseCreate,getPrototype=_getPrototype,isPrototype=_isPrototype;function initCloneObject$1(lt){return typeof lt.constructor=="function"&&!isPrototype(lt)?baseCreate(getPrototype(lt)):{}}var _initCloneObject=initCloneObject$1,getTag$2=_getTag,isObjectLike$2=isObjectLike_1,mapTag$1="[object Map]";function baseIsMap$1(lt){return isObjectLike$2(lt)&&getTag$2(lt)==mapTag$1}var _baseIsMap=baseIsMap$1,baseIsMap=_baseIsMap,baseUnary$1=_baseUnary,nodeUtil$1=_nodeUtilExports,nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap$1=nodeIsMap?baseUnary$1(nodeIsMap):baseIsMap,isMap_1=isMap$1,getTag$1=_getTag,isObjectLike$1=isObjectLike_1,setTag$1="[object Set]";function baseIsSet$1(lt){return isObjectLike$1(lt)&&getTag$1(lt)==setTag$1}var _baseIsSet=baseIsSet$1,baseIsSet=_baseIsSet,baseUnary=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet$1=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isSet_1=isSet$1,Stack=_Stack,arrayEach=_arrayEach,assignValue=_assignValue,baseAssign=_baseAssign,baseAssignIn=_baseAssignIn,cloneBuffer=_cloneBufferExports,copyArray=_copyArray,copySymbols=_copySymbols,copySymbolsIn=_copySymbolsIn,getAllKeys=_getAllKeys,getAllKeysIn=_getAllKeysIn,getTag=_getTag,initCloneArray=_initCloneArray,initCloneByTag=_initCloneByTag,initCloneObject=_initCloneObject,isArray=isArray_1,isBuffer=isBufferExports,isMap=isMap_1,isObject$3=isObject_1,isSet=isSet_1,keys=keys_1,keysIn=keysIn_1,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone$1(lt,ft,dt,vt,Et,St){var Tt,At=ft&CLONE_DEEP_FLAG,Ct=ft&CLONE_FLAT_FLAG,Rt=ft&CLONE_SYMBOLS_FLAG$1;if(dt&&(Tt=Et?dt(lt,vt,Et,St):dt(lt)),Tt!==void 0)return Tt;if(!isObject$3(lt))return lt;var Dt=isArray(lt);if(Dt){if(Tt=initCloneArray(lt),!At)return copyArray(lt,Tt)}else{var kt=getTag(lt),Nt=kt==funcTag||kt==genTag;if(isBuffer(lt))return cloneBuffer(lt,At);if(kt==objectTag||kt==argsTag||Nt&&!Et){if(Tt=Ct||Nt?{}:initCloneObject(lt),!At)return Ct?copySymbolsIn(lt,baseAssignIn(Tt,lt)):copySymbols(lt,baseAssign(Tt,lt))}else{if(!cloneableTags[kt])return Et?lt:{};Tt=initCloneByTag(lt,kt,At)}}St||(St=new Stack);var zt=St.get(lt);if(zt)return zt;St.set(lt,Tt),isSet(lt)?lt.forEach(function(Ut){Tt.add(baseClone$1(Ut,ft,dt,Ut,lt,St))}):isMap(lt)&&lt.forEach(function(Ut,Ht){Tt.set(Ht,baseClone$1(Ut,ft,dt,Ht,lt,St))});var Wt=Rt?Ct?getAllKeysIn:getAllKeys:Ct?keysIn:keys,nr=Dt?void 0:Wt(lt);return arrayEach(nr||lt,function(Ut,Ht){nr&&(Ht=Ut,Ut=lt[Ht]),assignValue(Tt,Ht,baseClone$1(Ut,ft,dt,Ht,lt,St))}),Tt}var _baseClone=baseClone$1,baseClone=_baseClone,CLONE_SYMBOLS_FLAG=4;function clone(lt){return baseClone(lt,CLONE_SYMBOLS_FLAG)}var clone_1=clone,root$2=_root,now$2=function(){return root$2.Date.now()},now_1=now$2,reWhitespace=/\s/;function trimmedEndIndex$1(lt){for(var ft=lt.length;ft--&&reWhitespace.test(lt.charAt(ft)););return ft}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(lt){return lt&&lt.slice(0,trimmedEndIndex(lt)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,symbolTag="[object Symbol]";function isSymbol$1(lt){return typeof lt=="symbol"||isObjectLike(lt)&&baseGetTag(lt)==symbolTag}var isSymbol_1=isSymbol$1,baseTrim=_baseTrim,isObject$2=isObject_1,isSymbol=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(lt){if(typeof lt=="number")return lt;if(isSymbol(lt))return NAN;if(isObject$2(lt)){var ft=typeof lt.valueOf=="function"?lt.valueOf():lt;lt=isObject$2(ft)?ft+"":ft}if(typeof lt!="string")return lt===0?lt:+lt;lt=baseTrim(lt);var dt=reIsBinary.test(lt);return dt||reIsOctal.test(lt)?freeParseInt(lt.slice(2),dt?2:8):reIsBadHex.test(lt)?NAN:+lt}var toNumber_1=toNumber$1,isObject$1=isObject_1,now$1=now_1,toNumber=toNumber_1,FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$1(lt,ft,dt){var vt,Et,St,Tt,At,Ct,Rt=0,Dt=!1,kt=!1,Nt=!0;if(typeof lt!="function")throw new TypeError(FUNC_ERROR_TEXT$1);ft=toNumber(ft)||0,isObject$1(dt)&&(Dt=!!dt.leading,kt="maxWait"in dt,St=kt?nativeMax(toNumber(dt.maxWait)||0,ft):St,Nt="trailing"in dt?!!dt.trailing:Nt);function zt(Kt){var Zt=vt,rr=Et;return vt=Et=void 0,Rt=Kt,Tt=lt.apply(rr,Zt),Tt}function Wt(Kt){return Rt=Kt,At=setTimeout(Ht,ft),Dt?zt(Kt):Tt}function nr(Kt){var Zt=Kt-Ct,rr=Kt-Rt,ar=ft-Zt;return kt?nativeMin(ar,St-rr):ar}function Ut(Kt){var Zt=Kt-Ct,rr=Kt-Rt;return Ct===void 0||Zt>=ft||Zt<0||kt&&rr>=St}function Ht(){var Kt=now$1();if(Ut(Kt))return Bt(Kt);At=setTimeout(Ht,nr(Kt))}function Bt(Kt){return At=void 0,Nt&&vt?zt(Kt):(vt=Et=void 0,Tt)}function Ft(){At!==void 0&&clearTimeout(At),Rt=0,vt=Ct=Et=At=void 0}function tr(){return At===void 0?Tt:Bt(now$1())}function cr(){var Kt=now$1(),Zt=Ut(Kt);if(vt=arguments,Et=this,Ct=Kt,Zt){if(At===void 0)return Wt(Ct);if(kt)return clearTimeout(At),At=setTimeout(Ht,ft),zt(Ct)}return At===void 0&&(At=setTimeout(Ht,ft)),Tt}return cr.cancel=Ft,cr.flush=tr,cr}var debounce_1=debounce$1,debounce=debounce_1,isObject=isObject_1,FUNC_ERROR_TEXT="Expected a function";function throttle(lt,ft,dt){var vt=!0,Et=!0;if(typeof lt!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject(dt)&&(vt="leading"in dt?!!dt.leading:vt,Et="trailing"in dt?!!dt.trailing:Et),debounce(lt,ft,{leading:vt,maxWait:ft,trailing:Et})}var throttle_1=throttle;function noop$1(){}var noop_1=noop$1,_createClass$1=function(){function lt(ft,dt){for(var vt=0;vt<dt.length;vt++){var Et=dt[vt];Et.enumerable=Et.enumerable||!1,Et.configurable=!0,"value"in Et&&(Et.writable=!0),Object.defineProperty(ft,Et.key,Et)}}return function(ft,dt,vt){return dt&&lt(ft.prototype,dt),vt&&lt(ft,vt),ft}}();function _classCallCheck$1(lt,ft){if(!(lt instanceof ft))throw new TypeError("Cannot call a class as a function")}var resize$1={width:0,height:0},scroll={delta:0,top:0},touch={axisIntention:"",startX:0,startY:0,deltaX:0,deltaY:0},INTENTION_THRESHOLD=5,getXY=function(ft){var dt={x:0,y:0},vt=document.body,Et=document.documentElement;return ft.pageX||ft.pageY?(dt.x=ft.pageX,dt.y=ft.pageY):(dt.x=ft.clientX+vt.scrollLeft+Et.scrollLeft,dt.y=ft.clientY+vt.scrollTop+Et.scrollTop),dt},AugmentedEvent=function(){function lt(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$1(this,lt);var dt=(ft.mainType||"").toLowerCase(),vt=(ft.subType||"").toLowerCase();this.mainType=dt,this.subType=vt,this.type=dt+vt.charAt(0).toUpperCase()+vt.slice(1)||"",this.scroll=scroll,this.resize=resize$1,this.touch=touch}return _createClass$1(lt,[{key:"update",value:function(dt){var vt=this.mainType,Et=this.subType,St=document.documentElement;if(globalVars.enableScrollInfo&&(vt==="scroll"||vt==="touchmove")){var Tt=St.scrollTop+document.body.scrollTop;Tt!==this.scroll.top&&(this.scroll.delta=Tt-this.scroll.top,this.scroll.top=Tt)}if(globalVars.enableResizeInfo&&vt==="resize"&&(this.resize.width=window.innerWidth||St.clientWidth,this.resize.height=window.innerHeight||St.clientHeight),globalVars.enableTouchInfo&&dt.touches&&(vt==="touchstart"||vt==="touchmove"||vt==="touchend")){var At=void 0,Ct=void 0,Rt=void 0;vt==="touchstart"||Et==="start"?(At=getXY(dt.touches[0]),this.touch.axisIntention="",this.touch.startX=At.x,this.touch.startY=At.y,this.touch.deltaX=0,this.touch.deltaY=0):vt==="touchmove"&&(At=getXY(dt.touches[0]),this.touch.deltaX=At.x-this.touch.startX,this.touch.deltaY=At.y-this.touch.startY,this.touch.axisIntention===""&&(Ct=Math.abs(this.touch.deltaX),Rt=Math.abs(this.touch.deltaY),Ct>INTENTION_THRESHOLD&&Ct>=Rt?this.touch.axisIntention="x":Rt>INTENTION_THRESHOLD&&Rt>Ct&&(this.touch.axisIntention="y")))}}}]),lt}(),rafExports={},raf$1={get exports(){return rafExports},set exports(lt){rafExports=lt}},performanceNowExports={},performanceNow={get exports(){return performanceNowExports},set exports(lt){performanceNowExports=lt}};(function(){var lt,ft,dt,vt,Et,St;typeof performance<"u"&&performance!==null&&performance.now?performanceNow.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(performanceNow.exports=function(){return(lt()-Et)/1e6},ft=process.hrtime,lt=function(){var Tt;return Tt=ft(),Tt[0]*1e9+Tt[1]},vt=lt(),St=process.uptime()*1e9,Et=vt-St):Date.now?(performanceNow.exports=function(){return Date.now()-dt},dt=Date.now()):(performanceNow.exports=function(){return new Date().getTime()-dt},dt=new Date().getTime())}).call(commonjsGlobal$1);var now=performanceNowExports,root$1=typeof window>"u"?commonjsGlobal$1:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root$1["request"+suffix],caf=root$1["cancel"+suffix]||root$1["cancelRequest"+suffix];for(var i=0;!raf&&i<vendors.length;i++)raf=root$1[vendors[i]+"Request"+suffix],caf=root$1[vendors[i]+"Cancel"+suffix]||root$1[vendors[i]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(lt){if(queue.length===0){var ft=now(),dt=Math.max(0,frameDuration-(ft-last));last=dt+ft,setTimeout(function(){var vt=queue.slice(0);queue.length=0;for(var Et=0;Et<vt.length;Et++)if(!vt[Et].cancelled)try{vt[Et].callback(last)}catch(St){setTimeout(function(){throw St},0)}},Math.round(dt))}return queue.push({handle:++id,callback:lt,cancelled:!1}),id},caf=function(lt){for(var ft=0;ft<queue.length;ft++)queue[ft].handle===lt&&(queue[ft].cancelled=!0)}}raf$1.exports=function(lt){return raf.call(root$1,lt)};rafExports.cancel=function(){caf.apply(root$1,arguments)};rafExports.polyfill=function(lt){lt||(lt=root$1),lt.requestAnimationFrame=raf,lt.cancelAnimationFrame=caf};var getTime=Date.now||function(){return new Date().getTime()};function rAFThrottle(lt){var ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:15,dt=void 0,vt=void 0,Et=0,St=0,Tt=function At(){var Ct=getTime(),Rt=ft-(Ct-Et);Rt<=0?(Et=Ct,St=0,lt.apply(dt,vt)):St=rafExports(At)};return function(){dt=this,vt=arguments,St||(St=rafExports(Tt))}}var EVENT_END_DELAY=100,DEFAULT_THROTTLE_RATE=50,connections=globalVars.connections,EE=globalVars.EE,listeners=globalVars.listeners,removers=globalVars.removers,doc$1=void 0,win$1=void 0,body=void 0,hashId=0;typeof window<"u"&&(win$1=window,doc$1=win$1.document||document,body=doc$1.body);function getHash(lt){return lt.id||"target-id-"+hashId++}function connectThrottle(lt,ft,dt,vt){return EE.on(lt,ft||noop_1,dt),vt=vt||lt,connections[vt]=(connections[vt]||0)+1,{_type:lt,_cb:ft,_ctx:dt,unsubscribe:function(){if(this._type){EE.removeListener(lt,ft,dt),connections[vt]--,connections[vt]===0&&(listeners[vt].remove(),listeners[vt]=void 0),this._type=void 0,this._cb=void 0,this._ctx=void 0;for(var St=removers.length-1;St>=0;St--){var Tt=removers[St];if(Tt===this){removers.splice(St,1);break}}}}}}function connectContinuousEvent(lt,ft,dt){return function(Et,St,Tt,At){var Ct=Tt.context,Rt=Tt.target,Dt=Rt&&getHash(Rt),kt=Dt?":"+Dt:"",Nt=ft+"Start:"+Et+kt,zt=ft+"End:"+Et+kt,Wt=ft+":"+Et+kt,nr=dt+":"+Et+kt,Ut=connectThrottle(nr,St,Ct,Wt);if(removers.push(Ut),listeners[Wt])return Ut;var Ht={start:new AugmentedEvent({mainType:ft,subType:"start"}),main:new AugmentedEvent({mainType:ft}),end:new AugmentedEvent({mainType:ft,subType:"end"})};Et==="raf"?(Et=16,tr=rAFThrottle(tr)):Et>0&&(tr=throttle_1(tr,Et));var Bt=void 0;function Ft(cr){Ht.end.update(cr),EE.emit(zt,cr,Ht.end),Bt=null}function tr(cr){Bt||(Ht.start.update(cr),EE.emit(Nt,cr,Ht.start)),clearTimeout(Bt),Ht.main.update(cr),EE.emit(Wt,cr,Ht.main),leIE8$1?Bt=setTimeout(function(){Ft(clone_1(cr))},Et+EVENT_END_DELAY):Bt=setTimeout(Ft.bind(null,cr),Et+EVENT_END_DELAY)}return listeners[Wt]=listen(Rt||lt,ft,tr,At),Ut}}function connectDiscreteEvent(lt,ft){return function(vt,Et,St,Tt){var At=St.context,Ct=St.target,Rt=Ct&&getHash(Ct),Dt=ft+":0"+(Rt?":"+Rt:""),kt=connectThrottle(Dt,Et,At);if(removers.push(kt),listeners[Dt])return kt;var Nt=new AugmentedEvent({mainType:ft});function zt(Wt){Nt.update(Wt),EE.emit(Dt,Wt,Nt)}return listeners[Dt]=listen(Ct||lt,ft,zt,Tt),kt}}const mainEventConnectors={scrollStart:connectContinuousEvent(win$1,"scroll","scrollStart"),scrollEnd:connectContinuousEvent(win$1,"scroll","scrollEnd"),scroll:connectContinuousEvent(win$1,"scroll","scroll"),resizeStart:connectContinuousEvent(win$1,"resize","resizeStart"),resizeEnd:connectContinuousEvent(win$1,"resize","resizeEnd"),resize:connectContinuousEvent(win$1,"resize","resize"),visibilitychange:connectDiscreteEvent(doc$1,"visibilitychange"),touchmoveStart:connectContinuousEvent(body,"touchmove","touchmoveStart"),touchmoveEnd:connectContinuousEvent(body,"touchmove","touchmoveEnd"),touchmove:connectContinuousEvent(body,"touchmove","touchmove"),touchstart:connectDiscreteEvent(body,"touchstart"),touchend:connectDiscreteEvent(body,"touchend")};function subscribe$1(lt,ft){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},vt=dt.useRAF||!1,Et=parseInt(dt.throttleRate,10),St=dt.eventOptions;return isNaN(Et)&&(Et=DEFAULT_THROTTLE_RATE),vt&&(Et="raf"),leIE8$1&&(Et=0),globalVars.enableScrollInfo=globalVars.enableScrollInfo||dt.enableScrollInfo||!1,globalVars.enableResizeInfo=globalVars.enableResizeInfo||dt.enableResizeInfo||!1,globalVars.enableTouchInfo=globalVars.enableTouchInfo||dt.enableTouchInfo||!1,mainEventConnectors[lt](Et,ft,dt,St)}var IS_CLIENT=typeof window<"u";function warn(){}var subscribe=IS_CLIENT?subscribe$1:warn,classnamesExports={},classnames={get exports(){return classnamesExports},set exports(lt){classnamesExports=lt}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(lt){(function(){var ft={}.hasOwnProperty;function dt(){for(var vt=[],Et=0;Et<arguments.length;Et++){var St=arguments[Et];if(St){var Tt=typeof St;if(Tt==="string"||Tt==="number")vt.push(St);else if(Array.isArray(St)){if(St.length){var At=dt.apply(null,St);At&&vt.push(At)}}else if(Tt==="object"){if(St.toString!==Object.prototype.toString&&!St.toString.toString().includes("[native code]")){vt.push(St.toString());continue}for(var Ct in St)ft.call(St,Ct)&&St[Ct]&&vt.push(Ct)}}}return vt.join(" ")}lt.exports?(dt.default=dt,lt.exports=dt):window.classNames=dt})()})(classnames);const classNames=classnamesExports;var shallowequal=function(ft,dt,vt,Et){var St=vt?vt.call(Et,ft,dt):void 0;if(St!==void 0)return!!St;if(ft===dt)return!0;if(typeof ft!="object"||!ft||typeof dt!="object"||!dt)return!1;var Tt=Object.keys(ft),At=Object.keys(dt);if(Tt.length!==At.length)return!1;for(var Ct=Object.prototype.hasOwnProperty.bind(dt),Rt=0;Rt<Tt.length;Rt++){var Dt=Tt[Rt];if(!Ct(Dt))return!1;var kt=ft[Dt],Nt=dt[Dt];if(St=vt?vt.call(Et,kt,Nt,Dt):void 0,St===!1||St===void 0&&kt!==Nt)return!1}return!0};function _defineProperty(lt,ft,dt){return ft in lt?Object.defineProperty(lt,ft,{value:dt,enumerable:!0,configurable:!0,writable:!0}):lt[ft]=dt,lt}function _typeof(lt){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft},_typeof(lt)}function _classCallCheck(lt,ft){if(!(lt instanceof ft))throw new TypeError("Cannot call a class as a function")}function _defineProperties(lt,ft){for(var dt=0;dt<ft.length;dt++){var vt=ft[dt];vt.enumerable=vt.enumerable||!1,vt.configurable=!0,"value"in vt&&(vt.writable=!0),Object.defineProperty(lt,vt.key,vt)}}function _createClass(lt,ft,dt){return ft&&_defineProperties(lt.prototype,ft),dt&&_defineProperties(lt,dt),Object.defineProperty(lt,"prototype",{writable:!1}),lt}function _inherits$1(lt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Super expression must either be null or a function");lt.prototype=Object.create(ft&&ft.prototype,{constructor:{value:lt,writable:!0,configurable:!0}}),Object.defineProperty(lt,"prototype",{writable:!1}),ft&&_setPrototypeOf(lt,ft)}function _setPrototypeOf(lt,ft){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(vt,Et){return vt.__proto__=Et,vt},_setPrototypeOf(lt,ft)}function _createSuper$4(lt){var ft=_isNativeReflectConstruct$4();return function(){var vt=_getPrototypeOf$1(lt),Et;if(ft){var St=_getPrototypeOf$1(this).constructor;Et=Reflect.construct(vt,arguments,St)}else Et=vt.apply(this,arguments);return _possibleConstructorReturn$1(this,Et)}}function _possibleConstructorReturn$1(lt,ft){if(ft&&(_typeof(ft)==="object"||typeof ft=="function"))return ft;if(ft!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(lt)}function _assertThisInitialized$1(lt){if(lt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return lt}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$1(lt){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(dt){return dt.__proto__||Object.getPrototypeOf(dt)},_getPrototypeOf$1(lt)}var STATUS_ORIGINAL=0,STATUS_RELEASED=1,STATUS_FIXED=2,TRANSFORM_PROP="transform",doc,docBody,docEl,canEnableTransforms=!0,M,scrollDelta=0,win,winHeight=-1,Sticky=function(lt){_inherits$1(dt,lt);var ft=_createSuper$4(dt);function dt(vt,Et){var St;return _classCallCheck(this,dt),St=ft.call(this,vt,Et),St.handleResize=St.handleResize.bind(_assertThisInitialized$1(St)),St.handleScroll=St.handleScroll.bind(_assertThisInitialized$1(St)),St.handleScrollStart=St.handleScrollStart.bind(_assertThisInitialized$1(St)),St.delta=0,St.stickyTop=0,St.stickyBottom=0,St.frozen=!1,St.skipNextScrollEvent=!1,St.scrollTop=-1,St.bottomBoundaryTarget,St.topTarget,St.subscribers,St.state={top:0,bottom:0,width:0,height:0,x:0,y:0,topBoundary:0,bottomBoundary:1/0,status:STATUS_ORIGINAL,pos:0,activated:!1},St}return _createClass(dt,[{key:"getTargetHeight",value:function(Et){return Et&&Et.offsetHeight||0}},{key:"getTopPosition",value:function(Et){return Et=Et||this.props.top||0,typeof Et=="string"&&(this.topTarget||(this.topTarget=doc.querySelector(Et)),Et=this.getTargetHeight(this.topTarget)),Et}},{key:"getTargetBottom",value:function(Et){if(!Et)return-1;var St=Et.getBoundingClientRect();return this.scrollTop+St.bottom}},{key:"getBottomBoundary",value:function(Et){var St=Et||this.props.bottomBoundary;return _typeof(St)==="object"&&(St=St.value||St.target||0),typeof St=="string"&&(this.bottomBoundaryTarget||(this.bottomBoundaryTarget=doc.querySelector(St)),St=this.getTargetBottom(this.bottomBoundaryTarget)),St&&St>0?St:1/0}},{key:"reset",value:function(){this.setState({status:STATUS_ORIGINAL,pos:0})}},{key:"release",value:function(Et){this.setState({status:STATUS_RELEASED,pos:Et-this.state.y})}},{key:"fix",value:function(Et){this.setState({status:STATUS_FIXED,pos:Et})}},{key:"updateInitialDimension",value:function(Et){if(Et=Et||{},!(!this.outerElement||!this.innerElement)){var St=this.outerElement.getBoundingClientRect(),Tt=this.innerElement.getBoundingClientRect(),At=St.width||St.right-St.left,Ct=Tt.height||Tt.bottom-Tt.top,Rt=St.top+this.scrollTop;this.setState({top:this.getTopPosition(Et.top),bottom:Math.min(this.state.top+Ct,winHeight),width:At,height:Ct,x:St.left,y:Rt,bottomBoundary:this.getBottomBoundary(Et.bottomBoundary),topBoundary:Rt})}}},{key:"handleResize",value:function(Et,St){this.props.shouldFreeze()||(winHeight=St.resize.height,this.updateInitialDimension(),this.update())}},{key:"handleScrollStart",value:function(Et,St){this.frozen=this.props.shouldFreeze(),!this.frozen&&(this.scrollTop===St.scroll.top?this.skipNextScrollEvent=!0:(this.scrollTop=St.scroll.top,this.updateInitialDimension()))}},{key:"handleScroll",value:function(Et,St){if(this.skipNextScrollEvent){this.skipNextScrollEvent=!1;return}scrollDelta=St.scroll.delta,this.scrollTop=St.scroll.top,this.update()}},{key:"update",value:function(){var Et=!this.props.enabled||this.state.bottomBoundary-this.state.topBoundary<=this.state.height||this.state.width===0&&this.state.height===0;if(Et){this.state.status!==STATUS_ORIGINAL&&this.reset();return}var St=scrollDelta,Tt=this.scrollTop+this.state.top,At=this.scrollTop+this.state.bottom;if(Tt<=this.state.topBoundary)this.reset();else if(At>=this.state.bottomBoundary)this.stickyBottom=this.state.bottomBoundary,this.stickyTop=this.stickyBottom-this.state.height,this.release(this.stickyTop);else if(this.state.height>winHeight-this.state.top)switch(this.state.status){case STATUS_ORIGINAL:this.release(this.state.y),this.stickyTop=this.state.y,this.stickyBottom=this.stickyTop+this.state.height;case STATUS_RELEASED:this.stickyBottom=this.stickyTop+this.state.height,St>0&&At>this.stickyBottom?this.fix(this.state.bottom-this.state.height):St<0&&Tt<this.stickyTop&&this.fix(this.state.top);break;case STATUS_FIXED:var Ct=!0,Rt=this.state.pos,Dt=this.state.height;if(St>0&&Rt===this.state.top)this.stickyTop=Tt-St,this.stickyBottom=this.stickyTop+Dt;else if(St<0&&Rt===this.state.bottom-Dt)this.stickyBottom=At-St,this.stickyTop=this.stickyBottom-Dt;else if(Rt!==this.state.bottom-Dt&&Rt!==this.state.top){var kt=Rt+Dt-this.state.bottom;this.stickyBottom=At-St+kt,this.stickyTop=this.stickyBottom-Dt}else Ct=!1;Ct&&this.release(this.stickyTop);break}else this.fix(this.state.top);this.delta=St}},{key:"componentDidUpdate",value:function(Et,St){var Tt=this;St.status!==this.state.status&&this.props.onStateChange&&this.props.onStateChange({status:this.state.status}),this.props.top!==St.top&&(this.updateInitialDimension(),this.update());var At=!shallowequal(this.props,Et);At&&(Et.enabled!==this.props.enabled?this.props.enabled?this.setState({activated:!0},function(){Tt.updateInitialDimension(),Tt.update()}):this.setState({activated:!1},function(){Tt.reset()}):(Et.top!==this.props.top||Et.bottomBoundary!==this.props.bottomBoundary)&&(this.updateInitialDimension(),this.update()))}},{key:"componentWillUnmount",value:function(){for(var Et=this.subscribers||[],St=Et.length-1;St>=0;St--)this.subscribers[St].unsubscribe()}},{key:"componentDidMount",value:function(){win||(win=window,doc=document,docEl=doc.documentElement,docBody=doc.body,winHeight=win.innerHeight||docEl.clientHeight,M=window.Modernizr,M&&M.prefixed&&(canEnableTransforms=M.csstransforms3d,TRANSFORM_PROP=M.prefixed("transform"))),this.scrollTop=docBody.scrollTop+docEl.scrollTop,this.props.enabled&&(this.setState({activated:!0}),this.updateInitialDimension(),this.update()),this.subscribers=[subscribe("scrollStart",this.handleScrollStart.bind(this),{useRAF:!0}),subscribe("scroll",this.handleScroll.bind(this),{useRAF:!0,enableScrollInfo:!0}),subscribe("resize",this.handleResize.bind(this),{enableResizeInfo:!0})]}},{key:"translate",value:function(Et,St){var Tt=canEnableTransforms&&this.props.enableTransforms;Tt&&this.state.activated?Et[TRANSFORM_PROP]="translate3d(0,"+Math.round(St)+"px,0)":Et.top=St+"px"}},{key:"shouldComponentUpdate",value:function(Et,St){return!this.props.shouldFreeze()&&!(shallowequal(this.props,Et)&&shallowequal(this.state,St))}},{key:"render",value:function(){var Et,St=this,Tt={position:this.state.status===STATUS_FIXED?"fixed":"relative",top:this.state.status===STATUS_FIXED?"0px":"",zIndex:this.props.innerZ},At={};this.translate(Tt,this.state.pos),this.state.status!==STATUS_ORIGINAL&&(Tt.width=this.state.width+"px",At.height=this.state.height+"px");var Ct=classNames("sticky-outer-wrapper",this.props.className,(Et={},_defineProperty(Et,this.props.activeClass,this.state.status===STATUS_FIXED),_defineProperty(Et,this.props.releasedClass,this.state.status===STATUS_RELEASED),Et)),Rt=classNames("sticky-inner-wrapper",this.props.innerClass,_defineProperty({},this.props.innerActiveClass,this.state.status===STATUS_FIXED)),Dt=this.props.children;return React$1.createElement("div",{ref:function(Nt){St.outerElement=Nt},className:Ct,style:At},React$1.createElement("div",{ref:function(Nt){St.innerElement=Nt},className:Rt,style:Tt},typeof Dt=="function"?Dt({status:this.state.status}):Dt))}}]),dt}(reactExports.Component);Sticky.displayName="Sticky";Sticky.defaultProps={shouldFreeze:function(){return!1},enabled:!0,top:0,bottomBoundary:0,enableTransforms:!0,activeClass:"active",releasedClass:"released",onStateChange:null,innerClass:"",innerActiveClass:""};Sticky.propTypes={enabled:propTypesExports.bool,top:propTypesExports.oneOfType([propTypesExports.string,propTypesExports.number]),bottomBoundary:propTypesExports.oneOfType([propTypesExports.object,propTypesExports.string,propTypesExports.number]),enableTransforms:propTypesExports.bool,activeClass:propTypesExports.string,releasedClass:propTypesExports.string,innerClass:propTypesExports.string,innerActiveClass:propTypesExports.string,className:propTypesExports.string,onStateChange:propTypesExports.func,shouldFreeze:propTypesExports.func,innerZ:propTypesExports.oneOfType([propTypesExports.string,propTypesExports.number])};Sticky.STATUS_ORIGINAL=STATUS_ORIGINAL;Sticky.STATUS_RELEASED=STATUS_RELEASED;Sticky.STATUS_FIXED=STATUS_FIXED;function ThinContainer(lt){return jsx("div",{className:`mx-auto w-[600px] max-w-full px-2 sm:px-0 ${lt.classNames||""}`,children:lt.children})}const useFade$1="",useFade=(lt=!1)=>{const[ft,dt]=reactExports.useState(lt),[vt,Et]=reactExports.useState(ft);return reactExports.useEffect(()=>{ft&&Et(!0)},[ft]),[vt,dt,{style:{animation:`${ft?"fadeIn":"fadeOut"} .3s`},onAnimationEnd:()=>{ft||Et(!1)}}]};function useBackdrop(){const[lt,ft]=reactExports.useState(!1),[dt,vt]=reactExports.useState(!1);return[At=>{ft(At),At&&vt(!0)},{active:lt,onBackdropHide(){vt(!1)}},{style:dt?{zIndex:"1000",position:"relative"}:{}}]}function Backdrop(lt){const ft=lt.onClick||(()=>{}),dt=lt.onBackdropHide||(()=>{}),[vt,Et,St]=useFade();return reactExports.useEffect(()=>{Et(!!lt.active)},[lt.active,Et]),reactExports.useEffect(()=>{vt||dt()},[vt]),vt?jsx("div",{className:`pointer-events-auto fixed left-0 right-0 top-0 h-screen w-screen bg-black bg-opacity-50 opacity-100 transition-opacity ${vt?"":"opacity-0"}`,...St,onClick:Tt=>ft(Tt.nativeEvent)}):null}function BackdropContainer(lt){const ft=reactExports.createRef(),dt=reactExports.createRef();return reactExports.useEffect(()=>{let vt=-1;function Et(){if(ft.current&&dt.current){const St=ft.current.getBoundingClientRect();dt.current.style.top=`${St.top}px`,dt.current.style.left=`${St.left}px`,dt.current.style.width=`${St.width}px`,dt.current.style.height=`${St.height}px`}vt=window.requestAnimationFrame(Et)}return Et(),()=>{window.cancelAnimationFrame(vt)}},[ft,dt]),jsxs("div",{ref:ft,children:[reactDomExports.createPortal(jsxs("div",{className:"pointer-events-none fixed top-0 left-0 z-[999]",children:[jsx(Backdrop,{active:lt.active,...lt}),jsx("div",{ref:dt,className:"pointer-events-auto absolute",children:lt.children})]}),document.body),jsx("div",{className:"invisible",children:lt.children})]})}function ButtonControl({onClick:lt,children:ft,className:dt}){return jsx("button",{onClick:lt,className:dt,type:"button",children:ft})}function Option({option:lt,onClick:ft,tabIndex:dt}){return jsxs("div",{className:"flex h-10 cursor-pointer items-center space-x-2 px-4 py-2 text-left text-denim-700 transition-colors hover:text-white",onClick:ft,tabIndex:dt,children:[jsx(Icon,{icon:lt.icon}),jsx("input",{type:"radio",className:"hidden",id:lt.id}),jsx("label",{htmlFor:lt.id,className:"cursor-pointer ",children:jsx("div",{className:"item",children:lt.name})})]})}const DropdownButton=React$1.forwardRef((lt,ft)=>{const[dt,vt,Et]=useBackdrop(),[St,Tt]=reactExports.useState(lt.selectedItem);reactExports.useEffect(()=>{let Rt;return lt.open?Tt(lt.selectedItem):Rt=setTimeout(()=>{Tt(lt.selectedItem)},200),()=>{Rt&&clearTimeout(Rt)}},[lt.open]);const At=lt.options.find(Rt=>Rt.id===lt.selectedItem)||{id:"movie",name:"movie",icon:Icons.ARROW_LEFT};reactExports.useEffect(()=>{dt(lt.open)},[lt.open]);const Ct=(Rt,Dt)=>{Rt.stopPropagation(),lt.setSelectedItem(Dt.id),lt.setOpen(!1)};return jsx("div",{className:"w-full min-w-[140px] sm:w-auto",children:jsx("div",{ref:ft,className:"relative w-full sm:w-auto",...Et,children:jsxs(BackdropContainer,{onClick:()=>lt.setOpen(!1),...vt,children:[jsxs(ButtonControl,{...lt,className:"sm:justify-left relative z-20 flex h-10 w-full items-center justify-center space-x-2 rounded-[20px] bg-bink-400 px-4 py-2 text-white hover:bg-bink-300",children:[jsx(Icon,{icon:At.icon}),jsx("span",{className:"flex-1",children:At.name}),jsx(Icon,{icon:Icons.CHEVRON_DOWN,className:`transition-transform ${lt.open?"rotate-180":""}`})]}),jsx("div",{className:`absolute top-0 z-10 w-full rounded-[20px] bg-denim-300 pt-[40px] transition-all duration-200 ${lt.open?"block max-h-60 opacity-100":"invisible max-h-0 opacity-0"}`,children:lt.options.filter(Rt=>Rt.id!==St).map(Rt=>jsx(Option,{option:Rt,onClick:Dt=>Ct(Dt,Rt),tabIndex:lt.open?0:void 0},Rt.id))})]})})})});function TextInputControl({onChange:lt,onUnFocus:ft,value:dt,label:vt,className:Et,placeholder:St}){const Tt=jsx("input",{type:"text",className:Et,placeholder:St,onChange:At=>lt&&lt(At.target.value),value:dt,onBlur:()=>ft&&ft()});return vt?jsxs("label",{children:[jsx("span",{children:vt}),Tt]}):Tt}function SearchBarInput(lt){const{t:ft}=useTranslation(),[dt,vt]=reactExports.useState(!1);function Et(Tt){lt.onChange({...lt.value,searchQuery:Tt},!1)}function St(Tt){lt.onChange({...lt.value,type:Tt},!0)}return jsxs("div",{className:"relative flex flex-col rounded-[28px] bg-denim-400 transition-colors focus-within:bg-denim-400 hover:bg-denim-500 sm:flex-row sm:items-center",children:[jsx("div",{className:"pointer-events-none absolute left-5 top-0 bottom-0 flex max-h-14 items-center",children:jsx(Icon,{icon:Icons.SEARCH})}),jsx(TextInputControl,{onUnFocus:lt.onUnFocus,onChange:Tt=>Et(Tt),value:lt.value.searchQuery,className:"w-full flex-1 bg-transparent px-4 py-4 pl-12 text-white  placeholder-denim-700 focus:outline-none sm:py-4 sm:pr-2",placeholder:lt.placeholder}),jsx("div",{className:"px-4 py-4 pt-0 sm:py-2 sm:px-2",children:jsx(DropdownButton,{icon:Icons.SEARCH,open:dt,setOpen:Tt=>vt(Tt),selectedItem:lt.value.type,setSelectedItem:Tt=>St(Tt),options:[{id:MWMediaType.MOVIE,name:ft("searchBar.movie"),icon:Icons.FILM},{id:MWMediaType.SERIES,name:ft("searchBar.series"),icon:Icons.CLAPPER_BOARD}],onClick:()=>vt(Tt=>!Tt),children:lt.buttonText||ft("searchBar.search")})})]})}function getInitialValue(lt){const ft=Object.values(MWMediaType).find(vt=>lt.type===vt)||MWMediaType.MOVIE,dt=decodeURIComponent(lt.query||"");return{type:ft,searchQuery:dt}}function useSearchQuery(){const lt=useHistory(),{path:ft,params:dt}=useRouteMatch(),[vt,Et]=reactExports.useState(getInitialValue(dt));return[vt,(At,Ct)=>{const Rt={...vt};Object.assign(Rt,At),Et(Rt),Ct&&lt.replace(generatePath(ft,{query:Rt.searchQuery.length===0?void 0:At.searchQuery,type:Rt.type}))},()=>{lt.replace(generatePath(ft,{query:vt.searchQuery.length===0?void 0:vt.searchQuery,type:vt.type}))}]}function WideContainer(lt){return jsx("div",{className:`mx-auto w-[700px] max-w-full px-8 sm:px-4 ${lt.classNames||""}`,children:lt.children})}function useDebounce(lt,ft){const[dt,vt]=reactExports.useState(lt);return reactExports.useEffect(()=>{const Et=setTimeout(()=>{vt(lt)},ft);return()=>{clearTimeout(Et)}},[lt,ft]),dt}function SectionHeading(lt){return jsx("div",{className:lt.className,children:jsxs("div",{className:"mb-5 flex items-center",children:[jsxs("p",{className:"flex flex-1 items-center font-bold uppercase text-denim-700",children:[lt.icon?jsx("span",{className:"mr-2 text-xl",children:jsx(Icon,{icon:lt.icon})}):null,lt.title]}),lt.children]})})}const MediaGrid=reactExports.forwardRef((lt,ft)=>jsx("div",{className:"grid grid-cols-2 gap-6 sm:grid-cols-3",ref:ft,children:lt.children}));function DotList(lt){return jsx("p",{className:`font-semibold text-denim-700 ${lt.className||""}`,children:lt.content.map((ft,dt)=>jsxs("span",{children:[dt!==0?jsx("span",{className:"mx-[0.6em] text-[1em]",children:"●"}):null,ft]},ft))})}function MediaCardContent({media:lt,linkable:ft,series:dt,percentage:vt,closable:Et,onClose:St}){const{t:Tt}=useTranslation(),At=`${Math.round(vt??0).toFixed(0)}%`,Ct=ft&&!Et,Rt=[Tt(`media.${lt.type}`)];return lt.year&&Rt.push(lt.year),jsx("div",{className:`group -m-3 mb-2 rounded-xl bg-denim-300 bg-opacity-0 transition-colors duration-100 ${Ct?"hover:bg-opacity-100":""}`,children:jsxs("article",{className:`pointer-events-auto relative mb-2 p-3 transition-transform duration-100 ${Ct?"group-hover:scale-95":""}`,children:[jsxs("div",{className:["relative mb-4 aspect-[2/3] w-full overflow-hidden rounded-xl bg-denim-500 bg-cover bg-center transition-[border-radius] duration-100",Et?"":"group-hover:rounded-lg"].join(" "),style:{backgroundImage:lt.poster?`url(${lt.poster})`:void 0},children:[dt?jsx("div",{className:["absolute right-2 top-2 rounded-md bg-denim-200 py-1 px-2 transition-colors",Et?"":"group-hover:bg-denim-500"].join(" "),children:jsx("p",{className:["text-center text-xs font-bold text-slate-400 transition-colors",Et?"":"group-hover:text-white"].join(" "),children:Tt("seasons.seasonAndEpisode",{season:dt.season,episode:dt.episode})})}):null,vt!==void 0?jsxs(Fragment,{children:[jsx("div",{className:`absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-denim-300 to-transparent transition-colors ${Ct?"group-hover:from-denim-100":""}`}),jsx("div",{className:`absolute inset-x-0 bottom-0 h-12 bg-gradient-to-t from-denim-300 to-transparent transition-colors ${Ct?"group-hover:from-denim-100":""}`}),jsx("div",{className:"absolute inset-x-0 bottom-0 p-3",children:jsx("div",{className:"relative h-1 overflow-hidden rounded-full bg-denim-600",children:jsx("div",{className:"absolute inset-y-0 left-0 rounded-full bg-bink-700",style:{width:At}})})})]}):null,jsx("div",{className:`absolute inset-0 flex items-center justify-center bg-denim-200 bg-opacity-80 transition-opacity duration-200 ${Et?"opacity-100":"pointer-events-none opacity-0"}`,children:jsx(IconPatch,{clickable:!0,className:"text-2xl text-slate-400",onClick:()=>Et&&(St==null?void 0:St()),icon:Icons.X})})]}),jsx("h1",{className:"mb-1 max-h-[4.5rem] text-ellipsis break-words font-bold text-white line-clamp-3",children:jsx("span",{children:lt.title})}),jsx(DotList,{className:"text-xs",content:Rt})]})})}function MediaCard(lt){const ft=jsx(MediaCardContent,{...lt}),dt=lt.linkable&&!lt.closable;let vt=dt?`/media/${encodeURIComponent(JWMediaToId(lt.media))}`:"#";return dt&&lt.series&&(vt+=`/${encodeURIComponent(lt.series.seasonId)}/${encodeURIComponent(lt.series.episodeId)}`),lt.linkable?jsx(Link$1,{to:vt,className:lt.closable?"hover:cursor-default":"",children:ft}):jsx("span",{children:ft})}function formatSeries(lt){if(lt)return{season:lt.season,episode:lt.episode,episodeId:lt.episodeId,seasonId:lt.seasonId}}function WatchedMediaCard(lt){var vt;const{watched:ft}=useWatchedContext(),dt=reactExports.useMemo(()=>ft.items.sort((Et,St)=>St.watchedAt-Et.watchedAt).find(Et=>Et.item.meta.id===lt.media.id),[ft,lt.media]);return jsx(MediaCard,{media:lt.media,series:formatSeries((vt=dt==null?void 0:dt.item)==null?void 0:vt.series),linkable:!0,percentage:dt==null?void 0:dt.percentage,onClose:lt.onClose,closable:lt.closable})}const parents=new Set,coords=new WeakMap,siblings=new WeakMap,animations=new WeakMap,intersections=new WeakMap,intervals=new WeakMap,options=new WeakMap,debounces=new WeakMap,enabled=new WeakSet;let root;const TGT="__aa_tgt",DEL="__aa_del",handleMutations=lt=>{const ft=getElements(lt);ft&&ft.forEach(dt=>animate(dt))},handleResizes=lt=>{lt.forEach(ft=>{ft.target===root&&updateAllPos(),coords.has(ft.target)&&updatePos(ft.target)})};function observePosition(lt){const ft=intersections.get(lt);ft==null||ft.disconnect();let dt=coords.get(lt),vt=0;const Et=5;dt||(dt=getCoords(lt),coords.set(lt,dt));const{offsetWidth:St,offsetHeight:Tt}=root,Ct=[dt.top-Et,St-(dt.left+Et+dt.width),Tt-(dt.top+Et+dt.height),dt.left-Et].map(Dt=>`${-1*Math.floor(Dt)}px`).join(" "),Rt=new IntersectionObserver(()=>{++vt>1&&updatePos(lt)},{root,threshold:1,rootMargin:Ct});Rt.observe(lt),intersections.set(lt,Rt)}function updatePos(lt){clearTimeout(debounces.get(lt));const ft=getOptions(lt),dt=typeof ft=="function"?500:ft.duration;debounces.set(lt,setTimeout(async()=>{const vt=animations.get(lt);try{await(vt==null?void 0:vt.finished),coords.set(lt,getCoords(lt)),observePosition(lt)}catch{}},dt))}function updateAllPos(){clearTimeout(debounces.get(root)),debounces.set(root,setTimeout(()=>{parents.forEach(lt=>forEach(lt,ft=>lowPriority(()=>updatePos(ft))))},100))}function poll(lt){setTimeout(()=>{intervals.set(lt,setInterval(()=>lowPriority(updatePos.bind(null,lt)),2e3))},Math.round(2e3*Math.random()))}function lowPriority(lt){typeof requestIdleCallback=="function"?requestIdleCallback(()=>lt()):requestAnimationFrame(()=>lt())}let mutations,resize;typeof window<"u"&&(root=document.documentElement,mutations=new MutationObserver(handleMutations),resize=new ResizeObserver(handleResizes),resize.observe(root));function getElements(lt){return lt.reduce((vt,Et)=>[...vt,...Array.from(Et.addedNodes),...Array.from(Et.removedNodes)],[]).every(vt=>vt.nodeName==="#comment")?!1:lt.reduce((vt,Et)=>{if(vt===!1)return!1;if(Et.target instanceof Element){if(target(Et.target),!vt.has(Et.target)){vt.add(Et.target);for(let St=0;St<Et.target.children.length;St++){const Tt=Et.target.children.item(St);if(Tt){if(DEL in Tt)return!1;target(Et.target,Tt),vt.add(Tt)}}}if(Et.removedNodes.length)for(let St=0;St<Et.removedNodes.length;St++){const Tt=Et.removedNodes[St];if(DEL in Tt)return!1;Tt instanceof Element&&(vt.add(Tt),target(Et.target,Tt),siblings.set(Tt,[Et.previousSibling,Et.nextSibling]))}}return vt},new Set)}function target(lt,ft){!ft&&!(TGT in lt)?Object.defineProperty(lt,TGT,{value:lt}):ft&&!(TGT in ft)&&Object.defineProperty(ft,TGT,{value:lt})}function animate(lt){var ft;const dt=lt.isConnected,vt=coords.has(lt);dt&&siblings.has(lt)&&siblings.delete(lt),animations.has(lt)&&((ft=animations.get(lt))===null||ft===void 0||ft.cancel()),vt&&dt?remain(lt):vt&&!dt?remove(lt):add(lt)}function raw(lt){return Number(lt.replace(/[^0-9.\-]/g,""))}function getCoords(lt){const ft=lt.getBoundingClientRect();return{top:ft.top+window.scrollY,left:ft.left+window.scrollX,width:ft.width,height:ft.height}}function getTransitionSizes(lt,ft,dt){let vt=ft.width,Et=ft.height,St=dt.width,Tt=dt.height;const At=getComputedStyle(lt);if(At.getPropertyValue("box-sizing")==="content-box"){const Rt=raw(At.paddingTop)+raw(At.paddingBottom)+raw(At.borderTopWidth)+raw(At.borderBottomWidth),Dt=raw(At.paddingLeft)+raw(At.paddingRight)+raw(At.borderRightWidth)+raw(At.borderLeftWidth);vt-=Dt,St-=Dt,Et-=Rt,Tt-=Rt}return[vt,St,Et,Tt].map(Math.round)}function getOptions(lt){return TGT in lt&&options.has(lt[TGT])?options.get(lt[TGT]):{duration:250,easing:"ease-in-out"}}function getTarget(lt){if(TGT in lt)return lt[TGT]}function isEnabled(lt){const ft=getTarget(lt);return ft?enabled.has(ft):!1}function forEach(lt,...ft){ft.forEach(dt=>dt(lt,options.has(lt)));for(let dt=0;dt<lt.children.length;dt++){const vt=lt.children.item(dt);vt&&ft.forEach(Et=>Et(vt,options.has(vt)))}}function remain(lt){const ft=coords.get(lt),dt=getCoords(lt);if(!isEnabled(lt))return coords.set(lt,dt);let vt;if(!ft)return;const Et=getOptions(lt);if(typeof Et!="function"){const St=ft.left-dt.left,Tt=ft.top-dt.top,[At,Ct,Rt,Dt]=getTransitionSizes(lt,ft,dt),kt={transform:`translate(${St}px, ${Tt}px)`},Nt={transform:"translate(0, 0)"};At!==Ct&&(kt.width=`${At}px`,Nt.width=`${Ct}px`),Rt!==Dt&&(kt.height=`${Rt}px`,Nt.height=`${Dt}px`),vt=lt.animate([kt,Nt],{duration:Et.duration,easing:Et.easing})}else vt=new Animation(Et(lt,"remain",ft,dt)),vt.play();animations.set(lt,vt),coords.set(lt,dt),vt.addEventListener("finish",updatePos.bind(null,lt))}function add(lt){const ft=getCoords(lt);coords.set(lt,ft);const dt=getOptions(lt);if(!isEnabled(lt))return;let vt;typeof dt!="function"?vt=lt.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:dt.duration*1.5,easing:"ease-in"}):(vt=new Animation(dt(lt,"add",ft)),vt.play()),animations.set(lt,vt),vt.addEventListener("finish",updatePos.bind(null,lt))}function remove(lt){var ft;if(!siblings.has(lt)||!coords.has(lt))return;const[dt,vt]=siblings.get(lt);Object.defineProperty(lt,DEL,{value:!0}),vt&&vt.parentNode&&vt.parentNode instanceof Element?vt.parentNode.insertBefore(lt,vt):dt&&dt.parentNode?dt.parentNode.appendChild(lt):(ft=getTarget(lt))===null||ft===void 0||ft.appendChild(lt);function Et(){var Nt;lt.remove(),coords.delete(lt),siblings.delete(lt),animations.delete(lt),(Nt=intersections.get(lt))===null||Nt===void 0||Nt.disconnect()}if(!isEnabled(lt))return Et();const[St,Tt,At,Ct]=deletePosition(lt),Rt=getOptions(lt),Dt=coords.get(lt);let kt;Object.assign(lt.style,{position:"absolute",top:`${St}px`,left:`${Tt}px`,width:`${At}px`,height:`${Ct}px`,margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100}),typeof Rt!="function"?kt=lt.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:Rt.duration,easing:"ease-out"}):(kt=new Animation(Rt(lt,"remove",Dt)),kt.play()),animations.set(lt,kt),kt.addEventListener("finish",Et)}function deletePosition(lt){const ft=coords.get(lt),[dt,,vt]=getTransitionSizes(lt,ft,getCoords(lt));let Et=lt.parentElement;for(;Et&&(getComputedStyle(Et).position==="static"||Et instanceof HTMLBodyElement);)Et=Et.parentElement;Et||(Et=document.body);const St=getComputedStyle(Et),Tt=coords.get(Et)||getCoords(Et),At=Math.round(ft.top-Tt.top)-raw(St.borderTopWidth),Ct=Math.round(ft.left-Tt.left)-raw(St.borderLeftWidth);return[At,Ct,dt,vt]}function autoAnimate(lt,ft={}){return mutations&&resize&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&typeof ft!="function"&&!ft.disrespectUserMotionPreference||(enabled.add(lt),getComputedStyle(lt).position==="static"&&Object.assign(lt.style,{position:"relative"}),forEach(lt,updatePos,poll,Et=>resize==null?void 0:resize.observe(Et)),typeof ft=="function"?options.set(lt,ft):options.set(lt,{duration:250,easing:"ease-in-out",...ft}),mutations.observe(lt,{childList:!0}),parents.add(lt))),Object.freeze({parent:lt,enable:()=>{enabled.add(lt)},disable:()=>{enabled.delete(lt)},isEnabled:()=>enabled.has(lt)})}function useAutoAnimate(lt){const[ft,dt]=reactExports.useState();return[reactExports.useCallback(St=>{St instanceof HTMLElement?dt(autoAnimate(St,lt)):dt(void 0)},[]),St=>{ft&&(St?ft.enable():ft.disable())}]}function EditButton(lt){const{t:ft}=useTranslation(),[dt]=useAutoAnimate(),vt=reactExports.useCallback(()=>{var Et;(Et=lt.onEdit)==null||Et.call(lt,!lt.editing)},[lt]);return jsx(ButtonControl,{onClick:vt,className:"flex h-12 items-center overflow-hidden rounded-full bg-denim-400 px-4 py-2 text-white transition-[background-color,transform] hover:bg-denim-500 active:scale-105",children:jsx("span",{ref:dt,children:lt.editing?jsx("span",{className:"mx-4 whitespace-nowrap",children:ft("media.stopEditing")}):jsx(Icon,{icon:Icons.EDIT})})})}function Overlay(lt){return jsxs(Fragment,{children:[jsx(HelmetExport,{children:jsx("body",{"data-no-scroll":!0})}),jsxs("div",{className:"fixed inset-0 z-[99999]",children:[jsx(Transition,{animation:"fade",className:"absolute inset-0 bg-[rgba(8,6,18,0.85)]",isChild:!0}),lt.children]})]})}function ModalFrame(lt){return jsx(Transition,{className:"fixed inset-0 z-[9999]",animation:"none",show:lt.show,children:jsx(Overlay,{children:jsx(Transition,{isChild:!0,className:"flex h-full w-full items-center justify-center",animation:"slide-up",children:lt.children})})})}function Modal(lt){return reactDomExports.createPortal(jsx(ModalFrame,{show:lt.show,children:lt.children}),document.body)}function ModalCard(lt){return jsx("div",{className:"relative mx-2 max-w-[600px] overflow-hidden rounded-lg bg-denim-200 px-10 py-10",children:lt.children})}function Button(lt){return jsxs("button",{type:"button",onClick:lt.onClick,className:"inline-flex items-center justify-center rounded-lg bg-white px-8 py-3 font-bold text-black transition-[transform,background-color] duration-100 hover:bg-gray-200 active:scale-105 md:px-16",children:[lt.icon?jsx("span",{className:"mr-3 hidden md:inline-block",children:jsx(Icon,{icon:lt.icon})}):null,lt.children]})}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(lt){let ft=lt.length;for(;--ft>=0;)lt[ft]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(lt,ft,dt,vt,Et){this.static_tree=lt,this.extra_bits=ft,this.extra_base=dt,this.elems=vt,this.max_length=Et,this.has_stree=lt&&lt.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(lt,ft){this.dyn_tree=lt,this.max_code=0,this.stat_desc=ft}const d_code=lt=>lt<256?_dist_code[lt]:_dist_code[256+(lt>>>7)],put_short=(lt,ft)=>{lt.pending_buf[lt.pending++]=ft&255,lt.pending_buf[lt.pending++]=ft>>>8&255},send_bits=(lt,ft,dt)=>{lt.bi_valid>Buf_size-dt?(lt.bi_buf|=ft<<lt.bi_valid&65535,put_short(lt,lt.bi_buf),lt.bi_buf=ft>>Buf_size-lt.bi_valid,lt.bi_valid+=dt-Buf_size):(lt.bi_buf|=ft<<lt.bi_valid&65535,lt.bi_valid+=dt)},send_code=(lt,ft,dt)=>{send_bits(lt,dt[ft*2],dt[ft*2+1])},bi_reverse=(lt,ft)=>{let dt=0;do dt|=lt&1,lt>>>=1,dt<<=1;while(--ft>0);return dt>>>1},bi_flush=lt=>{lt.bi_valid===16?(put_short(lt,lt.bi_buf),lt.bi_buf=0,lt.bi_valid=0):lt.bi_valid>=8&&(lt.pending_buf[lt.pending++]=lt.bi_buf&255,lt.bi_buf>>=8,lt.bi_valid-=8)},gen_bitlen=(lt,ft)=>{const dt=ft.dyn_tree,vt=ft.max_code,Et=ft.stat_desc.static_tree,St=ft.stat_desc.has_stree,Tt=ft.stat_desc.extra_bits,At=ft.stat_desc.extra_base,Ct=ft.stat_desc.max_length;let Rt,Dt,kt,Nt,zt,Wt,nr=0;for(Nt=0;Nt<=MAX_BITS$1;Nt++)lt.bl_count[Nt]=0;for(dt[lt.heap[lt.heap_max]*2+1]=0,Rt=lt.heap_max+1;Rt<HEAP_SIZE$1;Rt++)Dt=lt.heap[Rt],Nt=dt[dt[Dt*2+1]*2+1]+1,Nt>Ct&&(Nt=Ct,nr++),dt[Dt*2+1]=Nt,!(Dt>vt)&&(lt.bl_count[Nt]++,zt=0,Dt>=At&&(zt=Tt[Dt-At]),Wt=dt[Dt*2],lt.opt_len+=Wt*(Nt+zt),St&&(lt.static_len+=Wt*(Et[Dt*2+1]+zt)));if(nr!==0){do{for(Nt=Ct-1;lt.bl_count[Nt]===0;)Nt--;lt.bl_count[Nt]--,lt.bl_count[Nt+1]+=2,lt.bl_count[Ct]--,nr-=2}while(nr>0);for(Nt=Ct;Nt!==0;Nt--)for(Dt=lt.bl_count[Nt];Dt!==0;)kt=lt.heap[--Rt],!(kt>vt)&&(dt[kt*2+1]!==Nt&&(lt.opt_len+=(Nt-dt[kt*2+1])*dt[kt*2],dt[kt*2+1]=Nt),Dt--)}},gen_codes=(lt,ft,dt)=>{const vt=new Array(MAX_BITS$1+1);let Et=0,St,Tt;for(St=1;St<=MAX_BITS$1;St++)Et=Et+dt[St-1]<<1,vt[St]=Et;for(Tt=0;Tt<=ft;Tt++){let At=lt[Tt*2+1];At!==0&&(lt[Tt*2]=bi_reverse(vt[At]++,At))}},tr_static_init=()=>{let lt,ft,dt,vt,Et;const St=new Array(MAX_BITS$1+1);for(dt=0,vt=0;vt<LENGTH_CODES$1-1;vt++)for(base_length[vt]=dt,lt=0;lt<1<<extra_lbits[vt];lt++)_length_code[dt++]=vt;for(_length_code[dt-1]=vt,Et=0,vt=0;vt<16;vt++)for(base_dist[vt]=Et,lt=0;lt<1<<extra_dbits[vt];lt++)_dist_code[Et++]=vt;for(Et>>=7;vt<D_CODES$1;vt++)for(base_dist[vt]=Et<<7,lt=0;lt<1<<extra_dbits[vt]-7;lt++)_dist_code[256+Et++]=vt;for(ft=0;ft<=MAX_BITS$1;ft++)St[ft]=0;for(lt=0;lt<=143;)static_ltree[lt*2+1]=8,lt++,St[8]++;for(;lt<=255;)static_ltree[lt*2+1]=9,lt++,St[9]++;for(;lt<=279;)static_ltree[lt*2+1]=7,lt++,St[7]++;for(;lt<=287;)static_ltree[lt*2+1]=8,lt++,St[8]++;for(gen_codes(static_ltree,L_CODES$1+1,St),lt=0;lt<D_CODES$1;lt++)static_dtree[lt*2+1]=5,static_dtree[lt*2]=bi_reverse(lt,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=lt=>{let ft;for(ft=0;ft<L_CODES$1;ft++)lt.dyn_ltree[ft*2]=0;for(ft=0;ft<D_CODES$1;ft++)lt.dyn_dtree[ft*2]=0;for(ft=0;ft<BL_CODES$1;ft++)lt.bl_tree[ft*2]=0;lt.dyn_ltree[END_BLOCK*2]=1,lt.opt_len=lt.static_len=0,lt.sym_next=lt.matches=0},bi_windup=lt=>{lt.bi_valid>8?put_short(lt,lt.bi_buf):lt.bi_valid>0&&(lt.pending_buf[lt.pending++]=lt.bi_buf),lt.bi_buf=0,lt.bi_valid=0},smaller=(lt,ft,dt,vt)=>{const Et=ft*2,St=dt*2;return lt[Et]<lt[St]||lt[Et]===lt[St]&&vt[ft]<=vt[dt]},pqdownheap=(lt,ft,dt)=>{const vt=lt.heap[dt];let Et=dt<<1;for(;Et<=lt.heap_len&&(Et<lt.heap_len&&smaller(ft,lt.heap[Et+1],lt.heap[Et],lt.depth)&&Et++,!smaller(ft,vt,lt.heap[Et],lt.depth));)lt.heap[dt]=lt.heap[Et],dt=Et,Et<<=1;lt.heap[dt]=vt},compress_block=(lt,ft,dt)=>{let vt,Et,St=0,Tt,At;if(lt.sym_next!==0)do vt=lt.pending_buf[lt.sym_buf+St++]&255,vt+=(lt.pending_buf[lt.sym_buf+St++]&255)<<8,Et=lt.pending_buf[lt.sym_buf+St++],vt===0?send_code(lt,Et,ft):(Tt=_length_code[Et],send_code(lt,Tt+LITERALS$1+1,ft),At=extra_lbits[Tt],At!==0&&(Et-=base_length[Tt],send_bits(lt,Et,At)),vt--,Tt=d_code(vt),send_code(lt,Tt,dt),At=extra_dbits[Tt],At!==0&&(vt-=base_dist[Tt],send_bits(lt,vt,At)));while(St<lt.sym_next);send_code(lt,END_BLOCK,ft)},build_tree=(lt,ft)=>{const dt=ft.dyn_tree,vt=ft.stat_desc.static_tree,Et=ft.stat_desc.has_stree,St=ft.stat_desc.elems;let Tt,At,Ct=-1,Rt;for(lt.heap_len=0,lt.heap_max=HEAP_SIZE$1,Tt=0;Tt<St;Tt++)dt[Tt*2]!==0?(lt.heap[++lt.heap_len]=Ct=Tt,lt.depth[Tt]=0):dt[Tt*2+1]=0;for(;lt.heap_len<2;)Rt=lt.heap[++lt.heap_len]=Ct<2?++Ct:0,dt[Rt*2]=1,lt.depth[Rt]=0,lt.opt_len--,Et&&(lt.static_len-=vt[Rt*2+1]);for(ft.max_code=Ct,Tt=lt.heap_len>>1;Tt>=1;Tt--)pqdownheap(lt,dt,Tt);Rt=St;do Tt=lt.heap[1],lt.heap[1]=lt.heap[lt.heap_len--],pqdownheap(lt,dt,1),At=lt.heap[1],lt.heap[--lt.heap_max]=Tt,lt.heap[--lt.heap_max]=At,dt[Rt*2]=dt[Tt*2]+dt[At*2],lt.depth[Rt]=(lt.depth[Tt]>=lt.depth[At]?lt.depth[Tt]:lt.depth[At])+1,dt[Tt*2+1]=dt[At*2+1]=Rt,lt.heap[1]=Rt++,pqdownheap(lt,dt,1);while(lt.heap_len>=2);lt.heap[--lt.heap_max]=lt.heap[1],gen_bitlen(lt,ft),gen_codes(dt,Ct,lt.bl_count)},scan_tree=(lt,ft,dt)=>{let vt,Et=-1,St,Tt=ft[0*2+1],At=0,Ct=7,Rt=4;for(Tt===0&&(Ct=138,Rt=3),ft[(dt+1)*2+1]=65535,vt=0;vt<=dt;vt++)St=Tt,Tt=ft[(vt+1)*2+1],!(++At<Ct&&St===Tt)&&(At<Rt?lt.bl_tree[St*2]+=At:St!==0?(St!==Et&&lt.bl_tree[St*2]++,lt.bl_tree[REP_3_6*2]++):At<=10?lt.bl_tree[REPZ_3_10*2]++:lt.bl_tree[REPZ_11_138*2]++,At=0,Et=St,Tt===0?(Ct=138,Rt=3):St===Tt?(Ct=6,Rt=3):(Ct=7,Rt=4))},send_tree=(lt,ft,dt)=>{let vt,Et=-1,St,Tt=ft[0*2+1],At=0,Ct=7,Rt=4;for(Tt===0&&(Ct=138,Rt=3),vt=0;vt<=dt;vt++)if(St=Tt,Tt=ft[(vt+1)*2+1],!(++At<Ct&&St===Tt)){if(At<Rt)do send_code(lt,St,lt.bl_tree);while(--At!==0);else St!==0?(St!==Et&&(send_code(lt,St,lt.bl_tree),At--),send_code(lt,REP_3_6,lt.bl_tree),send_bits(lt,At-3,2)):At<=10?(send_code(lt,REPZ_3_10,lt.bl_tree),send_bits(lt,At-3,3)):(send_code(lt,REPZ_11_138,lt.bl_tree),send_bits(lt,At-11,7));At=0,Et=St,Tt===0?(Ct=138,Rt=3):St===Tt?(Ct=6,Rt=3):(Ct=7,Rt=4)}},build_bl_tree=lt=>{let ft;for(scan_tree(lt,lt.dyn_ltree,lt.l_desc.max_code),scan_tree(lt,lt.dyn_dtree,lt.d_desc.max_code),build_tree(lt,lt.bl_desc),ft=BL_CODES$1-1;ft>=3&&lt.bl_tree[bl_order[ft]*2+1]===0;ft--);return lt.opt_len+=3*(ft+1)+5+5+4,ft},send_all_trees=(lt,ft,dt,vt)=>{let Et;for(send_bits(lt,ft-257,5),send_bits(lt,dt-1,5),send_bits(lt,vt-4,4),Et=0;Et<vt;Et++)send_bits(lt,lt.bl_tree[bl_order[Et]*2+1],3);send_tree(lt,lt.dyn_ltree,ft-1),send_tree(lt,lt.dyn_dtree,dt-1)},detect_data_type=lt=>{let ft=4093624447,dt;for(dt=0;dt<=31;dt++,ft>>>=1)if(ft&1&&lt.dyn_ltree[dt*2]!==0)return Z_BINARY;if(lt.dyn_ltree[9*2]!==0||lt.dyn_ltree[10*2]!==0||lt.dyn_ltree[13*2]!==0)return Z_TEXT;for(dt=32;dt<LITERALS$1;dt++)if(lt.dyn_ltree[dt*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=lt=>{static_init_done||(tr_static_init(),static_init_done=!0),lt.l_desc=new TreeDesc(lt.dyn_ltree,static_l_desc),lt.d_desc=new TreeDesc(lt.dyn_dtree,static_d_desc),lt.bl_desc=new TreeDesc(lt.bl_tree,static_bl_desc),lt.bi_buf=0,lt.bi_valid=0,init_block(lt)},_tr_stored_block$1=(lt,ft,dt,vt)=>{send_bits(lt,(STORED_BLOCK<<1)+(vt?1:0),3),bi_windup(lt),put_short(lt,dt),put_short(lt,~dt),dt&&lt.pending_buf.set(lt.window.subarray(ft,ft+dt),lt.pending),lt.pending+=dt},_tr_align$1=lt=>{send_bits(lt,STATIC_TREES<<1,3),send_code(lt,END_BLOCK,static_ltree),bi_flush(lt)},_tr_flush_block$1=(lt,ft,dt,vt)=>{let Et,St,Tt=0;lt.level>0?(lt.strm.data_type===Z_UNKNOWN$1&&(lt.strm.data_type=detect_data_type(lt)),build_tree(lt,lt.l_desc),build_tree(lt,lt.d_desc),Tt=build_bl_tree(lt),Et=lt.opt_len+3+7>>>3,St=lt.static_len+3+7>>>3,St<=Et&&(Et=St)):Et=St=dt+5,dt+4<=Et&&ft!==-1?_tr_stored_block$1(lt,ft,dt,vt):lt.strategy===Z_FIXED$1||St===Et?(send_bits(lt,(STATIC_TREES<<1)+(vt?1:0),3),compress_block(lt,static_ltree,static_dtree)):(send_bits(lt,(DYN_TREES<<1)+(vt?1:0),3),send_all_trees(lt,lt.l_desc.max_code+1,lt.d_desc.max_code+1,Tt+1),compress_block(lt,lt.dyn_ltree,lt.dyn_dtree)),init_block(lt),vt&&bi_windup(lt)},_tr_tally$1=(lt,ft,dt)=>(lt.pending_buf[lt.sym_buf+lt.sym_next++]=ft,lt.pending_buf[lt.sym_buf+lt.sym_next++]=ft>>8,lt.pending_buf[lt.sym_buf+lt.sym_next++]=dt,ft===0?lt.dyn_ltree[dt*2]++:(lt.matches++,ft--,lt.dyn_ltree[(_length_code[dt]+LITERALS$1+1)*2]++,lt.dyn_dtree[d_code(ft)*2]++),lt.sym_next===lt.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(lt,ft,dt,vt)=>{let Et=lt&65535|0,St=lt>>>16&65535|0,Tt=0;for(;dt!==0;){Tt=dt>2e3?2e3:dt,dt-=Tt;do Et=Et+ft[vt++]|0,St=St+Et|0;while(--Tt);Et%=65521,St%=65521}return Et|St<<16|0};var adler32_1=adler32;const makeTable=()=>{let lt,ft=[];for(var dt=0;dt<256;dt++){lt=dt;for(var vt=0;vt<8;vt++)lt=lt&1?3988292384^lt>>>1:lt>>>1;ft[dt]=lt}return ft},crcTable=new Uint32Array(makeTable()),crc32=(lt,ft,dt,vt)=>{const Et=crcTable,St=vt+dt;lt^=-1;for(let Tt=vt;Tt<St;Tt++)lt=lt>>>8^Et[(lt^ft[Tt])&255];return lt^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(lt,ft)=>(lt.msg=messages[ft],ft),rank=lt=>lt*2-(lt>4?9:0),zero=lt=>{let ft=lt.length;for(;--ft>=0;)lt[ft]=0},slide_hash=lt=>{let ft,dt,vt,Et=lt.w_size;ft=lt.hash_size,vt=ft;do dt=lt.head[--vt],lt.head[vt]=dt>=Et?dt-Et:0;while(--ft);ft=Et,vt=ft;do dt=lt.prev[--vt],lt.prev[vt]=dt>=Et?dt-Et:0;while(--ft)};let HASH_ZLIB=(lt,ft,dt)=>(ft<<lt.hash_shift^dt)&lt.hash_mask,HASH=HASH_ZLIB;const flush_pending=lt=>{const ft=lt.state;let dt=ft.pending;dt>lt.avail_out&&(dt=lt.avail_out),dt!==0&&(lt.output.set(ft.pending_buf.subarray(ft.pending_out,ft.pending_out+dt),lt.next_out),lt.next_out+=dt,ft.pending_out+=dt,lt.total_out+=dt,lt.avail_out-=dt,ft.pending-=dt,ft.pending===0&&(ft.pending_out=0))},flush_block_only=(lt,ft)=>{_tr_flush_block(lt,lt.block_start>=0?lt.block_start:-1,lt.strstart-lt.block_start,ft),lt.block_start=lt.strstart,flush_pending(lt.strm)},put_byte=(lt,ft)=>{lt.pending_buf[lt.pending++]=ft},putShortMSB=(lt,ft)=>{lt.pending_buf[lt.pending++]=ft>>>8&255,lt.pending_buf[lt.pending++]=ft&255},read_buf=(lt,ft,dt,vt)=>{let Et=lt.avail_in;return Et>vt&&(Et=vt),Et===0?0:(lt.avail_in-=Et,ft.set(lt.input.subarray(lt.next_in,lt.next_in+Et),dt),lt.state.wrap===1?lt.adler=adler32_1(lt.adler,ft,Et,dt):lt.state.wrap===2&&(lt.adler=crc32_1(lt.adler,ft,Et,dt)),lt.next_in+=Et,lt.total_in+=Et,Et)},longest_match=(lt,ft)=>{let dt=lt.max_chain_length,vt=lt.strstart,Et,St,Tt=lt.prev_length,At=lt.nice_match;const Ct=lt.strstart>lt.w_size-MIN_LOOKAHEAD?lt.strstart-(lt.w_size-MIN_LOOKAHEAD):0,Rt=lt.window,Dt=lt.w_mask,kt=lt.prev,Nt=lt.strstart+MAX_MATCH;let zt=Rt[vt+Tt-1],Wt=Rt[vt+Tt];lt.prev_length>=lt.good_match&&(dt>>=2),At>lt.lookahead&&(At=lt.lookahead);do if(Et=ft,!(Rt[Et+Tt]!==Wt||Rt[Et+Tt-1]!==zt||Rt[Et]!==Rt[vt]||Rt[++Et]!==Rt[vt+1])){vt+=2,Et++;do;while(Rt[++vt]===Rt[++Et]&&Rt[++vt]===Rt[++Et]&&Rt[++vt]===Rt[++Et]&&Rt[++vt]===Rt[++Et]&&Rt[++vt]===Rt[++Et]&&Rt[++vt]===Rt[++Et]&&Rt[++vt]===Rt[++Et]&&Rt[++vt]===Rt[++Et]&&vt<Nt);if(St=MAX_MATCH-(Nt-vt),vt=Nt-MAX_MATCH,St>Tt){if(lt.match_start=ft,Tt=St,St>=At)break;zt=Rt[vt+Tt-1],Wt=Rt[vt+Tt]}}while((ft=kt[ft&Dt])>Ct&&--dt!==0);return Tt<=lt.lookahead?Tt:lt.lookahead},fill_window=lt=>{const ft=lt.w_size;let dt,vt,Et;do{if(vt=lt.window_size-lt.lookahead-lt.strstart,lt.strstart>=ft+(ft-MIN_LOOKAHEAD)&&(lt.window.set(lt.window.subarray(ft,ft+ft-vt),0),lt.match_start-=ft,lt.strstart-=ft,lt.block_start-=ft,lt.insert>lt.strstart&&(lt.insert=lt.strstart),slide_hash(lt),vt+=ft),lt.strm.avail_in===0)break;if(dt=read_buf(lt.strm,lt.window,lt.strstart+lt.lookahead,vt),lt.lookahead+=dt,lt.lookahead+lt.insert>=MIN_MATCH)for(Et=lt.strstart-lt.insert,lt.ins_h=lt.window[Et],lt.ins_h=HASH(lt,lt.ins_h,lt.window[Et+1]);lt.insert&&(lt.ins_h=HASH(lt,lt.ins_h,lt.window[Et+MIN_MATCH-1]),lt.prev[Et&lt.w_mask]=lt.head[lt.ins_h],lt.head[lt.ins_h]=Et,Et++,lt.insert--,!(lt.lookahead+lt.insert<MIN_MATCH)););}while(lt.lookahead<MIN_LOOKAHEAD&&lt.strm.avail_in!==0)},deflate_stored=(lt,ft)=>{let dt=lt.pending_buf_size-5>lt.w_size?lt.w_size:lt.pending_buf_size-5,vt,Et,St,Tt=0,At=lt.strm.avail_in;do{if(vt=65535,St=lt.bi_valid+42>>3,lt.strm.avail_out<St||(St=lt.strm.avail_out-St,Et=lt.strstart-lt.block_start,vt>Et+lt.strm.avail_in&&(vt=Et+lt.strm.avail_in),vt>St&&(vt=St),vt<dt&&(vt===0&&ft!==Z_FINISH$3||ft===Z_NO_FLUSH$2||vt!==Et+lt.strm.avail_in)))break;Tt=ft===Z_FINISH$3&&vt===Et+lt.strm.avail_in?1:0,_tr_stored_block(lt,0,0,Tt),lt.pending_buf[lt.pending-4]=vt,lt.pending_buf[lt.pending-3]=vt>>8,lt.pending_buf[lt.pending-2]=~vt,lt.pending_buf[lt.pending-1]=~vt>>8,flush_pending(lt.strm),Et&&(Et>vt&&(Et=vt),lt.strm.output.set(lt.window.subarray(lt.block_start,lt.block_start+Et),lt.strm.next_out),lt.strm.next_out+=Et,lt.strm.avail_out-=Et,lt.strm.total_out+=Et,lt.block_start+=Et,vt-=Et),vt&&(read_buf(lt.strm,lt.strm.output,lt.strm.next_out,vt),lt.strm.next_out+=vt,lt.strm.avail_out-=vt,lt.strm.total_out+=vt)}while(Tt===0);return At-=lt.strm.avail_in,At&&(At>=lt.w_size?(lt.matches=2,lt.window.set(lt.strm.input.subarray(lt.strm.next_in-lt.w_size,lt.strm.next_in),0),lt.strstart=lt.w_size,lt.insert=lt.strstart):(lt.window_size-lt.strstart<=At&&(lt.strstart-=lt.w_size,lt.window.set(lt.window.subarray(lt.w_size,lt.w_size+lt.strstart),0),lt.matches<2&&lt.matches++,lt.insert>lt.strstart&&(lt.insert=lt.strstart)),lt.window.set(lt.strm.input.subarray(lt.strm.next_in-At,lt.strm.next_in),lt.strstart),lt.strstart+=At,lt.insert+=At>lt.w_size-lt.insert?lt.w_size-lt.insert:At),lt.block_start=lt.strstart),lt.high_water<lt.strstart&&(lt.high_water=lt.strstart),Tt?BS_FINISH_DONE:ft!==Z_NO_FLUSH$2&&ft!==Z_FINISH$3&&lt.strm.avail_in===0&&lt.strstart===lt.block_start?BS_BLOCK_DONE:(St=lt.window_size-lt.strstart,lt.strm.avail_in>St&&lt.block_start>=lt.w_size&&(lt.block_start-=lt.w_size,lt.strstart-=lt.w_size,lt.window.set(lt.window.subarray(lt.w_size,lt.w_size+lt.strstart),0),lt.matches<2&&lt.matches++,St+=lt.w_size,lt.insert>lt.strstart&&(lt.insert=lt.strstart)),St>lt.strm.avail_in&&(St=lt.strm.avail_in),St&&(read_buf(lt.strm,lt.window,lt.strstart,St),lt.strstart+=St,lt.insert+=St>lt.w_size-lt.insert?lt.w_size-lt.insert:St),lt.high_water<lt.strstart&&(lt.high_water=lt.strstart),St=lt.bi_valid+42>>3,St=lt.pending_buf_size-St>65535?65535:lt.pending_buf_size-St,dt=St>lt.w_size?lt.w_size:St,Et=lt.strstart-lt.block_start,(Et>=dt||(Et||ft===Z_FINISH$3)&&ft!==Z_NO_FLUSH$2&&lt.strm.avail_in===0&&Et<=St)&&(vt=Et>St?St:Et,Tt=ft===Z_FINISH$3&&lt.strm.avail_in===0&&vt===Et?1:0,_tr_stored_block(lt,lt.block_start,vt,Tt),lt.block_start+=vt,flush_pending(lt.strm)),Tt?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(lt,ft)=>{let dt,vt;for(;;){if(lt.lookahead<MIN_LOOKAHEAD){if(fill_window(lt),lt.lookahead<MIN_LOOKAHEAD&&ft===Z_NO_FLUSH$2)return BS_NEED_MORE;if(lt.lookahead===0)break}if(dt=0,lt.lookahead>=MIN_MATCH&&(lt.ins_h=HASH(lt,lt.ins_h,lt.window[lt.strstart+MIN_MATCH-1]),dt=lt.prev[lt.strstart&lt.w_mask]=lt.head[lt.ins_h],lt.head[lt.ins_h]=lt.strstart),dt!==0&&lt.strstart-dt<=lt.w_size-MIN_LOOKAHEAD&&(lt.match_length=longest_match(lt,dt)),lt.match_length>=MIN_MATCH)if(vt=_tr_tally(lt,lt.strstart-lt.match_start,lt.match_length-MIN_MATCH),lt.lookahead-=lt.match_length,lt.match_length<=lt.max_lazy_match&&lt.lookahead>=MIN_MATCH){lt.match_length--;do lt.strstart++,lt.ins_h=HASH(lt,lt.ins_h,lt.window[lt.strstart+MIN_MATCH-1]),dt=lt.prev[lt.strstart&lt.w_mask]=lt.head[lt.ins_h],lt.head[lt.ins_h]=lt.strstart;while(--lt.match_length!==0);lt.strstart++}else lt.strstart+=lt.match_length,lt.match_length=0,lt.ins_h=lt.window[lt.strstart],lt.ins_h=HASH(lt,lt.ins_h,lt.window[lt.strstart+1]);else vt=_tr_tally(lt,0,lt.window[lt.strstart]),lt.lookahead--,lt.strstart++;if(vt&&(flush_block_only(lt,!1),lt.strm.avail_out===0))return BS_NEED_MORE}return lt.insert=lt.strstart<MIN_MATCH-1?lt.strstart:MIN_MATCH-1,ft===Z_FINISH$3?(flush_block_only(lt,!0),lt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):lt.sym_next&&(flush_block_only(lt,!1),lt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(lt,ft)=>{let dt,vt,Et;for(;;){if(lt.lookahead<MIN_LOOKAHEAD){if(fill_window(lt),lt.lookahead<MIN_LOOKAHEAD&&ft===Z_NO_FLUSH$2)return BS_NEED_MORE;if(lt.lookahead===0)break}if(dt=0,lt.lookahead>=MIN_MATCH&&(lt.ins_h=HASH(lt,lt.ins_h,lt.window[lt.strstart+MIN_MATCH-1]),dt=lt.prev[lt.strstart&lt.w_mask]=lt.head[lt.ins_h],lt.head[lt.ins_h]=lt.strstart),lt.prev_length=lt.match_length,lt.prev_match=lt.match_start,lt.match_length=MIN_MATCH-1,dt!==0&&lt.prev_length<lt.max_lazy_match&&lt.strstart-dt<=lt.w_size-MIN_LOOKAHEAD&&(lt.match_length=longest_match(lt,dt),lt.match_length<=5&&(lt.strategy===Z_FILTERED||lt.match_length===MIN_MATCH&&lt.strstart-lt.match_start>4096)&&(lt.match_length=MIN_MATCH-1)),lt.prev_length>=MIN_MATCH&&lt.match_length<=lt.prev_length){Et=lt.strstart+lt.lookahead-MIN_MATCH,vt=_tr_tally(lt,lt.strstart-1-lt.prev_match,lt.prev_length-MIN_MATCH),lt.lookahead-=lt.prev_length-1,lt.prev_length-=2;do++lt.strstart<=Et&&(lt.ins_h=HASH(lt,lt.ins_h,lt.window[lt.strstart+MIN_MATCH-1]),dt=lt.prev[lt.strstart&lt.w_mask]=lt.head[lt.ins_h],lt.head[lt.ins_h]=lt.strstart);while(--lt.prev_length!==0);if(lt.match_available=0,lt.match_length=MIN_MATCH-1,lt.strstart++,vt&&(flush_block_only(lt,!1),lt.strm.avail_out===0))return BS_NEED_MORE}else if(lt.match_available){if(vt=_tr_tally(lt,0,lt.window[lt.strstart-1]),vt&&flush_block_only(lt,!1),lt.strstart++,lt.lookahead--,lt.strm.avail_out===0)return BS_NEED_MORE}else lt.match_available=1,lt.strstart++,lt.lookahead--}return lt.match_available&&(vt=_tr_tally(lt,0,lt.window[lt.strstart-1]),lt.match_available=0),lt.insert=lt.strstart<MIN_MATCH-1?lt.strstart:MIN_MATCH-1,ft===Z_FINISH$3?(flush_block_only(lt,!0),lt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):lt.sym_next&&(flush_block_only(lt,!1),lt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(lt,ft)=>{let dt,vt,Et,St;const Tt=lt.window;for(;;){if(lt.lookahead<=MAX_MATCH){if(fill_window(lt),lt.lookahead<=MAX_MATCH&&ft===Z_NO_FLUSH$2)return BS_NEED_MORE;if(lt.lookahead===0)break}if(lt.match_length=0,lt.lookahead>=MIN_MATCH&&lt.strstart>0&&(Et=lt.strstart-1,vt=Tt[Et],vt===Tt[++Et]&&vt===Tt[++Et]&&vt===Tt[++Et])){St=lt.strstart+MAX_MATCH;do;while(vt===Tt[++Et]&&vt===Tt[++Et]&&vt===Tt[++Et]&&vt===Tt[++Et]&&vt===Tt[++Et]&&vt===Tt[++Et]&&vt===Tt[++Et]&&vt===Tt[++Et]&&Et<St);lt.match_length=MAX_MATCH-(St-Et),lt.match_length>lt.lookahead&&(lt.match_length=lt.lookahead)}if(lt.match_length>=MIN_MATCH?(dt=_tr_tally(lt,1,lt.match_length-MIN_MATCH),lt.lookahead-=lt.match_length,lt.strstart+=lt.match_length,lt.match_length=0):(dt=_tr_tally(lt,0,lt.window[lt.strstart]),lt.lookahead--,lt.strstart++),dt&&(flush_block_only(lt,!1),lt.strm.avail_out===0))return BS_NEED_MORE}return lt.insert=0,ft===Z_FINISH$3?(flush_block_only(lt,!0),lt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):lt.sym_next&&(flush_block_only(lt,!1),lt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(lt,ft)=>{let dt;for(;;){if(lt.lookahead===0&&(fill_window(lt),lt.lookahead===0)){if(ft===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(lt.match_length=0,dt=_tr_tally(lt,0,lt.window[lt.strstart]),lt.lookahead--,lt.strstart++,dt&&(flush_block_only(lt,!1),lt.strm.avail_out===0))return BS_NEED_MORE}return lt.insert=0,ft===Z_FINISH$3?(flush_block_only(lt,!0),lt.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):lt.sym_next&&(flush_block_only(lt,!1),lt.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(lt,ft,dt,vt,Et){this.good_length=lt,this.max_lazy=ft,this.nice_length=dt,this.max_chain=vt,this.func=Et}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=lt=>{lt.window_size=2*lt.w_size,zero(lt.head),lt.max_lazy_match=configuration_table[lt.level].max_lazy,lt.good_match=configuration_table[lt.level].good_length,lt.nice_match=configuration_table[lt.level].nice_length,lt.max_chain_length=configuration_table[lt.level].max_chain,lt.strstart=0,lt.block_start=0,lt.lookahead=0,lt.insert=0,lt.match_length=lt.prev_length=MIN_MATCH-1,lt.match_available=0,lt.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=lt=>{if(!lt)return 1;const ft=lt.state;return!ft||ft.strm!==lt||ft.status!==INIT_STATE&&ft.status!==GZIP_STATE&&ft.status!==EXTRA_STATE&&ft.status!==NAME_STATE&&ft.status!==COMMENT_STATE&&ft.status!==HCRC_STATE&&ft.status!==BUSY_STATE&&ft.status!==FINISH_STATE?1:0},deflateResetKeep=lt=>{if(deflateStateCheck(lt))return err(lt,Z_STREAM_ERROR$2);lt.total_in=lt.total_out=0,lt.data_type=Z_UNKNOWN;const ft=lt.state;return ft.pending=0,ft.pending_out=0,ft.wrap<0&&(ft.wrap=-ft.wrap),ft.status=ft.wrap===2?GZIP_STATE:ft.wrap?INIT_STATE:BUSY_STATE,lt.adler=ft.wrap===2?0:1,ft.last_flush=-2,_tr_init(ft),Z_OK$3},deflateReset=lt=>{const ft=deflateResetKeep(lt);return ft===Z_OK$3&&lm_init(lt.state),ft},deflateSetHeader=(lt,ft)=>deflateStateCheck(lt)||lt.state.wrap!==2?Z_STREAM_ERROR$2:(lt.state.gzhead=ft,Z_OK$3),deflateInit2=(lt,ft,dt,vt,Et,St)=>{if(!lt)return Z_STREAM_ERROR$2;let Tt=1;if(ft===Z_DEFAULT_COMPRESSION$1&&(ft=6),vt<0?(Tt=0,vt=-vt):vt>15&&(Tt=2,vt-=16),Et<1||Et>MAX_MEM_LEVEL||dt!==Z_DEFLATED$2||vt<8||vt>15||ft<0||ft>9||St<0||St>Z_FIXED||vt===8&&Tt!==1)return err(lt,Z_STREAM_ERROR$2);vt===8&&(vt=9);const At=new DeflateState;return lt.state=At,At.strm=lt,At.status=INIT_STATE,At.wrap=Tt,At.gzhead=null,At.w_bits=vt,At.w_size=1<<At.w_bits,At.w_mask=At.w_size-1,At.hash_bits=Et+7,At.hash_size=1<<At.hash_bits,At.hash_mask=At.hash_size-1,At.hash_shift=~~((At.hash_bits+MIN_MATCH-1)/MIN_MATCH),At.window=new Uint8Array(At.w_size*2),At.head=new Uint16Array(At.hash_size),At.prev=new Uint16Array(At.w_size),At.lit_bufsize=1<<Et+6,At.pending_buf_size=At.lit_bufsize*4,At.pending_buf=new Uint8Array(At.pending_buf_size),At.sym_buf=At.lit_bufsize,At.sym_end=(At.lit_bufsize-1)*3,At.level=ft,At.strategy=St,At.method=dt,deflateReset(lt)},deflateInit=(lt,ft)=>deflateInit2(lt,ft,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(lt,ft)=>{if(deflateStateCheck(lt)||ft>Z_BLOCK$1||ft<0)return lt?err(lt,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const dt=lt.state;if(!lt.output||lt.avail_in!==0&&!lt.input||dt.status===FINISH_STATE&&ft!==Z_FINISH$3)return err(lt,lt.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const vt=dt.last_flush;if(dt.last_flush=ft,dt.pending!==0){if(flush_pending(lt),lt.avail_out===0)return dt.last_flush=-1,Z_OK$3}else if(lt.avail_in===0&&rank(ft)<=rank(vt)&&ft!==Z_FINISH$3)return err(lt,Z_BUF_ERROR$1);if(dt.status===FINISH_STATE&&lt.avail_in!==0)return err(lt,Z_BUF_ERROR$1);if(dt.status===INIT_STATE&&dt.wrap===0&&(dt.status=BUSY_STATE),dt.status===INIT_STATE){let Et=Z_DEFLATED$2+(dt.w_bits-8<<4)<<8,St=-1;if(dt.strategy>=Z_HUFFMAN_ONLY||dt.level<2?St=0:dt.level<6?St=1:dt.level===6?St=2:St=3,Et|=St<<6,dt.strstart!==0&&(Et|=PRESET_DICT),Et+=31-Et%31,putShortMSB(dt,Et),dt.strstart!==0&&(putShortMSB(dt,lt.adler>>>16),putShortMSB(dt,lt.adler&65535)),lt.adler=1,dt.status=BUSY_STATE,flush_pending(lt),dt.pending!==0)return dt.last_flush=-1,Z_OK$3}if(dt.status===GZIP_STATE){if(lt.adler=0,put_byte(dt,31),put_byte(dt,139),put_byte(dt,8),dt.gzhead)put_byte(dt,(dt.gzhead.text?1:0)+(dt.gzhead.hcrc?2:0)+(dt.gzhead.extra?4:0)+(dt.gzhead.name?8:0)+(dt.gzhead.comment?16:0)),put_byte(dt,dt.gzhead.time&255),put_byte(dt,dt.gzhead.time>>8&255),put_byte(dt,dt.gzhead.time>>16&255),put_byte(dt,dt.gzhead.time>>24&255),put_byte(dt,dt.level===9?2:dt.strategy>=Z_HUFFMAN_ONLY||dt.level<2?4:0),put_byte(dt,dt.gzhead.os&255),dt.gzhead.extra&&dt.gzhead.extra.length&&(put_byte(dt,dt.gzhead.extra.length&255),put_byte(dt,dt.gzhead.extra.length>>8&255)),dt.gzhead.hcrc&&(lt.adler=crc32_1(lt.adler,dt.pending_buf,dt.pending,0)),dt.gzindex=0,dt.status=EXTRA_STATE;else if(put_byte(dt,0),put_byte(dt,0),put_byte(dt,0),put_byte(dt,0),put_byte(dt,0),put_byte(dt,dt.level===9?2:dt.strategy>=Z_HUFFMAN_ONLY||dt.level<2?4:0),put_byte(dt,OS_CODE),dt.status=BUSY_STATE,flush_pending(lt),dt.pending!==0)return dt.last_flush=-1,Z_OK$3}if(dt.status===EXTRA_STATE){if(dt.gzhead.extra){let Et=dt.pending,St=(dt.gzhead.extra.length&65535)-dt.gzindex;for(;dt.pending+St>dt.pending_buf_size;){let At=dt.pending_buf_size-dt.pending;if(dt.pending_buf.set(dt.gzhead.extra.subarray(dt.gzindex,dt.gzindex+At),dt.pending),dt.pending=dt.pending_buf_size,dt.gzhead.hcrc&&dt.pending>Et&&(lt.adler=crc32_1(lt.adler,dt.pending_buf,dt.pending-Et,Et)),dt.gzindex+=At,flush_pending(lt),dt.pending!==0)return dt.last_flush=-1,Z_OK$3;Et=0,St-=At}let Tt=new Uint8Array(dt.gzhead.extra);dt.pending_buf.set(Tt.subarray(dt.gzindex,dt.gzindex+St),dt.pending),dt.pending+=St,dt.gzhead.hcrc&&dt.pending>Et&&(lt.adler=crc32_1(lt.adler,dt.pending_buf,dt.pending-Et,Et)),dt.gzindex=0}dt.status=NAME_STATE}if(dt.status===NAME_STATE){if(dt.gzhead.name){let Et=dt.pending,St;do{if(dt.pending===dt.pending_buf_size){if(dt.gzhead.hcrc&&dt.pending>Et&&(lt.adler=crc32_1(lt.adler,dt.pending_buf,dt.pending-Et,Et)),flush_pending(lt),dt.pending!==0)return dt.last_flush=-1,Z_OK$3;Et=0}dt.gzindex<dt.gzhead.name.length?St=dt.gzhead.name.charCodeAt(dt.gzindex++)&255:St=0,put_byte(dt,St)}while(St!==0);dt.gzhead.hcrc&&dt.pending>Et&&(lt.adler=crc32_1(lt.adler,dt.pending_buf,dt.pending-Et,Et)),dt.gzindex=0}dt.status=COMMENT_STATE}if(dt.status===COMMENT_STATE){if(dt.gzhead.comment){let Et=dt.pending,St;do{if(dt.pending===dt.pending_buf_size){if(dt.gzhead.hcrc&&dt.pending>Et&&(lt.adler=crc32_1(lt.adler,dt.pending_buf,dt.pending-Et,Et)),flush_pending(lt),dt.pending!==0)return dt.last_flush=-1,Z_OK$3;Et=0}dt.gzindex<dt.gzhead.comment.length?St=dt.gzhead.comment.charCodeAt(dt.gzindex++)&255:St=0,put_byte(dt,St)}while(St!==0);dt.gzhead.hcrc&&dt.pending>Et&&(lt.adler=crc32_1(lt.adler,dt.pending_buf,dt.pending-Et,Et))}dt.status=HCRC_STATE}if(dt.status===HCRC_STATE){if(dt.gzhead.hcrc){if(dt.pending+2>dt.pending_buf_size&&(flush_pending(lt),dt.pending!==0))return dt.last_flush=-1,Z_OK$3;put_byte(dt,lt.adler&255),put_byte(dt,lt.adler>>8&255),lt.adler=0}if(dt.status=BUSY_STATE,flush_pending(lt),dt.pending!==0)return dt.last_flush=-1,Z_OK$3}if(lt.avail_in!==0||dt.lookahead!==0||ft!==Z_NO_FLUSH$2&&dt.status!==FINISH_STATE){let Et=dt.level===0?deflate_stored(dt,ft):dt.strategy===Z_HUFFMAN_ONLY?deflate_huff(dt,ft):dt.strategy===Z_RLE?deflate_rle(dt,ft):configuration_table[dt.level].func(dt,ft);if((Et===BS_FINISH_STARTED||Et===BS_FINISH_DONE)&&(dt.status=FINISH_STATE),Et===BS_NEED_MORE||Et===BS_FINISH_STARTED)return lt.avail_out===0&&(dt.last_flush=-1),Z_OK$3;if(Et===BS_BLOCK_DONE&&(ft===Z_PARTIAL_FLUSH?_tr_align(dt):ft!==Z_BLOCK$1&&(_tr_stored_block(dt,0,0,!1),ft===Z_FULL_FLUSH$1&&(zero(dt.head),dt.lookahead===0&&(dt.strstart=0,dt.block_start=0,dt.insert=0))),flush_pending(lt),lt.avail_out===0))return dt.last_flush=-1,Z_OK$3}return ft!==Z_FINISH$3?Z_OK$3:dt.wrap<=0?Z_STREAM_END$3:(dt.wrap===2?(put_byte(dt,lt.adler&255),put_byte(dt,lt.adler>>8&255),put_byte(dt,lt.adler>>16&255),put_byte(dt,lt.adler>>24&255),put_byte(dt,lt.total_in&255),put_byte(dt,lt.total_in>>8&255),put_byte(dt,lt.total_in>>16&255),put_byte(dt,lt.total_in>>24&255)):(putShortMSB(dt,lt.adler>>>16),putShortMSB(dt,lt.adler&65535)),flush_pending(lt),dt.wrap>0&&(dt.wrap=-dt.wrap),dt.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=lt=>{if(deflateStateCheck(lt))return Z_STREAM_ERROR$2;const ft=lt.state.status;return lt.state=null,ft===BUSY_STATE?err(lt,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(lt,ft)=>{let dt=ft.length;if(deflateStateCheck(lt))return Z_STREAM_ERROR$2;const vt=lt.state,Et=vt.wrap;if(Et===2||Et===1&&vt.status!==INIT_STATE||vt.lookahead)return Z_STREAM_ERROR$2;if(Et===1&&(lt.adler=adler32_1(lt.adler,ft,dt,0)),vt.wrap=0,dt>=vt.w_size){Et===0&&(zero(vt.head),vt.strstart=0,vt.block_start=0,vt.insert=0);let Ct=new Uint8Array(vt.w_size);Ct.set(ft.subarray(dt-vt.w_size,dt),0),ft=Ct,dt=vt.w_size}const St=lt.avail_in,Tt=lt.next_in,At=lt.input;for(lt.avail_in=dt,lt.next_in=0,lt.input=ft,fill_window(vt);vt.lookahead>=MIN_MATCH;){let Ct=vt.strstart,Rt=vt.lookahead-(MIN_MATCH-1);do vt.ins_h=HASH(vt,vt.ins_h,vt.window[Ct+MIN_MATCH-1]),vt.prev[Ct&vt.w_mask]=vt.head[vt.ins_h],vt.head[vt.ins_h]=Ct,Ct++;while(--Rt);vt.strstart=Ct,vt.lookahead=MIN_MATCH-1,fill_window(vt)}return vt.strstart+=vt.lookahead,vt.block_start=vt.strstart,vt.insert=vt.lookahead,vt.lookahead=0,vt.match_length=vt.prev_length=MIN_MATCH-1,vt.match_available=0,lt.next_in=Tt,lt.input=At,lt.avail_in=St,vt.wrap=Et,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(lt,ft)=>Object.prototype.hasOwnProperty.call(lt,ft);var assign=function(lt){const ft=Array.prototype.slice.call(arguments,1);for(;ft.length;){const dt=ft.shift();if(dt){if(typeof dt!="object")throw new TypeError(dt+"must be non-object");for(const vt in dt)_has(dt,vt)&&(lt[vt]=dt[vt])}}return lt},flattenChunks=lt=>{let ft=0;for(let vt=0,Et=lt.length;vt<Et;vt++)ft+=lt[vt].length;const dt=new Uint8Array(ft);for(let vt=0,Et=0,St=lt.length;vt<St;vt++){let Tt=lt[vt];dt.set(Tt,Et),Et+=Tt.length}return dt},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let lt=0;lt<256;lt++)_utf8len[lt]=lt>=252?6:lt>=248?5:lt>=240?4:lt>=224?3:lt>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=lt=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(lt);let ft,dt,vt,Et,St,Tt=lt.length,At=0;for(Et=0;Et<Tt;Et++)dt=lt.charCodeAt(Et),(dt&64512)===55296&&Et+1<Tt&&(vt=lt.charCodeAt(Et+1),(vt&64512)===56320&&(dt=65536+(dt-55296<<10)+(vt-56320),Et++)),At+=dt<128?1:dt<2048?2:dt<65536?3:4;for(ft=new Uint8Array(At),St=0,Et=0;St<At;Et++)dt=lt.charCodeAt(Et),(dt&64512)===55296&&Et+1<Tt&&(vt=lt.charCodeAt(Et+1),(vt&64512)===56320&&(dt=65536+(dt-55296<<10)+(vt-56320),Et++)),dt<128?ft[St++]=dt:dt<2048?(ft[St++]=192|dt>>>6,ft[St++]=128|dt&63):dt<65536?(ft[St++]=224|dt>>>12,ft[St++]=128|dt>>>6&63,ft[St++]=128|dt&63):(ft[St++]=240|dt>>>18,ft[St++]=128|dt>>>12&63,ft[St++]=128|dt>>>6&63,ft[St++]=128|dt&63);return ft};const buf2binstring=(lt,ft)=>{if(ft<65534&&lt.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,lt.length===ft?lt:lt.subarray(0,ft));let dt="";for(let vt=0;vt<ft;vt++)dt+=String.fromCharCode(lt[vt]);return dt};var buf2string=(lt,ft)=>{const dt=ft||lt.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(lt.subarray(0,ft));let vt,Et;const St=new Array(dt*2);for(Et=0,vt=0;vt<dt;){let Tt=lt[vt++];if(Tt<128){St[Et++]=Tt;continue}let At=_utf8len[Tt];if(At>4){St[Et++]=65533,vt+=At-1;continue}for(Tt&=At===2?31:At===3?15:7;At>1&&vt<dt;)Tt=Tt<<6|lt[vt++]&63,At--;if(At>1){St[Et++]=65533;continue}Tt<65536?St[Et++]=Tt:(Tt-=65536,St[Et++]=55296|Tt>>10&1023,St[Et++]=56320|Tt&1023)}return buf2binstring(St,Et)},utf8border=(lt,ft)=>{ft=ft||lt.length,ft>lt.length&&(ft=lt.length);let dt=ft-1;for(;dt>=0&&(lt[dt]&192)===128;)dt--;return dt<0||dt===0?ft:dt+_utf8len[lt[dt]]>ft?dt:ft},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(lt){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},lt||{});let ft=this.options;ft.raw&&ft.windowBits>0?ft.windowBits=-ft.windowBits:ft.gzip&&ft.windowBits>0&&ft.windowBits<16&&(ft.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let dt=deflate_1$2.deflateInit2(this.strm,ft.level,ft.method,ft.windowBits,ft.memLevel,ft.strategy);if(dt!==Z_OK$2)throw new Error(messages[dt]);if(ft.header&&deflate_1$2.deflateSetHeader(this.strm,ft.header),ft.dictionary){let vt;if(typeof ft.dictionary=="string"?vt=strings.string2buf(ft.dictionary):toString$1.call(ft.dictionary)==="[object ArrayBuffer]"?vt=new Uint8Array(ft.dictionary):vt=ft.dictionary,dt=deflate_1$2.deflateSetDictionary(this.strm,vt),dt!==Z_OK$2)throw new Error(messages[dt]);this._dict_set=!0}}Deflate$1.prototype.push=function(lt,ft){const dt=this.strm,vt=this.options.chunkSize;let Et,St;if(this.ended)return!1;for(ft===~~ft?St=ft:St=ft===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof lt=="string"?dt.input=strings.string2buf(lt):toString$1.call(lt)==="[object ArrayBuffer]"?dt.input=new Uint8Array(lt):dt.input=lt,dt.next_in=0,dt.avail_in=dt.input.length;;){if(dt.avail_out===0&&(dt.output=new Uint8Array(vt),dt.next_out=0,dt.avail_out=vt),(St===Z_SYNC_FLUSH||St===Z_FULL_FLUSH)&&dt.avail_out<=6){this.onData(dt.output.subarray(0,dt.next_out)),dt.avail_out=0;continue}if(Et=deflate_1$2.deflate(dt,St),Et===Z_STREAM_END$2)return dt.next_out>0&&this.onData(dt.output.subarray(0,dt.next_out)),Et=deflate_1$2.deflateEnd(this.strm),this.onEnd(Et),this.ended=!0,Et===Z_OK$2;if(dt.avail_out===0){this.onData(dt.output);continue}if(St>0&&dt.next_out>0){this.onData(dt.output.subarray(0,dt.next_out)),dt.avail_out=0;continue}if(dt.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(lt){this.chunks.push(lt)};Deflate$1.prototype.onEnd=function(lt){lt===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=lt,this.msg=this.strm.msg};function deflate$1(lt,ft){const dt=new Deflate$1(ft);if(dt.push(lt,!0),dt.err)throw dt.msg||messages[dt.err];return dt.result}function deflateRaw$1(lt,ft){return ft=ft||{},ft.raw=!0,deflate$1(lt,ft)}function gzip$1(lt,ft){return ft=ft||{},ft.gzip=!0,deflate$1(lt,ft)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,constants$1=constants$2,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,constants:constants$1};const BAD$1=16209,TYPE$1=16191;var inffast=function(ft,dt){let vt,Et,St,Tt,At,Ct,Rt,Dt,kt,Nt,zt,Wt,nr,Ut,Ht,Bt,Ft,tr,cr,Kt,Zt,rr,ar,sr;const dr=ft.state;vt=ft.next_in,ar=ft.input,Et=vt+(ft.avail_in-5),St=ft.next_out,sr=ft.output,Tt=St-(dt-ft.avail_out),At=St+(ft.avail_out-257),Ct=dr.dmax,Rt=dr.wsize,Dt=dr.whave,kt=dr.wnext,Nt=dr.window,zt=dr.hold,Wt=dr.bits,nr=dr.lencode,Ut=dr.distcode,Ht=(1<<dr.lenbits)-1,Bt=(1<<dr.distbits)-1;e:do{Wt<15&&(zt+=ar[vt++]<<Wt,Wt+=8,zt+=ar[vt++]<<Wt,Wt+=8),Ft=nr[zt&Ht];t:for(;;){if(tr=Ft>>>24,zt>>>=tr,Wt-=tr,tr=Ft>>>16&255,tr===0)sr[St++]=Ft&65535;else if(tr&16){cr=Ft&65535,tr&=15,tr&&(Wt<tr&&(zt+=ar[vt++]<<Wt,Wt+=8),cr+=zt&(1<<tr)-1,zt>>>=tr,Wt-=tr),Wt<15&&(zt+=ar[vt++]<<Wt,Wt+=8,zt+=ar[vt++]<<Wt,Wt+=8),Ft=Ut[zt&Bt];r:for(;;){if(tr=Ft>>>24,zt>>>=tr,Wt-=tr,tr=Ft>>>16&255,tr&16){if(Kt=Ft&65535,tr&=15,Wt<tr&&(zt+=ar[vt++]<<Wt,Wt+=8,Wt<tr&&(zt+=ar[vt++]<<Wt,Wt+=8)),Kt+=zt&(1<<tr)-1,Kt>Ct){ft.msg="invalid distance too far back",dr.mode=BAD$1;break e}if(zt>>>=tr,Wt-=tr,tr=St-Tt,Kt>tr){if(tr=Kt-tr,tr>Dt&&dr.sane){ft.msg="invalid distance too far back",dr.mode=BAD$1;break e}if(Zt=0,rr=Nt,kt===0){if(Zt+=Rt-tr,tr<cr){cr-=tr;do sr[St++]=Nt[Zt++];while(--tr);Zt=St-Kt,rr=sr}}else if(kt<tr){if(Zt+=Rt+kt-tr,tr-=kt,tr<cr){cr-=tr;do sr[St++]=Nt[Zt++];while(--tr);if(Zt=0,kt<cr){tr=kt,cr-=tr;do sr[St++]=Nt[Zt++];while(--tr);Zt=St-Kt,rr=sr}}}else if(Zt+=kt-tr,tr<cr){cr-=tr;do sr[St++]=Nt[Zt++];while(--tr);Zt=St-Kt,rr=sr}for(;cr>2;)sr[St++]=rr[Zt++],sr[St++]=rr[Zt++],sr[St++]=rr[Zt++],cr-=3;cr&&(sr[St++]=rr[Zt++],cr>1&&(sr[St++]=rr[Zt++]))}else{Zt=St-Kt;do sr[St++]=sr[Zt++],sr[St++]=sr[Zt++],sr[St++]=sr[Zt++],cr-=3;while(cr>2);cr&&(sr[St++]=sr[Zt++],cr>1&&(sr[St++]=sr[Zt++]))}}else if(tr&64){ft.msg="invalid distance code",dr.mode=BAD$1;break e}else{Ft=Ut[(Ft&65535)+(zt&(1<<tr)-1)];continue r}break}}else if(tr&64)if(tr&32){dr.mode=TYPE$1;break e}else{ft.msg="invalid literal/length code",dr.mode=BAD$1;break e}else{Ft=nr[(Ft&65535)+(zt&(1<<tr)-1)];continue t}break}}while(vt<Et&&St<At);cr=Wt>>3,vt-=cr,Wt-=cr<<3,zt&=(1<<Wt)-1,ft.next_in=vt,ft.next_out=St,ft.avail_in=vt<Et?5+(Et-vt):5-(vt-Et),ft.avail_out=St<At?257+(At-St):257-(St-At),dr.hold=zt,dr.bits=Wt};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(lt,ft,dt,vt,Et,St,Tt,At)=>{const Ct=At.bits;let Rt=0,Dt=0,kt=0,Nt=0,zt=0,Wt=0,nr=0,Ut=0,Ht=0,Bt=0,Ft,tr,cr,Kt,Zt,rr=null,ar;const sr=new Uint16Array(MAXBITS+1),dr=new Uint16Array(MAXBITS+1);let fr=null,pr,xr,lr;for(Rt=0;Rt<=MAXBITS;Rt++)sr[Rt]=0;for(Dt=0;Dt<vt;Dt++)sr[ft[dt+Dt]]++;for(zt=Ct,Nt=MAXBITS;Nt>=1&&sr[Nt]===0;Nt--);if(zt>Nt&&(zt=Nt),Nt===0)return Et[St++]=1<<24|64<<16|0,Et[St++]=1<<24|64<<16|0,At.bits=1,0;for(kt=1;kt<Nt&&sr[kt]===0;kt++);for(zt<kt&&(zt=kt),Ut=1,Rt=1;Rt<=MAXBITS;Rt++)if(Ut<<=1,Ut-=sr[Rt],Ut<0)return-1;if(Ut>0&&(lt===CODES$1||Nt!==1))return-1;for(dr[1]=0,Rt=1;Rt<MAXBITS;Rt++)dr[Rt+1]=dr[Rt]+sr[Rt];for(Dt=0;Dt<vt;Dt++)ft[dt+Dt]!==0&&(Tt[dr[ft[dt+Dt]]++]=Dt);if(lt===CODES$1?(rr=fr=Tt,ar=20):lt===LENS$1?(rr=lbase,fr=lext,ar=257):(rr=dbase,fr=dext,ar=0),Bt=0,Dt=0,Rt=kt,Zt=St,Wt=zt,nr=0,cr=-1,Ht=1<<zt,Kt=Ht-1,lt===LENS$1&&Ht>ENOUGH_LENS$1||lt===DISTS$1&&Ht>ENOUGH_DISTS$1)return 1;for(;;){pr=Rt-nr,Tt[Dt]+1<ar?(xr=0,lr=Tt[Dt]):Tt[Dt]>=ar?(xr=fr[Tt[Dt]-ar],lr=rr[Tt[Dt]-ar]):(xr=32+64,lr=0),Ft=1<<Rt-nr,tr=1<<Wt,kt=tr;do tr-=Ft,Et[Zt+(Bt>>nr)+tr]=pr<<24|xr<<16|lr|0;while(tr!==0);for(Ft=1<<Rt-1;Bt&Ft;)Ft>>=1;if(Ft!==0?(Bt&=Ft-1,Bt+=Ft):Bt=0,Dt++,--sr[Rt]===0){if(Rt===Nt)break;Rt=ft[dt+Tt[Dt]]}if(Rt>zt&&(Bt&Kt)!==cr){for(nr===0&&(nr=zt),Zt+=kt,Wt=Rt-nr,Ut=1<<Wt;Wt+nr<Nt&&(Ut-=sr[Wt+nr],!(Ut<=0));)Wt++,Ut<<=1;if(Ht+=1<<Wt,lt===LENS$1&&Ht>ENOUGH_LENS$1||lt===DISTS$1&&Ht>ENOUGH_DISTS$1)return 1;cr=Bt&Kt,Et[cr]=zt<<24|Wt<<16|Zt-St|0}}return Bt!==0&&(Et[Zt+Bt]=Rt-nr<<24|64<<16|0),At.bits=zt,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=lt=>(lt>>>24&255)+(lt>>>8&65280)+((lt&65280)<<8)+((lt&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=lt=>{if(!lt)return 1;const ft=lt.state;return!ft||ft.strm!==lt||ft.mode<HEAD||ft.mode>SYNC?1:0},inflateResetKeep=lt=>{if(inflateStateCheck(lt))return Z_STREAM_ERROR$1;const ft=lt.state;return lt.total_in=lt.total_out=ft.total=0,lt.msg="",ft.wrap&&(lt.adler=ft.wrap&1),ft.mode=HEAD,ft.last=0,ft.havedict=0,ft.flags=-1,ft.dmax=32768,ft.head=null,ft.hold=0,ft.bits=0,ft.lencode=ft.lendyn=new Int32Array(ENOUGH_LENS),ft.distcode=ft.distdyn=new Int32Array(ENOUGH_DISTS),ft.sane=1,ft.back=-1,Z_OK$1},inflateReset=lt=>{if(inflateStateCheck(lt))return Z_STREAM_ERROR$1;const ft=lt.state;return ft.wsize=0,ft.whave=0,ft.wnext=0,inflateResetKeep(lt)},inflateReset2=(lt,ft)=>{let dt;if(inflateStateCheck(lt))return Z_STREAM_ERROR$1;const vt=lt.state;return ft<0?(dt=0,ft=-ft):(dt=(ft>>4)+5,ft<48&&(ft&=15)),ft&&(ft<8||ft>15)?Z_STREAM_ERROR$1:(vt.window!==null&&vt.wbits!==ft&&(vt.window=null),vt.wrap=dt,vt.wbits=ft,inflateReset(lt))},inflateInit2=(lt,ft)=>{if(!lt)return Z_STREAM_ERROR$1;const dt=new InflateState;lt.state=dt,dt.strm=lt,dt.window=null,dt.mode=HEAD;const vt=inflateReset2(lt,ft);return vt!==Z_OK$1&&(lt.state=null),vt},inflateInit=lt=>inflateInit2(lt,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=lt=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let ft=0;for(;ft<144;)lt.lens[ft++]=8;for(;ft<256;)lt.lens[ft++]=9;for(;ft<280;)lt.lens[ft++]=7;for(;ft<288;)lt.lens[ft++]=8;for(inftrees(LENS,lt.lens,0,288,lenfix,0,lt.work,{bits:9}),ft=0;ft<32;)lt.lens[ft++]=5;inftrees(DISTS,lt.lens,0,32,distfix,0,lt.work,{bits:5}),virgin=!1}lt.lencode=lenfix,lt.lenbits=9,lt.distcode=distfix,lt.distbits=5},updatewindow=(lt,ft,dt,vt)=>{let Et;const St=lt.state;return St.window===null&&(St.wsize=1<<St.wbits,St.wnext=0,St.whave=0,St.window=new Uint8Array(St.wsize)),vt>=St.wsize?(St.window.set(ft.subarray(dt-St.wsize,dt),0),St.wnext=0,St.whave=St.wsize):(Et=St.wsize-St.wnext,Et>vt&&(Et=vt),St.window.set(ft.subarray(dt-vt,dt-vt+Et),St.wnext),vt-=Et,vt?(St.window.set(ft.subarray(dt-vt,dt),0),St.wnext=vt,St.whave=St.wsize):(St.wnext+=Et,St.wnext===St.wsize&&(St.wnext=0),St.whave<St.wsize&&(St.whave+=Et))),0},inflate$2=(lt,ft)=>{let dt,vt,Et,St,Tt,At,Ct,Rt,Dt,kt,Nt,zt,Wt,nr,Ut=0,Ht,Bt,Ft,tr,cr,Kt,Zt,rr;const ar=new Uint8Array(4);let sr,dr;const fr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(lt)||!lt.output||!lt.input&&lt.avail_in!==0)return Z_STREAM_ERROR$1;dt=lt.state,dt.mode===TYPE&&(dt.mode=TYPEDO),Tt=lt.next_out,Et=lt.output,Ct=lt.avail_out,St=lt.next_in,vt=lt.input,At=lt.avail_in,Rt=dt.hold,Dt=dt.bits,kt=At,Nt=Ct,rr=Z_OK$1;e:for(;;)switch(dt.mode){case HEAD:if(dt.wrap===0){dt.mode=TYPEDO;break}for(;Dt<16;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}if(dt.wrap&2&&Rt===35615){dt.wbits===0&&(dt.wbits=15),dt.check=0,ar[0]=Rt&255,ar[1]=Rt>>>8&255,dt.check=crc32_1(dt.check,ar,2,0),Rt=0,Dt=0,dt.mode=FLAGS;break}if(dt.head&&(dt.head.done=!1),!(dt.wrap&1)||(((Rt&255)<<8)+(Rt>>8))%31){lt.msg="incorrect header check",dt.mode=BAD;break}if((Rt&15)!==Z_DEFLATED){lt.msg="unknown compression method",dt.mode=BAD;break}if(Rt>>>=4,Dt-=4,Zt=(Rt&15)+8,dt.wbits===0&&(dt.wbits=Zt),Zt>15||Zt>dt.wbits){lt.msg="invalid window size",dt.mode=BAD;break}dt.dmax=1<<dt.wbits,dt.flags=0,lt.adler=dt.check=1,dt.mode=Rt&512?DICTID:TYPE,Rt=0,Dt=0;break;case FLAGS:for(;Dt<16;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}if(dt.flags=Rt,(dt.flags&255)!==Z_DEFLATED){lt.msg="unknown compression method",dt.mode=BAD;break}if(dt.flags&57344){lt.msg="unknown header flags set",dt.mode=BAD;break}dt.head&&(dt.head.text=Rt>>8&1),dt.flags&512&&dt.wrap&4&&(ar[0]=Rt&255,ar[1]=Rt>>>8&255,dt.check=crc32_1(dt.check,ar,2,0)),Rt=0,Dt=0,dt.mode=TIME;case TIME:for(;Dt<32;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}dt.head&&(dt.head.time=Rt),dt.flags&512&&dt.wrap&4&&(ar[0]=Rt&255,ar[1]=Rt>>>8&255,ar[2]=Rt>>>16&255,ar[3]=Rt>>>24&255,dt.check=crc32_1(dt.check,ar,4,0)),Rt=0,Dt=0,dt.mode=OS;case OS:for(;Dt<16;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}dt.head&&(dt.head.xflags=Rt&255,dt.head.os=Rt>>8),dt.flags&512&&dt.wrap&4&&(ar[0]=Rt&255,ar[1]=Rt>>>8&255,dt.check=crc32_1(dt.check,ar,2,0)),Rt=0,Dt=0,dt.mode=EXLEN;case EXLEN:if(dt.flags&1024){for(;Dt<16;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}dt.length=Rt,dt.head&&(dt.head.extra_len=Rt),dt.flags&512&&dt.wrap&4&&(ar[0]=Rt&255,ar[1]=Rt>>>8&255,dt.check=crc32_1(dt.check,ar,2,0)),Rt=0,Dt=0}else dt.head&&(dt.head.extra=null);dt.mode=EXTRA;case EXTRA:if(dt.flags&1024&&(zt=dt.length,zt>At&&(zt=At),zt&&(dt.head&&(Zt=dt.head.extra_len-dt.length,dt.head.extra||(dt.head.extra=new Uint8Array(dt.head.extra_len)),dt.head.extra.set(vt.subarray(St,St+zt),Zt)),dt.flags&512&&dt.wrap&4&&(dt.check=crc32_1(dt.check,vt,zt,St)),At-=zt,St+=zt,dt.length-=zt),dt.length))break e;dt.length=0,dt.mode=NAME;case NAME:if(dt.flags&2048){if(At===0)break e;zt=0;do Zt=vt[St+zt++],dt.head&&Zt&&dt.length<65536&&(dt.head.name+=String.fromCharCode(Zt));while(Zt&&zt<At);if(dt.flags&512&&dt.wrap&4&&(dt.check=crc32_1(dt.check,vt,zt,St)),At-=zt,St+=zt,Zt)break e}else dt.head&&(dt.head.name=null);dt.length=0,dt.mode=COMMENT;case COMMENT:if(dt.flags&4096){if(At===0)break e;zt=0;do Zt=vt[St+zt++],dt.head&&Zt&&dt.length<65536&&(dt.head.comment+=String.fromCharCode(Zt));while(Zt&&zt<At);if(dt.flags&512&&dt.wrap&4&&(dt.check=crc32_1(dt.check,vt,zt,St)),At-=zt,St+=zt,Zt)break e}else dt.head&&(dt.head.comment=null);dt.mode=HCRC;case HCRC:if(dt.flags&512){for(;Dt<16;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}if(dt.wrap&4&&Rt!==(dt.check&65535)){lt.msg="header crc mismatch",dt.mode=BAD;break}Rt=0,Dt=0}dt.head&&(dt.head.hcrc=dt.flags>>9&1,dt.head.done=!0),lt.adler=dt.check=0,dt.mode=TYPE;break;case DICTID:for(;Dt<32;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}lt.adler=dt.check=zswap32(Rt),Rt=0,Dt=0,dt.mode=DICT;case DICT:if(dt.havedict===0)return lt.next_out=Tt,lt.avail_out=Ct,lt.next_in=St,lt.avail_in=At,dt.hold=Rt,dt.bits=Dt,Z_NEED_DICT$1;lt.adler=dt.check=1,dt.mode=TYPE;case TYPE:if(ft===Z_BLOCK||ft===Z_TREES)break e;case TYPEDO:if(dt.last){Rt>>>=Dt&7,Dt-=Dt&7,dt.mode=CHECK;break}for(;Dt<3;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}switch(dt.last=Rt&1,Rt>>>=1,Dt-=1,Rt&3){case 0:dt.mode=STORED;break;case 1:if(fixedtables(dt),dt.mode=LEN_,ft===Z_TREES){Rt>>>=2,Dt-=2;break e}break;case 2:dt.mode=TABLE;break;case 3:lt.msg="invalid block type",dt.mode=BAD}Rt>>>=2,Dt-=2;break;case STORED:for(Rt>>>=Dt&7,Dt-=Dt&7;Dt<32;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}if((Rt&65535)!==(Rt>>>16^65535)){lt.msg="invalid stored block lengths",dt.mode=BAD;break}if(dt.length=Rt&65535,Rt=0,Dt=0,dt.mode=COPY_,ft===Z_TREES)break e;case COPY_:dt.mode=COPY;case COPY:if(zt=dt.length,zt){if(zt>At&&(zt=At),zt>Ct&&(zt=Ct),zt===0)break e;Et.set(vt.subarray(St,St+zt),Tt),At-=zt,St+=zt,Ct-=zt,Tt+=zt,dt.length-=zt;break}dt.mode=TYPE;break;case TABLE:for(;Dt<14;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}if(dt.nlen=(Rt&31)+257,Rt>>>=5,Dt-=5,dt.ndist=(Rt&31)+1,Rt>>>=5,Dt-=5,dt.ncode=(Rt&15)+4,Rt>>>=4,Dt-=4,dt.nlen>286||dt.ndist>30){lt.msg="too many length or distance symbols",dt.mode=BAD;break}dt.have=0,dt.mode=LENLENS;case LENLENS:for(;dt.have<dt.ncode;){for(;Dt<3;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}dt.lens[fr[dt.have++]]=Rt&7,Rt>>>=3,Dt-=3}for(;dt.have<19;)dt.lens[fr[dt.have++]]=0;if(dt.lencode=dt.lendyn,dt.lenbits=7,sr={bits:dt.lenbits},rr=inftrees(CODES,dt.lens,0,19,dt.lencode,0,dt.work,sr),dt.lenbits=sr.bits,rr){lt.msg="invalid code lengths set",dt.mode=BAD;break}dt.have=0,dt.mode=CODELENS;case CODELENS:for(;dt.have<dt.nlen+dt.ndist;){for(;Ut=dt.lencode[Rt&(1<<dt.lenbits)-1],Ht=Ut>>>24,Bt=Ut>>>16&255,Ft=Ut&65535,!(Ht<=Dt);){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}if(Ft<16)Rt>>>=Ht,Dt-=Ht,dt.lens[dt.have++]=Ft;else{if(Ft===16){for(dr=Ht+2;Dt<dr;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}if(Rt>>>=Ht,Dt-=Ht,dt.have===0){lt.msg="invalid bit length repeat",dt.mode=BAD;break}Zt=dt.lens[dt.have-1],zt=3+(Rt&3),Rt>>>=2,Dt-=2}else if(Ft===17){for(dr=Ht+3;Dt<dr;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}Rt>>>=Ht,Dt-=Ht,Zt=0,zt=3+(Rt&7),Rt>>>=3,Dt-=3}else{for(dr=Ht+7;Dt<dr;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}Rt>>>=Ht,Dt-=Ht,Zt=0,zt=11+(Rt&127),Rt>>>=7,Dt-=7}if(dt.have+zt>dt.nlen+dt.ndist){lt.msg="invalid bit length repeat",dt.mode=BAD;break}for(;zt--;)dt.lens[dt.have++]=Zt}}if(dt.mode===BAD)break;if(dt.lens[256]===0){lt.msg="invalid code -- missing end-of-block",dt.mode=BAD;break}if(dt.lenbits=9,sr={bits:dt.lenbits},rr=inftrees(LENS,dt.lens,0,dt.nlen,dt.lencode,0,dt.work,sr),dt.lenbits=sr.bits,rr){lt.msg="invalid literal/lengths set",dt.mode=BAD;break}if(dt.distbits=6,dt.distcode=dt.distdyn,sr={bits:dt.distbits},rr=inftrees(DISTS,dt.lens,dt.nlen,dt.ndist,dt.distcode,0,dt.work,sr),dt.distbits=sr.bits,rr){lt.msg="invalid distances set",dt.mode=BAD;break}if(dt.mode=LEN_,ft===Z_TREES)break e;case LEN_:dt.mode=LEN;case LEN:if(At>=6&&Ct>=258){lt.next_out=Tt,lt.avail_out=Ct,lt.next_in=St,lt.avail_in=At,dt.hold=Rt,dt.bits=Dt,inffast(lt,Nt),Tt=lt.next_out,Et=lt.output,Ct=lt.avail_out,St=lt.next_in,vt=lt.input,At=lt.avail_in,Rt=dt.hold,Dt=dt.bits,dt.mode===TYPE&&(dt.back=-1);break}for(dt.back=0;Ut=dt.lencode[Rt&(1<<dt.lenbits)-1],Ht=Ut>>>24,Bt=Ut>>>16&255,Ft=Ut&65535,!(Ht<=Dt);){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}if(Bt&&!(Bt&240)){for(tr=Ht,cr=Bt,Kt=Ft;Ut=dt.lencode[Kt+((Rt&(1<<tr+cr)-1)>>tr)],Ht=Ut>>>24,Bt=Ut>>>16&255,Ft=Ut&65535,!(tr+Ht<=Dt);){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}Rt>>>=tr,Dt-=tr,dt.back+=tr}if(Rt>>>=Ht,Dt-=Ht,dt.back+=Ht,dt.length=Ft,Bt===0){dt.mode=LIT;break}if(Bt&32){dt.back=-1,dt.mode=TYPE;break}if(Bt&64){lt.msg="invalid literal/length code",dt.mode=BAD;break}dt.extra=Bt&15,dt.mode=LENEXT;case LENEXT:if(dt.extra){for(dr=dt.extra;Dt<dr;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}dt.length+=Rt&(1<<dt.extra)-1,Rt>>>=dt.extra,Dt-=dt.extra,dt.back+=dt.extra}dt.was=dt.length,dt.mode=DIST;case DIST:for(;Ut=dt.distcode[Rt&(1<<dt.distbits)-1],Ht=Ut>>>24,Bt=Ut>>>16&255,Ft=Ut&65535,!(Ht<=Dt);){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}if(!(Bt&240)){for(tr=Ht,cr=Bt,Kt=Ft;Ut=dt.distcode[Kt+((Rt&(1<<tr+cr)-1)>>tr)],Ht=Ut>>>24,Bt=Ut>>>16&255,Ft=Ut&65535,!(tr+Ht<=Dt);){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}Rt>>>=tr,Dt-=tr,dt.back+=tr}if(Rt>>>=Ht,Dt-=Ht,dt.back+=Ht,Bt&64){lt.msg="invalid distance code",dt.mode=BAD;break}dt.offset=Ft,dt.extra=Bt&15,dt.mode=DISTEXT;case DISTEXT:if(dt.extra){for(dr=dt.extra;Dt<dr;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}dt.offset+=Rt&(1<<dt.extra)-1,Rt>>>=dt.extra,Dt-=dt.extra,dt.back+=dt.extra}if(dt.offset>dt.dmax){lt.msg="invalid distance too far back",dt.mode=BAD;break}dt.mode=MATCH;case MATCH:if(Ct===0)break e;if(zt=Nt-Ct,dt.offset>zt){if(zt=dt.offset-zt,zt>dt.whave&&dt.sane){lt.msg="invalid distance too far back",dt.mode=BAD;break}zt>dt.wnext?(zt-=dt.wnext,Wt=dt.wsize-zt):Wt=dt.wnext-zt,zt>dt.length&&(zt=dt.length),nr=dt.window}else nr=Et,Wt=Tt-dt.offset,zt=dt.length;zt>Ct&&(zt=Ct),Ct-=zt,dt.length-=zt;do Et[Tt++]=nr[Wt++];while(--zt);dt.length===0&&(dt.mode=LEN);break;case LIT:if(Ct===0)break e;Et[Tt++]=dt.length,Ct--,dt.mode=LEN;break;case CHECK:if(dt.wrap){for(;Dt<32;){if(At===0)break e;At--,Rt|=vt[St++]<<Dt,Dt+=8}if(Nt-=Ct,lt.total_out+=Nt,dt.total+=Nt,dt.wrap&4&&Nt&&(lt.adler=dt.check=dt.flags?crc32_1(dt.check,Et,Nt,Tt-Nt):adler32_1(dt.check,Et,Nt,Tt-Nt)),Nt=Ct,dt.wrap&4&&(dt.flags?Rt:zswap32(Rt))!==dt.check){lt.msg="incorrect data check",dt.mode=BAD;break}Rt=0,Dt=0}dt.mode=LENGTH;case LENGTH:if(dt.wrap&&dt.flags){for(;Dt<32;){if(At===0)break e;At--,Rt+=vt[St++]<<Dt,Dt+=8}if(dt.wrap&4&&Rt!==(dt.total&4294967295)){lt.msg="incorrect length check",dt.mode=BAD;break}Rt=0,Dt=0}dt.mode=DONE;case DONE:rr=Z_STREAM_END$1;break e;case BAD:rr=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return lt.next_out=Tt,lt.avail_out=Ct,lt.next_in=St,lt.avail_in=At,dt.hold=Rt,dt.bits=Dt,(dt.wsize||Nt!==lt.avail_out&&dt.mode<BAD&&(dt.mode<CHECK||ft!==Z_FINISH$1))&&updatewindow(lt,lt.output,lt.next_out,Nt-lt.avail_out),kt-=lt.avail_in,Nt-=lt.avail_out,lt.total_in+=kt,lt.total_out+=Nt,dt.total+=Nt,dt.wrap&4&&Nt&&(lt.adler=dt.check=dt.flags?crc32_1(dt.check,Et,Nt,lt.next_out-Nt):adler32_1(dt.check,Et,Nt,lt.next_out-Nt)),lt.data_type=dt.bits+(dt.last?64:0)+(dt.mode===TYPE?128:0)+(dt.mode===LEN_||dt.mode===COPY_?256:0),(kt===0&&Nt===0||ft===Z_FINISH$1)&&rr===Z_OK$1&&(rr=Z_BUF_ERROR),rr},inflateEnd=lt=>{if(inflateStateCheck(lt))return Z_STREAM_ERROR$1;let ft=lt.state;return ft.window&&(ft.window=null),lt.state=null,Z_OK$1},inflateGetHeader=(lt,ft)=>{if(inflateStateCheck(lt))return Z_STREAM_ERROR$1;const dt=lt.state;return dt.wrap&2?(dt.head=ft,ft.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(lt,ft)=>{const dt=ft.length;let vt,Et,St;return inflateStateCheck(lt)||(vt=lt.state,vt.wrap!==0&&vt.mode!==DICT)?Z_STREAM_ERROR$1:vt.mode===DICT&&(Et=1,Et=adler32_1(Et,ft,dt,0),Et!==vt.check)?Z_DATA_ERROR$1:(St=updatewindow(lt,ft,dt,dt),St?(vt.mode=MEM,Z_MEM_ERROR$1):(vt.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(lt){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},lt||{});const ft=this.options;ft.raw&&ft.windowBits>=0&&ft.windowBits<16&&(ft.windowBits=-ft.windowBits,ft.windowBits===0&&(ft.windowBits=-15)),ft.windowBits>=0&&ft.windowBits<16&&!(lt&&lt.windowBits)&&(ft.windowBits+=32),ft.windowBits>15&&ft.windowBits<48&&(ft.windowBits&15||(ft.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let dt=inflate_1$2.inflateInit2(this.strm,ft.windowBits);if(dt!==Z_OK)throw new Error(messages[dt]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),ft.dictionary&&(typeof ft.dictionary=="string"?ft.dictionary=strings.string2buf(ft.dictionary):toString.call(ft.dictionary)==="[object ArrayBuffer]"&&(ft.dictionary=new Uint8Array(ft.dictionary)),ft.raw&&(dt=inflate_1$2.inflateSetDictionary(this.strm,ft.dictionary),dt!==Z_OK)))throw new Error(messages[dt])}Inflate$1.prototype.push=function(lt,ft){const dt=this.strm,vt=this.options.chunkSize,Et=this.options.dictionary;let St,Tt,At;if(this.ended)return!1;for(ft===~~ft?Tt=ft:Tt=ft===!0?Z_FINISH:Z_NO_FLUSH,toString.call(lt)==="[object ArrayBuffer]"?dt.input=new Uint8Array(lt):dt.input=lt,dt.next_in=0,dt.avail_in=dt.input.length;;){for(dt.avail_out===0&&(dt.output=new Uint8Array(vt),dt.next_out=0,dt.avail_out=vt),St=inflate_1$2.inflate(dt,Tt),St===Z_NEED_DICT&&Et&&(St=inflate_1$2.inflateSetDictionary(dt,Et),St===Z_OK?St=inflate_1$2.inflate(dt,Tt):St===Z_DATA_ERROR&&(St=Z_NEED_DICT));dt.avail_in>0&&St===Z_STREAM_END&&dt.state.wrap>0&&lt[dt.next_in]!==0;)inflate_1$2.inflateReset(dt),St=inflate_1$2.inflate(dt,Tt);switch(St){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(St),this.ended=!0,!1}if(At=dt.avail_out,dt.next_out&&(dt.avail_out===0||St===Z_STREAM_END))if(this.options.to==="string"){let Ct=strings.utf8border(dt.output,dt.next_out),Rt=dt.next_out-Ct,Dt=strings.buf2string(dt.output,Ct);dt.next_out=Rt,dt.avail_out=vt-Rt,Rt&&dt.output.set(dt.output.subarray(Ct,Ct+Rt),0),this.onData(Dt)}else this.onData(dt.output.length===dt.next_out?dt.output:dt.output.subarray(0,dt.next_out));if(!(St===Z_OK&&At===0)){if(St===Z_STREAM_END)return St=inflate_1$2.inflateEnd(this.strm),this.onEnd(St),this.ended=!0,!0;if(dt.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(lt){this.chunks.push(lt)};Inflate$1.prototype.onEnd=function(lt){lt===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=lt,this.msg=this.strm.msg};function inflate$1(lt,ft){const dt=new Inflate$1(ft);if(dt.push(lt),dt.err)throw dt.msg||messages[dt.err];return dt.result}function inflateRaw$1(lt,ft){return ft=ft||{},ft.raw=!0,inflate$1(lt,ft)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate,deflate_1=deflate,deflateRaw_1=deflateRaw,gzip_1=gzip,Inflate_1=Inflate,inflate_1=inflate,inflateRaw_1=inflateRaw,ungzip_1=ungzip,constants_1=constants$2,pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1};function fromBinary(lt){const ft=new Uint8Array(lt.length);return[...lt].forEach((dt,vt)=>{ft[vt]=dt.charCodeAt(0)}),ft}function importV2Data({data:lt,time:ft}){const dt=localStorage.getItem("mw-migration-date");return dt&&new Date(dt)>=ft?!1:(lt.bookmarks&&localStorage.setItem("mw-bookmarks",JSON.stringify(lt.bookmarks)),lt.videoProgress&&localStorage.setItem("video-progress",JSON.stringify(lt.videoProgress)),localStorage.setItem("mw-migration-date",ft.toISOString()),!0)}function EmbedMigration(){let lt=!1;const ft=dt=>{const vt=dt.data;vt&&vt.isMigrationData&&!lt&&(lt=!0,importV2Data({data:vt.data,time:vt.date})&&window.location.reload())};return reactExports.useEffect(()=>(window.addEventListener("message",ft),()=>{window.removeEventListener("message",ft)})),jsx("iframe",{src:"https://movie.squeezebox.dev",hidden:!0})}function V2MigrationView(){const[lt,ft]=reactExports.useState(!1);return reactExports.useEffect(()=>{const dt=new URLSearchParams(window.location.search??"");if(!dt.has("m-time")||!dt.has("m-data")){ft(!0);return}const vt=JSON.parse(pako.inflate(fromBinary(atob(dt.get("m-data"))),{to:"string"})),Et=new Date(dt.get("m-time"));importV2Data({data:vt,time:Et}),ft(!0)},[]),reactExports.useEffect(()=>{if(!lt)return;const dt=new URL(window.location.href),vt=[];dt.searchParams.forEach((Et,St)=>vt.push(St)),vt.forEach(Et=>dt.searchParams.delete(Et)),dt.searchParams.append("migrated","1"),dt.hash=conf().NORMAL_ROUTER?"":`/search/${MWMediaType.MOVIE}`,dt.pathname=conf().NORMAL_ROUTER?`/search/${MWMediaType.MOVIE}`:"",window.location.href=dt.toString()},[lt]),null}function Bookmarks(){const{t:lt}=useTranslation(),{getFilteredBookmarks:ft,setItemBookmark:dt}=useBookmarkContext(),vt=ft(),[Et,St]=reactExports.useState(!1),[Tt]=useAutoAnimate(),{watched:At}=useWatchedContext(),Ct=reactExports.useMemo(()=>vt.map(Rt=>({...Rt,watched:At.items.sort((Dt,kt)=>kt.watchedAt-Dt.watchedAt).find(Dt=>Dt.item.meta.id===Rt.id)})).sort((Rt,Dt)=>{var kt,Nt;return(((kt=Dt.watched)==null?void 0:kt.watchedAt)||0)-(((Nt=Rt.watched)==null?void 0:Nt.watchedAt)||0)}),[At.items,vt]);return vt.length===0?null:jsxs("div",{children:[jsx(SectionHeading,{title:lt("search.bookmarks")||"Bookmarks",icon:Icons.BOOKMARK,children:jsx(EditButton,{editing:Et,onEdit:St})}),jsx(MediaGrid,{ref:Tt,children:Ct.map(Rt=>jsx(WatchedMediaCard,{media:Rt,closable:Et,onClose:()=>dt(Rt,!1)},Rt.id))})]})}function Watched(){const{t:lt}=useTranslation(),{getFilteredBookmarks:ft}=useBookmarkContext(),{getFilteredWatched:dt,removeProgress:vt}=useWatchedContext(),[Et,St]=reactExports.useState(!1),[Tt]=useAutoAnimate(),At=ft(),Ct=dt().filter(Rt=>!getIfBookmarkedFromPortable(At,Rt.item.meta));return Ct.length===0?null:jsxs("div",{children:[jsx(SectionHeading,{title:lt("search.continueWatching")||"Continue Watching",icon:Icons.CLOCK,children:jsx(EditButton,{editing:Et,onEdit:St})}),jsx(MediaGrid,{ref:Tt,children:Ct.map(Rt=>jsx(WatchedMediaCard,{media:Rt.item.meta,closable:Et,onClose:()=>vt(Rt.item.meta.id)},Rt.item.meta.id))})]})}function NewDomainModal(){const[lt,ft]=reactExports.useState(new URLSearchParams(window.location.search).get("migrated")==="1"||localStorage.getItem("mw-show-domain-modal")==="true"),[dt,vt]=reactExports.useState(!1),Et=useHistory(),{t:St}=useTranslation(),Tt=reactExports.useCallback(()=>{localStorage.setItem("mw-show-domain-modal","false"),ft(!1)},[]);reactExports.useEffect(()=>{const Nt=new URLSearchParams(Et.location.search);Nt.delete("migrated"),Nt.get("migrated")==="1"&&localStorage.setItem("mw-show-domain-modal","true"),Et.replace({search:Nt.toString()})},[Et]),reactExports.useEffect(()=>{setTimeout(()=>{vt(!0)},500)},[]);const At=1e3*60*60*24,Ct=["January","February","March","April","May","June","July","August","September","October","November","December"],Rt=new Date(localStorage.getItem("firstVisitToSite")||Date.now());localStorage.setItem("firstVisitToSite",Rt.toISOString());const Dt=new Date(Rt.getTime()+14*At),kt=`${Dt.getDate()} ${Ct[Dt.getMonth()]} ${Dt.getFullYear()}`;return jsx(Modal,{show:lt&&dt,children:jsxs(ModalCard,{children:[jsxs("div",{className:"mb-12",children:[jsx("div",{className:"absolute left-0 top-0 h-[300px] w-full -translate-y-1/2 opacity-50",style:{backgroundImage:"radial-gradient(ellipse 70% 9rem, #7831C1 0%, transparent 100%)"}}),jsx("div",{className:"relative flex items-center justify-center",children:jsx("div",{className:"rounded-full bg-bink-200 py-4 px-12 text-center text-sm font-bold text-white md:text-xl",children:St("v3.newDomain")})})]}),jsxs("div",{className:"space-y-6",children:[jsx("h2",{className:"text-2xl font-bold text-white",children:St("v3.newSiteTitle")}),jsx("p",{className:"leading-7",children:jsxs(Trans,{i18nKey:"v3.newDomainText",values:{date:kt},children:[jsx("span",{className:"text-slate-300"}),jsx("span",{className:"font-bold text-white"})]})}),jsx("p",{children:St("v3.tireless")})]}),jsx("div",{className:"mt-16 mb-6 flex items-center justify-center",children:jsx(Button,{icon:Icons.PLAY,onClick:()=>Tt(),children:St("v3.leaveAnnouncement")})})]})})}function HomeView(){return jsxs("div",{className:"mb-16",children:[jsx(EmbedMigration,{}),jsx(NewDomainModal,{}),jsx(Bookmarks,{}),jsx(Watched,{})]})}function SearchLoadingView(){const{t:lt}=useTranslation(),[ft]=useSearchQuery();return jsx(Loading,{className:"mt-40 mb-24 ",text:lt(`search.loading_${ft.type}`)||lt("search.loading")||"Fetching your favourite shows..."})}function SearchSuffix(lt){const{t:ft}=useTranslation(),dt=lt.failed?Icons.WARNING:Icons.EYE_SLASH;return jsxs("div",{className:"mt-40 mb-24  flex flex-col items-center justify-center space-y-3 text-center",children:[jsx(IconPatch,{icon:dt,className:`text-xl ${lt.failed?"text-red-400":"text-bink-600"}`}),lt.failed?null:jsx("div",{children:(lt.results??0)>0?jsx("p",{children:ft("search.allResults")}):jsx("p",{children:ft("search.noResults")})}),lt.failed?jsx("div",{children:jsx("p",{children:ft("search.allFailed")})}):null]})}function SearchResultsView({searchQuery:lt}){const{t:ft}=useTranslation(),[dt,vt]=reactExports.useState([]),[Et,St,Tt]=useLoading(At=>searchForMedia(At));return reactExports.useEffect(()=>{async function At(Ct){const Rt=await Et(Ct);Rt&&vt(Rt)}lt.searchQuery!==""&&At(lt)},[lt,Et]),St?jsx(SearchLoadingView,{}):Tt?jsx(SearchSuffix,{failed:!0}):dt?jsxs("div",{children:[dt.length>0?jsxs("div",{children:[jsx(SectionHeading,{title:ft("search.headingTitle")||"Search results",icon:Icons.SEARCH}),jsx(MediaGrid,{children:dt.map(At=>jsx(WatchedMediaCard,{media:At},At.id.toString()))})]}):null,jsx(SearchSuffix,{results:dt.length})]}):null}function SearchResultsPartial({search:lt}){const[ft,dt]=reactExports.useState(!1),[vt,Et]=reactExports.useState(!1),St=useDebounce(lt,500);return reactExports.useEffect(()=>{dt(lt.searchQuery!==""),Et(lt.searchQuery!=="")},[lt]),reactExports.useEffect(()=>{Et(!1)},[St]),reactExports.useMemo(()=>vt?jsx(SearchLoadingView,{}):ft?jsx(SearchResultsView,{searchQuery:St}):jsx(HomeView,{}),[vt,ft,St])}function SearchView(){const{t:lt}=useTranslation(),[ft,dt,vt]=useSearchQuery(),[Et,St]=reactExports.useState(!1),Tt=useBannerSize(),At=reactExports.useCallback(({status:Ct})=>St(Ct===Sticky.STATUS_FIXED),[St]);return jsxs(Fragment,{children:[jsxs("div",{className:"relative z-10 mb-16 sm:mb-24",children:[jsx(HelmetExport,{children:jsx("title",{children:lt("global.name")})}),jsx(Navigation,{bg:Et}),jsx(ThinContainer,{children:jsxs("div",{className:"mt-44 space-y-16 text-center",children:[jsx("div",{className:"absolute left-0 bottom-0 right-0 flex h-0 justify-center",children:jsx("div",{className:"absolute bottom-4 h-[100vh] w-[3000px] rounded-[100%] bg-denim-300 md:w-[200vw]"})}),jsx("div",{className:"relative z-10 mb-16",children:jsx(Title,{className:"mx-auto max-w-xs",children:lt("search.title")})}),jsx("div",{className:"relative z-30",children:jsx(Sticky,{enabled:!0,top:16+Tt,onStateChange:At,children:jsx(SearchBarInput,{onChange:dt,value:ft,onUnFocus:vt,placeholder:lt("search.placeholder")||"What do you want to watch?"})})})]})})]}),jsx(WideContainer,{children:jsx(SearchResultsPartial,{search:ft})})]})}function Banner(lt){const[ft]=useBanner("internet"),dt={error:"bg-[#C93957] text-white"},vt={error:Icons.CIRCLE_EXCLAMATION};return jsx("div",{ref:ft,children:jsx("div",{className:[dt[lt.type],"flex items-center justify-center p-1"].join(" "),children:jsxs("div",{className:"flex items-center space-x-3",children:[jsx(Icon,{icon:vt[lt.type]}),jsx("div",{children:lt.children})]})})})}function useIsOnline(){const[lt,ft]=reactExports.useState(!0),dt=reactExports.useRef(!0);return reactExports.useEffect(()=>{let vt=0,Et=null;const St=setInterval(()=>{if(vt+=1,dt.current&&vt<10)return;vt=0,Et&&Et.abort(),Et=new AbortController;const Tt=Et.signal;fetch("/ping.txt",{signal:Tt}).then(()=>{ft(!0),dt.current=!0}).catch(At=>{At.name!=="AbortError"&&(ft(!1),dt.current=!1)})},5e3);return()=>{clearInterval(St),Et&&Et.abort()}},[]),lt}function Layout(lt){const{t:ft}=useTranslation(),dt=useIsOnline(),vt=useBannerSize();return jsxs("div",{children:[jsx("div",{className:"fixed inset-x-0 z-[1000]",children:dt?null:jsx(Banner,{type:"error",children:ft("errors.offline")})}),jsx("div",{style:{paddingTop:`${vt}px`},className:"flex min-h-screen flex-col",children:lt.children})]})}function App(){return jsx(SettingsProvider,{children:jsx(WatchedContextProvider,{children:jsx(BookmarkContextProvider,{children:jsx(BannerContextProvider,{children:jsx(Layout,{children:jsxs(Switch,{children:[jsx(Route,{exact:!0,path:"/v2-migration",component:V2MigrationView}),jsx(Route,{exact:!0,path:"/",children:jsx(Redirect,{to:`/search/${MWMediaType.MOVIE}`})}),jsx(Route,{exact:!0,path:"/media/:media",component:MediaView}),jsx(Route,{exact:!0,path:"/media/:media/:season/:episode",component:MediaView}),jsx(Route,{exact:!0,path:"/search/:type/:query?",component:SearchView}),null,jsx(Route,{path:"*",component:NotFoundPage})]})})})})})})}var dist={},ga4={},gtag={};(function(lt){Object.defineProperty(lt,"__esModule",{value:!0}),lt.default=void 0;var ft=function(){for(var Et=arguments.length,St=new Array(Et),Tt=0;Tt<Et;Tt++)St[Tt]=arguments[Tt];if(typeof window<"u"){var At;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(At=window).gtag.apply(At,St)}},dt=ft;lt.default=dt})(gtag);var format$1={};(function(lt){Object.defineProperty(lt,"__esModule",{value:!0}),lt.default=Tt;var ft=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function dt(At){return At.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(Ct,Rt,Dt){return Rt>0&&Rt+Ct.length!==Dt.length&&Ct.search(ft)>-1&&Dt.charAt(Rt-2)!==":"&&(Dt.charAt(Rt+Ct.length)!=="-"||Dt.charAt(Rt-1)==="-")&&Dt.charAt(Rt-1).search(/[^\s-]/)<0?Ct.toLowerCase():Ct.substr(1).search(/[A-Z]|\../)>-1?Ct:Ct.charAt(0).toUpperCase()+Ct.substr(1)})}function vt(At){return typeof At=="string"&&At.indexOf("@")!==-1}var Et="REDACTED (Potential Email Address)";function St(At){return vt(At)?(console.warn("This arg looks like an email address, redacting."),Et):At}function Tt(){var At=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,Dt=At||"";return Ct&&(Dt=dt(At)),Rt&&(Dt=St(Dt)),Dt}})(format$1);(function(lt){Object.defineProperty(lt,"__esModule",{value:!0}),lt.default=lt.GA4=void 0;var ft=Tt(gtag),dt=Tt(format$1),vt=["eventCategory","eventAction","eventLabel","eventValue","hitType"],Et=["title","location"],St=["page","hitType"];function Tt(xr){return xr&&xr.__esModule?xr:{default:xr}}function At(xr,lr){if(xr==null)return{};var hr=Ct(xr,lr),ur,mr;if(Object.getOwnPropertySymbols){var ir=Object.getOwnPropertySymbols(xr);for(mr=0;mr<ir.length;mr++)ur=ir[mr],!(lr.indexOf(ur)>=0)&&Object.prototype.propertyIsEnumerable.call(xr,ur)&&(hr[ur]=xr[ur])}return hr}function Ct(xr,lr){if(xr==null)return{};var hr={},ur=Object.keys(xr),mr,ir;for(ir=0;ir<ur.length;ir++)mr=ur[ir],!(lr.indexOf(mr)>=0)&&(hr[mr]=xr[mr]);return hr}function Rt(xr){return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lr){return typeof lr}:function(lr){return lr&&typeof Symbol=="function"&&lr.constructor===Symbol&&lr!==Symbol.prototype?"symbol":typeof lr},Rt(xr)}function Dt(xr){return zt(xr)||Nt(xr)||Bt(xr)||kt()}function kt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nt(xr){if(typeof Symbol<"u"&&xr[Symbol.iterator]!=null||xr["@@iterator"]!=null)return Array.from(xr)}function zt(xr){if(Array.isArray(xr))return Ft(xr)}function Wt(xr,lr){var hr=Object.keys(xr);if(Object.getOwnPropertySymbols){var ur=Object.getOwnPropertySymbols(xr);lr&&(ur=ur.filter(function(mr){return Object.getOwnPropertyDescriptor(xr,mr).enumerable})),hr.push.apply(hr,ur)}return hr}function nr(xr){for(var lr=1;lr<arguments.length;lr++){var hr=arguments[lr]!=null?arguments[lr]:{};lr%2?Wt(Object(hr),!0).forEach(function(ur){ar(xr,ur,hr[ur])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xr,Object.getOwnPropertyDescriptors(hr)):Wt(Object(hr)).forEach(function(ur){Object.defineProperty(xr,ur,Object.getOwnPropertyDescriptor(hr,ur))})}return xr}function Ut(xr,lr){return cr(xr)||tr(xr,lr)||Bt(xr,lr)||Ht()}function Ht(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bt(xr,lr){if(xr){if(typeof xr=="string")return Ft(xr,lr);var hr=Object.prototype.toString.call(xr).slice(8,-1);if(hr==="Object"&&xr.constructor&&(hr=xr.constructor.name),hr==="Map"||hr==="Set")return Array.from(xr);if(hr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(hr))return Ft(xr,lr)}}function Ft(xr,lr){(lr==null||lr>xr.length)&&(lr=xr.length);for(var hr=0,ur=new Array(lr);hr<lr;hr++)ur[hr]=xr[hr];return ur}function tr(xr,lr){var hr=xr==null?null:typeof Symbol<"u"&&xr[Symbol.iterator]||xr["@@iterator"];if(hr!=null){var ur,mr,ir,_r,yr=[],gr=!0,Sr=!1;try{if(ir=(hr=hr.call(xr)).next,lr===0){if(Object(hr)!==hr)return;gr=!1}else for(;!(gr=(ur=ir.call(hr)).done)&&(yr.push(ur.value),yr.length!==lr);gr=!0);}catch(Tr){Sr=!0,mr=Tr}finally{try{if(!gr&&hr.return!=null&&(_r=hr.return(),Object(_r)!==_r))return}finally{if(Sr)throw mr}}return yr}}function cr(xr){if(Array.isArray(xr))return xr}function Kt(xr,lr){if(!(xr instanceof lr))throw new TypeError("Cannot call a class as a function")}function Zt(xr,lr){for(var hr=0;hr<lr.length;hr++){var ur=lr[hr];ur.enumerable=ur.enumerable||!1,ur.configurable=!0,"value"in ur&&(ur.writable=!0),Object.defineProperty(xr,sr(ur.key),ur)}}function rr(xr,lr,hr){return lr&&Zt(xr.prototype,lr),hr&&Zt(xr,hr),Object.defineProperty(xr,"prototype",{writable:!1}),xr}function ar(xr,lr,hr){return lr=sr(lr),lr in xr?Object.defineProperty(xr,lr,{value:hr,enumerable:!0,configurable:!0,writable:!0}):xr[lr]=hr,xr}function sr(xr){var lr=dr(xr,"string");return Rt(lr)==="symbol"?lr:String(lr)}function dr(xr,lr){if(Rt(xr)!=="object"||xr===null)return xr;var hr=xr[Symbol.toPrimitive];if(hr!==void 0){var ur=hr.call(xr,lr||"default");if(Rt(ur)!=="object")return ur;throw new TypeError("@@toPrimitive must return a primitive value.")}return(lr==="string"?String:Number)(xr)}var fr=function(){function xr(){var lr=this;Kt(this,xr),ar(this,"reset",function(){lr.isInitialized=!1,lr._testMode=!1,lr._currentMeasurementId,lr._hasLoadedGA=!1,lr._isQueuing=!1,lr._queueGtag=[]}),ar(this,"_gtag",function(){for(var hr=arguments.length,ur=new Array(hr),mr=0;mr<hr;mr++)ur[mr]=arguments[mr];lr._testMode||lr._isQueuing?lr._queueGtag.push(ur):ft.default.apply(void 0,ur)}),ar(this,"_loadGA",function(hr,ur){var mr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!lr._hasLoadedGA){var ir=document.createElement("script");ir.async=!0,ir.src="".concat(mr,"?id=").concat(hr),ur&&ir.setAttribute("nonce",ur),document.body.appendChild(ir),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},lr._hasLoadedGA=!0}}),ar(this,"_toGtagOptions",function(hr){if(hr){var ur={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},mr=Object.entries(hr).reduce(function(ir,_r){var yr=Ut(_r,2),gr=yr[0],Sr=yr[1];return ur[gr]?ir[ur[gr]]=Sr:ir[gr]=Sr,ir},{});return mr}}),ar(this,"initialize",function(hr){var ur=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!hr)throw new Error("Require GA_MEASUREMENT_ID");var mr=typeof hr=="string"?[{trackingId:hr}]:hr;lr._currentMeasurementId=mr[0].trackingId;var ir=ur.gaOptions,_r=ur.gtagOptions,yr=ur.nonce,gr=ur.testMode,Sr=gr===void 0?!1:gr,Tr=ur.gtagUrl;if(lr._testMode=Sr,Sr||lr._loadGA(lr._currentMeasurementId,yr,Tr),lr.isInitialized||(lr._gtag("js",new Date),mr.forEach(function(Or){var Ir=nr(nr(nr({},lr._toGtagOptions(nr(nr({},ir),Or.gaOptions))),_r),Or.gtagOptions);Object.keys(Ir).length?lr._gtag("config",Or.trackingId,Ir):lr._gtag("config",Or.trackingId)})),lr.isInitialized=!0,!Sr){var br=Dt(lr._queueGtag);for(lr._queueGtag=[],lr._isQueuing=!1;br.length;){var Ar=br.shift();lr._gtag.apply(lr,Dt(Ar)),Ar[0]==="get"&&(lr._isQueuing=!0)}}}),ar(this,"set",function(hr){if(!hr){console.warn("`fieldsObject` is required in .set()");return}if(Rt(hr)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(hr).length===0&&console.warn("empty `fieldsObject` given to .set()"),lr._gaCommand("set",hr)}),ar(this,"_gaCommandSendEvent",function(hr,ur,mr,ir,_r){lr._gtag("event",ur,nr(nr({event_category:hr,event_label:mr,value:ir},_r&&{non_interaction:_r.nonInteraction}),lr._toGtagOptions(_r)))}),ar(this,"_gaCommandSendEventParameters",function(){for(var hr=arguments.length,ur=new Array(hr),mr=0;mr<hr;mr++)ur[mr]=arguments[mr];if(typeof ur[0]=="string")lr._gaCommandSendEvent.apply(lr,Dt(ur.slice(1)));else{var ir=ur[0],_r=ir.eventCategory,yr=ir.eventAction,gr=ir.eventLabel,Sr=ir.eventValue;ir.hitType;var Tr=At(ir,vt);lr._gaCommandSendEvent(_r,yr,gr,Sr,Tr)}}),ar(this,"_gaCommandSendTiming",function(hr,ur,mr,ir){lr._gtag("event","timing_complete",{name:ur,value:mr,event_category:hr,event_label:ir})}),ar(this,"_gaCommandSendPageview",function(hr,ur){if(ur&&Object.keys(ur).length){var mr=lr._toGtagOptions(ur),ir=mr.title,_r=mr.location,yr=At(mr,Et);lr._gtag("event","page_view",nr(nr(nr(nr({},hr&&{page_path:hr}),ir&&{page_title:ir}),_r&&{page_location:_r}),yr))}else hr?lr._gtag("event","page_view",{page_path:hr}):lr._gtag("event","page_view")}),ar(this,"_gaCommandSendPageviewParameters",function(){for(var hr=arguments.length,ur=new Array(hr),mr=0;mr<hr;mr++)ur[mr]=arguments[mr];if(typeof ur[0]=="string")lr._gaCommandSendPageview.apply(lr,Dt(ur.slice(1)));else{var ir=ur[0],_r=ir.page;ir.hitType;var yr=At(ir,St);lr._gaCommandSendPageview(_r,yr)}}),ar(this,"_gaCommandSend",function(){for(var hr=arguments.length,ur=new Array(hr),mr=0;mr<hr;mr++)ur[mr]=arguments[mr];var ir=typeof ur[0]=="string"?ur[0]:ur[0].hitType;switch(ir){case"event":lr._gaCommandSendEventParameters.apply(lr,ur);break;case"pageview":lr._gaCommandSendPageviewParameters.apply(lr,ur);break;case"timing":lr._gaCommandSendTiming.apply(lr,Dt(ur.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(ir));break;default:console.warn("Send command doesn't exist: ".concat(ir))}}),ar(this,"_gaCommandSet",function(){for(var hr=arguments.length,ur=new Array(hr),mr=0;mr<hr;mr++)ur[mr]=arguments[mr];typeof ur[0]=="string"&&(ur[0]=ar({},ur[0],ur[1])),lr._gtag("set",lr._toGtagOptions(ur[0]))}),ar(this,"_gaCommand",function(hr){for(var ur=arguments.length,mr=new Array(ur>1?ur-1:0),ir=1;ir<ur;ir++)mr[ir-1]=arguments[ir];switch(hr){case"send":lr._gaCommandSend.apply(lr,mr);break;case"set":lr._gaCommandSet.apply(lr,mr);break;default:console.warn("Command doesn't exist: ".concat(hr))}}),ar(this,"ga",function(){for(var hr=arguments.length,ur=new Array(hr),mr=0;mr<hr;mr++)ur[mr]=arguments[mr];if(typeof ur[0]=="string")lr._gaCommand.apply(lr,ur);else{var ir=ur[0];lr._gtag("get",lr._currentMeasurementId,"client_id",function(_r){lr._isQueuing=!1;var yr=lr._queueGtag;for(ir({get:function(Tr){return Tr==="clientId"?_r:Tr==="trackingId"?lr._currentMeasurementId:Tr==="apiVersion"?"1":void 0}});yr.length;){var gr=yr.shift();lr._gtag.apply(lr,Dt(gr))}}),lr._isQueuing=!0}return lr.ga}),ar(this,"event",function(hr,ur){if(typeof hr=="string")lr._gtag("event",hr,lr._toGtagOptions(ur));else{var mr=hr.action,ir=hr.category,_r=hr.label,yr=hr.value,gr=hr.nonInteraction,Sr=hr.transport;if(!ir||!mr){console.warn("args.category AND args.action are required in event()");return}var Tr={hitType:"event",eventCategory:(0,dt.default)(ir),eventAction:(0,dt.default)(mr)};_r&&(Tr.eventLabel=(0,dt.default)(_r)),typeof yr<"u"&&(typeof yr!="number"?console.warn("Expected `args.value` arg to be a Number."):Tr.eventValue=yr),typeof gr<"u"&&(typeof gr!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):Tr.nonInteraction=gr),typeof Sr<"u"&&(typeof Sr!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(Sr)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),Tr.transport=Sr)),lr._gaCommand("send",Tr)}}),ar(this,"send",function(hr){lr._gaCommand("send",hr)}),this.reset()}return rr(xr,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),xr}();lt.GA4=fr;var pr=new fr;lt.default=pr})(ga4);(function(lt){function ft(At){return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},ft(At)}Object.defineProperty(lt,"__esModule",{value:!0}),lt.default=lt.ReactGAImplementation=void 0;var dt=Et(ga4);function vt(At){if(typeof WeakMap!="function")return null;var Ct=new WeakMap,Rt=new WeakMap;return(vt=function(kt){return kt?Rt:Ct})(At)}function Et(At,Ct){if(!Ct&&At&&At.__esModule)return At;if(At===null||ft(At)!=="object"&&typeof At!="function")return{default:At};var Rt=vt(Ct);if(Rt&&Rt.has(At))return Rt.get(At);var Dt={},kt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Nt in At)if(Nt!=="default"&&Object.prototype.hasOwnProperty.call(At,Nt)){var zt=kt?Object.getOwnPropertyDescriptor(At,Nt):null;zt&&(zt.get||zt.set)?Object.defineProperty(Dt,Nt,zt):Dt[Nt]=At[Nt]}return Dt.default=At,Rt&&Rt.set(At,Dt),Dt}var St=dt.GA4;lt.ReactGAImplementation=St;var Tt=dt.default;lt.default=Tt})(dist);const ReactGA=getDefaultExportFromCjs(dist);ReactGA.initialize([{trackingId:GA_ID}]);function _assertThisInitialized(lt){if(lt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return lt}function _inherits(lt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Super expression must either be null or a function");lt.prototype=Object.create(ft&&ft.prototype,{constructor:{value:lt,writable:!0,configurable:!0}}),Object.defineProperty(lt,"prototype",{writable:!1}),ft&&_setPrototypeOf$2(lt,ft)}function _possibleConstructorReturn(lt,ft){if(ft&&(_typeof$3(ft)==="object"||typeof ft=="function"))return ft;if(ft!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(lt)}function _getPrototypeOf(lt){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(dt){return dt.__proto__||Object.getPrototypeOf(dt)},_getPrototypeOf(lt)}function _iterableToArray(lt){if(typeof Symbol<"u"&&lt[Symbol.iterator]!=null||lt["@@iterator"]!=null)return Array.from(lt)}function _toArray(lt){return _arrayWithHoles$1(lt)||_iterableToArray(lt)||_unsupportedIterableToArray$1(lt)||_nonIterableRest$1()}function ownKeys$6(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$6(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys$6(Object(dt),!0).forEach(function(vt){_defineProperty$4(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys$6(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}var consoleLogger={type:"logger",log:function(ft){this.output("log",ft)},warn:function(ft){this.output("warn",ft)},error:function(ft){this.output("error",ft)},output:function(ft,dt){console&&console[ft]&&console[ft].apply(console,dt)}},Logger=function(){function lt(ft){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$2(this,lt),this.init(ft,dt)}return _createClass$2(lt,[{key:"init",value:function(dt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=vt.prefix||"i18next:",this.logger=dt||consoleLogger,this.options=vt,this.debug=vt.debug}},{key:"setDebug",value:function(dt){this.debug=dt}},{key:"log",value:function(){for(var dt=arguments.length,vt=new Array(dt),Et=0;Et<dt;Et++)vt[Et]=arguments[Et];return this.forward(vt,"log","",!0)}},{key:"warn",value:function(){for(var dt=arguments.length,vt=new Array(dt),Et=0;Et<dt;Et++)vt[Et]=arguments[Et];return this.forward(vt,"warn","",!0)}},{key:"error",value:function(){for(var dt=arguments.length,vt=new Array(dt),Et=0;Et<dt;Et++)vt[Et]=arguments[Et];return this.forward(vt,"error","")}},{key:"deprecate",value:function(){for(var dt=arguments.length,vt=new Array(dt),Et=0;Et<dt;Et++)vt[Et]=arguments[Et];return this.forward(vt,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(dt,vt,Et,St){return St&&!this.debug?null:(typeof dt[0]=="string"&&(dt[0]="".concat(Et).concat(this.prefix," ").concat(dt[0])),this.logger[vt](dt))}},{key:"create",value:function(dt){return new lt(this.logger,_objectSpread$6(_objectSpread$6({},{prefix:"".concat(this.prefix,":").concat(dt,":")}),this.options))}},{key:"clone",value:function(dt){return dt=dt||this.options,dt.prefix=dt.prefix||this.prefix,new lt(this.logger,dt)}}]),lt}(),baseLogger=new Logger,EventEmitter=function(){function lt(){_classCallCheck$2(this,lt),this.observers={}}return _createClass$2(lt,[{key:"on",value:function(dt,vt){var Et=this;return dt.split(" ").forEach(function(St){Et.observers[St]=Et.observers[St]||[],Et.observers[St].push(vt)}),this}},{key:"off",value:function(dt,vt){if(this.observers[dt]){if(!vt){delete this.observers[dt];return}this.observers[dt]=this.observers[dt].filter(function(Et){return Et!==vt})}}},{key:"emit",value:function(dt){for(var vt=arguments.length,Et=new Array(vt>1?vt-1:0),St=1;St<vt;St++)Et[St-1]=arguments[St];if(this.observers[dt]){var Tt=[].concat(this.observers[dt]);Tt.forEach(function(Ct){Ct.apply(void 0,Et)})}if(this.observers["*"]){var At=[].concat(this.observers["*"]);At.forEach(function(Ct){Ct.apply(Ct,[dt].concat(Et))})}}}]),lt}();function defer(){var lt,ft,dt=new Promise(function(vt,Et){lt=vt,ft=Et});return dt.resolve=lt,dt.reject=ft,dt}function makeString(lt){return lt==null?"":""+lt}function copy(lt,ft,dt){lt.forEach(function(vt){ft[vt]&&(dt[vt]=ft[vt])})}function getLastOfPath(lt,ft,dt){function vt(At){return At&&At.indexOf("###")>-1?At.replace(/###/g,"."):At}function Et(){return!lt||typeof lt=="string"}for(var St=typeof ft!="string"?[].concat(ft):ft.split(".");St.length>1;){if(Et())return{};var Tt=vt(St.shift());!lt[Tt]&&dt&&(lt[Tt]=new dt),Object.prototype.hasOwnProperty.call(lt,Tt)?lt=lt[Tt]:lt={}}return Et()?{}:{obj:lt,k:vt(St.shift())}}function setPath(lt,ft,dt){var vt=getLastOfPath(lt,ft,Object),Et=vt.obj,St=vt.k;Et[St]=dt}function pushPath(lt,ft,dt,vt){var Et=getLastOfPath(lt,ft,Object),St=Et.obj,Tt=Et.k;St[Tt]=St[Tt]||[],vt&&(St[Tt]=St[Tt].concat(dt)),vt||St[Tt].push(dt)}function getPath(lt,ft){var dt=getLastOfPath(lt,ft),vt=dt.obj,Et=dt.k;if(vt)return vt[Et]}function getPathWithDefaults(lt,ft,dt){var vt=getPath(lt,dt);return vt!==void 0?vt:getPath(ft,dt)}function deepExtend(lt,ft,dt){for(var vt in ft)vt!=="__proto__"&&vt!=="constructor"&&(vt in lt?typeof lt[vt]=="string"||lt[vt]instanceof String||typeof ft[vt]=="string"||ft[vt]instanceof String?dt&&(lt[vt]=ft[vt]):deepExtend(lt[vt],ft[vt],dt):lt[vt]=ft[vt]);return lt}function regexEscape(lt){return lt.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function escape$1(lt){return typeof lt=="string"?lt.replace(/[&<>"'\/]/g,function(ft){return _entityMap[ft]}):lt}var isIE10=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,chars=[" ",",","?","!",";"];function looksLikeObjectPath(lt,ft,dt){ft=ft||"",dt=dt||"";var vt=chars.filter(function(At){return ft.indexOf(At)<0&&dt.indexOf(At)<0});if(vt.length===0)return!0;var Et=new RegExp("(".concat(vt.map(function(At){return At==="?"?"\\?":At}).join("|"),")")),St=!Et.test(lt);if(!St){var Tt=lt.indexOf(dt);Tt>0&&!Et.test(lt.substring(0,Tt))&&(St=!0)}return St}function ownKeys$5(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$5(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys$5(Object(dt),!0).forEach(function(vt){_defineProperty$4(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys$5(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}function _createSuper$3(lt){var ft=_isNativeReflectConstruct$3();return function(){var vt=_getPrototypeOf(lt),Et;if(ft){var St=_getPrototypeOf(this).constructor;Et=Reflect.construct(vt,arguments,St)}else Et=vt.apply(this,arguments);return _possibleConstructorReturn(this,Et)}}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function deepFind(lt,ft){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(lt){if(lt[ft])return lt[ft];for(var vt=ft.split(dt),Et=lt,St=0;St<vt.length;++St){if(!Et||typeof Et[vt[St]]=="string"&&St+1<vt.length)return;if(Et[vt[St]]===void 0){for(var Tt=2,At=vt.slice(St,St+Tt).join(dt),Ct=Et[At];Ct===void 0&&vt.length>St+Tt;)Tt++,At=vt.slice(St,St+Tt).join(dt),Ct=Et[At];if(Ct===void 0)return;if(Ct===null)return null;if(ft.endsWith(At)){if(typeof Ct=="string")return Ct;if(At&&typeof Ct[At]=="string")return Ct[At]}var Rt=vt.slice(St+Tt).join(dt);return Rt?deepFind(Ct,Rt,dt):void 0}Et=Et[vt[St]]}return Et}}var ResourceStore=function(lt){_inherits(dt,lt);var ft=_createSuper$3(dt);function dt(vt){var Et,St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return _classCallCheck$2(this,dt),Et=ft.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(Et)),Et.data=vt||{},Et.options=St,Et.options.keySeparator===void 0&&(Et.options.keySeparator="."),Et.options.ignoreJSONStructure===void 0&&(Et.options.ignoreJSONStructure=!0),Et}return _createClass$2(dt,[{key:"addNamespaces",value:function(Et){this.options.ns.indexOf(Et)<0&&this.options.ns.push(Et)}},{key:"removeNamespaces",value:function(Et){var St=this.options.ns.indexOf(Et);St>-1&&this.options.ns.splice(St,1)}},{key:"getResource",value:function(Et,St,Tt){var At=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Ct=At.keySeparator!==void 0?At.keySeparator:this.options.keySeparator,Rt=At.ignoreJSONStructure!==void 0?At.ignoreJSONStructure:this.options.ignoreJSONStructure,Dt=[Et,St];Tt&&typeof Tt!="string"&&(Dt=Dt.concat(Tt)),Tt&&typeof Tt=="string"&&(Dt=Dt.concat(Ct?Tt.split(Ct):Tt)),Et.indexOf(".")>-1&&(Dt=Et.split("."));var kt=getPath(this.data,Dt);return kt||!Rt||typeof Tt!="string"?kt:deepFind(this.data&&this.data[Et]&&this.data[Et][St],Tt,Ct)}},{key:"addResource",value:function(Et,St,Tt,At){var Ct=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},Rt=this.options.keySeparator;Rt===void 0&&(Rt=".");var Dt=[Et,St];Tt&&(Dt=Dt.concat(Rt?Tt.split(Rt):Tt)),Et.indexOf(".")>-1&&(Dt=Et.split("."),At=St,St=Dt[1]),this.addNamespaces(St),setPath(this.data,Dt,At),Ct.silent||this.emit("added",Et,St,Tt,At)}},{key:"addResources",value:function(Et,St,Tt){var At=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var Ct in Tt)(typeof Tt[Ct]=="string"||Object.prototype.toString.apply(Tt[Ct])==="[object Array]")&&this.addResource(Et,St,Ct,Tt[Ct],{silent:!0});At.silent||this.emit("added",Et,St,Tt)}},{key:"addResourceBundle",value:function(Et,St,Tt,At,Ct){var Rt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},Dt=[Et,St];Et.indexOf(".")>-1&&(Dt=Et.split("."),At=Tt,Tt=St,St=Dt[1]),this.addNamespaces(St);var kt=getPath(this.data,Dt)||{};At?deepExtend(kt,Tt,Ct):kt=_objectSpread$5(_objectSpread$5({},kt),Tt),setPath(this.data,Dt,kt),Rt.silent||this.emit("added",Et,St,Tt)}},{key:"removeResourceBundle",value:function(Et,St){this.hasResourceBundle(Et,St)&&delete this.data[Et][St],this.removeNamespaces(St),this.emit("removed",Et,St)}},{key:"hasResourceBundle",value:function(Et,St){return this.getResource(Et,St)!==void 0}},{key:"getResourceBundle",value:function(Et,St){return St||(St=this.options.defaultNS),this.options.compatibilityAPI==="v1"?_objectSpread$5(_objectSpread$5({},{}),this.getResource(Et,St)):this.getResource(Et,St)}},{key:"getDataByLanguage",value:function(Et){return this.data[Et]}},{key:"hasLanguageSomeTranslations",value:function(Et){var St=this.getDataByLanguage(Et),Tt=St&&Object.keys(St)||[];return!!Tt.find(function(At){return St[At]&&Object.keys(St[At]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),dt}(EventEmitter),postProcessor={processors:{},addPostProcessor:function(ft){this.processors[ft.name]=ft},handle:function(ft,dt,vt,Et,St){var Tt=this;return ft.forEach(function(At){Tt.processors[At]&&(dt=Tt.processors[At].process(dt,vt,Et,St))}),dt}};function ownKeys$4(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$4(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys$4(Object(dt),!0).forEach(function(vt){_defineProperty$4(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys$4(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}function _createSuper$2(lt){var ft=_isNativeReflectConstruct$2();return function(){var vt=_getPrototypeOf(lt),Et;if(ft){var St=_getPrototypeOf(this).constructor;Et=Reflect.construct(vt,arguments,St)}else Et=vt.apply(this,arguments);return _possibleConstructorReturn(this,Et)}}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var checkedLoadedFor={},Translator=function(lt){_inherits(dt,lt);var ft=_createSuper$2(dt);function dt(vt){var Et,St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _classCallCheck$2(this,dt),Et=ft.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(Et)),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],vt,_assertThisInitialized(Et)),Et.options=St,Et.options.keySeparator===void 0&&(Et.options.keySeparator="."),Et.logger=baseLogger.create("translator"),Et}return _createClass$2(dt,[{key:"changeLanguage",value:function(Et){Et&&(this.language=Et)}},{key:"exists",value:function(Et){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(Et==null)return!1;var Tt=this.resolve(Et,St);return Tt&&Tt.res!==void 0}},{key:"extractFromKey",value:function(Et,St){var Tt=St.nsSeparator!==void 0?St.nsSeparator:this.options.nsSeparator;Tt===void 0&&(Tt=":");var At=St.keySeparator!==void 0?St.keySeparator:this.options.keySeparator,Ct=St.ns||this.options.defaultNS||[],Rt=Tt&&Et.indexOf(Tt)>-1,Dt=!this.options.userDefinedKeySeparator&&!St.keySeparator&&!this.options.userDefinedNsSeparator&&!St.nsSeparator&&!looksLikeObjectPath(Et,Tt,At);if(Rt&&!Dt){var kt=Et.match(this.interpolator.nestingRegexp);if(kt&&kt.length>0)return{key:Et,namespaces:Ct};var Nt=Et.split(Tt);(Tt!==At||Tt===At&&this.options.ns.indexOf(Nt[0])>-1)&&(Ct=Nt.shift()),Et=Nt.join(At)}return typeof Ct=="string"&&(Ct=[Ct]),{key:Et,namespaces:Ct}}},{key:"translate",value:function(Et,St,Tt){var At=this;if(_typeof$3(St)!=="object"&&this.options.overloadTranslationOptionHandler&&(St=this.options.overloadTranslationOptionHandler(arguments)),St||(St={}),Et==null)return"";Array.isArray(Et)||(Et=[String(Et)]);var Ct=St.returnDetails!==void 0?St.returnDetails:this.options.returnDetails,Rt=St.keySeparator!==void 0?St.keySeparator:this.options.keySeparator,Dt=this.extractFromKey(Et[Et.length-1],St),kt=Dt.key,Nt=Dt.namespaces,zt=Nt[Nt.length-1],Wt=St.lng||this.language,nr=St.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(Wt&&Wt.toLowerCase()==="cimode"){if(nr){var Ut=St.nsSeparator||this.options.nsSeparator;return Ct?{res:"".concat(zt).concat(Ut).concat(kt),usedKey:kt,exactUsedKey:kt,usedLng:Wt,usedNS:zt}:"".concat(zt).concat(Ut).concat(kt)}return Ct?{res:kt,usedKey:kt,exactUsedKey:kt,usedLng:Wt,usedNS:zt}:kt}var Ht=this.resolve(Et,St),Bt=Ht&&Ht.res,Ft=Ht&&Ht.usedKey||kt,tr=Ht&&Ht.exactUsedKey||kt,cr=Object.prototype.toString.apply(Bt),Kt=["[object Number]","[object Function]","[object RegExp]"],Zt=St.joinArrays!==void 0?St.joinArrays:this.options.joinArrays,rr=!this.i18nFormat||this.i18nFormat.handleAsObject,ar=typeof Bt!="string"&&typeof Bt!="boolean"&&typeof Bt!="number";if(rr&&Bt&&ar&&Kt.indexOf(cr)<0&&!(typeof Zt=="string"&&cr==="[object Array]")){if(!St.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var sr=this.options.returnedObjectHandler?this.options.returnedObjectHandler(Ft,Bt,_objectSpread$4(_objectSpread$4({},St),{},{ns:Nt})):"key '".concat(kt," (").concat(this.language,")' returned an object instead of string.");return Ct?(Ht.res=sr,Ht):sr}if(Rt){var dr=cr==="[object Array]",fr=dr?[]:{},pr=dr?tr:Ft;for(var xr in Bt)if(Object.prototype.hasOwnProperty.call(Bt,xr)){var lr="".concat(pr).concat(Rt).concat(xr);fr[xr]=this.translate(lr,_objectSpread$4(_objectSpread$4({},St),{joinArrays:!1,ns:Nt})),fr[xr]===lr&&(fr[xr]=Bt[xr])}Bt=fr}}else if(rr&&typeof Zt=="string"&&cr==="[object Array]")Bt=Bt.join(Zt),Bt&&(Bt=this.extendTranslation(Bt,Et,St,Tt));else{var hr=!1,ur=!1,mr=St.count!==void 0&&typeof St.count!="string",ir=dt.hasDefaultValue(St),_r=mr?this.pluralResolver.getSuffix(Wt,St.count,St):"",yr=St["defaultValue".concat(_r)]||St.defaultValue;!this.isValidLookup(Bt)&&ir&&(hr=!0,Bt=yr),this.isValidLookup(Bt)||(ur=!0,Bt=kt);var gr=St.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,Sr=gr&&ur?void 0:Bt,Tr=ir&&yr!==Bt&&this.options.updateMissing;if(ur||hr||Tr){if(this.logger.log(Tr?"updateKey":"missingKey",Wt,zt,kt,Tr?yr:Bt),Rt){var br=this.resolve(kt,_objectSpread$4(_objectSpread$4({},St),{},{keySeparator:!1}));br&&br.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var Ar=[],Or=this.languageUtils.getFallbackCodes(this.options.fallbackLng,St.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Or&&Or[0])for(var Ir=0;Ir<Or.length;Ir++)Ar.push(Or[Ir]);else this.options.saveMissingTo==="all"?Ar=this.languageUtils.toResolveHierarchy(St.lng||this.language):Ar.push(St.lng||this.language);var Cr=function(Pr,wr,Dr){var kr=ir&&Dr!==Bt?Dr:Sr;At.options.missingKeyHandler?At.options.missingKeyHandler(Pr,zt,wr,kr,Tr,St):At.backendConnector&&At.backendConnector.saveMissing&&At.backendConnector.saveMissing(Pr,zt,wr,kr,Tr,St),At.emit("missingKey",Pr,zt,wr,Bt)};this.options.saveMissing&&(this.options.saveMissingPlurals&&mr?Ar.forEach(function(Rr){At.pluralResolver.getSuffixes(Rr,St).forEach(function(Pr){Cr([Rr],kt+Pr,St["defaultValue".concat(Pr)]||yr)})}):Cr(Ar,kt,yr))}Bt=this.extendTranslation(Bt,Et,St,Ht,Tt),ur&&Bt===kt&&this.options.appendNamespaceToMissingKey&&(Bt="".concat(zt,":").concat(kt)),(ur||hr)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?Bt=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(zt,":").concat(kt):kt,hr?Bt:void 0):Bt=this.options.parseMissingKeyHandler(Bt))}return Ct?(Ht.res=Bt,Ht):Bt}},{key:"extendTranslation",value:function(Et,St,Tt,At,Ct){var Rt=this;if(this.i18nFormat&&this.i18nFormat.parse)Et=this.i18nFormat.parse(Et,_objectSpread$4(_objectSpread$4({},this.options.interpolation.defaultVariables),Tt),At.usedLng,At.usedNS,At.usedKey,{resolved:At});else if(!Tt.skipInterpolation){Tt.interpolation&&this.interpolator.init(_objectSpread$4(_objectSpread$4({},Tt),{interpolation:_objectSpread$4(_objectSpread$4({},this.options.interpolation),Tt.interpolation)}));var Dt=typeof Et=="string"&&(Tt&&Tt.interpolation&&Tt.interpolation.skipOnVariables!==void 0?Tt.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),kt;if(Dt){var Nt=Et.match(this.interpolator.nestingRegexp);kt=Nt&&Nt.length}var zt=Tt.replace&&typeof Tt.replace!="string"?Tt.replace:Tt;if(this.options.interpolation.defaultVariables&&(zt=_objectSpread$4(_objectSpread$4({},this.options.interpolation.defaultVariables),zt)),Et=this.interpolator.interpolate(Et,zt,Tt.lng||this.language,Tt),Dt){var Wt=Et.match(this.interpolator.nestingRegexp),nr=Wt&&Wt.length;kt<nr&&(Tt.nest=!1)}Tt.nest!==!1&&(Et=this.interpolator.nest(Et,function(){for(var Bt=arguments.length,Ft=new Array(Bt),tr=0;tr<Bt;tr++)Ft[tr]=arguments[tr];return Ct&&Ct[0]===Ft[0]&&!Tt.context?(Rt.logger.warn("It seems you are nesting recursively key: ".concat(Ft[0]," in key: ").concat(St[0])),null):Rt.translate.apply(Rt,Ft.concat([St]))},Tt)),Tt.interpolation&&this.interpolator.reset()}var Ut=Tt.postProcess||this.options.postProcess,Ht=typeof Ut=="string"?[Ut]:Ut;return Et!=null&&Ht&&Ht.length&&Tt.applyPostProcessor!==!1&&(Et=postProcessor.handle(Ht,Et,St,this.options&&this.options.postProcessPassResolved?_objectSpread$4({i18nResolved:At},Tt):Tt,this)),Et}},{key:"resolve",value:function(Et){var St=this,Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},At,Ct,Rt,Dt,kt;return typeof Et=="string"&&(Et=[Et]),Et.forEach(function(Nt){if(!St.isValidLookup(At)){var zt=St.extractFromKey(Nt,Tt),Wt=zt.key;Ct=Wt;var nr=zt.namespaces;St.options.fallbackNS&&(nr=nr.concat(St.options.fallbackNS));var Ut=Tt.count!==void 0&&typeof Tt.count!="string",Ht=Ut&&!Tt.ordinal&&Tt.count===0&&St.pluralResolver.shouldUseIntlApi(),Bt=Tt.context!==void 0&&(typeof Tt.context=="string"||typeof Tt.context=="number")&&Tt.context!=="",Ft=Tt.lngs?Tt.lngs:St.languageUtils.toResolveHierarchy(Tt.lng||St.language,Tt.fallbackLng);nr.forEach(function(tr){St.isValidLookup(At)||(kt=tr,!checkedLoadedFor["".concat(Ft[0],"-").concat(tr)]&&St.utils&&St.utils.hasLoadedNamespace&&!St.utils.hasLoadedNamespace(kt)&&(checkedLoadedFor["".concat(Ft[0],"-").concat(tr)]=!0,St.logger.warn('key "'.concat(Ct,'" for languages "').concat(Ft.join(", "),`" won't get resolved as namespace "`).concat(kt,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),Ft.forEach(function(cr){if(!St.isValidLookup(At)){Dt=cr;var Kt=[Wt];if(St.i18nFormat&&St.i18nFormat.addLookupKeys)St.i18nFormat.addLookupKeys(Kt,Wt,cr,tr,Tt);else{var Zt;Ut&&(Zt=St.pluralResolver.getSuffix(cr,Tt.count,Tt));var rr="".concat(St.options.pluralSeparator,"zero");if(Ut&&(Kt.push(Wt+Zt),Ht&&Kt.push(Wt+rr)),Bt){var ar="".concat(Wt).concat(St.options.contextSeparator).concat(Tt.context);Kt.push(ar),Ut&&(Kt.push(ar+Zt),Ht&&Kt.push(ar+rr))}}for(var sr;sr=Kt.pop();)St.isValidLookup(At)||(Rt=sr,At=St.getResource(cr,tr,sr,Tt))}}))})}}),{res:At,usedKey:Ct,exactUsedKey:Rt,usedLng:Dt,usedNS:kt}}},{key:"isValidLookup",value:function(Et){return Et!==void 0&&!(!this.options.returnNull&&Et===null)&&!(!this.options.returnEmptyString&&Et==="")}},{key:"getResource",value:function(Et,St,Tt){var At=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(Et,St,Tt,At):this.resourceStore.getResource(Et,St,Tt,At)}}],[{key:"hasDefaultValue",value:function(Et){var St="defaultValue";for(var Tt in Et)if(Object.prototype.hasOwnProperty.call(Et,Tt)&&St===Tt.substring(0,St.length)&&Et[Tt]!==void 0)return!0;return!1}}]),dt}(EventEmitter);function capitalize(lt){return lt.charAt(0).toUpperCase()+lt.slice(1)}var LanguageUtil=function(){function lt(ft){_classCallCheck$2(this,lt),this.options=ft,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}return _createClass$2(lt,[{key:"getScriptPartFromCode",value:function(dt){if(!dt||dt.indexOf("-")<0)return null;var vt=dt.split("-");return vt.length===2||(vt.pop(),vt[vt.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(vt.join("-"))}},{key:"getLanguagePartFromCode",value:function(dt){if(!dt||dt.indexOf("-")<0)return dt;var vt=dt.split("-");return this.formatLanguageCode(vt[0])}},{key:"formatLanguageCode",value:function(dt){if(typeof dt=="string"&&dt.indexOf("-")>-1){var vt=["hans","hant","latn","cyrl","cans","mong","arab"],Et=dt.split("-");return this.options.lowerCaseLng?Et=Et.map(function(St){return St.toLowerCase()}):Et.length===2?(Et[0]=Et[0].toLowerCase(),Et[1]=Et[1].toUpperCase(),vt.indexOf(Et[1].toLowerCase())>-1&&(Et[1]=capitalize(Et[1].toLowerCase()))):Et.length===3&&(Et[0]=Et[0].toLowerCase(),Et[1].length===2&&(Et[1]=Et[1].toUpperCase()),Et[0]!=="sgn"&&Et[2].length===2&&(Et[2]=Et[2].toUpperCase()),vt.indexOf(Et[1].toLowerCase())>-1&&(Et[1]=capitalize(Et[1].toLowerCase())),vt.indexOf(Et[2].toLowerCase())>-1&&(Et[2]=capitalize(Et[2].toLowerCase()))),Et.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?dt.toLowerCase():dt}},{key:"isSupportedCode",value:function(dt){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(dt=this.getLanguagePartFromCode(dt)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(dt)>-1}},{key:"getBestMatchFromCodes",value:function(dt){var vt=this;if(!dt)return null;var Et;return dt.forEach(function(St){if(!Et){var Tt=vt.formatLanguageCode(St);(!vt.options.supportedLngs||vt.isSupportedCode(Tt))&&(Et=Tt)}}),!Et&&this.options.supportedLngs&&dt.forEach(function(St){if(!Et){var Tt=vt.getLanguagePartFromCode(St);if(vt.isSupportedCode(Tt))return Et=Tt;Et=vt.options.supportedLngs.find(function(At){if(At===Tt)return At;if(!(At.indexOf("-")<0&&Tt.indexOf("-")<0)&&At.indexOf(Tt)===0)return At})}}),Et||(Et=this.getFallbackCodes(this.options.fallbackLng)[0]),Et}},{key:"getFallbackCodes",value:function(dt,vt){if(!dt)return[];if(typeof dt=="function"&&(dt=dt(vt)),typeof dt=="string"&&(dt=[dt]),Object.prototype.toString.apply(dt)==="[object Array]")return dt;if(!vt)return dt.default||[];var Et=dt[vt];return Et||(Et=dt[this.getScriptPartFromCode(vt)]),Et||(Et=dt[this.formatLanguageCode(vt)]),Et||(Et=dt[this.getLanguagePartFromCode(vt)]),Et||(Et=dt.default),Et||[]}},{key:"toResolveHierarchy",value:function(dt,vt){var Et=this,St=this.getFallbackCodes(vt||this.options.fallbackLng||[],dt),Tt=[],At=function(Rt){Rt&&(Et.isSupportedCode(Rt)?Tt.push(Rt):Et.logger.warn("rejecting language code not found in supportedLngs: ".concat(Rt)))};return typeof dt=="string"&&dt.indexOf("-")>-1?(this.options.load!=="languageOnly"&&At(this.formatLanguageCode(dt)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&At(this.getScriptPartFromCode(dt)),this.options.load!=="currentOnly"&&At(this.getLanguagePartFromCode(dt))):typeof dt=="string"&&At(this.formatLanguageCode(dt)),St.forEach(function(Ct){Tt.indexOf(Ct)<0&&At(Et.formatLanguageCode(Ct))}),Tt}}]),lt}(),sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:function(ft){return+(ft>1)},2:function(ft){return+(ft!=1)},3:function(ft){return 0},4:function(ft){return ft%10==1&&ft%100!=11?0:ft%10>=2&&ft%10<=4&&(ft%100<10||ft%100>=20)?1:2},5:function(ft){return ft==0?0:ft==1?1:ft==2?2:ft%100>=3&&ft%100<=10?3:ft%100>=11?4:5},6:function(ft){return ft==1?0:ft>=2&&ft<=4?1:2},7:function(ft){return ft==1?0:ft%10>=2&&ft%10<=4&&(ft%100<10||ft%100>=20)?1:2},8:function(ft){return ft==1?0:ft==2?1:ft!=8&&ft!=11?2:3},9:function(ft){return+(ft>=2)},10:function(ft){return ft==1?0:ft==2?1:ft<7?2:ft<11?3:4},11:function(ft){return ft==1||ft==11?0:ft==2||ft==12?1:ft>2&&ft<20?2:3},12:function(ft){return+(ft%10!=1||ft%100==11)},13:function(ft){return+(ft!==0)},14:function(ft){return ft==1?0:ft==2?1:ft==3?2:3},15:function(ft){return ft%10==1&&ft%100!=11?0:ft%10>=2&&(ft%100<10||ft%100>=20)?1:2},16:function(ft){return ft%10==1&&ft%100!=11?0:ft!==0?1:2},17:function(ft){return ft==1||ft%10==1&&ft%100!=11?0:1},18:function(ft){return ft==0?0:ft==1?1:2},19:function(ft){return ft==1?0:ft==0||ft%100>1&&ft%100<11?1:ft%100>10&&ft%100<20?2:3},20:function(ft){return ft==1?0:ft==0||ft%100>0&&ft%100<20?1:2},21:function(ft){return ft%100==1?1:ft%100==2?2:ft%100==3||ft%100==4?3:0},22:function(ft){return ft==1?0:ft==2?1:(ft<0||ft>10)&&ft%10==0?2:3}},deprecatedJsonVersions=["v1","v2","v3"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5};function createRules(){var lt={};return sets.forEach(function(ft){ft.lngs.forEach(function(dt){lt[dt]={numbers:ft.nr,plurals:_rulesPluralsTypes[ft.fc]}})}),lt}var PluralResolver=function(){function lt(ft){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$2(this,lt),this.languageUtils=ft,this.options=dt,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules()}return _createClass$2(lt,[{key:"addRule",value:function(dt,vt){this.rules[dt]=vt}},{key:"getRule",value:function(dt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(dt,{type:vt.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[dt]||this.rules[this.languageUtils.getLanguagePartFromCode(dt)]}},{key:"needsPlural",value:function(dt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Et=this.getRule(dt,vt);return this.shouldUseIntlApi()?Et&&Et.resolvedOptions().pluralCategories.length>1:Et&&Et.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(dt,vt){var Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(dt,Et).map(function(St){return"".concat(vt).concat(St)})}},{key:"getSuffixes",value:function(dt){var vt=this,Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},St=this.getRule(dt,Et);return St?this.shouldUseIntlApi()?St.resolvedOptions().pluralCategories.sort(function(Tt,At){return suffixesOrder[Tt]-suffixesOrder[At]}).map(function(Tt){return"".concat(vt.options.prepend).concat(Tt)}):St.numbers.map(function(Tt){return vt.getSuffix(dt,Tt,Et)}):[]}},{key:"getSuffix",value:function(dt,vt){var Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},St=this.getRule(dt,Et);return St?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(St.select(vt)):this.getSuffixRetroCompatible(St,vt):(this.logger.warn("no plural rule found for: ".concat(dt)),"")}},{key:"getSuffixRetroCompatible",value:function(dt,vt){var Et=this,St=dt.noAbs?dt.plurals(vt):dt.plurals(Math.abs(vt)),Tt=dt.numbers[St];this.options.simplifyPluralSuffix&&dt.numbers.length===2&&dt.numbers[0]===1&&(Tt===2?Tt="plural":Tt===1&&(Tt=""));var At=function(){return Et.options.prepend&&Tt.toString()?Et.options.prepend+Tt.toString():Tt.toString()};return this.options.compatibilityJSON==="v1"?Tt===1?"":typeof Tt=="number"?"_plural_".concat(Tt.toString()):At():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&dt.numbers.length===2&&dt.numbers[0]===1?At():this.options.prepend&&St.toString()?this.options.prepend+St.toString():St.toString()}},{key:"shouldUseIntlApi",value:function(){return!deprecatedJsonVersions.includes(this.options.compatibilityJSON)}}]),lt}();function ownKeys$3(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$3(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys$3(Object(dt),!0).forEach(function(vt){_defineProperty$4(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys$3(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}var Interpolator=function(){function lt(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$2(this,lt),this.logger=baseLogger.create("interpolator"),this.options=ft,this.format=ft.interpolation&&ft.interpolation.format||function(dt){return dt},this.init(ft)}return _createClass$2(lt,[{key:"init",value:function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};dt.interpolation||(dt.interpolation={escapeValue:!0});var vt=dt.interpolation;this.escape=vt.escape!==void 0?vt.escape:escape$1,this.escapeValue=vt.escapeValue!==void 0?vt.escapeValue:!0,this.useRawValueToEscape=vt.useRawValueToEscape!==void 0?vt.useRawValueToEscape:!1,this.prefix=vt.prefix?regexEscape(vt.prefix):vt.prefixEscaped||"{{",this.suffix=vt.suffix?regexEscape(vt.suffix):vt.suffixEscaped||"}}",this.formatSeparator=vt.formatSeparator?vt.formatSeparator:vt.formatSeparator||",",this.unescapePrefix=vt.unescapeSuffix?"":vt.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":vt.unescapeSuffix||"",this.nestingPrefix=vt.nestingPrefix?regexEscape(vt.nestingPrefix):vt.nestingPrefixEscaped||regexEscape("$t("),this.nestingSuffix=vt.nestingSuffix?regexEscape(vt.nestingSuffix):vt.nestingSuffixEscaped||regexEscape(")"),this.nestingOptionsSeparator=vt.nestingOptionsSeparator?vt.nestingOptionsSeparator:vt.nestingOptionsSeparator||",",this.maxReplaces=vt.maxReplaces?vt.maxReplaces:1e3,this.alwaysFormat=vt.alwaysFormat!==void 0?vt.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var dt="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(dt,"g");var vt="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(vt,"g");var Et="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(Et,"g")}},{key:"interpolate",value:function(dt,vt,Et,St){var Tt=this,At,Ct,Rt,Dt=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function kt(Ut){return Ut.replace(/\$/g,"$$$$")}var Nt=function(Ht){if(Ht.indexOf(Tt.formatSeparator)<0){var Bt=getPathWithDefaults(vt,Dt,Ht);return Tt.alwaysFormat?Tt.format(Bt,void 0,Et,_objectSpread$3(_objectSpread$3(_objectSpread$3({},St),vt),{},{interpolationkey:Ht})):Bt}var Ft=Ht.split(Tt.formatSeparator),tr=Ft.shift().trim(),cr=Ft.join(Tt.formatSeparator).trim();return Tt.format(getPathWithDefaults(vt,Dt,tr),cr,Et,_objectSpread$3(_objectSpread$3(_objectSpread$3({},St),vt),{},{interpolationkey:tr}))};this.resetRegExp();var zt=St&&St.missingInterpolationHandler||this.options.missingInterpolationHandler,Wt=St&&St.interpolation&&St.interpolation.skipOnVariables!==void 0?St.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,nr=[{regex:this.regexpUnescape,safeValue:function(Ht){return kt(Ht)}},{regex:this.regexp,safeValue:function(Ht){return Tt.escapeValue?kt(Tt.escape(Ht)):kt(Ht)}}];return nr.forEach(function(Ut){for(Rt=0;At=Ut.regex.exec(dt);){var Ht=At[1].trim();if(Ct=Nt(Ht),Ct===void 0)if(typeof zt=="function"){var Bt=zt(dt,At,St);Ct=typeof Bt=="string"?Bt:""}else if(St&&Object.prototype.hasOwnProperty.call(St,Ht))Ct="";else if(Wt){Ct=At[0];continue}else Tt.logger.warn("missed to pass in variable ".concat(Ht," for interpolating ").concat(dt)),Ct="";else typeof Ct!="string"&&!Tt.useRawValueToEscape&&(Ct=makeString(Ct));var Ft=Ut.safeValue(Ct);if(dt=dt.replace(At[0],Ft),Wt?(Ut.regex.lastIndex+=Ct.length,Ut.regex.lastIndex-=At[0].length):Ut.regex.lastIndex=0,Rt++,Rt>=Tt.maxReplaces)break}}),dt}},{key:"nest",value:function(dt,vt){var Et=this,St=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Tt,At,Ct;function Rt(zt,Wt){var nr=this.nestingOptionsSeparator;if(zt.indexOf(nr)<0)return zt;var Ut=zt.split(new RegExp("".concat(nr,"[ ]*{"))),Ht="{".concat(Ut[1]);zt=Ut[0],Ht=this.interpolate(Ht,Ct);var Bt=Ht.match(/'/g),Ft=Ht.match(/"/g);(Bt&&Bt.length%2===0&&!Ft||Ft.length%2!==0)&&(Ht=Ht.replace(/'/g,'"'));try{Ct=JSON.parse(Ht),Wt&&(Ct=_objectSpread$3(_objectSpread$3({},Wt),Ct))}catch(tr){return this.logger.warn("failed parsing options string in nesting for key ".concat(zt),tr),"".concat(zt).concat(nr).concat(Ht)}return delete Ct.defaultValue,zt}for(;Tt=this.nestingRegexp.exec(dt);){var Dt=[];Ct=_objectSpread$3({},St),Ct=Ct.replace&&typeof Ct.replace!="string"?Ct.replace:Ct,Ct.applyPostProcessor=!1,delete Ct.defaultValue;var kt=!1;if(Tt[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(Tt[1])){var Nt=Tt[1].split(this.formatSeparator).map(function(zt){return zt.trim()});Tt[1]=Nt.shift(),Dt=Nt,kt=!0}if(At=vt(Rt.call(this,Tt[1].trim(),Ct),Ct),At&&Tt[0]===dt&&typeof At!="string")return At;typeof At!="string"&&(At=makeString(At)),At||(this.logger.warn("missed to resolve ".concat(Tt[1]," for nesting ").concat(dt)),At=""),kt&&(At=Dt.reduce(function(zt,Wt){return Et.format(zt,Wt,St.lng,_objectSpread$3(_objectSpread$3({},St),{},{interpolationkey:Tt[1].trim()}))},At.trim())),dt=dt.replace(Tt[0],At),this.regexp.lastIndex=0}return dt}}]),lt}();function ownKeys$2(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$2(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys$2(Object(dt),!0).forEach(function(vt){_defineProperty$4(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys$2(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}function parseFormatStr(lt){var ft=lt.toLowerCase().trim(),dt={};if(lt.indexOf("(")>-1){var vt=lt.split("(");ft=vt[0].toLowerCase().trim();var Et=vt[1].substring(0,vt[1].length-1);if(ft==="currency"&&Et.indexOf(":")<0)dt.currency||(dt.currency=Et.trim());else if(ft==="relativetime"&&Et.indexOf(":")<0)dt.range||(dt.range=Et.trim());else{var St=Et.split(";");St.forEach(function(Tt){if(Tt){var At=Tt.split(":"),Ct=_toArray(At),Rt=Ct[0],Dt=Ct.slice(1),kt=Dt.join(":").trim().replace(/^'+|'+$/g,"");dt[Rt.trim()]||(dt[Rt.trim()]=kt),kt==="false"&&(dt[Rt.trim()]=!1),kt==="true"&&(dt[Rt.trim()]=!0),isNaN(kt)||(dt[Rt.trim()]=parseInt(kt,10))}})}}return{formatName:ft,formatOptions:dt}}function createCachedFormatter(lt){var ft={};return function(vt,Et,St){var Tt=Et+JSON.stringify(St),At=ft[Tt];return At||(At=lt(Et,St),ft[Tt]=At),At(vt)}}var Formatter=function(){function lt(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$2(this,lt),this.logger=baseLogger.create("formatter"),this.options=ft,this.formats={number:createCachedFormatter(function(dt,vt){var Et=new Intl.NumberFormat(dt,_objectSpread$2({},vt));return function(St){return Et.format(St)}}),currency:createCachedFormatter(function(dt,vt){var Et=new Intl.NumberFormat(dt,_objectSpread$2(_objectSpread$2({},vt),{},{style:"currency"}));return function(St){return Et.format(St)}}),datetime:createCachedFormatter(function(dt,vt){var Et=new Intl.DateTimeFormat(dt,_objectSpread$2({},vt));return function(St){return Et.format(St)}}),relativetime:createCachedFormatter(function(dt,vt){var Et=new Intl.RelativeTimeFormat(dt,_objectSpread$2({},vt));return function(St){return Et.format(St,vt.range||"day")}}),list:createCachedFormatter(function(dt,vt){var Et=new Intl.ListFormat(dt,_objectSpread$2({},vt));return function(St){return Et.format(St)}})},this.init(ft)}return _createClass$2(lt,[{key:"init",value:function(dt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},Et=vt.interpolation;this.formatSeparator=Et.formatSeparator?Et.formatSeparator:Et.formatSeparator||","}},{key:"add",value:function(dt,vt){this.formats[dt.toLowerCase().trim()]=vt}},{key:"addCached",value:function(dt,vt){this.formats[dt.toLowerCase().trim()]=createCachedFormatter(vt)}},{key:"format",value:function(dt,vt,Et){var St=this,Tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},At=vt.split(this.formatSeparator),Ct=At.reduce(function(Rt,Dt){var kt=parseFormatStr(Dt),Nt=kt.formatName,zt=kt.formatOptions;if(St.formats[Nt]){var Wt=Rt;try{var nr=Tt&&Tt.formatParams&&Tt.formatParams[Tt.interpolationkey]||{},Ut=nr.locale||nr.lng||Tt.locale||Tt.lng||Et;Wt=St.formats[Nt](Rt,Ut,_objectSpread$2(_objectSpread$2(_objectSpread$2({},zt),Tt),nr))}catch(Ht){St.logger.warn(Ht)}return Wt}else St.logger.warn("there was no format function for ".concat(Nt));return Rt},dt);return Ct}}]),lt}();function ownKeys$1(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread$1(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys$1(Object(dt),!0).forEach(function(vt){_defineProperty$4(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys$1(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}function _createSuper$1(lt){var ft=_isNativeReflectConstruct$1();return function(){var vt=_getPrototypeOf(lt),Et;if(ft){var St=_getPrototypeOf(this).constructor;Et=Reflect.construct(vt,arguments,St)}else Et=vt.apply(this,arguments);return _possibleConstructorReturn(this,Et)}}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function removePending(lt,ft){lt.pending[ft]!==void 0&&(delete lt.pending[ft],lt.pendingCount--)}var Connector=function(lt){_inherits(dt,lt);var ft=_createSuper$1(dt);function dt(vt,Et,St){var Tt,At=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return _classCallCheck$2(this,dt),Tt=ft.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(Tt)),Tt.backend=vt,Tt.store=Et,Tt.services=St,Tt.languageUtils=St.languageUtils,Tt.options=At,Tt.logger=baseLogger.create("backendConnector"),Tt.waitingReads=[],Tt.maxParallelReads=At.maxParallelReads||10,Tt.readingCalls=0,Tt.maxRetries=At.maxRetries>=0?At.maxRetries:5,Tt.retryTimeout=At.retryTimeout>=1?At.retryTimeout:350,Tt.state={},Tt.queue=[],Tt.backend&&Tt.backend.init&&Tt.backend.init(St,At.backend,At),Tt}return _createClass$2(dt,[{key:"queueLoad",value:function(Et,St,Tt,At){var Ct=this,Rt={},Dt={},kt={},Nt={};return Et.forEach(function(zt){var Wt=!0;St.forEach(function(nr){var Ut="".concat(zt,"|").concat(nr);!Tt.reload&&Ct.store.hasResourceBundle(zt,nr)?Ct.state[Ut]=2:Ct.state[Ut]<0||(Ct.state[Ut]===1?Dt[Ut]===void 0&&(Dt[Ut]=!0):(Ct.state[Ut]=1,Wt=!1,Dt[Ut]===void 0&&(Dt[Ut]=!0),Rt[Ut]===void 0&&(Rt[Ut]=!0),Nt[nr]===void 0&&(Nt[nr]=!0)))}),Wt||(kt[zt]=!0)}),(Object.keys(Rt).length||Object.keys(Dt).length)&&this.queue.push({pending:Dt,pendingCount:Object.keys(Dt).length,loaded:{},errors:[],callback:At}),{toLoad:Object.keys(Rt),pending:Object.keys(Dt),toLoadLanguages:Object.keys(kt),toLoadNamespaces:Object.keys(Nt)}}},{key:"loaded",value:function(Et,St,Tt){var At=Et.split("|"),Ct=At[0],Rt=At[1];St&&this.emit("failedLoading",Ct,Rt,St),Tt&&this.store.addResourceBundle(Ct,Rt,Tt),this.state[Et]=St?-1:2;var Dt={};this.queue.forEach(function(kt){pushPath(kt.loaded,[Ct],Rt),removePending(kt,Et),St&&kt.errors.push(St),kt.pendingCount===0&&!kt.done&&(Object.keys(kt.loaded).forEach(function(Nt){Dt[Nt]||(Dt[Nt]={});var zt=kt.loaded[Nt];zt.length&&zt.forEach(function(Wt){Dt[Nt][Wt]===void 0&&(Dt[Nt][Wt]=!0)})}),kt.done=!0,kt.errors.length?kt.callback(kt.errors):kt.callback())}),this.emit("loaded",Dt),this.queue=this.queue.filter(function(kt){return!kt.done})}},{key:"read",value:function(Et,St,Tt){var At=this,Ct=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,Rt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,Dt=arguments.length>5?arguments[5]:void 0;if(!Et.length)return Dt(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:Et,ns:St,fcName:Tt,tried:Ct,wait:Rt,callback:Dt});return}this.readingCalls++;var kt=function(nr,Ut){if(At.readingCalls--,At.waitingReads.length>0){var Ht=At.waitingReads.shift();At.read(Ht.lng,Ht.ns,Ht.fcName,Ht.tried,Ht.wait,Ht.callback)}if(nr&&Ut&&Ct<At.maxRetries){setTimeout(function(){At.read.call(At,Et,St,Tt,Ct+1,Rt*2,Dt)},Rt);return}Dt(nr,Ut)},Nt=this.backend[Tt].bind(this.backend);if(Nt.length===2){try{var zt=Nt(Et,St);zt&&typeof zt.then=="function"?zt.then(function(Wt){return kt(null,Wt)}).catch(kt):kt(null,zt)}catch(Wt){kt(Wt)}return}return Nt(Et,St,kt)}},{key:"prepareLoading",value:function(Et,St){var Tt=this,At=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ct=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),Ct&&Ct();typeof Et=="string"&&(Et=this.languageUtils.toResolveHierarchy(Et)),typeof St=="string"&&(St=[St]);var Rt=this.queueLoad(Et,St,At,Ct);if(!Rt.toLoad.length)return Rt.pending.length||Ct(),null;Rt.toLoad.forEach(function(Dt){Tt.loadOne(Dt)})}},{key:"load",value:function(Et,St,Tt){this.prepareLoading(Et,St,{},Tt)}},{key:"reload",value:function(Et,St,Tt){this.prepareLoading(Et,St,{reload:!0},Tt)}},{key:"loadOne",value:function(Et){var St=this,Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",At=Et.split("|"),Ct=At[0],Rt=At[1];this.read(Ct,Rt,"read",void 0,void 0,function(Dt,kt){Dt&&St.logger.warn("".concat(Tt,"loading namespace ").concat(Rt," for language ").concat(Ct," failed"),Dt),!Dt&&kt&&St.logger.log("".concat(Tt,"loaded namespace ").concat(Rt," for language ").concat(Ct),kt),St.loaded(Et,Dt,kt)})}},{key:"saveMissing",value:function(Et,St,Tt,At,Ct){var Rt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},Dt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(St)){this.logger.warn('did not save key "'.concat(Tt,'" as the namespace "').concat(St,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(Tt==null||Tt==="")){if(this.backend&&this.backend.create){var kt=_objectSpread$1(_objectSpread$1({},Rt),{},{isUpdate:Ct}),Nt=this.backend.create.bind(this.backend);if(Nt.length<6)try{var zt;Nt.length===5?zt=Nt(Et,St,Tt,At,kt):zt=Nt(Et,St,Tt,At),zt&&typeof zt.then=="function"?zt.then(function(Wt){return Dt(null,Wt)}).catch(Dt):Dt(null,zt)}catch(Wt){Dt(Wt)}else Nt(Et,St,Tt,At,Dt,kt)}!Et||!Et[0]||this.store.addResource(Et[0],St,Tt,At)}}}]),dt}(EventEmitter);function get$1(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(ft){var dt={};if(_typeof$3(ft[1])==="object"&&(dt=ft[1]),typeof ft[1]=="string"&&(dt.defaultValue=ft[1]),typeof ft[2]=="string"&&(dt.tDescription=ft[2]),_typeof$3(ft[2])==="object"||_typeof$3(ft[3])==="object"){var vt=ft[3]||ft[2];Object.keys(vt).forEach(function(Et){dt[Et]=vt[Et]})}return dt},interpolation:{escapeValue:!0,format:function(ft,dt,vt,Et){return ft},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function transformOptions(lt){return typeof lt.ns=="string"&&(lt.ns=[lt.ns]),typeof lt.fallbackLng=="string"&&(lt.fallbackLng=[lt.fallbackLng]),typeof lt.fallbackNS=="string"&&(lt.fallbackNS=[lt.fallbackNS]),lt.supportedLngs&&lt.supportedLngs.indexOf("cimode")<0&&(lt.supportedLngs=lt.supportedLngs.concat(["cimode"])),lt}function ownKeys(lt,ft){var dt=Object.keys(lt);if(Object.getOwnPropertySymbols){var vt=Object.getOwnPropertySymbols(lt);ft&&(vt=vt.filter(function(Et){return Object.getOwnPropertyDescriptor(lt,Et).enumerable})),dt.push.apply(dt,vt)}return dt}function _objectSpread(lt){for(var ft=1;ft<arguments.length;ft++){var dt=arguments[ft]!=null?arguments[ft]:{};ft%2?ownKeys(Object(dt),!0).forEach(function(vt){_defineProperty$4(lt,vt,dt[vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(dt)):ownKeys(Object(dt)).forEach(function(vt){Object.defineProperty(lt,vt,Object.getOwnPropertyDescriptor(dt,vt))})}return lt}function _createSuper(lt){var ft=_isNativeReflectConstruct();return function(){var vt=_getPrototypeOf(lt),Et;if(ft){var St=_getPrototypeOf(this).constructor;Et=Reflect.construct(vt,arguments,St)}else Et=vt.apply(this,arguments);return _possibleConstructorReturn(this,Et)}}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function noop(){}function bindMemberFunctions(lt){var ft=Object.getOwnPropertyNames(Object.getPrototypeOf(lt));ft.forEach(function(dt){typeof lt[dt]=="function"&&(lt[dt]=lt[dt].bind(lt))})}var I18n=function(lt){_inherits(dt,lt);var ft=_createSuper(dt);function dt(){var vt,Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=arguments.length>1?arguments[1]:void 0;if(_classCallCheck$2(this,dt),vt=ft.call(this),isIE10&&EventEmitter.call(_assertThisInitialized(vt)),vt.options=transformOptions(Et),vt.services={},vt.logger=baseLogger,vt.modules={external:[]},bindMemberFunctions(_assertThisInitialized(vt)),St&&!vt.isInitialized&&!Et.isClone){if(!vt.options.initImmediate)return vt.init(Et,St),_possibleConstructorReturn(vt,_assertThisInitialized(vt));setTimeout(function(){vt.init(Et,St)},0)}return vt}return _createClass$2(dt,[{key:"init",value:function(){var Et=this,St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Tt=arguments.length>1?arguments[1]:void 0;typeof St=="function"&&(Tt=St,St={}),!St.defaultNS&&St.defaultNS!==!1&&St.ns&&(typeof St.ns=="string"?St.defaultNS=St.ns:St.ns.indexOf("translation")<0&&(St.defaultNS=St.ns[0]));var At=get$1();this.options=_objectSpread(_objectSpread(_objectSpread({},At),this.options),transformOptions(St)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=_objectSpread(_objectSpread({},At.interpolation),this.options.interpolation)),St.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=St.keySeparator),St.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=St.nsSeparator);function Ct(Ht){return Ht?typeof Ht=="function"?new Ht:Ht:null}if(!this.options.isClone){this.modules.logger?baseLogger.init(Ct(this.modules.logger),this.options):baseLogger.init(null,this.options);var Rt;this.modules.formatter?Rt=this.modules.formatter:typeof Intl<"u"&&(Rt=Formatter);var Dt=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);var kt=this.services;kt.logger=baseLogger,kt.resourceStore=this.store,kt.languageUtils=Dt,kt.pluralResolver=new PluralResolver(Dt,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),Rt&&(!this.options.interpolation.format||this.options.interpolation.format===At.interpolation.format)&&(kt.formatter=Ct(Rt),kt.formatter.init(kt,this.options),this.options.interpolation.format=kt.formatter.format.bind(kt.formatter)),kt.interpolator=new Interpolator(this.options),kt.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},kt.backendConnector=new Connector(Ct(this.modules.backend),kt.resourceStore,kt,this.options),kt.backendConnector.on("*",function(Ht){for(var Bt=arguments.length,Ft=new Array(Bt>1?Bt-1:0),tr=1;tr<Bt;tr++)Ft[tr-1]=arguments[tr];Et.emit.apply(Et,[Ht].concat(Ft))}),this.modules.languageDetector&&(kt.languageDetector=Ct(this.modules.languageDetector),kt.languageDetector.init&&kt.languageDetector.init(kt,this.options.detection,this.options)),this.modules.i18nFormat&&(kt.i18nFormat=Ct(this.modules.i18nFormat),kt.i18nFormat.init&&kt.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(Ht){for(var Bt=arguments.length,Ft=new Array(Bt>1?Bt-1:0),tr=1;tr<Bt;tr++)Ft[tr-1]=arguments[tr];Et.emit.apply(Et,[Ht].concat(Ft))}),this.modules.external.forEach(function(Ht){Ht.init&&Ht.init(Et)})}if(this.format=this.options.interpolation.format,Tt||(Tt=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var Nt=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);Nt.length>0&&Nt[0]!=="dev"&&(this.options.lng=Nt[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var zt=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];zt.forEach(function(Ht){Et[Ht]=function(){var Bt;return(Bt=Et.store)[Ht].apply(Bt,arguments)}});var Wt=["addResource","addResources","addResourceBundle","removeResourceBundle"];Wt.forEach(function(Ht){Et[Ht]=function(){var Bt;return(Bt=Et.store)[Ht].apply(Bt,arguments),Et}});var nr=defer(),Ut=function(){var Bt=function(tr,cr){Et.isInitialized&&!Et.initializedStoreOnce&&Et.logger.warn("init: i18next is already initialized. You should call init just once!"),Et.isInitialized=!0,Et.options.isClone||Et.logger.log("initialized",Et.options),Et.emit("initialized",Et.options),nr.resolve(cr),Tt(tr,cr)};if(Et.languages&&Et.options.compatibilityAPI!=="v1"&&!Et.isInitialized)return Bt(null,Et.t.bind(Et));Et.changeLanguage(Et.options.lng,Bt)};return this.options.resources||!this.options.initImmediate?Ut():setTimeout(Ut,0),nr}},{key:"loadResources",value:function(Et){var St=this,Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop,At=Tt,Ct=typeof Et=="string"?Et:this.language;if(typeof Et=="function"&&(At=Et),!this.options.resources||this.options.partialBundledLanguages){if(Ct&&Ct.toLowerCase()==="cimode")return At();var Rt=[],Dt=function(zt){if(zt){var Wt=St.services.languageUtils.toResolveHierarchy(zt);Wt.forEach(function(nr){Rt.indexOf(nr)<0&&Rt.push(nr)})}};if(Ct)Dt(Ct);else{var kt=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);kt.forEach(function(Nt){return Dt(Nt)})}this.options.preload&&this.options.preload.forEach(function(Nt){return Dt(Nt)}),this.services.backendConnector.load(Rt,this.options.ns,function(Nt){!Nt&&!St.resolvedLanguage&&St.language&&St.setResolvedLanguage(St.language),At(Nt)})}else At(null)}},{key:"reloadResources",value:function(Et,St,Tt){var At=defer();return Et||(Et=this.languages),St||(St=this.options.ns),Tt||(Tt=noop),this.services.backendConnector.reload(Et,St,function(Ct){At.resolve(),Tt(Ct)}),At}},{key:"use",value:function(Et){if(!Et)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!Et.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return Et.type==="backend"&&(this.modules.backend=Et),(Et.type==="logger"||Et.log&&Et.warn&&Et.error)&&(this.modules.logger=Et),Et.type==="languageDetector"&&(this.modules.languageDetector=Et),Et.type==="i18nFormat"&&(this.modules.i18nFormat=Et),Et.type==="postProcessor"&&postProcessor.addPostProcessor(Et),Et.type==="formatter"&&(this.modules.formatter=Et),Et.type==="3rdParty"&&this.modules.external.push(Et),this}},{key:"setResolvedLanguage",value:function(Et){if(!(!Et||!this.languages)&&!(["cimode","dev"].indexOf(Et)>-1))for(var St=0;St<this.languages.length;St++){var Tt=this.languages[St];if(!(["cimode","dev"].indexOf(Tt)>-1)&&this.store.hasLanguageSomeTranslations(Tt)){this.resolvedLanguage=Tt;break}}}},{key:"changeLanguage",value:function(Et,St){var Tt=this;this.isLanguageChangingTo=Et;var At=defer();this.emit("languageChanging",Et);var Ct=function(Nt){Tt.language=Nt,Tt.languages=Tt.services.languageUtils.toResolveHierarchy(Nt),Tt.resolvedLanguage=void 0,Tt.setResolvedLanguage(Nt)},Rt=function(Nt,zt){zt?(Ct(zt),Tt.translator.changeLanguage(zt),Tt.isLanguageChangingTo=void 0,Tt.emit("languageChanged",zt),Tt.logger.log("languageChanged",zt)):Tt.isLanguageChangingTo=void 0,At.resolve(function(){return Tt.t.apply(Tt,arguments)}),St&&St(Nt,function(){return Tt.t.apply(Tt,arguments)})},Dt=function(Nt){!Et&&!Nt&&Tt.services.languageDetector&&(Nt=[]);var zt=typeof Nt=="string"?Nt:Tt.services.languageUtils.getBestMatchFromCodes(Nt);zt&&(Tt.language||Ct(zt),Tt.translator.language||Tt.translator.changeLanguage(zt),Tt.services.languageDetector&&Tt.services.languageDetector.cacheUserLanguage&&Tt.services.languageDetector.cacheUserLanguage(zt)),Tt.loadResources(zt,function(Wt){Rt(Wt,zt)})};return!Et&&this.services.languageDetector&&!this.services.languageDetector.async?Dt(this.services.languageDetector.detect()):!Et&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(Dt):this.services.languageDetector.detect(Dt):Dt(Et),At}},{key:"getFixedT",value:function(Et,St,Tt){var At=this,Ct=function Rt(Dt,kt){var Nt;if(_typeof$3(kt)!=="object"){for(var zt=arguments.length,Wt=new Array(zt>2?zt-2:0),nr=2;nr<zt;nr++)Wt[nr-2]=arguments[nr];Nt=At.options.overloadTranslationOptionHandler([Dt,kt].concat(Wt))}else Nt=_objectSpread({},kt);Nt.lng=Nt.lng||Rt.lng,Nt.lngs=Nt.lngs||Rt.lngs,Nt.ns=Nt.ns||Rt.ns,Nt.keyPrefix=Nt.keyPrefix||Tt||Rt.keyPrefix;var Ut=At.options.keySeparator||".",Ht;return Nt.keyPrefix&&Array.isArray(Dt)?Ht=Dt.map(function(Bt){return"".concat(Nt.keyPrefix).concat(Ut).concat(Bt)}):Ht=Nt.keyPrefix?"".concat(Nt.keyPrefix).concat(Ut).concat(Dt):Dt,At.t(Ht,Nt)};return typeof Et=="string"?Ct.lng=Et:Ct.lngs=Et,Ct.ns=St,Ct.keyPrefix=Tt,Ct}},{key:"t",value:function(){var Et;return this.translator&&(Et=this.translator).translate.apply(Et,arguments)}},{key:"exists",value:function(){var Et;return this.translator&&(Et=this.translator).exists.apply(Et,arguments)}},{key:"setDefaultNamespace",value:function(Et){this.options.defaultNS=Et}},{key:"hasLoadedNamespace",value:function(Et){var St=this,Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var At=this.resolvedLanguage||this.languages[0],Ct=this.options?this.options.fallbackLng:!1,Rt=this.languages[this.languages.length-1];if(At.toLowerCase()==="cimode")return!0;var Dt=function(zt,Wt){var nr=St.services.backendConnector.state["".concat(zt,"|").concat(Wt)];return nr===-1||nr===2};if(Tt.precheck){var kt=Tt.precheck(this,Dt);if(kt!==void 0)return kt}return!!(this.hasResourceBundle(At,Et)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||Dt(At,Et)&&(!Ct||Dt(Rt,Et)))}},{key:"loadNamespaces",value:function(Et,St){var Tt=this,At=defer();return this.options.ns?(typeof Et=="string"&&(Et=[Et]),Et.forEach(function(Ct){Tt.options.ns.indexOf(Ct)<0&&Tt.options.ns.push(Ct)}),this.loadResources(function(Ct){At.resolve(),St&&St(Ct)}),At):(St&&St(),Promise.resolve())}},{key:"loadLanguages",value:function(Et,St){var Tt=defer();typeof Et=="string"&&(Et=[Et]);var At=this.options.preload||[],Ct=Et.filter(function(Rt){return At.indexOf(Rt)<0});return Ct.length?(this.options.preload=At.concat(Ct),this.loadResources(function(Rt){Tt.resolve(),St&&St(Rt)}),Tt):(St&&St(),Promise.resolve())}},{key:"dir",value:function(Et){if(Et||(Et=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!Et)return"rtl";var St=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],Tt=this.services&&this.services.languageUtils||new LanguageUtil(get$1());return St.indexOf(Tt.getLanguagePartFromCode(Et))>-1||Et.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var Et=this,St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop,At=_objectSpread(_objectSpread(_objectSpread({},this.options),St),{isClone:!0}),Ct=new dt(At);(St.debug!==void 0||St.prefix!==void 0)&&(Ct.logger=Ct.logger.clone(St));var Rt=["store","services","language"];return Rt.forEach(function(Dt){Ct[Dt]=Et[Dt]}),Ct.services=_objectSpread({},this.services),Ct.services.utils={hasLoadedNamespace:Ct.hasLoadedNamespace.bind(Ct)},Ct.translator=new Translator(Ct.services,Ct.options),Ct.translator.on("*",function(Dt){for(var kt=arguments.length,Nt=new Array(kt>1?kt-1:0),zt=1;zt<kt;zt++)Nt[zt-1]=arguments[zt];Ct.emit.apply(Ct,[Dt].concat(Nt))}),Ct.init(At,Tt),Ct.translator.options=Ct.options,Ct.translator.backendConnector.services.utils={hasLoadedNamespace:Ct.hasLoadedNamespace.bind(Ct)},Ct}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),dt}(EventEmitter);_defineProperty$4(I18n,"createInstance",function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ft=arguments.length>1?arguments[1]:void 0;return new I18n(lt,ft)});var instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;var arr=[],each=arr.forEach,slice=arr.slice;function defaults(lt){return each.call(slice.call(arguments,1),function(ft){if(ft)for(var dt in ft)lt[dt]===void 0&&(lt[dt]=ft[dt])}),lt}var fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,serializeCookie=function(ft,dt,vt){var Et=vt||{};Et.path=Et.path||"/";var St=encodeURIComponent(dt),Tt="".concat(ft,"=").concat(St);if(Et.maxAge>0){var At=Et.maxAge-0;if(Number.isNaN(At))throw new Error("maxAge should be a Number");Tt+="; Max-Age=".concat(Math.floor(At))}if(Et.domain){if(!fieldContentRegExp.test(Et.domain))throw new TypeError("option domain is invalid");Tt+="; Domain=".concat(Et.domain)}if(Et.path){if(!fieldContentRegExp.test(Et.path))throw new TypeError("option path is invalid");Tt+="; Path=".concat(Et.path)}if(Et.expires){if(typeof Et.expires.toUTCString!="function")throw new TypeError("option expires is invalid");Tt+="; Expires=".concat(Et.expires.toUTCString())}if(Et.httpOnly&&(Tt+="; HttpOnly"),Et.secure&&(Tt+="; Secure"),Et.sameSite){var Ct=typeof Et.sameSite=="string"?Et.sameSite.toLowerCase():Et.sameSite;switch(Ct){case!0:Tt+="; SameSite=Strict";break;case"lax":Tt+="; SameSite=Lax";break;case"strict":Tt+="; SameSite=Strict";break;case"none":Tt+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return Tt},cookie={create:function(ft,dt,vt,Et){var St=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};vt&&(St.expires=new Date,St.expires.setTime(St.expires.getTime()+vt*60*1e3)),Et&&(St.domain=Et),document.cookie=serializeCookie(ft,encodeURIComponent(dt),St)},read:function(ft){for(var dt="".concat(ft,"="),vt=document.cookie.split(";"),Et=0;Et<vt.length;Et++){for(var St=vt[Et];St.charAt(0)===" ";)St=St.substring(1,St.length);if(St.indexOf(dt)===0)return St.substring(dt.length,St.length)}return null},remove:function(ft){this.create(ft,"",-1)}},cookie$1={name:"cookie",lookup:function(ft){var dt;if(ft.lookupCookie&&typeof document<"u"){var vt=cookie.read(ft.lookupCookie);vt&&(dt=vt)}return dt},cacheUserLanguage:function(ft,dt){dt.lookupCookie&&typeof document<"u"&&cookie.create(dt.lookupCookie,ft,dt.cookieMinutes,dt.cookieDomain,dt.cookieOptions)}},querystring={name:"querystring",lookup:function(ft){var dt;if(typeof window<"u"){var vt=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(vt=window.location.hash.substring(window.location.hash.indexOf("?")));for(var Et=vt.substring(1),St=Et.split("&"),Tt=0;Tt<St.length;Tt++){var At=St[Tt].indexOf("=");if(At>0){var Ct=St[Tt].substring(0,At);Ct===ft.lookupQuerystring&&(dt=St[Tt].substring(At+1))}}}return dt}},hasLocalStorageSupport=null,localStorageAvailable=function(){if(hasLocalStorageSupport!==null)return hasLocalStorageSupport;try{hasLocalStorageSupport=window!=="undefined"&&window.localStorage!==null;var ft="i18next.translate.boo";window.localStorage.setItem(ft,"foo"),window.localStorage.removeItem(ft)}catch{hasLocalStorageSupport=!1}return hasLocalStorageSupport},localStorage$1={name:"localStorage",lookup:function(ft){var dt;if(ft.lookupLocalStorage&&localStorageAvailable()){var vt=window.localStorage.getItem(ft.lookupLocalStorage);vt&&(dt=vt)}return dt},cacheUserLanguage:function(ft,dt){dt.lookupLocalStorage&&localStorageAvailable()&&window.localStorage.setItem(dt.lookupLocalStorage,ft)}},hasSessionStorageSupport=null,sessionStorageAvailable=function(){if(hasSessionStorageSupport!==null)return hasSessionStorageSupport;try{hasSessionStorageSupport=window!=="undefined"&&window.sessionStorage!==null;var ft="i18next.translate.boo";window.sessionStorage.setItem(ft,"foo"),window.sessionStorage.removeItem(ft)}catch{hasSessionStorageSupport=!1}return hasSessionStorageSupport},sessionStorage={name:"sessionStorage",lookup:function(ft){var dt;if(ft.lookupSessionStorage&&sessionStorageAvailable()){var vt=window.sessionStorage.getItem(ft.lookupSessionStorage);vt&&(dt=vt)}return dt},cacheUserLanguage:function(ft,dt){dt.lookupSessionStorage&&sessionStorageAvailable()&&window.sessionStorage.setItem(dt.lookupSessionStorage,ft)}},navigator$1={name:"navigator",lookup:function(ft){var dt=[];if(typeof navigator<"u"){if(navigator.languages)for(var vt=0;vt<navigator.languages.length;vt++)dt.push(navigator.languages[vt]);navigator.userLanguage&&dt.push(navigator.userLanguage),navigator.language&&dt.push(navigator.language)}return dt.length>0?dt:void 0}},htmlTag={name:"htmlTag",lookup:function(ft){var dt,vt=ft.htmlTag||(typeof document<"u"?document.documentElement:null);return vt&&typeof vt.getAttribute=="function"&&(dt=vt.getAttribute("lang")),dt}},path={name:"path",lookup:function(ft){var dt;if(typeof window<"u"){var vt=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(vt instanceof Array)if(typeof ft.lookupFromPathIndex=="number"){if(typeof vt[ft.lookupFromPathIndex]!="string")return;dt=vt[ft.lookupFromPathIndex].replace("/","")}else dt=vt[0].replace("/","")}return dt}},subdomain={name:"subdomain",lookup:function(ft){var dt=typeof ft.lookupFromSubdomainIndex=="number"?ft.lookupFromSubdomainIndex+1:1,vt=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(vt)return vt[dt]}};function getDefaults(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var Browser=function(){function lt(ft){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_classCallCheck$2(this,lt),this.type="languageDetector",this.detectors={},this.init(ft,dt)}return _createClass$2(lt,[{key:"init",value:function(dt){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=dt,this.options=defaults(vt,this.options||{},getDefaults()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=Et,this.addDetector(cookie$1),this.addDetector(querystring),this.addDetector(localStorage$1),this.addDetector(sessionStorage),this.addDetector(navigator$1),this.addDetector(htmlTag),this.addDetector(path),this.addDetector(subdomain)}},{key:"addDetector",value:function(dt){this.detectors[dt.name]=dt}},{key:"detect",value:function(dt){var vt=this;dt||(dt=this.options.order);var Et=[];return dt.forEach(function(St){if(vt.detectors[St]){var Tt=vt.detectors[St].lookup(vt.options);Tt&&typeof Tt=="string"&&(Tt=[Tt]),Tt&&(Et=Et.concat(Tt))}}),this.services.languageUtils.getBestMatchFromCodes?Et:Et.length>0?Et[0]:null}},{key:"cacheUserLanguage",value:function(dt,vt){var Et=this;vt||(vt=this.options.caches),vt&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(dt)>-1||vt.forEach(function(St){Et.detectors[St]&&Et.detectors[St].cacheUserLanguage(dt,Et.options)}))}}]),lt}();Browser.type="languageDetector";const global$1={name:"movie-web"},search={loading_series:"Fetching your favourite series...",loading_movie:"Fetching your favourite movies...",loading:"Loading...",allResults:"That's all we have!",noResults:"We couldn't find anything!",allFailed:"Failed to find media, try again!",headingTitle:"Search results",bookmarks:"Bookmarks",continueWatching:"Continue Watching",title:"What do you want to watch?",placeholder:"What do you want to watch?"},media={movie:"Movie",series:"Series",stopEditing:"Stop editing",errors:{genericTitle:"Whoops, it broke!",failedMeta:"Failed to load meta",mediaFailed:"We failed to request the media you asked for, check your internet connection and try again.",videoFailed:"We encountered an error while playing the video you requested. If this keeps happening please report the issue to the <0>Discord server</0> or on <1>GitHub</1>."}},seasons={seasonAndEpisode:"S{{season}} E{{episode}}"},notFound={genericTitle:"Not found",backArrow:"Back to home",media:{title:"Couldn't find that media",description:"We couldn't find the media you requested. Either it's been removed or you tampered with the URL"},provider:{title:"This provider has been disabled",description:"We had issues with the provider or it was too unstable to use, so we had to disable it."},page:{title:"Couldn't find that page",description:"We looked everywhere: under the bins, in the closet, behind the proxy but ultimately couldn't find the page you are looking for."}},searchBar={movie:"Movie",series:"Series",Search:"Search"},videoPlayer={findingBestVideo:"Finding the best video for you",noVideos:"Whoops, couldn't find any videos for you",loading:"Loading...",backToHome:"Back to home",backToHomeShort:"Back",seasonAndEpisode:"S{{season}} E{{episode}}",buttons:{episodes:"Episodes",source:"Source",captions:"Captions",download:"Download",settings:"Settings",pictureInPicture:"Picture in Picture",playbackSpeed:"Playback speed"},popouts:{sources:"Sources",seasons:"Seasons",captions:"Captions",playbackSpeed:"Playback speed",customPlaybackSpeed:"Custom playback speed",captionPreferences:{title:"Customize",delay:"Delay",fontSize:"Size",opacity:"Opacity",color:"Color"},episode:"E{{index}} - {{title}}",noCaptions:"No captions",linkedCaptions:"Linked captions",customCaption:"Custom caption",uploadCustomCaption:"Upload caption",noEmbeds:"No embeds were found for this source",errors:{loadingWentWong:"Something went wrong loading the episodes for {{seasonTitle}}",embedsError:"Something went wrong loading the embeds for this thing that you like"},descriptions:{sources:"What provider do you want to use?",embeds:"Choose which video to view",seasons:"Choose which season you want to watch",episode:"Pick an episode",captions:"Choose a subtitle language",captionPreferences:"Make subtitles look how you want it",playbackSpeed:"Change the playback speed"}},errors:{fatalError:"The video player encounted a fatal error, please report it to the <0>Discord server</0> or on <1>GitHub</1>."}},v3={newSiteTitle:"New version now released!",newDomain:"https://movie-web.app",newDomainText:"movie-web will soon be moving to a new domain: <0>https://movie-web.app</0>. Make sure to update all your bookmarks as <1>the old website will stop working on {{date}}.</1>",tireless:"We've worked tirelessly on this new update, we hope you will enjoy what we've been cooking up for the past months.",leaveAnnouncement:"Take me there!"},casting={casting:"Casting to device..."},errors={offline:"Check your internet connection"},en={global:global$1,search,media,seasons,notFound,searchBar,videoPlayer,v3,casting,errors};instance.use(Browser).use(initReactI18next).init({fallbackLng:"en",resources:{en:{translation:en}},interpolation:{escapeValue:!1}});const index="";var main={};Object.defineProperty(main,"__esModule",{value:!0});var unpack_1=main.unpack=main.detect=void 0;function detect(lt){return lt.replace(" ","").startsWith("eval(function(p,a,c,k,e,")}main.detect=detect;function unpack(lt){let{payload:ft,symtab:dt,radix:vt,count:Et}=At(lt);if(Et!=dt.length)throw Error("Malformed p.a.c.k.e.r. symtab.");let St;try{St=new Unbaser(vt)}catch{throw Error("Unknown p.a.c.k.e.r. encoding.")}function Tt(Rt){const Dt=Rt;let kt;return vt==1?kt=dt[parseInt(Dt)]:kt=dt[St.unbase(Dt)],kt||Dt}return lt=ft.replace(/\b\w+\b/g,Tt),lt;function At(Rt){const Dt=[/}\('(.*)', *(\d+|\[\]), *(\d+), *'(.*)'\.split\('\|'\), *(\d+), *(.*)\)\)/,/}\('(.*)', *(\d+|\[\]), *(\d+), *'(.*)'\.split\('\|'\)/];for(const kt of Dt){const Nt=kt.exec(Rt);if(Nt){let zt=Nt;zt[2]=="[]";try{return{payload:zt[1],symtab:zt[4].split("|"),radix:parseInt(zt[2]),count:parseInt(zt[3])}}catch{throw Error("Corrupted p.a.c.k.e.r. data.")}}}throw Error("Could not make sense of p.a.c.k.e.r data (unexpected code structure)")}function Ct(Rt){return Rt}}unpack_1=main.unpack=unpack;class Unbaser{constructor(ft){if(this.ALPHABET={62:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",95:"' !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~'"},this.dictionary={},this.base=ft,36<ft&&ft<62&&(this.ALPHABET[ft]=this.ALPHABET[ft]||this.ALPHABET[62].substr(0,ft)),2<=ft&&ft<=36)this.unbase=dt=>parseInt(dt,ft);else{try{[...this.ALPHABET[ft]].forEach((dt,vt)=>{this.dictionary[dt]=vt})}catch{throw Error("Unsupported base encoding.")}this.unbase=this._dictunbaser}}_dictunbaser(ft){let dt=0;return[...ft].reverse().forEach((vt,Et)=>{dt=dt+Math.pow(this.base,Et)*this.dictionary[vt]}),dt}}var cryptoJsExports={},cryptoJs={get exports(){return cryptoJsExports},set exports(lt){cryptoJsExports=lt}};function commonjsRequire(lt){throw new Error('Could not dynamically require "'+lt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var coreExports={},core={get exports(){return coreExports},set exports(lt){coreExports=lt}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(lt,ft){(function(dt,vt){lt.exports=vt()})(commonjsGlobal$1,function(){var dt=dt||function(vt,Et){var St;if(typeof window<"u"&&window.crypto&&(St=window.crypto),typeof self<"u"&&self.crypto&&(St=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(St=globalThis.crypto),!St&&typeof window<"u"&&window.msCrypto&&(St=window.msCrypto),!St&&typeof commonjsGlobal$1<"u"&&commonjsGlobal$1.crypto&&(St=commonjsGlobal$1.crypto),!St&&typeof commonjsRequire=="function")try{St=require$$0}catch{}var Tt=function(){if(St){if(typeof St.getRandomValues=="function")try{return St.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof St.randomBytes=="function")try{return St.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},At=Object.create||function(){function Bt(){}return function(Ft){var tr;return Bt.prototype=Ft,tr=new Bt,Bt.prototype=null,tr}}(),Ct={},Rt=Ct.lib={},Dt=Rt.Base=function(){return{extend:function(Bt){var Ft=At(this);return Bt&&Ft.mixIn(Bt),(!Ft.hasOwnProperty("init")||this.init===Ft.init)&&(Ft.init=function(){Ft.$super.init.apply(this,arguments)}),Ft.init.prototype=Ft,Ft.$super=this,Ft},create:function(){var Bt=this.extend();return Bt.init.apply(Bt,arguments),Bt},init:function(){},mixIn:function(Bt){for(var Ft in Bt)Bt.hasOwnProperty(Ft)&&(this[Ft]=Bt[Ft]);Bt.hasOwnProperty("toString")&&(this.toString=Bt.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),kt=Rt.WordArray=Dt.extend({init:function(Bt,Ft){Bt=this.words=Bt||[],Ft!=Et?this.sigBytes=Ft:this.sigBytes=Bt.length*4},toString:function(Bt){return(Bt||zt).stringify(this)},concat:function(Bt){var Ft=this.words,tr=Bt.words,cr=this.sigBytes,Kt=Bt.sigBytes;if(this.clamp(),cr%4)for(var Zt=0;Zt<Kt;Zt++){var rr=tr[Zt>>>2]>>>24-Zt%4*8&255;Ft[cr+Zt>>>2]|=rr<<24-(cr+Zt)%4*8}else for(var ar=0;ar<Kt;ar+=4)Ft[cr+ar>>>2]=tr[ar>>>2];return this.sigBytes+=Kt,this},clamp:function(){var Bt=this.words,Ft=this.sigBytes;Bt[Ft>>>2]&=4294967295<<32-Ft%4*8,Bt.length=vt.ceil(Ft/4)},clone:function(){var Bt=Dt.clone.call(this);return Bt.words=this.words.slice(0),Bt},random:function(Bt){for(var Ft=[],tr=0;tr<Bt;tr+=4)Ft.push(Tt());return new kt.init(Ft,Bt)}}),Nt=Ct.enc={},zt=Nt.Hex={stringify:function(Bt){for(var Ft=Bt.words,tr=Bt.sigBytes,cr=[],Kt=0;Kt<tr;Kt++){var Zt=Ft[Kt>>>2]>>>24-Kt%4*8&255;cr.push((Zt>>>4).toString(16)),cr.push((Zt&15).toString(16))}return cr.join("")},parse:function(Bt){for(var Ft=Bt.length,tr=[],cr=0;cr<Ft;cr+=2)tr[cr>>>3]|=parseInt(Bt.substr(cr,2),16)<<24-cr%8*4;return new kt.init(tr,Ft/2)}},Wt=Nt.Latin1={stringify:function(Bt){for(var Ft=Bt.words,tr=Bt.sigBytes,cr=[],Kt=0;Kt<tr;Kt++){var Zt=Ft[Kt>>>2]>>>24-Kt%4*8&255;cr.push(String.fromCharCode(Zt))}return cr.join("")},parse:function(Bt){for(var Ft=Bt.length,tr=[],cr=0;cr<Ft;cr++)tr[cr>>>2]|=(Bt.charCodeAt(cr)&255)<<24-cr%4*8;return new kt.init(tr,Ft)}},nr=Nt.Utf8={stringify:function(Bt){try{return decodeURIComponent(escape(Wt.stringify(Bt)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Bt){return Wt.parse(unescape(encodeURIComponent(Bt)))}},Ut=Rt.BufferedBlockAlgorithm=Dt.extend({reset:function(){this._data=new kt.init,this._nDataBytes=0},_append:function(Bt){typeof Bt=="string"&&(Bt=nr.parse(Bt)),this._data.concat(Bt),this._nDataBytes+=Bt.sigBytes},_process:function(Bt){var Ft,tr=this._data,cr=tr.words,Kt=tr.sigBytes,Zt=this.blockSize,rr=Zt*4,ar=Kt/rr;Bt?ar=vt.ceil(ar):ar=vt.max((ar|0)-this._minBufferSize,0);var sr=ar*Zt,dr=vt.min(sr*4,Kt);if(sr){for(var fr=0;fr<sr;fr+=Zt)this._doProcessBlock(cr,fr);Ft=cr.splice(0,sr),tr.sigBytes-=dr}return new kt.init(Ft,dr)},clone:function(){var Bt=Dt.clone.call(this);return Bt._data=this._data.clone(),Bt},_minBufferSize:0});Rt.Hasher=Ut.extend({cfg:Dt.extend(),init:function(Bt){this.cfg=this.cfg.extend(Bt),this.reset()},reset:function(){Ut.reset.call(this),this._doReset()},update:function(Bt){return this._append(Bt),this._process(),this},finalize:function(Bt){Bt&&this._append(Bt);var Ft=this._doFinalize();return Ft},blockSize:16,_createHelper:function(Bt){return function(Ft,tr){return new Bt.init(tr).finalize(Ft)}},_createHmacHelper:function(Bt){return function(Ft,tr){return new Ht.HMAC.init(Bt,tr).finalize(Ft)}}});var Ht=Ct.algo={};return Ct}(Math);return dt})}(core)),coreExports}var x64CoreExports={},x64Core={get exports(){return x64CoreExports},set exports(lt){x64CoreExports=lt}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,function(lt,ft){(function(dt,vt){lt.exports=vt(requireCore())})(commonjsGlobal$1,function(dt){return function(vt){var Et=dt,St=Et.lib,Tt=St.Base,At=St.WordArray,Ct=Et.x64={};Ct.Word=Tt.extend({init:function(Rt,Dt){this.high=Rt,this.low=Dt}}),Ct.WordArray=Tt.extend({init:function(Rt,Dt){Rt=this.words=Rt||[],Dt!=vt?this.sigBytes=Dt:this.sigBytes=Rt.length*8},toX32:function(){for(var Rt=this.words,Dt=Rt.length,kt=[],Nt=0;Nt<Dt;Nt++){var zt=Rt[Nt];kt.push(zt.high),kt.push(zt.low)}return At.create(kt,this.sigBytes)},clone:function(){for(var Rt=Tt.clone.call(this),Dt=Rt.words=this.words.slice(0),kt=Dt.length,Nt=0;Nt<kt;Nt++)Dt[Nt]=Dt[Nt].clone();return Rt}})}(),dt})}(x64Core)),x64CoreExports}var libTypedarraysExports={},libTypedarrays={get exports(){return libTypedarraysExports},set exports(lt){libTypedarraysExports=lt}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,function(lt,ft){(function(dt,vt){lt.exports=vt(requireCore())})(commonjsGlobal$1,function(dt){return function(){if(typeof ArrayBuffer=="function"){var vt=dt,Et=vt.lib,St=Et.WordArray,Tt=St.init,At=St.init=function(Ct){if(Ct instanceof ArrayBuffer&&(Ct=new Uint8Array(Ct)),(Ct instanceof Int8Array||typeof Uint8ClampedArray<"u"&&Ct instanceof Uint8ClampedArray||Ct instanceof Int16Array||Ct instanceof Uint16Array||Ct instanceof Int32Array||Ct instanceof Uint32Array||Ct instanceof Float32Array||Ct instanceof Float64Array)&&(Ct=new Uint8Array(Ct.buffer,Ct.byteOffset,Ct.byteLength)),Ct instanceof Uint8Array){for(var Rt=Ct.byteLength,Dt=[],kt=0;kt<Rt;kt++)Dt[kt>>>2]|=Ct[kt]<<24-kt%4*8;Tt.call(this,Dt,Rt)}else Tt.apply(this,arguments)};At.prototype=St}}(),dt.lib.WordArray})}(libTypedarrays)),libTypedarraysExports}var encUtf16Exports={},encUtf16={get exports(){return encUtf16Exports},set exports(lt){encUtf16Exports=lt}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,function(lt,ft){(function(dt,vt){lt.exports=vt(requireCore())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.WordArray,Tt=vt.enc;Tt.Utf16=Tt.Utf16BE={stringify:function(Ct){for(var Rt=Ct.words,Dt=Ct.sigBytes,kt=[],Nt=0;Nt<Dt;Nt+=2){var zt=Rt[Nt>>>2]>>>16-Nt%4*8&65535;kt.push(String.fromCharCode(zt))}return kt.join("")},parse:function(Ct){for(var Rt=Ct.length,Dt=[],kt=0;kt<Rt;kt++)Dt[kt>>>1]|=Ct.charCodeAt(kt)<<16-kt%2*16;return St.create(Dt,Rt*2)}},Tt.Utf16LE={stringify:function(Ct){for(var Rt=Ct.words,Dt=Ct.sigBytes,kt=[],Nt=0;Nt<Dt;Nt+=2){var zt=At(Rt[Nt>>>2]>>>16-Nt%4*8&65535);kt.push(String.fromCharCode(zt))}return kt.join("")},parse:function(Ct){for(var Rt=Ct.length,Dt=[],kt=0;kt<Rt;kt++)Dt[kt>>>1]|=At(Ct.charCodeAt(kt)<<16-kt%2*16);return St.create(Dt,Rt*2)}};function At(Ct){return Ct<<8&4278255360|Ct>>>8&16711935}}(),dt.enc.Utf16})}(encUtf16)),encUtf16Exports}var encBase64Exports={},encBase64={get exports(){return encBase64Exports},set exports(lt){encBase64Exports=lt}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,function(lt,ft){(function(dt,vt){lt.exports=vt(requireCore())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.WordArray,Tt=vt.enc;Tt.Base64={stringify:function(Ct){var Rt=Ct.words,Dt=Ct.sigBytes,kt=this._map;Ct.clamp();for(var Nt=[],zt=0;zt<Dt;zt+=3)for(var Wt=Rt[zt>>>2]>>>24-zt%4*8&255,nr=Rt[zt+1>>>2]>>>24-(zt+1)%4*8&255,Ut=Rt[zt+2>>>2]>>>24-(zt+2)%4*8&255,Ht=Wt<<16|nr<<8|Ut,Bt=0;Bt<4&&zt+Bt*.75<Dt;Bt++)Nt.push(kt.charAt(Ht>>>6*(3-Bt)&63));var Ft=kt.charAt(64);if(Ft)for(;Nt.length%4;)Nt.push(Ft);return Nt.join("")},parse:function(Ct){var Rt=Ct.length,Dt=this._map,kt=this._reverseMap;if(!kt){kt=this._reverseMap=[];for(var Nt=0;Nt<Dt.length;Nt++)kt[Dt.charCodeAt(Nt)]=Nt}var zt=Dt.charAt(64);if(zt){var Wt=Ct.indexOf(zt);Wt!==-1&&(Rt=Wt)}return At(Ct,Rt,kt)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function At(Ct,Rt,Dt){for(var kt=[],Nt=0,zt=0;zt<Rt;zt++)if(zt%4){var Wt=Dt[Ct.charCodeAt(zt-1)]<<zt%4*2,nr=Dt[Ct.charCodeAt(zt)]>>>6-zt%4*2,Ut=Wt|nr;kt[Nt>>>2]|=Ut<<24-Nt%4*8,Nt++}return St.create(kt,Nt)}}(),dt.enc.Base64})}(encBase64)),encBase64Exports}var encBase64urlExports={},encBase64url={get exports(){return encBase64urlExports},set exports(lt){encBase64urlExports=lt}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,function(lt,ft){(function(dt,vt){lt.exports=vt(requireCore())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.WordArray,Tt=vt.enc;Tt.Base64url={stringify:function(Ct,Rt=!0){var Dt=Ct.words,kt=Ct.sigBytes,Nt=Rt?this._safe_map:this._map;Ct.clamp();for(var zt=[],Wt=0;Wt<kt;Wt+=3)for(var nr=Dt[Wt>>>2]>>>24-Wt%4*8&255,Ut=Dt[Wt+1>>>2]>>>24-(Wt+1)%4*8&255,Ht=Dt[Wt+2>>>2]>>>24-(Wt+2)%4*8&255,Bt=nr<<16|Ut<<8|Ht,Ft=0;Ft<4&&Wt+Ft*.75<kt;Ft++)zt.push(Nt.charAt(Bt>>>6*(3-Ft)&63));var tr=Nt.charAt(64);if(tr)for(;zt.length%4;)zt.push(tr);return zt.join("")},parse:function(Ct,Rt=!0){var Dt=Ct.length,kt=Rt?this._safe_map:this._map,Nt=this._reverseMap;if(!Nt){Nt=this._reverseMap=[];for(var zt=0;zt<kt.length;zt++)Nt[kt.charCodeAt(zt)]=zt}var Wt=kt.charAt(64);if(Wt){var nr=Ct.indexOf(Wt);nr!==-1&&(Dt=nr)}return At(Ct,Dt,Nt)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function At(Ct,Rt,Dt){for(var kt=[],Nt=0,zt=0;zt<Rt;zt++)if(zt%4){var Wt=Dt[Ct.charCodeAt(zt-1)]<<zt%4*2,nr=Dt[Ct.charCodeAt(zt)]>>>6-zt%4*2,Ut=Wt|nr;kt[Nt>>>2]|=Ut<<24-Nt%4*8,Nt++}return St.create(kt,Nt)}}(),dt.enc.Base64url})}(encBase64url)),encBase64urlExports}var md5Exports={},md5={get exports(){return md5Exports},set exports(lt){md5Exports=lt}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(lt,ft){(function(dt,vt){lt.exports=vt(requireCore())})(commonjsGlobal$1,function(dt){return function(vt){var Et=dt,St=Et.lib,Tt=St.WordArray,At=St.Hasher,Ct=Et.algo,Rt=[];(function(){for(var nr=0;nr<64;nr++)Rt[nr]=vt.abs(vt.sin(nr+1))*4294967296|0})();var Dt=Ct.MD5=At.extend({_doReset:function(){this._hash=new Tt.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(nr,Ut){for(var Ht=0;Ht<16;Ht++){var Bt=Ut+Ht,Ft=nr[Bt];nr[Bt]=(Ft<<8|Ft>>>24)&16711935|(Ft<<24|Ft>>>8)&4278255360}var tr=this._hash.words,cr=nr[Ut+0],Kt=nr[Ut+1],Zt=nr[Ut+2],rr=nr[Ut+3],ar=nr[Ut+4],sr=nr[Ut+5],dr=nr[Ut+6],fr=nr[Ut+7],pr=nr[Ut+8],xr=nr[Ut+9],lr=nr[Ut+10],hr=nr[Ut+11],ur=nr[Ut+12],mr=nr[Ut+13],ir=nr[Ut+14],_r=nr[Ut+15],yr=tr[0],gr=tr[1],Sr=tr[2],Tr=tr[3];yr=kt(yr,gr,Sr,Tr,cr,7,Rt[0]),Tr=kt(Tr,yr,gr,Sr,Kt,12,Rt[1]),Sr=kt(Sr,Tr,yr,gr,Zt,17,Rt[2]),gr=kt(gr,Sr,Tr,yr,rr,22,Rt[3]),yr=kt(yr,gr,Sr,Tr,ar,7,Rt[4]),Tr=kt(Tr,yr,gr,Sr,sr,12,Rt[5]),Sr=kt(Sr,Tr,yr,gr,dr,17,Rt[6]),gr=kt(gr,Sr,Tr,yr,fr,22,Rt[7]),yr=kt(yr,gr,Sr,Tr,pr,7,Rt[8]),Tr=kt(Tr,yr,gr,Sr,xr,12,Rt[9]),Sr=kt(Sr,Tr,yr,gr,lr,17,Rt[10]),gr=kt(gr,Sr,Tr,yr,hr,22,Rt[11]),yr=kt(yr,gr,Sr,Tr,ur,7,Rt[12]),Tr=kt(Tr,yr,gr,Sr,mr,12,Rt[13]),Sr=kt(Sr,Tr,yr,gr,ir,17,Rt[14]),gr=kt(gr,Sr,Tr,yr,_r,22,Rt[15]),yr=Nt(yr,gr,Sr,Tr,Kt,5,Rt[16]),Tr=Nt(Tr,yr,gr,Sr,dr,9,Rt[17]),Sr=Nt(Sr,Tr,yr,gr,hr,14,Rt[18]),gr=Nt(gr,Sr,Tr,yr,cr,20,Rt[19]),yr=Nt(yr,gr,Sr,Tr,sr,5,Rt[20]),Tr=Nt(Tr,yr,gr,Sr,lr,9,Rt[21]),Sr=Nt(Sr,Tr,yr,gr,_r,14,Rt[22]),gr=Nt(gr,Sr,Tr,yr,ar,20,Rt[23]),yr=Nt(yr,gr,Sr,Tr,xr,5,Rt[24]),Tr=Nt(Tr,yr,gr,Sr,ir,9,Rt[25]),Sr=Nt(Sr,Tr,yr,gr,rr,14,Rt[26]),gr=Nt(gr,Sr,Tr,yr,pr,20,Rt[27]),yr=Nt(yr,gr,Sr,Tr,mr,5,Rt[28]),Tr=Nt(Tr,yr,gr,Sr,Zt,9,Rt[29]),Sr=Nt(Sr,Tr,yr,gr,fr,14,Rt[30]),gr=Nt(gr,Sr,Tr,yr,ur,20,Rt[31]),yr=zt(yr,gr,Sr,Tr,sr,4,Rt[32]),Tr=zt(Tr,yr,gr,Sr,pr,11,Rt[33]),Sr=zt(Sr,Tr,yr,gr,hr,16,Rt[34]),gr=zt(gr,Sr,Tr,yr,ir,23,Rt[35]),yr=zt(yr,gr,Sr,Tr,Kt,4,Rt[36]),Tr=zt(Tr,yr,gr,Sr,ar,11,Rt[37]),Sr=zt(Sr,Tr,yr,gr,fr,16,Rt[38]),gr=zt(gr,Sr,Tr,yr,lr,23,Rt[39]),yr=zt(yr,gr,Sr,Tr,mr,4,Rt[40]),Tr=zt(Tr,yr,gr,Sr,cr,11,Rt[41]),Sr=zt(Sr,Tr,yr,gr,rr,16,Rt[42]),gr=zt(gr,Sr,Tr,yr,dr,23,Rt[43]),yr=zt(yr,gr,Sr,Tr,xr,4,Rt[44]),Tr=zt(Tr,yr,gr,Sr,ur,11,Rt[45]),Sr=zt(Sr,Tr,yr,gr,_r,16,Rt[46]),gr=zt(gr,Sr,Tr,yr,Zt,23,Rt[47]),yr=Wt(yr,gr,Sr,Tr,cr,6,Rt[48]),Tr=Wt(Tr,yr,gr,Sr,fr,10,Rt[49]),Sr=Wt(Sr,Tr,yr,gr,ir,15,Rt[50]),gr=Wt(gr,Sr,Tr,yr,sr,21,Rt[51]),yr=Wt(yr,gr,Sr,Tr,ur,6,Rt[52]),Tr=Wt(Tr,yr,gr,Sr,rr,10,Rt[53]),Sr=Wt(Sr,Tr,yr,gr,lr,15,Rt[54]),gr=Wt(gr,Sr,Tr,yr,Kt,21,Rt[55]),yr=Wt(yr,gr,Sr,Tr,pr,6,Rt[56]),Tr=Wt(Tr,yr,gr,Sr,_r,10,Rt[57]),Sr=Wt(Sr,Tr,yr,gr,dr,15,Rt[58]),gr=Wt(gr,Sr,Tr,yr,mr,21,Rt[59]),yr=Wt(yr,gr,Sr,Tr,ar,6,Rt[60]),Tr=Wt(Tr,yr,gr,Sr,hr,10,Rt[61]),Sr=Wt(Sr,Tr,yr,gr,Zt,15,Rt[62]),gr=Wt(gr,Sr,Tr,yr,xr,21,Rt[63]),tr[0]=tr[0]+yr|0,tr[1]=tr[1]+gr|0,tr[2]=tr[2]+Sr|0,tr[3]=tr[3]+Tr|0},_doFinalize:function(){var nr=this._data,Ut=nr.words,Ht=this._nDataBytes*8,Bt=nr.sigBytes*8;Ut[Bt>>>5]|=128<<24-Bt%32;var Ft=vt.floor(Ht/4294967296),tr=Ht;Ut[(Bt+64>>>9<<4)+15]=(Ft<<8|Ft>>>24)&16711935|(Ft<<24|Ft>>>8)&4278255360,Ut[(Bt+64>>>9<<4)+14]=(tr<<8|tr>>>24)&16711935|(tr<<24|tr>>>8)&4278255360,nr.sigBytes=(Ut.length+1)*4,this._process();for(var cr=this._hash,Kt=cr.words,Zt=0;Zt<4;Zt++){var rr=Kt[Zt];Kt[Zt]=(rr<<8|rr>>>24)&16711935|(rr<<24|rr>>>8)&4278255360}return cr},clone:function(){var nr=At.clone.call(this);return nr._hash=this._hash.clone(),nr}});function kt(nr,Ut,Ht,Bt,Ft,tr,cr){var Kt=nr+(Ut&Ht|~Ut&Bt)+Ft+cr;return(Kt<<tr|Kt>>>32-tr)+Ut}function Nt(nr,Ut,Ht,Bt,Ft,tr,cr){var Kt=nr+(Ut&Bt|Ht&~Bt)+Ft+cr;return(Kt<<tr|Kt>>>32-tr)+Ut}function zt(nr,Ut,Ht,Bt,Ft,tr,cr){var Kt=nr+(Ut^Ht^Bt)+Ft+cr;return(Kt<<tr|Kt>>>32-tr)+Ut}function Wt(nr,Ut,Ht,Bt,Ft,tr,cr){var Kt=nr+(Ht^(Ut|~Bt))+Ft+cr;return(Kt<<tr|Kt>>>32-tr)+Ut}Et.MD5=At._createHelper(Dt),Et.HmacMD5=At._createHmacHelper(Dt)}(Math),dt.MD5})}(md5)),md5Exports}var sha1Exports={},sha1={get exports(){return sha1Exports},set exports(lt){sha1Exports=lt}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,function(lt,ft){(function(dt,vt){lt.exports=vt(requireCore())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.WordArray,Tt=Et.Hasher,At=vt.algo,Ct=[],Rt=At.SHA1=Tt.extend({_doReset:function(){this._hash=new St.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(Dt,kt){for(var Nt=this._hash.words,zt=Nt[0],Wt=Nt[1],nr=Nt[2],Ut=Nt[3],Ht=Nt[4],Bt=0;Bt<80;Bt++){if(Bt<16)Ct[Bt]=Dt[kt+Bt]|0;else{var Ft=Ct[Bt-3]^Ct[Bt-8]^Ct[Bt-14]^Ct[Bt-16];Ct[Bt]=Ft<<1|Ft>>>31}var tr=(zt<<5|zt>>>27)+Ht+Ct[Bt];Bt<20?tr+=(Wt&nr|~Wt&Ut)+1518500249:Bt<40?tr+=(Wt^nr^Ut)+1859775393:Bt<60?tr+=(Wt&nr|Wt&Ut|nr&Ut)-1894007588:tr+=(Wt^nr^Ut)-899497514,Ht=Ut,Ut=nr,nr=Wt<<30|Wt>>>2,Wt=zt,zt=tr}Nt[0]=Nt[0]+zt|0,Nt[1]=Nt[1]+Wt|0,Nt[2]=Nt[2]+nr|0,Nt[3]=Nt[3]+Ut|0,Nt[4]=Nt[4]+Ht|0},_doFinalize:function(){var Dt=this._data,kt=Dt.words,Nt=this._nDataBytes*8,zt=Dt.sigBytes*8;return kt[zt>>>5]|=128<<24-zt%32,kt[(zt+64>>>9<<4)+14]=Math.floor(Nt/4294967296),kt[(zt+64>>>9<<4)+15]=Nt,Dt.sigBytes=kt.length*4,this._process(),this._hash},clone:function(){var Dt=Tt.clone.call(this);return Dt._hash=this._hash.clone(),Dt}});vt.SHA1=Tt._createHelper(Rt),vt.HmacSHA1=Tt._createHmacHelper(Rt)}(),dt.SHA1})}(sha1)),sha1Exports}var sha256Exports={},sha256={get exports(){return sha256Exports},set exports(lt){sha256Exports=lt}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,function(lt,ft){(function(dt,vt){lt.exports=vt(requireCore())})(commonjsGlobal$1,function(dt){return function(vt){var Et=dt,St=Et.lib,Tt=St.WordArray,At=St.Hasher,Ct=Et.algo,Rt=[],Dt=[];(function(){function zt(Ht){for(var Bt=vt.sqrt(Ht),Ft=2;Ft<=Bt;Ft++)if(!(Ht%Ft))return!1;return!0}function Wt(Ht){return(Ht-(Ht|0))*4294967296|0}for(var nr=2,Ut=0;Ut<64;)zt(nr)&&(Ut<8&&(Rt[Ut]=Wt(vt.pow(nr,1/2))),Dt[Ut]=Wt(vt.pow(nr,1/3)),Ut++),nr++})();var kt=[],Nt=Ct.SHA256=At.extend({_doReset:function(){this._hash=new Tt.init(Rt.slice(0))},_doProcessBlock:function(zt,Wt){for(var nr=this._hash.words,Ut=nr[0],Ht=nr[1],Bt=nr[2],Ft=nr[3],tr=nr[4],cr=nr[5],Kt=nr[6],Zt=nr[7],rr=0;rr<64;rr++){if(rr<16)kt[rr]=zt[Wt+rr]|0;else{var ar=kt[rr-15],sr=(ar<<25|ar>>>7)^(ar<<14|ar>>>18)^ar>>>3,dr=kt[rr-2],fr=(dr<<15|dr>>>17)^(dr<<13|dr>>>19)^dr>>>10;kt[rr]=sr+kt[rr-7]+fr+kt[rr-16]}var pr=tr&cr^~tr&Kt,xr=Ut&Ht^Ut&Bt^Ht&Bt,lr=(Ut<<30|Ut>>>2)^(Ut<<19|Ut>>>13)^(Ut<<10|Ut>>>22),hr=(tr<<26|tr>>>6)^(tr<<21|tr>>>11)^(tr<<7|tr>>>25),ur=Zt+hr+pr+Dt[rr]+kt[rr],mr=lr+xr;Zt=Kt,Kt=cr,cr=tr,tr=Ft+ur|0,Ft=Bt,Bt=Ht,Ht=Ut,Ut=ur+mr|0}nr[0]=nr[0]+Ut|0,nr[1]=nr[1]+Ht|0,nr[2]=nr[2]+Bt|0,nr[3]=nr[3]+Ft|0,nr[4]=nr[4]+tr|0,nr[5]=nr[5]+cr|0,nr[6]=nr[6]+Kt|0,nr[7]=nr[7]+Zt|0},_doFinalize:function(){var zt=this._data,Wt=zt.words,nr=this._nDataBytes*8,Ut=zt.sigBytes*8;return Wt[Ut>>>5]|=128<<24-Ut%32,Wt[(Ut+64>>>9<<4)+14]=vt.floor(nr/4294967296),Wt[(Ut+64>>>9<<4)+15]=nr,zt.sigBytes=Wt.length*4,this._process(),this._hash},clone:function(){var zt=At.clone.call(this);return zt._hash=this._hash.clone(),zt}});Et.SHA256=At._createHelper(Nt),Et.HmacSHA256=At._createHmacHelper(Nt)}(Math),dt.SHA256})}(sha256)),sha256Exports}var sha224Exports={},sha224={get exports(){return sha224Exports},set exports(lt){sha224Exports=lt}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireSha256())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.WordArray,Tt=vt.algo,At=Tt.SHA256,Ct=Tt.SHA224=At.extend({_doReset:function(){this._hash=new St.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var Rt=At._doFinalize.call(this);return Rt.sigBytes-=4,Rt}});vt.SHA224=At._createHelper(Ct),vt.HmacSHA224=At._createHmacHelper(Ct)}(),dt.SHA224})}(sha224)),sha224Exports}var sha512Exports={},sha512={get exports(){return sha512Exports},set exports(lt){sha512Exports=lt}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireX64Core())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.Hasher,Tt=vt.x64,At=Tt.Word,Ct=Tt.WordArray,Rt=vt.algo;function Dt(){return At.create.apply(At,arguments)}var kt=[Dt(1116352408,3609767458),Dt(1899447441,602891725),Dt(3049323471,3964484399),Dt(3921009573,2173295548),Dt(961987163,4081628472),Dt(1508970993,3053834265),Dt(2453635748,2937671579),Dt(2870763221,3664609560),Dt(3624381080,2734883394),Dt(310598401,1164996542),Dt(607225278,1323610764),Dt(1426881987,3590304994),Dt(1925078388,4068182383),Dt(2162078206,991336113),Dt(2614888103,633803317),Dt(3248222580,3479774868),Dt(3835390401,2666613458),Dt(4022224774,944711139),Dt(264347078,2341262773),Dt(604807628,2007800933),Dt(770255983,1495990901),Dt(1249150122,1856431235),Dt(1555081692,3175218132),Dt(1996064986,2198950837),Dt(2554220882,3999719339),Dt(2821834349,766784016),Dt(2952996808,2566594879),Dt(3210313671,3203337956),Dt(3336571891,1034457026),Dt(3584528711,2466948901),Dt(113926993,3758326383),Dt(338241895,168717936),Dt(666307205,1188179964),Dt(773529912,1546045734),Dt(1294757372,1522805485),Dt(1396182291,2643833823),Dt(1695183700,2343527390),Dt(1986661051,1014477480),Dt(2177026350,1206759142),Dt(2456956037,344077627),Dt(2730485921,1290863460),Dt(2820302411,3158454273),Dt(3259730800,3505952657),Dt(3345764771,106217008),Dt(3516065817,3606008344),Dt(3600352804,1432725776),Dt(4094571909,1467031594),Dt(275423344,851169720),Dt(430227734,3100823752),Dt(506948616,1363258195),Dt(659060556,3750685593),Dt(883997877,3785050280),Dt(958139571,3318307427),Dt(1322822218,3812723403),Dt(1537002063,2003034995),Dt(1747873779,3602036899),Dt(1955562222,1575990012),Dt(2024104815,1125592928),Dt(2227730452,2716904306),Dt(2361852424,442776044),Dt(2428436474,593698344),Dt(2756734187,3733110249),Dt(3204031479,2999351573),Dt(3329325298,3815920427),Dt(3391569614,3928383900),Dt(3515267271,566280711),Dt(3940187606,3454069534),Dt(4118630271,4000239992),Dt(116418474,1914138554),Dt(174292421,2731055270),Dt(289380356,3203993006),Dt(460393269,320620315),Dt(685471733,587496836),Dt(852142971,1086792851),Dt(1017036298,365543100),Dt(1126000580,2618297676),Dt(1288033470,3409855158),Dt(1501505948,4234509866),Dt(1607167915,987167468),Dt(1816402316,1246189591)],Nt=[];(function(){for(var Wt=0;Wt<80;Wt++)Nt[Wt]=Dt()})();var zt=Rt.SHA512=St.extend({_doReset:function(){this._hash=new Ct.init([new At.init(1779033703,4089235720),new At.init(3144134277,2227873595),new At.init(1013904242,4271175723),new At.init(2773480762,1595750129),new At.init(1359893119,2917565137),new At.init(2600822924,725511199),new At.init(528734635,4215389547),new At.init(1541459225,327033209)])},_doProcessBlock:function(Wt,nr){for(var Ut=this._hash.words,Ht=Ut[0],Bt=Ut[1],Ft=Ut[2],tr=Ut[3],cr=Ut[4],Kt=Ut[5],Zt=Ut[6],rr=Ut[7],ar=Ht.high,sr=Ht.low,dr=Bt.high,fr=Bt.low,pr=Ft.high,xr=Ft.low,lr=tr.high,hr=tr.low,ur=cr.high,mr=cr.low,ir=Kt.high,_r=Kt.low,yr=Zt.high,gr=Zt.low,Sr=rr.high,Tr=rr.low,br=ar,Ar=sr,Or=dr,Ir=fr,Cr=pr,Rr=xr,Pr=lr,wr=hr,Dr=ur,kr=mr,Fr=ir,Br=_r,Kr=yr,Vr=gr,Gr=Sr,jr=Tr,zr=0;zr<80;zr++){var Xr,Zr,ln=Nt[zr];if(zr<16)Zr=ln.high=Wt[nr+zr*2]|0,Xr=ln.low=Wt[nr+zr*2+1]|0;else{var Qr=Nt[zr-15],an=Qr.high,Jr=Qr.low,cn=(an>>>1|Jr<<31)^(an>>>8|Jr<<24)^an>>>7,un=(Jr>>>1|an<<31)^(Jr>>>8|an<<24)^(Jr>>>7|an<<25),vn=Nt[zr-2],hn=vn.high,fn=vn.low,pn=(hn>>>19|fn<<13)^(hn<<3|fn>>>29)^hn>>>6,Tn=(fn>>>19|hn<<13)^(fn<<3|hn>>>29)^(fn>>>6|hn<<26),$n=Nt[zr-7],Ln=$n.high,Dn=$n.low,mn=Nt[zr-16],On=mn.high,xn=mn.low;Xr=un+Dn,Zr=cn+Ln+(Xr>>>0<un>>>0?1:0),Xr=Xr+Tn,Zr=Zr+pn+(Xr>>>0<Tn>>>0?1:0),Xr=Xr+xn,Zr=Zr+On+(Xr>>>0<xn>>>0?1:0),ln.high=Zr,ln.low=Xr}var tn=Dr&Fr^~Dr&Kr,En=kr&Br^~kr&Vr,Mn=br&Or^br&Cr^Or&Cr,gn=Ar&Ir^Ar&Rr^Ir&Rr,In=(br>>>28|Ar<<4)^(br<<30|Ar>>>2)^(br<<25|Ar>>>7),bn=(Ar>>>28|br<<4)^(Ar<<30|br>>>2)^(Ar<<25|br>>>7),Kn=(Dr>>>14|kr<<18)^(Dr>>>18|kr<<14)^(Dr<<23|kr>>>9),Hn=(kr>>>14|Dr<<18)^(kr>>>18|Dr<<14)^(kr<<23|Dr>>>9),Nn=kt[zr],Vn=Nn.high,Gn=Nn.low,yn=jr+Hn,Cn=Gr+Kn+(yn>>>0<jr>>>0?1:0),yn=yn+En,Cn=Cn+tn+(yn>>>0<En>>>0?1:0),yn=yn+Gn,Cn=Cn+Vn+(yn>>>0<Gn>>>0?1:0),yn=yn+Xr,Cn=Cn+Zr+(yn>>>0<Xr>>>0?1:0),Wn=bn+gn,zn=In+Mn+(Wn>>>0<bn>>>0?1:0);Gr=Kr,jr=Vr,Kr=Fr,Vr=Br,Fr=Dr,Br=kr,kr=wr+yn|0,Dr=Pr+Cn+(kr>>>0<wr>>>0?1:0)|0,Pr=Cr,wr=Rr,Cr=Or,Rr=Ir,Or=br,Ir=Ar,Ar=yn+Wn|0,br=Cn+zn+(Ar>>>0<yn>>>0?1:0)|0}sr=Ht.low=sr+Ar,Ht.high=ar+br+(sr>>>0<Ar>>>0?1:0),fr=Bt.low=fr+Ir,Bt.high=dr+Or+(fr>>>0<Ir>>>0?1:0),xr=Ft.low=xr+Rr,Ft.high=pr+Cr+(xr>>>0<Rr>>>0?1:0),hr=tr.low=hr+wr,tr.high=lr+Pr+(hr>>>0<wr>>>0?1:0),mr=cr.low=mr+kr,cr.high=ur+Dr+(mr>>>0<kr>>>0?1:0),_r=Kt.low=_r+Br,Kt.high=ir+Fr+(_r>>>0<Br>>>0?1:0),gr=Zt.low=gr+Vr,Zt.high=yr+Kr+(gr>>>0<Vr>>>0?1:0),Tr=rr.low=Tr+jr,rr.high=Sr+Gr+(Tr>>>0<jr>>>0?1:0)},_doFinalize:function(){var Wt=this._data,nr=Wt.words,Ut=this._nDataBytes*8,Ht=Wt.sigBytes*8;nr[Ht>>>5]|=128<<24-Ht%32,nr[(Ht+128>>>10<<5)+30]=Math.floor(Ut/4294967296),nr[(Ht+128>>>10<<5)+31]=Ut,Wt.sigBytes=nr.length*4,this._process();var Bt=this._hash.toX32();return Bt},clone:function(){var Wt=St.clone.call(this);return Wt._hash=this._hash.clone(),Wt},blockSize:1024/32});vt.SHA512=St._createHelper(zt),vt.HmacSHA512=St._createHmacHelper(zt)}(),dt.SHA512})}(sha512)),sha512Exports}var sha384Exports={},sha384={get exports(){return sha384Exports},set exports(lt){sha384Exports=lt}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireX64Core(),requireSha512())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.x64,St=Et.Word,Tt=Et.WordArray,At=vt.algo,Ct=At.SHA512,Rt=At.SHA384=Ct.extend({_doReset:function(){this._hash=new Tt.init([new St.init(3418070365,3238371032),new St.init(1654270250,914150663),new St.init(2438529370,812702999),new St.init(355462360,4144912697),new St.init(1731405415,4290775857),new St.init(2394180231,1750603025),new St.init(3675008525,1694076839),new St.init(1203062813,3204075428)])},_doFinalize:function(){var Dt=Ct._doFinalize.call(this);return Dt.sigBytes-=16,Dt}});vt.SHA384=Ct._createHelper(Rt),vt.HmacSHA384=Ct._createHmacHelper(Rt)}(),dt.SHA384})}(sha384)),sha384Exports}var sha3Exports={},sha3={get exports(){return sha3Exports},set exports(lt){sha3Exports=lt}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireX64Core())})(commonjsGlobal$1,function(dt){return function(vt){var Et=dt,St=Et.lib,Tt=St.WordArray,At=St.Hasher,Ct=Et.x64,Rt=Ct.Word,Dt=Et.algo,kt=[],Nt=[],zt=[];(function(){for(var Ut=1,Ht=0,Bt=0;Bt<24;Bt++){kt[Ut+5*Ht]=(Bt+1)*(Bt+2)/2%64;var Ft=Ht%5,tr=(2*Ut+3*Ht)%5;Ut=Ft,Ht=tr}for(var Ut=0;Ut<5;Ut++)for(var Ht=0;Ht<5;Ht++)Nt[Ut+5*Ht]=Ht+(2*Ut+3*Ht)%5*5;for(var cr=1,Kt=0;Kt<24;Kt++){for(var Zt=0,rr=0,ar=0;ar<7;ar++){if(cr&1){var sr=(1<<ar)-1;sr<32?rr^=1<<sr:Zt^=1<<sr-32}cr&128?cr=cr<<1^113:cr<<=1}zt[Kt]=Rt.create(Zt,rr)}})();var Wt=[];(function(){for(var Ut=0;Ut<25;Ut++)Wt[Ut]=Rt.create()})();var nr=Dt.SHA3=At.extend({cfg:At.cfg.extend({outputLength:512}),_doReset:function(){for(var Ut=this._state=[],Ht=0;Ht<25;Ht++)Ut[Ht]=new Rt.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(Ut,Ht){for(var Bt=this._state,Ft=this.blockSize/2,tr=0;tr<Ft;tr++){var cr=Ut[Ht+2*tr],Kt=Ut[Ht+2*tr+1];cr=(cr<<8|cr>>>24)&16711935|(cr<<24|cr>>>8)&4278255360,Kt=(Kt<<8|Kt>>>24)&16711935|(Kt<<24|Kt>>>8)&4278255360;var Zt=Bt[tr];Zt.high^=Kt,Zt.low^=cr}for(var rr=0;rr<24;rr++){for(var ar=0;ar<5;ar++){for(var sr=0,dr=0,fr=0;fr<5;fr++){var Zt=Bt[ar+5*fr];sr^=Zt.high,dr^=Zt.low}var pr=Wt[ar];pr.high=sr,pr.low=dr}for(var ar=0;ar<5;ar++)for(var xr=Wt[(ar+4)%5],lr=Wt[(ar+1)%5],hr=lr.high,ur=lr.low,sr=xr.high^(hr<<1|ur>>>31),dr=xr.low^(ur<<1|hr>>>31),fr=0;fr<5;fr++){var Zt=Bt[ar+5*fr];Zt.high^=sr,Zt.low^=dr}for(var mr=1;mr<25;mr++){var sr,dr,Zt=Bt[mr],ir=Zt.high,_r=Zt.low,yr=kt[mr];yr<32?(sr=ir<<yr|_r>>>32-yr,dr=_r<<yr|ir>>>32-yr):(sr=_r<<yr-32|ir>>>64-yr,dr=ir<<yr-32|_r>>>64-yr);var gr=Wt[Nt[mr]];gr.high=sr,gr.low=dr}var Sr=Wt[0],Tr=Bt[0];Sr.high=Tr.high,Sr.low=Tr.low;for(var ar=0;ar<5;ar++)for(var fr=0;fr<5;fr++){var mr=ar+5*fr,Zt=Bt[mr],br=Wt[mr],Ar=Wt[(ar+1)%5+5*fr],Or=Wt[(ar+2)%5+5*fr];Zt.high=br.high^~Ar.high&Or.high,Zt.low=br.low^~Ar.low&Or.low}var Zt=Bt[0],Ir=zt[rr];Zt.high^=Ir.high,Zt.low^=Ir.low}},_doFinalize:function(){var Ut=this._data,Ht=Ut.words;this._nDataBytes*8;var Bt=Ut.sigBytes*8,Ft=this.blockSize*32;Ht[Bt>>>5]|=1<<24-Bt%32,Ht[(vt.ceil((Bt+1)/Ft)*Ft>>>5)-1]|=128,Ut.sigBytes=Ht.length*4,this._process();for(var tr=this._state,cr=this.cfg.outputLength/8,Kt=cr/8,Zt=[],rr=0;rr<Kt;rr++){var ar=tr[rr],sr=ar.high,dr=ar.low;sr=(sr<<8|sr>>>24)&16711935|(sr<<24|sr>>>8)&4278255360,dr=(dr<<8|dr>>>24)&16711935|(dr<<24|dr>>>8)&4278255360,Zt.push(dr),Zt.push(sr)}return new Tt.init(Zt,cr)},clone:function(){for(var Ut=At.clone.call(this),Ht=Ut._state=this._state.slice(0),Bt=0;Bt<25;Bt++)Ht[Bt]=Ht[Bt].clone();return Ut}});Et.SHA3=At._createHelper(nr),Et.HmacSHA3=At._createHmacHelper(nr)}(Math),dt.SHA3})}(sha3)),sha3Exports}var ripemd160Exports={},ripemd160={get exports(){return ripemd160Exports},set exports(lt){ripemd160Exports=lt}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,function(lt,ft){(function(dt,vt){lt.exports=vt(requireCore())})(commonjsGlobal$1,function(dt){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(vt){var Et=dt,St=Et.lib,Tt=St.WordArray,At=St.Hasher,Ct=Et.algo,Rt=Tt.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),Dt=Tt.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),kt=Tt.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),Nt=Tt.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),zt=Tt.create([0,1518500249,1859775393,2400959708,2840853838]),Wt=Tt.create([1352829926,1548603684,1836072691,2053994217,0]),nr=Ct.RIPEMD160=At.extend({_doReset:function(){this._hash=Tt.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(Kt,Zt){for(var rr=0;rr<16;rr++){var ar=Zt+rr,sr=Kt[ar];Kt[ar]=(sr<<8|sr>>>24)&16711935|(sr<<24|sr>>>8)&4278255360}var dr=this._hash.words,fr=zt.words,pr=Wt.words,xr=Rt.words,lr=Dt.words,hr=kt.words,ur=Nt.words,mr,ir,_r,yr,gr,Sr,Tr,br,Ar,Or;Sr=mr=dr[0],Tr=ir=dr[1],br=_r=dr[2],Ar=yr=dr[3],Or=gr=dr[4];for(var Ir,rr=0;rr<80;rr+=1)Ir=mr+Kt[Zt+xr[rr]]|0,rr<16?Ir+=Ut(ir,_r,yr)+fr[0]:rr<32?Ir+=Ht(ir,_r,yr)+fr[1]:rr<48?Ir+=Bt(ir,_r,yr)+fr[2]:rr<64?Ir+=Ft(ir,_r,yr)+fr[3]:Ir+=tr(ir,_r,yr)+fr[4],Ir=Ir|0,Ir=cr(Ir,hr[rr]),Ir=Ir+gr|0,mr=gr,gr=yr,yr=cr(_r,10),_r=ir,ir=Ir,Ir=Sr+Kt[Zt+lr[rr]]|0,rr<16?Ir+=tr(Tr,br,Ar)+pr[0]:rr<32?Ir+=Ft(Tr,br,Ar)+pr[1]:rr<48?Ir+=Bt(Tr,br,Ar)+pr[2]:rr<64?Ir+=Ht(Tr,br,Ar)+pr[3]:Ir+=Ut(Tr,br,Ar)+pr[4],Ir=Ir|0,Ir=cr(Ir,ur[rr]),Ir=Ir+Or|0,Sr=Or,Or=Ar,Ar=cr(br,10),br=Tr,Tr=Ir;Ir=dr[1]+_r+Ar|0,dr[1]=dr[2]+yr+Or|0,dr[2]=dr[3]+gr+Sr|0,dr[3]=dr[4]+mr+Tr|0,dr[4]=dr[0]+ir+br|0,dr[0]=Ir},_doFinalize:function(){var Kt=this._data,Zt=Kt.words,rr=this._nDataBytes*8,ar=Kt.sigBytes*8;Zt[ar>>>5]|=128<<24-ar%32,Zt[(ar+64>>>9<<4)+14]=(rr<<8|rr>>>24)&16711935|(rr<<24|rr>>>8)&4278255360,Kt.sigBytes=(Zt.length+1)*4,this._process();for(var sr=this._hash,dr=sr.words,fr=0;fr<5;fr++){var pr=dr[fr];dr[fr]=(pr<<8|pr>>>24)&16711935|(pr<<24|pr>>>8)&4278255360}return sr},clone:function(){var Kt=At.clone.call(this);return Kt._hash=this._hash.clone(),Kt}});function Ut(Kt,Zt,rr){return Kt^Zt^rr}function Ht(Kt,Zt,rr){return Kt&Zt|~Kt&rr}function Bt(Kt,Zt,rr){return(Kt|~Zt)^rr}function Ft(Kt,Zt,rr){return Kt&rr|Zt&~rr}function tr(Kt,Zt,rr){return Kt^(Zt|~rr)}function cr(Kt,Zt){return Kt<<Zt|Kt>>>32-Zt}Et.RIPEMD160=At._createHelper(nr),Et.HmacRIPEMD160=At._createHmacHelper(nr)}(),dt.RIPEMD160})}(ripemd160)),ripemd160Exports}var hmacExports={},hmac={get exports(){return hmacExports},set exports(lt){hmacExports=lt}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,function(lt,ft){(function(dt,vt){lt.exports=vt(requireCore())})(commonjsGlobal$1,function(dt){(function(){var vt=dt,Et=vt.lib,St=Et.Base,Tt=vt.enc,At=Tt.Utf8,Ct=vt.algo;Ct.HMAC=St.extend({init:function(Rt,Dt){Rt=this._hasher=new Rt.init,typeof Dt=="string"&&(Dt=At.parse(Dt));var kt=Rt.blockSize,Nt=kt*4;Dt.sigBytes>Nt&&(Dt=Rt.finalize(Dt)),Dt.clamp();for(var zt=this._oKey=Dt.clone(),Wt=this._iKey=Dt.clone(),nr=zt.words,Ut=Wt.words,Ht=0;Ht<kt;Ht++)nr[Ht]^=1549556828,Ut[Ht]^=909522486;zt.sigBytes=Wt.sigBytes=Nt,this.reset()},reset:function(){var Rt=this._hasher;Rt.reset(),Rt.update(this._iKey)},update:function(Rt){return this._hasher.update(Rt),this},finalize:function(Rt){var Dt=this._hasher,kt=Dt.finalize(Rt);Dt.reset();var Nt=Dt.finalize(this._oKey.clone().concat(kt));return Nt}})})()})}(hmac)),hmacExports}var pbkdf2Exports={},pbkdf2={get exports(){return pbkdf2Exports},set exports(lt){pbkdf2Exports=lt}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.Base,Tt=Et.WordArray,At=vt.algo,Ct=At.SHA1,Rt=At.HMAC,Dt=At.PBKDF2=St.extend({cfg:St.extend({keySize:128/32,hasher:Ct,iterations:1}),init:function(kt){this.cfg=this.cfg.extend(kt)},compute:function(kt,Nt){for(var zt=this.cfg,Wt=Rt.create(zt.hasher,kt),nr=Tt.create(),Ut=Tt.create([1]),Ht=nr.words,Bt=Ut.words,Ft=zt.keySize,tr=zt.iterations;Ht.length<Ft;){var cr=Wt.update(Nt).finalize(Ut);Wt.reset();for(var Kt=cr.words,Zt=Kt.length,rr=cr,ar=1;ar<tr;ar++){rr=Wt.finalize(rr),Wt.reset();for(var sr=rr.words,dr=0;dr<Zt;dr++)Kt[dr]^=sr[dr]}nr.concat(cr),Bt[0]++}return nr.sigBytes=Ft*4,nr}});vt.PBKDF2=function(kt,Nt,zt){return Dt.create(zt).compute(kt,Nt)}}(),dt.PBKDF2})}(pbkdf2)),pbkdf2Exports}var evpkdfExports={},evpkdf={get exports(){return evpkdfExports},set exports(lt){evpkdfExports=lt}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.Base,Tt=Et.WordArray,At=vt.algo,Ct=At.MD5,Rt=At.EvpKDF=St.extend({cfg:St.extend({keySize:128/32,hasher:Ct,iterations:1}),init:function(Dt){this.cfg=this.cfg.extend(Dt)},compute:function(Dt,kt){for(var Nt,zt=this.cfg,Wt=zt.hasher.create(),nr=Tt.create(),Ut=nr.words,Ht=zt.keySize,Bt=zt.iterations;Ut.length<Ht;){Nt&&Wt.update(Nt),Nt=Wt.update(Dt).finalize(kt),Wt.reset();for(var Ft=1;Ft<Bt;Ft++)Nt=Wt.finalize(Nt),Wt.reset();nr.concat(Nt)}return nr.sigBytes=Ht*4,nr}});vt.EvpKDF=function(Dt,kt,Nt){return Rt.create(Nt).compute(Dt,kt)}}(),dt.EvpKDF})}(evpkdf)),evpkdfExports}var cipherCoreExports={},cipherCore={get exports(){return cipherCoreExports},set exports(lt){cipherCoreExports=lt}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireEvpkdf())})(commonjsGlobal$1,function(dt){dt.lib.Cipher||function(vt){var Et=dt,St=Et.lib,Tt=St.Base,At=St.WordArray,Ct=St.BufferedBlockAlgorithm,Rt=Et.enc;Rt.Utf8;var Dt=Rt.Base64,kt=Et.algo,Nt=kt.EvpKDF,zt=St.Cipher=Ct.extend({cfg:Tt.extend(),createEncryptor:function(sr,dr){return this.create(this._ENC_XFORM_MODE,sr,dr)},createDecryptor:function(sr,dr){return this.create(this._DEC_XFORM_MODE,sr,dr)},init:function(sr,dr,fr){this.cfg=this.cfg.extend(fr),this._xformMode=sr,this._key=dr,this.reset()},reset:function(){Ct.reset.call(this),this._doReset()},process:function(sr){return this._append(sr),this._process()},finalize:function(sr){sr&&this._append(sr);var dr=this._doFinalize();return dr},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function sr(dr){return typeof dr=="string"?ar:Kt}return function(dr){return{encrypt:function(fr,pr,xr){return sr(pr).encrypt(dr,fr,pr,xr)},decrypt:function(fr,pr,xr){return sr(pr).decrypt(dr,fr,pr,xr)}}}}()});St.StreamCipher=zt.extend({_doFinalize:function(){var sr=this._process(!0);return sr},blockSize:1});var Wt=Et.mode={},nr=St.BlockCipherMode=Tt.extend({createEncryptor:function(sr,dr){return this.Encryptor.create(sr,dr)},createDecryptor:function(sr,dr){return this.Decryptor.create(sr,dr)},init:function(sr,dr){this._cipher=sr,this._iv=dr}}),Ut=Wt.CBC=function(){var sr=nr.extend();sr.Encryptor=sr.extend({processBlock:function(fr,pr){var xr=this._cipher,lr=xr.blockSize;dr.call(this,fr,pr,lr),xr.encryptBlock(fr,pr),this._prevBlock=fr.slice(pr,pr+lr)}}),sr.Decryptor=sr.extend({processBlock:function(fr,pr){var xr=this._cipher,lr=xr.blockSize,hr=fr.slice(pr,pr+lr);xr.decryptBlock(fr,pr),dr.call(this,fr,pr,lr),this._prevBlock=hr}});function dr(fr,pr,xr){var lr,hr=this._iv;hr?(lr=hr,this._iv=vt):lr=this._prevBlock;for(var ur=0;ur<xr;ur++)fr[pr+ur]^=lr[ur]}return sr}(),Ht=Et.pad={},Bt=Ht.Pkcs7={pad:function(sr,dr){for(var fr=dr*4,pr=fr-sr.sigBytes%fr,xr=pr<<24|pr<<16|pr<<8|pr,lr=[],hr=0;hr<pr;hr+=4)lr.push(xr);var ur=At.create(lr,pr);sr.concat(ur)},unpad:function(sr){var dr=sr.words[sr.sigBytes-1>>>2]&255;sr.sigBytes-=dr}};St.BlockCipher=zt.extend({cfg:zt.cfg.extend({mode:Ut,padding:Bt}),reset:function(){var sr;zt.reset.call(this);var dr=this.cfg,fr=dr.iv,pr=dr.mode;this._xformMode==this._ENC_XFORM_MODE?sr=pr.createEncryptor:(sr=pr.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==sr?this._mode.init(this,fr&&fr.words):(this._mode=sr.call(pr,this,fr&&fr.words),this._mode.__creator=sr)},_doProcessBlock:function(sr,dr){this._mode.processBlock(sr,dr)},_doFinalize:function(){var sr,dr=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(dr.pad(this._data,this.blockSize),sr=this._process(!0)):(sr=this._process(!0),dr.unpad(sr)),sr},blockSize:128/32});var Ft=St.CipherParams=Tt.extend({init:function(sr){this.mixIn(sr)},toString:function(sr){return(sr||this.formatter).stringify(this)}}),tr=Et.format={},cr=tr.OpenSSL={stringify:function(sr){var dr,fr=sr.ciphertext,pr=sr.salt;return pr?dr=At.create([1398893684,1701076831]).concat(pr).concat(fr):dr=fr,dr.toString(Dt)},parse:function(sr){var dr,fr=Dt.parse(sr),pr=fr.words;return pr[0]==1398893684&&pr[1]==1701076831&&(dr=At.create(pr.slice(2,4)),pr.splice(0,4),fr.sigBytes-=16),Ft.create({ciphertext:fr,salt:dr})}},Kt=St.SerializableCipher=Tt.extend({cfg:Tt.extend({format:cr}),encrypt:function(sr,dr,fr,pr){pr=this.cfg.extend(pr);var xr=sr.createEncryptor(fr,pr),lr=xr.finalize(dr),hr=xr.cfg;return Ft.create({ciphertext:lr,key:fr,iv:hr.iv,algorithm:sr,mode:hr.mode,padding:hr.padding,blockSize:sr.blockSize,formatter:pr.format})},decrypt:function(sr,dr,fr,pr){pr=this.cfg.extend(pr),dr=this._parse(dr,pr.format);var xr=sr.createDecryptor(fr,pr).finalize(dr.ciphertext);return xr},_parse:function(sr,dr){return typeof sr=="string"?dr.parse(sr,this):sr}}),Zt=Et.kdf={},rr=Zt.OpenSSL={execute:function(sr,dr,fr,pr){pr||(pr=At.random(64/8));var xr=Nt.create({keySize:dr+fr}).compute(sr,pr),lr=At.create(xr.words.slice(dr),fr*4);return xr.sigBytes=dr*4,Ft.create({key:xr,iv:lr,salt:pr})}},ar=St.PasswordBasedCipher=Kt.extend({cfg:Kt.cfg.extend({kdf:rr}),encrypt:function(sr,dr,fr,pr){pr=this.cfg.extend(pr);var xr=pr.kdf.execute(fr,sr.keySize,sr.ivSize);pr.iv=xr.iv;var lr=Kt.encrypt.call(this,sr,dr,xr.key,pr);return lr.mixIn(xr),lr},decrypt:function(sr,dr,fr,pr){pr=this.cfg.extend(pr),dr=this._parse(dr,pr.format);var xr=pr.kdf.execute(fr,sr.keySize,sr.ivSize,dr.salt);pr.iv=xr.iv;var lr=Kt.decrypt.call(this,sr,dr,xr.key,pr);return lr}})}()})}(cipherCore)),cipherCoreExports}var modeCfbExports={},modeCfb={get exports(){return modeCfbExports},set exports(lt){modeCfbExports=lt}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(dt){return dt.mode.CFB=function(){var vt=dt.lib.BlockCipherMode.extend();vt.Encryptor=vt.extend({processBlock:function(St,Tt){var At=this._cipher,Ct=At.blockSize;Et.call(this,St,Tt,Ct,At),this._prevBlock=St.slice(Tt,Tt+Ct)}}),vt.Decryptor=vt.extend({processBlock:function(St,Tt){var At=this._cipher,Ct=At.blockSize,Rt=St.slice(Tt,Tt+Ct);Et.call(this,St,Tt,Ct,At),this._prevBlock=Rt}});function Et(St,Tt,At,Ct){var Rt,Dt=this._iv;Dt?(Rt=Dt.slice(0),this._iv=void 0):Rt=this._prevBlock,Ct.encryptBlock(Rt,0);for(var kt=0;kt<At;kt++)St[Tt+kt]^=Rt[kt]}return vt}(),dt.mode.CFB})}(modeCfb)),modeCfbExports}var modeCtrExports={},modeCtr={get exports(){return modeCtrExports},set exports(lt){modeCtrExports=lt}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(dt){return dt.mode.CTR=function(){var vt=dt.lib.BlockCipherMode.extend(),Et=vt.Encryptor=vt.extend({processBlock:function(St,Tt){var At=this._cipher,Ct=At.blockSize,Rt=this._iv,Dt=this._counter;Rt&&(Dt=this._counter=Rt.slice(0),this._iv=void 0);var kt=Dt.slice(0);At.encryptBlock(kt,0),Dt[Ct-1]=Dt[Ct-1]+1|0;for(var Nt=0;Nt<Ct;Nt++)St[Tt+Nt]^=kt[Nt]}});return vt.Decryptor=Et,vt}(),dt.mode.CTR})}(modeCtr)),modeCtrExports}var modeCtrGladmanExports={},modeCtrGladman={get exports(){return modeCtrGladmanExports},set exports(lt){modeCtrGladmanExports=lt}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(dt){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return dt.mode.CTRGladman=function(){var vt=dt.lib.BlockCipherMode.extend();function Et(At){if((At>>24&255)===255){var Ct=At>>16&255,Rt=At>>8&255,Dt=At&255;Ct===255?(Ct=0,Rt===255?(Rt=0,Dt===255?Dt=0:++Dt):++Rt):++Ct,At=0,At+=Ct<<16,At+=Rt<<8,At+=Dt}else At+=1<<24;return At}function St(At){return(At[0]=Et(At[0]))===0&&(At[1]=Et(At[1])),At}var Tt=vt.Encryptor=vt.extend({processBlock:function(At,Ct){var Rt=this._cipher,Dt=Rt.blockSize,kt=this._iv,Nt=this._counter;kt&&(Nt=this._counter=kt.slice(0),this._iv=void 0),St(Nt);var zt=Nt.slice(0);Rt.encryptBlock(zt,0);for(var Wt=0;Wt<Dt;Wt++)At[Ct+Wt]^=zt[Wt]}});return vt.Decryptor=Tt,vt}(),dt.mode.CTRGladman})}(modeCtrGladman)),modeCtrGladmanExports}var modeOfbExports={},modeOfb={get exports(){return modeOfbExports},set exports(lt){modeOfbExports=lt}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(dt){return dt.mode.OFB=function(){var vt=dt.lib.BlockCipherMode.extend(),Et=vt.Encryptor=vt.extend({processBlock:function(St,Tt){var At=this._cipher,Ct=At.blockSize,Rt=this._iv,Dt=this._keystream;Rt&&(Dt=this._keystream=Rt.slice(0),this._iv=void 0),At.encryptBlock(Dt,0);for(var kt=0;kt<Ct;kt++)St[Tt+kt]^=Dt[kt]}});return vt.Decryptor=Et,vt}(),dt.mode.OFB})}(modeOfb)),modeOfbExports}var modeEcbExports={},modeEcb={get exports(){return modeEcbExports},set exports(lt){modeEcbExports=lt}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(dt){return dt.mode.ECB=function(){var vt=dt.lib.BlockCipherMode.extend();return vt.Encryptor=vt.extend({processBlock:function(Et,St){this._cipher.encryptBlock(Et,St)}}),vt.Decryptor=vt.extend({processBlock:function(Et,St){this._cipher.decryptBlock(Et,St)}}),vt}(),dt.mode.ECB})}(modeEcb)),modeEcbExports}var padAnsix923Exports={},padAnsix923={get exports(){return padAnsix923Exports},set exports(lt){padAnsix923Exports=lt}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(dt){return dt.pad.AnsiX923={pad:function(vt,Et){var St=vt.sigBytes,Tt=Et*4,At=Tt-St%Tt,Ct=St+At-1;vt.clamp(),vt.words[Ct>>>2]|=At<<24-Ct%4*8,vt.sigBytes+=At},unpad:function(vt){var Et=vt.words[vt.sigBytes-1>>>2]&255;vt.sigBytes-=Et}},dt.pad.Ansix923})}(padAnsix923)),padAnsix923Exports}var padIso10126Exports={},padIso10126={get exports(){return padIso10126Exports},set exports(lt){padIso10126Exports=lt}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(dt){return dt.pad.Iso10126={pad:function(vt,Et){var St=Et*4,Tt=St-vt.sigBytes%St;vt.concat(dt.lib.WordArray.random(Tt-1)).concat(dt.lib.WordArray.create([Tt<<24],1))},unpad:function(vt){var Et=vt.words[vt.sigBytes-1>>>2]&255;vt.sigBytes-=Et}},dt.pad.Iso10126})}(padIso10126)),padIso10126Exports}var padIso97971Exports={},padIso97971={get exports(){return padIso97971Exports},set exports(lt){padIso97971Exports=lt}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(dt){return dt.pad.Iso97971={pad:function(vt,Et){vt.concat(dt.lib.WordArray.create([2147483648],1)),dt.pad.ZeroPadding.pad(vt,Et)},unpad:function(vt){dt.pad.ZeroPadding.unpad(vt),vt.sigBytes--}},dt.pad.Iso97971})}(padIso97971)),padIso97971Exports}var padZeropaddingExports={},padZeropadding={get exports(){return padZeropaddingExports},set exports(lt){padZeropaddingExports=lt}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(dt){return dt.pad.ZeroPadding={pad:function(vt,Et){var St=Et*4;vt.clamp(),vt.sigBytes+=St-(vt.sigBytes%St||St)},unpad:function(vt){for(var Et=vt.words,St=vt.sigBytes-1,St=vt.sigBytes-1;St>=0;St--)if(Et[St>>>2]>>>24-St%4*8&255){vt.sigBytes=St+1;break}}},dt.pad.ZeroPadding})}(padZeropadding)),padZeropaddingExports}var padNopaddingExports={},padNopadding={get exports(){return padNopaddingExports},set exports(lt){padNopaddingExports=lt}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(dt){return dt.pad.NoPadding={pad:function(){},unpad:function(){}},dt.pad.NoPadding})}(padNopadding)),padNopaddingExports}var formatHexExports={},formatHex={get exports(){return formatHexExports},set exports(lt){formatHexExports=lt}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(dt){return function(vt){var Et=dt,St=Et.lib,Tt=St.CipherParams,At=Et.enc,Ct=At.Hex,Rt=Et.format;Rt.Hex={stringify:function(Dt){return Dt.ciphertext.toString(Ct)},parse:function(Dt){var kt=Ct.parse(Dt);return Tt.create({ciphertext:kt})}}}(),dt.format.Hex})}(formatHex)),formatHexExports}var aesExports={},aes={get exports(){return aesExports},set exports(lt){aesExports=lt}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.BlockCipher,Tt=vt.algo,At=[],Ct=[],Rt=[],Dt=[],kt=[],Nt=[],zt=[],Wt=[],nr=[],Ut=[];(function(){for(var Ft=[],tr=0;tr<256;tr++)tr<128?Ft[tr]=tr<<1:Ft[tr]=tr<<1^283;for(var cr=0,Kt=0,tr=0;tr<256;tr++){var Zt=Kt^Kt<<1^Kt<<2^Kt<<3^Kt<<4;Zt=Zt>>>8^Zt&255^99,At[cr]=Zt,Ct[Zt]=cr;var rr=Ft[cr],ar=Ft[rr],sr=Ft[ar],dr=Ft[Zt]*257^Zt*16843008;Rt[cr]=dr<<24|dr>>>8,Dt[cr]=dr<<16|dr>>>16,kt[cr]=dr<<8|dr>>>24,Nt[cr]=dr;var dr=sr*16843009^ar*65537^rr*257^cr*16843008;zt[Zt]=dr<<24|dr>>>8,Wt[Zt]=dr<<16|dr>>>16,nr[Zt]=dr<<8|dr>>>24,Ut[Zt]=dr,cr?(cr=rr^Ft[Ft[Ft[sr^rr]]],Kt^=Ft[Ft[Kt]]):cr=Kt=1}})();var Ht=[0,1,2,4,8,16,32,64,128,27,54],Bt=Tt.AES=St.extend({_doReset:function(){var Ft;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var tr=this._keyPriorReset=this._key,cr=tr.words,Kt=tr.sigBytes/4,Zt=this._nRounds=Kt+6,rr=(Zt+1)*4,ar=this._keySchedule=[],sr=0;sr<rr;sr++)sr<Kt?ar[sr]=cr[sr]:(Ft=ar[sr-1],sr%Kt?Kt>6&&sr%Kt==4&&(Ft=At[Ft>>>24]<<24|At[Ft>>>16&255]<<16|At[Ft>>>8&255]<<8|At[Ft&255]):(Ft=Ft<<8|Ft>>>24,Ft=At[Ft>>>24]<<24|At[Ft>>>16&255]<<16|At[Ft>>>8&255]<<8|At[Ft&255],Ft^=Ht[sr/Kt|0]<<24),ar[sr]=ar[sr-Kt]^Ft);for(var dr=this._invKeySchedule=[],fr=0;fr<rr;fr++){var sr=rr-fr;if(fr%4)var Ft=ar[sr];else var Ft=ar[sr-4];fr<4||sr<=4?dr[fr]=Ft:dr[fr]=zt[At[Ft>>>24]]^Wt[At[Ft>>>16&255]]^nr[At[Ft>>>8&255]]^Ut[At[Ft&255]]}}},encryptBlock:function(Ft,tr){this._doCryptBlock(Ft,tr,this._keySchedule,Rt,Dt,kt,Nt,At)},decryptBlock:function(Ft,tr){var cr=Ft[tr+1];Ft[tr+1]=Ft[tr+3],Ft[tr+3]=cr,this._doCryptBlock(Ft,tr,this._invKeySchedule,zt,Wt,nr,Ut,Ct);var cr=Ft[tr+1];Ft[tr+1]=Ft[tr+3],Ft[tr+3]=cr},_doCryptBlock:function(Ft,tr,cr,Kt,Zt,rr,ar,sr){for(var dr=this._nRounds,fr=Ft[tr]^cr[0],pr=Ft[tr+1]^cr[1],xr=Ft[tr+2]^cr[2],lr=Ft[tr+3]^cr[3],hr=4,ur=1;ur<dr;ur++){var mr=Kt[fr>>>24]^Zt[pr>>>16&255]^rr[xr>>>8&255]^ar[lr&255]^cr[hr++],ir=Kt[pr>>>24]^Zt[xr>>>16&255]^rr[lr>>>8&255]^ar[fr&255]^cr[hr++],_r=Kt[xr>>>24]^Zt[lr>>>16&255]^rr[fr>>>8&255]^ar[pr&255]^cr[hr++],yr=Kt[lr>>>24]^Zt[fr>>>16&255]^rr[pr>>>8&255]^ar[xr&255]^cr[hr++];fr=mr,pr=ir,xr=_r,lr=yr}var mr=(sr[fr>>>24]<<24|sr[pr>>>16&255]<<16|sr[xr>>>8&255]<<8|sr[lr&255])^cr[hr++],ir=(sr[pr>>>24]<<24|sr[xr>>>16&255]<<16|sr[lr>>>8&255]<<8|sr[fr&255])^cr[hr++],_r=(sr[xr>>>24]<<24|sr[lr>>>16&255]<<16|sr[fr>>>8&255]<<8|sr[pr&255])^cr[hr++],yr=(sr[lr>>>24]<<24|sr[fr>>>16&255]<<16|sr[pr>>>8&255]<<8|sr[xr&255])^cr[hr++];Ft[tr]=mr,Ft[tr+1]=ir,Ft[tr+2]=_r,Ft[tr+3]=yr},keySize:256/32});vt.AES=St._createHelper(Bt)}(),dt.AES})}(aes)),aesExports}var tripledesExports={},tripledes={get exports(){return tripledesExports},set exports(lt){tripledesExports=lt}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.WordArray,Tt=Et.BlockCipher,At=vt.algo,Ct=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],Rt=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],Dt=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],kt=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],Nt=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],zt=At.DES=Tt.extend({_doReset:function(){for(var Ht=this._key,Bt=Ht.words,Ft=[],tr=0;tr<56;tr++){var cr=Ct[tr]-1;Ft[tr]=Bt[cr>>>5]>>>31-cr%32&1}for(var Kt=this._subKeys=[],Zt=0;Zt<16;Zt++){for(var rr=Kt[Zt]=[],ar=Dt[Zt],tr=0;tr<24;tr++)rr[tr/6|0]|=Ft[(Rt[tr]-1+ar)%28]<<31-tr%6,rr[4+(tr/6|0)]|=Ft[28+(Rt[tr+24]-1+ar)%28]<<31-tr%6;rr[0]=rr[0]<<1|rr[0]>>>31;for(var tr=1;tr<7;tr++)rr[tr]=rr[tr]>>>(tr-1)*4+3;rr[7]=rr[7]<<5|rr[7]>>>27}for(var sr=this._invSubKeys=[],tr=0;tr<16;tr++)sr[tr]=Kt[15-tr]},encryptBlock:function(Ht,Bt){this._doCryptBlock(Ht,Bt,this._subKeys)},decryptBlock:function(Ht,Bt){this._doCryptBlock(Ht,Bt,this._invSubKeys)},_doCryptBlock:function(Ht,Bt,Ft){this._lBlock=Ht[Bt],this._rBlock=Ht[Bt+1],Wt.call(this,4,252645135),Wt.call(this,16,65535),nr.call(this,2,858993459),nr.call(this,8,16711935),Wt.call(this,1,1431655765);for(var tr=0;tr<16;tr++){for(var cr=Ft[tr],Kt=this._lBlock,Zt=this._rBlock,rr=0,ar=0;ar<8;ar++)rr|=kt[ar][((Zt^cr[ar])&Nt[ar])>>>0];this._lBlock=Zt,this._rBlock=Kt^rr}var sr=this._lBlock;this._lBlock=this._rBlock,this._rBlock=sr,Wt.call(this,1,1431655765),nr.call(this,8,16711935),nr.call(this,2,858993459),Wt.call(this,16,65535),Wt.call(this,4,252645135),Ht[Bt]=this._lBlock,Ht[Bt+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function Wt(Ht,Bt){var Ft=(this._lBlock>>>Ht^this._rBlock)&Bt;this._rBlock^=Ft,this._lBlock^=Ft<<Ht}function nr(Ht,Bt){var Ft=(this._rBlock>>>Ht^this._lBlock)&Bt;this._lBlock^=Ft,this._rBlock^=Ft<<Ht}vt.DES=Tt._createHelper(zt);var Ut=At.TripleDES=Tt.extend({_doReset:function(){var Ht=this._key,Bt=Ht.words;if(Bt.length!==2&&Bt.length!==4&&Bt.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var Ft=Bt.slice(0,2),tr=Bt.length<4?Bt.slice(0,2):Bt.slice(2,4),cr=Bt.length<6?Bt.slice(0,2):Bt.slice(4,6);this._des1=zt.createEncryptor(St.create(Ft)),this._des2=zt.createEncryptor(St.create(tr)),this._des3=zt.createEncryptor(St.create(cr))},encryptBlock:function(Ht,Bt){this._des1.encryptBlock(Ht,Bt),this._des2.decryptBlock(Ht,Bt),this._des3.encryptBlock(Ht,Bt)},decryptBlock:function(Ht,Bt){this._des3.decryptBlock(Ht,Bt),this._des2.encryptBlock(Ht,Bt),this._des1.decryptBlock(Ht,Bt)},keySize:192/32,ivSize:64/32,blockSize:64/32});vt.TripleDES=Tt._createHelper(Ut)}(),dt.TripleDES})}(tripledes)),tripledesExports}var rc4Exports={},rc4={get exports(){return rc4Exports},set exports(lt){rc4Exports=lt}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.StreamCipher,Tt=vt.algo,At=Tt.RC4=St.extend({_doReset:function(){for(var Dt=this._key,kt=Dt.words,Nt=Dt.sigBytes,zt=this._S=[],Wt=0;Wt<256;Wt++)zt[Wt]=Wt;for(var Wt=0,nr=0;Wt<256;Wt++){var Ut=Wt%Nt,Ht=kt[Ut>>>2]>>>24-Ut%4*8&255;nr=(nr+zt[Wt]+Ht)%256;var Bt=zt[Wt];zt[Wt]=zt[nr],zt[nr]=Bt}this._i=this._j=0},_doProcessBlock:function(Dt,kt){Dt[kt]^=Ct.call(this)},keySize:256/32,ivSize:0});function Ct(){for(var Dt=this._S,kt=this._i,Nt=this._j,zt=0,Wt=0;Wt<4;Wt++){kt=(kt+1)%256,Nt=(Nt+Dt[kt])%256;var nr=Dt[kt];Dt[kt]=Dt[Nt],Dt[Nt]=nr,zt|=Dt[(Dt[kt]+Dt[Nt])%256]<<24-Wt*8}return this._i=kt,this._j=Nt,zt}vt.RC4=St._createHelper(At);var Rt=Tt.RC4Drop=At.extend({cfg:At.cfg.extend({drop:192}),_doReset:function(){At._doReset.call(this);for(var Dt=this.cfg.drop;Dt>0;Dt--)Ct.call(this)}});vt.RC4Drop=St._createHelper(Rt)}(),dt.RC4})}(rc4)),rc4Exports}var rabbitExports={},rabbit={get exports(){return rabbitExports},set exports(lt){rabbitExports=lt}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.StreamCipher,Tt=vt.algo,At=[],Ct=[],Rt=[],Dt=Tt.Rabbit=St.extend({_doReset:function(){for(var Nt=this._key.words,zt=this.cfg.iv,Wt=0;Wt<4;Wt++)Nt[Wt]=(Nt[Wt]<<8|Nt[Wt]>>>24)&16711935|(Nt[Wt]<<24|Nt[Wt]>>>8)&4278255360;var nr=this._X=[Nt[0],Nt[3]<<16|Nt[2]>>>16,Nt[1],Nt[0]<<16|Nt[3]>>>16,Nt[2],Nt[1]<<16|Nt[0]>>>16,Nt[3],Nt[2]<<16|Nt[1]>>>16],Ut=this._C=[Nt[2]<<16|Nt[2]>>>16,Nt[0]&4294901760|Nt[1]&65535,Nt[3]<<16|Nt[3]>>>16,Nt[1]&4294901760|Nt[2]&65535,Nt[0]<<16|Nt[0]>>>16,Nt[2]&4294901760|Nt[3]&65535,Nt[1]<<16|Nt[1]>>>16,Nt[3]&4294901760|Nt[0]&65535];this._b=0;for(var Wt=0;Wt<4;Wt++)kt.call(this);for(var Wt=0;Wt<8;Wt++)Ut[Wt]^=nr[Wt+4&7];if(zt){var Ht=zt.words,Bt=Ht[0],Ft=Ht[1],tr=(Bt<<8|Bt>>>24)&16711935|(Bt<<24|Bt>>>8)&4278255360,cr=(Ft<<8|Ft>>>24)&16711935|(Ft<<24|Ft>>>8)&4278255360,Kt=tr>>>16|cr&4294901760,Zt=cr<<16|tr&65535;Ut[0]^=tr,Ut[1]^=Kt,Ut[2]^=cr,Ut[3]^=Zt,Ut[4]^=tr,Ut[5]^=Kt,Ut[6]^=cr,Ut[7]^=Zt;for(var Wt=0;Wt<4;Wt++)kt.call(this)}},_doProcessBlock:function(Nt,zt){var Wt=this._X;kt.call(this),At[0]=Wt[0]^Wt[5]>>>16^Wt[3]<<16,At[1]=Wt[2]^Wt[7]>>>16^Wt[5]<<16,At[2]=Wt[4]^Wt[1]>>>16^Wt[7]<<16,At[3]=Wt[6]^Wt[3]>>>16^Wt[1]<<16;for(var nr=0;nr<4;nr++)At[nr]=(At[nr]<<8|At[nr]>>>24)&16711935|(At[nr]<<24|At[nr]>>>8)&4278255360,Nt[zt+nr]^=At[nr]},blockSize:128/32,ivSize:64/32});function kt(){for(var Nt=this._X,zt=this._C,Wt=0;Wt<8;Wt++)Ct[Wt]=zt[Wt];zt[0]=zt[0]+1295307597+this._b|0,zt[1]=zt[1]+3545052371+(zt[0]>>>0<Ct[0]>>>0?1:0)|0,zt[2]=zt[2]+886263092+(zt[1]>>>0<Ct[1]>>>0?1:0)|0,zt[3]=zt[3]+1295307597+(zt[2]>>>0<Ct[2]>>>0?1:0)|0,zt[4]=zt[4]+3545052371+(zt[3]>>>0<Ct[3]>>>0?1:0)|0,zt[5]=zt[5]+886263092+(zt[4]>>>0<Ct[4]>>>0?1:0)|0,zt[6]=zt[6]+1295307597+(zt[5]>>>0<Ct[5]>>>0?1:0)|0,zt[7]=zt[7]+3545052371+(zt[6]>>>0<Ct[6]>>>0?1:0)|0,this._b=zt[7]>>>0<Ct[7]>>>0?1:0;for(var Wt=0;Wt<8;Wt++){var nr=Nt[Wt]+zt[Wt],Ut=nr&65535,Ht=nr>>>16,Bt=((Ut*Ut>>>17)+Ut*Ht>>>15)+Ht*Ht,Ft=((nr&4294901760)*nr|0)+((nr&65535)*nr|0);Rt[Wt]=Bt^Ft}Nt[0]=Rt[0]+(Rt[7]<<16|Rt[7]>>>16)+(Rt[6]<<16|Rt[6]>>>16)|0,Nt[1]=Rt[1]+(Rt[0]<<8|Rt[0]>>>24)+Rt[7]|0,Nt[2]=Rt[2]+(Rt[1]<<16|Rt[1]>>>16)+(Rt[0]<<16|Rt[0]>>>16)|0,Nt[3]=Rt[3]+(Rt[2]<<8|Rt[2]>>>24)+Rt[1]|0,Nt[4]=Rt[4]+(Rt[3]<<16|Rt[3]>>>16)+(Rt[2]<<16|Rt[2]>>>16)|0,Nt[5]=Rt[5]+(Rt[4]<<8|Rt[4]>>>24)+Rt[3]|0,Nt[6]=Rt[6]+(Rt[5]<<16|Rt[5]>>>16)+(Rt[4]<<16|Rt[4]>>>16)|0,Nt[7]=Rt[7]+(Rt[6]<<8|Rt[6]>>>24)+Rt[5]|0}vt.Rabbit=St._createHelper(Dt)}(),dt.Rabbit})}(rabbit)),rabbitExports}var rabbitLegacyExports={},rabbitLegacy={get exports(){return rabbitLegacyExports},set exports(lt){rabbitLegacyExports=lt}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(dt){return function(){var vt=dt,Et=vt.lib,St=Et.StreamCipher,Tt=vt.algo,At=[],Ct=[],Rt=[],Dt=Tt.RabbitLegacy=St.extend({_doReset:function(){var Nt=this._key.words,zt=this.cfg.iv,Wt=this._X=[Nt[0],Nt[3]<<16|Nt[2]>>>16,Nt[1],Nt[0]<<16|Nt[3]>>>16,Nt[2],Nt[1]<<16|Nt[0]>>>16,Nt[3],Nt[2]<<16|Nt[1]>>>16],nr=this._C=[Nt[2]<<16|Nt[2]>>>16,Nt[0]&4294901760|Nt[1]&65535,Nt[3]<<16|Nt[3]>>>16,Nt[1]&4294901760|Nt[2]&65535,Nt[0]<<16|Nt[0]>>>16,Nt[2]&4294901760|Nt[3]&65535,Nt[1]<<16|Nt[1]>>>16,Nt[3]&4294901760|Nt[0]&65535];this._b=0;for(var Ut=0;Ut<4;Ut++)kt.call(this);for(var Ut=0;Ut<8;Ut++)nr[Ut]^=Wt[Ut+4&7];if(zt){var Ht=zt.words,Bt=Ht[0],Ft=Ht[1],tr=(Bt<<8|Bt>>>24)&16711935|(Bt<<24|Bt>>>8)&4278255360,cr=(Ft<<8|Ft>>>24)&16711935|(Ft<<24|Ft>>>8)&4278255360,Kt=tr>>>16|cr&4294901760,Zt=cr<<16|tr&65535;nr[0]^=tr,nr[1]^=Kt,nr[2]^=cr,nr[3]^=Zt,nr[4]^=tr,nr[5]^=Kt,nr[6]^=cr,nr[7]^=Zt;for(var Ut=0;Ut<4;Ut++)kt.call(this)}},_doProcessBlock:function(Nt,zt){var Wt=this._X;kt.call(this),At[0]=Wt[0]^Wt[5]>>>16^Wt[3]<<16,At[1]=Wt[2]^Wt[7]>>>16^Wt[5]<<16,At[2]=Wt[4]^Wt[1]>>>16^Wt[7]<<16,At[3]=Wt[6]^Wt[3]>>>16^Wt[1]<<16;for(var nr=0;nr<4;nr++)At[nr]=(At[nr]<<8|At[nr]>>>24)&16711935|(At[nr]<<24|At[nr]>>>8)&4278255360,Nt[zt+nr]^=At[nr]},blockSize:128/32,ivSize:64/32});function kt(){for(var Nt=this._X,zt=this._C,Wt=0;Wt<8;Wt++)Ct[Wt]=zt[Wt];zt[0]=zt[0]+1295307597+this._b|0,zt[1]=zt[1]+3545052371+(zt[0]>>>0<Ct[0]>>>0?1:0)|0,zt[2]=zt[2]+886263092+(zt[1]>>>0<Ct[1]>>>0?1:0)|0,zt[3]=zt[3]+1295307597+(zt[2]>>>0<Ct[2]>>>0?1:0)|0,zt[4]=zt[4]+3545052371+(zt[3]>>>0<Ct[3]>>>0?1:0)|0,zt[5]=zt[5]+886263092+(zt[4]>>>0<Ct[4]>>>0?1:0)|0,zt[6]=zt[6]+1295307597+(zt[5]>>>0<Ct[5]>>>0?1:0)|0,zt[7]=zt[7]+3545052371+(zt[6]>>>0<Ct[6]>>>0?1:0)|0,this._b=zt[7]>>>0<Ct[7]>>>0?1:0;for(var Wt=0;Wt<8;Wt++){var nr=Nt[Wt]+zt[Wt],Ut=nr&65535,Ht=nr>>>16,Bt=((Ut*Ut>>>17)+Ut*Ht>>>15)+Ht*Ht,Ft=((nr&4294901760)*nr|0)+((nr&65535)*nr|0);Rt[Wt]=Bt^Ft}Nt[0]=Rt[0]+(Rt[7]<<16|Rt[7]>>>16)+(Rt[6]<<16|Rt[6]>>>16)|0,Nt[1]=Rt[1]+(Rt[0]<<8|Rt[0]>>>24)+Rt[7]|0,Nt[2]=Rt[2]+(Rt[1]<<16|Rt[1]>>>16)+(Rt[0]<<16|Rt[0]>>>16)|0,Nt[3]=Rt[3]+(Rt[2]<<8|Rt[2]>>>24)+Rt[1]|0,Nt[4]=Rt[4]+(Rt[3]<<16|Rt[3]>>>16)+(Rt[2]<<16|Rt[2]>>>16)|0,Nt[5]=Rt[5]+(Rt[4]<<8|Rt[4]>>>24)+Rt[3]|0,Nt[6]=Rt[6]+(Rt[5]<<16|Rt[5]>>>16)+(Rt[4]<<16|Rt[4]>>>16)|0,Nt[7]=Rt[7]+(Rt[6]<<8|Rt[6]>>>24)+Rt[5]|0}vt.RabbitLegacy=St._createHelper(Dt)}(),dt.RabbitLegacy})}(rabbitLegacy)),rabbitLegacyExports}(function(lt,ft){(function(dt,vt,Et){lt.exports=vt(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy())})(commonjsGlobal$1,function(dt){return dt})})(cryptoJs);const CryptoJS=cryptoJsExports,format={stringify:lt=>{const ft=lt.ciphertext.toString(CryptoJS.enc.Base64),dt=lt.iv.toString()||"",vt=lt.salt.toString()||"";return JSON.stringify({ct:ft,iv:dt,salt:vt})},parse:lt=>{const ft=JSON.parse(lt),dt=CryptoJS.enc.Base64.parse(ft.ct),vt=CryptoJS.enc.Hex.parse(ft.iv)||"",Et=CryptoJS.enc.Hex.parse(ft.s)||"";return CryptoJS.lib.CipherParams.create({ciphertext:dt,iv:vt,salt:Et})}};registerProvider({id:"gdriveplayer",displayName:"gdriveplayer",disabled:!0,rank:69,type:[MWMediaType.MOVIE],async scrape({progress,media:{imdbId}}){progress(10);const streamRes=await proxiedFetch("https://database.gdriveplayer.us/player.php",{params:{imdb:imdbId}});progress(90);const page=new DOMParser().parseFromString(streamRes,"text/html"),script=Array.from(page.querySelectorAll("script")).find(lt=>{var ft;return(ft=lt.textContent)==null?void 0:ft.includes("eval")});if(!script||!script.textContent)throw new Error("Could not find stream");const data=unpack_1(script.textContent).split("var data=\\'")[1].split("\\'")[0].replace(/\\/g,""),decryptedData=unpack_1(CryptoJS.AES.decrypt(data,"alsfheafsjklNIWORNiolNIOWNKLNXakjsfwnBdwjbwfkjbJjkopfjweopjASoiwnrflakefneiofrt",{format}).toString(CryptoJS.enc.Utf8)),sources=JSON.parse(JSON.stringify(eval(decryptedData.split("sources:")[1].split(",image")[0].replace(/\\/g,"").replace(/document\.referrer/g,'""')))),source=sources[sources.length-1];let quality;return source.label==="720p"?quality=MWStreamQuality.Q720P:quality=MWStreamQuality.QUNKNOWN,{stream:{streamUrl:`https:${source.file}`,type:source.type,quality,captions:[]},embeds:[]}}});const flixHqBase="https://api.consumet.org/meta/tmdb";function castSubtitles({url:lt,lang:ft}){return{url:lt,langIso:ft,type:lt.substring(lt.length-3)==="vtt"?MWCaptionType.VTT:MWCaptionType.SRT}}const qualityMap$2={360:MWStreamQuality.Q360P,540:MWStreamQuality.Q540P,480:MWStreamQuality.Q480P,720:MWStreamQuality.Q720P,1080:MWStreamQuality.Q1080P};function flixTypeToMWType(lt){return lt==="Movie"?MWMediaType.MOVIE:MWMediaType.SERIES}registerProvider({id:"flixhq",displayName:"FlixHQ",rank:100,type:[MWMediaType.MOVIE,MWMediaType.SERIES],async scrape({media:lt,episode:ft,progress:dt}){var Rt;if(!this.type.includes(lt.meta.type))throw new Error("Unsupported type");const Et=(await proxiedFetch(`/${encodeURIComponent(lt.meta.title)}`,{baseURL:flixHqBase})).results.find(Dt=>Dt.type!=="Movie"&&Dt.type!=="TV Series"?!1:compareTitle(Dt.title,lt.meta.title)&&flixTypeToMWType(Dt.type)===lt.meta.type&&Dt.releaseDate===lt.meta.year);if(!Et)throw new Error("No watchable item found");dt(25);const St=await proxiedFetch(`/info/${Et.id}`,{baseURL:flixHqBase,params:{type:flixTypeToMWType(Et.type)}});if(!St.id)throw new Error("No watchable item found");dt(50);let Tt;if(lt.meta.type===MWMediaType.MOVIE)Tt=St.episodeId;else if(lt.meta.type===MWMediaType.SERIES){const Dt=lt.meta.seasonData.number,kt=(Rt=lt.meta.seasonData.episodes.find(zt=>zt.id===ft))==null?void 0:Rt.number;Tt=St.seasons.find(zt=>zt.season===Dt).episodes.find(zt=>zt.episode===kt).id}if(!Tt)throw new Error("No watchable item found");dt(75);const At=await proxiedFetch(`/watch/${Tt}`,{baseURL:flixHqBase,params:{id:St.id}});if(!At.sources)throw new Error("No watchable item found");const Ct=At.sources[0];return{embeds:[],stream:{streamUrl:Ct.url,quality:qualityMap$2[Ct.quality],type:Ct.isM3U8?MWStreamType.HLS:MWStreamType.MP4,captions:At.subtitles.filter(Dt=>!Dt.lang.includes("(maybe)")).map(castSubtitles)}}}});const nanoid=customAlphabet("0123456789abcdef",32),qualityMap$1={"360p":MWStreamQuality.Q360P,"480p":MWStreamQuality.Q480P,"720p":MWStreamQuality.Q720P,"1080p":MWStreamQuality.Q1080P},iv=atob("d0VpcGhUbiE="),key$1=atob("MTIzZDZjZWRmNjI2ZHk1NDIzM2FhMXc2"),apiUrls=[atob("aHR0cHM6Ly9zaG93Ym94LnNoZWd1Lm5ldC9hcGkvYXBpX2NsaWVudC9pbmRleC8="),atob("aHR0cHM6Ly9tYnBhcGkuc2hlZ3UubmV0L2FwaS9hcGlfY2xpZW50L2luZGV4Lw==")],appKey=atob("bW92aWVib3g="),appId=atob("Y29tLnRkby5zaG93Ym94"),crypto$1={encrypt(lt){return CryptoJS.TripleDES.encrypt(lt,CryptoJS.enc.Utf8.parse(key$1),{iv:CryptoJS.enc.Utf8.parse(iv)}).toString()},getVerify(lt,ft,dt){return lt?CryptoJS.MD5(CryptoJS.MD5(ft).toString()+dt+lt).toString():null}},expiry=()=>Math.floor(Date.now()/1e3+60*60*12),get=(lt,ft=!1)=>{const dt={childmode:"0",app_version:"11.5",appid:appId,lang:"en",expired_date:`${expiry()}`,platform:"android",channel:"Website"},vt=crypto$1.encrypt(JSON.stringify({...dt,...lt})),Et=CryptoJS.MD5(appKey).toString(),St=crypto$1.getVerify(vt,appKey,key$1),Tt=JSON.stringify({app_key:Et,verify:St,encrypt_data:vt}),At=btoa(Tt),Ct=new URLSearchParams;Ct.append("data",At),Ct.append("appid","27"),Ct.append("platform","android"),Ct.append("version","129"),Ct.append("medium","Website");const Rt=ft?apiUrls[1]:apiUrls[0];return proxiedFetch(Rt,{method:"POST",parseResponse:JSON.parse,headers:{Platform:"android","Content-Type":"application/x-www-form-urlencoded"},body:`${Ct.toString()}&token${nanoid()}`})},getBestQuality=lt=>lt.find(ft=>ft.quality==="1080p"&&ft.path)??lt.find(ft=>ft.quality==="720p"&&ft.path)??lt.find(ft=>ft.quality==="480p"&&ft.path)??lt.find(ft=>ft.quality==="360p"&&ft.path);registerProvider({id:"superstream",displayName:"Superstream",rank:200,type:[MWMediaType.MOVIE,MWMediaType.SERIES],async scrape({media:lt,episode:ft,progress:dt}){var zt,Wt;const vt={module:"Search3",page:"1",type:"all",keyword:lt.meta.title,pagelimit:"20"},Et=(await get(vt,!0)).data;dt(33);const St=Et.find(nr=>compareTitle(nr.title,lt.meta.title)&&nr.year===Number(lt.meta.year));if(!St)throw new Error("No entry found on SuperStream");const Tt=St.id;if(lt.meta.type===MWMediaType.MOVIE){const Ut=(await get({uid:"",module:"Movie_downloadurl_v3",mid:Tt,oss:"1",group:""})).data;dt(50);const Ht=getBestQuality(Ut.list);if(!Ht)throw new Error("No quality could be found.");const Bt={fid:Ht.fid,uid:"",module:"Movie_srt_list_v2",mid:Tt},tr=(await get(Bt)).data.list.map(cr=>({needsProxy:!0,langIso:cr.language,url:cr.subtitles[0].file_path,type:MWCaptionType.SRT}));return{embeds:[],stream:{streamUrl:Ht.path,quality:qualityMap$1[Ht.quality],type:MWStreamType.MP4,captions:tr}}}if(lt.meta.type!==MWMediaType.SERIES)throw new Error("Unsupported type");const At={uid:"",module:"TV_downloadurl_v3",tid:Tt,season:lt.meta.seasonData.number.toString(),episode:(((zt=lt.meta.seasonData.episodes.find(nr=>nr.id===ft))==null?void 0:zt.number)??1).toString(),oss:"1",group:""},Ct=(await get(At)).data;dt(66);const Rt=getBestQuality(Ct.list);if(!Rt)throw new Error("No quality could be found.");const Dt={fid:Rt.fid,uid:"",module:"TV_srt_list_v2",episode:((Wt=lt.meta.seasonData.episodes.find(nr=>nr.id===ft))==null?void 0:Wt.number)??1,tid:Tt,season:lt.meta.seasonData.number.toString()},Nt=(await get(Dt)).data.list.map(nr=>{const Ut=nr;return Ut.subtitles=nr.subtitles.filter(Ht=>{const Bt=Ht.file_path.slice(-3);return[MWCaptionType.SRT,MWCaptionType.VTT].includes(Bt)}),{needsProxy:!0,langIso:nr.language,url:Ut.subtitles[0].file_path,type:MWCaptionType.SRT}});return{embeds:[],stream:{quality:qualityMap$1[Rt.quality],streamUrl:Rt.path,type:MWStreamType.MP4,captions:Nt}}}});const netfilmBase="https://net-film.vercel.app",qualityMap={360:MWStreamQuality.Q360P,540:MWStreamQuality.Q540P,480:MWStreamQuality.Q480P,720:MWStreamQuality.Q720P,1080:MWStreamQuality.Q1080P};registerProvider({id:"netfilm",displayName:"NetFilm",rank:15,type:[MWMediaType.MOVIE,MWMediaType.SERIES],disabled:!0,async scrape({media:lt,episode:ft,progress:dt}){var nr;if(!this.type.includes(lt.meta.type))throw new Error("Unsupported type");const Et=(await proxiedFetch(`/api/search?keyword=${encodeURIComponent(lt.meta.title)}`,{baseURL:netfilmBase})).data.results;if(dt(25),lt.meta.type===MWMediaType.MOVIE){const Ut=Et.find(Kt=>Kt.name===lt.meta.title&&Kt.releaseTime===lt.meta.year);if(!Ut)throw new Error("No watchable item found");const Ht=Ut.id;dt(75);const Ft=(await proxiedFetch(`/api/episode?id=${Ht}`,{baseURL:netfilmBase})).data,tr=Ft.qualities.reduce((Kt,Zt)=>Zt.quality>Kt.quality?Zt:Kt),cr=Ft.subtitles.map(Kt=>({needsProxy:!1,url:Kt.url.replace("https://convert-srt-to-vtt.vercel.app/?url=",""),type:MWCaptionType.SRT,langIso:Kt.language}));return{embeds:[],stream:{streamUrl:tr.url.replace("akm-cdn","aws-cdn").replace("gg-cdn","aws-cdn"),quality:qualityMap[tr.quality],type:MWStreamType.HLS,captions:cr}}}if(lt.meta.type!==MWMediaType.SERIES)throw new Error("Unsupported type");const St=lt.meta.seasonData.number,At=Et.filter(Ut=>Ut.name.includes(lt.meta.title)).map(Ut=>({...Ut,season:parseInt(Ut.name.split(" ").at(-1),10)||1})).find(Ut=>Ut.season===St);dt(50);const Ct=await proxiedFetch(`/api/detail?id=${At.id}&category=${At.categoryTag[0].id}`,{baseURL:netfilmBase}),Rt=(nr=lt.meta.seasonData.episodes.find(Ut=>Ut.id===ft))==null?void 0:nr.number,Dt=Ct.data.episodeVo.find(Ut=>Ut.seriesNo===Rt);dt(75);const Nt=(await proxiedFetch(`/api/episode?id=${At.id}&category=1&episode=${Dt.id}`,{baseURL:netfilmBase})).data,zt=Nt.qualities.reduce((Ut,Ht)=>Ht.quality>Ut.quality?Ht:Ut),Wt=Nt.subtitles.map(Ut=>({needsProxy:!1,url:Ut.url.replace("https://convert-srt-to-vtt.vercel.app/?url=",""),type:MWCaptionType.SRT,langIso:Ut.language}));return{embeds:[],stream:{streamUrl:zt.url.replace("akm-cdn","aws-cdn").replace("gg-cdn","aws-cdn"),quality:qualityMap[zt.quality],type:MWStreamType.HLS,captions:Wt}}}});var MWEmbedType=(lt=>(lt.M4UFREE="m4ufree",lt.STREAMM4U="streamm4u",lt.PLAYM4U="playm4u",lt))(MWEmbedType||{});const HOST$1="m4ufree.com",URL_BASE$1=`https://${HOST$1}`,URL_SEARCH=`${URL_BASE$1}/search`,URL_AJAX=`${URL_BASE$1}/ajax`,URL_AJAX_TV=`${URL_BASE$1}/ajaxtv`,REGEX_TITLE_AND_YEAR=/(.*) \(?(\d*|\d*-|\d*-\d*)\)?$/,REGEX_TYPE=/.*-(movie|tvshow)-online-free-m4ufree\.html/,REGEX_COOKIES=/XSRF-TOKEN=(.*?);.*laravel_session=(.*?);/,REGEX_SEASON_EPISODE=/S(\d*)-E(\d*)/;function toDom(lt){return new DOMParser().parseFromString(lt,"text/html")}registerProvider({id:"m4ufree",displayName:"m4ufree",rank:-1,disabled:!0,type:[MWMediaType.MOVIE,MWMediaType.SERIES],async scrape({media:lt,type:ft,episode:dt,season:vt}){var Ht,Bt,Ft,tr,cr;const Et=((Bt=(Ht=lt.meta.seasons)==null?void 0:Ht.find(Kt=>Kt.id===vt))==null?void 0:Bt.number)||1,St=lt.meta.type===MWMediaType.SERIES?((Ft=lt.meta.seasonData.episodes.find(Kt=>Kt.id===dt))==null?void 0:Ft.number)||1:void 0,Tt=[],At=await proxiedFetch(`${URL_SEARCH}/${encodeURIComponent(lt.meta.title)}.html`);let Ct=toDom(At);const Dt=[...Ct.querySelectorAll(".item")].map(Kt=>{var xr;const Zt=(xr=Kt.querySelector(".tiptitle p"))==null?void 0:xr.innerHTML;if(!Zt)return;let rr=REGEX_TITLE_AND_YEAR.exec(Zt);if(!rr||!rr[1]||!rr[2])return;const ar=rr[1],sr=Number(rr[2].slice(0,4)),dr=Kt.querySelector("a");if(!dr)return;const fr=dr.href;if(rr=REGEX_TYPE.exec(fr),!rr||!rr[1])return;let pr=rr[1];return pr=pr==="tvshow"?"show":"movie",{type:pr,title:ar,year:sr,href:fr}}).filter(Kt=>Kt).find(Kt=>Kt&&Kt.title===lt.meta.title&&Kt.year.toString()===lt.meta.year);if(!Dt)return{embeds:Tt};let kt="";const Nt=await proxiedFetch(Dt.href,{onResponse(Kt){kt=Kt.response.headers.get("X-Set-Cookie")}});Ct=toDom(Nt);let zt=REGEX_COOKIES.exec(kt);if(!zt||!zt[1]||!zt[2])throw new Error("No regexResults, yikesssssss kinda gross idk");const Wt=`XSRF-TOKEN=${zt[1]}; laravel_session=${zt[2]}`,nr=(tr=Ct.querySelector('meta[name="csrf-token"]'))==null?void 0:tr.getAttribute("content");if(!nr)return{embeds:Tt};if(ft===MWMediaType.SERIES){const Zt=[...Ct.querySelectorAll(".episode")].map(sr=>{if(zt=REGEX_SEASON_EPISODE.exec(sr.innerHTML),!zt||!zt[1]||!zt[2])return;const dr=Number(zt[1]),fr=Number(zt[2]);return{id:sr.getAttribute("idepisode"),episode:dr,season:fr}}).filter(sr=>sr).find(sr=>sr&&sr.episode===St&&sr.season===Et);if(!Zt)return{embeds:Tt};const rr=`idepisode=${Zt.id}&_token=${nr}`,ar=await proxiedFetch(URL_AJAX_TV,{method:"POST",headers:{Accept:"*/*","Accept-Encoding":"gzip, deflate, br","Accept-Language":"en-US,en;q=0.9","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8","X-Requested-With":"XMLHttpRequest","Sec-CH-UA":'"Not?A_Brand";v="8", "Chromium";v="108", "Microsoft Edge";v="108"',"Sec-CH-UA-Mobile":"?0","Sec-CH-UA-Platform":'"Linux"',"Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","X-Cookie":Wt,"X-Origin":URL_BASE$1,"X-Referer":Dt.href},body:rr});Ct=toDom(ar)}const Ut=[...Ct.querySelectorAll(".singlemv")].map(Kt=>Kt.getAttribute("data"));for(const Kt of Ut){const Zt=`m4u=${Kt}&_token=${nr}`,rr=await proxiedFetch(URL_AJAX,{method:"POST",headers:{Accept:"*/*","Accept-Encoding":"gzip, deflate, br","Accept-Language":"en-US,en;q=0.9","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8","X-Requested-With":"XMLHttpRequest","Sec-CH-UA":'"Not?A_Brand";v="8", "Chromium";v="108", "Microsoft Edge";v="108"',"Sec-CH-UA-Mobile":"?0","Sec-CH-UA-Platform":'"Linux"',"Sec-Fetch-Site":"same-origin","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","X-Cookie":Wt,"X-Origin":URL_BASE$1,"X-Referer":Dt.href},body:Zt}),sr=(cr=toDom(rr).querySelector("iframe"))==null?void 0:cr.src,dr=pr=>pr.startsWith("https://streamm4u.club")?MWEmbedType.STREAMM4U:pr.startsWith("https://play.playm4u.xyz")?MWEmbedType.PLAYM4U:null;if(!sr)continue;const fr=dr(sr);fr&&Tt.push({url:sr,type:fr})}return console.log(Tt),{embeds:Tt}}});const HOST="streamm4u.club",URL_BASE=`https://${HOST}`,URL_API=`${URL_BASE}/api`,URL_API_SOURCE=`${URL_API}/source`;async function scrape(lt){const ft=[],dt=lt.split("/").pop();console.log(`${URL_API_SOURCE}/${dt}`);const vt=await proxiedFetch(`${URL_API_SOURCE}/${dt}`,{method:"POST",body:`r=&d=${HOST}`});if(vt.success){const Et=vt.data;for(const St of Et)ft.push({embedId:"",streamUrl:St.file,quality:St.label,type:St.type,captions:[]})}return ft}registerEmbedScraper({id:"streamm4u",displayName:"streamm4u",for:MWEmbedType.STREAMM4U,rank:100,async getStream({progress:lt,url:ft}){const vt=(await scrape(ft)).sort((Et,St)=>Number(St.quality.replace("p",""))-Number(Et.quality.replace("p","")))[0];if(!vt)throw new Error("No source found");return lt(100),vt}});registerEmbedScraper({id:"playm4u",displayName:"playm4u",for:MWEmbedType.PLAYM4U,rank:0,async getStream(){return{embedId:"",streamUrl:"",quality:MWStreamQuality.Q1080P,captions:[],type:MWStreamType.MP4}}});initializeScraperStore();var eo;const key=((eo=window==null?void 0:window.__CONFIG__)==null?void 0:eo.VITE_KEY)??{}.VITE_KEY??null;key&&window.initMW(conf().PROXY_URLS,key);initializeChromecast();registerSW({immediate:!0});const LazyLoadedApp=React$1.lazy(async()=>(await initializeStores(),{default:App}));function TheRouter(lt){return conf().NORMAL_ROUTER?jsx(BrowserRouter,{children:lt.children}):jsx(HashRouter,{children:lt.children})}ReactDOM.render(jsx(React$1.StrictMode,{children:jsx(ErrorBoundary,{children:jsx(TheRouter,{children:jsx(reactExports.Suspense,{fallback:"",children:jsx(LazyLoadedApp,{})})})})}),document.getElementById("root"));
